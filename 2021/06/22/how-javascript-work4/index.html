<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>How JavaScript works - Event loop and the rise of Async programming + 5 ways to better coding with async/await | Yoha&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/blog/favicon.ico">
    <meta name="description" content="JavaScriptå·¥ä½œåŸç†ï¼šäº‹ä»¶å¾ªç¯">
    <meta name="title" content="JavaScriptå·¥ä½œåŸç†ï¼šäº‹ä»¶å¾ªç¯">
    <meta name="keywords" content="Javascriptå·¥ä½œåŸç†">
    <meta name="author" content="Yoha">
    
    <link rel="preload" href="/blog/assets/css/0.styles.337b0747.css" as="style"><link rel="preload" href="/blog/assets/js/app.17593fe9.js" as="script"><link rel="preload" href="/blog/assets/js/5.7f298969.js" as="script"><link rel="preload" href="/blog/assets/js/99.05b51c23.js" as="script"><link rel="preload" href="/blog/assets/js/9.4870dbdd.js" as="script"><link rel="preload" href="/blog/assets/js/6.a04f6604.js" as="script"><link rel="preload" href="/blog/assets/js/7.39ffec36.js" as="script"><link rel="preload" href="/blog/assets/js/10.515f05c9.js" as="script"><link rel="prefetch" href="/blog/assets/js/1.83cc03cb.js"><link rel="prefetch" href="/blog/assets/js/100.33d57e93.js"><link rel="prefetch" href="/blog/assets/js/101.fdd3c2ff.js"><link rel="prefetch" href="/blog/assets/js/102.4c6d8a9e.js"><link rel="prefetch" href="/blog/assets/js/103.732a1f79.js"><link rel="prefetch" href="/blog/assets/js/104.4924be72.js"><link rel="prefetch" href="/blog/assets/js/105.3763e049.js"><link rel="prefetch" href="/blog/assets/js/106.74a8a561.js"><link rel="prefetch" href="/blog/assets/js/107.56c42eea.js"><link rel="prefetch" href="/blog/assets/js/108.b74d8bef.js"><link rel="prefetch" href="/blog/assets/js/109.d007d899.js"><link rel="prefetch" href="/blog/assets/js/11.79fb589e.js"><link rel="prefetch" href="/blog/assets/js/110.231c8749.js"><link rel="prefetch" href="/blog/assets/js/111.4481b258.js"><link rel="prefetch" href="/blog/assets/js/112.ec6d5b9c.js"><link rel="prefetch" href="/blog/assets/js/113.4e1f7464.js"><link rel="prefetch" href="/blog/assets/js/114.1a88a69b.js"><link rel="prefetch" href="/blog/assets/js/115.a47911d2.js"><link rel="prefetch" href="/blog/assets/js/12.1805fe77.js"><link rel="prefetch" href="/blog/assets/js/13.37216965.js"><link rel="prefetch" href="/blog/assets/js/14.466a064e.js"><link rel="prefetch" href="/blog/assets/js/15.d9b52f55.js"><link rel="prefetch" href="/blog/assets/js/16.0fae2588.js"><link rel="prefetch" href="/blog/assets/js/17.f5c28ec0.js"><link rel="prefetch" href="/blog/assets/js/18.56e3c1d7.js"><link rel="prefetch" href="/blog/assets/js/19.6d08b748.js"><link rel="prefetch" href="/blog/assets/js/20.2fbb3980.js"><link rel="prefetch" href="/blog/assets/js/21.7cfeb78a.js"><link rel="prefetch" href="/blog/assets/js/22.46392a5a.js"><link rel="prefetch" href="/blog/assets/js/23.4a05c53d.js"><link rel="prefetch" href="/blog/assets/js/24.a0c2a2c9.js"><link rel="prefetch" href="/blog/assets/js/25.ea8b50c9.js"><link rel="prefetch" href="/blog/assets/js/26.a6220f62.js"><link rel="prefetch" href="/blog/assets/js/27.45852336.js"><link rel="prefetch" href="/blog/assets/js/28.ec2a9aa5.js"><link rel="prefetch" href="/blog/assets/js/29.f7203cd3.js"><link rel="prefetch" href="/blog/assets/js/30.54d06af2.js"><link rel="prefetch" href="/blog/assets/js/31.a45fdf87.js"><link rel="prefetch" href="/blog/assets/js/32.304767e1.js"><link rel="prefetch" href="/blog/assets/js/33.86f28bfe.js"><link rel="prefetch" href="/blog/assets/js/34.db2af63b.js"><link rel="prefetch" href="/blog/assets/js/35.675aa4ea.js"><link rel="prefetch" href="/blog/assets/js/36.c8d5fa82.js"><link rel="prefetch" href="/blog/assets/js/37.5b620d9f.js"><link rel="prefetch" href="/blog/assets/js/38.91489fb1.js"><link rel="prefetch" href="/blog/assets/js/39.0b8946b2.js"><link rel="prefetch" href="/blog/assets/js/4.8c4c410a.js"><link rel="prefetch" href="/blog/assets/js/40.c6e2fb5f.js"><link rel="prefetch" href="/blog/assets/js/41.c13c990c.js"><link rel="prefetch" href="/blog/assets/js/42.380fc902.js"><link rel="prefetch" href="/blog/assets/js/43.29ed2a89.js"><link rel="prefetch" href="/blog/assets/js/44.e5f1e84c.js"><link rel="prefetch" href="/blog/assets/js/45.8dd6ca98.js"><link rel="prefetch" href="/blog/assets/js/46.25cf2f6b.js"><link rel="prefetch" href="/blog/assets/js/47.35159e0a.js"><link rel="prefetch" href="/blog/assets/js/48.77e5a2ef.js"><link rel="prefetch" href="/blog/assets/js/49.279d3249.js"><link rel="prefetch" href="/blog/assets/js/50.6cc3d9e8.js"><link rel="prefetch" href="/blog/assets/js/51.e0b34583.js"><link rel="prefetch" href="/blog/assets/js/52.cc6c5b0c.js"><link rel="prefetch" href="/blog/assets/js/53.6e5a2bdc.js"><link rel="prefetch" href="/blog/assets/js/54.df3f9820.js"><link rel="prefetch" href="/blog/assets/js/55.48fd0e70.js"><link rel="prefetch" href="/blog/assets/js/56.44c0d495.js"><link rel="prefetch" href="/blog/assets/js/57.9c969573.js"><link rel="prefetch" href="/blog/assets/js/58.a691ff33.js"><link rel="prefetch" href="/blog/assets/js/59.99e5c047.js"><link rel="prefetch" href="/blog/assets/js/60.8c13e131.js"><link rel="prefetch" href="/blog/assets/js/61.e17e1d61.js"><link rel="prefetch" href="/blog/assets/js/62.603dbeeb.js"><link rel="prefetch" href="/blog/assets/js/63.5736f4ab.js"><link rel="prefetch" href="/blog/assets/js/64.489308dd.js"><link rel="prefetch" href="/blog/assets/js/65.a7621b1b.js"><link rel="prefetch" href="/blog/assets/js/66.55dc6a66.js"><link rel="prefetch" href="/blog/assets/js/67.19e54893.js"><link rel="prefetch" href="/blog/assets/js/68.174d2052.js"><link rel="prefetch" href="/blog/assets/js/69.28d625e1.js"><link rel="prefetch" href="/blog/assets/js/70.3ef06886.js"><link rel="prefetch" href="/blog/assets/js/71.9b54ad67.js"><link rel="prefetch" href="/blog/assets/js/72.679a8c19.js"><link rel="prefetch" href="/blog/assets/js/73.9bc2c2ed.js"><link rel="prefetch" href="/blog/assets/js/74.60884e8a.js"><link rel="prefetch" href="/blog/assets/js/75.6b4b1241.js"><link rel="prefetch" href="/blog/assets/js/76.d8e424bc.js"><link rel="prefetch" href="/blog/assets/js/77.a6289f1c.js"><link rel="prefetch" href="/blog/assets/js/78.0a0e3a0c.js"><link rel="prefetch" href="/blog/assets/js/79.948c15c8.js"><link rel="prefetch" href="/blog/assets/js/8.7640b8fa.js"><link rel="prefetch" href="/blog/assets/js/80.e45b5cc2.js"><link rel="prefetch" href="/blog/assets/js/81.32bd3487.js"><link rel="prefetch" href="/blog/assets/js/82.2c27d257.js"><link rel="prefetch" href="/blog/assets/js/83.9bc92f59.js"><link rel="prefetch" href="/blog/assets/js/84.3d3cc7a5.js"><link rel="prefetch" href="/blog/assets/js/85.240cb178.js"><link rel="prefetch" href="/blog/assets/js/86.09b752d2.js"><link rel="prefetch" href="/blog/assets/js/87.f3490458.js"><link rel="prefetch" href="/blog/assets/js/88.25e12dbc.js"><link rel="prefetch" href="/blog/assets/js/89.198d3988.js"><link rel="prefetch" href="/blog/assets/js/90.6a4cdb73.js"><link rel="prefetch" href="/blog/assets/js/91.fc3e66dd.js"><link rel="prefetch" href="/blog/assets/js/92.1f01035f.js"><link rel="prefetch" href="/blog/assets/js/93.3b6d7e0b.js"><link rel="prefetch" href="/blog/assets/js/94.92f43144.js"><link rel="prefetch" href="/blog/assets/js/95.24303f85.js"><link rel="prefetch" href="/blog/assets/js/96.ef120cb8.js"><link rel="prefetch" href="/blog/assets/js/97.5c68dd21.js"><link rel="prefetch" href="/blog/assets/js/98.6558fee1.js"><link rel="prefetch" href="/blog/assets/js/vuejs-paginate.39f69249.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.337b0747.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="global-layout d-flex flex-column"><header id="header" class="shadow"><nav class="p-3 d-flex desktop-menu justify-content-between"><div class="d-flex blog-info-wrapper"><a href="/blog/" class="text-decoration-none m-0 router-link-active"><div class="card-img-bg d-inline-block blog-logo"><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210414163022.jpeg" height="40px" style="margin-right:10px;"></div></a> <a href="/blog/" class="blog-title router-link-active"><div class="h4 text-center">
          Yoha's Blog
        </div></a></div> <ul role="menubar" class="d-flex justify-content-center border-0 el-menu--horizontal el-menu" style="background-color:;"><li role="menuitem" tabindex="-1" router="" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;"><i class="el-icon-house"></i>
    Home
  </li><li role="menuitem" tabindex="-1" router="" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;"><i class="el-icon-lollipop"></i>
    Life
  </li><li role="menuitem" tabindex="-1" router="" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;"><i class="el-icon-s-management"></i>
    Handbook
  </li><li role="menuitem" tabindex="-1" router="" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;"><span>ğŸ’•</span>
    Emoji
  </li></ul> <div class="search-wrapper u-px3 d-flex align-items-center"><div aria-haspopup="listbox" role="combobox" aria-owns="el-autocomplete-1218" class="el-autocomplete"><div class="el-input el-input--small"><!----><input type="text" autocomplete="off" valueKey="value" popperClass="components-search" placeholder="Search" fetchSuggestions="function () { [native code] }" debounce="200" placement="bottom-end" popperAppendToBody="true" class="el-input__inner"><!----><!----><!----><!----></div><div role="region" class="el-autocomplete-suggestion el-popper components-search" style="width:;display:none;"><div class="el-scrollbar"><div class="el-autocomplete-suggestion__wrap el-scrollbar__wrap el-scrollbar__wrap--hidden-default"><ul class="el-scrollbar__view el-autocomplete-suggestion__list"></ul></div><div class="el-scrollbar__bar is-horizontal"><div class="el-scrollbar__thumb" style="width:0;transform:translateX(0%);ms-transform:translateX(0%);webkit-transform:translateX(0%);"></div></div><div class="el-scrollbar__bar is-vertical"><div class="el-scrollbar__thumb" style="height:0;transform:translateY(0%);ms-transform:translateY(0%);webkit-transform:translateY(0%);"></div></div></div></div></div></div> <div id="toggle"><div id="top" class="span"></div> <div id="middle" class="span"></div> <div id="bottom" class="span"></div></div></nav> <div class="flex-column align-items-center mobile-menu pb-4"><ul role="menubar" class="d-flex justify-content-center border-0 el-menu--horizontal el-menu" style="background-color:;"><li role="menuitem" tabindex="-1" router="" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;"><i class="el-icon-house"></i>
    Home
  </li><li role="menuitem" tabindex="-1" router="" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;"><i class="el-icon-lollipop"></i>
    Life
  </li><li role="menuitem" tabindex="-1" router="" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;"><i class="el-icon-s-management"></i>
    Handbook
  </li><li role="menuitem" tabindex="-1" router="" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;"><span>ğŸ’•</span>
    Emoji
  </li></ul> <div class="search-wrapper u-px3 d-flex align-items-center pt-4"><div aria-haspopup="listbox" role="combobox" aria-owns="el-autocomplete-1840" class="el-autocomplete"><div class="el-input el-input--small"><!----><input type="text" autocomplete="off" valueKey="value" popperClass="components-search" placeholder="Search" fetchSuggestions="function () { [native code] }" debounce="200" placement="bottom-end" popperAppendToBody="true" class="el-input__inner"><!----><!----><!----><!----></div><div role="region" class="el-autocomplete-suggestion el-popper components-search" style="width:;display:none;"><div class="el-scrollbar"><div class="el-autocomplete-suggestion__wrap el-scrollbar__wrap el-scrollbar__wrap--hidden-default"><ul class="el-scrollbar__view el-autocomplete-suggestion__list"></ul></div><div class="el-scrollbar__bar is-horizontal"><div class="el-scrollbar__thumb" style="width:0;transform:translateX(0%);ms-transform:translateX(0%);webkit-transform:translateX(0%);"></div></div><div class="el-scrollbar__bar is-vertical"><div class="el-scrollbar__thumb" style="height:0;transform:translateY(0%);ms-transform:translateY(0%);webkit-transform:translateY(0%);"></div></div></div></div></div></div></div></header> <div id="vuperess-theme-blog__post-layout"><div class="sticker vuepress-toc"><div class="vuepress-toc-item vuepress-toc-h2 active"><a href="#why-having-a-single-thread-is-a-limitation" title="Why having a single thread is a limitation?">Why having a single thread is a limitation?</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#the-building-blocks-of-a-javascript-program" title="The building blocks of a JavaScript program">The building blocks of a JavaScript program</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#what-is-the-event-loop" title="What is the Event Loop?">What is the Event Loop?</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#so-what-is-the-event-loop-after-all" title="So what is the event loop after all?">So what is the event loop after all?</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#how-settimeout-works" title="How setTimeout(â€¦) works">How setTimeout(â€¦) works</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#what-are-jobs-in-es6" title="What are Jobs in ES6 ?">What are Jobs in ES6 ?</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#callbacks" title="Callbacks">Callbacks</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#nested-callbacks" title="Nested Callbacks">Nested Callbacks</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#promises" title="Promises">Promises</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#promise-value" title="Promise Value">Promise Value</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#to-promise-or-not-to-promise" title="To Promise or not to Promise?">To Promise or not to Promise?</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#swallowing-exceptions" title="Swallowing exceptions">Swallowing exceptions</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#handling-uncaught-exceptions" title="Handling uncaught exceptions">Handling uncaught exceptions</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#what-s-happening-in-es8-async-await" title="Whatâ€™s happening in ES8? Async/await">Whatâ€™s happening in ES8? Async/await</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#how-to-use-async-await" title="How to use async/await?">How to use async/await?</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#_5-tips-on-writing-highly-maintainable-non-brittle-async-code" title="5 Tips on writing highly maintainable, non-brittle async code">5 Tips on writing highly maintainable, non-brittle async code</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#å‚è€ƒæ–‡ç« " title="å‚è€ƒæ–‡ç« ">å‚è€ƒæ–‡ç« </a></div></div> <main class="vuepress-blog-theme-content"><div class="el-card mb-4 is-always-shadow"><!----><div class="el-card__body" style="padding:0;"><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210622203624.gif" alt="How JavaScript works - Event loop and the rise of Async programming + 5 ways to better coding with async/await" class="w-100"> <div class="p-3"><h1 align="center">
            How JavaScript works - Event loop and the rise of Async programming + 5 ways to better coding with async/await
          </h1> <div class="ui-post-info d-flex text-secondary d-flex justify-content-center my-3"><div class="post-info-item"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
    Tuesday, June 22, 2021
  </div> <div class="post-info-item"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
    28 min read
  </div> <div class="post-info-item"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-navigation"><polygon points="3 11 22 2 13 21 11 13 3 11"></polygon></svg>
    Beijing
  </div></div></div></div></div> <div class="el-card py-3 px-3 mb-4 is-always-shadow"><!----><div class="el-card__body"><span></span></div></div> <div class="el-card py-3 px-3 mb-4 is-always-shadow"><!----><div class="el-card__body"><div class="content__default"><h1 id="how-javascript-works-event-loop-and-the-rise-of-async-programming-5-ways-to-better-coding-with-async-await"><a href="#how-javascript-works-event-loop-and-the-rise-of-async-programming-5-ways-to-better-coding-with-async-await" class="header-anchor">#</a> How JavaScript works - Event loop and the rise of Async programming + 5 ways to better coding with async/await</h1> <blockquote><p>Javascriptå·¥ä½œåŸç†ï¼šäº‹ä»¶å¾ªç¯åŠå¼‚æ­¥ç¼–ç¨‹çš„å‡ºç° + 5ç§æ›´å¥½çš„async/awaitç¼–ç¨‹æ–¹å¼</p></blockquote> <p>This time weâ€™ll expand on our first post by reviewing the drawbacks to programming in a single-threaded environment and how to overcome them using the Event Loop and async/await in order to build stunning JavaScript UIs. As the tradition goes, at the end of the article weâ€™ll share 5 tips on how to write cleaner code with async/await.</p> <blockquote><p>ç°åœ¨ï¼Œæˆ‘ä»¬å°†ä¼šé€šè¿‡å›é¡¾å•çº¿ç¨‹ç¯å¢ƒä¸‹ç¼–ç¨‹çš„å¼Šç«¯åŠä»¥åŠå¦‚ä½•ä½¿ç”¨äº‹ä»¶å¾ªç¯å’Œasync/awaitæ¥å…‹æœè¿™äº›ç¼ºç‚¹ä»¥åˆ›å»ºä»¤äººæƒŠå¹çš„ JavaScript äº¤äº’ç•Œé¢æ¥å±•å¼€ç¬¬ä¸€ç¯‡æ–‡ç« ã€‚è€è§„çŸ©ï¼Œæˆ‘ä»¬å°†ä¼šåœ¨æœ¬ç« æœ«å°¾åˆ†äº« 5 æ¡åˆ©ç”¨ async/await ç¼–å†™æ›´ç®€æ´ä»£ç çš„å°æŠ€å·§ã€‚</p></blockquote> <h2 id="why-having-a-single-thread-is-a-limitation"><a href="#why-having-a-single-thread-is-a-limitation" class="header-anchor">#</a> Why having a single thread is a limitation?</h2> <blockquote><p>å•çº¿ç¨‹çš„å±€é™æ€§</p></blockquote> <p>In the <a href="https://yancqs.github.io/blog/2020/11/12/how-javascript-work1/" target="_blank" rel="noopener noreferrer">first post<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> we launched, we pondered over the question <em>what happens when you have function calls in the Call Stack that take a huge amount of time to be processed</em>.</p> <blockquote><p>åœ¨ç¬¬ä¸€ç¯‡<a href="https://yancqs.github.io/blog/2020/11/12/how-javascript-work1/" target="_blank" rel="noopener noreferrer">æ–‡ç« <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>çš„å¼€å¤´ï¼Œæˆ‘ä»¬è€ƒè™‘äº†ä¸€ä¸ªé—®é¢˜å³<em>å½“è°ƒç”¨æ ˆä¸­å«æœ‰éœ€è¦é•¿æ—¶é—´è¿è¡Œçš„å‡½æ•°è°ƒç”¨çš„æ—¶å€™ä¼šå‘ç”Ÿä»€ä¹ˆ</em>ã€‚</p></blockquote> <p>Imagine, for example, a complex image transformation algorithm thatâ€™s running in the browser.</p> <blockquote><p>è­¬å¦‚ï¼Œè¯•æƒ³ä¸‹ï¼Œåœ¨æµè§ˆå™¨ä¸­è¿è¡Œç€ä¸€ä¸ªå¤æ‚çš„å›¾ç‰‡è½¬åŒ–ç®—æ³•ã€‚</p></blockquote> <p>While the Call Stack has functions to execute, the browser canâ€™t do anything else â€” itâ€™s being blocked. This means that the browser canâ€™t render, it canâ€™t run any other code, itâ€™s just stuck. And here comes the problem â€” your app UI is no longer efficient and pleasing.</p> <blockquote><p>æ°å¥½æ­¤æ—¶è°ƒç”¨æ ˆä¸­æœ‰å‡½æ•°éœ€è¦æ‰§è¡Œï¼Œæ­¤æ—¶æµè§ˆå™¨å°†ä¼šè¢«é˜»å¡ï¼Œå®ƒä¸èƒ½å¤Ÿåšå…¶å®ƒä»»ä½•äº‹æƒ…ã€‚è¿™æ„å‘³ç€ï¼Œæµè§ˆå™¨ä¼šæ²¡æœ‰å“åº”ï¼Œä¸èƒ½å¤Ÿè¿›è¡Œæ¸²æŸ“å’Œè¿è¡Œå…¶å®ƒä»£ç ã€‚è¿™å°†ä¼šå¸¦æ¥é—®é¢˜ï¼ç¨‹åºç•Œé¢å°†ä¸å†é«˜æ•ˆå’Œä»¤äººæ„‰æ‚¦ã€‚</p></blockquote> <p>Your app is stuck.</p> <blockquote><p>ç¨‹åºæ²¡æœ‰å“åº”ã€‚</p></blockquote> <p>In some cases, this might not be such a critical issue. But hey â€” hereâ€™s an even bigger problem. Once your browser starts processing too many tasks in the Call Stack, it may stop being responsive for a long time. At that point, a lot of browsers would take action by raising an error, asking whether they should terminate the page:</p> <blockquote><p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¿™æˆ–è®¸æ²¡ä»€ä¹ˆå¤§ä¸äº†çš„ã€‚ä½†æ˜¯ï¼Œè¿™å¯èƒ½ä¼šé€ æˆæ›´åŠ ä¸¥é‡çš„é—®é¢˜ã€‚ä¸€æ—¦æµè§ˆå™¨åœ¨è°ƒç”¨æ ˆä¸­åŒæ—¶è¿è¡Œå¤ªå¤šçš„ä»»åŠ¡çš„æ—¶å€™ï¼Œæµè§ˆå™¨ä¼šå¾ˆé•¿æ—¶é—´åœæ­¢å“åº”ã€‚åˆ°äº†é‚£ä¸ªæ—¶å€™ï¼Œå¤§å¤šæ•°æµè§ˆå™¨ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œè¯¢é—®ä½ æ˜¯å¦å…³é—­ç½‘é¡µã€‚</p></blockquote> <p>Itâ€™s ugly, and it completely ruins your UX:</p> <blockquote><p>è¿™å¾ˆä¸‘é™‹ä¸”å®ƒå®Œå…¨æ‘§æ¯äº†ç¨‹åºçš„ç”¨æˆ·ä½“éªŒã€‚</p></blockquote> <p><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210622174354.jpeg" alt=""></p> <h2 id="the-building-blocks-of-a-javascript-program"><a href="#the-building-blocks-of-a-javascript-program" class="header-anchor">#</a> The building blocks of a JavaScript program</h2> <blockquote><p>JavaScriptç¨‹åºç»„ä»¶</p></blockquote> <p>You may be writing your JavaScript application in a single .js file, but your program is almost certainly comprised of several blocks, only one of which is going to execute <em>now</em>, and the rest will execute <em>later</em>. The most common block unit is the function.</p> <blockquote><p>ä½ å¯èƒ½ä¼šåœ¨å•ä¸€çš„ .js æ–‡ä»¶ä¸­ä¹¦å†™ JavaScript ç¨‹åºï¼Œä½†æ˜¯ç¨‹åºæ˜¯ç”±å¤šä¸ªä»£ç å—ç»„æˆçš„ï¼Œå½“å‰åªæœ‰ä¸€ä¸ªä»£ç å—åœ¨è¿è¡Œï¼Œå…¶å®ƒä»£ç å—å°†åœ¨éšåè¿è¡Œã€‚æœ€å¸¸è§çš„å—çŠ¶å•å…ƒæ˜¯å‡½æ•°ã€‚</p></blockquote> <p>The problem most developers new to JavaScript seem to have is understanding that <em>later</em> doesnâ€™t necessarily happen strictly and immediately after <em>now</em>. In other words, tasks that cannot complete now are, by definition, going to complete asynchronously, which means you wonâ€™t have the above-mentioned blocking behavior as you might have subconsciously expected or hoped for.</p> <blockquote><p>å¤§å¤šæ•° JavaScript æ–°æ‰‹æœ‰å¯èƒ½éœ€è¦ç†è§£çš„é—®é¢˜å³<strong>ä¹‹åè¿è¡Œ</strong>è¡¨ç¤ºçš„æ˜¯å¹¶ä¸æ˜¯å¿…é¡»ä¸¥æ ¼ä¸”ç«‹å³åœ¨ç°åœ¨ä¹‹åæ‰§è¡Œã€‚æ¢å¥è¯è¯´å³ï¼Œæ ¹æ®å®šä¹‰ï¼Œ<strong>ç°åœ¨</strong>ä¸èƒ½å¤Ÿè¿è¡Œå®Œæ¯•çš„ä»»åŠ¡å°†ä¼šå¼‚æ­¥å®Œæˆï¼Œè¿™æ ·ä½ å°±ä¸ä¼šä¸ç»æ„é—´é‡åˆ°ä»¥ä¸ŠæåŠçš„ UI é˜»å¡è¡Œä¸ºã€‚</p></blockquote> <p>Letâ€™s take a look at the following example:</p> <blockquote><p>çœ‹å¦‚ä¸‹ä»£ç ï¼š</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// ajax(..) is some arbitrary Ajax function given by a library</span>
<span class="token keyword">var</span> response <span class="token operator">=</span> <span class="token function">ajax</span><span class="token punctuation">(</span><span class="token string">'https://example.com/api'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// `response` won't have the response</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Youâ€™re probably aware that standard Ajax requests donâ€™t complete synchronously, which means that at the time of code execution the ajax(..) function does not yet have any value to return back to be assigned to a response variable.</p> <blockquote><p>å¯èƒ½ä½ å·²ç»çŸ¥é“æ ‡å‡†çš„ ajax è¯·æ±‚ä¸ä¼šå®Œå…¨åŒæ­¥æ‰§è¡Œå®Œæ¯•ï¼Œæ„å³åœ¨ä»£ç è¿è¡Œé˜¶æ®µï¼Œajax(..) å‡½æ•°ä¸ä¼šè¿”å›ä»»ä½•å€¼ç»™ response å˜é‡ã€‚</p></blockquote> <p>A simple way of â€œwaitingâ€ for an asynchronous function to return its result is to use a function called <strong>callback</strong>:</p> <blockquote><p>è·å¾—å¼‚æ­¥å‡½æ•°è¿”å›å€¼çš„ä¸€ä¸ªç®€å•æ–¹æ³•æ˜¯ä½¿ç”¨å›è°ƒå‡½æ•°ã€‚</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token string">'https://example.com/api'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// `response` is now available</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Just a note: you can actually make <strong>synchronous</strong> Ajax requests. Never, ever do that. If you make a synchronous Ajax request, the UI of your JavaScript app will be blocked â€” the user wonâ€™t be able to click, enter data, navigate, or scroll. This would prevent any user interaction. Itâ€™s a terrible practice.</p> <blockquote><p>åªæ˜¯è¦æ³¨æ„ä¸€ç‚¹ï¼šå³ä½¿å¯ä»¥ä¹Ÿæ°¸è¿œä¸è¦å‘èµ·åŒæ­¥ ajax è¯·æ±‚ã€‚å¦‚æœå‘èµ·åŒæ­¥ ajax è¯·æ±‚ï¼ŒJavaScript ç¨‹åºçš„ UI å°†ä¼šè¢«é˜»å¡ï¼ç”¨æˆ·ä¸èƒ½å¤Ÿç‚¹å‡»ï¼Œè¾“å…¥æ•°æ®ï¼Œè·³è½¬æˆ–è€…æ»šåŠ¨ã€‚è¿™å°†ä¼šå†»ç»“ä»»ä½•ç”¨æˆ·äº¤äº’ä½“éªŒã€‚è¿™æ˜¯éå¸¸ç³Ÿç³•ã€‚</p></blockquote> <p>This is how it looks like, but please, never do this â€” donâ€™t ruin the web:</p> <blockquote><p>ä»¥ä¸‹ç¤ºä¾‹ä»£ç ï¼Œä½†è¯·åˆ«è¿™æ ·åšï¼Œè¿™ä¼šæ¯æ‰ç½‘é¡µï¼š</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// This is assuming that you're using jQuery</span>
jQuery<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    url<span class="token operator">:</span> <span class="token string">'https://api.example.com/endpoint'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// This is your callback.</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    async<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token comment">// And this is a terrible idea</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>We used an Ajax request just as an example. You can have any chunk of code execute asynchronously.</p> <blockquote><p>æˆ‘ä»¬ä»¥ Ajax è¯·æ±‚ä¸ºä¾‹ã€‚ä½ å¯ä»¥å¼‚æ­¥æ‰§è¡Œä»»æ„ä»£ç ã€‚</p></blockquote> <p>This can be done with the <code>setTimeout(callback, milliseconds)</code> function. What the <code>setTimeout</code> function does is to set up an event (a timeout) to happen later. Letâ€™s take a look:</p> <blockquote><p>ä½ å¯ä»¥ä½¿ç”¨ <code>setTimeout(callback, milliseconds)</code> å‡½æ•°æ¥å¼‚æ­¥æ‰§è¡Œä»£ç ã€‚<code>setTimeout</code> å‡½æ•°ä¼šåœ¨ä¹‹åçš„æŸä¸ªæ—¶åˆ»è§¦å‘äº‹ä»¶(å®šæ—¶å™¨)ã€‚å¦‚ä¸‹ä»£ç ï¼š</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'first'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">second</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'second'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">third</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'third'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span>second<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Invoke `second` after 1000ms</span>
<span class="token function">third</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>The output in the console will be the following:</p> <blockquote><p>æ§åˆ¶å°è¾“å‡ºå¦‚ä¸‹ï¼š</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>first
third
second
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="what-is-the-event-loop"><a href="#what-is-the-event-loop" class="header-anchor">#</a> What is the Event Loop?</h2> <blockquote><p>äº‹ä»¶å¾ªç¯è¯¦è§£</p></blockquote> <p>Weâ€™ll start with a somewhat of an odd claim â€” despite allowing async JavaScript code (like the <code>setTimeout</code> we just discussed), until ES6, JavaScript itself has actually never had any direct notion of asynchronicity built into it. The JavaScript engine has never done anything more than executing a single chunk of your program at any given moment.</p> <blockquote><p>æˆ‘ä»¬å°†ä¼šä»¥ä¸€ä¸ªæœ‰äº›è®©äººè´¹è§£çš„é—®é¢˜å¼€å§‹ï¼å°½ç®¡å…è®¸å¼‚æ­¥æ‰§è¡Œ JavaScript ä»£ç (æ¯”å¦‚ä¹‹å‰è®¨è®ºçš„ <code>setTimetout</code>)ï¼Œä½†æ˜¯ç›´åˆ° ES6ï¼Œå®é™…ä¸Š JavaScript æœ¬èº«å¹¶æ²¡æœ‰é›†æˆä»»ä½•ç›´æ¥çš„å¼‚æ­¥ç¼–ç¨‹æ¦‚å¿µã€‚JavaScript å¼•æ“åªå…è®¸åœ¨ä»»æ„æ—¶åˆ»æ‰§è¡Œå•ä¸ªçš„ç¨‹åºç‰‡æ®µã€‚</p></blockquote> <p>For more details on how JavaScript engines work (Googleâ€™s V8 specifically), check one of our <a href="https://yancqs.github.io/blog/2021/04/13/how-javascript-work2/" target="_blank" rel="noopener noreferrer">previous articles<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> on the topic.</p> <blockquote><p>å¯ä»¥æŸ¥çœ‹ä¹‹å‰çš„<a href="https://yancqs.github.io/blog/2021/04/13/how-javascript-work2/" target="_blank" rel="noopener noreferrer">æ–‡ç« <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>æ¥äº†è§£ JavaScript å¼•æ“çš„å·¥ä½œåŸç†ã€‚</p></blockquote> <p>So, who tells the JS Engine to execute chunks of your program? In reality, the JS Engine doesnâ€™t run in isolation â€” it runs inside a <em>hosting</em> environment, which for most developers is the typical web browser or Node.js. Actually, nowadays, JavaScript gets embedded into all kinds of devices, from robots to light bulbs. Every single device represents a different type of hosting environment for the JS Engine.</p> <blockquote><p>é‚£ä¹ˆï¼Œ JS å¼•æ“æ˜¯å¦‚ä½•æ‰§è¡Œç¨‹åºç‰‡æ®µçš„å‘¢ï¼Ÿå®é™…ä¸Šï¼ŒJS å¼•æ“å¹¶ä¸æ˜¯éš”ç¦»è¿è¡Œçš„ï¼å®ƒè¿è¡Œåœ¨ä¸€ä¸ªå®¿ä¸»ç¯å¢ƒä¸­ï¼Œå¯¹å¤§å¤šæ•°å¼€å‘è€…æ¥è¯´æ˜¯å…¸å‹çš„ web æµè§ˆå™¨æˆ–è€… Node.jsã€‚å®é™…ä¸Šï¼Œç°åœ¨ JavaScript å¹¿æ³›åº”ç”¨äºä»æœºå™¨åˆ°ç”µç¯æ³¡çš„å„ç§è®¾å¤‡ä¹‹ä¸­ã€‚æ¯ä¸ªè®¾å¤‡ä»£è¡¨äº† JS å¼•æ“çš„ä¸åŒç±»å‹çš„å®¿ä¸»ç¯å¢ƒã€‚</p></blockquote> <p><strong>The common denominator in all environments is a built-in mechanism called the event loop, which handles the execution of multiple chunks of your program over time, each time invoking the JS Engine</strong>.</p> <blockquote><p><strong>æ‰€æœ‰å®¿ä¸»ç¯å¢ƒéƒ½å«æœ‰ä¸€ä¸ªè¢«ç§°ä¸ºäº‹ä»¶å¾ªç¯çš„å†…ç½®æœºåˆ¶ï¼Œéšç€æ—¶é—´çš„æ¨ç§»ï¼Œäº‹ä»¶å¾ªç¯ä¼šæ‰§è¡Œç¨‹åºä¸­å¤šä¸ªä»£ç ç‰‡æ®µï¼Œæ¯æ¬¡éƒ½ä¼šè°ƒç”¨ JS å¼•æ“</strong>ã€‚</p></blockquote> <p>This means that the JS Engine is just an on-demand execution environment for any arbitrary JS code. Itâ€™s the surrounding environment that schedules the events (the JS code executions).</p> <blockquote><p>è¿™æ„å‘³ç€ JS å¼•æ“åªæ˜¯ä»»æ„ JS ä»£ç çš„æŒ‰éœ€æ‰§è¡Œç¯å¢ƒã€‚è¿™æ˜¯ä¸€ä¸ªå°é—­çš„ç¯å¢ƒï¼Œåœ¨å…¶ä¸­è¿›è¡Œäº‹ä»¶çš„è°ƒåº¦(è¿è¡ŒJS ä»£ç )ã€‚</p></blockquote> <p>So, for example, when your JavaScript program makes an Ajax request to fetch some data from the server, you set up the â€œresponseâ€ code in a function (the â€œcallbackâ€), and the JS Engine tells the hosting environment:</p> <blockquote><p>æ‰€ä»¥ï¼Œæ‰“ä¸ªæ¯”æ–¹ï¼Œå½“ JavaScript ç¨‹åºå‘èµ· Ajax è¯·æ±‚æ¥ä»æœåŠ¡å™¨è·å¾—æ•°æ®ï¼Œä½ åœ¨å›è°ƒå‡½æ•°ä¸­ä¹¦å†™ &quot;response&quot; ä»£ç ï¼ŒJS å¼•æ“ä¼šå‘Šè¯‰å®¿ä¸»ç¯å¢ƒï¼š</p></blockquote> <p>â€œHey, Iâ€™m going to suspend execution for now, but whenever you finish with that network request, and you have some data, please call this function back.â€</p> <blockquote><p>&quot;å˜¿ï¼Œæˆ‘ç°åœ¨è¦æŒ‚èµ·æ‰§è¡Œäº†ï¼Œç°åœ¨å½“ä½ å®Œæˆç½‘ç»œè¯·æ±‚çš„æ—¶å€™ä¸”è¿”å›äº†æ•°æ®ï¼Œè¯·æ‰§è¡Œå›è°ƒå‡½æ•°ã€‚&quot;</p></blockquote> <p>The browser is then set up to listen for the response from the network, and when it has something to return to you, it will schedule the callback function to be executed by inserting it into the <em>event loop</em>.</p> <blockquote><p>ä¹‹åæµè§ˆå™¨ä¼šç›‘å¬ä»ç½‘ç»œä¸­è¿”å›çš„æ•°æ®ï¼Œå½“æœ‰æ•°æ®è¿”å›çš„æ—¶å€™ï¼Œå®ƒä¼šé€šè¿‡æŠŠå›è°ƒå‡½æ•°æ’å…¥äº‹ä»¶å¾ªç¯ä»¥ä¾¿è°ƒåº¦æ‰§è¡Œã€‚</p></blockquote> <p>Letâ€™s look at the below diagram:</p> <blockquote><p>è®©æˆ‘ä»¬çœ‹ä¸‹å¦‚ä¸‹å›¾ç¤ºï¼š</p></blockquote> <p><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210622201124.png" alt=""></p> <p>You can read more about the Memory Heap and the Call Stack in our <a href="https://yancqs.github.io/blog/2020/11/12/how-javascript-work1/" target="_blank" rel="noopener noreferrer">previous article<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <blockquote><p>ä½ å¯ä»¥åœ¨ä¹‹å‰çš„<a href="https://yancqs.github.io/blog/2020/11/12/how-javascript-work1/" target="_blank" rel="noopener noreferrer">æ–‡ç« <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ä¸­é˜…è¯»æ›´å¤šå…³äºåŠ¨æ€å†…å­˜ç®¡ç†å’Œè°ƒç”¨æ ˆçš„ä¿¡æ¯ã€‚</p></blockquote> <p>And what are these Web APIs? In essence, they are threads that you canâ€™t access, you can just make calls to them. They are the pieces of the browser in which concurrency kicks in. If youâ€™re a Node.js developer, these are the C++ APIs.</p> <blockquote><p>ä»€ä¹ˆæ˜¯ç½‘é¡µ API ï¼Ÿæœ¬è´¨ä¸Šï¼Œä½ æ²¡æœ‰æƒé™è®¿é—®è¿™äº›çº¿ç¨‹ï¼Œä½ åªèƒ½å¤Ÿè°ƒç”¨å®ƒä»¬ã€‚å®ƒä»¬æ˜¯æµè§ˆå™¨è‡ªå¸¦çš„ï¼Œä¸”å¯ä»¥åœ¨æµè§ˆå™¨ä¸­è¿›è¡Œå¹¶å‘æ“ä½œã€‚å¦‚æœä½ æ˜¯ä¸ª Node.js å¼€å‘è€…ï¼Œè¿™äº›æ˜¯ C++ APIsã€‚</p></blockquote> <h2 id="so-what-is-the-event-loop-after-all"><a href="#so-what-is-the-event-loop-after-all" class="header-anchor">#</a> So what is the event loop after all?</h2> <blockquote><p>æ‰€ä»¥ä»€ä¹ˆæ˜¯äº‹ä»¶å¾ªç¯å‘¢ï¼Ÿ</p></blockquote> <p><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210622201345.png" alt=""></p> <p>The Event Loop has one simple job â€” to monitor the Call Stack and the Callback Queue. If the Call Stack is empty, the Event Loop will take the first event from the queue and will push it to the Call Stack, which effectively runs it.</p> <blockquote><p>äº‹ä»¶å¾ªç¯åªæœ‰ä¸€é¡¹ç®€å•çš„å·¥ä½œï¼ç›‘æµ‹è°ƒç”¨æ ˆå’Œå›è°ƒé˜Ÿåˆ—ã€‚å¦‚æœè°ƒç”¨æ ˆæ˜¯ç©ºçš„ï¼Œå®ƒä¼šä»å›è°ƒé˜Ÿåˆ—ä¸­å–å¾—ç¬¬ä¸€ä¸ªäº‹ä»¶ç„¶åå…¥æ ˆï¼Œå¹¶æœ‰æ•ˆåœ°æ‰§è¡Œè¯¥äº‹ä»¶ã€‚</p></blockquote> <p>Such an iteration is called a <strong>tick</strong> in the Event Loop. Each event is just a function callback.</p> <blockquote><p>äº‹ä»¶å¾ªç¯ä¸­çš„è¿™æ ·ä¸€æ¬¡éå†è¢«ç§°ä¸ºä¸€ä¸ª <strong>tick</strong>ã€‚æ¯ä¸ªäº‹ä»¶å°±æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°ã€‚</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Hi'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">cb1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'cb1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Bye'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Letâ€™s â€œexecuteâ€ this code and see what happens:</p> <blockquote><p>è®©æˆ‘ä»¬æ‰§è¡Œè¿™æ®µä»£ç ï¼Œç„¶åçœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆï¼š</p></blockquote> <ol><li><p>The state is clear. The browser console is clear, and the Call Stack is empty.</p> <blockquote><p>ç©ºçŠ¶æ€ã€‚æµè§ˆå™¨æ§åˆ¶å°æ˜¯ç©ºçš„ï¼Œè°ƒç”¨æ ˆä¹Ÿæ˜¯ç©ºçš„ã€‚</p></blockquote></li></ol> <p><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210622201502.png" alt=""></p> <ol start="2"><li><p><code>console.log('Hi')</code> is added to the Call Stack.</p> <blockquote><p><code>console.log('Hi')</code> å…¥æ ˆã€‚</p></blockquote></li></ol> <p><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210622201902.png" alt=""></p> <ol start="3"><li><p><code>console.log('Hi')</code> is executed.</p> <blockquote><p>æ‰§è¡Œ <code>console.log('Hi')</code>ã€‚</p></blockquote></li></ol> <p><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210622202354.png" alt=""></p> <ol start="4"><li><p><code>console.log('Hi')</code> is removed from the Call Stack.</p> <blockquote><p><code>console.log('Hi')</code> å‡ºæ ˆ</p></blockquote></li></ol> <p><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210622202448.png" alt=""></p> <ol start="5"><li><p><code>setTimeout(function cb1() { ... })</code> is added to the Call Stack.</p> <blockquote><p><code>setTimeout(function cb1() { ... })</code> å…¥æ ˆã€‚</p></blockquote></li></ol> <p><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210622202540.png" alt=""></p> <ol start="6"><li><p><code>setTimeout(function cb1() { ... })</code> is executed. The browser creates a timer as part of the Web APIs. It is going to handle the countdown for you.</p> <blockquote><p>æ‰§è¡Œ <code>setTimeout(function cb1() { ... })</code>ï¼Œæµè§ˆå™¨åˆ›å»ºå®šæ—¶å™¨ä½œä¸ºç½‘é¡µ API çš„ä¸€éƒ¨åˆ†å¹¶å°†ä¼šä¸ºä½ å¤„ç†å€’è®¡æ—¶ã€‚</p></blockquote></li></ol> <p><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210622202619.png" alt=""></p> <ol start="7"><li><p>The <code>setTimeout(function cb1() { ... })</code> itself is complete and is removed from the Call Stack.</p> <blockquote><p><code>setTimeout(function cb1() { ... })</code> æ‰§è¡Œå®Œæ¯•å¹¶å‡ºæ ˆã€‚</p></blockquote></li></ol> <p><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210622202652.png" alt=""></p> <ol start="8"><li><p><code>console.log('Bye')</code> is added to the Call Stack.</p> <blockquote><p><code>console.log('Bye')</code> å…¥æ ˆã€‚</p></blockquote></li></ol> <p><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210622202803.png" alt=""></p> <ol start="9"><li><p><code>console.log('Bye')</code> is executed.</p> <blockquote><p>æ‰§è¡Œ <code>console.log('Bye')</code>ã€‚</p></blockquote></li></ol> <p><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210622202913.png" alt=""></p> <ol start="10"><li><p><code>console.log('Bye')</code> is removed from the Call Stack.</p> <blockquote><p><code>console.log('Bye')</code> å‡ºæ ˆã€‚</p></blockquote></li></ol> <p><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210622202946.png" alt=""></p> <ol start="11"><li><p>After at least 5000 ms, the timer completes and it pushes the cb1 callback to the Callback Queue.</p> <blockquote><p>è‡³å°‘ 5 ç§’ä¹‹åï¼Œå®šæ—¶å™¨ç»“æŸè¿è¡Œå¹¶æŠŠ <code>cb1</code> å›è°ƒæ·»åŠ åˆ°å›è°ƒé˜Ÿåˆ—ã€‚</p></blockquote></li></ol> <p><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210622203015.png" alt=""></p> <ol start="12"><li><p>The Event Loop takes <code>cb1</code> from the Callback Queue and pushes it to the Call Stack.</p> <blockquote><p>äº‹ä»¶å¾ªç¯ä»å›è°ƒé˜Ÿåˆ—ä¸­è·å¾— <code>cb1</code> å‡½æ•°å¹¶ä¸”å°†å…¶å…¥æ ˆã€‚</p></blockquote></li></ol> <p><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210622203047.png" alt=""></p> <ol start="13"><li><p><code>cb1</code> is executed and adds <code>console.log('cb1')</code> to the Call Stack.</p> <blockquote><p>è¿è¡Œ <code>cb1</code> å‡½æ•°å¹¶å°† <code>console.log('cb1')</code> å…¥æ ˆã€‚</p></blockquote></li></ol> <p><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210622203234.png" alt=""></p> <ol start="14"><li><p><code>console.log('cb1')</code> is executed.</p> <blockquote><p>æ‰§è¡Œ <code>console.log('cb1')</code>ã€‚</p></blockquote></li></ol> <p><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210622203356.png" alt=""></p> <ol start="15"><li><p><code>console.log('cb1')</code> is removed from the Call Stack.</p> <blockquote><p><code>console.log('cb1')</code> å‡ºæ ˆã€‚</p></blockquote></li></ol> <p><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210622203513.png" alt=""></p> <ol start="16"><li><p><code>cb1</code> is removed from the Call Stack.</p> <blockquote><p><code>cb1</code> å‡ºæ ˆã€‚</p></blockquote></li></ol> <p><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210622203550.png" alt=""></p> <p>A quick recap:</p> <blockquote><p>å½•åƒå¿«é€Ÿå›æ”¾ï¼š</p></blockquote> <p><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210622203624.gif" alt=""></p> <p>Itâ€™s interesting to note that ES6 specifies how the event loop should work, meaning that technically itâ€™s within the scope of the JS engineâ€™s responsibilities, which is no longer playing just a hosting environment role. One main reason for this change is the introduction of Promises in ES6 because the latter require access to a direct, fine-grained control over scheduling operations on the event loop queue (weâ€™ll discuss them in a greater detail later).</p> <blockquote><p>ä»¤äººæ„Ÿå…´è¶£çš„æ˜¯ï¼ŒES6 è§„å®šäº‹ä»¶å¾ªç¯å¦‚ä½•å·¥ä½œçš„ï¼Œè¿™æ„å‘³ç€ä»æŠ€æœ¯ä¸Šè®²ï¼Œå®ƒåœ¨ JS å¼•æ“è´Ÿè´£çš„èŒƒå›´ä¹‹å†…ï¼Œè€Œ JS å¼•æ“å°†ä¸å†åªæ˜¯æ‰®æ¼”ç€å®¿ä¸»ç¯å¢ƒçš„è§’è‰²ã€‚ES6 ä¸­ Promise çš„å‡ºç°æ˜¯å¯¼è‡´æ”¹å˜çš„ä¸»è¦åŸå› ä¹‹ä¸€ï¼Œå› ä¸º ES6 è¦æ±‚æœ‰æƒé™ç›´æ¥ç»†ç²’åº¦åœ°æ§åˆ¶äº‹ä»¶å¾ªç¯é˜Ÿåˆ—ä¸­çš„è°ƒåº¦æ“ä½œ(ä¹‹åä¼šæ·±å…¥æ¢è®¨)ã€‚</p></blockquote> <h2 id="how-settimeout-works"><a href="#how-settimeout-works" class="header-anchor">#</a> How setTimeout(â€¦) works</h2> <blockquote><p>setTimeout(...) å·¥ä½œåŸç†</p></blockquote> <p>Itâ€™s important to note that setTimeout(â€¦) doesnâ€™t automatically put your callback on the event loop queue. It sets up a timer. When the timer expires, the environment places your callback into the event loop, so that some future tick will pick it up and execute it. Take a look at this code:</p> <blockquote><p>éœ€è¦æ³¨æ„çš„æ˜¯ <code>setTimeout(â€¦)</code> å¹¶æ²¡æœ‰è‡ªåŠ¨æŠŠå›è°ƒæ·»åŠ åˆ°äº‹ä»¶å¾ªç¯é˜Ÿåˆ—ã€‚å®ƒåˆ›å»ºäº†ä¸€ä¸ªå®šæ—¶å™¨ã€‚å½“å®šæ—¶å™¨è¿‡æœŸï¼Œå®¿ä¸»ç¯å¢ƒä¼šæŠŠå›è°ƒå‡½æ•°æ·»åŠ è‡³äº‹ä»¶å¾ªç¯é˜Ÿåˆ—ä¸­ï¼Œç„¶åï¼Œåœ¨æœªæ¥çš„æŸä¸ª tick å–å‡ºå¹¶æ‰§è¡Œè¯¥äº‹ä»¶ã€‚æŸ¥çœ‹å¦‚ä¸‹ä»£ç ï¼š</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">setTimeout</span><span class="token punctuation">(</span>myCallback<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>That doesnâ€™t mean that <code>myCallback</code> will be executed in 1,000 ms but rather that, in 1,000 ms, <code>myCallback</code> will be added to the event loop queue. The queue, however, might have other events that have been added earlier â€” your callback will have to wait.</p> <blockquote><p>è¿™å¹¶ä¸æ„å‘³ç€ 1 ç§’ä¹‹åä¼šæ‰§è¡Œ <code>myCallback</code> å›è°ƒè€Œæ˜¯åœ¨ 1 ç§’åå°†å…¶æ·»åŠ åˆ°å›è°ƒé˜Ÿåˆ—ã€‚ç„¶è€Œï¼Œè¯¥é˜Ÿåˆ—æœ‰å¯èƒ½åœ¨ä¹‹å‰å°±æ·»åŠ äº†å…¶å®ƒçš„äº‹ä»¶ï¼æ‰€ä»¥å›è°ƒå°±ä¼šè¢«é˜»å¡ã€‚</p></blockquote> <p>There are quite a few articles and tutorials on getting started with async code in JavaScript that suggest doing a <code>setTimeout(callback, 0)</code>. Well, now you know what the Event Loop does and how setTimeout works: calling setTimeout with 0 as a second argument just defers the callback until the Call Stack is clear.</p> <blockquote><p>æœ‰ç›¸å½“ä¸€éƒ¨åˆ†çš„æ–‡ç« å’Œæ•™ç¨‹å¼€å§‹ä¼šå»ºè®®ä½ ä½¿ç”¨ <code>setTimeout(callback, 0)</code> æ¥ä¹¦å†™ JavaScript å¼‚æ­¥ä»£ç ã€‚é‚£ä¹ˆï¼Œç°åœ¨ä½ æ˜ç™½äº†äº‹ä»¶å¾ªç¯å’Œ setTimeout çš„åŸç†ï¼šè°ƒç”¨ <code>setTimeout</code> æŠŠå…¶ç¬¬äºŒä¸ªå‚æ•°è®¾ç½®ä¸º 0 è¡¨ç¤ºå»¶è¿Ÿæ‰§è¡Œå›è°ƒç›´åˆ°è°ƒç”¨æ ˆè¢«æ¸…ç©ºã€‚</p></blockquote> <p>Take a look at the following code:</p> <blockquote><p>æŸ¥çœ‹å¦‚ä¸‹ä»£ç ï¼š</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Hi'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'callback'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Bye'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Although the wait time is set to 0 ms, the result in the browser console will be the following:</p> <blockquote><p>è™½ç„¶å®šæ—¶æ—¶é—´è®¾å®šä¸º 0ï¼Œ ä½†æ˜¯æ§åˆ¶å°ä¸­çš„ç»“æœå°†ä¼šå¦‚ä¸‹æ˜¾ç¤ºï¼š</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>Hi
Bye
callback
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="what-are-jobs-in-es6"><a href="#what-are-jobs-in-es6" class="header-anchor">#</a> What are Jobs in ES6 ?</h2> <blockquote><p>ES6 ä½œä¸šæ¦‚å¿µï¼ˆå¾®ä»»åŠ¡ï¼‰</p></blockquote> <p>A new concept called the â€œJob Queueâ€ was introduced in ES6. Itâ€™s a layer on top of the Event Loop queue. You are most likely to bump into it when dealing with the asynchronous behavior of Promises (weâ€™ll talk about them too).</p> <blockquote><p>ES6 ä»‹ç»äº†ä¸€ä¸ªè¢«ç§°ä¸ºã€ä½œä¸šé˜Ÿåˆ—ã€çš„æ¦‚å¿µã€‚å®ƒä½äºäº‹ä»¶å¾ªç¯é˜Ÿåˆ—çš„é¡¶éƒ¨ã€‚ä½ ææœ‰å¯èƒ½åœ¨å¤„ç† Promises(ä¹‹åä¼šä»‹ç») çš„å¼‚æ­¥è¡Œä¸ºçš„æ—¶å€™æ— æ„é—´æ¥è§¦åˆ°è¿™ä¸€æ¦‚å¿µã€‚</p></blockquote> <p>Weâ€™ll just touch on the concept now so that when we discuss async behavior with Promises, later on, you understand how those actions are being scheduled and processed.</p> <blockquote><p>ç°åœ¨æˆ‘ä»¬å°†ä¼šæ¥è§¦è¿™ä¸ªæ¦‚å¿µï¼Œä»¥ä¾¿å½“è®¨è®º Promises çš„å¼‚æ­¥è¡Œä¸ºä¹‹åï¼Œç†è§£å¦‚ä½•è°ƒåº¦å’Œå¤„ç†è¿™äº›è¡Œä¸ºã€‚</p></blockquote> <p>Imagine it like this: the Job Queue is a queue thatâ€™s attached to the end of every tick in the Event Loop queue. Certain async actions that may occur during a tick of the event loop will not cause a whole new event to be added to the event loop queue, but will instead add an item (aka Job) to the end of the current tickâ€™s Job queue.</p> <blockquote><p>åƒè¿™æ ·æƒ³è±¡ä¸€ä¸‹ï¼šä½œä¸šé˜Ÿåˆ—æ˜¯é™„åŠ äºäº‹ä»¶å¾ªç¯é˜Ÿåˆ—ä¸­æ¯ä¸ª tick æœ«å°¾çš„é˜Ÿåˆ—ã€‚äº‹ä»¶å¾ªç¯çš„ä¸€ä¸ª tick æ‰€äº§ç”Ÿçš„æŸäº›å¼‚æ­¥æ“ä½œä¸ä¼šå¯¼è‡´æ·»åŠ å…¨æ–°çš„äº‹ä»¶åˆ°äº‹ä»¶å¾ªç¯é˜Ÿåˆ—ä¸­ï¼Œä½†æ˜¯åè€Œä¼šåœ¨å½“å‰ tick çš„ä½œä¸šé˜Ÿåˆ—æœ«å°¾æ·»åŠ ä¸€ä¸ªä½œä¸šé¡¹ã€‚</p></blockquote> <p>This means that you can add another functionality to be executed later, and you can rest assured that it will be executed right after, before anything else.</p> <blockquote><p>è¿™æ„å‘³ç€ï¼Œä½ å¯ä»¥æ·»åŠ å»¶æ—¶è¿è¡Œå…¶å®ƒåŠŸèƒ½å¹¶ä¸”ä½ å¯ä»¥ç¡®ä¿å®ƒä¼šåœ¨å…¶å®ƒä»»ä½•åŠŸèƒ½ä¹‹å‰ç«‹åˆ»æ‰§è¡Œã€‚</p></blockquote> <p>A Job can also cause more Jobs to be added to the end of the same queue. In theory, itâ€™s possible for a Job â€œloopâ€ (a Job that keeps adding other Jobs, etc.) to spin indefinitely, thus starving the program of the necessary resources needed to move on to the next event loop tick. Conceptually, this would be similar to just expressing a long-running or infinite loop (like <code>while (true)</code> ..) in your code.</p> <blockquote><p>ä¸€ä¸ªä½œä¸šè¿˜å¯èƒ½å¯¼è‡´æ›´å¤šä½œä¸šæ·»åŠ åˆ°åŒä¸€é˜Ÿåˆ—çš„æœ«å°¾ã€‚ä»ç†è®ºä¸Šè®²ï¼Œä½œä¸šâ€œå¾ªç¯â€ï¼ˆä¸€ä¸ªä¸æ–­æ·»åŠ å…¶ä»–ä½œä¸šçš„ä½œä¸šï¼‰å¯èƒ½æ— é™æœŸåœ°å¾ªç¯ï¼Œä»è€Œä½¿ç¨‹åºæ— æ³•ç»§ç»­è¿›è¡Œä¸‹ä¸€ä¸ªäº‹ä»¶å¾ªç¯ã€‚ä»æ¦‚å¿µä¸Šè®²ï¼Œè¿™ç±»ä¼¼äºåœ¨ä»£ç ä¸­åªè¡¨è¾¾ä¸€ä¸ªé•¿æ—¶é—´è¿è¡Œçš„æˆ–æ— é™çš„æ­»å¾ªç¯ï¼ˆå¦‚'whileï¼ˆtrueï¼‰`..ï¼‰ã€‚</p></blockquote> <p>Jobs are kind of like the <code>setTimeout(callback, 0)</code> â€œhackâ€ but implemented in such a way that they introduce a much more well-defined and guaranteed ordering: later, but as soon as possible.</p> <blockquote><p>ä½œä¸šæ˜¯æœ‰äº›ç±»ä¼¼äº <code>setTimeout(callback, 0)</code> è¿™æ ·çš„å°æŠ€å·§ï¼Œä½†æ˜¯æ˜¯ä»¥è¿™æ ·çš„æ–¹å¼å®ç°çš„ï¼Œå®ƒä»¬æ‹¥æœ‰æ˜ç¡®å®šä¹‰å’Œæœ‰ä¿è¯çš„æ‰§è¡Œé¡ºåºï¼šä¹‹åä¸”å°½å¿«åœ°æ‰§è¡Œã€‚</p></blockquote> <h2 id="callbacks"><a href="#callbacks" class="header-anchor">#</a> Callbacks</h2> <blockquote><p>å›è°ƒ</p></blockquote> <p>As you already know, callbacks are by far the most common way to express and manage asynchronicity in JavaScript programs. Indeed, the callback is the most fundamental async pattern in the JavaScript language. Countless JS programs, even very sophisticated and complex ones, have been written on top of no other async foundation than the callback.</p> <blockquote><p>æ­£å¦‚ä½ å·²çŸ¥çš„é‚£æ ·ï¼Œå›è°ƒå‡½æ•°æ˜¯ JavaScript ç¨‹åºä¸­ç”¨æ¥è¡¨ç¤ºå’Œè¿›è¡Œå¼‚æ­¥æ“ä½œæœ€å¸¸è§çš„æ–¹æ³•ã€‚çš„ç¡®ï¼Œå›è°ƒæ˜¯ JavaScript è¯­è¨€ä¸­æœ€ä¸ºé‡è¦çš„å¼‚æ­¥æ¨¡å¼ã€‚æ— æ•°çš„ JS ç¨‹åºï¼Œç”šè‡³éå¸¸å¤æ‚çš„é‚£äº›ï¼Œéƒ½æ˜¯å»ºç«‹åœ¨å›è°ƒå‡½æ•°ä¹‹ä¸Šçš„ã€‚</p></blockquote> <p>Except that callbacks donâ€™t come with no shortcomings. Many developers are trying to find better async patterns. Itâ€™s impossible, however, to effectively use any abstraction if you donâ€™t understand whatâ€™s actually under the hood.</p> <blockquote><p>å›è°ƒå¹¶ä¸æ˜¯æ²¡æœ‰ç¼ºç‚¹(å¦‚ï¼Œ callback hell)ã€‚è®¸å¤šå¼€å‘è€…è¯•å›¾æ‰¾åˆ°æ›´å¥½çš„å¼‚æ­¥æ¨¡å¼ã€‚ç„¶è€Œï¼Œå¦‚æœä½ ä¸ç†è§£åº•å±‚çš„åŸç†è€Œæƒ³è¦é«˜æ•ˆåœ°ä½¿ç”¨ä»»ä½•æŠ½è±¡åŒ–çš„è¯­æ³•æ˜¯ä¸å¯èƒ½çš„ã€‚</p></blockquote> <p>In the following chapter, weâ€™ll explore couple of these abstractions in-depth to show why more sophisticated async patterns (that will be discussed in subsequent posts) are necessary and even recommended.</p> <blockquote><p>åœ¨æ¥ä¸‹æ¥çš„ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ä¼šæ·±å…¥æ¢ç©¶è¿™äº›æŠ½è±¡è¯­æ³•å¹¶ç†è§£æ›´å¤æ‚çš„å¼‚æ­¥æ¨¡å¼çš„å¿…è¦æ€§ã€‚</p></blockquote> <h2 id="nested-callbacks"><a href="#nested-callbacks" class="header-anchor">#</a> Nested Callbacks</h2> <blockquote><p>åµŒå¥—å›è°ƒ</p></blockquote> <p>Look at the following code:</p> <blockquote><p>æŸ¥çœ‹ä¸€ä¸‹ç¤ºä¾‹</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">listen</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">ajax</span><span class="token punctuation">(</span><span class="token string">'https://api.example.com/endpoint'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">text</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>text <span class="token operator">==</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	        		<span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	    			<span class="token punctuation">}</span>
	    			<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>text <span class="token operator">==</span> <span class="token string">&quot;world&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	        		<span class="token function">doSomethingElse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>Weâ€™ve got a chain of three functions nested together, each one representing a step in an asynchronous series.</p> <blockquote><p>æˆ‘ä»¬æœ‰ä¸‰ä¸ªé“¾å¼åµŒå¥—å‡½æ•°ï¼Œæ¯ä¸ªå‡½æ•°ä»£è¡¨ä¸€ä¸ªå¼‚æ­¥æ“ä½œã€‚</p></blockquote> <p>This kind of code is often called a â€œcallback hellâ€. But the â€œcallback hellâ€ actually has almost nothing to do with the nesting/indentation. Itâ€™s a much deeper problem than that.</p> <blockquote><p>è¿™ç±»ä»£ç é€šå¸¸è¢«ç§°ä¸ºã€å›è°ƒåœ°ç‹±ã€ã€‚ä½†æ˜¯ï¼Œå®é™…ä¸Šã€å›è°ƒåœ°ç‹±ã€å’Œä»£ç åµŒå¥—åŠç¼©è¿›æ²¡æœ‰ä»»ä½•å…³ç³»ã€‚è¿™æ˜¯ä¸€ä¸ªæ›´åŠ æ·±åˆ»çš„é—®é¢˜ã€‚</p></blockquote> <p>First, weâ€™re waiting for the â€œclickâ€ event, then weâ€™re waiting for the timer to fire, then weâ€™re waiting for the Ajax response to come back, at which point it might get all repeated again.</p> <blockquote><p>é¦–å…ˆï¼Œæˆ‘ä»¬ç›‘å¬ç‚¹å‡»äº‹ä»¶ï¼Œç„¶åï¼Œç­‰å¾…å®šæ—¶å™¨æ‰§è¡Œï¼Œæœ€åç­‰å¾… Ajax è¿”å›æ•°æ®ï¼Œåœ¨ Ajax è¿”å›æ•°æ®çš„æ—¶å€™ï¼Œå¯ä»¥é‡å¤æ‰§è¡Œè¿™ä¸€è¿‡ç¨‹ã€‚</p></blockquote> <p>At first glance, this code may seem to map its asynchrony naturally to sequential steps like:</p> <blockquote><p>ä¹ä¸€çœ¼çœ‹ä¸Šå»ï¼Œå¯ä»¥ä¸ŠæŠŠä»¥ä¸Šå…·æœ‰å¼‚æ­¥ç‰¹æ€§çš„ä»£ç æ‹†åˆ†ä¸ºæŒ‰æ­¥éª¤æ‰§è¡Œçš„ä»£ç ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">listen</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// ..</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Then we have:</p> <blockquote><p>ä¹‹åï¼š</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// ..</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Then later we have:</p> <blockquote><p>å†åæ¥ï¼š</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token string">'https://api.example.com/endpoint'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">text</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// ..</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>And finally:</p> <blockquote><p>æœ€åï¼š</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>text <span class="token operator">==</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>text <span class="token operator">==</span> <span class="token string">&quot;world&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">doSomethingElse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>So, such a sequential way of expressing your async code seems a lot more natural, doesnâ€™t it? There must be such a way, right?</p> <blockquote><p>å› æ­¤ï¼Œä»¥è¿™æ ·é¡ºåºæ‰§è¡Œçš„æ–¹å¼æ¥è¡¨ç¤ºå¼‚æ­¥ä»£ç çœ‹èµ·æ¥ä¸€æ°”å‘µæˆï¼Œåº”è¯¥æœ‰è¿™æ ·çš„æ–¹æ³•å§ï¼Ÿ</p></blockquote> <h2 id="promises"><a href="#promises" class="header-anchor">#</a> Promises</h2> <p>Take a look at the following code:</p> <blockquote><p>æŸ¥çœ‹ä¸€ä¸‹ä»£ç ï¼š</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> y <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x <span class="token operator">+</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Itâ€™s all very straightforward: it sums the values of <code>x</code> and <code>y</code> and prints it to the console. What if, however, the value of <code>x</code> or <code>y</code> was missing and was still to be determined? Say, we need to retrieve the values of both <code>x</code> and <code>y</code> from the server, before they can be used in the expression. Letâ€™s imagine that we have a function <code>loadX</code> and <code>loadY</code> that respectively load the values of <code>x</code> and <code>y</code> from the server. Then, imagine that we have a function sum that sums the values of <code>x</code> and <code>y</code> once both of them are loaded.</p> <blockquote><p>è¿™ä¸ªå¾ˆç›´è§‚ï¼šè®¡ç®—å‡º <code>x</code> å’Œ <code>y</code> çš„å€¼ç„¶ååœ¨æ§åˆ¶å°æ‰“å°å‡ºæ¥ã€‚ä½†æ˜¯ï¼Œå¦‚æœ <code>x</code> æˆ–è€… <code>y</code> çš„åˆå§‹å€¼æ˜¯ä¸å­˜åœ¨çš„ä¸”ä¸ç¡®å®šçš„å‘¢ï¼Ÿå‡è®¾ï¼Œåœ¨è¡¨è¾¾å¼ä¸­ä½¿ç”¨ <code>x</code> å’Œ<code>y</code> ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ä»æœåŠ¡å™¨å¾—åˆ° <code>x</code> å’Œ <code>y</code> çš„å€¼ã€‚æƒ³è±¡ä¸‹ï¼Œæˆ‘ä»¬æ‹¥æœ‰å‡½æ•° <code>loadX</code> å’Œ <code>loadY</code> åˆ†åˆ«ä»æœåŠ¡å™¨è·å– x å’Œ y çš„å€¼ã€‚ç„¶åï¼Œä¸€æ—¦è·å¾— <code>x</code> å’Œ <code>y</code> çš„å€¼ï¼Œå°±å¯ä»¥ä½¿ç”¨ <code>sum</code> å‡½æ•°è®¡ç®—å‡ºå’Œå€¼ã€‚</p></blockquote> <p>It could look like this (quite ugly, isnâ€™t it):</p> <blockquote><p>ç±»ä¼¼å¦‚ä¸‹è¿™æ ·ï¼š</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">getX<span class="token punctuation">,</span> getY<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> x<span class="token punctuation">,</span> y<span class="token punctuation">;</span>
    <span class="token function">getX</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        x <span class="token operator">=</span> result<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>y <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">callback</span><span class="token punctuation">(</span>x <span class="token operator">+</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">getY</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        y <span class="token operator">=</span> result<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">callback</span><span class="token punctuation">(</span>x <span class="token operator">+</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// A sync or async function that retrieves the value of `x`</span>
<span class="token keyword">function</span> <span class="token function">fetchX</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ..</span>
<span class="token punctuation">}</span>


<span class="token comment">// A sync or async function that retrieves the value of `y`</span>
<span class="token keyword">function</span> <span class="token function">fetchY</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ..</span>
<span class="token punctuation">}</span>
<span class="token function">sum</span><span class="token punctuation">(</span>fetchX<span class="token punctuation">,</span> fetchY<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>There is something very important here â€” in that snippet, we treated <code>x</code> and <code>y</code> as future values, and we expressed an operation sum(â€¦) that (from the outside) did not care whether x or y or both were or werenâ€™t available right away.</p> <blockquote><p>åœ¨è¿™æ®µä»£ç ä¸­éœ€è¦æ³¨æ„çš„æ˜¯ï¼š<code>x</code> å’Œ <code>y</code> æ˜¯æœªæ¥å€¼ï¼Œæˆ‘ä»¬ç”¨ <code>sum(..)</code>(ä»å¤–éƒ¨)æ¥è®¡ç®—æ¥ä¸¤å€¼ä¹‹å’Œï¼Œä½†æ˜¯å¹¶æ²¡æœ‰å…³æ³¨ <code>x</code> å’Œ <code>y</code> æ˜¯å¦é©¬ä¸ŠåŒæ—¶æœ‰å€¼ã€‚</p></blockquote> <p>Of course, this rough callbacks-based approach leaves much to be desired. Itâ€™s just a first tiny step towards understanding the benefits of reasoning about future values without worrying about the time aspect of when they will be available.</p> <blockquote><p>å½“ç„¶ï¼Œè¿™ä¸ªç²—ç³™çš„åŸºäºå›è°ƒçš„æŠ€æœ¯è¿˜æœ‰å¾ˆå¤šéœ€è¦æ”¹è¿›çš„åœ°æ–¹ã€‚è¿™åªæ˜¯å‘ç†è§£æ¨å‡ºæœªæ¥å€¼è€Œä¸ç”¨æ‹…å¿ƒä½•æ—¶æœ‰è¿”å›å€¼çš„å¥½å¤„è¿ˆå‡ºçš„ä¸€å°æ­¥ã€‚</p></blockquote> <h2 id="promise-value"><a href="#promise-value" class="header-anchor">#</a> Promise Value</h2> <blockquote><p>Promise å€¼</p></blockquote> <p>Letâ€™s just briefly glimpse at how we can express the x + y example with Promises:</p> <blockquote><p>è®©æˆ‘ä»¬ç®€ç•¥åœ°çœ‹ä¸€ä¸‹<code>x+y</code>è¿™ä¸ªä¾‹å­çš„ Promises ç‰ˆæœ¬  ï¼š</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">xPromise<span class="token punctuation">,</span> yPromise</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// `Promise.all([ .. ])` takes an array of promises,</span>
	<span class="token comment">// and returns a new promise that waits on them</span>
	<span class="token comment">// all to finish</span>
	<span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>xPromise<span class="token punctuation">,</span> yPromise<span class="token punctuation">]</span><span class="token punctuation">)</span>

	<span class="token comment">// when that promise is resolved, let's take the</span>
	<span class="token comment">// received `X` and `Y` values and add them together.</span>
	<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">values</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token comment">// `values` is an array of the messages from the</span>
		<span class="token comment">// previously resolved promises</span>
		<span class="token keyword">return</span> values<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> values<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// `fetchX()` and `fetchY()` return promises for</span>
<span class="token comment">// their respective values, which may be ready</span>
<span class="token comment">// *now* or *later*.</span>
<span class="token function">sum</span><span class="token punctuation">(</span><span class="token function">fetchX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">fetchY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// we get a promise back for the sum of those</span>
<span class="token comment">// two numbers.</span>
<span class="token comment">// now we chain-call `then(...)` to wait for the</span>
<span class="token comment">// resolution of that returned promise.</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">sum</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>There are two layers of Promises in this snippet.</p> <blockquote><p>ä»¥ä¸Šä»£ç ç‰‡æ®µå«æœ‰ä¸¤ç§å±‚æ¬¡çš„ Promiseã€‚</p></blockquote> <p><code>fetchX()</code> and <code>fetchY()</code> are called directly, and the values they return (promises!) are passed to <code>sum(...)</code>. The underlying values these promises represent may be ready <em>now</em> or <em>later</em>, but each promise normalizes its behavior to be the same regardless. We reason about <code>x</code> and <code>y</code> values in a time-independent way. They are <em>future values</em>, period.</p> <blockquote><p><code>fetchX()</code> å’Œ <code>fetchY()</code> éƒ½æ˜¯ç›´æ¥è°ƒç”¨ï¼Œå®ƒä»¬çš„è¿”å›å€¼(promises!)éƒ½è¢«ä¼ å…¥ <code>sum(â€¦)</code> ä½œä¸ºå‚æ•°ã€‚è™½ç„¶è¿™äº› promises çš„ è¿”å›å€¼ä¹Ÿè®¸ä¼šåœ¨ç°åœ¨æˆ–ä¹‹åè¿”å›ï¼Œä½†æ˜¯æ— è®ºå¦‚ä½•æ¯ä¸ª promise éƒ½å…·æœ‰ç›¸åŒçš„å¼‚æ­¥è¡Œä¸ºã€‚æˆ‘ä»¬å¯ä»¥è®¤ä¸º <code>x</code> å’Œ <code>y</code> æ˜¯ä¸æ—¶é—´æ— å…³çš„å€¼ã€‚æš‚æ—¶ç§°ä»–ä»¬ä¸ºæœªæ¥å€¼ã€‚</p></blockquote> <p>The second layer is the promise that <code>sum(...)</code> creates (via <code>Promise.all([ ... ])</code>) and returns, which we wait on by calling <code>then(...)</code>. When the <code>sum(...)</code> operation completes, our sum future value is ready and we can print it out. We hide the logic for waiting on the <code>x</code> and <code>y</code> <em>future values</em> inside of <code>sum(...)</code>.</p> <blockquote><p>ç¬¬äºŒå±‚æ¬¡çš„ Promise æ˜¯ç”± <code>sum(...)</code>(é€šè¿‡<code>Promise.all([...])</code>)æ‰€åˆ›å»ºå’Œè¿”å›çš„ï¼Œç„¶åé€šè¿‡è°ƒç”¨<code>then(...)</code>æ¥ç­‰å¾…promiseçš„è¿”å›å€¼ã€‚å½“<code>sun(...)</code>è¿è¡Œç»“æŸï¼Œè¿”å› sum æœªæ¥å€¼ç„¶åå°±å¯ä»¥æ‰“å°å‡ºæ¥ã€‚æˆ‘ä»¬åœ¨ <code>sum(â€¦)</code> å†…éƒ¨éšè—äº†ç­‰å¾…æœªæ¥å€¼ <code>x</code> å’Œ <code>y</code> çš„é€»è¾‘ã€‚</p></blockquote> <p><strong>Note</strong>: Inside <code>sum(â€¦)</code>, the <code>Promise.all([ â€¦ ])</code> call creates a promise (which is waiting on <code>promiseX</code> and <code>promiseY</code> to resolve). The chained call to <code>.then(...)</code> creates another promise, which the return <code>values[0] + values[1]</code> line immediately resolves (with the result of the addition). Thus, the <code>then(...)</code> call we chain off the end of the <code>sum(...)</code> call â€” at the end of the snippet â€” is actually operating on that second promise returned, rather than the first one created by <code>Promise.all([ ... ])</code>. Also, although we are not chaining off the end of that second <code>then(...)</code>, it too has created another promise, had we chosen to observe/use it. This Promise chaining stuff will be explained in much greater detail later in this chapter.</p> <blockquote><p><strong>æ³¨æ„</strong>ï¼šåœ¨ <code>sum(â€¦)</code> å†…éƒ¨ï¼Œ<code>Promise.all([ â€¦ ])</code>åˆ›å»ºäº†ä¸€ä¸ª promise(åœ¨ç­‰å¾… <code>promiseX</code> å’Œ <code>promiseY</code> è§£æä¹‹å)ã€‚é“¾å¼è°ƒç”¨ <code>.then(â€¦)</code> åˆ›å»ºäº†å¦ä¸€ä¸ª promiseï¼Œè¯¥ promise ä¼šç”±ä»£ç  <code>values[0] + values[1]</code> ç«‹åˆ»è¿›è¡Œè§£æ(è¿”å›ç›¸åŠ ç»“æœ)ã€‚å› æ­¤ï¼Œåœ¨ä»£ç ç‰‡æ®µçš„æœ«å°¾å³ <code>sum(â€¦)</code> çš„æœ«å°¾é“¾å¼è°ƒç”¨ <code>then(â€¦)</code>ï¼å®é™…ä¸Šæ˜¯åœ¨æ“ä½œç¬¬äºŒä¸ªè¿”å›çš„ promise è€Œä¸æ˜¯ç¬¬ä¸€ä¸ªç”± <code>Promise.all([ ... ])</code> åˆ›å»ºè¿”å›çš„ promiseã€‚åŒæ ·åœ°ï¼Œè™½ç„¶æˆ‘ä»¬æ²¡æœ‰åœ¨ç¬¬äºŒä¸ª<code>then(â€¦)</code> ä¹‹åè¿›è¡Œé“¾å¼è°ƒç”¨ï¼Œä½†æ˜¯å®ƒä¹Ÿåˆ›å»ºäº†å¦ä¸€ä¸ª promiseï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©è§‚å¯Ÿï¼ä½¿ç”¨è¯¥ promiseã€‚æˆ‘ä»¬å°†ä¼šåœ¨æœ¬ç« çš„éšåå†…å®¹ä¸­è¿›è¡Œè¯¦ç»†åœ°æ¢è®¨ promise çš„é“¾å¼è°ƒç”¨ç›¸å…³ã€‚</p></blockquote> <p>With Promises, the <code>then(...)</code> call can actually take two functions, the first for fulfillment (as shown earlier), and the second for rejection:</p> <blockquote><p>åœ¨ Promises ä¸­ï¼Œå®é™…ä¸Š <code>then(â€¦)</code> å‡½æ•°å¯ä»¥ä¼ å…¥ä¸¤ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‡½æ•°æ˜¯æˆåŠŸå‡½æ•°ï¼Œç¬¬äºŒä¸ªæ˜¯å¤±è´¥å‡½æ•°ã€‚</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">sum</span><span class="token punctuation">(</span><span class="token function">fetchX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">fetchY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    <span class="token comment">// fullfillment handler</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">sum</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> sum <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// rejection handler</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    	console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span> err <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// bummer!</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>If something went wrong when getting <code>x</code> or <code>y</code>, or something somehow failed during the addition, the promise that <code>sum(...)</code> returns would be rejected, and the second callback error handler passed to <code>then(...)</code> would receive the rejection value from the promise.</p> <blockquote><p>å½“è·å– <code>x</code> æˆ–è€… <code>y</code> å‡ºç°é”™è¯¯æˆ–è€…è®¡ç®—å’Œå€¼çš„æ—¶å€™å‡ºç°é”™è¯¯ï¼Œ<code>sum(â€¦)</code> è¿”å›çš„ promise å°†ä¼šå¤±è´¥ï¼Œå¹¶å°†promiseçš„å¤±è´¥åŸå› ï¼ˆæ‹’ç»å€¼ï¼‰ä¼ é€’ç»™ <code>then(...)</code> çš„ç¬¬äºŒä¸ªå›è°ƒé”™è¯¯å¤„ç†ç¨‹åºã€‚</p></blockquote> <p>Because Promises encapsulate the time-dependent state â€” waiting on the fulfillment or rejection of the underlying value â€” from the outside, the Promise itself is time-independent, and thus Promises can be composed (combined) in predictable ways regardless of the timing or outcome underneath.</p> <blockquote><p>å› ä¸º Promise å°è£…ä¸æ—¶é—´ç›¸å…³çš„çŠ¶æ€â€”ç­‰å¾…å¤–éƒ¨æˆåŠŸæˆ–å¤±è´¥çš„è¿”å›å€¼â€”â€”æ‰€ä»¥ Promise æœ¬èº«æ˜¯ä¸æ—¶é—´æ— å…³çš„ï¼Œå› æ­¤ Promise å¯ä»¥ä»¥å¯é¢„æµ‹çš„æ–¹å¼ç»„åˆï¼ˆåˆå¹¶ï¼‰ï¼Œè€Œä¸ç”¨å…³å¿ƒæ—¶åºæˆ–è€…è¿”å›ç»“æœã€‚</p></blockquote> <p>Moreover, once a Promise is resolved, it stays that way forever â€” it becomes an immutable value at that point â€” and can then be observed as many times as necessary.</p> <blockquote><p>æ­¤å¤–ï¼Œä¸€æ—¦ Promise è§£æå®Œæˆï¼Œå®ƒå°±ä¼šä¸€ç›´ä¿æŒä¸å¯å˜çš„çŠ¶æ€ä¸”å¯ä»¥è¢«éšæ„è§‚å¯Ÿã€‚</p></blockquote> <p>Itâ€™s really useful that you can actually chain promises:</p> <blockquote><p>é“¾å¼è°ƒç”¨ promise çœŸçš„å¾ˆç®¡ç”¨ï¼š</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token parameter">time</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> time<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;after 1000ms&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;after another 2000ms&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;step 4 (next Job)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// ...</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>Calling <code>delay(2000)</code> creates a promise that will fulfill in 2000ms, and then we return that from the first <code>then(...)</code> fulfillment callback, which causes the second <code>then(...)</code>'s promise to wait on that 2000ms promise.</p> <blockquote><p>è°ƒç”¨ <code>delay(2000)</code> åˆ›å»ºä¸€ä¸ªå°†åœ¨ 2 ç§’åè¿”å›æˆåŠŸçš„ promiseï¼Œç„¶åï¼Œä»ç¬¬ä¸€ä¸ª <code>then(â€¦)</code> çš„æˆåŠŸå›è°ƒå‡½æ•°ä¸­è¿”å›è¯¥ promiseï¼Œè¿™ä¼šä½¿å¾—ç¬¬äºŒä¸ª <code>then(â€¦)</code> è¿”å›çš„ promise åœ¨ç­‰å¾… 2 ç§’åè¿”å›ã€‚</p></blockquote> <p><strong>Note</strong>: Because a Promise is externally immutable once resolved, itâ€™s now safe to pass that value around to any party, knowing that it cannot be modified accidentally or maliciously. This is especially true in relation to multiple parties observing the resolution of a Promise. Itâ€™s not possible for one party to affect another partyâ€™s ability to observe Promise resolution. Immutability may sound like an academic topic, but itâ€™s actually one of the most fundamental and important aspects of Promise design, and shouldnâ€™t be casually passed over.</p> <blockquote><p><strong>æ³¨æ„</strong>ï¼šå› ä¸ºä¸€ä¸ª promise ä¸€æ—¦è§£æå…¶çŠ¶æ€å°±ä¸å¯ä»¥ä»å¤–éƒ¨æ”¹å˜ï¼Œæ­£æ˜¯ç”±äºå®ƒçš„çŠ¶æ€ä¸å¯ä»¥è¢«éšæ„ä¿®æ”¹ï¼Œæ‰€ä»¥å¯ä»¥å®‰å…¨åœ°æŠŠçŠ¶æ€å€¼åˆ†å‘ç»™ä»»æ„ç¬¬ä¸‰æ–¹ã€‚å½“æ¶‰åŠå¤šæ–¹è§‚å¯Ÿ Promise çš„è¿”å›ç»“æœæ—¶å€™æ›´æ˜¯å¦‚æ­¤ã€‚ä¸€æ–¹å½±å“å¦ä¸€æ–¹è§‚å¯Ÿ Promise è¿”å›ç»“æœçš„èƒ½åŠ›æ˜¯ä¸å¯èƒ½ã€‚ä¸å¯å˜æ€§å¬èµ·æ¥åƒæ˜¯ä¸ªæ™¦æ¶©çš„ç§‘å­¦è¯¾é¢˜ï¼Œä½†æ˜¯ï¼Œå®é™…ä¸Šè¿™æ˜¯ Promise æœ€æ ¹æœ¬å’Œé‡è¦çš„æ–¹é¢ï¼Œä½ å¾—å¥½å¥½ç ”ç©¶ç ”ç©¶ã€‚</p></blockquote> <h2 id="to-promise-or-not-to-promise"><a href="#to-promise-or-not-to-promise" class="header-anchor">#</a> To Promise or not to Promise?</h2> <blockquote><p>Promiseä½¿ç”¨æ—¶æœº</p></blockquote> <p>An important detail about Promises is knowing for sure if some value is an actual Promise or not. In other words, is it a value that will behave like a Promise?</p> <blockquote><p>Promise çš„ä¸€ä¸ªé‡è¦ç»†èŠ‚å³ç¡®å®šæŸäº›å€¼æ˜¯å¦æ˜¯çœŸæ­£çš„ Promiseã€‚æ¢å¥è¯è¯´ï¼Œè¿™ä¸ªå€¼æ˜¯å¦å…·æœ‰ Promise çš„è¡Œä¸ºã€‚</p></blockquote> <p>We know that Promises are constructed by the <code>new Promise(â€¦)</code> syntax, and you might think that <code>p instanceof Promise</code> would be a sufficient check. Well, not quite.</p> <blockquote><p>æˆ‘ä»¬çŸ¥é“å¯ä»¥åˆ©ç”¨ <code>new Promise(â€¦)</code> è¯­æ³•æ¥åˆ›å»º Promiseï¼Œç„¶åï¼Œä½ ä¼šè®¤ä¸ºä½¿ç”¨ <code>p instanceof Promise</code> æ¥æ£€æµ‹æŸä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ Promise ç±»çš„å®ä¾‹ã€‚ç„¶è€Œï¼Œå¹¶ä¸å…¨ç„¶å¦‚æ­¤ã€‚</p></blockquote> <p>Mainly because you can receive a Promise value from another browser window (e.g. iframe), which would have its own Promise, different from the one in the current window or frame, and that check would fail to identify the Promise instance.</p> <blockquote><p>ä¸»è¦çš„åŸå› åœ¨äºä½ å¯ä»¥ä»å¦ä¸€ä¸ªæµè§ˆå™¨çª—å£(æ¯”å¦‚ iframe)è·å¾— Promise å®ä¾‹ï¼Œiframe ä¸­çš„ Promise ä¸åŒäºå½“å‰æµè§ˆå™¨çª—å£æˆ–æ¡†æ¶ä¸­çš„ Promiseï¼Œå› æ­¤ï¼Œä¼šå¯¼è‡´æ£€æµ‹ Promise å®ä¾‹å¤±è´¥ã€‚</p></blockquote> <p>Moreover, a library or framework may choose to vend its own Promises and not use the native ES6 Promise implementation to do so. In fact, you may very well be using Promises with libraries in older browsers that have no Promise at all.</p> <blockquote><p>é™¤æ­¤ä¹‹å¤–ï¼Œåº“æˆ–æ¡†æ¶æˆ–è®¸ä¼šé€‰æ‹©ä½¿ç”¨è‡ªèº«è‡ªå¸¦çš„ Promise è€Œä¸æ˜¯åŸç”Ÿçš„ ES6 å®ç°çš„ Promiseã€‚å®é™…å·¥ä½œä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨åº“è‡ªå¸¦çš„ Promise æ¥å…¼å®¹ä¸æ”¯æŒ Promise çš„è€ç‰ˆæœ¬æµè§ˆå™¨ã€‚</p></blockquote> <h2 id="swallowing-exceptions"><a href="#swallowing-exceptions" class="header-anchor">#</a> Swallowing exceptions</h2> <blockquote><p>å¼‚å¸¸æ•è·</p></blockquote> <p>If at any point in the creation of a Promise, or in the observation of its resolution, a JavaScript exception error occurs, such as a <code>TypeError</code> or <code>ReferenceError</code>, that exception will be caught, and it will force the Promise in question to become rejected.</p> <blockquote><p>å¦‚æœåœ¨åˆ›å»º Promise æˆ–è€…æ˜¯åœ¨è§‚å¯Ÿè§£æ Promise è¿”å›ç»“æœæœŸé—´ï¼Œé‡åˆ°äº†è¯¸å¦‚ <code>TypeError</code> æˆ–è€… <code>ReferenceError</code> çš„ JavaScript é”™è¯¯å¼‚å¸¸ï¼Œè¿™ä¸ªå¼‚å¸¸ä¼šè¢«æ•è·è¿›è€Œå¼ºåˆ¶ Promise ä¸ºå¤±è´¥çŠ¶æ€ã€‚</p></blockquote> <p>For example:</p> <blockquote><p>æ¯”å¦‚</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    foo<span class="token punctuation">.</span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	  <span class="token comment">// `foo` is not defined, so error!</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">374</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// never gets here :(</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    <span class="token keyword">function</span> <span class="token function">fulfilled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// never gets here :(</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span> <span class="token function">rejected</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// `err` will be a `TypeError` exception object</span>
	<span class="token comment">// from the `foo.bar()` line.</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>But what happens if a Promise is fulfilled yet there was a JS exception error during the observation (in a <code>then(â€¦)</code> registered callback)? Even though it wonâ€™t be lost, you may find the way theyâ€™re handled a bit surprising. Until you dig a little deeper:</p> <blockquote><p>ä½†æ˜¯ï¼Œå¦‚æœ Promise æˆåŠŸè§£æäº†è€Œåœ¨æˆåŠŸè§£æçš„ç›‘å¬å‡½æ•°(<code>then(â€¦)</code> æ³¨å†Œå›è°ƒ)ä¸­æŠ›å‡º JS è¿è¡Œé”™è¯¯ä¼šæ€ä¹ˆæ ·ï¼Ÿä»ç„¶å¯ä»¥æ•æ‰åˆ°è¯¥å¼‚å¸¸ï¼Œä½†æˆ–è®¸ä½ ä¼šå‘ç°å¤„ç†è¿™äº›å¼‚å¸¸çš„æ–¹å¼æœ‰äº›è®©äººå¥‡æ€ªã€‚ç›´åˆ°æ·±å…¥ç†è§£å…¶ä¸­åŸç†ï¼š</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">374</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">fulfilled</span><span class="token punctuation">(</span><span class="token parameter">message</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    foo<span class="token punctuation">.</span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// never reached</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span> <span class="token function">rejected</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// never reached</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>It looks like the exception from <code>foo.bar()</code> really did get swallowed. It wasnâ€™t, though. There was something deeper that went wrong, however, which we failed to listen for. The <code>p.then(â€¦)</code> call itself returns another promise, and itâ€™s that promise that will be rejected with the TypeError exception.</p> <blockquote><p>çœ‹èµ·æ¥ <code>foo.bar()</code> æŠ›å‡ºçš„é”™è¯¯å¼‚å¸¸çœŸçš„è¢«æ•è·åˆ°äº†ã€‚ç„¶è€Œï¼Œäº‹å®ä¸Šå¹¶æ²¡æœ‰ã€‚ç„¶è€Œï¼Œæ·±å…¥ç†è§£ä½ ä¼šå‘ç°æˆ‘ä»¬æ²¡æœ‰ç›‘æµ‹åˆ°å…¶ä¸­ä¸€äº›é”™è¯¯ã€‚<code>p.then(â€¦)</code> è°ƒç”¨æœ¬èº«è¿”å›å¦ä¸€ä¸ª promiseï¼Œè¯¥ promise ä¼šè¿”å› <code>TypeError</code> ç±»å‹çš„å¼‚å¸¸å¤±è´¥ä¿¡æ¯ã€‚</p></blockquote> <hr> <p>éåŸæ–‡ï¼š</p> <p><strong>æ‹“å±•ä¸€ä¸‹ä»¥ä¸Šçš„è¯´æ˜ï¼Œè¿™æ˜¯åŸæ–‡æ²¡æœ‰çš„</strong>ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">374</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">fulfilled</span><span class="token punctuation">(</span><span class="token parameter">message</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    foo<span class="token punctuation">.</span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// æ°¸ä¸æ‰§è¡Œ</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span> <span class="token function">rejected</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// æ°¸ä¸æ‰§è¡Œ</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
	<span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'err'</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>å¦‚ä¸Šä»£ç æ‰€ç¤ºå°±å¯ä»¥çœŸæ­£æ•è·åˆ° promise æˆåŠŸè§£æå›è°ƒå‡½æ•°é‡Œé¢çš„ä»£ç é”™è¯¯ã€‚</p> <hr> <h2 id="handling-uncaught-exceptions"><a href="#handling-uncaught-exceptions" class="header-anchor">#</a> Handling uncaught exceptions</h2> <blockquote><p>å¤„ç†æœªæ•è·çš„å¼‚å¸¸</p></blockquote> <p>There are other approaches which many would say are <em>better</em>.</p> <blockquote><p>æœ‰å…¶å®ƒæ®è¯´æ›´å¥½çš„å¤„ç†å¼‚å¸¸çš„æŠ€å·§ã€‚</p></blockquote> <p>A common suggestion is that Promises should have a <code>done(â€¦)</code> added to them, which essentially marks the Promise chain as â€œdone.â€ <code>done(â€¦)</code> doesnâ€™t create and return a Promise, so the callbacks passed to <code>done(..)</code> are obviously not wired up to report problems to a chained Promise that doesnâ€™t exist.</p> <blockquote><p>æ™®éçš„åšæ³•æ˜¯ä¸º Promises æ·»åŠ  <code>done(..)</code> å›è°ƒï¼Œæœ¬è´¨ä¸Šè¿™ä¼šæ ‡è®° promise é“¾çš„çŠ¶æ€ä¸º &quot;done.&quot;ã€‚<code>done(â€¦)</code> å¹¶ä¸ä¼šåˆ›å»ºå’Œè¿”å› promiseï¼Œå› æ­¤ï¼Œå½“ä¸å­˜åœ¨é“¾å¼ promise çš„æ—¶å€™ï¼Œä¼ å…¥ <code>done(..)</code> çš„å›è°ƒæ˜¾ç„¶å¹¶ä¸ä¼šæŠ›å‡ºé”™è¯¯ã€‚</p></blockquote> <p>Itâ€™s treated as you might usually expect in uncaught error conditions: any exception inside a <code>done(..)</code> rejection handler would be thrown as a global uncaught error (in the developer console, basically):</p> <blockquote><p>å’Œæœªæ•è·çš„é”™è¯¯çŠ¶å†µä¸€æ ·ï¼šä»»ä½•åœ¨ <code>done(..)</code> å¤±è´¥å¤„ç†å‡½æ•°ä¸­çš„å¼‚å¸¸éƒ½å°†ä¼šè¢«æŠ›å‡ºä¸ºå…¨å±€é”™è¯¯(åŸºæœ¬ä¸Šæ˜¯åœ¨å¼€å‘è€…æ§åˆ¶å°)ã€‚</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> p <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">374</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">fulfilled</span><span class="token punctuation">(</span><span class="token parameter">msg</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// numbers don't have string functions,</span>
    <span class="token comment">// so will throw an error</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// If an exception is caused here, it will be thrown globally </span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="what-s-happening-in-es8-async-await"><a href="#what-s-happening-in-es8-async-await" class="header-anchor">#</a> Whatâ€™s happening in ES8? Async/await</h2> <blockquote><p>ES8ä¸­çš„Async/await</p></blockquote> <p>JavaScript ES8 introduced <code>async/await</code> that makes the job of working with Promises easier. Weâ€™ll briefly go through the possibilities <code>async/await</code> offers and how to leverage them to write async code.</p> <blockquote><p>JavaScript ES8 ä¸­ä»‹ç»äº† <code>async/await</code>ï¼Œè¿™ä½¿å¾—å¤„ç† Promises æ›´åŠ åœ°å®¹æ˜“ã€‚æˆ‘ä»¬å°†ä¼šç®€è¦ä»‹ç» <code>async/await</code> çš„æ‰€æœ‰å¯èƒ½çš„ä½¿ç”¨æ–¹å¼å¹¶åˆ©ç”¨å…¶æ¥ä¹¦å†™å¼‚æ­¥ä»£ç ã€‚</p></blockquote> <h2 id="how-to-use-async-await"><a href="#how-to-use-async-await" class="header-anchor">#</a> How to use async/await?</h2> <blockquote><p>å¦‚ä½•ä½¿ç”¨ async/await</p></blockquote> <p>You define an asynchronous function using the async function declaration. Such functions return an AsyncFunction object. The <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/AsyncFunction" target="_blank" rel="noopener noreferrer">AsyncFunction<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> object represents the asynchronous function which executes the code, contained within that function.</p> <blockquote><p>ä½¿ç”¨ <code>async</code> å‡½æ•°å®šä¹‰ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ã€‚è¯¥å‡½æ•°ä¼šè¿”å›<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/AsyncFunction" target="_blank" rel="noopener noreferrer">å¼‚æ­¥å‡½æ•°<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>å¯¹è±¡ã€‚<code>AsyncFunction</code> å¯¹è±¡è¡¨ç¤ºåœ¨å¼‚æ­¥å‡½æ•°ä¸­è¿è¡Œå…¶å†…éƒ¨ä»£ç ã€‚</p></blockquote> <p>When an async function is called, it returns a <code>Promise</code> . When the async function returns a value, thatâ€™s not a <code>Promise</code> , a <code>Promise</code> will be automatically created and it will be resolved with the returned value from the function. When the async function throws an exception, the Promise will be rejected with the thrown value.</p> <blockquote><p>å½“è°ƒç”¨å¼‚æ­¥å‡½æ•°çš„æ—¶å€™ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ª <code>Promise</code>ã€‚å¼‚æ­¥å‡½æ•°è¿”å›å€¼å¹¶<strong>é</strong> <code>Promise</code>ï¼Œåœ¨å‡½æ•°æ‰§è¡Œè¿‡ç¨‹ä¸­ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ª <code>Promise</code> å¹¶ä½¿ç”¨å‡½æ•°çš„è¿”å›å€¼æ¥è§£æè¯¥ <code>Promise</code>ã€‚å½“ <code>async</code> å‡½æ•°æŠ›å‡ºå¼‚å¸¸ï¼Œ<code>Promise</code> å¤±è´¥å›è°ƒä¼šè·å–æŠ›å‡ºçš„å¼‚å¸¸å€¼ã€‚</p></blockquote> <p>An <code>async</code> function can contain an <code>await</code> expression, that pauses the execution of the function and waits for the passed Promiseâ€™s resolution, and then resumes the async functionâ€™s execution and returns the resolved value.</p> <blockquote><p><code>async</code> å‡½æ•°å¯ä»¥åŒ…å«ä¸€ä¸ª <code>await</code> è¡¨è¾¾å¼ï¼Œè¿™æ ·å°±å¯ä»¥æš‚åœå‡½æ•°çš„æ‰§è¡Œæ¥ç­‰å¾…ä¼ å…¥çš„ Promise çš„è¿”å›ç»“æœï¼Œä¹‹åé‡å¯å¼‚æ­¥å‡½æ•°çš„æ‰§è¡Œå¹¶è¿”å›è§£æå€¼ã€‚</p></blockquote> <p>You can think of a <code>Promise</code> in JavaScript as the equivalent of Javaâ€™s <code>Future</code> or <code>C#</code>'s Task.</p> <blockquote><p>ä½ å¯ä»¥æŠŠ JavaScript ä¸­çš„ <code>Promise</code> çœ‹ä½œ Java ä¸­çš„ <code>Future</code> æˆ– <code>C#</code> ä¸­çš„ Taskã€‚</p></blockquote> <blockquote><p><em>The purpose of <code>async/await</code> is to simplify the behavior of using promises.</em></p></blockquote> <blockquote><p><code>async/await</code> æœ¬æ„æ˜¯ç”¨æ¥ç®€åŒ– promises çš„ä½¿ç”¨ã€‚</p></blockquote> <p>Letâ€™s take a look at the following example:</p> <blockquote><p>çœ‹ä¸€ä¸‹ä»£ç ï¼š</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Just a standard JavaScript function</span>
<span class="token keyword">function</span> <span class="token function">getNumber1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'374'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// This function does the same as getNumber1</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getNumber2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">374</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>Similarly, functions that are throwing exceptions are equivalent to functions that return promises that have been rejected:</p> <blockquote><p>ç±»ä¼¼åœ°ï¼ŒæŠ›å‡ºå¼‚å¸¸çš„å‡½æ•°ç­‰ä»·äºè¿”å›å¤±è´¥çš„ promisesã€‚</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'Some error'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token string">'Some error'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>The <code>await</code> keyword can only be used in <code>async</code> functions and allows you to synchronously wait on a Promise. If we use promises outside of an <code>async</code> function, weâ€™ll still have to use then callbacks:</p> <blockquote><p><code>await</code> å…³é”®å­—åªèƒ½åœ¨ <code>async</code> å‡½æ•°ä¸­ä½¿ç”¨å¹¶ä¸”å…è®¸ä½ åŒæ­¥ç­‰å¾… Promiseã€‚å¦‚æœåœ¨ <code>async</code> å‡½æ•°å¤–ä½¿ç”¨ promisesï¼Œæˆ‘ä»¬ä»ç„¶å¿…é¡»è¦ä½¿ç”¨ <code>then</code> å›è°ƒã€‚</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">loadData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// `rp` is a request-promise function.</span>
    <span class="token keyword">var</span> promise1 <span class="token operator">=</span> <span class="token function">rp</span><span class="token punctuation">(</span><span class="token string">'https://api.example.com/endpoint1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> promise2 <span class="token operator">=</span> <span class="token function">rp</span><span class="token punctuation">(</span><span class="token string">'https://api.example.com/endpoint2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   
    <span class="token comment">// Currently, both requests are fired, concurrently and</span>
    <span class="token comment">// now we'll have to wait for them to finish</span>
    <span class="token keyword">var</span> response1 <span class="token operator">=</span> <span class="token keyword">await</span> promise1<span class="token punctuation">;</span>
    <span class="token keyword">var</span> response2 <span class="token operator">=</span> <span class="token keyword">await</span> promise2<span class="token punctuation">;</span>
    <span class="token keyword">return</span> response1 <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> response2<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// Since, we're not in an `async function` anymore</span>
<span class="token comment">// we have to use `then`.</span>
<span class="token function">loadData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Done'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>You can also define async functions using an â€œasync function expressionâ€. An async function expression is very similar to and has almost the same syntax as, an async function statement. The main difference between an async function expression and an async function statement is the function name, which can be omitted in async function expressions to create anonymous functions. An async function expression can be used as an IIFE (Immediately Invoked Function Expression) which runs as soon as it is defined.</p> <blockquote><p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å¼‚æ­¥å‡½æ•°è¡¨è¾¾å¼æ¥å®šä¹‰å¼‚æ­¥å‡½æ•°ã€‚å¼‚æ­¥å‡½æ•°è¡¨è¾¾å¼æ‹¥æœ‰å’Œå¼‚æ­¥å‡½æ•°è¯­å¥ç›¸è¿‘çš„è¯­æ³•ã€‚å¼‚æ­¥å‡½æ•°è¡¨è¾¾å¼å’Œå¼‚æ­¥å‡½æ•°è¯­å¥çš„ä¸»è¦åŒºåˆ«åœ¨äºå‡½æ•°åï¼Œå¼‚æ­¥å‡½æ•°è¡¨è¾¾å¼å¯ä»¥å¿½ç•¥å‡½æ•°åæ¥åˆ›å»ºåŒ¿åå‡½æ•°ã€‚å¼‚æ­¥å‡½æ•°è¡¨è¾¾å¼å¯ä»¥è¢«ç”¨ä½œ IIFE(ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼)ï¼Œå¯ä»¥åœ¨å®šä¹‰çš„æ—¶å€™ç«‹å³è¿è¡Œã€‚</p></blockquote> <p>It looks like this:</p> <blockquote><p>åƒè¿™æ ·ï¼š</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">loadData</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// `rp` is a request-promise function.</span>
    <span class="token keyword">var</span> promise1 <span class="token operator">=</span> <span class="token function">rp</span><span class="token punctuation">(</span><span class="token string">'https://api.example.com/endpoint1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> promise2 <span class="token operator">=</span> <span class="token function">rp</span><span class="token punctuation">(</span><span class="token string">'https://api.example.com/endpoint2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   
    <span class="token comment">// Currently, both requests are fired, concurrently and</span>
    <span class="token comment">// now we'll have to wait for them to finish</span>
    <span class="token keyword">var</span> response1 <span class="token operator">=</span> <span class="token keyword">await</span> promise1<span class="token punctuation">;</span>
    <span class="token keyword">var</span> response2 <span class="token operator">=</span> <span class="token keyword">await</span> promise2<span class="token punctuation">;</span>
    <span class="token keyword">return</span> response1 <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> response2<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>More importantly, async/await is supported in all major browsers:</p> <blockquote><p>æ›´ä¸ºé‡è¦çš„æ˜¯ï¼Œæ‰€æœ‰çš„ä¸»æµæµè§ˆå™¨éƒ½æ”¯æŒ async/awaitã€‚</p></blockquote> <p><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210623161840.png" alt=""></p> <p>å¦‚æœè¯¥å…¼å®¹æ€§ä¸ç¬¦åˆä½ çš„éœ€æ±‚ï¼Œä½ å¯ä»¥ä½¿ç”¨è¯¸å¦‚ <a href="https://babeljs.io/docs/plugins/transform-async-to-generator/" target="_blank" rel="noopener noreferrer">Babel<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> å’Œ <a href="https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-3.html" target="_blank" rel="noopener noreferrer">TypeScript<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> çš„ JS è½¬è¯‘å™¨æ¥è½¬æ¢ä¸ºè‡ªå·±éœ€è¦çš„å…¼å®¹ç¨‹åº¦ã€‚</p> <p>At the end of the day, the important thing is not to blindly choose the â€œlatestâ€ approach to writing async code. Itâ€™s essential to understand the internals of async JavaScript, learn why itâ€™s so critical and comprehend in-depth the internals of the method you have chosen. Every approach has pros and cons as with everything else in programming.</p> <blockquote><p>æœ€åè¦è¯´çš„æ˜¯ï¼Œä¸è¦ç›²ç›®åœ°ä½¿ç”¨æœ€æ–°çš„æŠ€æœ¯æ¥å†™å¼‚æ­¥ä»£ç ã€‚ç†è§£ JavaScript ä¸­ async çš„å†…éƒ¨åŸç†æ˜¯éå¸¸é‡è¦çš„ï¼Œå­¦ä¹ ä¸ºä»€ä¹ˆæ·±å…¥ç†è§£æ‰€é€‰æ‹©çš„æ–¹æ³•æ˜¯å¾ˆé‡è¦çš„ã€‚æ­£å¦‚ç¼–ç¨‹ä¸­çš„å…¶å®ƒä¸œè¥¿ä¸€æ ·ï¼Œæ¯ç§æŠ€æœ¯éƒ½æœ‰å…¶ä¼˜ç¼ºç‚¹ã€‚</p></blockquote> <h2 id="_5-tips-on-writing-highly-maintainable-non-brittle-async-code"><a href="#_5-tips-on-writing-highly-maintainable-non-brittle-async-code" class="header-anchor">#</a> 5 Tips on writing highly maintainable, non-brittle async code</h2> <blockquote><p>ä¹¦å†™é«˜å¯ç”¨ï¼Œå¼ºå£®çš„å¼‚æ­¥ä»£ç çš„ 5 æ¡å°æŠ€å·§</p></blockquote> <ol><li><p><strong>Clean code</strong>: Using async/await allows you to write a lot less code. Every time you use async/await you skip a few unnecessary steps: write .then, create an anonymous function to handle the response, name the response from that callback e.g.</p> <blockquote><p>ç®€æ´ï¼šä½¿ç”¨ async/await å¯ä»¥è®©ä½ å†™æ›´å°‘çš„ä»£ç ã€‚æ¯æ¬¡ä¹¦å†™ async/await ä»£ç ï¼Œä½ éƒ½å¯ä»¥è·³è¿‡ä¹¦å†™ä¸€äº›ä¸å¿…è¦çš„æ­¥éª¤ï¼š æ¯”å¦‚ä¸ç”¨å†™ <code>.then</code> å›è°ƒï¼Œåˆ›å»ºåŒ¿åå‡½æ•°æ¥å¤„ç†è¿”å›å€¼ï¼Œå‘½åå›è°ƒè¿”å›å€¼ã€‚</p></blockquote></li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// `rp` is a request-promise function.</span>
<span class="token function">rp</span><span class="token punctuation">(</span>â€˜https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>api<span class="token punctuation">.</span>example<span class="token punctuation">.</span>com<span class="token operator">/</span>endpoint1'<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token comment">// â€¦</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Versus:</p> <blockquote><p>å¯¹æ¯”</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// `rp` is a request-promise function.</span>
<span class="token keyword">var</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">rp</span><span class="token punctuation">(</span>â€˜https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>api<span class="token punctuation">.</span>example<span class="token punctuation">.</span>com<span class="token operator">/</span>endpoint1'<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="2"><li><p><strong>Error handling</strong>: Async/await makes it possible to handle both sync and async errors with the same code construct â€” the well-known try/catch statements. Letâ€™s see how it looks with Promises:</p> <blockquote><p>é”™è¯¯å¤„ç†ï¼šAsync/await å…è®¸ä½¿ç”¨æ—¥å¸¸çš„ try/catch ä»£ç ç»“æ„ä½“æ¥å¤„ç†åŒæ­¥å’Œå¼‚æ­¥é”™è¯¯ã€‚çœ‹ä¸‹å’Œ Promise æ˜¯å¦‚ä½•å†™çš„ï¼š</p></blockquote></li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">loadData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span> <span class="token comment">// Catches synchronous errors.</span>
        <span class="token function">getJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> parsed <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>parsed<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// Catches asynchronous errors</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span> 
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>Versus:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">loadData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token function">getJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ol start="3"><li><p><strong>Conditionals</strong>: Writing conditional code with async/await is a lot more straightforward:</p> <blockquote><p>æ¡ä»¶è¯­å¥ï¼šä½¿ç”¨ <code>async/await</code> æ¥ä¹¦å†™æ¡ä»¶è¯­å¥ä¼šæ›´åŠ ç›´è§‚ã€‚</p></blockquote></li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">loadData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">getJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span>needsAnotherRequest<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">makeAnotherRequest</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">anotherResponse</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>anotherResponse<span class="token punctuation">)</span>
            <span class="token keyword">return</span> anotherResponse
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>
        <span class="token keyword">return</span> response
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>Versus:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">loadData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span>needsAnotherRequest<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> anotherResponse <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">makeAnotherRequest</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>anotherResponse<span class="token punctuation">)</span>
    <span class="token keyword">return</span> anotherResponse
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> response<span class="token punctuation">;</span>    
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ol start="4"><li><p><strong>Stack Frames</strong>: Unlike with <code>async/await</code>, the error stack returned from a promise chain gives no clue of where the error happened. Look at the following:</p> <blockquote><p>å †æ ˆæ¡¢ï¼šå’Œ <code>async/await</code> ä¸åŒçš„æ˜¯ï¼Œä»é“¾å¼ promise è¿”å›çš„é”™è¯¯å †æ ˆä¸­æ— æ³•å¾—çŸ¥å‘ç”Ÿé”™è¯¯çš„åœ°æ–¹ã€‚çœ‹å¦‚ä¸‹ä»£ç ï¼š</p></blockquote></li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">loadData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">callAPromise</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>callback1<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>callback2<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>callback3<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;boom&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">loadData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Error: boom at callAPromise.then.then.then.then (index.js:8:13)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>Versus:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">loadData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token function">callAPromise1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">await</span> <span class="token function">callAPromise2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">await</span> <span class="token function">callAPromise3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">await</span> <span class="token function">callAPromise4</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">await</span> <span class="token function">callAPromise5</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;boom&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">loadData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// output</span>
    <span class="token comment">// Error: boom at loadData (index.js:7:9)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ol start="5"><li><strong>Debugging</strong>: If you have used promises, you know that debugging them is a nightmare. For example, if you set a breakpoint inside a .then block and use debug shortcuts like â€œstop-overâ€, the debugger will not move to the following .then because it only â€œstepsâ€ through synchronous code.</li></ol> <blockquote><p>è°ƒè¯•ï¼šå¦‚æœä½¿ç”¨ promiseï¼Œä½ å°±ä¼šæ˜ç™½è°ƒè¯•å®ƒä»¬æ˜¯ä¸€åœºå™©æ¢¦ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ åœ¨ .then ä»£ç å—ä¸­è®¾ç½®ä¸€ä¸ªæ–­ç‚¹å¹¶ä¸”ä½¿ç”¨è¯¸å¦‚ &quot;stop-over&quot; çš„è°ƒè¯•å¿«æ·é”®ï¼Œè°ƒè¯•å™¨ä¸ä¼šç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ª .then ä»£ç å—ï¼Œå› ä¸ºè°ƒè¯•å™¨åªä¼šæ­¥è¿›åŒæ­¥ä»£ç ã€‚</p></blockquote> <p>With async/await you can step through await calls exactly as if they were normal synchronous functions.</p> <blockquote><p>ä½¿ç”¨ <code>async/await</code> ä½ å¯ä»¥å°±åƒåŒæ­¥ä»£ç é‚£æ ·æ­¥è¿›åˆ°ä¸‹ä¸€ä¸ª await è°ƒç”¨ã€‚</p></blockquote> <h2 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="header-anchor">#</a> å‚è€ƒæ–‡ç« </h2> <ul><li><a href="https://github.com/getify/You-Dont-Know-JS/blob/master/async%20%26%20performance/ch2.md" target="_blank" rel="noopener noreferrer">https://github.com/getify/You-Dont-Know-JS/blob/master/async%20%26%20performance/ch2.md<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/getify/You-Dont-Know-JS/blob/master/async%20%26%20performance/ch3.md" target="_blank" rel="noopener noreferrer">https://github.com/getify/You-Dont-Know-JS/blob/master/async%20%26%20performance/ch3.md<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://nikgrozev.com/2017/10/01/async-await/" target="_blank" rel="noopener noreferrer">http://nikgrozev.com/2017/10/01/async-await/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="gitalk-container"><div id="gitalk-container"></div></div></div></div></div> <div class="el-card py-3 px-3 mb-4 is-always-shadow"><!----><div class="el-card__body"><span></span></div></div> <div class="el-card mb-4 is-always-shadow"><div class="el-card__header"><div class="clearfix"><h5 class="m-0">
            Keep reading!
          </h5></div></div><div class="el-card__body"> <div class="container featured-posts my-4"><div class="el-carousel el-carousel--horizontal el-carousel--card"><div class="el-carousel__container" style="height:300px;"><button type="button" class="el-carousel__arrow el-carousel__arrow--left" style="display:none;"><i class="el-icon-arrow-left"></i></button><button type="button" class="el-carousel__arrow el-carousel__arrow--right" style="display:none;"><i class="el-icon-arrow-right"></i></button><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210420224048.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          å…³äºlinuxä¸¢å¤±/rootæ–‡ä»¶å¤¹å¯¼è‡´çš„-bash-4.1#(ä¸æ˜¾ç¤ºè·¯å¾„)çš„è§£å†³åŠæ³•
        </h4> <a href="/blog/2018/04/13/linux-bash/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017234336.png);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          Ubuntu 18.04LTSç³»ç»Ÿè®¾ç½®çª—å£æ‰“ä¸å¼€æˆ–è€…æ¶ˆå¤±è§£å†³åŠæ³•
        </h4> <a href="/blog/2018/04/29/ubuntu-setting/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017234336.png);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          apt-getå‘½ä»¤ã€dpkgå‘½ä»¤ã€rpmå‘½ä»¤å’Œyumå‘½ä»¤
        </h4> <a href="/blog/2018/04/30/ubuntu-apt-dpkg/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210507211010.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          Creating and triggering events
        </h4> <a href="/blog/2018/08/28/custom-event/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210420223609.png);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          Cookieã€Sessionã€WebStorage
        </h4> <a href="/blog/2018/10/10/cookie/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210420224048.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          Xshellæ— æ³•è¿æ¥åˆ°Linuxè™šæ‹Ÿæœº
        </h4> <a href="/blog/2018/10/21/xshell/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017234007.jpg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          Shell value too great for base
        </h4> <a href="/blog/2018/12/09/shell-value-too-great-for-base/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017192245.jpg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          nodeæ ¸å¿ƒæ¨¡å—â€”â€”path
        </h4> <a href="/blog/2020/04/20/node-path/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017192245.jpg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          nodeæ ¸å¿ƒæ¨¡å—â€”â€”fs
        </h4> <a href="/blog/2020/05/08/node-fs/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017230306.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          centos7å®‰è£…jenkinså’Œgitlabè¸©å‘è®°
        </h4> <a href="/blog/2020/05/17/gitlab-jenkins/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017192245.jpg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          nodeæ ¸å¿ƒæ¨¡å—â€”â€”os
        </h4> <a href="/blog/2020/05/27/node-os/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017191711.gif);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          å›æ–‡æ•°
        </h4> <a href="/blog/2020/06/01/leetcode-ispalindrome-09/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017190350.jpg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          pow(x,n)
        </h4> <a href="/blog/2020/06/02/leetcode-pow-x-n-50/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017151542.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          åŠ ä¸€
        </h4> <a href="/blog/2020/06/03/leetcode-pluse-one-66/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017151542.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          çŸ©é˜µç½®é›¶
        </h4> <a href="/blog/2020/06/04/leetcode-set-matrix-zeroes-73/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017151542.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          æ¨è¾‰ä¸‰è§’
        </h4> <a href="/blog/2020/06/05/leetcode-pascal-s-triangle-118/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017151542.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          å¤šæ•°å…ƒç´ 
        </h4> <a href="/blog/2020/06/06/leetcode-majorityelement-169/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017151542.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          æ£€æµ‹å¤§å†™å­—æ¯
        </h4> <a href="/blog/2020/06/08/leetcode-detectcapitaluse-520/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017151542.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†
        </h4> <a href="/blog/2020/06/07/leetcode-intersectionoftwoarrays-349/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017151542.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          è®¾è®¡å“ˆå¸Œé›†åˆ
        </h4> <a href="/blog/2020/06/09/leetcode-designhashset-705/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017175905.png);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          è¿ç»­èµ‹å€¼
        </h4> <a href="/blog/2020/06/10/continuousassignment/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017151542.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          å®çŸ³ä¸çŸ³å¤´
        </h4> <a href="/blog/2020/06/10/leetcode-numjewelsinstones-771/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017151542.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          é¡ºæ¬¡æ•°
        </h4> <a href="/blog/2020/06/11/leetcode-sequentialdigits-1291/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017151542.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          0ï½n-1ä¸­ç¼ºå¤±çš„æ•°å­—
        </h4> <a href="/blog/2020/06/12/leetcode-missingnumber-interview-53-ii/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017151542.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          1103.åˆ†ç³–æœII
        </h4> <a href="/blog/2020/06/13/leetcode-distributecandies-1103/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017105512.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          JSåŸç”Ÿå‡½æ•°å®ç°ä¹‹callã€applyã€bind
        </h4> <a href="/blog/2020/06/15/apply-call-bind/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017151542.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          239.æ»‘åŠ¨çª—å£æœ€å¤§å€¼
        </h4> <a href="/blog/2020/06/16/leetcode-maxslidingwindow-239/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017150634.png);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          JSåŸç”Ÿå‡½æ•°å®ç°ä¹‹æ•°ç»„å®ä¾‹æ–¹æ³•map/reduce
        </h4> <a href="/blog/2020/06/16/map-reduce/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017145747.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          å…ƒç´ å‚ç›´æ°´å¹³å±…ä¸­çš„å‡ ç§æ–¹æ³•
        </h4> <a href="/blog/2020/06/17/center-middle/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017105512.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          ES5/6å¯¹è±¡çš„ç»§æ‰¿åŠåŒºåˆ«
        </h4> <a href="/blog/2020/06/18/es5-es6-extend/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017105512.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          CommonJS ä¸ ES6 Moduleçš„åŒºåˆ«
        </h4> <a href="/blog/2020/06/19/cjs-esm-import-diff/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017105512.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          JSåŸç”Ÿå‡½æ•°æ¨¡æ‹Ÿå®ç°newå’ŒinstanceofåŠå‡½æ•°æŸ¯é‡ŒåŒ–
        </h4> <a href="/blog/2020/06/20/new-instanceof/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017105512.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          å‡½æ•°é˜²æŠ–å’ŒèŠ‚æµã€ä»¥åŠPromise.allå®ç°
        </h4> <a href="/blog/2020/06/22/debounce-throttle/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017114430.jpg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          äº‹ä»¶è§¦å‘å™¨EventEmitter
        </h4> <a href="/blog/2020/06/23/eventemitter/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017111554.jpg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          å›æº¯ç®—æ³•
        </h4> <a href="/blog/2020/07/02/backtrack/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017113243.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          lesså†…ç½®å‡½æ•°
        </h4> <a href="/blog/2020/06/28/less-function/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017110754.png);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          å †æ’åº&amp;ä¼˜å…ˆçº§é˜Ÿåˆ—
        </h4> <a href="/blog/2020/07/12/heap/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017101258.png);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          é¢˜ç›®:ç»å…¸çš„FOO.getNameé—®é¢˜
        </h4> <a href="/blog/2020/08/01/foogetname/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqs/blogImage/raw/master/blogImage/v2-a0d10af45e785fe8d3f5cd12f8c309f5_r.jpg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          å½»åº•ææ‡‚HTTPSçš„åŠ å¯†æœºåˆ¶
        </h4> <a href="/blog/2020/08/12/https/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017103330.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          è®¡ç®—æœºç»„æˆåŸç†â€”â€”ç¬¬äºŒç« 
        </h4> <a href="/blog/2020/07/28/principles-of-computer-organization-02/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20200810230903.png);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          è®¡ç®—æœºç»„æˆåŸç†â€”â€”ç¬¬ä¸‰ç« 
        </h4> <a href="/blog/2020/08/20/principles-of-computer-organization-03/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20200825222450.png);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          è®¡ç®—æœºç»„æˆåŸç†â€”â€”ç¬¬å››ç« 
        </h4> <a href="/blog/2020/08/25/principles-of-computer-organization-04/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqs/blogImage/raw/master/blogImage/3378128262-5d07af0750999.png);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          é«˜æ€§èƒ½JavaScriptâ€”â€”ç¬¬ä¸€ç« 
        </h4> <a href="/blog/2020/08/28/load-execute/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20200831230601.png);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          Units in css
        </h4> <a href="/blog/2020/08/31/css-unit/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqs/blogImage/raw/master/blogImage/20200905134629.jpg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          ä½ å¯èƒ½è¿˜ä¸çŸ¥é“consoleå¯¹è±¡
        </h4> <a href="/blog/2020/09/04/console/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201016234622.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          äº†è§£cjsã€esmä»¥åŠrequire.context
        </h4> <a href="/blog/2020/09/08/cjs-esm-require-context/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20200913170310.gif);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          åŸŸåå‘æ•£å’ŒåŸŸåæ”¶æ•›
        </h4> <a href="/blog/2020/09/13/domain-dns/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqs/blogImage/raw/master/blogImage/20200828171746.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          é«˜æ€§èƒ½JavaScriptâ€”â€”ç¬¬äºŒç« 
        </h4> <a href="/blog/2020/09/22/dataaccess/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201004184833.jpg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          é«˜æ€§èƒ½JavaScriptâ€”â€”ç¬¬ä¸‰ç« 
        </h4> <a href="/blog/2020/10/01/dom/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201008220027.png);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          Chromeæµè§ˆå™¨æ¶æ„
        </h4> <a href="/blog/2020/10/12/chromestructure/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqs/blogImage/raw/master/blogImage/20201104182622.jpg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          JSON.parse(JSON.stringify(obj))å®ç°æ·±æ‹·è´çš„ç¼ºç‚¹
        </h4> <a href="/blog/2020/10/20/deepclone/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqs/blogImage/raw/master/blogImage/20201110205703.jpg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          é«˜æ€§èƒ½JavaScriptâ€”â€”ç¬¬å››ç« 
        </h4> <a href="/blog/2020/11/01/alo-flowcontrol/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqs/blogImage/raw/master/blogImage/20201111175711.png);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          How JavaScript works - an overview of the engine, the runtime, and the call stack
        </h4> <a href="/blog/2020/11/12/how-javascript-work1/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201203211137.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          æ­£åˆ™è¡¨è¾¾å¼30åˆ†é’Ÿå…¥é—¨æ•™ç¨‹
        </h4> <a href="/blog/2020/12/01/regexp/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqs/blogImage/raw/master/blogImage/20201208172723.jpg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          è¯¦è§£å¹³è¡¡ç»„
        </h4> <a href="/blog/2020/12/09/regexp-nfa/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqs/blogImage/raw/master/blogImage/20201216172057.jpg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          é¡¹ç›®ä¸­ç”¨SVGç”»æ›²çº¿å’ŒåŠ¨ç”»çš„ä¸€æ¬¡è®°å½•
        </h4> <a href="/blog/2020/12/16/svg/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqs/blogImage/raw/master/blogImage/20201219170044.gif);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          å•è¡Œçœç•¥å’Œå¤šè¡Œçœç•¥
        </h4> <a href="/blog/2020/12/20/ellipsis/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201226160513.png);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          æµ…æArrayBufferå¯¹è±¡(ä¸Š)
        </h4> <a href="/blog/2020/12/31/arraybuffer/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210107225332.jpg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          Vue3 one piece
        </h4> <a href="/blog/2021/01/07/vue3/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210109223210.jpg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          TypeScriptå­¦ä¹ è®°å½•(ä¸€)
        </h4> <a href="/blog/2021/01/09/typescript/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210126213808.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          çº¿ç¨‹å®‰å…¨
        </h4> <a href="/blog/2021/01/26/thread-safety/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210305230928.jpg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          Sasså…¥é—¨å­¦ä¹ 
        </h4> <a href="/blog/2021/03/05/sass/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210325224201.jpg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          ç™¾åº¦å°ç¨‹åºâ€”â€”åŸºç¡€åŸç†ç¯‡
        </h4> <a href="/blog/2021/03/24/baidu-swan/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210329171827.png);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          æ¼«è¯ï¼šå¦‚ä½•ç»™å¥³æœ‹å‹è§£é‡Šä¸ºä»€ä¹ˆè®¡ç®—æœºä¸­ 0.2 + 0.1 ä¸ç­‰äº 0.3 ï¼Ÿ
        </h4> <a href="/blog/2021/03/29/float-double/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210407135526.jpg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          ASTå®ç°å‡½æ•°è‡ªåŠ¨åŒ…è£¹try/catch
        </h4> <a href="/blog/2021/04/10/ast/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqs/blogImage/raw/master/blogImage/20201217171505.png);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          How JavaScript works - inside the V8 engine + 5 tips on how to write optimized code
        </h4> <a href="/blog/2021/04/13/how-javascript-work2/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210421234422.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          åšå®¢ä¼˜åŒ–äºŒä¸‰äº‹
        </h4> <a href="/blog/2021/04/21/blog-opt/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210505231625.png);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          Concurrency vs. Parallelism
        </h4> <a href="/blog/2021/05/05/concurrency-parallelism/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210513202439.png);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          å»å“ªåƒ
        </h4> <a href="/blog/2021/05/13/eat-what/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210517122820.png);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          How JavaScript works - memory management + how to handle 4 common memory leaks
        </h4> <a href="/blog/2021/06/01/how-javascript-work3/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210602223659.png);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          äº¤æ¢æœºå’Œè·¯ç”±å™¨çš„åŒºåˆ«
        </h4> <a href="/blog/2021/05/20/router-switch/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210609120039.jpg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          å †å’Œæ ˆçš„åŒºåˆ«
        </h4> <a href="/blog/2021/06/09/stack-heap-diff/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210622203624.gif);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          How JavaScript works - Event loop and the rise of Async programming + 5 ways to better coding with async/await
        </h4> <a href="/blog/2021/06/22/how-javascript-work4/" aria-current="page" class="el-button el-button--primary router-link-exact-active router-link-active">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210628224652.png);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          JS å›¾ç‰‡å‹ç¼©
        </h4> <a href="/blog/2021/06/28/image-compress/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210704162016.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          ES next
        </h4> <a href="/blog/2021/07/01/es-next/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210723153229.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          è½¬è½½-èŠ‚é€‰-ç§‘æŠ€çˆ±å¥½è€…å‘¨åˆŠèŠ‚é€‰ï¼ˆ168æœŸï¼‰
        </h4> <a href="/blog/2021/07/23/sci-note/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210730213554.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          è½¬è½½-èŠ‚é€‰-ç§‘æŠ€çˆ±å¥½è€…å‘¨åˆŠèŠ‚é€‰ï¼ˆ169æœŸï¼‰
        </h4> <a href="/blog/2021/07/30/sci-note2/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210806181429.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          è½¬è½½-èŠ‚é€‰-ç§‘æŠ€çˆ±å¥½è€…å‘¨åˆŠèŠ‚é€‰ï¼ˆ170æœŸï¼‰
        </h4> <a href="/blog/2021/08/07/sci-note3/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210802155602.png);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          ä¸ºä»€ä¹ˆè®¾å¤‡æ¬ºéª—å˜å¾—å‡ ä¹ä¸å¯èƒ½
        </h4> <a href="/blog/2021/08/12/device-spoof/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210813163942.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          è½¬è½½-èŠ‚é€‰-ç§‘æŠ€çˆ±å¥½è€…å‘¨åˆŠèŠ‚é€‰ï¼ˆ171æœŸï¼‰
        </h4> <a href="/blog/2021/08/13/sci-note4/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210815223336.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          å¦‚ä½•å¯¹å›¾ç‰‡ä¸»é¢˜è‰²è¿›è¡Œæå–
        </h4> <a href="/blog/2021/08/15/get-image-data/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210816143708.png);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          How JavaScript works - Deep dive into WebSockets and HTTP/2 with SSE + how to pick the right path
        </h4> <a href="/blog/2021/08/18/how-javascript-work5/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210820154332.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          è½¬è½½-èŠ‚é€‰-ç§‘æŠ€çˆ±å¥½è€…å‘¨åˆŠèŠ‚é€‰ï¼ˆ172æœŸï¼‰
        </h4> <a href="/blog/2021/08/20/sci-note5/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210828145215.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          è½¬è½½-èŠ‚é€‰-ç§‘æŠ€çˆ±å¥½è€…å‘¨åˆŠèŠ‚é€‰ï¼ˆ173æœŸï¼‰
        </h4> <a href="/blog/2021/08/28/sci-note6/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210901153710.png);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          æ·±å…¥è§£æ EventLoop å’Œæµè§ˆå™¨æ¸²æŸ“ã€å¸§åŠ¨ç”»ã€ç©ºé—²å›è°ƒçš„å…³ç³»
        </h4> <a href="/blog/2021/09/02/eventloop-raf-rid/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210911221105.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          è½¬è½½-èŠ‚é€‰-ç§‘æŠ€çˆ±å¥½è€…å‘¨åˆŠèŠ‚é€‰ï¼ˆ175æœŸï¼‰
        </h4> <a href="/blog/2021/09/11/sci-note8/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210903161221.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          è½¬è½½-èŠ‚é€‰-ç§‘æŠ€çˆ±å¥½è€…å‘¨åˆŠèŠ‚é€‰ï¼ˆ174æœŸï¼‰
        </h4> <a href="/blog/2021/09/03/sci-note7/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210928212522.jpg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          è½¬è½½-èŠ‚é€‰-ç§‘æŠ€çˆ±å¥½è€…å‘¨åˆŠèŠ‚é€‰ï¼ˆ176&amp;177æœŸï¼‰
        </h4> <a href="/blog/2021/09/28/sci-note9-10/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210929161341.png);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          Webé¡µé¢å­èµ„æºå®Œæ•´æ€§æ ¡éªŒè¯¦ç»†æŒ‡å—
        </h4> <a href="/blog/2021/09/29/sir/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017105512.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          é¢˜ç›®:å˜é‡æå‡/åŒ¿åå‡½æ•°thisæŒ‡å‘
        </h4> <a href="/blog/2020/07/17/subject-this/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017104351.png);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          è®¡ç®—æœºç»„æˆåŸç†â€”â€”ç¬¬ä¸€ç« 
        </h4> <a href="/blog/2020/07/25/principles-of-computer-organization-01/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div></div><!----></div></div></div></div> <div class="el-card is-always-shadow"><div class="el-card__header"><div class="clearfix"><h5 class="m-0">
            Tags
          </h5></div></div><div class="el-card__body"> <div><a href="/blog/tag/ç¿»è¯‘" class="el-button el-button--small text-decoration-none d-inline-block mb-3">
            #ç¿»è¯‘
          </a><a href="/blog/tag/è½¬è½½" class="el-button el-button--small text-decoration-none d-inline-block mb-3">
            #è½¬è½½
          </a><a href="/blog/tag/JavaScript" class="el-button el-button--small text-decoration-none d-inline-block mb-3">
            #JavaScript
          </a></div></div></div> <!----></main></div> <footer class="footer" data-v-6320141e><div class="footer-left-wrap" data-v-6320141e><ul class="contact" data-v-6320141e><li class="contact-item" data-v-6320141e><a href="https://github.com/yancqs" target="_blank" rel="noopener noreferrer" class="external" data-v-6320141e><span class="iconfont icon-github" data-v-6320141e></span></a></li><li class="contact-item" data-v-6320141e><a href="https://weibo.com/superYoha" target="_blank" rel="noopener noreferrer" class="external" data-v-6320141e><span class="iconfont icon-weibo" data-v-6320141e></span></a></li><li class="contact-item" data-v-6320141e><a href="https://www.zhihu.com/people/yoha-32-56" target="_blank" rel="noopener noreferrer" class="external" data-v-6320141e><span class="iconfont icon-zhihu" data-v-6320141e></span></a></li></ul></div> <div class="busuanzi" data-v-2369ea9e data-v-6320141e><span id="busuanzi_container_site_pv" data-v-2369ea9e>
    æœ¬ç«™æ€»è®¿é—®é‡
    <span id="busuanzi_value_site_pv" data-v-2369ea9e></span>æ¬¡
    <span class="post-meta-divider" data-v-2369ea9e>|</span></span> <span id="busuanzi_container_site_uv" data-v-2369ea9e>
    æœ¬ç«™è®¿å®¢æ•°
    <span id="busuanzi_value_site_uv" data-v-2369ea9e></span>äºº
  </span></div> <div class="footer-right-wrap" data-v-6320141e><ul class="copyright" data-v-6320141e><li class="copyright-item" data-v-6320141e><a href="https://policies.google.com/privacy?hl=en-US" target="_blank" rel="noopener noreferrer" class="external" data-v-6320141e>
            Privacy Policy
          </a></li><li class="copyright-item" data-v-6320141e><a data-v-6320141e>MIT Licensed Copyright Â© 2018-2021</a></li></ul></div></footer> <!----> <!----></div><div class="global-ui"><!----></div></div>
    <script src="/blog/assets/js/app.17593fe9.js" defer></script><script src="/blog/assets/js/5.7f298969.js" defer></script><script src="/blog/assets/js/99.05b51c23.js" defer></script><script src="/blog/assets/js/9.4870dbdd.js" defer></script><script src="/blog/assets/js/6.a04f6604.js" defer></script><script src="/blog/assets/js/7.39ffec36.js" defer></script><script src="/blog/assets/js/10.515f05c9.js" defer></script>
  </body>
</html>
