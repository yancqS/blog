<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>百度小程序——基础原理篇 | Yoha&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/blog/favicon.ico">
    <meta name="description" content="百度小程序">
    <meta name="title" content="百度小程序">
    <meta name="keywords" content="百度小程序, 小程序">
    <meta name="author" content="Yoha">
    
    <link rel="preload" href="/blog/assets/css/0.styles.75eee9cd.css" as="style"><link rel="preload" href="/blog/assets/js/app.b3165492.js" as="script"><link rel="preload" href="/blog/assets/js/5.fb57028e.js" as="script"><link rel="preload" href="/blog/assets/js/82.698ba1a4.js" as="script"><link rel="preload" href="/blog/assets/js/8.69cb0bf8.js" as="script"><link rel="preload" href="/blog/assets/js/6.00881a70.js" as="script"><link rel="prefetch" href="/blog/assets/js/1.fc7e7234.js"><link rel="prefetch" href="/blog/assets/js/10.beaac110.js"><link rel="prefetch" href="/blog/assets/js/11.aa35d1aa.js"><link rel="prefetch" href="/blog/assets/js/12.a86548b5.js"><link rel="prefetch" href="/blog/assets/js/13.a714a451.js"><link rel="prefetch" href="/blog/assets/js/14.e2694484.js"><link rel="prefetch" href="/blog/assets/js/15.4d7d14e9.js"><link rel="prefetch" href="/blog/assets/js/16.2c89c2bd.js"><link rel="prefetch" href="/blog/assets/js/17.dfa654ae.js"><link rel="prefetch" href="/blog/assets/js/18.e3c69faa.js"><link rel="prefetch" href="/blog/assets/js/19.13e9e275.js"><link rel="prefetch" href="/blog/assets/js/20.a489ac9f.js"><link rel="prefetch" href="/blog/assets/js/21.7ee31177.js"><link rel="prefetch" href="/blog/assets/js/22.5e128952.js"><link rel="prefetch" href="/blog/assets/js/23.b98f93b3.js"><link rel="prefetch" href="/blog/assets/js/24.4865e746.js"><link rel="prefetch" href="/blog/assets/js/25.57c1aaec.js"><link rel="prefetch" href="/blog/assets/js/26.51135953.js"><link rel="prefetch" href="/blog/assets/js/27.bd70986a.js"><link rel="prefetch" href="/blog/assets/js/28.6330717e.js"><link rel="prefetch" href="/blog/assets/js/29.46e29204.js"><link rel="prefetch" href="/blog/assets/js/30.880634cb.js"><link rel="prefetch" href="/blog/assets/js/31.73d81b97.js"><link rel="prefetch" href="/blog/assets/js/32.3d26ad82.js"><link rel="prefetch" href="/blog/assets/js/33.2d10efdf.js"><link rel="prefetch" href="/blog/assets/js/34.e4dbc964.js"><link rel="prefetch" href="/blog/assets/js/35.782422e8.js"><link rel="prefetch" href="/blog/assets/js/36.21c1a3ed.js"><link rel="prefetch" href="/blog/assets/js/37.83e99a50.js"><link rel="prefetch" href="/blog/assets/js/38.94bc9bde.js"><link rel="prefetch" href="/blog/assets/js/39.b724a208.js"><link rel="prefetch" href="/blog/assets/js/4.b92d0852.js"><link rel="prefetch" href="/blog/assets/js/40.415a8f85.js"><link rel="prefetch" href="/blog/assets/js/41.da012701.js"><link rel="prefetch" href="/blog/assets/js/42.aeaf70d4.js"><link rel="prefetch" href="/blog/assets/js/43.b39484a1.js"><link rel="prefetch" href="/blog/assets/js/44.3895a307.js"><link rel="prefetch" href="/blog/assets/js/45.e719e4ef.js"><link rel="prefetch" href="/blog/assets/js/46.e1c3528a.js"><link rel="prefetch" href="/blog/assets/js/47.778f8083.js"><link rel="prefetch" href="/blog/assets/js/48.8cd62c88.js"><link rel="prefetch" href="/blog/assets/js/49.414e8211.js"><link rel="prefetch" href="/blog/assets/js/50.3ecff4cd.js"><link rel="prefetch" href="/blog/assets/js/51.a854dc36.js"><link rel="prefetch" href="/blog/assets/js/52.d5b5b482.js"><link rel="prefetch" href="/blog/assets/js/53.58d0333b.js"><link rel="prefetch" href="/blog/assets/js/54.23d34163.js"><link rel="prefetch" href="/blog/assets/js/55.beae23ea.js"><link rel="prefetch" href="/blog/assets/js/56.82368ebc.js"><link rel="prefetch" href="/blog/assets/js/57.17524f2b.js"><link rel="prefetch" href="/blog/assets/js/58.63e9acf2.js"><link rel="prefetch" href="/blog/assets/js/59.aaacc01a.js"><link rel="prefetch" href="/blog/assets/js/60.9bc94671.js"><link rel="prefetch" href="/blog/assets/js/61.b5660afd.js"><link rel="prefetch" href="/blog/assets/js/62.473a036e.js"><link rel="prefetch" href="/blog/assets/js/63.5a23c590.js"><link rel="prefetch" href="/blog/assets/js/64.7c7a9c0d.js"><link rel="prefetch" href="/blog/assets/js/65.8cc5fff2.js"><link rel="prefetch" href="/blog/assets/js/66.174fbb03.js"><link rel="prefetch" href="/blog/assets/js/67.421e6d8f.js"><link rel="prefetch" href="/blog/assets/js/68.b8d6aab8.js"><link rel="prefetch" href="/blog/assets/js/69.1a8445d5.js"><link rel="prefetch" href="/blog/assets/js/7.e383f68a.js"><link rel="prefetch" href="/blog/assets/js/70.5212a673.js"><link rel="prefetch" href="/blog/assets/js/71.02a46480.js"><link rel="prefetch" href="/blog/assets/js/72.de7cb2e7.js"><link rel="prefetch" href="/blog/assets/js/73.b3882d06.js"><link rel="prefetch" href="/blog/assets/js/74.4779b4b7.js"><link rel="prefetch" href="/blog/assets/js/75.03960c98.js"><link rel="prefetch" href="/blog/assets/js/76.4d9878cc.js"><link rel="prefetch" href="/blog/assets/js/77.251bd2e1.js"><link rel="prefetch" href="/blog/assets/js/78.a593d24c.js"><link rel="prefetch" href="/blog/assets/js/79.597b96f8.js"><link rel="prefetch" href="/blog/assets/js/80.1b87ebdf.js"><link rel="prefetch" href="/blog/assets/js/81.324d625f.js"><link rel="prefetch" href="/blog/assets/js/83.d85c8a47.js"><link rel="prefetch" href="/blog/assets/js/84.805f8114.js"><link rel="prefetch" href="/blog/assets/js/85.12f3ef2c.js"><link rel="prefetch" href="/blog/assets/js/86.40555757.js"><link rel="prefetch" href="/blog/assets/js/9.7afd78bb.js"><link rel="prefetch" href="/blog/assets/js/vuejs-paginate.f8807e9a.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.75eee9cd.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="global-layout d-flex flex-column"><header id="header" class="shadow"><nav class="p-3 d-flex desktop-menu justify-content-between"><div class="d-flex blog-info-wrapper"><a href="/blog/" class="text-decoration-none m-0 router-link-active"><div class="card-img-bg d-inline-block blog-logo"><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210414163022.jpeg" height="40px" style="margin-right:10px;"></div></a> <a href="/blog/" class="blog-title router-link-active"><div class="h4 text-center">
          Yoha's Blog
        </div></a></div> <ul role="menubar" class="d-flex justify-content-center border-0 el-menu--horizontal el-menu" style="background-color:;"><li role="menuitem" tabindex="-1" router="" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;"><i class="el-icon-house"></i>
    Home
  </li><li role="menuitem" tabindex="-1" router="" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;"><i class="el-icon-lollipop"></i>
    Life
  </li><li role="menuitem" tabindex="-1" router="" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;"><i class="el-icon-s-management"></i>
    Handbook
  </li><li role="menuitem" tabindex="-1" router="" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;"><span>💕</span>
    Emoji
  </li></ul> <div class="search-wrapper u-px3 d-flex align-items-center"><div aria-haspopup="listbox" role="combobox" aria-owns="el-autocomplete-8688" class="el-autocomplete"><div class="el-input el-input--small"><!----><input type="text" autocomplete="off" valueKey="value" popperClass="components-search" placeholder="Search" fetchSuggestions="function () { [native code] }" debounce="200" placement="bottom-end" popperAppendToBody="true" class="el-input__inner"><!----><!----><!----><!----></div><div role="region" class="el-autocomplete-suggestion el-popper components-search" style="width:;display:none;"><div class="el-scrollbar"><div class="el-autocomplete-suggestion__wrap el-scrollbar__wrap el-scrollbar__wrap--hidden-default"><ul class="el-scrollbar__view el-autocomplete-suggestion__list"></ul></div><div class="el-scrollbar__bar is-horizontal"><div class="el-scrollbar__thumb" style="width:0;transform:translateX(0%);ms-transform:translateX(0%);webkit-transform:translateX(0%);"></div></div><div class="el-scrollbar__bar is-vertical"><div class="el-scrollbar__thumb" style="height:0;transform:translateY(0%);ms-transform:translateY(0%);webkit-transform:translateY(0%);"></div></div></div></div></div></div> <div id="toggle"><div id="top" class="span"></div> <div id="middle" class="span"></div> <div id="bottom" class="span"></div></div></nav> <div class="flex-column align-items-center mobile-menu pb-4"><ul role="menubar" class="d-flex justify-content-center border-0 el-menu--horizontal el-menu" style="background-color:;"><li role="menuitem" tabindex="-1" router="" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;"><i class="el-icon-house"></i>
    Home
  </li><li role="menuitem" tabindex="-1" router="" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;"><i class="el-icon-lollipop"></i>
    Life
  </li><li role="menuitem" tabindex="-1" router="" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;"><i class="el-icon-s-management"></i>
    Handbook
  </li><li role="menuitem" tabindex="-1" router="" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;"><span>💕</span>
    Emoji
  </li></ul> <div class="search-wrapper u-px3 d-flex align-items-center pt-4"><div aria-haspopup="listbox" role="combobox" aria-owns="el-autocomplete-568" class="el-autocomplete"><div class="el-input el-input--small"><!----><input type="text" autocomplete="off" valueKey="value" popperClass="components-search" placeholder="Search" fetchSuggestions="function () { [native code] }" debounce="200" placement="bottom-end" popperAppendToBody="true" class="el-input__inner"><!----><!----><!----><!----></div><div role="region" class="el-autocomplete-suggestion el-popper components-search" style="width:;display:none;"><div class="el-scrollbar"><div class="el-autocomplete-suggestion__wrap el-scrollbar__wrap el-scrollbar__wrap--hidden-default"><ul class="el-scrollbar__view el-autocomplete-suggestion__list"></ul></div><div class="el-scrollbar__bar is-horizontal"><div class="el-scrollbar__thumb" style="width:0;transform:translateX(0%);ms-transform:translateX(0%);webkit-transform:translateX(0%);"></div></div><div class="el-scrollbar__bar is-vertical"><div class="el-scrollbar__thumb" style="height:0;transform:translateY(0%);ms-transform:translateY(0%);webkit-transform:translateY(0%);"></div></div></div></div></div></div></div></header> <div id="vuperess-theme-blog__post-layout"><div class="sticker vuepress-toc"><div class="vuepress-toc-item vuepress-toc-h2 active"><a href="#背景" title="背景">背景</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#简介" title="简介">简介</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#基本原理" title="基本原理">基本原理</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#概览" title="概览">概览</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#全局app-json" title="全局app.json">全局app.json</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#全局app-js" title="全局app.js">全局app.js</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#小程序页面-js文件" title="小程序页面.js文件">小程序页面.js文件</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#小程序页面-swan文件" title="小程序页面.swan文件">小程序页面.swan文件</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#小程序页面栈" title="小程序页面栈">小程序页面栈</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#路由方式" title="路由方式">路由方式</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#page" title="Page">Page</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#自定义组件" title="自定义组件">自定义组件</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#语法" title="语法">语法</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#框架接口" title="框架接口">框架接口</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#页面声明周期" title="页面声明周期">页面声明周期</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#参考文章" title="参考文章">参考文章</a></div></div> <main class="vuepress-blog-theme-content"><div class="el-card mb-4 is-always-shadow"><!----><div class="el-card__body" style="padding:0;"><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210325224201.jpg" alt="百度小程序——基础原理篇" class="w-100"> <div class="p-3"><h1 align="center">
            百度小程序——基础原理篇
          </h1> <div class="ui-post-info d-flex text-secondary d-flex justify-content-center my-3"><div class="post-info-item"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
    Wednesday, March 24, 2021
  </div> <div class="post-info-item"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
    1 min read
  </div> <div class="post-info-item"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-navigation"><polygon points="3 11 22 2 13 21 11 13 3 11"></polygon></svg>
    Beijing
  </div></div></div></div></div> <div class="el-card py-3 px-3 mb-4 is-always-shadow"><!----><div class="el-card__body"><span>Hi, I hope you'll <i>enjoy</i> this post!</span></div></div> <div class="el-card py-3 px-3 mb-4 is-always-shadow"><!----><div class="el-card__body"><div class="content__default"><h1 id="百度小程序-基础原理篇"><a href="#百度小程序-基础原理篇" class="header-anchor">#</a> 百度小程序——基础原理篇</h1> <h2 id="背景"><a href="#背景" class="header-anchor">#</a> 背景</h2> <p>出于兴趣和业务需要的双重要求，开始学习一下百度智能小程序的开发。本文侧重原生百度小程序的学习，后续会涉及到小程序框架<strong>okam</strong>的学习。</p> <h2 id="简介"><a href="#简介" class="header-anchor">#</a> 简介</h2> <p>智能小程序，是百度提供的一种技术解决方案。开发者基于此开发出来的服务，在各类宿主环境（手机 App、车载系统、IOT 设备等）中，可做到用户无感知安装过程即点即用。</p> <p>小程序使用了双线程模型,包括逻辑层和渲染层。逻辑层作为一个单独的线程执行js代码，控制小程序数据的生成和处理；渲染层使用WebView线程，处理页面的渲染和用户的事件交互行为。</p> <p><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/tutorial_intro_2-2.png" alt=""></p> <h2 id="基本原理"><a href="#基本原理" class="header-anchor">#</a> 基本原理</h2> <h3 id="概览"><a href="#概览" class="header-anchor">#</a> 概览</h3> <p>小程序开发包括全局配置文件、页面配置文件。开发者可通过app.json和app.js文件对小程序进行全局配置；通过.css、.js、.json和.swan文件进行页面配置。具体结构如下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>├── app.js
├── app.json
├── app.css
├── project.swan.json
└──  pages
    └── index
        ├── index.swan
        ├── index.css
        ├── index.js
        └── index.json
    └── detail
        ├── detail.swan
        ├── detail.css
        ├── detail.js
        └── detail.json
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210315162241.png" alt=""></p> <p>我们可以看到以下几类的文件：</p> <ol><li><code>.json</code>为后缀的JSON配置文件，配置了智能小程序所有页面的路径和界面展现样式等；</li> <li><code>.swan</code>结尾的SWAN模板文件，用来描述当前这个页面的文件结构，类似于网页中的HTMK文件；</li> <li><code>.css</code>结尾的CSS文件，描述页面样式；</li> <li><code>.js</code>结尾的JS文件，处理这个页面和用户的交互。</li></ol> <h3 id="全局app-json"><a href="#全局app-json" class="header-anchor">#</a> 全局app.json</h3> <p><code>app.json</code>是小程序全局配置文件，设置SWAN的界面、路径、多Tab等。</p> <p><strong>app.json配置项列表</strong></p> <table><thead><tr><th>属性</th> <th>类型</th> <th>必填</th> <th>描述</th></tr></thead> <tbody><tr><td>pages</td> <td><code>Array.&lt;string&gt;</code></td> <td>是</td> <td>设置页面路径</td></tr> <tr><td>window</td> <td>Object</td> <td>否</td> <td>设置页面展现</td></tr> <tr><td>preloadRule</td> <td>Object</td> <td>否</td> <td>分包预下载规则</td></tr> <tr><td>tabBar</td> <td>Object</td> <td>否</td> <td>底部tab栏的表现</td></tr> <tr><td>requiredBackgroundModes</td> <td><code>Array.&lt;string&gt;</code></td> <td>否</td> <td>需要在后台使用的能力，如「音乐播放」</td></tr> <tr><td>subPackages</td> <td><code>Array.&lt;string&gt;</code></td> <td>否</td> <td>分包结构配置</td></tr> <tr><td>networkTimeout</td> <td>Object</td> <td>否</td> <td>网络超时</td></tr> <tr><td>permission</td> <td>Object</td> <td>否</td> <td>小程序接口权限相关设置</td></tr> <tr><td>routes</td> <td><code>Array.&lt;object&gt;</code></td> <td>否</td> <td>小程序自定义路由相关设置</td></tr> <tr><td>dynamicLib</td> <td>Object</td> <td>否</td> <td>引入动态库</td></tr></tbody></table> <p>配置项各个字段的详细举例：</p> <ul><li>pages</li></ul> <p>pages 接受一个数组，每一项都是一个字符串，指定 SWAN App 都有哪些页面。每一项代表页面的 [路径 + 文件名] ，默认第一项为 SWAN App 首页。</p> <p>SWAN 中新增或减少页面的话，需要在 pages 中进行配置。</p> <p>配置项中不需要加文件后缀名， SWAN 会自动解析。</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token comment">/* app.json */</span>
<span class="token punctuation">{</span>
    <span class="token property">&quot;pages&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;pages/home/index&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;pages/my/index&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><blockquote><p>开发者工具在 app.json 的 pages 中填写页面路径可自动生成文件夹。</p></blockquote> <ul><li>tabBar</li></ul> <p>用于设置客户端底部的 tab 栏：可通过 tabBar 设置 tab 的颜色、个数、位置、背景色等内容。</p> <table><thead><tr><th>属性</th> <th>类型</th> <th>必填</th> <th>描述</th></tr></thead> <tbody><tr><td>backgroundColor</td> <td>HexColor</td> <td>是</td> <td>tab 的背景色</td></tr> <tr><td>borderStyle</td> <td>String</td> <td>否</td> <td>tabBar</td></tr> <tr><td>color</td> <td>HexColor</td> <td>是</td> <td>tab上文字的默认颜色</td></tr> <tr><td>list</td> <td>Array</td> <td>是</td> <td>tab 的列表，列表个数 2~5 个。<br>list 接受一个数组，tab 按数组的顺序排序，每个项都是一个对象，其属性值如下：<br>- pagePath：已在 pages 中定义的页面路径；类型：String；必填项。<br>- text：tab 上显示的文字信息；类型：String；必填项。<br>- iconPath：图片路径，icon 大小限制为 40kb，建议尺寸为 78px*78px，不支持网络图片；类型：String；非必填项。<br>- selectedIconPath：选中时的图片路径，icon 规格同上；类型：String；非必填项</td></tr> <tr><td>selectedColor</td> <td>HexColor</td> <td>是</td> <td>tab 上的文字选中时的颜色</td></tr></tbody></table> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token comment">/* app.json */</span>
<span class="token punctuation">{</span>
    <span class="token property">&quot;tabBar&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;backgroundColor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#fff&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;borderStyle&quot;</span><span class="token operator">:</span> <span class="token string">&quot;black&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;color&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#000&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;selectedColor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#ff7800&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;list&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
            <span class="token property">&quot;pagePath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pages/home/index&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;首页&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;iconPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;selectedIconPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;pagePath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pages/my/index&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;我的&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;iconPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;selectedIconPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>还支持<a href="https://smartprogram.baidu.com/docs/develop/framework/process/#tabbar" target="_blank" rel="noopener noreferrer">自定义tabbar<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li>window</li></ul> <table><thead><tr><th>属性</th> <th>类型</th> <th>默认值</th> <th>描述</th></tr></thead> <tbody><tr><td>navigationBarBackgroundColor</td> <td>HexColor</td> <td>#000000</td> <td>导航栏背景颜色，如#000000</td></tr> <tr><td>navigationBarTextStyle</td> <td>String</td> <td>white</td> <td>导航栏标题颜色，目前有效值 black/white</td></tr> <tr><td>navigationBarTitleText</td> <td>String</td> <td></td> <td>导航栏标题文字内容</td></tr> <tr><td>navigationStyle</td> <td>String</td> <td>default</td> <td>导航栏样式，有效值：default(默认样式) custom(自定义导航栏)，只保留右上角胶囊按钮</td></tr> <tr><td>backgroundColor</td> <td>HexColor</td> <td>#ffffff</td> <td>背景颜色</td></tr> <tr><td>enablePullDownRefresh</td> <td>Boolean</td> <td>false</td> <td>是否开启下拉刷新</td></tr> <tr><td>onReachBottomDistance</td> <td>Number</td> <td>50</td> <td>页面上拉触底事件触发时距页面底部距离（单位：px）</td></tr> <tr><td>textSizeAdjust</td> <td>String</td> <td>auto</td> <td>小程序页面是否禁止响应字体大小的设置，有效值：auto(默认响应)、none(不响应)</td></tr> <tr><td>backgroundTextStyle</td> <td>String</td> <td>dark</td> <td>下拉背景字体、loading 图的样式，有效值 dark/light</td></tr> <tr><td>backgroundColorTop</td> <td>HexColor</td> <td>#ffffff</td> <td>顶部窗口的背景色，仅 iOS 支持</td></tr> <tr><td>backgroundColorBottom</td> <td>HexColor</td> <td>#ffffff</td> <td>底部窗口的背景色，仅 iOS 支持</td></tr></tbody></table> <blockquote><p>这些在每个页面的<code>.json</code>文件中也可以配置。会覆盖全局的配置(app.json)。</p></blockquote> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token comment">/* app.json */</span>
<span class="token punctuation">{</span>
    <span class="token property">&quot;window&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;navigationBarBackgroundColor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#00ff00&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;navigationBarTextStyle&quot;</span><span class="token operator">:</span> <span class="token string">&quot;black&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;navigationBarTitleText&quot;</span><span class="token operator">:</span> <span class="token string">&quot;智能小程序&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;backgroundTextStyle&quot;</span><span class="token operator">:</span> <span class="token string">&quot;light&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;backgroundColor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#fff&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">/* pages/home/index.json */</span>

<span class="token punctuation">{</span>
    <span class="token comment">/* 默认不做配置 */</span>
<span class="token punctuation">}</span>

<span class="token comment">/* pages/my/index.json */</span>
<span class="token punctuation">{</span>
    <span class="token property">&quot;navigationBarTitleText&quot;</span><span class="token operator">:</span> <span class="token string">&quot;智能小程序示例-我的&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;navigationBarBackgroundColor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#0000ff&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;navigationBarTextStyle&quot;</span><span class="token operator">:</span> <span class="token string">&quot;white&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;backgroundColor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#ffff00&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>页面表现如下：</p> <p>首页（未做配置）</p> <p><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210315191348.png" alt=""></p> <p>我的（pages/my/index.json）</p> <p><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210315191550.png" alt=""></p> <ul><li>requiredBackgroundModes</li></ul> <blockquote><p>未测试</p></blockquote> <p>申明需要后台运行的能力，类型为数组。</p> <blockquote><p>未测试</p></blockquote> <p>代码示例：audio后台音乐播放</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;requiredBackgroundModes&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;audio&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>networkTimeout</li></ul> <blockquote><p>未测试</p></blockquote> <p>各类网络请求的超时时间</p> <table><thead><tr><th>属性</th> <th>类型</th> <th>必填</th> <th>默认值</th> <th>说明</th></tr></thead> <tbody><tr><td>request</td> <td>Number</td> <td>否</td> <td>10000</td> <td>swan.request 的超时时间（单位：毫秒）。</td></tr> <tr><td>connectSocket</td> <td>Number</td> <td>否</td> <td>60000</td> <td>swan.connectSocket 的超时时间（单位：毫秒）。</td></tr> <tr><td>uploadFile</td> <td>Number</td> <td>否</td> <td>60000</td> <td>swan.uploadFile 的超时时间（单位：毫秒）。</td></tr> <tr><td>downloadFile</td> <td>Number</td> <td>否</td> <td>60000</td> <td>swan.downloadFile 的超时时间（单位：毫秒）。</td></tr></tbody></table> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token comment">/* app.json */</span>
<span class="token punctuation">{</span>
    <span class="token property">&quot;networkTimeout&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;request&quot;</span><span class="token operator">:</span> <span class="token number">30000</span><span class="token punctuation">,</span>
        <span class="token property">&quot;connectSocket&quot;</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
        <span class="token property">&quot;uploadFile&quot;</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
        <span class="token property">&quot;downloadFile&quot;</span><span class="token operator">:</span> <span class="token number">10000</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>permission</li></ul> <blockquote><p>未测试</p></blockquote> <p>小程序接口权限相关设置。</p> <table><thead><tr><th>属性</th> <th>类型</th> <th>必填</th> <th>默认值</th> <th>说明</th></tr></thead> <tbody><tr><td>scope.userLocation</td> <td>PermissionObject</td> <td>否</td> <td></td> <td>位置相关权限声明</td></tr></tbody></table> <p><strong>PermissionObject结构</strong></p> <table><thead><tr><th>属性</th> <th>类型</th> <th>必填</th> <th>默认值</th> <th>说明</th></tr></thead> <tbody><tr><td>desc</td> <td>String</td> <td>是</td> <td>小程序获取权限时展示的接口用途说明。最长 30 个字符</td> <td></td></tr></tbody></table> <p>示例代码：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token comment">/* app.json */</span>
<span class="token punctuation">{</span>
    <span class="token property">&quot;permission&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;scope.userLocation&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">// 高速公路行驶持续后台定位</span>
            <span class="token property">&quot;desc&quot;</span><span class="token operator">:</span> <span class="token string">&quot;你的位置信息将用于小程序位置接口的效果展示&quot;</span> 
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>routes</li></ul> <blockquote><p>未测试</p></blockquote> <p>routes 为一个数组，数组中每一项代表一组路由规则，具体包含字段为：</p> <table><thead><tr><th>属性</th> <th>类型</th> <th>必填</th> <th>描述</th> <th>示例</th></tr></thead> <tbody><tr><td>path</td> <td>String</td> <td>是</td> <td>访问路径</td> <td>&quot;home&quot;</td></tr> <tr><td>page</td> <td>String</td> <td>是</td> <td>页面源码文件路径，从小程序包根目录开始的文件路径</td> <td>&quot;pages/home/index&quot;</td></tr></tbody></table> <p>代码示例：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token comment">/* app.json */</span>
<span class="token punctuation">{</span>
    <span class="token property">&quot;routes&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token comment">// 投放入口，scheme中的path</span>
            <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;home&quot;</span><span class="token punctuation">,</span> 
            <span class="token comment">// 真实的物理存储路径</span>
            <span class="token property">&quot;page&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pages/home/home&quot;</span> 
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;list&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;page&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pages/list/list&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;foo/bar&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;page&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pages/list/list&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>URL Scheme 是一种 App 间的调起协议。App 内部注册协议后，当用户在浏览器或其他 App 内点击相应的 scheme 链接，就能够调起 App 并打开 App 内的相关页面。
下面是“智能小程序示例”小程序的调起 scheme：</p> <p><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210315202251.png" alt=""></p> <h3 id="全局app-js"><a href="#全局app-js" class="header-anchor">#</a> 全局app.js</h3> <p>app.js中存放全局的JavaScript逻辑。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function">onLaunch</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// do something when launch</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">onShow</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// do something when show</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">onHide</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// do something when hide</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    globalData<span class="token operator">:</span> <span class="token string">'SWAN'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>App 函数用来注册一个智能小程序。接受一个 Object 作为参数，用以指定智能小程序的生命周期函数等。</p> <p><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210323203005.png" alt=""></p> <p>整个小程序只有一个App实例，是页面共享的。开发者可以通过getApp()方法获取到全局唯一的App示例，代码如下:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//xxx.js</span>
<span class="token keyword">const</span> appInstance <span class="token operator">=</span> <span class="token function">getApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>appInstance<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210316201029.png" alt=""></p> <p>注意：</p> <ul><li>App() 必须在 app.js 中注册，且不能注册多个；</li> <li>不要在 App() 内的函数中调用 getApp() 函数，可以通过 this 获取 app 实例；</li> <li>不要在 onLaunch 中调用 getCurrentPages() ，因为此时 page 还没有生成。</li></ul> <h3 id="小程序页面-js文件"><a href="#小程序页面-js文件" class="header-anchor">#</a> 小程序页面.js文件</h3> <p>在SWAN模板中书写一下代码：</p> <div class="language-swan line-numbers-mode"><pre class="language-text"><code>&lt;view&gt;{{ me }}&lt;/view&gt;
&lt;button bind:tap=&quot;setName&quot;&gt;点击变值&lt;/button&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>在js中可以对视图中的行为进行监听，并触发页面变化：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function">setName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            me<span class="token operator">:</span> <span class="token string">'aaa'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token comment">//this.data.me = 'aaa' 不会触发视图的变化</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="小程序页面-swan文件"><a href="#小程序页面-swan文件" class="header-anchor">#</a> 小程序页面.swan文件</h3> <p>这部分是每个智能小程序页面的展现模板，类似于 Web 开发中的 HTML，SWAN 模板中使用的标签均为 SWAN 组件规定的标签。标签可以拥有属性，需要注意的是，swan 中的属性是大小写敏感的，也就是说 class 和 Class 在 swan 中是不同的属性。</p> <ul><li>基础数据绑定</li></ul> <div class="language-swan line-numbers-mode"><pre class="language-text"><code>&lt;!-- xxx.swan --&gt;
&lt;view&gt;
    hi, {{name}}
&lt;/view&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    data<span class="token operator">:</span> <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">'baiduStu'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>循环 &amp;&amp; 条件</li></ul> <p>开发者可以通过在元素上添加s-for、s-if指令来进行渲染和视图层的逻辑判断。</p> <div class="language-swan line-numbers-mode"><pre class="language-text"><code>&lt;!-- xxx.swan --&gt;
&lt;view s-for=&quot;name in names&quot;&gt;
    {{name.name}}
&lt;/view&gt;
&lt;button bind:tap=&quot;toggleShow&quot;&gt;toggle show&lt;/button&gt;
&lt;view s-if=&quot;show&quot;&gt;{{show}}&lt;/view&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    data<span class="token operator">:</span> <span class="token punctuation">{</span>
        names<span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'hhhh'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'gggg'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'dddd'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        show<span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">toggleShow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            show<span class="token operator">:</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>show
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><ul><li>事件</li></ul> <p>开发者可以使用<code>bind: + 事件名</code>来进行事件绑定。</p> <p>目前支持的事件类型有：</p> <table><thead><tr><th>类型</th> <th>触发条件</th></tr></thead> <tbody><tr><td>touchstart</td> <td>手指触摸开始</td></tr> <tr><td>touchmove</td> <td>手指触摸后进行移动</td></tr> <tr><td>touchend</td> <td>手指触摸结束</td></tr> <tr><td>touchcancel</td> <td>手指触摸动作被打断，如来电提醒等</td></tr> <tr><td>tap</td> <td>手指触摸后马上离开动作</td></tr></tbody></table> <p>当开发者绑定方法到事件，事件触发时，SWAN 会给触发的方法传递<strong>事件对象</strong>，事件对象因事件不同而不同。</p> <blockquote><p>还有其他事件，后面会有介绍</p></blockquote> <p>开发者可以通过<strong>dataset</strong>在组件中自定义数据，并在事件发生时，由 SWAN 所在事件对象中，传递给绑定函数。</p> <div class="language-swan line-numbers-mode"><pre class="language-text"><code>&lt;!-- xxx.swan --&gt;
&lt;view data-swan=&quot;{{test}}&quot; bind:tap=&quot;viewtap&quot;&gt;dataset-test&lt;/view&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    data<span class="token operator">:</span> <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        Test<span class="token operator">:</span> <span class="token number">2</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">viewtap</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 输出1(大小写敏感)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'value is:'</span><span class="token punctuation">,</span> event<span class="token punctuation">.</span>currentTarget<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>swan<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="小程序页面栈"><a href="#小程序页面栈" class="header-anchor">#</a> 小程序页面栈</h3> <blockquote><p>框架以栈的形式维护了当前的所有页面。开发者可以使用 <a href="https://smartprogram.baidu.com/docs/develop/framework/app_service_routegetCurrentPages/" target="_blank" rel="noopener noreferrer">getCurrentPages()<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 函数获取当前页面栈。</p></blockquote> <p>getCurrentPages 全局函数用于获取当前页面栈的实例，以数组形式按栈的顺序给出，第一个元素为首页，最后一个元素为当前页面。</p> <h3 id="路由方式"><a href="#路由方式" class="header-anchor">#</a> 路由方式</h3> <p><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210317191414.png" alt=""></p> <h3 id="page"><a href="#page" class="header-anchor">#</a> Page</h3> <p>Page() 函数用来注册一个页面。接受一个 object 参数，其指定页面的初始数据、生命周期函数、事件处理函数等。</p> <p><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210317191914.png" alt=""></p> <h3 id="自定义组件"><a href="#自定义组件" class="header-anchor">#</a> 自定义组件</h3> <h4 id="创建自定义组件"><a href="#创建自定义组件" class="header-anchor">#</a> 创建自定义组件</h4> <p>开发者可以将页面内的功能模块抽象成自定义组件，在智能小程序的各个页面中进行使用，提升代码复用度，节省开发成本。</p> <blockquote><p>一个自定义组件由 4 个文件 (.swan .css .js .json) 组成</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>// 包含自定义组件custom的项目结构
├── app.js
├── app.json
├── project.swan.json
└── components
    └── custom
        ├── custom.swan
        ├── custom.css
        ├── custom.js
        └── custom.json

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>要编写一个自定义组件，首先需要在 json 文件中进行自定义组件声明（在 json 文件中将 component 字段设为 true 可将这一组文件设为自定义组件）：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token comment">/* custm.json */</span>
<span class="token punctuation">{</span>
    <span class="token property">&quot;component&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>同时，类似于页面开发。开发自定义组件，可以在 swan 文件中编写组件模板，在 css 文件中引入样式，它们的写法和页面的写法类似。</p> <div class="language-swan line-numbers-mode"><pre class="language-text"><code>&lt;!-- custom.swan --&gt;
&lt;view class=&quot;name&quot; bind:tap=&quot;onTap&quot;&gt;
    {{name}}{{age}}
&lt;/view&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token comment">/* custom.css */</span>
<span class="token selector">.name</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> black<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>在自定义组件的 js 文件中，需要使用 <strong>Component()</strong> 来注册组件，并提供组件的属性定义、内部数据和自定义方法。</p> <blockquote><p>全局app.js用App()来注册，小程序页面用Page()来注册。</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/* custom.js */</span>
<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    properties<span class="token operator">:</span> <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 属性名</span>
            type<span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token comment">// 类型（必填），目前接受的类型包括：String, Number, Boolean, Object, Array, null（表示任意类型）</span>
            value<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// 属性初始值（必填）</span>
            <span class="token function-variable function">observer</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">newVal<span class="token punctuation">,</span> oldVal</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// 属性被改变时执行的函数（可选）</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">name has been changed:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>newVal<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    data<span class="token operator">:</span> <span class="token punctuation">{</span>
        age<span class="token operator">:</span> <span class="token number">20</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 私有数据，可用于模版渲染</span>

    <span class="token comment">// 生命周期函数，可以为函数，或一个在methods段中定义的方法名</span>
    <span class="token function-variable function">attached</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function-variable function">detached</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

    methods<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">onTap</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                name<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
                <span class="token comment">// 更新属性和数据的方法与更新页面数据的方法类似</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><ul><li>使用自定义组件</li></ul> <p>需要在页面json文件中配置：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;usingComponents&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;custom&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/componrnts/custom/custom&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>这样在页面的 swan 文件中，就可以像使用基础组件一样使用自定义组件。节点名即自定义组件的标签名，节点属性即传递给组件的属性值。</p> <div class="language-swan line-numbers-mode"><pre class="language-text"><code>&lt;!-- xxx.swan --&gt;
&lt;view&gt;
    &lt;custom name=&quot;swanApp&quot;&gt;&lt;/custom&gt;
&lt;/view&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="组件模板和样式"><a href="#组件模板和样式" class="header-anchor">#</a> 组件模板和样式</h4> <ul><li>组件模板</li></ul> <p>在组建模板中可以提供一个<code>&lt;slot&gt;</code>节点，用于承载组件引用时提供的子节点。</p> <div class="language-swan line-numbers-mode"><pre class="language-text"><code>&lt;!-- custom.swan --&gt;
&lt;view&gt;
    {{name}}{{age}}
    &lt;!-- 如果组件引用时没有子节点 可以给出默认值 --&gt;
    &lt;slot&gt;default value/node&lt;/slot&gt;
&lt;/view&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-swan line-numbers-mode"><pre class="language-text"><code>&lt;!-- xxxx.swan --&gt;
&lt;view&gt;
    &lt;custom name=&quot;swanApp&quot;&gt;
        &lt;text&gt;custom slot&lt;/text&gt;
    &lt;/custom&gt;
&lt;/view&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>通过 name 属性可以给 slot 命名。一个视图模板的声明可以包含一个默认 slot 和多个命名 slot。外层组件或页面的元素通过 slot=&quot;name&quot; 的属性声明，可以指定自身的插入点。</p> <div class="language-swan line-numbers-mode"><pre class="language-text"><code>&lt;!-- custom.swan --&gt;
&lt;view&gt;
    &lt;slot name=&quot;slot1&quot;&gt;&lt;/slot&gt;
    &lt;slot name=&quot;slot2&quot;&gt;&lt;/slot&gt;
&lt;/view&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-swan line-numbers-mode"><pre class="language-text"><code>&lt;!-- xxx.swan --&gt;
&lt;view&gt;
    &lt;custom&gt;
        &lt;view slot=&quot;slot1&quot;&gt;我是slot1&lt;/view&gt;
        &lt;view slot=&quot;slot2&quot;&gt;我是slot2&lt;/view&gt;
    &lt;/custom&gt;
&lt;/view&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><blockquote><p>和Vue的slot基本一样</p></blockquote> <p>在 slot 声明时应用 if 或 for 指令，可以让插槽根据组件数据动态化。</p> <div class="language-swan line-numbers-mode"><pre class="language-text"><code>&lt;view&gt;
    &lt;slot s-if=&quot;!visible&quot; name=&quot;subcomponent&quot;&gt;&lt;/slot&gt;
&lt;/view&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>模板数据绑定</li></ul> <p>与普通的 SWAN 模板类似，可以使用数据绑定，这样就可以向子组件的属性传递动态数据。</p> <div class="language-swan line-numbers-mode"><pre class="language-text"><code>&lt;view&gt;
    &lt;custom prop-a=&quot;{{dataFieldA}}&quot; prop-b=&quot;{{dataFieldB}}&quot;&gt;
        &lt;view&gt;这里是插入到组件slot中的内容&lt;/view&gt;
    &lt;/custom&gt;
&lt;/view&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>在以上例子中，组件的属性 propA 和 propB 将收到页面传递的数据。页面可以通过 setData 来改变绑定的数据字段。</p> <ul><li>数据环境</li></ul> <p>插入slot的内容,<strong>其数据环境为声明时的环境</strong>。</p> <p>代码示例：</p> <p>组件：</p> <div class="language-swan line-numbers-mode"><pre class="language-text"><code>&lt;!-- custom自定义组件 --&gt;
&lt;view class=&quot;component-range&quot;&gt;
    &lt;slot name=&quot;inner&quot;&gt;&lt;/slot&gt;
&lt;/view&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    data<span class="token operator">:</span> <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">'swan-inner'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>使用组件的页面或组件：</p> <div class="language-swan line-numbers-mode"><pre class="language-text"><code>&lt;view&gt;
    &lt;custom&gt;
        &lt;view slot=&quot;inner&quot;&gt;{{name}}&lt;/view&gt;
    &lt;/custom&gt;
&lt;/view&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    data<span class="token operator">:</span> <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">'swan-outer'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>渲染结果：</p> <div class="language-swan line-numbers-mode"><pre class="language-text"><code>&lt;view&gt;
    &lt;view class=&quot;component-range&quot;&gt;
        &lt;view&gt;swan-outer&lt;/view&gt;
    &lt;/view&gt;
&lt;/view&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>但是：如果 slot 声明中包含 s-bind 或 1 个以上 var- 数据前缀声明，该 slot 为 scoped slot。scoped slot 具有独立的数据环境。 <strong>scoped slot 通常用于组件的视图部分期望由外部传入视图结构，渲染过程使用组件内部数据</strong>。</p> <p>代码示例：</p> <p>组件：</p> <div class="language-swan line-numbers-mode"><pre class="language-text"><code>&lt;!-- custom自定义组件 --&gt;
&lt;view class=&quot;component-range&quot;&gt;
    &lt;slot name=&quot;inner&quot; var-name=&quot;name&quot;&gt;&lt;/slot&gt;
&lt;/view&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    data<span class="token operator">:</span> <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">'swan-inner'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>使用组件的页面或组件：</p> <div class="language-swan line-numbers-mode"><pre class="language-text"><code>&lt;view&gt;
    &lt;custom&gt;
        &lt;view slot=&quot;inner&quot;&gt;{{name}}&lt;/view&gt;
    &lt;/custom&gt;
&lt;/view&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    data<span class="token operator">:</span> <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">'swan-outer'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>渲染结果：</p> <div class="language-swan line-numbers-mode"><pre class="language-text"><code>&lt;view&gt;
    &lt;view class=&quot;component-range&quot;&gt;
        &lt;view&gt;swan-inner&lt;/view&gt;
    &lt;/view&gt;
&lt;/view&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>外部样式类</li></ul> <p>当组件希望接受外部传入的样式类时，可以在 Component 中用 <strong>externalClasses</strong> 字段定义若干个外部样式类。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/* 组件 custom.js */</span>
<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    externalClasses<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'external-class'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-swan line-numbers-mode"><pre class="language-text"><code>&lt;!-- 组件 custom.swan --&gt;
&lt;view class=&quot;external-class&quot;&gt;这段文本的颜色由组件外的 class 决定&lt;/view&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>组件的使用者可以像使用其他属性一样，指定这个样式类对应的 class 。</p> <div class="language-swan line-numbers-mode"><pre class="language-text"><code>&lt;!-- 使用组件的页面或者组件 --&gt;
&lt;custom external-class=&quot;red-text&quot; /&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.red-text</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="component-构造器"><a href="#component-构造器" class="header-anchor">#</a> Component 构造器</h4> <p><a href="https://smartprogram.baidu.com/docs/develop/framework/custom-component_comp/" target="_blank" rel="noopener noreferrer">具体的Component构造器可定义的字段与方法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210318170103.png" alt=""></p> <p>框出来的是<strong>组件</strong>的生命周期。</p> <p>事实上，一个自定义组件也可以视为一个页面，故<strong>页面也可以使用 Component 构造器构造</strong>，拥有与普通组件一样的定义字段与实例方法，其必要配置项（ json ）与正常自定义组件一致，即需要有component: true字段。但是<strong>页面的生命周期方法（即 on 开头的方法），应写在 methods 定义段中</strong>。</p> <h4 id="组件间通信与事件"><a href="#组件间通信与事件" class="header-anchor">#</a> 组件间通信与事件</h4> <ul><li>通过 dispatch 方法与父组件通信</li></ul> <blockquote><p>未测试</p></blockquote> <p>通过 dispatch 方法，子组件可以向组件树的上层派发消息。消息将沿着组件树向上传递，直到遇到第一个处理该消息的组件，则停止。
通过 messages 可以声明组件要处理的消息，messages 是一个对象，key 是消息名称，value 是消息处理的函数，接收一个包含 target（派发消息的组件）和 value（消息的值）的参数对象。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/* 父组件逻辑 */</span>
<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    messages<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">'childmessage'</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'childmessage'</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/* 子组件逻辑 */</span>
<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'childmessage'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            name<span class="token operator">:</span> <span class="token string">'swan'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><ul><li>通过 triggerEvent 方法与父组件通信</li></ul> <p>自定义组件触发事件时，需要使用 triggerEvent 方法，指定事件名和 detail 对象。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/* custom.js */</span>
<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function-variable function">attached</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">triggerEvent</span><span class="token punctuation">(</span><span class="token string">'myEvent'</span><span class="token punctuation">,</span> <span class="token number">2021</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-swan line-numbers-mode"><pre class="language-text"><code>&lt;!-- 引用组件的页面swan文件 --&gt;
&lt;custom name=&quot;yanhaha&quot; dataA=&quot;{{number1}}&quot; bind:tap=&quot;increNum&quot; bind:myEvent=&quot;listener&quot;&gt;
    &lt;view slot=&quot;slot1&quot;&gt;我是slot1&lt;/view&gt;
    &lt;text slot=&quot;default&quot;&gt;custom slot&lt;/text&gt;
    &lt;view slot=&quot;slot2&quot;&gt;我是slot2-{{test}}&lt;/view&gt;
&lt;/custom&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 引用组件的页面js文件</span>
<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">//...</span>
    <span class="token function">listener</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token string">'listener'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210319213719.png" alt=""></p> <ul><li>通过 this.selectComponent 方法获取子组件示例对象</li></ul> <div class="language-swan line-numbers-mode"><pre class="language-text"><code>&lt;!-- 使用组件的页面 --&gt;
&lt;custom id=&quot;customid&quot; name=&quot;yanhaha&quot; dataA=&quot;{{number1}}&quot; bind:tap=&quot;increNum&quot; bind:myEvent=&quot;listener&quot;&gt;
    &lt;view slot=&quot;slot1&quot;&gt;我是slot1&lt;/view&gt;
    &lt;text slot=&quot;default&quot;&gt;custom slot&lt;/text&gt;
    &lt;view slot=&quot;slot2&quot;&gt;我是slot2-{{test}}&lt;/view&gt;
&lt;/custom&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//使用该组件的逻辑</span>
<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function-variable function">onLoad</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">selectComponent</span><span class="token punctuation">(</span><span class="token string">'#customid'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> <span class="token string">'selectComponent'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="组件生命周期"><a href="#组件生命周期" class="header-anchor">#</a> 组件生命周期</h4> <p><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210322112902.png" alt=""></p> <p>当前自定义组件可用的全部生命周期及其描述如下表所示：</p> <p><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210322113827.png" alt=""></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    pageLifeTimes<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//组件所在页面被展示时触发</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//组件所在页面被隐藏时触发</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="behaviors"><a href="#behaviors" class="header-anchor">#</a> behaviors</h4> <p>behaviors 用于组件间代码共享，类似于一些编程语言中的“mixins”或“traits”。</p> <ul><li>每个 behavior 可以包含一组属性、数据、生命周期函数和方法，组件引用它时，它的属性、数据和方法会被合并到组件中，生命周期函数也会在对应时机被调用。</li> <li>每个组件可以引用多个 behavior 。 同时该 behavior 也可以引用其它 behavior 。</li> <li><strong>behavior 需要使用 Behavior() 构造器定义</strong>。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//my-behavior.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">Behavior</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    behaviors<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    properties<span class="token operator">:</span> <span class="token punctuation">{</span>
        myBehaviorProperty<span class="token operator">:</span> <span class="token punctuation">{</span>
            type<span class="token operator">:</span> String<span class="token punctuation">,</span>
            value<span class="token operator">:</span> <span class="token string">'behavior'</span>
        <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  data<span class="token operator">:</span> <span class="token punctuation">{</span>
      myBehaviorData<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">attached</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function-variable function">myBehaviorMethod</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>组件引用：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">//...</span>
    behaviors<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'my-behavior'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">//...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>字段的覆盖和组合规则</strong></p> <ul><li>如果有同名的属性或方法，组件本身的属性或方法会覆盖behavior中的属性或方法</li> <li>如果引用了多个behavior，在定义段中靠后的behavior中的属性或方法会覆盖靠前的属性或方法</li> <li>如果有同名的数据字段，如果数据是对象类型，会进行对象合并；如果是非对象类型则会进行相互覆盖</li> <li>生命周期函数不会相互覆盖，而是在对应触发时机被逐个调用。如果同一个behavior被一个组件多次引用，它定义的生命周期函数只会执行一次。</li></ul> <h4 id="数据监听器"><a href="#数据监听器" class="header-anchor">#</a> 数据监听器</h4> <blockquote><p>数据监听器可以用于监听和响应任何属性和数据字段的变化。</p></blockquote> <p>假如存在这样一种场景：<code>this.data.sum</code>永远是<code>this.data.dataA</code>和<code>this.data.dataB</code>的和。此时，可以使用数据监听器进行如下实现：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    properties<span class="token operator">:</span> <span class="token punctuation">{</span>
        dataA<span class="token operator">:</span> <span class="token punctuation">{</span>
            type<span class="token operator">:</span> Number<span class="token punctuation">,</span>
            value<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        dataB<span class="token operator">:</span> <span class="token punctuation">{</span>
            type<span class="token operator">:</span> Number<span class="token punctuation">,</span>
            value<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    observers<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;dataA, dataB&quot;</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">dataA<span class="token punctuation">,</span> dataB</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                sum<span class="token operator">:</span> dataA <span class="token operator">+</span> dataB
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>数据监听器还可以支持监听属性或内部数据的变化，可以同时监听多个。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    observers<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">'some.subfield'</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">subfield</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 使用 setData 设置 this.data.some.subfield 时触发</span>
            <span class="token comment">// （除此以外，使用 setData 设置 this.data.some 也会触发）</span>
            subfield <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>some<span class="token punctuation">.</span>subfield
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">'arr[12]'</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">arr12</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 使用 setData 设置 this.data.arr[12] 时触发</span>
            <span class="token comment">// （除此以外，使用 setData 设置 this.data.arr 也会触发）</span>
            arr12 <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>arr<span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>如果需要监听所有子数据字段的变化，可以使用通配符<code>**</code>。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    observers<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">'some.field.**'</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">field</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 使用 setData 设置 this.data.some.field 本身或其下任何子数据字段时触发</span>
            <span class="token comment">// （除此以外，使用 setData 设置 this.data.some 也会触发）</span>
            field <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>some<span class="token punctuation">.</span>field
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    data<span class="token operator">:</span> <span class="token punctuation">{</span>
        some<span class="token operator">:</span> <span class="token punctuation">{</span>
            field<span class="token operator">:</span> <span class="token punctuation">{</span>
                subfield<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">attached</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 会触发 observers</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token string">'some.field'</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">// 会触发 observers</span>
        <span class="token comment">// this.setData({</span>
        <span class="token comment">//     'some.field.xxx': {}</span>
        <span class="token comment">// });</span>

        <span class="token comment">// 会触发 observers</span>
        <span class="token comment">// this.setData({</span>
        <span class="token comment">//     'some': {}</span>
        <span class="token comment">// });</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>当然，仅使用通配符<code>**</code>可以监听全部<code>setData</code>。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    observers<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">'**'</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 数据发生变化即触发，这里的 value 是 properties 和 data 的合集</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="抽象节点"><a href="#抽象节点" class="header-anchor">#</a> 抽象节点</h4> <p>关于抽象节点：在自定义组件中的一些节点，其对应的自定义组件不是由自定义组件自身决定的，而是由自定义组件的调用者确定的。这个时候就可以把节点声明为“抽象节点”。</p> <div class="language-swan line-numbers-mode"><pre class="language-text"><code>//selectable-group.swan
&lt;view s-for=&quot;{{labels}}&quot;&gt;
  &lt;label bindtap=&quot;itemTap&quot; data-index=&quot;{{index}}&quot;&gt;
    &lt;selectable2 disabled=&quot;{{false}}&quot; selected=&quot;{{selected[index]}}&quot; name=&quot;{{name}}&quot;&gt;&lt;/selectable2&gt;
    {{item}}
  &lt;/label&gt;
  &lt;text&gt;{{item}}&lt;/text&gt;
&lt;/view&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>其中，“selectable2”不是在<code>json</code>文件中的<code>usingComponents</code>字段声明的组件。而是在<code>componentGenerics</code>中声明的<strong>抽象节点</strong>。抽象节点也可以指定默认组件。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//selectable-group.json</span>
<span class="token punctuation">{</span>
    <span class="token string">&quot;component&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token string">&quot;usingComponents&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;componentGenerics&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;selectable2&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;default&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/components/checkbox/checkbox&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//或者不指定默认组件</span>
<span class="token punctuation">{</span>
    <span class="token string">&quot;component&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token string">&quot;usingComponents&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;componentGenerics&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;selectable2&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>应该如何使用包含抽象节点的组件呢？</p> <div class="language-swan line-numbers-mode"><pre class="language-text"><code>&lt;!-- index.swan --&gt;
&lt;view&gt;selectable-group with custom-radio&lt;/view&gt;
&lt;selectable-group generic:selectable=&quot;custom-radio&quot; /&gt;

&lt;view&gt;selectable-group with custom-checkbox&lt;/view&gt;
&lt;selectable-group generic:selectable=&quot;custom-checkbox&quot; /&gt;

&lt;view&gt;selectable-group with default component&lt;/view&gt;
&lt;selectable-group /&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token comment">//index.json</span>
<span class="token punctuation">{</span>
    <span class="token property">&quot;navigationBarTitleText&quot;</span><span class="token operator">:</span> <span class="token string">&quot;代码片段示例&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;usingComponents&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;selectable-group&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/components/selectable-group/selectable-group&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;custom-radio&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/components/radio/radio&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;custom-checkbox&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/components/checkbox/checkbox&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>在使用<code>selectable-group</code>组件时，需要用<code>generic:selectable=&quot;xxxx&quot;</code>来指定具体<code>selectable2</code>要渲染成哪一个组件。</p> <h4 id="自定义组件扩展"><a href="#自定义组件扩展" class="header-anchor">#</a> 自定义组件扩展</h4> <blockquote><p>自定义组件的扩展其实就是提供了修改自定义组件定义段的能力。</p></blockquote> <p>代码示例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// behavior.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">Behavior</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function">definitionFilter</span><span class="token punctuation">(</span><span class="token parameter">defFields</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        defFields<span class="token punctuation">.</span>data<span class="token punctuation">.</span>from <span class="token operator">=</span> <span class="token string">'behavior'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// component.js</span>
<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    data<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">'component'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    behaviors<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./behavior.js'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token function">ready</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 此处会发现输出 behavior 而不是 component</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>from<span class="token punctuation">)</span> 
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>Behavior() 构造器提供了新的定义段 definitionFilter，用于支持自定义组件扩展。 definitionFilter 是一个函数，在被调用时会注入两个参数：</p> <ul><li>第一个参数是使用该 behavior 的 component/behavior 的定义对象；</li> <li>第二个参数是该 behavior 所使用的 behavior 的 definitionFilter 函数列表。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// behavior3.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">Behavior</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function">definitionFilter</span><span class="token punctuation">(</span><span class="token parameter">defFields<span class="token punctuation">,</span> definitionFilterArr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// behavior2.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">Behavior</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    behaviors<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./behavior3.js'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token function">definitionFilter</span><span class="token punctuation">(</span><span class="token parameter">defFields<span class="token punctuation">,</span> definitionFilterArr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// definitionFilterArr[0](defFields)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// behavior1.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">Behavior</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    behaviors<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./behavior2.js'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token function">definitionFilter</span><span class="token punctuation">(</span><span class="token parameter">defFields<span class="token punctuation">,</span> definitionFilterArr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// component.js</span>
<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    behaviors<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./behavior1.js'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>上述代码中声明了 1 个自定义组件和 3 个 behavior，每个 behavior 都使用了 definitionFilter 定义段。按照声明的顺序会有如下事情发生：</p> <ul><li>当进行 behavior2 的声明时就会调用 behavior3 的 definitionFilter 函数，其中 defFields 参数是 behavior2 的定义段， definitionFilterArr 参数即为空数组，因为 behavior3 没有使用其他的 behavior 。</li> <li>当进行 behavior1 的声明时就会调用 behavior2 的 definitionFilter 函数，其中 defFields 参数是 behavior1 的定义段， definitionFilterArr 参数是一个长度为 1 的数组，<code>definitionFilterArr[0]</code> 即为 behavior3 的 definitionFilter 函数，因为 behavior2 使用了 behavior3。用户在此处可以自行决定在进行 behavior1 的声明时要不要调用 behavior3 的 definitionFilter 函数，如果需要调用，在此处补充代码 <code>definitionFilterArr[0](defFields)</code> 即可，<code>definitionFilterArr</code> 参数会由基础库补充传入。</li> <li>同理，在进行 component 的声明时就会调用 behavior1 的 definitionFilter 函数。</li></ul> <p>简单概括，definitionFilter 函数可以理解为当 A 使用了 B 时，A 声明就会调用 B 的 definitionFilter 函数并传入 A 的定义对象让 B 去过滤。此时如果 B 还使用了 C 和 D，那么 B 可以自行决定要不要调用 C 和 D 的 definitionFilter 函数去过滤 A 的定义对象。</p> <h3 id="语法"><a href="#语法" class="header-anchor">#</a> 语法</h3> <h4 id="模板语法"><a href="#模板语法" class="header-anchor">#</a> 模板语法</h4> <ul><li>数据绑定</li></ul> <p>SWAN模板中的动态数据都从逻辑层Page中data对象中来。数据绑定和许多模板引擎一样，数据包裹在双大括号里面。双向绑定的数据需包裹在<code>{= =}</code>中。</p> <p>代码示例：</p> <div class="language-swan line-numbers-mode"><pre class="language-text"><code>&lt;scroll-view
    scroll-top=&quot;{= scrollTop =}&quot;
    scroll-into-view=&quot;{= scrollIntoView =}&quot;
&gt;
    &lt;view id=&quot;one&quot; class=&quot;color-a&quot;&gt;A&lt;/view&gt;
    &lt;view id=&quot;two&quot; class=&quot;color-b&quot;&gt;B&lt;/view&gt;
&lt;/scroll-view&gt;

&lt;view class=&quot;c-{{className}}&quot;&gt;{{value}}&lt;/view&gt;

&lt;!-- 控制属性不需要大括号包裹 --&gt;
&lt;view s-if=&quot;flag&quot;&gt;如果为flag为true，你看得到我。&lt;/view&gt;

&lt;!-- 运算 --&gt;

&lt;!-- 普通变量 --&gt;
&lt;text&gt;{{name}}&lt;/text&gt;

&lt;!-- 属性访问 --&gt;
&lt;text&gt;{{person.name}}&lt;/text&gt;
&lt;text&gt;{{persons[1]}}&lt;/text&gt;

&lt;!-- 一元否定 --&gt;
&lt;text&gt;{{!isOK}}&lt;/text&gt;
&lt;text&gt;{{!!isOK}}&lt;/text&gt;

&lt;!-- 二元运算 --&gt;
&lt;text&gt;{{num1 + num2}}&lt;/text&gt;
&lt;text&gt;{{num1 - num2}}&lt;/text&gt;
&lt;text&gt;{{num1 * num2}}&lt;/text&gt;
&lt;text&gt;{{num1 / num2}}&lt;/text&gt;
&lt;text&gt;{{num1 + num2 * num3}}&lt;/text&gt;

&lt;!-- 二元关系 --&gt;
&lt;text&gt;{{num1 &gt; num2}}&lt;/text&gt;
&lt;text&gt;{{num1 !== num2}}&lt;/text&gt;

&lt;!-- 三元条件 --&gt;
&lt;text&gt;{{num1 &gt; num2 ? num1 : num2}}&lt;/text&gt;

&lt;!-- 括号 --&gt;
&lt;text&gt;{{a * (b + c)}}&lt;/text&gt;

&lt;!-- 数值 --&gt;
&lt;text&gt;{{num1 + 200}}&lt;/text&gt;

&lt;!-- 字符串 + 三元条件 --&gt;
&lt;text&gt;{{item ? ',' + item : ''}}&lt;/text&gt;

&lt;!-- 三元运算 --&gt;
&lt;checkbox checked=&quot;{{flag ? true : false}}&quot;&gt;&lt;/checkbox&gt;

&lt;!-- 数组字面量 --&gt;
&lt;text&gt;{{ ['john', 'tony', 'lbj'] }}&lt;/text&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br></div></div><ul><li>循环</li></ul> <p><code>s-for</code>默认情况下(<code>s-for=&quot;persons&quot;</code>)下标索引是为 index，数组当前变量名默认为 item。也可以通过使用 <code>s-for-index</code> 来指定下标索引，<code>s-for-item</code> 来指定数组当前变量名。或者通过<code>s-for=&quot;p,index in persons&quot;</code>简写的方式，指定下标索引和数组当前变量名。</p> <p>如果列表中的项目会动态地增加、删除，并且希望列表中的项目保持自己的特征和状态，需要在<code>s-for</code>指令声明中指定<code>trackBy</code>。</p> <p>trackBy 后跟的值可以是 s-for 的 array 中 item 本身或者其属性（如 <code>item.id</code>），该值需要是列表中唯一的字符串或数字，且不能动态改变。比如：<code>s-for=&quot;list trackBy item&quot;</code>。</p> <p>当数据更新触发重新渲染时，将自动跟踪项的变更，原先列表内的项位置会移动，新添加的项会被渲染，以确保组件保持自身的状态，并且省去一部分重新渲染带来的消耗。</p> <blockquote><p>注意：当循环渲染自定义组件列表时，<strong>不</strong>指定 trackBy 而动态增删数组中的元素，可能会导致调用错误的 attached detached 生命周期函数。</p></blockquote> <ul><li>条件</li></ul> <p><code>s-if</code>可以实现以下操作：</p> <ul><li>为元素指定条件，当条件成立时元素可见，反之不可见</li> <li>为<code>s-if</code>增加一个额外分支条件块</li> <li>为<code>s-if</code>增加一个不满足条件的分支块，<code>s-else</code>指令没有值</li></ul> <blockquote><p>注意：<code>s-if</code>与<code>s-else</code>之间加入多余标签会报错。</p></blockquote> <blockquote><p>注意：<code>s-if</code>与<code>s-for</code>不可在同一标签下同时使用。</p></blockquote> <div class="language-swan line-numbers-mode"><pre class="language-text"><code>&lt;view s-if=&quot;is4G&quot;&gt;4G&lt;/view&gt;
&lt;view s-elif=&quot;isWifi&quot;&gt;Wifi&lt;/view&gt;
&lt;view s-else&gt;Other&lt;/view&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>block s-if</strong></p> <p>block 虚拟组件，在渲染时不会包含自身，只会渲染其内容。可以用来渲染一组组件或者标签。</p> <ul><li>模板</li></ul> <p>SWAN 提供模板 template 的用法，旨在提高工程化和代码可维护性，可以在模板中定义代码片段，并被外界注入值，然后在合适的时机调用。</p> <p><code>name</code> 属性，定义了模板的名字。通过 <code>is</code> 属性，声明需要使用的模板，<code>data</code> 是所需要传入到模板的值，注意对象字面量的使用方法，对象字面量是三个大括号包裹。</p> <p>代码示例：</p> <div class="language-swan line-numbers-mode"><pre class="language-text"><code>&lt;!-- template-demo.swan--&gt;
&lt;template name=&quot;person-card&quot;&gt;
    &lt;view&gt;
        &lt;text&gt;位置: {{pos}}&lt;/text&gt;
        &lt;text&gt;姓名: {{name}}&lt;/text&gt;
    &lt;/view&gt;
&lt;/template&gt;

&lt;template name=&quot;odd&quot;&gt;
   &lt;view&gt; odd &lt;/view&gt;
&lt;/template&gt;


&lt;template name=&quot;even&quot;&gt;
   &lt;view&gt; even &lt;/view&gt;
&lt;/template&gt;

&lt;template is=&quot;person-card&quot; data=&quot;{{{...person}}}&quot; /&gt;


&lt;block s-for=&quot;{{[1, 2, 3, 4, 5]}}&quot;&gt;
   &lt;view&gt;{{item}}&lt;/view&gt;
   &lt;template is=&quot;{{item % 2 == 0 ? 'even' : 'odd'}}&quot;/&gt;
&lt;/block&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><ul><li>事件处理</li></ul> <p>与浏览器的 DOM 事件类似，智能小程序的视图中事件分为<code>冒泡事件</code>和<code>非冒泡事件</code>。</p> <p>冒泡事件如下表，不在列表的事件均为非冒泡事件。</p> <p><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210323151359.png" alt=""></p> <p>事件绑定在组件上，与属性的写法相同（以 key、value 的形式）。</p> <ul><li>key 以 bind 或 catch 开头，衔接事件类型，例如 bindtap、catchtouchcancel 。也可以在 bind 和 catch 后可以紧跟一个冒号，如<code>bind:tap</code>、<code>catch:touchstart</code>，其功能不变。</li> <li><strong>bind 与 catch 的区别是 bind 事件绑定不会阻止冒泡事件向上冒泡，catch 事件绑定可以阻止冒泡事件向上冒泡；</strong></li> <li>value 对应的是在 Page 中定义同名的函数，否则在事件触发时执行函数会抛出异常。</li></ul> <p>代码示例：</p> <div class="language-swan line-numbers-mode"><pre class="language-text"><code>&lt;view id=&quot;wrap&quot; bindtap=&quot;handleTap1&quot;&gt;
    wrap
    &lt;view id=&quot;module&quot; catchtap=&quot;handleTap2&quot;&gt;
        module
        &lt;view id=&quot;text&quot; bindtap=&quot;handleTap3&quot;&gt;
            text
        &lt;/view&gt;
    &lt;/view&gt;
&lt;/view&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210323153031.png" alt=""></p> <p><strong>事件的捕获</strong></p> <p>捕获阶段是位于冒泡阶段之前，在捕获阶段中，事件到达节点的顺序与冒泡阶段恰好相反。在捕获阶段监听的方式是采用<code>capture-bind</code>、<code>capture-catch</code>关键字，后者将中断捕获阶段和取消冒泡阶段。</p> <p>代码示例：capture-bind</p> <div class="language-swan line-numbers-mode"><pre class="language-text"><code>&lt;view id=&quot;wrap&quot; bind:touchstart=&quot;handleTap1&quot; capture-bind:touchstart=&quot;handleTap2&quot;&gt;
    wrap
    &lt;view id=&quot;inner&quot; bind:touchstart=&quot;handleTap3&quot; capture-bind:touchstart=&quot;handleTap4&quot;&gt;
        text
    &lt;/view&gt;
&lt;/view&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210323153748.png" alt=""></p> <p>代码示例：capture-catch</p> <div class="language-swan line-numbers-mode"><pre class="language-text"><code>&lt;view id=&quot;wrap&quot; bind:touchstart=&quot;handleTap1&quot; capture-catch:touchstart=&quot;handleTap2&quot;&gt;
    wrap
    &lt;view id=&quot;inner&quot; bind:touchstart=&quot;handleTap3&quot; capture-bind:touchstart=&quot;handleTap4&quot;&gt;
        text
    &lt;/view&gt;
&lt;/view&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210323153905.png" alt=""></p> <p><strong>事件对象</strong></p> <p>默认当组件触发事件时，逻辑层绑定事件的处理函数会收到一个默认参数，即事件对象。下面是事件对象详细属性列表：</p> <p><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210323161102.png" alt=""></p> <blockquote><p>注意：target 和 currentTarget 的区别是 <code>currentTarget</code> 为当前事件所绑定的组件，而 <code>target</code> 则是触发该事件的源头组件。</p></blockquote> <p><strong>target</strong></p> <table><thead><tr><th>属性</th> <th>类型</th> <th>说明</th></tr></thead> <tbody><tr><td>dataset</td> <td>Object</td> <td><strong>触发事件</strong>组件上由data-开头的自定义属性组成的集合</td></tr> <tr><td>id</td> <td>String</td> <td><strong>触发事件</strong>组件的id</td></tr> <tr><td>offsetTop</td> <td>Int</td> <td>元素向上偏移的像素值</td></tr> <tr><td>offsetLeft</td> <td>Int</td> <td>元素向左偏移的像素值</td></tr></tbody></table> <p><strong>currentTarget</strong></p> <table><thead><tr><th>属性</th> <th>类型</th> <th>说明</th></tr></thead> <tbody><tr><td>dataset</td> <td>Object</td> <td><strong>事件绑定的</strong>组件上由data-开头的自定义属性组成的集合</td></tr> <tr><td>id</td> <td>String</td> <td><strong>事件绑定</strong>的组件的id</td></tr> <tr><td>offsetTop</td> <td>Int</td> <td>元素向上偏移的像素值</td></tr> <tr><td>offsetLeft</td> <td>Int</td> <td>元素向左偏移的像素值</td></tr></tbody></table> <p><strong>dataset</strong></p> <p>在组件的事件被触发时，可以传递自定义的数据。</p> <p>书写方式： 以 data- 开头，多个单词由连字符-链接，不能有大写(大写会自动转成小写)，最终的 - 在 dataset 中会将连字符转成驼峰式写法。如组件上<code>data-car-color</code>属性值的读取方式是: event.currentTarget.dataset.carColor。</p> <p><strong>touch</strong></p> <table><thead><tr><th>属性</th> <th>类型</th> <th>说明</th></tr></thead> <tbody><tr><td>identifier</td> <td>Number</td> <td>触摸点的标识符</td></tr> <tr><td>clientX, clientY</td> <td>Number</td> <td>距离页面可显示区域（屏幕除去导航条）左上角的 X 轴与 Y 轴的距离</td></tr> <tr><td>pageX, pageY</td> <td>Number</td> <td>距离文档左上角的 X 轴与 Y 轴的距离</td></tr></tbody></table> <p><strong>changedTouch</strong></p> <p>数据格式同 touches，指的是有变化的触摸点，如 touchstart（开始），touchmove（变化），touchend，touchcancel（结束）等。</p> <p>点击事件的 detail 带有的 x, y 同 pageX, pageY 代表距离文档左上角的距离。</p> <p><strong>注意</strong></p> <p>请不要在组件中绑定 onClick、onAnimationstart、onDrag 等 HTML 原生事件，这会导致小程序的事件绑定不生效。</p> <ul><li>文件作用域</li></ul> <p>在 JavaScript 文件中声明的变量和函数只在该文件中有效；不同的文件中可以声明相同名字的变量和函数，且不会互相影响。通过全局函数 getApp() 可以获取全局的应用实例，如果需要全局的数据可以在 App() 中设置。</p> <ul><li>引用</li></ul> <p>SWAN可以通过 <code>import</code> 和 <code>include</code>来引用模板文件。</p> <p><strong>import</strong></p> <p>通过<code>import</code>和<code>template</code>配合使用，可以将代码分离以及复用。</p> <p>例如：</p> <p>首先，在person-card.swan中定义了一个叫person-card的template：</p> <div class="language-swan line-numbers-mode"><pre class="language-text"><code>&lt;!-- person-card.swan--&gt;
&lt;template name=&quot;person-card&quot;&gt;
    &lt;view&gt;
        &lt;text&gt;位置: {{pos}}&lt;/text&gt;
        &lt;text&gt;姓名: {{name}}&lt;/text&gt;
    &lt;/view&gt;
&lt;/template&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>然后，在index.swan里引用文件person-card.swan，并使用它的模板：</p> <div class="language-swan line-numbers-mode"><pre class="language-text"><code>&lt;!-- index.swan--&gt;
&lt;import src=&quot;./person-card.swan&quot; /&gt;
&lt;template is=&quot;person-card&quot; data=&quot;{{person}}&quot; /&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// index.js</span>
<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    data<span class="token operator">:</span> <span class="token punctuation">{</span>
        person<span class="token operator">:</span> <span class="token punctuation">{</span>
            pos<span class="token operator">:</span> <span class="token string">'Baidu'</span><span class="token punctuation">,</span>
            name<span class="token operator">:</span> <span class="token string">'SWAN'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><blockquote><p>import 具有递归的特性。 例如：C 引用 B，B 引用 A，在 C 中可以使用 B 定义的 template，在 B 中可以使用 A 定义的 template ，<strong>C 也可以使用 A 定义的 template</strong></p></blockquote> <p><strong>include</strong></p> <p>通过<code>include</code>可以将目标模板整个（除了 template）引入到当前的位置，相当于<code>inline</code>。</p> <div class="language-swan line-numbers-mode"><pre class="language-text"><code>&lt;!-- index.swan --&gt;
&lt;include src=&quot;header.swan&quot;/&gt;
&lt;view&gt; body &lt;/view&gt;
&lt;include src=&quot;footer.swan&quot;/&gt;

&lt;!-- header.swan --&gt;
&lt;view&gt; header &lt;/view&gt;

&lt;!-- footer.swan --&gt;
&lt;view&gt; footer &lt;/view&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="sjs语法参考"><a href="#sjs语法参考" class="header-anchor">#</a> SJS语法参考</h4> <blockquote><p>基本和JS的一致，不在赘述。需要看的是<a href="https://smartprogram.baidu.com/docs/develop/framework/sjs_start/" target="_blank" rel="noopener noreferrer">这个地方<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h3 id="框架接口"><a href="#框架接口" class="header-anchor">#</a> 框架接口</h3> <h4 id="setdata机制"><a href="#setdata机制" class="header-anchor">#</a> setData机制</h4> <p>setData 函数用于将数据，从逻辑层发送到视图层，当开发者调用 setData 后，数据的变化会引起视图层的更新。</p> <p>参数说明：</p> <table><thead><tr><th>属性</th> <th>类型</th> <th>必填</th> <th>描述</th></tr></thead> <tbody><tr><td>data</td> <td>Object</td> <td>是</td> <td>要改变的数据</td></tr> <tr><td>callback</td> <td>Function</td> <td>否</td> <td>setData引起的界面更新渲染完毕后的回调函数</td></tr></tbody></table> <p>说明：</p> <ul><li>Object 以<code>key: value</code>的形式表示，将<code>this.data</code>中的<code>key</code>对应的值改变成<code>value</code>；<code>key</code>可以以<strong>数据路径</strong>的形式给出，支持改变数组中的某一项或对象的某个属性，如<code>array[2].message</code>、<code>a.b.c.d</code>，并且不需要在<code>this.data</code>中预先定义；</li> <li><strong>直接修改<code>this.data</code>而不用<code>this.setData(Object[, callback])</code>是无法改变页面状态的，还会造成数据不一致；</strong></li> <li>不要把<code>data</code>中的任何一项的<code>value</code>设为<code>undefined</code>,否则会有一些潜在的问题；</li> <li><code>data</code>的键名必须遵守camelCase(驼峰式)命名规范，<strong>不得</strong>使用kebab-case(短横线隔开式)规范。</li> <li>仅支持设置可JSON化的数据</li></ul> <h4 id="模块化"><a href="#模块化" class="header-anchor">#</a> 模块化</h4> <p>可以将一些公共的代码抽离成为一个单独的 js 文件，作为一个模块。模块可以通过 module.exports、exports 或者 export 对外暴露接口，使用 require 或者 import 进行导入。</p> <h4 id="aop"><a href="#aop" class="header-anchor">#</a> AOP</h4> <ul><li>AOP.after</li></ul> <p>App.after 可以增加 APP 级的切面，触发的时机是在所拦截的对应生命周期方法执行之后。</p> <p>方法参数：Object</p> <table><thead><tr><th>属性名</th> <th>类型</th> <th>必填</th> <th>说明</th></tr></thead> <tbody><tr><td>methods</td> <td>Object</td> <td>否</td> <td>所有需要拦截的生命周期方法的合集</td></tr></tbody></table> <p>可拦截的所有方法：</p> <ul><li>onLaunch</li> <li>onShow</li> <li>onHide</li> <li>onError</li> <li>onPageNotFound</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// app.js</span>
<span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function">onShow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'normal onShow'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

App<span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    methods<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function">onShow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'after app onshow'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/**
 * 打印结果
 * normal onShow
 * after app onshow
 */</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><ul><li>Page.after</li></ul> <p>Page.after 可以增加 Page 级的切面，触发的时机是在所拦截的对应生命周期方法执行之后，也可以拦截所有页面上发生的事件（对于要拦截的事件，在 swan 文件上必须显示绑定了相应事件）。</p> <p>方法参数：Object</p> <table><thead><tr><th>属性名</th> <th>类型</th> <th>必填</th> <th>说明</th></tr></thead> <tbody><tr><td>url</td> <td>String</td> <td>否</td> <td>要增加切面的页面的URL规则，当URL参数不填时，则默认拦截所有页面</td></tr> <tr><td>methods</td> <td>Object</td> <td>否</td> <td>所有要拦截的生命周期方法的集合</td></tr> <tr><td>events</td> <td>Object</td> <td>否</td> <td>所有要拦截的事件的集合</td></tr></tbody></table> <p>可以拦截的所有方法：</p> <ul><li>onLoad</li> <li>onReady</li> <li>onShow</li> <li>onHide</li> <li>onUnload</li> <li>onForceReLaunch</li> <li>onPullDownRefresh</li> <li>onReachBottom</li> <li>onPageScroll</li> <li>onTabitemTap</li> <li>onURLQueryChange</li></ul> <p>代码示例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 为url中含有page/index的page实例增加切面</span>
Page<span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span><span class="token punctuation">{</span>

    url<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">pages\/index</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>    <span class="token comment">//正则</span>

    <span class="token comment">// 拦截页面中的生命周期onShow</span>
    methods<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function">onShow</span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'message after normal show function'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// 拦截页面中，属性有data-tag=&quot;1&quot;的节点的tap事件</span>
    events<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">'[data-tag=&quot;1&quot;]:tap'</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'message after a tag is tapped'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><ul><li>swan.after</li></ul> <p>swan.after 可以拦截所有当前运行小程序对于 API 的调用，默认传入function时，只在 API 函数调用的返回阶段拦截。如果传入 Object，则可以选择拦截的阶段（例如: 返回阶段、回调调用阶段）。</p> <p>方法参数：Object</p> <table><thead><tr><th>属性名</th> <th>类型</th> <th>必填</th> <th>说明</th></tr></thead> <tbody><tr><td>[key]</td> <td>String</td> <td>否</td> <td>要拦截的API名称</td></tr> <tr><td>[value]</td> <td>Object/Function</td> <td>否</td> <td>拦截之后的处理器(如果为function,则默认在returning阶段调用)</td></tr></tbody></table> <p>API文档中所有swan调用均可以拦截。</p> <p>代码示例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>swan<span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// 默认在returning阶段进行拦截</span>
    <span class="token function-variable function">showToast</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'swan after'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// 可以拦截success返回，fail返回，与returning</span>
    showToast<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'swan after success'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">fail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'swan after fail'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">returning</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'swan after returning'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="页面声明周期"><a href="#页面声明周期" class="header-anchor">#</a> 页面声明周期</h3> <p><strong>原理图</strong></p> <p><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210324204133.png" alt=""></p> <ul><li>FCP：First Contentful Paint ，即首次有内容的绘制</li> <li>FMP：First Meaningful Paint ，即首次有意义的绘制</li></ul> <p>下列加载时间线屏幕截图直观的介绍了FCP与FMP的含义：</p> <p><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210324212911.png" alt=""></p> <h4 id="首页初次渲染全过程"><a href="#首页初次渲染全过程" class="header-anchor">#</a> 首页初次渲染全过程</h4> <ol><li>初始化：渲染线程和逻辑线程同步的进行初始化，在逻辑线程初始化时收集App和Page的初始化数据，并且执行App.onLaunch回调中的相关逻辑。</li> <li>notify：当渲染线程初始化后，向逻辑线程派发消息，请求获取初始化渲染数据。同时，如果开发者有配置骨架屏，小程序会优先加载骨架屏，此时即为FCP完成。如果骨架屏的高度撑满整个页面，那么我们认为此时为FMP完成，如果骨架屏信息不足以撑满整个屏幕，那么我们认为此次渲染非有效的FMP。</li> <li>setInitData：逻辑线程将初始化渲染数据派发给渲染线程，渲染进程拿到这些初始化数据后，会初始化页面及自定义组件，最后将所有内容渲染到页面上。</li> <li>setData：逻辑线程触发以上生命周期后，逻辑层一般执行了众多的setData，每次setData均会使得逻辑线程向渲染线程传送数据，引起页面的重新渲染。其中首次的setData，是在逻辑线程达到Inited状态后，将业务相关的数据通过setData发送到渲染线程，触发渲染线程Rerender，并可以触发FMP。</li></ol> <h2 id="参考文章"><a href="#参考文章" class="header-anchor">#</a> 参考文章</h2> <ul><li><a href="https://smartprogram.baidu.com/docs/develop/tutorial/intro/" target="_blank" rel="noopener noreferrer">百度小程序官网<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="gitalk-container"><div id="gitalk-container"></div></div></div></div></div> <div class="el-card py-3 px-3 mb-4 is-always-shadow"><!----><div class="el-card__body"><span>Hi, I hope you've <b>enjoyed</b> this post!</span></div></div> <div class="el-card mb-4 is-always-shadow"><div class="el-card__header"><div class="clearfix"><h5 class="m-0">
            Keep reading!
          </h5></div></div><div class="el-card__body"> <div class="container featured-posts my-4"><div class="el-carousel el-carousel--horizontal el-carousel--card"><div class="el-carousel__container" style="height:300px;"><button type="button" class="el-carousel__arrow el-carousel__arrow--left" style="display:none;"><i class="el-icon-arrow-left"></i></button><button type="button" class="el-carousel__arrow el-carousel__arrow--right" style="display:none;"><i class="el-icon-arrow-right"></i></button><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210420224048.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          关于linux丢失/root文件夹导致的-bash-4.1#(不显示路径)的解决办法
        </h4> <a href="/blog/2018/04/13/linux-bash/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017234336.png);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          Ubuntu 18.04LTS系统设置窗口打不开或者消失解决办法
        </h4> <a href="/blog/2018/04/29/ubuntu-setting/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017234336.png);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          apt-get命令、dpkg命令、rpm命令和yum命令
        </h4> <a href="/blog/2018/04/30/ubuntu-apt-dpkg/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210420223609.png);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          Cookie、Session、WebStorage
        </h4> <a href="/blog/2018/10/10/cookie/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210420224048.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          Xshell无法连接到Linux虚拟机
        </h4> <a href="/blog/2018/10/21/xshell/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017234007.jpg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          Shell value too great for base
        </h4> <a href="/blog/2018/12/09/shell-value-too-great-for-base/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017192245.jpg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          node核心模块——fs
        </h4> <a href="/blog/2020/05/08/node-fs/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017192245.jpg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          node核心模块——path
        </h4> <a href="/blog/2020/04/20/node-path/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017230306.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          centos7安装jenkins和gitlab踩坑记
        </h4> <a href="/blog/2020/05/17/gitlab-jenkins/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017192245.jpg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          node核心模块——os
        </h4> <a href="/blog/2020/05/27/node-os/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017191711.gif);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          回文数
        </h4> <a href="/blog/2020/06/01/leetcode-ispalindrome-09/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017190350.jpg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          pow(x,n)
        </h4> <a href="/blog/2020/06/02/leetcode-pow-x-n-50/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017151542.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          加一
        </h4> <a href="/blog/2020/06/03/leetcode-pluse-one-66/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017151542.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          矩阵置零
        </h4> <a href="/blog/2020/06/04/leetcode-set-matrix-zeroes-73/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017151542.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          杨辉三角
        </h4> <a href="/blog/2020/06/05/leetcode-pascal-s-triangle-118/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017151542.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          两个数组的交集
        </h4> <a href="/blog/2020/06/07/leetcode-intersectionoftwoarrays-349/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017151542.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          多数元素
        </h4> <a href="/blog/2020/06/06/leetcode-majorityelement-169/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017151542.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          检测大写字母
        </h4> <a href="/blog/2020/06/08/leetcode-detectcapitaluse-520/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017151542.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          设计哈希集合
        </h4> <a href="/blog/2020/06/09/leetcode-designhashset-705/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017175905.png);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          连续赋值
        </h4> <a href="/blog/2020/06/10/continuousassignment/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017151542.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          宝石与石头
        </h4> <a href="/blog/2020/06/10/leetcode-numjewelsinstones-771/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017151542.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          顺次数
        </h4> <a href="/blog/2020/06/11/leetcode-sequentialdigits-1291/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017151542.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          0～n-1中缺失的数字
        </h4> <a href="/blog/2020/06/12/leetcode-missingnumber-interview-53-ii/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017151542.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          1103.分糖果II
        </h4> <a href="/blog/2020/06/13/leetcode-distributecandies-1103/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017105512.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          JS原生函数实现之call、apply、bind
        </h4> <a href="/blog/2020/06/15/apply-call-bind/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017151542.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          239.滑动窗口最大值
        </h4> <a href="/blog/2020/06/16/leetcode-maxslidingwindow-239/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017150634.png);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          JS原生函数实现之数组实例方法map/reduce
        </h4> <a href="/blog/2020/06/16/map-reduce/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017145747.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          元素垂直水平居中的几种方法
        </h4> <a href="/blog/2020/06/17/center-middle/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017105512.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          ES5/6对象的继承及区别
        </h4> <a href="/blog/2020/06/18/es5-es6-extend/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017105512.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          CommonJS 与 ES6 Module的区别
        </h4> <a href="/blog/2020/06/19/cjs-esm-import-diff/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017105512.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          JS原生函数模拟实现new和instanceof及函数柯里化
        </h4> <a href="/blog/2020/06/20/new-instanceof/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017105512.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          函数防抖和节流、以及Promise.all实现
        </h4> <a href="/blog/2020/06/22/debounce-throttle/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017114430.jpg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          事件触发器EventEmitter
        </h4> <a href="/blog/2020/06/23/eventemitter/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017113243.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          less内置函数
        </h4> <a href="/blog/2020/06/28/less-function/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017111554.jpg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          回溯算法
        </h4> <a href="/blog/2020/07/02/backtrack/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017110754.png);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          堆排序&amp;优先级队列
        </h4> <a href="/blog/2020/07/12/heap/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017105512.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          题目:变量提升/匿名函数this指向
        </h4> <a href="/blog/2020/07/17/subject-this/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017104351.png);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          计算机组成原理——第一章
        </h4> <a href="/blog/2020/07/25/principles-of-computer-organization-01/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017103330.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          计算机组成原理——第二章
        </h4> <a href="/blog/2020/07/28/principles-of-computer-organization-02/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017101258.png);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          题目:经典的FOO.getName问题
        </h4> <a href="/blog/2020/08/01/foogetname/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqs/blogImage/raw/master/blogImage/3378128262-5d07af0750999.png);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          高性能JavaScript——第一章
        </h4> <a href="/blog/2020/08/28/load-execute/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20200825222450.png);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          计算机组成原理——第四章
        </h4> <a href="/blog/2020/08/25/principles-of-computer-organization-04/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20200831230601.png);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          Units in css
        </h4> <a href="/blog/2020/08/31/css-unit/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqs/blogImage/raw/master/blogImage/20200905134629.jpg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          你可能还不知道console对象
        </h4> <a href="/blog/2020/09/04/console/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201016234622.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          了解cjs、esm以及require.context
        </h4> <a href="/blog/2020/09/08/cjs-esm-require-context/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20200913170310.gif);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          域名发散和域名收敛
        </h4> <a href="/blog/2020/09/13/domain-dns/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqs/blogImage/raw/master/blogImage/20200828171746.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          高性能JavaScript——第二章
        </h4> <a href="/blog/2020/09/22/dataaccess/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201004184833.jpg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          高性能JavaScript——第三章
        </h4> <a href="/blog/2020/10/01/dom/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqs/blogImage/raw/master/blogImage/v2-a0d10af45e785fe8d3f5cd12f8c309f5_r.jpg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          彻底搞懂HTTPS的加密机制
        </h4> <a href="/blog/2020/08/12/https/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqs/blogImage/raw/master/blogImage/20201104182622.jpg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          JSON.parse(JSON.stringify(obj))实现深拷贝的缺点
        </h4> <a href="/blog/2020/10/20/deepclone/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201008220027.png);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          Chrome浏览器架构
        </h4> <a href="/blog/2020/10/12/chromestructure/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqs/blogImage/raw/master/blogImage/20201110205703.jpg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          高性能JavaScript——第四章
        </h4> <a href="/blog/2020/11/01/alo-flowcontrol/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqs/blogImage/raw/master/blogImage/20201111175711.png);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          How JavaScript works - an overview of the engine, the runtime, and the call stack
        </h4> <a href="/blog/2020/11/12/how-javascript-work1/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201203211137.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          正则表达式30分钟入门教程
        </h4> <a href="/blog/2020/12/01/regexp/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqs/blogImage/raw/master/blogImage/20201208172723.jpg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          详解平衡组
        </h4> <a href="/blog/2020/12/09/regexp-nfa/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqs/blogImage/raw/master/blogImage/20201216172057.jpg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          项目中用SVG画曲线和动画的一次记录
        </h4> <a href="/blog/2020/12/16/svg/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqs/blogImage/raw/master/blogImage/20201219170044.gif);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          单行省略和多行省略
        </h4> <a href="/blog/2020/12/20/ellipsis/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201226160513.png);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          浅析ArrayBuffer对象(上)
        </h4> <a href="/blog/2020/12/31/arraybuffer/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210107225332.jpg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          Vue3 one piece
        </h4> <a href="/blog/2021/01/07/vue3/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210109223210.jpg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          TypeScript学习记录(一)
        </h4> <a href="/blog/2021/01/09/typescript/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210126213808.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          线程安全
        </h4> <a href="/blog/2021/01/26/thread-safety/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210305230928.jpg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          Sass入门学习
        </h4> <a href="/blog/2021/03/05/sass/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210325224201.jpg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          百度小程序——基础原理篇
        </h4> <a href="/blog/2021/03/24/baidu-swan/" aria-current="page" class="el-button el-button--primary router-link-exact-active router-link-active">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210329171827.png);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          漫话：如何给女朋友解释为什么计算机中 0.2 + 0.1 不等于 0.3 ？
        </h4> <a href="/blog/2021/03/29/float-double/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210407135526.jpg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          AST实现函数自动包裹try/catch
        </h4> <a href="/blog/2021/04/10/ast/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210421234422.jpeg);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          博客优化二三事
        </h4> <a href="/blog/2021/04/21/blog-opt/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqs/blogImage/raw/master/blogImage/20201217171505.png);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          How JavaScript works - inside the V8 engine + 5 tips on how to write optimized code
        </h4> <a href="/blog/2021/04/13/how-javascript-work2/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item carousel-card bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://gitee.com/yancqS/blogImage/raw/master/blogImage/20200810230903.png);background-blend-mode:multiply;background-size:cover;background-color:rgba(0,0,0,0.3);"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 mb-3 text-light">
          计算机组成原理——第三章
        </h4> <a href="/blog/2020/08/20/principles-of-computer-organization-03/" class="el-button el-button--primary">
          Read this post now! <i class="el-icon-arrow-right"></i></a></div></div></div><!----></div></div></div></div> <div class="el-card is-always-shadow"><div class="el-card__header"><div class="clearfix"><h5 class="m-0">
            Tags
          </h5></div></div><div class="el-card__body"> <div><a href="/blog/tag/百度小程序" class="el-button el-button--small text-decoration-none d-inline-block mb-3">
            #百度小程序
          </a></div></div></div> <!----></main></div> <footer class="footer" data-v-0ff35a02><div class="footer-left-wrap" data-v-0ff35a02><ul class="contact" data-v-0ff35a02><li class="contact-item" data-v-0ff35a02><a href="https://github.com/yancqs" target="_blank" rel="noopener noreferrer" class="external" data-v-0ff35a02><span class="iconfont icon-github" data-v-0ff35a02></span></a></li><li class="contact-item" data-v-0ff35a02><a href="https://weibo.com/superYoha" target="_blank" rel="noopener noreferrer" class="external" data-v-0ff35a02><span class="iconfont icon-weibo" data-v-0ff35a02></span></a></li><li class="contact-item" data-v-0ff35a02><a href="https://www.zhihu.com/people/yoha-32-56" target="_blank" rel="noopener noreferrer" class="external" data-v-0ff35a02><span class="iconfont icon-zhihu" data-v-0ff35a02></span></a></li></ul></div> <div class="footer-right-wrap" data-v-0ff35a02><ul class="copyright" data-v-0ff35a02><li class="copyright-item" data-v-0ff35a02><a href="https://policies.google.com/privacy?hl=en-US" target="_blank" rel="noopener noreferrer" class="external" data-v-0ff35a02>
            Privacy Policy
          </a></li><li class="copyright-item" data-v-0ff35a02><a data-v-0ff35a02>MIT Licensed Copyright © 2021-present</a></li></ul></div></footer> <!----></div><div class="global-ui"><!----></div></div>
    <script src="/blog/assets/js/app.b3165492.js" defer></script><script src="/blog/assets/js/5.fb57028e.js" defer></script><script src="/blog/assets/js/82.698ba1a4.js" defer></script><script src="/blog/assets/js/8.69cb0bf8.js" defer></script><script src="/blog/assets/js/6.00881a70.js" defer></script>
  </body>
</html>
