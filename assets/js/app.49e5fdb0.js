(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[]]);!function(e){function n(n){for(var i,a,s=n[0],l=n[1],c=n[2],d=0,h=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&h.push(r[a][0]),r[a]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);for(u&&u(n);h.length;)h.shift()();return o.push.apply(o,c||[]),t()}function t(){for(var e,n=0;n<o.length;n++){for(var t=o[n],i=!0,s=1;s<t.length;s++){var l=t[s];0!==r[l]&&(i=!1)}i&&(o.splice(n--,1),e=a(a.s=t[0]))}return e}var i={},r={2:0},o=[];function a(n){if(i[n])return i[n].exports;var t=i[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,a),t.l=!0,t.exports}a.e=function(e){var n=[],t=r[e];if(0!==t)if(t)n.push(t[2]);else{var i=new Promise((function(n,i){t=r[e]=[n,i]}));n.push(t[2]=i);var o,s=document.createElement("script");s.charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.src=function(e){return a.p+"assets/js/"+({3:"vuejs-paginate"}[e]||e)+"."+{1:"5ce1be04",3:"ed6cc2ed",4:"b1eb71b0",5:"57de0eb5",6:"49ecf5be",7:"6084fe39",8:"8f5fe790",9:"262a4934",10:"ab00a0fe",11:"479f0d37",12:"76e49ffb",13:"cff6d8c7",14:"9924325c",15:"6db1935d",16:"8e8aa684",17:"fe0219e7",18:"a2554548",19:"848af721",20:"a8618424",21:"5c61c658",22:"080d29fa",23:"07c00de4",24:"20343008",25:"7bd7f315",26:"56d89cd4",27:"46ed8357",28:"6f8d841a",29:"997be7b9",30:"6b91e061",31:"ccdf9c20",32:"49787b4c",33:"dd3a7f7d",34:"43d9c358",35:"fc876a60",36:"117d8701",37:"65698749",38:"1adfd270",39:"e9b75603",40:"fae15180",41:"75695655",42:"733f09fc",43:"9c9e7eb5",44:"1a34bb31",45:"0894e035",46:"b66aacc2",47:"80509d6d",48:"c27aca53",49:"3e3abd97",50:"f2d2acdd",51:"a0beccba",52:"3ea1257f",53:"679a77e9",54:"561a1c0c",55:"73cf363e",56:"66e95fc4",57:"4ed488b5",58:"84d09bd7",59:"4884fedc",60:"77979a5a",61:"37bfdfd7",62:"269ec3e8",63:"9df377ad",64:"1482e1b1",65:"91add14d",66:"8ea0413e",67:"ace0ccba",68:"9488a4b0",69:"6506212a",70:"7d6d79f1",71:"ee2e9660",72:"c40423a5",73:"8224745a",74:"4287c5bb",75:"1794feed",76:"696c5add",77:"11b92c93",78:"b4bd3f9c",79:"2f6911fe",80:"82534970",81:"42214a95",82:"28389950",83:"f33a475e",84:"70b43a9d",85:"a478f021",86:"5f87592f",87:"39d8c0cd",88:"0fa476b1",89:"5ce47feb",90:"7007ed41",91:"39d5e2de",92:"786e0e83",93:"d7b575aa",94:"9d398cd1",95:"b27a521c",96:"0123a88f",97:"14a73134",98:"e499728e",99:"c664a23d",100:"34372ef6",101:"b6bb9b73",102:"6abbda41",103:"ca51f9da",104:"a52b7c14",105:"2228f2d9",106:"93a381ef",107:"96b05991",108:"e4bddc13",109:"61e76dc7",110:"34440597",111:"d23cb02d",112:"520bf642",113:"47a578b5",114:"b29c1741",115:"6328c2a5",116:"0b8f1c4c",117:"644177c2",118:"72eadbbf",119:"f0e97d44",120:"77db4e64",121:"6bb594e7",122:"ca969848",123:"ca10496b"}[e]+".js"}(e);var l=new Error;o=function(n){s.onerror=s.onload=null,clearTimeout(c);var t=r[e];if(0!==t){if(t){var i=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;l.message="Loading chunk "+e+" failed.\n("+i+": "+o+")",l.name="ChunkLoadError",l.type=i,l.request=o,t[1](l)}r[e]=void 0}};var c=setTimeout((function(){o({type:"timeout",target:s})}),12e4);s.onerror=s.onload=o,document.head.appendChild(s)}return Promise.all(n)},a.m=e,a.c=i,a.d=function(e,n,t){a.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,n){if(1&n&&(e=a(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(a.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)a.d(t,i,function(n){return e[n]}.bind(null,i));return t},a.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(n,"a",n),n},a.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},a.p="/blog/",a.oe=function(e){throw console.error(e),e};var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=n,s=s.slice();for(var c=0;c<s.length;c++)n(s[c]);var u=l;o.push([332,0]),t()}([function(e,n,t){"use strict";t.d(n,"e",(function(){return w})),t.d(n,"d",(function(){return x})),t.d(n,"c",(function(){return _})),t.d(n,"f",(function(){return S})),t.d(n,"a",(function(){return k})),t.d(n,"g",(function(){return C})),t.d(n,"b",(function(){return E})),t.d(n,"h",(function(){return T}));t(56),t(74),t(17),t(102),t(22),t(29);var i=t(38),r=t(118),o=(t(191),t(262),t(82),t(120),t(50),t(317),t(318),t(51),t(49),t(2)),a={Emoji:function(){return Promise.all([t.e(0),t.e(12)]).then(t.bind(null,639))},FrontmatterKey:function(){return t.e(17).then(t.bind(null,649))},GlobalLayout:function(){return Promise.resolve().then(t.bind(null,1))},HandBooks:function(){return Promise.all([t.e(0),t.e(1),t.e(13)]).then(t.bind(null,640))},Layout:function(){return Promise.all([t.e(0),t.e(14)]).then(t.bind(null,650))},Life:function(){return Promise.all([t.e(0),t.e(8)]).then(t.bind(null,641))},Lifes:function(){return Promise.all([t.e(0),t.e(1),t.e(15)]).then(t.bind(null,642))},Post:function(){return Promise.all([t.e(0),t.e(1),t.e(5)]).then(t.bind(null,638))},NotFound:function(){return t.e(16).then(t.bind(null,643))}},s={"v-6d5fd584":function(){return t.e(18).then(t.bind(null,651))},"v-2267428e":function(){return t.e(19).then(t.bind(null,652))},"v-340858fc":function(){return t.e(20).then(t.bind(null,653))},"v-79326b20":function(){return t.e(21).then(t.bind(null,654))},"v-4e3e81c4":function(){return t.e(22).then(t.bind(null,655))},"v-7cd52984":function(){return t.e(24).then(t.bind(null,656))},"v-c9654e38":function(){return t.e(23).then(t.bind(null,657))},"v-62c73d44":function(){return t.e(25).then(t.bind(null,658))},"v-c616719c":function(){return t.e(26).then(t.bind(null,659))},"v-40342a7c":function(){return t.e(27).then(t.bind(null,660))},"v-8bc15644":function(){return t.e(28).then(t.bind(null,661))},"v-02428510":function(){return t.e(29).then(t.bind(null,662))},"v-b80300f0":function(){return t.e(30).then(t.bind(null,663))},"v-44fe3bc0":function(){return t.e(31).then(t.bind(null,664))},"v-6f6493d2":function(){return t.e(32).then(t.bind(null,665))},"v-1108103e":function(){return t.e(33).then(t.bind(null,666))},"v-93e4a8c4":function(){return t.e(34).then(t.bind(null,667))},"v-6d7c83aa":function(){return t.e(35).then(t.bind(null,668))},"v-1acf2b1e":function(){return t.e(36).then(t.bind(null,669))},"v-b6ceae04":function(){return t.e(37).then(t.bind(null,670))},"v-9e470ed8":function(){return t.e(38).then(t.bind(null,671))},"v-3f15e68a":function(){return t.e(39).then(t.bind(null,672))},"v-4dc56a1e":function(){return t.e(40).then(t.bind(null,673))},"v-3f87a953":function(){return t.e(41).then(t.bind(null,674))},"v-680deed2":function(){return t.e(42).then(t.bind(null,675))},"v-0f230c8e":function(){return t.e(43).then(t.bind(null,676))},"v-1701c584":function(){return t.e(44).then(t.bind(null,677))},"v-58b09fac":function(){return t.e(45).then(t.bind(null,678))},"v-72d7c378":function(){return t.e(46).then(t.bind(null,679))},"v-7ae50946":function(){return t.e(47).then(t.bind(null,680))},"v-3f5c41e0":function(){return t.e(48).then(t.bind(null,681))},"v-7694cd9a":function(){return t.e(49).then(t.bind(null,682))},"v-0db4363e":function(){return t.e(50).then(t.bind(null,683))},"v-0c7d089e":function(){return t.e(51).then(t.bind(null,684))},"v-7b88550e":function(){return t.e(53).then(t.bind(null,685))},"v-91bb9904":function(){return t.e(52).then(t.bind(null,686))},"v-5650b51e":function(){return t.e(54).then(t.bind(null,687))},"v-03a57176":function(){return t.e(55).then(t.bind(null,688))},"v-7fbc829e":function(){return t.e(56).then(t.bind(null,689))},"v-e2b8eb88":function(){return t.e(57).then(t.bind(null,690))},"v-07b67c04":function(){return t.e(58).then(t.bind(null,691))},"v-0ef6168c":function(){return t.e(59).then(t.bind(null,692))},"v-64dbd57e":function(){return t.e(60).then(t.bind(null,693))},"v-0e58d244":function(){return t.e(61).then(t.bind(null,694))},"v-bb5c619e":function(){return t.e(65).then(t.bind(null,695))},"v-64936a7a":function(){return t.e(66).then(t.bind(null,696))},"v-2caf8e7e":function(){return t.e(67).then(t.bind(null,697))},"v-6880295d":function(){return t.e(68).then(t.bind(null,698))},"v-320be4a6":function(){return t.e(64).then(t.bind(null,699))},"v-45a6d390":function(){return t.e(70).then(t.bind(null,700))},"v-48bd62e5":function(){return t.e(69).then(t.bind(null,701))},"v-e21cc276":function(){return t.e(71).then(t.bind(null,702))},"v-4e31b43e":function(){return t.e(72).then(t.bind(null,703))},"v-7e4e1a04":function(){return t.e(73).then(t.bind(null,704))},"v-6c5a453c":function(){return t.e(74).then(t.bind(null,705))},"v-1368c2d0":function(){return t.e(75).then(t.bind(null,706))},"v-7fadf5fe":function(){return t.e(76).then(t.bind(null,707))},"v-b16522c4":function(){return t.e(77).then(t.bind(null,708))},"v-fb2d2604":function(){return t.e(78).then(t.bind(null,709))},"v-5192725e":function(){return t.e(79).then(t.bind(null,710))},"v-b53aa774":function(){return t.e(80).then(t.bind(null,711))},"v-5137b8a8":function(){return t.e(81).then(t.bind(null,712))},"v-715cea78":function(){return t.e(82).then(t.bind(null,713))},"v-3789f57e":function(){return t.e(83).then(t.bind(null,714))},"v-3b0c6bd4":function(){return t.e(84).then(t.bind(null,715))},"v-6e403dbe":function(){return t.e(85).then(t.bind(null,716))},"v-3a7aa7b2":function(){return t.e(86).then(t.bind(null,717))},"v-59749606":function(){return t.e(87).then(t.bind(null,718))},"v-e1b886c4":function(){return t.e(88).then(t.bind(null,719))},"v-74cf55b0":function(){return t.e(89).then(t.bind(null,720))},"v-2251fb10":function(){return t.e(90).then(t.bind(null,721))},"v-112d3ec4":function(){return t.e(91).then(t.bind(null,722))},"v-11d81cbe":function(){return t.e(92).then(t.bind(null,723))},"v-69fc2000":function(){return t.e(93).then(t.bind(null,724))},"v-e621ca34":function(){return t.e(94).then(t.bind(null,725))},"v-0ea3989e":function(){return t.e(95).then(t.bind(null,726))},"v-760ad9c8":function(){return t.e(96).then(t.bind(null,727))},"v-4be3ab3e":function(){return t.e(97).then(t.bind(null,728))},"v-2c73b2f8":function(){return t.e(98).then(t.bind(null,729))},"v-db94b744":function(){return t.e(99).then(t.bind(null,730))},"v-340ec498":function(){return t.e(100).then(t.bind(null,731))},"v-02122350":function(){return t.e(101).then(t.bind(null,732))},"v-03466e5e":function(){return t.e(102).then(t.bind(null,733))},"v-023be828":function(){return t.e(103).then(t.bind(null,734))},"v-c6398944":function(){return t.e(104).then(t.bind(null,735))},"v-338a8c9e":function(){return t.e(105).then(t.bind(null,736))},"v-7ae2d4e4":function(){return t.e(106).then(t.bind(null,737))},"v-772ba81e":function(){return t.e(107).then(t.bind(null,738))},"v-4d0b8f92":function(){return t.e(108).then(t.bind(null,739))},"v-04f59a88":function(){return t.e(109).then(t.bind(null,740))},"v-11d8c7be":function(){return t.e(110).then(t.bind(null,741))},"v-40d4d644":function(){return t.e(111).then(t.bind(null,742))},"v-1571973e":function(){return t.e(112).then(t.bind(null,743))},"v-27bd9704":function(){return t.e(113).then(t.bind(null,744))},"v-444b4f84":function(){return t.e(114).then(t.bind(null,745))},"v-01b345d4":function(){return t.e(115).then(t.bind(null,746))},"v-75403e1e":function(){return t.e(116).then(t.bind(null,747))},"v-51c9f104":function(){return t.e(117).then(t.bind(null,748))},"v-a2944974":function(){return t.e(118).then(t.bind(null,749))},"v-3ee7d4ba":function(){return t.e(119).then(t.bind(null,750))},"v-ca70ce04":function(){return t.e(120).then(t.bind(null,751))},"v-e727f904":function(){return t.e(121).then(t.bind(null,752))},"v-0783d65e":function(){return t.e(122).then(t.bind(null,753))},"v-63a42998":function(){return t.e(123).then(t.bind(null,754))},"v-c2b18304":function(){return t.e(63).then(t.bind(null,755))},"v-7db2b71a":function(){return t.e(62).then(t.bind(null,756))}};function l(e){var n=Object.create(null);return function(t){return n[t]||(n[t]=e(t))}}var c=/-(\w)/g,u=l((function(e){return e.replace(c,(function(e,n){return n?n.toUpperCase():""}))})),d=/\B([A-Z])/g,h=l((function(e){return e.replace(d,"-$1").toLowerCase()})),p=l((function(e){return e.charAt(0).toUpperCase()+e.slice(1)}));function f(e,n){if(n)return e(n)?e(n):n.includes("-")?e(p(u(n))):e(p(n))||e(h(n))}var m=Object.assign({},a,s),g=function(e){return m[e]},v=function(e){return s[e]},b=function(e){return a[e]},y=function(e){return o.default.component(e)};function w(e){return f(v,e)}function x(e){return f(b,e)}function _(e){return f(g,e)}function S(e){return f(y,e)}function k(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return Promise.all(n.filter((function(e){return e})).map(function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(n){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S(n)||!_(n)){e.next=5;break}return e.next=3,_(n)();case 3:t=e.sent,o.default.component(n,t.default);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()))}function C(e,n,t){var r;switch(n){case"components":e[n]||(e[n]={}),Object.assign(e[n],t);break;case"mixins":e[n]||(e[n]=[]),(r=e[n]).push.apply(r,Object(i.a)(t));break;default:throw new Error("Unknown option name.")}}function E(e,n){for(var t=0;t<e.length;t++){var i=e[t];if(i.key===n)return i}return{path:"",frontmatter:{}}}function T(e,n){"undefined"!=typeof window&&window.__VUEPRESS__&&(window.__VUEPRESS__[e]=n)}},function(e,n,t){"use strict";t.r(n);var i=t(312),r=t.n(i),o=t(2),a=t(0),s={name:"GlobalLayout",computed:{layout:function(){var e=this.getLayout();return Object(a.h)("layout",e),o.default.component(e)}},methods:{getLayout:function(){if(this.$page.path){var e=this.$page.frontmatter.layout;return e&&(this.$vuepress.getLayoutAsyncComponent(e)||this.$vuepress.getVueComponent(e))?e:"Layout"}return"NotFound"}}},l=t(7),c=Object(l.a)(s,(function(){var e=this.$createElement;return(this._self._c||e)(this.layout,{tag:"component"})}),[],!1,null,null,null).exports,u={computed:{activeIndex:function(){return this.$route.path}}},d=(t(478),Object(l.a)(u,(function(){var e=this,n=e.$createElement,t=e._self._c||n;return e.$themeConfig.nav?t("el-menu",{staticClass:"d-flex justify-content-center border-0",attrs:{"default-active":e.activeIndex,mode:"horizontal"}},e._l(e.$themeConfig.nav,(function(n){return t("el-menu-item",{key:n.link,attrs:{router:"",index:n.link},on:{click:function(t){e.activeIndex!==n.link&&e.$router.push(n.link)}}},[n.icon?t("i",{class:n.icon}):t("span",[e._v(e._s(n.emoji))]),e._v("\n    "+e._s(n.text)+"\n  ")])})),1):e._e()}),[],!1,null,null,null).exports),h=(t(479),t(82),t(481),t(51),t(284),t(265),t(50),t(483),t(120),t(103),t(190),t(313)),p=t.n(h),f={data:function(){return{index:null,query:""}},mounted:function(){this.index=new p.a({tokenize:"forward",doc:{id:"key",field:["title","content"]}});var e=this.$site.pages;this.index.add(e)},methods:{querySearchAsync:function(e,n){var t=this,i=this.$site.themeConfig,r=e.trim().toLowerCase(),o=i.googleCustomSearchEngineID&&i.googleAPIKey,a=i.searchMaxSuggestions||20;if(null===this.index||r.length<1)return n([]);this.index.search(r,{limit:a,threshold:4,encode:"extra"},(function(e){if(e.length){var i=e.map((function(e){return{link:e.path,value:t.getQuerySnippet(e)}}));return n(i)}if(o)return n([{value:t.$t("search_entire_site",{query:r}),link:"/search?q=".concat(r)}]);n([{value:t.$t("no_results"),link:""}])}))},getQuerySnippet:function(e){var n=e.content.toLowerCase().indexOf(this.query),t=n-20<0?0:n-20,i=n+30,r=e.content.slice(t,i).toLowerCase().replace(this.query,'<strong class="text--primary">'.concat(this.query,"</strong>")).split(" ").slice(1,-1).join(" ");return r?'\n        <strong class="text--primary">'.concat(e.title,'</strong>\n\n        <div class="text-muted pl-2"> ').concat(r," ..</div>").replace(/\|/g," ").replace(/:::/g," "):e.title},handleSelect:function(e){e.link&&this.$router.push(e.link),this.query=""}}},m=(t(487),Object(l.a)(f,(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"search-wrapper u-px3 d-flex align-items-center"},[t("el-autocomplete",{ref:"searchInput",attrs:{slot:"reference",size:"small","fetch-suggestions":e.querySearchAsync,placeholder:e.$t("search_placeholder"),"popper-class":"components-search","trigger-on-focus":!1,placement:"bottom-end",debounce:200},on:{select:e.handleSelect},slot:"reference",scopedSlots:e._u([{key:"default",fn:function(n){return[t("li",{attrs:{role:"option"},domProps:{innerHTML:e._s(n.item.value)}})]}}]),model:{value:e.query,callback:function(n){e.query=n},expression:"query"}})],1)}),[],!1,null,null,null).exports),g={props:{isToggleActive:Boolean},methods:{activateToggle:function(){this.$emit("onActivateToggle",!this.isToggleActive)}}},v=(t(488),{components:{Menu:d,SearchBox:m,Toggle:Object(l.a)(g,(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"toggle"},on:{click:function(n){return e.activateToggle()}}},[t("div",{staticClass:"span",class:{active:e.isToggleActive},attrs:{id:"top"}}),e._v(" "),t("div",{staticClass:"span",class:{active:e.isToggleActive},attrs:{id:"middle"}}),e._v(" "),t("div",{staticClass:"span",class:{active:e.isToggleActive},attrs:{id:"bottom"}})])}),[],!1,null,null,null).exports},data:function(){return{isToggleActive:!1}}}),b=(t(489),Object(l.a)(v,(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("header",{staticClass:"shadow",attrs:{id:"header"}},[t("nav",{staticClass:"p-3 d-flex desktop-menu justify-content-between"},[t("div",{staticClass:"d-flex blog-info-wrapper"},[t("router-link",{staticClass:"text-decoration-none m-0",attrs:{to:"/"}},[e.$themeConfig.logo?t("div",{staticClass:"card-img-bg d-inline-block blog-logo"},[t("img",{staticStyle:{"margin-right":"10px"},attrs:{src:e.$themeConfig.logo,height:"40px"}})]):e._e()]),e._v(" "),t("router-link",{staticClass:"blog-title",attrs:{to:"/"}},[t("div",{staticClass:"h4 text-center"},[e._v("\n          "+e._s(e.$site.title)+"\n        ")])])],1),e._v(" "),t("Menu"),e._v(" "),t("SearchBox"),e._v(" "),t("Toggle",{attrs:{"is-toggle-active":e.isToggleActive},on:{onActivateToggle:function(n){e.isToggleActive=!e.isToggleActive}}})],1),e._v(" "),t("div",{staticClass:"flex-column align-items-center mobile-menu pb-4",class:{mobileVisible:e.isToggleActive}},[t("Menu"),e._v(" "),t("SearchBox",{staticClass:"pt-4"})],1)])}),[],!1,null,null,null).exports),y=(t(330),{computed:{contact:function(){return(this.$themeConfig.footer&&this.$themeConfig.footer.contact||[]).map((function(e){return{iconComponent:"icon-"+e.type,link:e.link}}))},copyright:function(){return this.$themeConfig.footer&&this.$themeConfig.footer.copyright||[]},busuanzi:function(){return this.$themeConfig.busuanzi&&this.$themeConfig.busuanzi.enable}}}),w=(t(490),{components:{DefaultGlobalLayout:c,Header:b,Footer:Object(l.a)(y,(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("footer",{staticClass:"footer"},[t("div",{staticClass:"footer-left-wrap"},[e.contact?t("ul",{staticClass:"contact"},e._l(e.contact,(function(e,n){return t("li",{key:n,staticClass:"contact-item"},[t("NavLink",{attrs:{link:e.link}},[t("span",{staticClass:"iconfont",class:e.iconComponent})])],1)})),0):e._e()]),e._v(" "),e.busuanzi?t("Busuanzi"):e._e(),e._v(" "),t("div",{staticClass:"footer-right-wrap"},[e.copyright?t("ul",{staticClass:"copyright"},e._l(e.copyright,(function(n,i){return t("li",{key:i,staticClass:"copyright-item"},[n.link?[t("NavLink",{attrs:{link:n.link}},[e._v("\n            "+e._s(n.text)+"\n          ")])]:[t("a",[e._v(e._s(n.text))])]],2)})),0):e._e()])],1)}),[],!1,null,"6320141e",null).exports,CookieLaw:r.a}}),x=Object(l.a)(w,(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"global-layout d-flex flex-column"},[t("Header"),e._v(" "),t("DefaultGlobalLayout"),e._v(" "),t("Footer"),e._v(" "),e.$themeConfig.cookies?t("ClientOnly",[t("cookie-law",e._b({},"cookie-law",e.$themeConfig.cookies,!1))],1):e._e(),e._v(" "),t("BackToTop")],1)}),[],!1,null,null,null);n.default=x.exports},function(e,n,t){"use strict";t.r(n);
/*!
 * Vue.js v2.6.12
 * (c) 2014-2020 Evan You
 * Released under the MIT License.
 */
var i=Object.freeze({});function r(e){return null==e}function o(e){return null!=e}function a(e){return!0===e}function s(e){return"string"==typeof e||"number"==typeof e||"symbol"==typeof e||"boolean"==typeof e}function l(e){return null!==e&&"object"==typeof e}var c=Object.prototype.toString;function u(e){return"[object Object]"===c.call(e)}function d(e){return"[object RegExp]"===c.call(e)}function h(e){var n=parseFloat(String(e));return n>=0&&Math.floor(n)===n&&isFinite(e)}function p(e){return o(e)&&"function"==typeof e.then&&"function"==typeof e.catch}function f(e){return null==e?"":Array.isArray(e)||u(e)&&e.toString===c?JSON.stringify(e,null,2):String(e)}function m(e){var n=parseFloat(e);return isNaN(n)?e:n}function g(e,n){for(var t=Object.create(null),i=e.split(","),r=0;r<i.length;r++)t[i[r]]=!0;return n?function(e){return t[e.toLowerCase()]}:function(e){return t[e]}}g("slot,component",!0);var v=g("key,ref,slot,slot-scope,is");function b(e,n){if(e.length){var t=e.indexOf(n);if(t>-1)return e.splice(t,1)}}var y=Object.prototype.hasOwnProperty;function w(e,n){return y.call(e,n)}function x(e){var n=Object.create(null);return function(t){return n[t]||(n[t]=e(t))}}var _=/-(\w)/g,S=x((function(e){return e.replace(_,(function(e,n){return n?n.toUpperCase():""}))})),k=x((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})),C=/\B([A-Z])/g,E=x((function(e){return e.replace(C,"-$1").toLowerCase()}));var T=Function.prototype.bind?function(e,n){return e.bind(n)}:function(e,n){function t(t){var i=arguments.length;return i?i>1?e.apply(n,arguments):e.call(n,t):e.call(n)}return t._length=e.length,t};function P(e,n){n=n||0;for(var t=e.length-n,i=new Array(t);t--;)i[t]=e[t+n];return i}function O(e,n){for(var t in n)e[t]=n[t];return e}function A(e){for(var n={},t=0;t<e.length;t++)e[t]&&O(n,e[t]);return n}function j(e,n,t){}var I=function(e,n,t){return!1},D=function(e){return e};function M(e,n){if(e===n)return!0;var t=l(e),i=l(n);if(!t||!i)return!t&&!i&&String(e)===String(n);try{var r=Array.isArray(e),o=Array.isArray(n);if(r&&o)return e.length===n.length&&e.every((function(e,t){return M(e,n[t])}));if(e instanceof Date&&n instanceof Date)return e.getTime()===n.getTime();if(r||o)return!1;var a=Object.keys(e),s=Object.keys(n);return a.length===s.length&&a.every((function(t){return M(e[t],n[t])}))}catch(e){return!1}}function L(e,n){for(var t=0;t<e.length;t++)if(M(e[t],n))return t;return-1}function N(e){var n=!1;return function(){n||(n=!0,e.apply(this,arguments))}}var $=["component","directive","filter"],F=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],R={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:I,isReservedAttr:I,isUnknownElement:I,getTagNamespace:j,parsePlatformTagName:D,mustUseProp:I,async:!0,_lifecycleHooks:F},B=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function V(e,n,t,i){Object.defineProperty(e,n,{value:t,enumerable:!!i,writable:!0,configurable:!0})}var z=new RegExp("[^"+B.source+".$_\\d]");var q,H="__proto__"in{},W="undefined"!=typeof window,U="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,J=U&&WXEnvironment.platform.toLowerCase(),Y=W&&window.navigator.userAgent.toLowerCase(),G=Y&&/msie|trident/.test(Y),K=Y&&Y.indexOf("msie 9.0")>0,X=Y&&Y.indexOf("edge/")>0,Q=(Y&&Y.indexOf("android"),Y&&/iphone|ipad|ipod|ios/.test(Y)||"ios"===J),Z=(Y&&/chrome\/\d+/.test(Y),Y&&/phantomjs/.test(Y),Y&&Y.match(/firefox\/(\d+)/)),ee={}.watch,ne=!1;if(W)try{var te={};Object.defineProperty(te,"passive",{get:function(){ne=!0}}),window.addEventListener("test-passive",null,te)}catch(e){}var ie=function(){return void 0===q&&(q=!W&&!U&&"undefined"!=typeof global&&(global.process&&"server"===global.process.env.VUE_ENV)),q},re=W&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function oe(e){return"function"==typeof e&&/native code/.test(e.toString())}var ae,se="undefined"!=typeof Symbol&&oe(Symbol)&&"undefined"!=typeof Reflect&&oe(Reflect.ownKeys);ae="undefined"!=typeof Set&&oe(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return!0===this.set[e]},e.prototype.add=function(e){this.set[e]=!0},e.prototype.clear=function(){this.set=Object.create(null)},e}();var le=j,ce=0,ue=function(){this.id=ce++,this.subs=[]};ue.prototype.addSub=function(e){this.subs.push(e)},ue.prototype.removeSub=function(e){b(this.subs,e)},ue.prototype.depend=function(){ue.target&&ue.target.addDep(this)},ue.prototype.notify=function(){var e=this.subs.slice();for(var n=0,t=e.length;n<t;n++)e[n].update()},ue.target=null;var de=[];function he(e){de.push(e),ue.target=e}function pe(){de.pop(),ue.target=de[de.length-1]}var fe=function(e,n,t,i,r,o,a,s){this.tag=e,this.data=n,this.children=t,this.text=i,this.elm=r,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=n&&n.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},me={child:{configurable:!0}};me.child.get=function(){return this.componentInstance},Object.defineProperties(fe.prototype,me);var ge=function(e){void 0===e&&(e="");var n=new fe;return n.text=e,n.isComment=!0,n};function ve(e){return new fe(void 0,void 0,void 0,String(e))}function be(e){var n=new fe(e.tag,e.data,e.children&&e.children.slice(),e.text,e.elm,e.context,e.componentOptions,e.asyncFactory);return n.ns=e.ns,n.isStatic=e.isStatic,n.key=e.key,n.isComment=e.isComment,n.fnContext=e.fnContext,n.fnOptions=e.fnOptions,n.fnScopeId=e.fnScopeId,n.asyncMeta=e.asyncMeta,n.isCloned=!0,n}var ye=Array.prototype,we=Object.create(ye);["push","pop","shift","unshift","splice","sort","reverse"].forEach((function(e){var n=ye[e];V(we,e,(function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];var r,o=n.apply(this,t),a=this.__ob__;switch(e){case"push":case"unshift":r=t;break;case"splice":r=t.slice(2)}return r&&a.observeArray(r),a.dep.notify(),o}))}));var xe=Object.getOwnPropertyNames(we),_e=!0;function Se(e){_e=e}var ke=function(e){this.value=e,this.dep=new ue,this.vmCount=0,V(e,"__ob__",this),Array.isArray(e)?(H?function(e,n){e.__proto__=n}(e,we):function(e,n,t){for(var i=0,r=t.length;i<r;i++){var o=t[i];V(e,o,n[o])}}(e,we,xe),this.observeArray(e)):this.walk(e)};function Ce(e,n){var t;if(l(e)&&!(e instanceof fe))return w(e,"__ob__")&&e.__ob__ instanceof ke?t=e.__ob__:_e&&!ie()&&(Array.isArray(e)||u(e))&&Object.isExtensible(e)&&!e._isVue&&(t=new ke(e)),n&&t&&t.vmCount++,t}function Ee(e,n,t,i,r){var o=new ue,a=Object.getOwnPropertyDescriptor(e,n);if(!a||!1!==a.configurable){var s=a&&a.get,l=a&&a.set;s&&!l||2!==arguments.length||(t=e[n]);var c=!r&&Ce(t);Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:function(){var n=s?s.call(e):t;return ue.target&&(o.depend(),c&&(c.dep.depend(),Array.isArray(n)&&Oe(n))),n},set:function(n){var i=s?s.call(e):t;n===i||n!=n&&i!=i||s&&!l||(l?l.call(e,n):t=n,c=!r&&Ce(n),o.notify())}})}}function Te(e,n,t){if(Array.isArray(e)&&h(n))return e.length=Math.max(e.length,n),e.splice(n,1,t),t;if(n in e&&!(n in Object.prototype))return e[n]=t,t;var i=e.__ob__;return e._isVue||i&&i.vmCount?t:i?(Ee(i.value,n,t),i.dep.notify(),t):(e[n]=t,t)}function Pe(e,n){if(Array.isArray(e)&&h(n))e.splice(n,1);else{var t=e.__ob__;e._isVue||t&&t.vmCount||w(e,n)&&(delete e[n],t&&t.dep.notify())}}function Oe(e){for(var n=void 0,t=0,i=e.length;t<i;t++)(n=e[t])&&n.__ob__&&n.__ob__.dep.depend(),Array.isArray(n)&&Oe(n)}ke.prototype.walk=function(e){for(var n=Object.keys(e),t=0;t<n.length;t++)Ee(e,n[t])},ke.prototype.observeArray=function(e){for(var n=0,t=e.length;n<t;n++)Ce(e[n])};var Ae=R.optionMergeStrategies;function je(e,n){if(!n)return e;for(var t,i,r,o=se?Reflect.ownKeys(n):Object.keys(n),a=0;a<o.length;a++)"__ob__"!==(t=o[a])&&(i=e[t],r=n[t],w(e,t)?i!==r&&u(i)&&u(r)&&je(i,r):Te(e,t,r));return e}function Ie(e,n,t){return t?function(){var i="function"==typeof n?n.call(t,t):n,r="function"==typeof e?e.call(t,t):e;return i?je(i,r):r}:n?e?function(){return je("function"==typeof n?n.call(this,this):n,"function"==typeof e?e.call(this,this):e)}:n:e}function De(e,n){var t=n?e?e.concat(n):Array.isArray(n)?n:[n]:e;return t?function(e){for(var n=[],t=0;t<e.length;t++)-1===n.indexOf(e[t])&&n.push(e[t]);return n}(t):t}function Me(e,n,t,i){var r=Object.create(e||null);return n?O(r,n):r}Ae.data=function(e,n,t){return t?Ie(e,n,t):n&&"function"!=typeof n?e:Ie(e,n)},F.forEach((function(e){Ae[e]=De})),$.forEach((function(e){Ae[e+"s"]=Me})),Ae.watch=function(e,n,t,i){if(e===ee&&(e=void 0),n===ee&&(n=void 0),!n)return Object.create(e||null);if(!e)return n;var r={};for(var o in O(r,e),n){var a=r[o],s=n[o];a&&!Array.isArray(a)&&(a=[a]),r[o]=a?a.concat(s):Array.isArray(s)?s:[s]}return r},Ae.props=Ae.methods=Ae.inject=Ae.computed=function(e,n,t,i){if(!e)return n;var r=Object.create(null);return O(r,e),n&&O(r,n),r},Ae.provide=Ie;var Le=function(e,n){return void 0===n?e:n};function Ne(e,n,t){if("function"==typeof n&&(n=n.options),function(e,n){var t=e.props;if(t){var i,r,o={};if(Array.isArray(t))for(i=t.length;i--;)"string"==typeof(r=t[i])&&(o[S(r)]={type:null});else if(u(t))for(var a in t)r=t[a],o[S(a)]=u(r)?r:{type:r};else 0;e.props=o}}(n),function(e,n){var t=e.inject;if(t){var i=e.inject={};if(Array.isArray(t))for(var r=0;r<t.length;r++)i[t[r]]={from:t[r]};else if(u(t))for(var o in t){var a=t[o];i[o]=u(a)?O({from:o},a):{from:a}}else 0}}(n),function(e){var n=e.directives;if(n)for(var t in n){var i=n[t];"function"==typeof i&&(n[t]={bind:i,update:i})}}(n),!n._base&&(n.extends&&(e=Ne(e,n.extends,t)),n.mixins))for(var i=0,r=n.mixins.length;i<r;i++)e=Ne(e,n.mixins[i],t);var o,a={};for(o in e)s(o);for(o in n)w(e,o)||s(o);function s(i){var r=Ae[i]||Le;a[i]=r(e[i],n[i],t,i)}return a}function $e(e,n,t,i){if("string"==typeof t){var r=e[n];if(w(r,t))return r[t];var o=S(t);if(w(r,o))return r[o];var a=k(o);return w(r,a)?r[a]:r[t]||r[o]||r[a]}}function Fe(e,n,t,i){var r=n[e],o=!w(t,e),a=t[e],s=Ve(Boolean,r.type);if(s>-1)if(o&&!w(r,"default"))a=!1;else if(""===a||a===E(e)){var l=Ve(String,r.type);(l<0||s<l)&&(a=!0)}if(void 0===a){a=function(e,n,t){if(!w(n,"default"))return;var i=n.default;0;if(e&&e.$options.propsData&&void 0===e.$options.propsData[t]&&void 0!==e._props[t])return e._props[t];return"function"==typeof i&&"Function"!==Re(n.type)?i.call(e):i}(i,r,e);var c=_e;Se(!0),Ce(a),Se(c)}return a}function Re(e){var n=e&&e.toString().match(/^\s*function (\w+)/);return n?n[1]:""}function Be(e,n){return Re(e)===Re(n)}function Ve(e,n){if(!Array.isArray(n))return Be(n,e)?0:-1;for(var t=0,i=n.length;t<i;t++)if(Be(n[t],e))return t;return-1}function ze(e,n,t){he();try{if(n)for(var i=n;i=i.$parent;){var r=i.$options.errorCaptured;if(r)for(var o=0;o<r.length;o++)try{if(!1===r[o].call(i,e,n,t))return}catch(e){He(e,i,"errorCaptured hook")}}He(e,n,t)}finally{pe()}}function qe(e,n,t,i,r){var o;try{(o=t?e.apply(n,t):e.call(n))&&!o._isVue&&p(o)&&!o._handled&&(o.catch((function(e){return ze(e,i,r+" (Promise/async)")})),o._handled=!0)}catch(e){ze(e,i,r)}return o}function He(e,n,t){if(R.errorHandler)try{return R.errorHandler.call(null,e,n,t)}catch(n){n!==e&&We(n,null,"config.errorHandler")}We(e,n,t)}function We(e,n,t){if(!W&&!U||"undefined"==typeof console)throw e;console.error(e)}var Ue,Je=!1,Ye=[],Ge=!1;function Ke(){Ge=!1;var e=Ye.slice(0);Ye.length=0;for(var n=0;n<e.length;n++)e[n]()}if("undefined"!=typeof Promise&&oe(Promise)){var Xe=Promise.resolve();Ue=function(){Xe.then(Ke),Q&&setTimeout(j)},Je=!0}else if(G||"undefined"==typeof MutationObserver||!oe(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())Ue="undefined"!=typeof setImmediate&&oe(setImmediate)?function(){setImmediate(Ke)}:function(){setTimeout(Ke,0)};else{var Qe=1,Ze=new MutationObserver(Ke),en=document.createTextNode(String(Qe));Ze.observe(en,{characterData:!0}),Ue=function(){Qe=(Qe+1)%2,en.data=String(Qe)},Je=!0}function nn(e,n){var t;if(Ye.push((function(){if(e)try{e.call(n)}catch(e){ze(e,n,"nextTick")}else t&&t(n)})),Ge||(Ge=!0,Ue()),!e&&"undefined"!=typeof Promise)return new Promise((function(e){t=e}))}var tn=new ae;function rn(e){!function e(n,t){var i,r,o=Array.isArray(n);if(!o&&!l(n)||Object.isFrozen(n)||n instanceof fe)return;if(n.__ob__){var a=n.__ob__.dep.id;if(t.has(a))return;t.add(a)}if(o)for(i=n.length;i--;)e(n[i],t);else for(r=Object.keys(n),i=r.length;i--;)e(n[r[i]],t)}(e,tn),tn.clear()}var on=x((function(e){var n="&"===e.charAt(0),t="~"===(e=n?e.slice(1):e).charAt(0),i="!"===(e=t?e.slice(1):e).charAt(0);return{name:e=i?e.slice(1):e,once:t,capture:i,passive:n}}));function an(e,n){function t(){var e=arguments,i=t.fns;if(!Array.isArray(i))return qe(i,null,arguments,n,"v-on handler");for(var r=i.slice(),o=0;o<r.length;o++)qe(r[o],null,e,n,"v-on handler")}return t.fns=e,t}function sn(e,n,t,i,o,s){var l,c,u,d;for(l in e)c=e[l],u=n[l],d=on(l),r(c)||(r(u)?(r(c.fns)&&(c=e[l]=an(c,s)),a(d.once)&&(c=e[l]=o(d.name,c,d.capture)),t(d.name,c,d.capture,d.passive,d.params)):c!==u&&(u.fns=c,e[l]=u));for(l in n)r(e[l])&&i((d=on(l)).name,n[l],d.capture)}function ln(e,n,t){var i;e instanceof fe&&(e=e.data.hook||(e.data.hook={}));var s=e[n];function l(){t.apply(this,arguments),b(i.fns,l)}r(s)?i=an([l]):o(s.fns)&&a(s.merged)?(i=s).fns.push(l):i=an([s,l]),i.merged=!0,e[n]=i}function cn(e,n,t,i,r){if(o(n)){if(w(n,t))return e[t]=n[t],r||delete n[t],!0;if(w(n,i))return e[t]=n[i],r||delete n[i],!0}return!1}function un(e){return s(e)?[ve(e)]:Array.isArray(e)?function e(n,t){var i,l,c,u,d=[];for(i=0;i<n.length;i++)r(l=n[i])||"boolean"==typeof l||(c=d.length-1,u=d[c],Array.isArray(l)?l.length>0&&(dn((l=e(l,(t||"")+"_"+i))[0])&&dn(u)&&(d[c]=ve(u.text+l[0].text),l.shift()),d.push.apply(d,l)):s(l)?dn(u)?d[c]=ve(u.text+l):""!==l&&d.push(ve(l)):dn(l)&&dn(u)?d[c]=ve(u.text+l.text):(a(n._isVList)&&o(l.tag)&&r(l.key)&&o(t)&&(l.key="__vlist"+t+"_"+i+"__"),d.push(l)));return d}(e):void 0}function dn(e){return o(e)&&o(e.text)&&!1===e.isComment}function hn(e,n){if(e){for(var t=Object.create(null),i=se?Reflect.ownKeys(e):Object.keys(e),r=0;r<i.length;r++){var o=i[r];if("__ob__"!==o){for(var a=e[o].from,s=n;s;){if(s._provided&&w(s._provided,a)){t[o]=s._provided[a];break}s=s.$parent}if(!s)if("default"in e[o]){var l=e[o].default;t[o]="function"==typeof l?l.call(n):l}else 0}}return t}}function pn(e,n){if(!e||!e.length)return{};for(var t={},i=0,r=e.length;i<r;i++){var o=e[i],a=o.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,o.context!==n&&o.fnContext!==n||!a||null==a.slot)(t.default||(t.default=[])).push(o);else{var s=a.slot,l=t[s]||(t[s]=[]);"template"===o.tag?l.push.apply(l,o.children||[]):l.push(o)}}for(var c in t)t[c].every(fn)&&delete t[c];return t}function fn(e){return e.isComment&&!e.asyncFactory||" "===e.text}function mn(e,n,t){var r,o=Object.keys(n).length>0,a=e?!!e.$stable:!o,s=e&&e.$key;if(e){if(e._normalized)return e._normalized;if(a&&t&&t!==i&&s===t.$key&&!o&&!t.$hasNormal)return t;for(var l in r={},e)e[l]&&"$"!==l[0]&&(r[l]=gn(n,l,e[l]))}else r={};for(var c in n)c in r||(r[c]=vn(n,c));return e&&Object.isExtensible(e)&&(e._normalized=r),V(r,"$stable",a),V(r,"$key",s),V(r,"$hasNormal",o),r}function gn(e,n,t){var i=function(){var e=arguments.length?t.apply(null,arguments):t({});return(e=e&&"object"==typeof e&&!Array.isArray(e)?[e]:un(e))&&(0===e.length||1===e.length&&e[0].isComment)?void 0:e};return t.proxy&&Object.defineProperty(e,n,{get:i,enumerable:!0,configurable:!0}),i}function vn(e,n){return function(){return e[n]}}function bn(e,n){var t,i,r,a,s;if(Array.isArray(e)||"string"==typeof e)for(t=new Array(e.length),i=0,r=e.length;i<r;i++)t[i]=n(e[i],i);else if("number"==typeof e)for(t=new Array(e),i=0;i<e;i++)t[i]=n(i+1,i);else if(l(e))if(se&&e[Symbol.iterator]){t=[];for(var c=e[Symbol.iterator](),u=c.next();!u.done;)t.push(n(u.value,t.length)),u=c.next()}else for(a=Object.keys(e),t=new Array(a.length),i=0,r=a.length;i<r;i++)s=a[i],t[i]=n(e[s],s,i);return o(t)||(t=[]),t._isVList=!0,t}function yn(e,n,t,i){var r,o=this.$scopedSlots[e];o?(t=t||{},i&&(t=O(O({},i),t)),r=o(t)||n):r=this.$slots[e]||n;var a=t&&t.slot;return a?this.$createElement("template",{slot:a},r):r}function wn(e){return $e(this.$options,"filters",e)||D}function xn(e,n){return Array.isArray(e)?-1===e.indexOf(n):e!==n}function _n(e,n,t,i,r){var o=R.keyCodes[n]||t;return r&&i&&!R.keyCodes[n]?xn(r,i):o?xn(o,e):i?E(i)!==n:void 0}function Sn(e,n,t,i,r){if(t)if(l(t)){var o;Array.isArray(t)&&(t=A(t));var a=function(a){if("class"===a||"style"===a||v(a))o=e;else{var s=e.attrs&&e.attrs.type;o=i||R.mustUseProp(n,s,a)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={})}var l=S(a),c=E(a);l in o||c in o||(o[a]=t[a],r&&((e.on||(e.on={}))["update:"+a]=function(e){t[a]=e}))};for(var s in t)a(s)}else;return e}function kn(e,n){var t=this._staticTrees||(this._staticTrees=[]),i=t[e];return i&&!n||En(i=t[e]=this.$options.staticRenderFns[e].call(this._renderProxy,null,this),"__static__"+e,!1),i}function Cn(e,n,t){return En(e,"__once__"+n+(t?"_"+t:""),!0),e}function En(e,n,t){if(Array.isArray(e))for(var i=0;i<e.length;i++)e[i]&&"string"!=typeof e[i]&&Tn(e[i],n+"_"+i,t);else Tn(e,n,t)}function Tn(e,n,t){e.isStatic=!0,e.key=n,e.isOnce=t}function Pn(e,n){if(n)if(u(n)){var t=e.on=e.on?O({},e.on):{};for(var i in n){var r=t[i],o=n[i];t[i]=r?[].concat(r,o):o}}else;return e}function On(e,n,t,i){n=n||{$stable:!t};for(var r=0;r<e.length;r++){var o=e[r];Array.isArray(o)?On(o,n,t):o&&(o.proxy&&(o.fn.proxy=!0),n[o.key]=o.fn)}return i&&(n.$key=i),n}function An(e,n){for(var t=0;t<n.length;t+=2){var i=n[t];"string"==typeof i&&i&&(e[n[t]]=n[t+1])}return e}function jn(e,n){return"string"==typeof e?n+e:e}function In(e){e._o=Cn,e._n=m,e._s=f,e._l=bn,e._t=yn,e._q=M,e._i=L,e._m=kn,e._f=wn,e._k=_n,e._b=Sn,e._v=ve,e._e=ge,e._u=On,e._g=Pn,e._d=An,e._p=jn}function Dn(e,n,t,r,o){var s,l=this,c=o.options;w(r,"_uid")?(s=Object.create(r))._original=r:(s=r,r=r._original);var u=a(c._compiled),d=!u;this.data=e,this.props=n,this.children=t,this.parent=r,this.listeners=e.on||i,this.injections=hn(c.inject,r),this.slots=function(){return l.$slots||mn(e.scopedSlots,l.$slots=pn(t,r)),l.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return mn(e.scopedSlots,this.slots())}}),u&&(this.$options=c,this.$slots=this.slots(),this.$scopedSlots=mn(e.scopedSlots,this.$slots)),c._scopeId?this._c=function(e,n,t,i){var o=Bn(s,e,n,t,i,d);return o&&!Array.isArray(o)&&(o.fnScopeId=c._scopeId,o.fnContext=r),o}:this._c=function(e,n,t,i){return Bn(s,e,n,t,i,d)}}function Mn(e,n,t,i,r){var o=be(e);return o.fnContext=t,o.fnOptions=i,n.slot&&((o.data||(o.data={})).slot=n.slot),o}function Ln(e,n){for(var t in n)e[S(t)]=n[t]}In(Dn.prototype);var Nn={init:function(e,n){if(e.componentInstance&&!e.componentInstance._isDestroyed&&e.data.keepAlive){var t=e;Nn.prepatch(t,t)}else{(e.componentInstance=function(e,n){var t={_isComponent:!0,_parentVnode:e,parent:n},i=e.data.inlineTemplate;o(i)&&(t.render=i.render,t.staticRenderFns=i.staticRenderFns);return new e.componentOptions.Ctor(t)}(e,Kn)).$mount(n?e.elm:void 0,n)}},prepatch:function(e,n){var t=n.componentOptions;!function(e,n,t,r,o){0;var a=r.data.scopedSlots,s=e.$scopedSlots,l=!!(a&&!a.$stable||s!==i&&!s.$stable||a&&e.$scopedSlots.$key!==a.$key),c=!!(o||e.$options._renderChildren||l);e.$options._parentVnode=r,e.$vnode=r,e._vnode&&(e._vnode.parent=r);if(e.$options._renderChildren=o,e.$attrs=r.data.attrs||i,e.$listeners=t||i,n&&e.$options.props){Se(!1);for(var u=e._props,d=e.$options._propKeys||[],h=0;h<d.length;h++){var p=d[h],f=e.$options.props;u[p]=Fe(p,f,n,e)}Se(!0),e.$options.propsData=n}t=t||i;var m=e.$options._parentListeners;e.$options._parentListeners=t,Gn(e,t,m),c&&(e.$slots=pn(o,r.context),e.$forceUpdate());0}(n.componentInstance=e.componentInstance,t.propsData,t.listeners,n,t.children)},insert:function(e){var n,t=e.context,i=e.componentInstance;i._isMounted||(i._isMounted=!0,et(i,"mounted")),e.data.keepAlive&&(t._isMounted?((n=i)._inactive=!1,tt.push(n)):Zn(i,!0))},destroy:function(e){var n=e.componentInstance;n._isDestroyed||(e.data.keepAlive?function e(n,t){if(t&&(n._directInactive=!0,Qn(n)))return;if(!n._inactive){n._inactive=!0;for(var i=0;i<n.$children.length;i++)e(n.$children[i]);et(n,"deactivated")}}(n,!0):n.$destroy())}},$n=Object.keys(Nn);function Fn(e,n,t,s,c){if(!r(e)){var u=t.$options._base;if(l(e)&&(e=u.extend(e)),"function"==typeof e){var d;if(r(e.cid)&&void 0===(e=function(e,n){if(a(e.error)&&o(e.errorComp))return e.errorComp;if(o(e.resolved))return e.resolved;var t=zn;t&&o(e.owners)&&-1===e.owners.indexOf(t)&&e.owners.push(t);if(a(e.loading)&&o(e.loadingComp))return e.loadingComp;if(t&&!o(e.owners)){var i=e.owners=[t],s=!0,c=null,u=null;t.$on("hook:destroyed",(function(){return b(i,t)}));var d=function(e){for(var n=0,t=i.length;n<t;n++)i[n].$forceUpdate();e&&(i.length=0,null!==c&&(clearTimeout(c),c=null),null!==u&&(clearTimeout(u),u=null))},h=N((function(t){e.resolved=qn(t,n),s?i.length=0:d(!0)})),f=N((function(n){o(e.errorComp)&&(e.error=!0,d(!0))})),m=e(h,f);return l(m)&&(p(m)?r(e.resolved)&&m.then(h,f):p(m.component)&&(m.component.then(h,f),o(m.error)&&(e.errorComp=qn(m.error,n)),o(m.loading)&&(e.loadingComp=qn(m.loading,n),0===m.delay?e.loading=!0:c=setTimeout((function(){c=null,r(e.resolved)&&r(e.error)&&(e.loading=!0,d(!1))}),m.delay||200)),o(m.timeout)&&(u=setTimeout((function(){u=null,r(e.resolved)&&f(null)}),m.timeout)))),s=!1,e.loading?e.loadingComp:e.resolved}}(d=e,u)))return function(e,n,t,i,r){var o=ge();return o.asyncFactory=e,o.asyncMeta={data:n,context:t,children:i,tag:r},o}(d,n,t,s,c);n=n||{},_t(e),o(n.model)&&function(e,n){var t=e.model&&e.model.prop||"value",i=e.model&&e.model.event||"input";(n.attrs||(n.attrs={}))[t]=n.model.value;var r=n.on||(n.on={}),a=r[i],s=n.model.callback;o(a)?(Array.isArray(a)?-1===a.indexOf(s):a!==s)&&(r[i]=[s].concat(a)):r[i]=s}(e.options,n);var h=function(e,n,t){var i=n.options.props;if(!r(i)){var a={},s=e.attrs,l=e.props;if(o(s)||o(l))for(var c in i){var u=E(c);cn(a,l,c,u,!0)||cn(a,s,c,u,!1)}return a}}(n,e);if(a(e.options.functional))return function(e,n,t,r,a){var s=e.options,l={},c=s.props;if(o(c))for(var u in c)l[u]=Fe(u,c,n||i);else o(t.attrs)&&Ln(l,t.attrs),o(t.props)&&Ln(l,t.props);var d=new Dn(t,l,a,r,e),h=s.render.call(null,d._c,d);if(h instanceof fe)return Mn(h,t,d.parent,s,d);if(Array.isArray(h)){for(var p=un(h)||[],f=new Array(p.length),m=0;m<p.length;m++)f[m]=Mn(p[m],t,d.parent,s,d);return f}}(e,h,n,t,s);var f=n.on;if(n.on=n.nativeOn,a(e.options.abstract)){var m=n.slot;n={},m&&(n.slot=m)}!function(e){for(var n=e.hook||(e.hook={}),t=0;t<$n.length;t++){var i=$n[t],r=n[i],o=Nn[i];r===o||r&&r._merged||(n[i]=r?Rn(o,r):o)}}(n);var g=e.options.name||c;return new fe("vue-component-"+e.cid+(g?"-"+g:""),n,void 0,void 0,void 0,t,{Ctor:e,propsData:h,listeners:f,tag:c,children:s},d)}}}function Rn(e,n){var t=function(t,i){e(t,i),n(t,i)};return t._merged=!0,t}function Bn(e,n,t,i,c,u){return(Array.isArray(t)||s(t))&&(c=i,i=t,t=void 0),a(u)&&(c=2),function(e,n,t,i,s){if(o(t)&&o(t.__ob__))return ge();o(t)&&o(t.is)&&(n=t.is);if(!n)return ge();0;Array.isArray(i)&&"function"==typeof i[0]&&((t=t||{}).scopedSlots={default:i[0]},i.length=0);2===s?i=un(i):1===s&&(i=function(e){for(var n=0;n<e.length;n++)if(Array.isArray(e[n]))return Array.prototype.concat.apply([],e);return e}(i));var c,u;if("string"==typeof n){var d;u=e.$vnode&&e.$vnode.ns||R.getTagNamespace(n),c=R.isReservedTag(n)?new fe(R.parsePlatformTagName(n),t,i,void 0,void 0,e):t&&t.pre||!o(d=$e(e.$options,"components",n))?new fe(n,t,i,void 0,void 0,e):Fn(d,t,e,i,n)}else c=Fn(n,t,e,i);return Array.isArray(c)?c:o(c)?(o(u)&&function e(n,t,i){n.ns=t,"foreignObject"===n.tag&&(t=void 0,i=!0);if(o(n.children))for(var s=0,l=n.children.length;s<l;s++){var c=n.children[s];o(c.tag)&&(r(c.ns)||a(i)&&"svg"!==c.tag)&&e(c,t,i)}}(c,u),o(t)&&function(e){l(e.style)&&rn(e.style);l(e.class)&&rn(e.class)}(t),c):ge()}(e,n,t,i,c)}var Vn,zn=null;function qn(e,n){return(e.__esModule||se&&"Module"===e[Symbol.toStringTag])&&(e=e.default),l(e)?n.extend(e):e}function Hn(e){return e.isComment&&e.asyncFactory}function Wn(e){if(Array.isArray(e))for(var n=0;n<e.length;n++){var t=e[n];if(o(t)&&(o(t.componentOptions)||Hn(t)))return t}}function Un(e,n){Vn.$on(e,n)}function Jn(e,n){Vn.$off(e,n)}function Yn(e,n){var t=Vn;return function i(){var r=n.apply(null,arguments);null!==r&&t.$off(e,i)}}function Gn(e,n,t){Vn=e,sn(n,t||{},Un,Jn,Yn,e),Vn=void 0}var Kn=null;function Xn(e){var n=Kn;return Kn=e,function(){Kn=n}}function Qn(e){for(;e&&(e=e.$parent);)if(e._inactive)return!0;return!1}function Zn(e,n){if(n){if(e._directInactive=!1,Qn(e))return}else if(e._directInactive)return;if(e._inactive||null===e._inactive){e._inactive=!1;for(var t=0;t<e.$children.length;t++)Zn(e.$children[t]);et(e,"activated")}}function et(e,n){he();var t=e.$options[n],i=n+" hook";if(t)for(var r=0,o=t.length;r<o;r++)qe(t[r],e,null,e,i);e._hasHookEvent&&e.$emit("hook:"+n),pe()}var nt=[],tt=[],it={},rt=!1,ot=!1,at=0;var st=0,lt=Date.now;if(W&&!G){var ct=window.performance;ct&&"function"==typeof ct.now&&lt()>document.createEvent("Event").timeStamp&&(lt=function(){return ct.now()})}function ut(){var e,n;for(st=lt(),ot=!0,nt.sort((function(e,n){return e.id-n.id})),at=0;at<nt.length;at++)(e=nt[at]).before&&e.before(),n=e.id,it[n]=null,e.run();var t=tt.slice(),i=nt.slice();at=nt.length=tt.length=0,it={},rt=ot=!1,function(e){for(var n=0;n<e.length;n++)e[n]._inactive=!0,Zn(e[n],!0)}(t),function(e){var n=e.length;for(;n--;){var t=e[n],i=t.vm;i._watcher===t&&i._isMounted&&!i._isDestroyed&&et(i,"updated")}}(i),re&&R.devtools&&re.emit("flush")}var dt=0,ht=function(e,n,t,i,r){this.vm=e,r&&(e._watcher=this),e._watchers.push(this),i?(this.deep=!!i.deep,this.user=!!i.user,this.lazy=!!i.lazy,this.sync=!!i.sync,this.before=i.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=t,this.id=++dt,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new ae,this.newDepIds=new ae,this.expression="","function"==typeof n?this.getter=n:(this.getter=function(e){if(!z.test(e)){var n=e.split(".");return function(e){for(var t=0;t<n.length;t++){if(!e)return;e=e[n[t]]}return e}}}(n),this.getter||(this.getter=j)),this.value=this.lazy?void 0:this.get()};ht.prototype.get=function(){var e;he(this);var n=this.vm;try{e=this.getter.call(n,n)}catch(e){if(!this.user)throw e;ze(e,n,'getter for watcher "'+this.expression+'"')}finally{this.deep&&rn(e),pe(),this.cleanupDeps()}return e},ht.prototype.addDep=function(e){var n=e.id;this.newDepIds.has(n)||(this.newDepIds.add(n),this.newDeps.push(e),this.depIds.has(n)||e.addSub(this))},ht.prototype.cleanupDeps=function(){for(var e=this.deps.length;e--;){var n=this.deps[e];this.newDepIds.has(n.id)||n.removeSub(this)}var t=this.depIds;this.depIds=this.newDepIds,this.newDepIds=t,this.newDepIds.clear(),t=this.deps,this.deps=this.newDeps,this.newDeps=t,this.newDeps.length=0},ht.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():function(e){var n=e.id;if(null==it[n]){if(it[n]=!0,ot){for(var t=nt.length-1;t>at&&nt[t].id>e.id;)t--;nt.splice(t+1,0,e)}else nt.push(e);rt||(rt=!0,nn(ut))}}(this)},ht.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||l(e)||this.deep){var n=this.value;if(this.value=e,this.user)try{this.cb.call(this.vm,e,n)}catch(e){ze(e,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,e,n)}}},ht.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},ht.prototype.depend=function(){for(var e=this.deps.length;e--;)this.deps[e].depend()},ht.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||b(this.vm._watchers,this);for(var e=this.deps.length;e--;)this.deps[e].removeSub(this);this.active=!1}};var pt={enumerable:!0,configurable:!0,get:j,set:j};function ft(e,n,t){pt.get=function(){return this[n][t]},pt.set=function(e){this[n][t]=e},Object.defineProperty(e,t,pt)}function mt(e){e._watchers=[];var n=e.$options;n.props&&function(e,n){var t=e.$options.propsData||{},i=e._props={},r=e.$options._propKeys=[];e.$parent&&Se(!1);var o=function(o){r.push(o);var a=Fe(o,n,t,e);Ee(i,o,a),o in e||ft(e,"_props",o)};for(var a in n)o(a);Se(!0)}(e,n.props),n.methods&&function(e,n){e.$options.props;for(var t in n)e[t]="function"!=typeof n[t]?j:T(n[t],e)}(e,n.methods),n.data?function(e){var n=e.$options.data;u(n=e._data="function"==typeof n?function(e,n){he();try{return e.call(n,n)}catch(e){return ze(e,n,"data()"),{}}finally{pe()}}(n,e):n||{})||(n={});var t=Object.keys(n),i=e.$options.props,r=(e.$options.methods,t.length);for(;r--;){var o=t[r];0,i&&w(i,o)||(a=void 0,36!==(a=(o+"").charCodeAt(0))&&95!==a&&ft(e,"_data",o))}var a;Ce(n,!0)}(e):Ce(e._data={},!0),n.computed&&function(e,n){var t=e._computedWatchers=Object.create(null),i=ie();for(var r in n){var o=n[r],a="function"==typeof o?o:o.get;0,i||(t[r]=new ht(e,a||j,j,gt)),r in e||vt(e,r,o)}}(e,n.computed),n.watch&&n.watch!==ee&&function(e,n){for(var t in n){var i=n[t];if(Array.isArray(i))for(var r=0;r<i.length;r++)wt(e,t,i[r]);else wt(e,t,i)}}(e,n.watch)}var gt={lazy:!0};function vt(e,n,t){var i=!ie();"function"==typeof t?(pt.get=i?bt(n):yt(t),pt.set=j):(pt.get=t.get?i&&!1!==t.cache?bt(n):yt(t.get):j,pt.set=t.set||j),Object.defineProperty(e,n,pt)}function bt(e){return function(){var n=this._computedWatchers&&this._computedWatchers[e];if(n)return n.dirty&&n.evaluate(),ue.target&&n.depend(),n.value}}function yt(e){return function(){return e.call(this,this)}}function wt(e,n,t,i){return u(t)&&(i=t,t=t.handler),"string"==typeof t&&(t=e[t]),e.$watch(n,t,i)}var xt=0;function _t(e){var n=e.options;if(e.super){var t=_t(e.super);if(t!==e.superOptions){e.superOptions=t;var i=function(e){var n,t=e.options,i=e.sealedOptions;for(var r in t)t[r]!==i[r]&&(n||(n={}),n[r]=t[r]);return n}(e);i&&O(e.extendOptions,i),(n=e.options=Ne(t,e.extendOptions)).name&&(n.components[n.name]=e)}}return n}function St(e){this._init(e)}function kt(e){e.cid=0;var n=1;e.extend=function(e){e=e||{};var t=this,i=t.cid,r=e._Ctor||(e._Ctor={});if(r[i])return r[i];var o=e.name||t.options.name;var a=function(e){this._init(e)};return(a.prototype=Object.create(t.prototype)).constructor=a,a.cid=n++,a.options=Ne(t.options,e),a.super=t,a.options.props&&function(e){var n=e.options.props;for(var t in n)ft(e.prototype,"_props",t)}(a),a.options.computed&&function(e){var n=e.options.computed;for(var t in n)vt(e.prototype,t,n[t])}(a),a.extend=t.extend,a.mixin=t.mixin,a.use=t.use,$.forEach((function(e){a[e]=t[e]})),o&&(a.options.components[o]=a),a.superOptions=t.options,a.extendOptions=e,a.sealedOptions=O({},a.options),r[i]=a,a}}function Ct(e){return e&&(e.Ctor.options.name||e.tag)}function Et(e,n){return Array.isArray(e)?e.indexOf(n)>-1:"string"==typeof e?e.split(",").indexOf(n)>-1:!!d(e)&&e.test(n)}function Tt(e,n){var t=e.cache,i=e.keys,r=e._vnode;for(var o in t){var a=t[o];if(a){var s=Ct(a.componentOptions);s&&!n(s)&&Pt(t,o,i,r)}}}function Pt(e,n,t,i){var r=e[n];!r||i&&r.tag===i.tag||r.componentInstance.$destroy(),e[n]=null,b(t,n)}!function(e){e.prototype._init=function(e){var n=this;n._uid=xt++,n._isVue=!0,e&&e._isComponent?function(e,n){var t=e.$options=Object.create(e.constructor.options),i=n._parentVnode;t.parent=n.parent,t._parentVnode=i;var r=i.componentOptions;t.propsData=r.propsData,t._parentListeners=r.listeners,t._renderChildren=r.children,t._componentTag=r.tag,n.render&&(t.render=n.render,t.staticRenderFns=n.staticRenderFns)}(n,e):n.$options=Ne(_t(n.constructor),e||{},n),n._renderProxy=n,n._self=n,function(e){var n=e.$options,t=n.parent;if(t&&!n.abstract){for(;t.$options.abstract&&t.$parent;)t=t.$parent;t.$children.push(e)}e.$parent=t,e.$root=t?t.$root:e,e.$children=[],e.$refs={},e._watcher=null,e._inactive=null,e._directInactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}(n),function(e){e._events=Object.create(null),e._hasHookEvent=!1;var n=e.$options._parentListeners;n&&Gn(e,n)}(n),function(e){e._vnode=null,e._staticTrees=null;var n=e.$options,t=e.$vnode=n._parentVnode,r=t&&t.context;e.$slots=pn(n._renderChildren,r),e.$scopedSlots=i,e._c=function(n,t,i,r){return Bn(e,n,t,i,r,!1)},e.$createElement=function(n,t,i,r){return Bn(e,n,t,i,r,!0)};var o=t&&t.data;Ee(e,"$attrs",o&&o.attrs||i,null,!0),Ee(e,"$listeners",n._parentListeners||i,null,!0)}(n),et(n,"beforeCreate"),function(e){var n=hn(e.$options.inject,e);n&&(Se(!1),Object.keys(n).forEach((function(t){Ee(e,t,n[t])})),Se(!0))}(n),mt(n),function(e){var n=e.$options.provide;n&&(e._provided="function"==typeof n?n.call(e):n)}(n),et(n,"created"),n.$options.el&&n.$mount(n.$options.el)}}(St),function(e){var n={get:function(){return this._data}},t={get:function(){return this._props}};Object.defineProperty(e.prototype,"$data",n),Object.defineProperty(e.prototype,"$props",t),e.prototype.$set=Te,e.prototype.$delete=Pe,e.prototype.$watch=function(e,n,t){if(u(n))return wt(this,e,n,t);(t=t||{}).user=!0;var i=new ht(this,e,n,t);if(t.immediate)try{n.call(this,i.value)}catch(e){ze(e,this,'callback for immediate watcher "'+i.expression+'"')}return function(){i.teardown()}}}(St),function(e){var n=/^hook:/;e.prototype.$on=function(e,t){var i=this;if(Array.isArray(e))for(var r=0,o=e.length;r<o;r++)i.$on(e[r],t);else(i._events[e]||(i._events[e]=[])).push(t),n.test(e)&&(i._hasHookEvent=!0);return i},e.prototype.$once=function(e,n){var t=this;function i(){t.$off(e,i),n.apply(t,arguments)}return i.fn=n,t.$on(e,i),t},e.prototype.$off=function(e,n){var t=this;if(!arguments.length)return t._events=Object.create(null),t;if(Array.isArray(e)){for(var i=0,r=e.length;i<r;i++)t.$off(e[i],n);return t}var o,a=t._events[e];if(!a)return t;if(!n)return t._events[e]=null,t;for(var s=a.length;s--;)if((o=a[s])===n||o.fn===n){a.splice(s,1);break}return t},e.prototype.$emit=function(e){var n=this,t=n._events[e];if(t){t=t.length>1?P(t):t;for(var i=P(arguments,1),r='event handler for "'+e+'"',o=0,a=t.length;o<a;o++)qe(t[o],n,i,n,r)}return n}}(St),function(e){e.prototype._update=function(e,n){var t=this,i=t.$el,r=t._vnode,o=Xn(t);t._vnode=e,t.$el=r?t.__patch__(r,e):t.__patch__(t.$el,e,n,!1),o(),i&&(i.__vue__=null),t.$el&&(t.$el.__vue__=t),t.$vnode&&t.$parent&&t.$vnode===t.$parent._vnode&&(t.$parent.$el=t.$el)},e.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},e.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){et(e,"beforeDestroy"),e._isBeingDestroyed=!0;var n=e.$parent;!n||n._isBeingDestroyed||e.$options.abstract||b(n.$children,e),e._watcher&&e._watcher.teardown();for(var t=e._watchers.length;t--;)e._watchers[t].teardown();e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,e.__patch__(e._vnode,null),et(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.$vnode&&(e.$vnode.parent=null)}}}(St),function(e){In(e.prototype),e.prototype.$nextTick=function(e){return nn(e,this)},e.prototype._render=function(){var e,n=this,t=n.$options,i=t.render,r=t._parentVnode;r&&(n.$scopedSlots=mn(r.data.scopedSlots,n.$slots,n.$scopedSlots)),n.$vnode=r;try{zn=n,e=i.call(n._renderProxy,n.$createElement)}catch(t){ze(t,n,"render"),e=n._vnode}finally{zn=null}return Array.isArray(e)&&1===e.length&&(e=e[0]),e instanceof fe||(e=ge()),e.parent=r,e}}(St);var Ot=[String,RegExp,Array],At={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:Ot,exclude:Ot,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var e in this.cache)Pt(this.cache,e,this.keys)},mounted:function(){var e=this;this.$watch("include",(function(n){Tt(e,(function(e){return Et(n,e)}))})),this.$watch("exclude",(function(n){Tt(e,(function(e){return!Et(n,e)}))}))},render:function(){var e=this.$slots.default,n=Wn(e),t=n&&n.componentOptions;if(t){var i=Ct(t),r=this.include,o=this.exclude;if(r&&(!i||!Et(r,i))||o&&i&&Et(o,i))return n;var a=this.cache,s=this.keys,l=null==n.key?t.Ctor.cid+(t.tag?"::"+t.tag:""):n.key;a[l]?(n.componentInstance=a[l].componentInstance,b(s,l),s.push(l)):(a[l]=n,s.push(l),this.max&&s.length>parseInt(this.max)&&Pt(a,s[0],s,this._vnode)),n.data.keepAlive=!0}return n||e&&e[0]}}};!function(e){var n={get:function(){return R}};Object.defineProperty(e,"config",n),e.util={warn:le,extend:O,mergeOptions:Ne,defineReactive:Ee},e.set=Te,e.delete=Pe,e.nextTick=nn,e.observable=function(e){return Ce(e),e},e.options=Object.create(null),$.forEach((function(n){e.options[n+"s"]=Object.create(null)})),e.options._base=e,O(e.options.components,At),function(e){e.use=function(e){var n=this._installedPlugins||(this._installedPlugins=[]);if(n.indexOf(e)>-1)return this;var t=P(arguments,1);return t.unshift(this),"function"==typeof e.install?e.install.apply(e,t):"function"==typeof e&&e.apply(null,t),n.push(e),this}}(e),function(e){e.mixin=function(e){return this.options=Ne(this.options,e),this}}(e),kt(e),function(e){$.forEach((function(n){e[n]=function(e,t){return t?("component"===n&&u(t)&&(t.name=t.name||e,t=this.options._base.extend(t)),"directive"===n&&"function"==typeof t&&(t={bind:t,update:t}),this.options[n+"s"][e]=t,t):this.options[n+"s"][e]}}))}(e)}(St),Object.defineProperty(St.prototype,"$isServer",{get:ie}),Object.defineProperty(St.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(St,"FunctionalRenderContext",{value:Dn}),St.version="2.6.12";var jt=g("style,class"),It=g("input,textarea,option,select,progress"),Dt=g("contenteditable,draggable,spellcheck"),Mt=g("events,caret,typing,plaintext-only"),Lt=g("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),Nt="http://www.w3.org/1999/xlink",$t=function(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)},Ft=function(e){return $t(e)?e.slice(6,e.length):""},Rt=function(e){return null==e||!1===e};function Bt(e){for(var n=e.data,t=e,i=e;o(i.componentInstance);)(i=i.componentInstance._vnode)&&i.data&&(n=Vt(i.data,n));for(;o(t=t.parent);)t&&t.data&&(n=Vt(n,t.data));return function(e,n){if(o(e)||o(n))return zt(e,qt(n));return""}(n.staticClass,n.class)}function Vt(e,n){return{staticClass:zt(e.staticClass,n.staticClass),class:o(e.class)?[e.class,n.class]:n.class}}function zt(e,n){return e?n?e+" "+n:e:n||""}function qt(e){return Array.isArray(e)?function(e){for(var n,t="",i=0,r=e.length;i<r;i++)o(n=qt(e[i]))&&""!==n&&(t&&(t+=" "),t+=n);return t}(e):l(e)?function(e){var n="";for(var t in e)e[t]&&(n&&(n+=" "),n+=t);return n}(e):"string"==typeof e?e:""}var Ht={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},Wt=g("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),Ut=g("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),Jt=function(e){return Wt(e)||Ut(e)};var Yt=Object.create(null);var Gt=g("text,number,password,search,email,tel,url");var Kt=Object.freeze({createElement:function(e,n){var t=document.createElement(e);return"select"!==e||n.data&&n.data.attrs&&void 0!==n.data.attrs.multiple&&t.setAttribute("multiple","multiple"),t},createElementNS:function(e,n){return document.createElementNS(Ht[e],n)},createTextNode:function(e){return document.createTextNode(e)},createComment:function(e){return document.createComment(e)},insertBefore:function(e,n,t){e.insertBefore(n,t)},removeChild:function(e,n){e.removeChild(n)},appendChild:function(e,n){e.appendChild(n)},parentNode:function(e){return e.parentNode},nextSibling:function(e){return e.nextSibling},tagName:function(e){return e.tagName},setTextContent:function(e,n){e.textContent=n},setStyleScope:function(e,n){e.setAttribute(n,"")}}),Xt={create:function(e,n){Qt(n)},update:function(e,n){e.data.ref!==n.data.ref&&(Qt(e,!0),Qt(n))},destroy:function(e){Qt(e,!0)}};function Qt(e,n){var t=e.data.ref;if(o(t)){var i=e.context,r=e.componentInstance||e.elm,a=i.$refs;n?Array.isArray(a[t])?b(a[t],r):a[t]===r&&(a[t]=void 0):e.data.refInFor?Array.isArray(a[t])?a[t].indexOf(r)<0&&a[t].push(r):a[t]=[r]:a[t]=r}}var Zt=new fe("",{},[]),ei=["create","activate","update","remove","destroy"];function ni(e,n){return e.key===n.key&&(e.tag===n.tag&&e.isComment===n.isComment&&o(e.data)===o(n.data)&&function(e,n){if("input"!==e.tag)return!0;var t,i=o(t=e.data)&&o(t=t.attrs)&&t.type,r=o(t=n.data)&&o(t=t.attrs)&&t.type;return i===r||Gt(i)&&Gt(r)}(e,n)||a(e.isAsyncPlaceholder)&&e.asyncFactory===n.asyncFactory&&r(n.asyncFactory.error))}function ti(e,n,t){var i,r,a={};for(i=n;i<=t;++i)o(r=e[i].key)&&(a[r]=i);return a}var ii={create:ri,update:ri,destroy:function(e){ri(e,Zt)}};function ri(e,n){(e.data.directives||n.data.directives)&&function(e,n){var t,i,r,o=e===Zt,a=n===Zt,s=ai(e.data.directives,e.context),l=ai(n.data.directives,n.context),c=[],u=[];for(t in l)i=s[t],r=l[t],i?(r.oldValue=i.value,r.oldArg=i.arg,li(r,"update",n,e),r.def&&r.def.componentUpdated&&u.push(r)):(li(r,"bind",n,e),r.def&&r.def.inserted&&c.push(r));if(c.length){var d=function(){for(var t=0;t<c.length;t++)li(c[t],"inserted",n,e)};o?ln(n,"insert",d):d()}u.length&&ln(n,"postpatch",(function(){for(var t=0;t<u.length;t++)li(u[t],"componentUpdated",n,e)}));if(!o)for(t in s)l[t]||li(s[t],"unbind",e,e,a)}(e,n)}var oi=Object.create(null);function ai(e,n){var t,i,r=Object.create(null);if(!e)return r;for(t=0;t<e.length;t++)(i=e[t]).modifiers||(i.modifiers=oi),r[si(i)]=i,i.def=$e(n.$options,"directives",i.name);return r}function si(e){return e.rawName||e.name+"."+Object.keys(e.modifiers||{}).join(".")}function li(e,n,t,i,r){var o=e.def&&e.def[n];if(o)try{o(t.elm,e,t,i,r)}catch(i){ze(i,t.context,"directive "+e.name+" "+n+" hook")}}var ci=[Xt,ii];function ui(e,n){var t=n.componentOptions;if(!(o(t)&&!1===t.Ctor.options.inheritAttrs||r(e.data.attrs)&&r(n.data.attrs))){var i,a,s=n.elm,l=e.data.attrs||{},c=n.data.attrs||{};for(i in o(c.__ob__)&&(c=n.data.attrs=O({},c)),c)a=c[i],l[i]!==a&&di(s,i,a);for(i in(G||X)&&c.value!==l.value&&di(s,"value",c.value),l)r(c[i])&&($t(i)?s.removeAttributeNS(Nt,Ft(i)):Dt(i)||s.removeAttribute(i))}}function di(e,n,t){e.tagName.indexOf("-")>-1?hi(e,n,t):Lt(n)?Rt(t)?e.removeAttribute(n):(t="allowfullscreen"===n&&"EMBED"===e.tagName?"true":n,e.setAttribute(n,t)):Dt(n)?e.setAttribute(n,function(e,n){return Rt(n)||"false"===n?"false":"contenteditable"===e&&Mt(n)?n:"true"}(n,t)):$t(n)?Rt(t)?e.removeAttributeNS(Nt,Ft(n)):e.setAttributeNS(Nt,n,t):hi(e,n,t)}function hi(e,n,t){if(Rt(t))e.removeAttribute(n);else{if(G&&!K&&"TEXTAREA"===e.tagName&&"placeholder"===n&&""!==t&&!e.__ieph){var i=function(n){n.stopImmediatePropagation(),e.removeEventListener("input",i)};e.addEventListener("input",i),e.__ieph=!0}e.setAttribute(n,t)}}var pi={create:ui,update:ui};function fi(e,n){var t=n.elm,i=n.data,a=e.data;if(!(r(i.staticClass)&&r(i.class)&&(r(a)||r(a.staticClass)&&r(a.class)))){var s=Bt(n),l=t._transitionClasses;o(l)&&(s=zt(s,qt(l))),s!==t._prevClass&&(t.setAttribute("class",s),t._prevClass=s)}}var mi,gi={create:fi,update:fi};function vi(e,n,t){var i=mi;return function r(){var o=n.apply(null,arguments);null!==o&&wi(e,r,t,i)}}var bi=Je&&!(Z&&Number(Z[1])<=53);function yi(e,n,t,i){if(bi){var r=st,o=n;n=o._wrapper=function(e){if(e.target===e.currentTarget||e.timeStamp>=r||e.timeStamp<=0||e.target.ownerDocument!==document)return o.apply(this,arguments)}}mi.addEventListener(e,n,ne?{capture:t,passive:i}:t)}function wi(e,n,t,i){(i||mi).removeEventListener(e,n._wrapper||n,t)}function xi(e,n){if(!r(e.data.on)||!r(n.data.on)){var t=n.data.on||{},i=e.data.on||{};mi=n.elm,function(e){if(o(e.__r)){var n=G?"change":"input";e[n]=[].concat(e.__r,e[n]||[]),delete e.__r}o(e.__c)&&(e.change=[].concat(e.__c,e.change||[]),delete e.__c)}(t),sn(t,i,yi,wi,vi,n.context),mi=void 0}}var _i,Si={create:xi,update:xi};function ki(e,n){if(!r(e.data.domProps)||!r(n.data.domProps)){var t,i,a=n.elm,s=e.data.domProps||{},l=n.data.domProps||{};for(t in o(l.__ob__)&&(l=n.data.domProps=O({},l)),s)t in l||(a[t]="");for(t in l){if(i=l[t],"textContent"===t||"innerHTML"===t){if(n.children&&(n.children.length=0),i===s[t])continue;1===a.childNodes.length&&a.removeChild(a.childNodes[0])}if("value"===t&&"PROGRESS"!==a.tagName){a._value=i;var c=r(i)?"":String(i);Ci(a,c)&&(a.value=c)}else if("innerHTML"===t&&Ut(a.tagName)&&r(a.innerHTML)){(_i=_i||document.createElement("div")).innerHTML="<svg>"+i+"</svg>";for(var u=_i.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;u.firstChild;)a.appendChild(u.firstChild)}else if(i!==s[t])try{a[t]=i}catch(e){}}}}function Ci(e,n){return!e.composing&&("OPTION"===e.tagName||function(e,n){var t=!0;try{t=document.activeElement!==e}catch(e){}return t&&e.value!==n}(e,n)||function(e,n){var t=e.value,i=e._vModifiers;if(o(i)){if(i.number)return m(t)!==m(n);if(i.trim)return t.trim()!==n.trim()}return t!==n}(e,n))}var Ei={create:ki,update:ki},Ti=x((function(e){var n={},t=/:(.+)/;return e.split(/;(?![^(]*\))/g).forEach((function(e){if(e){var i=e.split(t);i.length>1&&(n[i[0].trim()]=i[1].trim())}})),n}));function Pi(e){var n=Oi(e.style);return e.staticStyle?O(e.staticStyle,n):n}function Oi(e){return Array.isArray(e)?A(e):"string"==typeof e?Ti(e):e}var Ai,ji=/^--/,Ii=/\s*!important$/,Di=function(e,n,t){if(ji.test(n))e.style.setProperty(n,t);else if(Ii.test(t))e.style.setProperty(E(n),t.replace(Ii,""),"important");else{var i=Li(n);if(Array.isArray(t))for(var r=0,o=t.length;r<o;r++)e.style[i]=t[r];else e.style[i]=t}},Mi=["Webkit","Moz","ms"],Li=x((function(e){if(Ai=Ai||document.createElement("div").style,"filter"!==(e=S(e))&&e in Ai)return e;for(var n=e.charAt(0).toUpperCase()+e.slice(1),t=0;t<Mi.length;t++){var i=Mi[t]+n;if(i in Ai)return i}}));function Ni(e,n){var t=n.data,i=e.data;if(!(r(t.staticStyle)&&r(t.style)&&r(i.staticStyle)&&r(i.style))){var a,s,l=n.elm,c=i.staticStyle,u=i.normalizedStyle||i.style||{},d=c||u,h=Oi(n.data.style)||{};n.data.normalizedStyle=o(h.__ob__)?O({},h):h;var p=function(e,n){var t,i={};if(n)for(var r=e;r.componentInstance;)(r=r.componentInstance._vnode)&&r.data&&(t=Pi(r.data))&&O(i,t);(t=Pi(e.data))&&O(i,t);for(var o=e;o=o.parent;)o.data&&(t=Pi(o.data))&&O(i,t);return i}(n,!0);for(s in d)r(p[s])&&Di(l,s,"");for(s in p)(a=p[s])!==d[s]&&Di(l,s,null==a?"":a)}}var $i={create:Ni,update:Ni},Fi=/\s+/;function Ri(e,n){if(n&&(n=n.trim()))if(e.classList)n.indexOf(" ")>-1?n.split(Fi).forEach((function(n){return e.classList.add(n)})):e.classList.add(n);else{var t=" "+(e.getAttribute("class")||"")+" ";t.indexOf(" "+n+" ")<0&&e.setAttribute("class",(t+n).trim())}}function Bi(e,n){if(n&&(n=n.trim()))if(e.classList)n.indexOf(" ")>-1?n.split(Fi).forEach((function(n){return e.classList.remove(n)})):e.classList.remove(n),e.classList.length||e.removeAttribute("class");else{for(var t=" "+(e.getAttribute("class")||"")+" ",i=" "+n+" ";t.indexOf(i)>=0;)t=t.replace(i," ");(t=t.trim())?e.setAttribute("class",t):e.removeAttribute("class")}}function Vi(e){if(e){if("object"==typeof e){var n={};return!1!==e.css&&O(n,zi(e.name||"v")),O(n,e),n}return"string"==typeof e?zi(e):void 0}}var zi=x((function(e){return{enterClass:e+"-enter",enterToClass:e+"-enter-to",enterActiveClass:e+"-enter-active",leaveClass:e+"-leave",leaveToClass:e+"-leave-to",leaveActiveClass:e+"-leave-active"}})),qi=W&&!K,Hi="transition",Wi="transitionend",Ui="animation",Ji="animationend";qi&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Hi="WebkitTransition",Wi="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Ui="WebkitAnimation",Ji="webkitAnimationEnd"));var Yi=W?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(e){return e()};function Gi(e){Yi((function(){Yi(e)}))}function Ki(e,n){var t=e._transitionClasses||(e._transitionClasses=[]);t.indexOf(n)<0&&(t.push(n),Ri(e,n))}function Xi(e,n){e._transitionClasses&&b(e._transitionClasses,n),Bi(e,n)}function Qi(e,n,t){var i=er(e,n),r=i.type,o=i.timeout,a=i.propCount;if(!r)return t();var s="transition"===r?Wi:Ji,l=0,c=function(){e.removeEventListener(s,u),t()},u=function(n){n.target===e&&++l>=a&&c()};setTimeout((function(){l<a&&c()}),o+1),e.addEventListener(s,u)}var Zi=/\b(transform|all)(,|$)/;function er(e,n){var t,i=window.getComputedStyle(e),r=(i[Hi+"Delay"]||"").split(", "),o=(i[Hi+"Duration"]||"").split(", "),a=nr(r,o),s=(i[Ui+"Delay"]||"").split(", "),l=(i[Ui+"Duration"]||"").split(", "),c=nr(s,l),u=0,d=0;return"transition"===n?a>0&&(t="transition",u=a,d=o.length):"animation"===n?c>0&&(t="animation",u=c,d=l.length):d=(t=(u=Math.max(a,c))>0?a>c?"transition":"animation":null)?"transition"===t?o.length:l.length:0,{type:t,timeout:u,propCount:d,hasTransform:"transition"===t&&Zi.test(i[Hi+"Property"])}}function nr(e,n){for(;e.length<n.length;)e=e.concat(e);return Math.max.apply(null,n.map((function(n,t){return tr(n)+tr(e[t])})))}function tr(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function ir(e,n){var t=e.elm;o(t._leaveCb)&&(t._leaveCb.cancelled=!0,t._leaveCb());var i=Vi(e.data.transition);if(!r(i)&&!o(t._enterCb)&&1===t.nodeType){for(var a=i.css,s=i.type,c=i.enterClass,u=i.enterToClass,d=i.enterActiveClass,h=i.appearClass,p=i.appearToClass,f=i.appearActiveClass,g=i.beforeEnter,v=i.enter,b=i.afterEnter,y=i.enterCancelled,w=i.beforeAppear,x=i.appear,_=i.afterAppear,S=i.appearCancelled,k=i.duration,C=Kn,E=Kn.$vnode;E&&E.parent;)C=E.context,E=E.parent;var T=!C._isMounted||!e.isRootInsert;if(!T||x||""===x){var P=T&&h?h:c,O=T&&f?f:d,A=T&&p?p:u,j=T&&w||g,I=T&&"function"==typeof x?x:v,D=T&&_||b,M=T&&S||y,L=m(l(k)?k.enter:k);0;var $=!1!==a&&!K,F=ar(I),R=t._enterCb=N((function(){$&&(Xi(t,A),Xi(t,O)),R.cancelled?($&&Xi(t,P),M&&M(t)):D&&D(t),t._enterCb=null}));e.data.show||ln(e,"insert",(function(){var n=t.parentNode,i=n&&n._pending&&n._pending[e.key];i&&i.tag===e.tag&&i.elm._leaveCb&&i.elm._leaveCb(),I&&I(t,R)})),j&&j(t),$&&(Ki(t,P),Ki(t,O),Gi((function(){Xi(t,P),R.cancelled||(Ki(t,A),F||(or(L)?setTimeout(R,L):Qi(t,s,R)))}))),e.data.show&&(n&&n(),I&&I(t,R)),$||F||R()}}}function rr(e,n){var t=e.elm;o(t._enterCb)&&(t._enterCb.cancelled=!0,t._enterCb());var i=Vi(e.data.transition);if(r(i)||1!==t.nodeType)return n();if(!o(t._leaveCb)){var a=i.css,s=i.type,c=i.leaveClass,u=i.leaveToClass,d=i.leaveActiveClass,h=i.beforeLeave,p=i.leave,f=i.afterLeave,g=i.leaveCancelled,v=i.delayLeave,b=i.duration,y=!1!==a&&!K,w=ar(p),x=m(l(b)?b.leave:b);0;var _=t._leaveCb=N((function(){t.parentNode&&t.parentNode._pending&&(t.parentNode._pending[e.key]=null),y&&(Xi(t,u),Xi(t,d)),_.cancelled?(y&&Xi(t,c),g&&g(t)):(n(),f&&f(t)),t._leaveCb=null}));v?v(S):S()}function S(){_.cancelled||(!e.data.show&&t.parentNode&&((t.parentNode._pending||(t.parentNode._pending={}))[e.key]=e),h&&h(t),y&&(Ki(t,c),Ki(t,d),Gi((function(){Xi(t,c),_.cancelled||(Ki(t,u),w||(or(x)?setTimeout(_,x):Qi(t,s,_)))}))),p&&p(t,_),y||w||_())}}function or(e){return"number"==typeof e&&!isNaN(e)}function ar(e){if(r(e))return!1;var n=e.fns;return o(n)?ar(Array.isArray(n)?n[0]:n):(e._length||e.length)>1}function sr(e,n){!0!==n.data.show&&ir(n)}var lr=function(e){var n,t,i={},l=e.modules,c=e.nodeOps;for(n=0;n<ei.length;++n)for(i[ei[n]]=[],t=0;t<l.length;++t)o(l[t][ei[n]])&&i[ei[n]].push(l[t][ei[n]]);function u(e){var n=c.parentNode(e);o(n)&&c.removeChild(n,e)}function d(e,n,t,r,s,l,u){if(o(e.elm)&&o(l)&&(e=l[u]=be(e)),e.isRootInsert=!s,!function(e,n,t,r){var s=e.data;if(o(s)){var l=o(e.componentInstance)&&s.keepAlive;if(o(s=s.hook)&&o(s=s.init)&&s(e,!1),o(e.componentInstance))return h(e,n),p(t,e.elm,r),a(l)&&function(e,n,t,r){var a,s=e;for(;s.componentInstance;)if(s=s.componentInstance._vnode,o(a=s.data)&&o(a=a.transition)){for(a=0;a<i.activate.length;++a)i.activate[a](Zt,s);n.push(s);break}p(t,e.elm,r)}(e,n,t,r),!0}}(e,n,t,r)){var d=e.data,m=e.children,g=e.tag;o(g)?(e.elm=e.ns?c.createElementNS(e.ns,g):c.createElement(g,e),b(e),f(e,m,n),o(d)&&v(e,n),p(t,e.elm,r)):a(e.isComment)?(e.elm=c.createComment(e.text),p(t,e.elm,r)):(e.elm=c.createTextNode(e.text),p(t,e.elm,r))}}function h(e,n){o(e.data.pendingInsert)&&(n.push.apply(n,e.data.pendingInsert),e.data.pendingInsert=null),e.elm=e.componentInstance.$el,m(e)?(v(e,n),b(e)):(Qt(e),n.push(e))}function p(e,n,t){o(e)&&(o(t)?c.parentNode(t)===e&&c.insertBefore(e,n,t):c.appendChild(e,n))}function f(e,n,t){if(Array.isArray(n)){0;for(var i=0;i<n.length;++i)d(n[i],t,e.elm,null,!0,n,i)}else s(e.text)&&c.appendChild(e.elm,c.createTextNode(String(e.text)))}function m(e){for(;e.componentInstance;)e=e.componentInstance._vnode;return o(e.tag)}function v(e,t){for(var r=0;r<i.create.length;++r)i.create[r](Zt,e);o(n=e.data.hook)&&(o(n.create)&&n.create(Zt,e),o(n.insert)&&t.push(e))}function b(e){var n;if(o(n=e.fnScopeId))c.setStyleScope(e.elm,n);else for(var t=e;t;)o(n=t.context)&&o(n=n.$options._scopeId)&&c.setStyleScope(e.elm,n),t=t.parent;o(n=Kn)&&n!==e.context&&n!==e.fnContext&&o(n=n.$options._scopeId)&&c.setStyleScope(e.elm,n)}function y(e,n,t,i,r,o){for(;i<=r;++i)d(t[i],o,e,n,!1,t,i)}function w(e){var n,t,r=e.data;if(o(r))for(o(n=r.hook)&&o(n=n.destroy)&&n(e),n=0;n<i.destroy.length;++n)i.destroy[n](e);if(o(n=e.children))for(t=0;t<e.children.length;++t)w(e.children[t])}function x(e,n,t){for(;n<=t;++n){var i=e[n];o(i)&&(o(i.tag)?(_(i),w(i)):u(i.elm))}}function _(e,n){if(o(n)||o(e.data)){var t,r=i.remove.length+1;for(o(n)?n.listeners+=r:n=function(e,n){function t(){0==--t.listeners&&u(e)}return t.listeners=n,t}(e.elm,r),o(t=e.componentInstance)&&o(t=t._vnode)&&o(t.data)&&_(t,n),t=0;t<i.remove.length;++t)i.remove[t](e,n);o(t=e.data.hook)&&o(t=t.remove)?t(e,n):n()}else u(e.elm)}function S(e,n,t,i){for(var r=t;r<i;r++){var a=n[r];if(o(a)&&ni(e,a))return r}}function k(e,n,t,s,l,u){if(e!==n){o(n.elm)&&o(s)&&(n=s[l]=be(n));var h=n.elm=e.elm;if(a(e.isAsyncPlaceholder))o(n.asyncFactory.resolved)?T(e.elm,n,t):n.isAsyncPlaceholder=!0;else if(a(n.isStatic)&&a(e.isStatic)&&n.key===e.key&&(a(n.isCloned)||a(n.isOnce)))n.componentInstance=e.componentInstance;else{var p,f=n.data;o(f)&&o(p=f.hook)&&o(p=p.prepatch)&&p(e,n);var g=e.children,v=n.children;if(o(f)&&m(n)){for(p=0;p<i.update.length;++p)i.update[p](e,n);o(p=f.hook)&&o(p=p.update)&&p(e,n)}r(n.text)?o(g)&&o(v)?g!==v&&function(e,n,t,i,a){var s,l,u,h=0,p=0,f=n.length-1,m=n[0],g=n[f],v=t.length-1,b=t[0],w=t[v],_=!a;for(0;h<=f&&p<=v;)r(m)?m=n[++h]:r(g)?g=n[--f]:ni(m,b)?(k(m,b,i,t,p),m=n[++h],b=t[++p]):ni(g,w)?(k(g,w,i,t,v),g=n[--f],w=t[--v]):ni(m,w)?(k(m,w,i,t,v),_&&c.insertBefore(e,m.elm,c.nextSibling(g.elm)),m=n[++h],w=t[--v]):ni(g,b)?(k(g,b,i,t,p),_&&c.insertBefore(e,g.elm,m.elm),g=n[--f],b=t[++p]):(r(s)&&(s=ti(n,h,f)),r(l=o(b.key)?s[b.key]:S(b,n,h,f))?d(b,i,e,m.elm,!1,t,p):ni(u=n[l],b)?(k(u,b,i,t,p),n[l]=void 0,_&&c.insertBefore(e,u.elm,m.elm)):d(b,i,e,m.elm,!1,t,p),b=t[++p]);h>f?y(e,r(t[v+1])?null:t[v+1].elm,t,p,v,i):p>v&&x(n,h,f)}(h,g,v,t,u):o(v)?(o(e.text)&&c.setTextContent(h,""),y(h,null,v,0,v.length-1,t)):o(g)?x(g,0,g.length-1):o(e.text)&&c.setTextContent(h,""):e.text!==n.text&&c.setTextContent(h,n.text),o(f)&&o(p=f.hook)&&o(p=p.postpatch)&&p(e,n)}}}function C(e,n,t){if(a(t)&&o(e.parent))e.parent.data.pendingInsert=n;else for(var i=0;i<n.length;++i)n[i].data.hook.insert(n[i])}var E=g("attrs,class,staticClass,staticStyle,key");function T(e,n,t,i){var r,s=n.tag,l=n.data,c=n.children;if(i=i||l&&l.pre,n.elm=e,a(n.isComment)&&o(n.asyncFactory))return n.isAsyncPlaceholder=!0,!0;if(o(l)&&(o(r=l.hook)&&o(r=r.init)&&r(n,!0),o(r=n.componentInstance)))return h(n,t),!0;if(o(s)){if(o(c))if(e.hasChildNodes())if(o(r=l)&&o(r=r.domProps)&&o(r=r.innerHTML)){if(r!==e.innerHTML)return!1}else{for(var u=!0,d=e.firstChild,p=0;p<c.length;p++){if(!d||!T(d,c[p],t,i)){u=!1;break}d=d.nextSibling}if(!u||d)return!1}else f(n,c,t);if(o(l)){var m=!1;for(var g in l)if(!E(g)){m=!0,v(n,t);break}!m&&l.class&&rn(l.class)}}else e.data!==n.text&&(e.data=n.text);return!0}return function(e,n,t,s){if(!r(n)){var l,u=!1,h=[];if(r(e))u=!0,d(n,h);else{var p=o(e.nodeType);if(!p&&ni(e,n))k(e,n,h,null,null,s);else{if(p){if(1===e.nodeType&&e.hasAttribute("data-server-rendered")&&(e.removeAttribute("data-server-rendered"),t=!0),a(t)&&T(e,n,h))return C(n,h,!0),e;l=e,e=new fe(c.tagName(l).toLowerCase(),{},[],void 0,l)}var f=e.elm,g=c.parentNode(f);if(d(n,h,f._leaveCb?null:g,c.nextSibling(f)),o(n.parent))for(var v=n.parent,b=m(n);v;){for(var y=0;y<i.destroy.length;++y)i.destroy[y](v);if(v.elm=n.elm,b){for(var _=0;_<i.create.length;++_)i.create[_](Zt,v);var S=v.data.hook.insert;if(S.merged)for(var E=1;E<S.fns.length;E++)S.fns[E]()}else Qt(v);v=v.parent}o(g)?x([e],0,0):o(e.tag)&&w(e)}}return C(n,h,u),n.elm}o(e)&&w(e)}}({nodeOps:Kt,modules:[pi,gi,Si,Ei,$i,W?{create:sr,activate:sr,remove:function(e,n){!0!==e.data.show?rr(e,n):n()}}:{}].concat(ci)});K&&document.addEventListener("selectionchange",(function(){var e=document.activeElement;e&&e.vmodel&&gr(e,"input")}));var cr={inserted:function(e,n,t,i){"select"===t.tag?(i.elm&&!i.elm._vOptions?ln(t,"postpatch",(function(){cr.componentUpdated(e,n,t)})):ur(e,n,t.context),e._vOptions=[].map.call(e.options,pr)):("textarea"===t.tag||Gt(e.type))&&(e._vModifiers=n.modifiers,n.modifiers.lazy||(e.addEventListener("compositionstart",fr),e.addEventListener("compositionend",mr),e.addEventListener("change",mr),K&&(e.vmodel=!0)))},componentUpdated:function(e,n,t){if("select"===t.tag){ur(e,n,t.context);var i=e._vOptions,r=e._vOptions=[].map.call(e.options,pr);if(r.some((function(e,n){return!M(e,i[n])})))(e.multiple?n.value.some((function(e){return hr(e,r)})):n.value!==n.oldValue&&hr(n.value,r))&&gr(e,"change")}}};function ur(e,n,t){dr(e,n,t),(G||X)&&setTimeout((function(){dr(e,n,t)}),0)}function dr(e,n,t){var i=n.value,r=e.multiple;if(!r||Array.isArray(i)){for(var o,a,s=0,l=e.options.length;s<l;s++)if(a=e.options[s],r)o=L(i,pr(a))>-1,a.selected!==o&&(a.selected=o);else if(M(pr(a),i))return void(e.selectedIndex!==s&&(e.selectedIndex=s));r||(e.selectedIndex=-1)}}function hr(e,n){return n.every((function(n){return!M(n,e)}))}function pr(e){return"_value"in e?e._value:e.value}function fr(e){e.target.composing=!0}function mr(e){e.target.composing&&(e.target.composing=!1,gr(e.target,"input"))}function gr(e,n){var t=document.createEvent("HTMLEvents");t.initEvent(n,!0,!0),e.dispatchEvent(t)}function vr(e){return!e.componentInstance||e.data&&e.data.transition?e:vr(e.componentInstance._vnode)}var br={model:cr,show:{bind:function(e,n,t){var i=n.value,r=(t=vr(t)).data&&t.data.transition,o=e.__vOriginalDisplay="none"===e.style.display?"":e.style.display;i&&r?(t.data.show=!0,ir(t,(function(){e.style.display=o}))):e.style.display=i?o:"none"},update:function(e,n,t){var i=n.value;!i!=!n.oldValue&&((t=vr(t)).data&&t.data.transition?(t.data.show=!0,i?ir(t,(function(){e.style.display=e.__vOriginalDisplay})):rr(t,(function(){e.style.display="none"}))):e.style.display=i?e.__vOriginalDisplay:"none")},unbind:function(e,n,t,i,r){r||(e.style.display=e.__vOriginalDisplay)}}},yr={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function wr(e){var n=e&&e.componentOptions;return n&&n.Ctor.options.abstract?wr(Wn(n.children)):e}function xr(e){var n={},t=e.$options;for(var i in t.propsData)n[i]=e[i];var r=t._parentListeners;for(var o in r)n[S(o)]=r[o];return n}function _r(e,n){if(/\d-keep-alive$/.test(n.tag))return e("keep-alive",{props:n.componentOptions.propsData})}var Sr=function(e){return e.tag||Hn(e)},kr=function(e){return"show"===e.name},Cr={name:"transition",props:yr,abstract:!0,render:function(e){var n=this,t=this.$slots.default;if(t&&(t=t.filter(Sr)).length){0;var i=this.mode;0;var r=t[0];if(function(e){for(;e=e.parent;)if(e.data.transition)return!0}(this.$vnode))return r;var o=wr(r);if(!o)return r;if(this._leaving)return _r(e,r);var a="__transition-"+this._uid+"-";o.key=null==o.key?o.isComment?a+"comment":a+o.tag:s(o.key)?0===String(o.key).indexOf(a)?o.key:a+o.key:o.key;var l=(o.data||(o.data={})).transition=xr(this),c=this._vnode,u=wr(c);if(o.data.directives&&o.data.directives.some(kr)&&(o.data.show=!0),u&&u.data&&!function(e,n){return n.key===e.key&&n.tag===e.tag}(o,u)&&!Hn(u)&&(!u.componentInstance||!u.componentInstance._vnode.isComment)){var d=u.data.transition=O({},l);if("out-in"===i)return this._leaving=!0,ln(d,"afterLeave",(function(){n._leaving=!1,n.$forceUpdate()})),_r(e,r);if("in-out"===i){if(Hn(o))return c;var h,p=function(){h()};ln(l,"afterEnter",p),ln(l,"enterCancelled",p),ln(d,"delayLeave",(function(e){h=e}))}}return r}}},Er=O({tag:String,moveClass:String},yr);function Tr(e){e.elm._moveCb&&e.elm._moveCb(),e.elm._enterCb&&e.elm._enterCb()}function Pr(e){e.data.newPos=e.elm.getBoundingClientRect()}function Or(e){var n=e.data.pos,t=e.data.newPos,i=n.left-t.left,r=n.top-t.top;if(i||r){e.data.moved=!0;var o=e.elm.style;o.transform=o.WebkitTransform="translate("+i+"px,"+r+"px)",o.transitionDuration="0s"}}delete Er.mode;var Ar={Transition:Cr,TransitionGroup:{props:Er,beforeMount:function(){var e=this,n=this._update;this._update=function(t,i){var r=Xn(e);e.__patch__(e._vnode,e.kept,!1,!0),e._vnode=e.kept,r(),n.call(e,t,i)}},render:function(e){for(var n=this.tag||this.$vnode.data.tag||"span",t=Object.create(null),i=this.prevChildren=this.children,r=this.$slots.default||[],o=this.children=[],a=xr(this),s=0;s<r.length;s++){var l=r[s];if(l.tag)if(null!=l.key&&0!==String(l.key).indexOf("__vlist"))o.push(l),t[l.key]=l,(l.data||(l.data={})).transition=a;else;}if(i){for(var c=[],u=[],d=0;d<i.length;d++){var h=i[d];h.data.transition=a,h.data.pos=h.elm.getBoundingClientRect(),t[h.key]?c.push(h):u.push(h)}this.kept=e(n,null,c),this.removed=u}return e(n,null,o)},updated:function(){var e=this.prevChildren,n=this.moveClass||(this.name||"v")+"-move";e.length&&this.hasMove(e[0].elm,n)&&(e.forEach(Tr),e.forEach(Pr),e.forEach(Or),this._reflow=document.body.offsetHeight,e.forEach((function(e){if(e.data.moved){var t=e.elm,i=t.style;Ki(t,n),i.transform=i.WebkitTransform=i.transitionDuration="",t.addEventListener(Wi,t._moveCb=function e(i){i&&i.target!==t||i&&!/transform$/.test(i.propertyName)||(t.removeEventListener(Wi,e),t._moveCb=null,Xi(t,n))})}})))},methods:{hasMove:function(e,n){if(!qi)return!1;if(this._hasMove)return this._hasMove;var t=e.cloneNode();e._transitionClasses&&e._transitionClasses.forEach((function(e){Bi(t,e)})),Ri(t,n),t.style.display="none",this.$el.appendChild(t);var i=er(t);return this.$el.removeChild(t),this._hasMove=i.hasTransform}}}};St.config.mustUseProp=function(e,n,t){return"value"===t&&It(e)&&"button"!==n||"selected"===t&&"option"===e||"checked"===t&&"input"===e||"muted"===t&&"video"===e},St.config.isReservedTag=Jt,St.config.isReservedAttr=jt,St.config.getTagNamespace=function(e){return Ut(e)?"svg":"math"===e?"math":void 0},St.config.isUnknownElement=function(e){if(!W)return!0;if(Jt(e))return!1;if(e=e.toLowerCase(),null!=Yt[e])return Yt[e];var n=document.createElement(e);return e.indexOf("-")>-1?Yt[e]=n.constructor===window.HTMLUnknownElement||n.constructor===window.HTMLElement:Yt[e]=/HTMLUnknownElement/.test(n.toString())},O(St.options.directives,br),O(St.options.components,Ar),St.prototype.__patch__=W?lr:j,St.prototype.$mount=function(e,n){return function(e,n,t){var i;return e.$el=n,e.$options.render||(e.$options.render=ge),et(e,"beforeMount"),i=function(){e._update(e._render(),t)},new ht(e,i,j,{before:function(){e._isMounted&&!e._isDestroyed&&et(e,"beforeUpdate")}},!0),t=!1,null==e.$vnode&&(e._isMounted=!0,et(e,"mounted")),e}(this,e=e&&W?function(e){if("string"==typeof e){var n=document.querySelector(e);return n||document.createElement("div")}return e}(e):void 0,n)},W&&setTimeout((function(){R.devtools&&re&&re.emit("init",St)}),0),n.default=St},function(e,n,t){var i=t(9),r=t(42).f,o=t(25),a=t(36),s=t(145),l=t(237),c=t(242);e.exports=function(e,n){var t,u,d,h,p,f=e.target,m=e.global,g=e.stat;if(t=m?i:g?i[f]||s(f,{}):(i[f]||{}).prototype)for(u in n){if(h=n[u],d=e.noTargetGet?(p=r(t,u))&&p.value:t[u],!c(m?u:f+(g?".":"#")+u,e.forced)&&void 0!==d){if(typeof h==typeof d)continue;l(h,d)}(e.sham||d&&d.sham)&&o(h,"sham",!0),a(t,u,h,e)}}},function(e,n){var t=function(e){return e&&e.Math==Math&&e};e.exports=t("object"==typeof globalThis&&globalThis)||t("object"==typeof window&&window)||t("object"==typeof self&&self)||t("object"==typeof global&&global)||function(){return this}()||Function("return this")()},function(e,n){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,n,t){var i=t(9),r=t(89),o=t(14),a=t(90),s=t(146),l=t(234),c=r("wks"),u=i.Symbol,d=l?u:u&&u.withoutSetter||a;e.exports=function(e){return o(c,e)&&(s||"string"==typeof c[e])||(s&&o(u,e)?c[e]=u[e]:c[e]=d("Symbol."+e)),c[e]}},function(e,n,t){"use strict";function i(e,n,t,i,r,o,a,s){var l,c="function"==typeof e?e.options:e;if(n&&(c.render=n,c.staticRenderFns=t,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,n){return l.call(n),u(e,n)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:c}}t.d(n,"a",(function(){return i}))},function(e,n){e.exports=function(e){return"function"==typeof e}},function(e,n){var t=function(e){return e&&e.Math==Math&&e};e.exports=t("object"==typeof globalThis&&globalThis)||t("object"==typeof window&&window)||t("object"==typeof self&&self)||t("object"==typeof global&&global)||function(){return this}()||Function("return this")()},function(e,n){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,n,t){var i=t(10);e.exports=function(e){if(!i(e))throw TypeError(String(e)+" is not an object");return e}},function(e,n,t){var i=t(5);e.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(e,n){var t=Function.prototype,i=t.bind,r=t.call,o=i&&i.bind(r);e.exports=i?function(e){return e&&o(r,e)}:function(e){return e&&function(){return r.apply(e,arguments)}}},function(e,n){var t={}.hasOwnProperty;e.exports=function(e,n){return t.call(e,n)}},function(e,n,t){var i=t(4),r=t(201),o=t(23),a=t(202),s=t(203),l=t(205),c=r("wks"),u=i.Symbol,d=u&&u.for,h=l?u:u&&u.withoutSetter||a;e.exports=function(e){if(!o(c,e)||!s&&"string"!=typeof c[e]){var n="Symbol."+e;s&&o(u,e)?c[e]=u[e]:c[e]=l&&d?d(n):h(n)}return c[e]}},function(e,n,t){var i=t(12),r=t(229),o=t(11),a=t(68),s=Object.defineProperty;n.f=i?s:function(e,n,t){if(o(e),n=a(n,!0),o(t),r)try{return s(e,n,t)}catch(e){}if("get"in t||"set"in t)throw TypeError("Accessors not supported");return"value"in t&&(e[n]=t.value),e}},function(e,n,t){var i=t(143),r=t(36),o=t(373);i||r(Object.prototype,"toString",o,{unsafe:!0})},function(e,n,t){"use strict";n.__esModule=!0;var i=a(t(524)),r=a(t(536)),o="function"==typeof r.default&&"symbol"==typeof i.default?function(e){return typeof e}:function(e){return e&&"function"==typeof r.default&&e.constructor===r.default&&e!==r.default.prototype?"symbol":typeof e};function a(e){return e&&e.__esModule?e:{default:e}}n.default="function"==typeof r.default&&"symbol"===o(i.default)?function(e){return void 0===e?"undefined":o(e)}:function(e){return e&&"function"==typeof r.default&&e.constructor===r.default&&e!==r.default.prototype?"symbol":void 0===e?"undefined":o(e)}},function(e,n){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,n,t){var i=t(94),r=t(21);e.exports=function(e){return i(r(e))}},function(e,n){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},function(e,n,t){"use strict";var i=t(243).charAt,r=t(92),o=t(244),a=r.set,s=r.getterFor("String Iterator");o(String,"String",(function(e){a(this,{type:"String Iterator",string:String(e),index:0})}),(function(){var e,n=s(this),t=n.string,r=n.index;return r>=t.length?{value:void 0,done:!0}:(e=i(t,r),n.index+=e.length,{value:e,done:!1})}))},function(e,n,t){var i=t(13),r=t(129),o=i({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,n){return o(r(e),n)}},function(e,n,t){var i=t(4),r=t(40),o=i.String,a=i.TypeError;e.exports=function(e){if(r(e))return e;throw a(o(e)+" is not an object")}},function(e,n,t){var i=t(12),r=t(16),o=t(69);e.exports=i?function(e,n,t){return r.f(e,n,o(1,t))}:function(e,n,t){return e[n]=t,e}},function(e,n,t){var i=t(21);e.exports=function(e){return Object(i(e))}},function(e,n,t){"use strict";n.__esModule=!0,n.isEmpty=n.isEqual=n.arrayEquals=n.looseEqual=n.capitalize=n.kebabCase=n.autoprefixer=n.isFirefox=n.isEdge=n.isIE=n.coerceTruthyValueToArray=n.arrayFind=n.arrayFindIndex=n.escapeRegexpString=n.valueEquals=n.generateId=n.getValueByPath=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.noop=function(){},n.hasOwn=function(e,n){return l.call(e,n)},n.toObject=function(e){for(var n={},t=0;t<e.length;t++)e[t]&&c(n,e[t]);return n},n.getPropByPath=function(e,n,t){for(var i=e,r=(n=(n=n.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),o=0,a=r.length;o<a-1&&(i||t);++o){var s=r[o];if(!(s in i)){if(t)throw new Error("please transfer a valid prop path to form item!");break}i=i[s]}return{o:i,k:r[o],v:i?i[r[o]]:null}},n.rafThrottle=function(e){var n=!1;return function(){for(var t=this,i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];n||(n=!0,window.requestAnimationFrame((function(i){e.apply(t,r),n=!1})))}},n.objToArray=function(e){if(Array.isArray(e))return e;return p(e)?[]:[e]};var r,o=t(2),a=(r=o)&&r.__esModule?r:{default:r},s=t(290);var l=Object.prototype.hasOwnProperty;function c(e,n){for(var t in n)e[t]=n[t];return e}n.getValueByPath=function(e,n){for(var t=(n=n||"").split("."),i=e,r=null,o=0,a=t.length;o<a;o++){var s=t[o];if(!i)break;if(o===a-1){r=i[s];break}i=i[s]}return r};n.generateId=function(){return Math.floor(1e4*Math.random())},n.valueEquals=function(e,n){if(e===n)return!0;if(!(e instanceof Array))return!1;if(!(n instanceof Array))return!1;if(e.length!==n.length)return!1;for(var t=0;t!==e.length;++t)if(e[t]!==n[t])return!1;return!0},n.escapeRegexpString=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return String(e).replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")};var u=n.arrayFindIndex=function(e,n){for(var t=0;t!==e.length;++t)if(n(e[t]))return t;return-1},d=(n.arrayFind=function(e,n){var t=u(e,n);return-1!==t?e[t]:void 0},n.coerceTruthyValueToArray=function(e){return Array.isArray(e)?e:e?[e]:[]},n.isIE=function(){return!a.default.prototype.$isServer&&!isNaN(Number(document.documentMode))},n.isEdge=function(){return!a.default.prototype.$isServer&&navigator.userAgent.indexOf("Edge")>-1},n.isFirefox=function(){return!a.default.prototype.$isServer&&!!window.navigator.userAgent.match(/firefox/i)},n.autoprefixer=function(e){if("object"!==(void 0===e?"undefined":i(e)))return e;var n=["ms-","webkit-"];return["transform","transition","animation"].forEach((function(t){var i=e[t];t&&i&&n.forEach((function(n){e[n+t]=i}))})),e},n.kebabCase=function(e){var n=/([^-])([A-Z])/g;return e.replace(n,"$1-$2").replace(n,"$1-$2").toLowerCase()},n.capitalize=function(e){return(0,s.isString)(e)?e.charAt(0).toUpperCase()+e.slice(1):e},n.looseEqual=function(e,n){var t=(0,s.isObject)(e),i=(0,s.isObject)(n);return t&&i?JSON.stringify(e)===JSON.stringify(n):!t&&!i&&String(e)===String(n)}),h=n.arrayEquals=function(e,n){if(n=n||[],(e=e||[]).length!==n.length)return!1;for(var t=0;t<e.length;t++)if(!d(e[t],n[t]))return!1;return!0},p=(n.isEqual=function(e,n){return Array.isArray(e)&&Array.isArray(n)?h(e,n):d(e,n)},n.isEmpty=function(e){if(null==e)return!0;if("boolean"==typeof e)return!1;if("number"==typeof e)return!e;if(e instanceof Error)return""===e.message;switch(Object.prototype.toString.call(e)){case"[object String]":case"[object Array]":return!e.length;case"[object File]":case"[object Map]":case"[object Set]":return!e.size;case"[object Object]":return!Object.keys(e).length}return!1})},function(e,n,t){var i=t(96),r=Math.min;e.exports=function(e){return e>0?r(i(e),9007199254740991):0}},function(e,n,t){var i=t(9),r=t(248),o=t(377),a=t(25),s=t(6),l=s("iterator"),c=s("toStringTag"),u=o.values;for(var d in r){var h=i[d],p=h&&h.prototype;if(p){if(p[l]!==u)try{a(p,l,u)}catch(e){p[l]=u}if(p[c]||a(p,c,d),r[d])for(var f in o)if(p[f]!==o[f])try{a(p,f,o[f])}catch(e){p[f]=o[f]}}}},function(e,n){var t=Function.prototype.call;e.exports=t.bind?t.bind(t):function(){return t.apply(t,arguments)}},function(e,n,t){var i=t(266),r="object"==typeof self&&self&&self.Object===Object&&self,o=i||r||Function("return this")();e.exports=o},function(e,n){var t=Array.isArray;e.exports=t},function(e,n,t){"use strict";n.__esModule=!0,n.isInContainer=n.getScrollContainer=n.isScroll=n.getStyle=n.once=n.off=n.on=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.hasClass=p,n.addClass=function(e,n){if(!e)return;for(var t=e.className,i=(n||"").split(" "),r=0,o=i.length;r<o;r++){var a=i[r];a&&(e.classList?e.classList.add(a):p(e,a)||(t+=" "+a))}e.classList||(e.className=t)},n.removeClass=function(e,n){if(!e||!n)return;for(var t=n.split(" "),i=" "+e.className+" ",r=0,o=t.length;r<o;r++){var a=t[r];a&&(e.classList?e.classList.remove(a):p(e,a)&&(i=i.replace(" "+a+" "," ")))}e.classList||(e.className=(i||"").replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,""))},n.setStyle=function e(n,t,r){if(!n||!t)return;if("object"===(void 0===t?"undefined":i(t)))for(var o in t)t.hasOwnProperty(o)&&e(n,o,t[o]);else"opacity"===(t=u(t))&&c<9?n.style.filter=isNaN(r)?"":"alpha(opacity="+100*r+")":n.style[t]=r};var r,o=t(2);var a=((r=o)&&r.__esModule?r:{default:r}).default.prototype.$isServer,s=/([\:\-\_]+(.))/g,l=/^moz([A-Z])/,c=a?0:Number(document.documentMode),u=function(e){return e.replace(s,(function(e,n,t,i){return i?t.toUpperCase():t})).replace(l,"Moz$1")},d=n.on=!a&&document.addEventListener?function(e,n,t){e&&n&&t&&e.addEventListener(n,t,!1)}:function(e,n,t){e&&n&&t&&e.attachEvent("on"+n,t)},h=n.off=!a&&document.removeEventListener?function(e,n,t){e&&n&&e.removeEventListener(n,t,!1)}:function(e,n,t){e&&n&&e.detachEvent("on"+n,t)};n.once=function(e,n,t){d(e,n,(function i(){t&&t.apply(this,arguments),h(e,n,i)}))};function p(e,n){if(!e||!n)return!1;if(-1!==n.indexOf(" "))throw new Error("className should not contain space.");return e.classList?e.classList.contains(n):(" "+e.className+" ").indexOf(" "+n+" ")>-1}var f=n.getStyle=c<9?function(e,n){if(!a){if(!e||!n)return null;"float"===(n=u(n))&&(n="styleFloat");try{switch(n){case"opacity":try{return e.filters.item("alpha").opacity/100}catch(e){return 1}default:return e.style[n]||e.currentStyle?e.currentStyle[n]:null}}catch(t){return e.style[n]}}}:function(e,n){if(!a){if(!e||!n)return null;"float"===(n=u(n))&&(n="cssFloat");try{var t=document.defaultView.getComputedStyle(e,"");return e.style[n]||t?t[n]:null}catch(t){return e.style[n]}}};var m=n.isScroll=function(e,n){if(!a)return f(e,null!==n||void 0!==n?n?"overflow-y":"overflow-x":"overflow").match(/(scroll|auto)/)};n.getScrollContainer=function(e,n){if(!a){for(var t=e;t;){if([window,document,document.documentElement].includes(t))return window;if(m(t,n))return t;t=t.parentNode}return t}},n.isInContainer=function(e,n){if(a||!e||!n)return!1;var t=e.getBoundingClientRect(),i=void 0;return i=[window,document,document.documentElement,null,void 0].includes(n)?{top:0,right:window.innerWidth,bottom:window.innerHeight,left:0}:n.getBoundingClientRect(),t.top<i.bottom&&t.bottom>i.top&&t.right>i.left&&t.left<i.right}},function(e,n,t){var i=t(4),r=t(8),o=function(e){return r(e)?e:void 0};e.exports=function(e,n){return arguments.length<2?o(i[e]):i[e]&&i[e][n]}},function(e,n,t){var i=t(19);e.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(e,n,t){var i=t(9),r=t(25),o=t(14),a=t(145),s=t(235),l=t(92),c=l.get,u=l.enforce,d=String(String).split("String");(e.exports=function(e,n,t,s){var l,c=!!s&&!!s.unsafe,h=!!s&&!!s.enumerable,p=!!s&&!!s.noTargetGet;"function"==typeof t&&("string"!=typeof n||o(t,"name")||r(t,"name",n),(l=u(t)).source||(l.source=d.join("string"==typeof n?n:""))),e!==i?(c?!p&&e[n]&&(h=!0):delete e[n],h?e[n]=t:r(e,n,t)):h?e[n]=t:a(n,t)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||s(this)}))},function(e,n){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)},function(e,n,t){"use strict";t.d(n,"a",(function(){return o}));t(153);var i=t(81);t(56),t(74),t(17),t(102),t(22),t(29),t(261);var r=t(119);function o(e){return function(e){if(Array.isArray(e))return Object(i.a)(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(r.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,n,t){var i=t(249),r=t(94),o=t(26),a=t(28),s=t(250),l=[].push,c=function(e){var n=1==e,t=2==e,c=3==e,u=4==e,d=6==e,h=7==e,p=5==e||d;return function(f,m,g,v){for(var b,y,w=o(f),x=r(w),_=i(m,g,3),S=a(x.length),k=0,C=v||s,E=n?C(f,S):t||h?C(f,0):void 0;S>k;k++)if((p||k in x)&&(y=_(b=x[k],k,w),e))if(n)E[k]=y;else if(y)switch(e){case 3:return!0;case 5:return b;case 6:return k;case 2:l.call(E,b)}else switch(e){case 4:return!1;case 7:l.call(E,b)}return d?-1:c||u?u:E}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterOut:c(7)}},function(e,n,t){var i=t(8);e.exports=function(e){return"object"==typeof e?null!==e:i(e)}},function(e,n){var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},function(e,n,t){var i=t(12),r=t(147),o=t(69),a=t(20),s=t(68),l=t(14),c=t(229),u=Object.getOwnPropertyDescriptor;n.f=i?u:function(e,n){if(e=a(e),n=s(n,!0),c)try{return u(e,n)}catch(e){}if(l(e,n))return o(!r.f.call(e,n),e[n])}},function(e,n,t){"use strict";var i=t(5);e.exports=function(e,n){var t=[][e];return!!t&&i((function(){t.call(null,n||function(){throw 1},1)}))}},function(e,n,t){var i=t(407),r=t(410);e.exports=function(e,n){var t=r(e,n);return i(t)?t:void 0}},function(e,n,t){"use strict";function i(e,n,t){this.$children.forEach((function(r){r.$options.componentName===e?r.$emit.apply(r,[n].concat(t)):i.apply(r,[e,n].concat([t]))}))}n.__esModule=!0,n.default={methods:{dispatch:function(e,n,t){for(var i=this.$parent||this.$root,r=i.$options.componentName;i&&(!r||r!==e);)(i=i.$parent)&&(r=i.$options.componentName);i&&i.$emit.apply(i,[n].concat(t))},broadcast:function(e,n,t){i.call(this,e,n,t)}}}},function(e,n,t){e.exports=!t(79)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,n){var t={}.hasOwnProperty;e.exports=function(e,n){return t.call(e,n)}},function(e,n,t){"use strict";n.__esModule=!0;var i,r=t(515),o=(i=r)&&i.__esModule?i:{default:i};n.default=o.default||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}},function(e,n,t){"use strict";var i=t(3),r=t(39).filter;i({target:"Array",proto:!0,forced:!t(98)("filter")},{filter:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,n,t){"use strict";var i=t(3),r=t(10),o=t(72),a=t(240),s=t(28),l=t(20),c=t(97),u=t(6),d=t(98)("slice"),h=u("species"),p=[].slice,f=Math.max;i({target:"Array",proto:!0,forced:!d},{slice:function(e,n){var t,i,u,d=l(this),m=s(d.length),g=a(e,m),v=a(void 0===n?m:n,m);if(o(d)&&("function"!=typeof(t=d.constructor)||t!==Array&&!o(t.prototype)?r(t)&&null===(t=t[h])&&(t=void 0):t=void 0,t===Array||void 0===t))return p.call(d,g,v);for(i=new(void 0===t?Array:t)(f(v-g,0)),u=0;g<v;g++,u++)g in d&&c(i,u,d[g]);return i.length=u,i}})},function(e,n,t){"use strict";var i=t(3),r=t(39).map;i({target:"Array",proto:!0,forced:!t(98)("map")},{map:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,n,t){var i=t(4),r=t(35),o=t(206),a=t(24),s=t(207),l=i.TypeError,c=Object.defineProperty;n.f=r?c:function(e,n,t){if(a(e),n=s(n),a(t),o)try{return c(e,n,t)}catch(e){}if("get"in t||"set"in t)throw l("Accessors not supported");return"value"in t&&(e[n]=t.value),e}},function(e,n,t){var i=t(4),r=t(8),o=t(23),a=t(87),s=t(128),l=t(86),c=t(137),u=t(215).CONFIGURABLE,d=c.get,h=c.enforce,p=String(String).split("String");(e.exports=function(e,n,t,l){var c,d=!!l&&!!l.unsafe,f=!!l&&!!l.enumerable,m=!!l&&!!l.noTargetGet,g=l&&void 0!==l.name?l.name:n;r(t)&&("Symbol("===String(g).slice(0,7)&&(g="["+String(g).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!o(t,"name")||u&&t.name!==g)&&a(t,"name",g),(c=h(t)).source||(c.source=p.join("string"==typeof g?g:""))),e!==i?(d?!m&&e[n]&&(f=!0):delete e[n],f?e[n]=t:a(e,n,t)):f?e[n]=t:s(n,t)})(Function.prototype,"toString",(function(){return r(this)&&d(this).source||l(this)}))},function(e,n,t){var i,r=t(11),o=t(247),a=t(149),s=t(71),l=t(375),c=t(230),u=t(93),d=u("IE_PROTO"),h=function(){},p=function(e){return"<script>"+e+"<\/script>"},f=function(){try{i=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,n;f=i?function(e){e.write(p("")),e.close();var n=e.parentWindow.Object;return e=null,n}(i):((n=c("iframe")).style.display="none",l.appendChild(n),n.src=String("javascript:"),(e=n.contentWindow.document).open(),e.write(p("document.F=Object")),e.close(),e.F);for(var t=a.length;t--;)delete f.prototype[a[t]];return f()};s[d]=!0,e.exports=Object.create||function(e,n){var t;return null!==e?(h.prototype=r(e),t=new h,h.prototype=null,t[d]=e):t=f(),void 0===n?t:o(t,n)}},function(e,n){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},function(e,n,t){"use strict";var i=t(3),r=t(9),o=t(70),a=t(67),s=t(12),l=t(146),c=t(234),u=t(5),d=t(14),h=t(72),p=t(10),f=t(11),m=t(26),g=t(20),v=t(68),b=t(69),y=t(54),w=t(99),x=t(95),_=t(382),S=t(241),k=t(42),C=t(16),E=t(147),T=t(25),P=t(36),O=t(89),A=t(93),j=t(71),I=t(90),D=t(6),M=t(259),L=t(260),N=t(151),$=t(92),F=t(39).forEach,R=A("hidden"),B=D("toPrimitive"),V=$.set,z=$.getterFor("Symbol"),q=Object.prototype,H=r.Symbol,W=o("JSON","stringify"),U=k.f,J=C.f,Y=_.f,G=E.f,K=O("symbols"),X=O("op-symbols"),Q=O("string-to-symbol-registry"),Z=O("symbol-to-string-registry"),ee=O("wks"),ne=r.QObject,te=!ne||!ne.prototype||!ne.prototype.findChild,ie=s&&u((function(){return 7!=y(J({},"a",{get:function(){return J(this,"a",{value:7}).a}})).a}))?function(e,n,t){var i=U(q,n);i&&delete q[n],J(e,n,t),i&&e!==q&&J(q,n,i)}:J,re=function(e,n){var t=K[e]=y(H.prototype);return V(t,{type:"Symbol",tag:e,description:n}),s||(t.description=n),t},oe=c?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof H},ae=function(e,n,t){e===q&&ae(X,n,t),f(e);var i=v(n,!0);return f(t),d(K,i)?(t.enumerable?(d(e,R)&&e[R][i]&&(e[R][i]=!1),t=y(t,{enumerable:b(0,!1)})):(d(e,R)||J(e,R,b(1,{})),e[R][i]=!0),ie(e,i,t)):J(e,i,t)},se=function(e,n){f(e);var t=g(n),i=w(t).concat(de(t));return F(i,(function(n){s&&!le.call(t,n)||ae(e,n,t[n])})),e},le=function(e){var n=v(e,!0),t=G.call(this,n);return!(this===q&&d(K,n)&&!d(X,n))&&(!(t||!d(this,n)||!d(K,n)||d(this,R)&&this[R][n])||t)},ce=function(e,n){var t=g(e),i=v(n,!0);if(t!==q||!d(K,i)||d(X,i)){var r=U(t,i);return!r||!d(K,i)||d(t,R)&&t[R][i]||(r.enumerable=!0),r}},ue=function(e){var n=Y(g(e)),t=[];return F(n,(function(e){d(K,e)||d(j,e)||t.push(e)})),t},de=function(e){var n=e===q,t=Y(n?X:g(e)),i=[];return F(t,(function(e){!d(K,e)||n&&!d(q,e)||i.push(K[e])})),i};(l||(P((H=function(){if(this instanceof H)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,n=I(e),t=function(e){this===q&&t.call(X,e),d(this,R)&&d(this[R],n)&&(this[R][n]=!1),ie(this,n,b(1,e))};return s&&te&&ie(q,n,{configurable:!0,set:t}),re(n,e)}).prototype,"toString",(function(){return z(this).tag})),P(H,"withoutSetter",(function(e){return re(I(e),e)})),E.f=le,C.f=ae,k.f=ce,x.f=_.f=ue,S.f=de,M.f=function(e){return re(D(e),e)},s&&(J(H.prototype,"description",{configurable:!0,get:function(){return z(this).description}}),a||P(q,"propertyIsEnumerable",le,{unsafe:!0}))),i({global:!0,wrap:!0,forced:!l,sham:!l},{Symbol:H}),F(w(ee),(function(e){L(e)})),i({target:"Symbol",stat:!0,forced:!l},{for:function(e){var n=String(e);if(d(Q,n))return Q[n];var t=H(n);return Q[n]=t,Z[t]=n,t},keyFor:function(e){if(!oe(e))throw TypeError(e+" is not a symbol");if(d(Z,e))return Z[e]},useSetter:function(){te=!0},useSimple:function(){te=!1}}),i({target:"Object",stat:!0,forced:!l,sham:!s},{create:function(e,n){return void 0===n?y(e):se(y(e),n)},defineProperty:ae,defineProperties:se,getOwnPropertyDescriptor:ce}),i({target:"Object",stat:!0,forced:!l},{getOwnPropertyNames:ue,getOwnPropertySymbols:de}),i({target:"Object",stat:!0,forced:u((function(){S.f(1)}))},{getOwnPropertySymbols:function(e){return S.f(m(e))}}),W)&&i({target:"JSON",stat:!0,forced:!l||u((function(){var e=H();return"[null]"!=W([e])||"{}"!=W({a:e})||"{}"!=W(Object(e))}))},{stringify:function(e,n,t){for(var i,r=[e],o=1;arguments.length>o;)r.push(arguments[o++]);if(i=n,(p(n)||void 0!==e)&&!oe(e))return h(n)||(n=function(e,n){if("function"==typeof i&&(n=i.call(this,e,n)),!oe(n))return n}),r[1]=n,W.apply(null,r)}});H.prototype[B]||T(H.prototype,B,H.prototype.valueOf),N(H,"Symbol"),j[R]=!0},function(e,n){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,n,t){var i=t(59),r=t(113);e.exports=t(46)?function(e,n,t){return i.f(e,n,r(1,t))}:function(e,n,t){return e[n]=t,e}},function(e,n,t){var i=t(112),r=t(296),o=t(175),a=Object.defineProperty;n.f=t(46)?Object.defineProperty:function(e,n,t){if(i(e),n=o(n,!0),i(t),r)try{return a(e,n,t)}catch(e){}if("get"in t||"set"in t)throw TypeError("Accessors not supported!");return"value"in t&&(e[n]=t.value),e}},function(e,n,t){var i=t(299),r=t(176);e.exports=function(e){return i(r(e))}},function(e,n,t){var i=t(179)("wks"),r=t(116),o=t(37).Symbol,a="function"==typeof o;(e.exports=function(e){return i[e]||(i[e]=a&&o[e]||(a?o:r)("Symbol."+e))}).store=i},function(e,n,t){var i=t(3),r=t(26),o=t(99);i({target:"Object",stat:!0,forced:t(5)((function(){o(1)}))},{keys:function(e){return o(r(e))}})},function(e,n,t){var i=t(199),r=t(200);e.exports=function(e){return i(r(e))}},function(e,n){e.exports=!1},function(e,n,t){var i=t(4),r=t(8),o=t(85),a=i.TypeError;e.exports=function(e){if(r(e))return e;throw a(o(e)+" is not a function")}},function(e,n){e.exports={}},function(e,n){e.exports=!1},function(e,n,t){var i=t(10);e.exports=function(e,n){if(!i(e))return e;var t,r;if(n&&"function"==typeof(t=e.toString)&&!i(r=t.call(e)))return r;if("function"==typeof(t=e.valueOf)&&!i(r=t.call(e)))return r;if(!n&&"function"==typeof(t=e.toString)&&!i(r=t.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,n){e.exports=function(e,n){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:n}}},function(e,n,t){var i=t(233),r=t(9),o=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,n){return arguments.length<2?o(i[e])||o(r[e]):i[e]&&i[e][n]||r[e]&&r[e][n]}},function(e,n){e.exports={}},function(e,n,t){var i=t(41);e.exports=Array.isArray||function(e){return"Array"==i(e)}},function(e,n){e.exports={}},function(e,n,t){"use strict";var i=t(3),r=t(12),o=t(9),a=t(14),s=t(10),l=t(16).f,c=t(237),u=o.Symbol;if(r&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var d={},h=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),n=this instanceof h?new u(e):void 0===e?u():u(e);return""===e&&(d[n]=!0),n};c(h,u);var p=h.prototype=u.prototype;p.constructor=h;var f=p.toString,m="Symbol(test)"==String(u("test")),g=/^Symbol\((.*)\)[^)]+$/;l(p,"description",{configurable:!0,get:function(){var e=s(this)?this.valueOf():this,n=f.call(e);if(a(d,e))return"";var t=m?n.slice(7,-1):n.replace(g,"$1");return""===t?void 0:t}}),i({global:!0,forced:!0},{Symbol:h})}},function(e,n,t){var i=t(31).Symbol;e.exports=i},function(e,n,t){var i=t(75),r=t(393),o=t(394),a=i?i.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?r(e):o(e)}},function(e,n){var t=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=t)},function(e,n){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,n){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,n,t){e.exports=function(){"use strict";var e="millisecond",n="second",t="minute",i="hour",r="day",o="week",a="month",s="quarter",l="year",c="date",u=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,d=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,h={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},p=function(e,n,t){var i=String(e);return!i||i.length>=n?e:""+Array(n+1-i.length).join(t)+e},f={s:p,z:function(e){var n=-e.utcOffset(),t=Math.abs(n),i=Math.floor(t/60),r=t%60;return(n<=0?"+":"-")+p(i,2,"0")+":"+p(r,2,"0")},m:function e(n,t){if(n.date()<t.date())return-e(t,n);var i=12*(t.year()-n.year())+(t.month()-n.month()),r=n.clone().add(i,a),o=t-r<0,s=n.clone().add(i+(o?-1:1),a);return+(-(i+(t-r)/(o?r-s:s-r))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(u){return{M:a,y:l,w:o,d:r,D:c,h:i,m:t,s:n,ms:e,Q:s}[u]||String(u||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},m="en",g={};g[m]=h;var v=function(e){return e instanceof x},b=function(e,n,t){var i;if(!e)return m;if("string"==typeof e)g[e]&&(i=e),n&&(g[e]=n,i=e);else{var r=e.name;g[r]=e,i=r}return!t&&i&&(m=i),i||!t&&m},y=function(e,n){if(v(e))return e.clone();var t="object"==typeof n?n:{};return t.date=e,t.args=arguments,new x(t)},w=f;w.l=b,w.i=v,w.w=function(e,n){return y(e,{locale:n.$L,utc:n.$u,x:n.$x,$offset:n.$offset})};var x=function(){function h(e){this.$L=b(e.locale,null,!0),this.parse(e)}var p=h.prototype;return p.parse=function(e){this.$d=function(e){var n=e.date,t=e.utc;if(null===n)return new Date(NaN);if(w.u(n))return new Date;if(n instanceof Date)return new Date(n);if("string"==typeof n&&!/Z$/i.test(n)){var i=n.match(u);if(i){var r=i[2]-1||0,o=(i[7]||"0").substring(0,3);return t?new Date(Date.UTC(i[1],r,i[3]||1,i[4]||0,i[5]||0,i[6]||0,o)):new Date(i[1],r,i[3]||1,i[4]||0,i[5]||0,i[6]||0,o)}}return new Date(n)}(e),this.$x=e.x||{},this.init()},p.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},p.$utils=function(){return w},p.isValid=function(){return!("Invalid Date"===this.$d.toString())},p.isSame=function(e,n){var t=y(e);return this.startOf(n)<=t&&t<=this.endOf(n)},p.isAfter=function(e,n){return y(e)<this.startOf(n)},p.isBefore=function(e,n){return this.endOf(n)<y(e)},p.$g=function(e,n,t){return w.u(e)?this[n]:this.set(t,e)},p.unix=function(){return Math.floor(this.valueOf()/1e3)},p.valueOf=function(){return this.$d.getTime()},p.startOf=function(e,s){var u=this,d=!!w.u(s)||s,h=w.p(e),p=function(e,n){var t=w.w(u.$u?Date.UTC(u.$y,n,e):new Date(u.$y,n,e),u);return d?t:t.endOf(r)},f=function(e,n){return w.w(u.toDate()[e].apply(u.toDate("s"),(d?[0,0,0,0]:[23,59,59,999]).slice(n)),u)},m=this.$W,g=this.$M,v=this.$D,b="set"+(this.$u?"UTC":"");switch(h){case l:return d?p(1,0):p(31,11);case a:return d?p(1,g):p(0,g+1);case o:var y=this.$locale().weekStart||0,x=(m<y?m+7:m)-y;return p(d?v-x:v+(6-x),g);case r:case c:return f(b+"Hours",0);case i:return f(b+"Minutes",1);case t:return f(b+"Seconds",2);case n:return f(b+"Milliseconds",3);default:return this.clone()}},p.endOf=function(e){return this.startOf(e,!1)},p.$set=function(o,s){var u,d=w.p(o),h="set"+(this.$u?"UTC":""),p=(u={},u[r]=h+"Date",u[c]=h+"Date",u[a]=h+"Month",u[l]=h+"FullYear",u[i]=h+"Hours",u[t]=h+"Minutes",u[n]=h+"Seconds",u[e]=h+"Milliseconds",u)[d],f=d===r?this.$D+(s-this.$W):s;if(d===a||d===l){var m=this.clone().set(c,1);m.$d[p](f),m.init(),this.$d=m.set(c,Math.min(this.$D,m.daysInMonth())).$d}else p&&this.$d[p](f);return this.init(),this},p.set=function(e,n){return this.clone().$set(e,n)},p.get=function(e){return this[w.p(e)]()},p.add=function(e,s){var c,u=this;e=Number(e);var d=w.p(s),h=function(n){var t=y(u);return w.w(t.date(t.date()+Math.round(n*e)),u)};if(d===a)return this.set(a,this.$M+e);if(d===l)return this.set(l,this.$y+e);if(d===r)return h(1);if(d===o)return h(7);var p=(c={},c[t]=6e4,c[i]=36e5,c[n]=1e3,c)[d]||1,f=this.$d.getTime()+e*p;return w.w(f,this)},p.subtract=function(e,n){return this.add(-1*e,n)},p.format=function(e){var n=this;if(!this.isValid())return"Invalid Date";var t=e||"YYYY-MM-DDTHH:mm:ssZ",i=w.z(this),r=this.$locale(),o=this.$H,a=this.$m,s=this.$M,l=r.weekdays,c=r.months,u=function(e,i,r,o){return e&&(e[i]||e(n,t))||r[i].substr(0,o)},h=function(e){return w.s(o%12||12,e,"0")},p=r.meridiem||function(e,n,t){var i=e<12?"AM":"PM";return t?i.toLowerCase():i},f={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:w.s(s+1,2,"0"),MMM:u(r.monthsShort,s,c,3),MMMM:u(c,s),D:this.$D,DD:w.s(this.$D,2,"0"),d:String(this.$W),dd:u(r.weekdaysMin,this.$W,l,2),ddd:u(r.weekdaysShort,this.$W,l,3),dddd:l[this.$W],H:String(o),HH:w.s(o,2,"0"),h:h(1),hh:h(2),a:p(o,a,!0),A:p(o,a,!1),m:String(a),mm:w.s(a,2,"0"),s:String(this.$s),ss:w.s(this.$s,2,"0"),SSS:w.s(this.$ms,3,"0"),Z:i};return t.replace(d,(function(e,n){return n||f[e]||i.replace(":","")}))},p.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},p.diff=function(e,c,u){var d,h=w.p(c),p=y(e),f=6e4*(p.utcOffset()-this.utcOffset()),m=this-p,g=w.m(this,p);return g=(d={},d[l]=g/12,d[a]=g,d[s]=g/3,d[o]=(m-f)/6048e5,d[r]=(m-f)/864e5,d[i]=m/36e5,d[t]=m/6e4,d[n]=m/1e3,d)[h]||m,u?g:w.a(g)},p.daysInMonth=function(){return this.endOf(a).$D},p.$locale=function(){return g[this.$L]},p.locale=function(e,n){if(!e)return this.$L;var t=this.clone(),i=b(e,n,!0);return i&&(t.$L=i),t},p.clone=function(){return w.w(this.$d,this)},p.toDate=function(){return new Date(this.valueOf())},p.toJSON=function(){return this.isValid()?this.toISOString():null},p.toISOString=function(){return this.$d.toISOString()},p.toString=function(){return this.$d.toUTCString()},h}(),_=x.prototype;return y.prototype=_,[["$ms",e],["$s",n],["$m",t],["$H",i],["$W",r],["$M",a],["$y",l],["$D",c]].forEach((function(e){_[e[1]]=function(n){return this.$g(n,e[0],e[1])}})),y.extend=function(e,n){return e.$i||(e(n,x,y),e.$i=!0),y},y.locale=b,y.isDayjs=v,y.unix=function(e){return y(1e3*e)},y.en=g[m],y.Ls=g,y.p={},y}()},function(e,n,t){"use strict";function i(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}t.d(n,"a",(function(){return i}))},function(e,n,t){"use strict";var i=t(3),r=t(155);i({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},function(e,n,t){var i=t(162);e.exports=function(e){if("string"==typeof e||i(e))return e;var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},function(e,n,t){var i=t(34);e.exports=i("navigator","userAgent")||""},function(e,n,t){var i=t(4).String;e.exports=function(e){try{return i(e)}catch(e){return"Object"}}},function(e,n,t){var i=t(13),r=t(8),o=t(127),a=i(Function.toString);r(o.inspectSource)||(o.inspectSource=function(e){return a(e)}),e.exports=o.inspectSource},function(e,n,t){var i=t(35),r=t(52),o=t(138);e.exports=i?function(e,n,t){return r.f(e,n,o(1,t))}:function(e,n,t){return e[n]=t,e}},function(e,n,t){var i=t(4),r=t(139).f,o=t(87),a=t(53),s=t(128),l=t(343),c=t(217);e.exports=function(e,n){var t,u,d,h,p,f=e.target,m=e.global,g=e.stat;if(t=m?i:g?i[f]||s(f,{}):(i[f]||{}).prototype)for(u in n){if(h=n[u],d=e.noTargetGet?(p=r(t,u))&&p.value:t[u],!c(m?u:f+(g?".":"#")+u,e.forced)&&void 0!==d){if(typeof h==typeof d)continue;l(h,d)}(e.sham||d&&d.sham)&&o(h,"sham",!0),a(t,u,h,e)}}},function(e,n,t){var i=t(67),r=t(144);(e.exports=function(e,n){return r[e]||(r[e]=void 0!==n?n:{})})("versions",[]).push({version:"3.10.1",mode:i?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},function(e,n){var t=0,i=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++t+i).toString(36)}},function(e,n,t){var i,r,o=t(9),a=t(232),s=o.process,l=s&&s.versions,c=l&&l.v8;c?r=(i=c.split("."))[0]+i[1]:a&&(!(i=a.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=a.match(/Chrome\/(\d+)/))&&(r=i[1]),e.exports=r&&+r},function(e,n,t){var i,r,o,a=t(372),s=t(9),l=t(10),c=t(25),u=t(14),d=t(144),h=t(93),p=t(71),f=s.WeakMap;if(a){var m=d.state||(d.state=new f),g=m.get,v=m.has,b=m.set;i=function(e,n){return n.facade=e,b.call(m,e,n),n},r=function(e){return g.call(m,e)||{}},o=function(e){return v.call(m,e)}}else{var y=h("state");p[y]=!0,i=function(e,n){return n.facade=e,c(e,y,n),n},r=function(e){return u(e,y)?e[y]:{}},o=function(e){return u(e,y)}}e.exports={set:i,get:r,has:o,enforce:function(e){return o(e)?r(e):i(e,{})},getterFor:function(e){return function(n){var t;if(!l(n)||(t=r(n)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return t}}}},function(e,n,t){var i=t(89),r=t(90),o=i("keys");e.exports=function(e){return o[e]||(o[e]=r(e))}},function(e,n,t){var i=t(5),r=t(41),o="".split;e.exports=i((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==r(e)?o.call(e,""):Object(e)}:Object},function(e,n,t){var i=t(239),r=t(149).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},function(e,n){var t=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:t)(e)}},function(e,n,t){"use strict";var i=t(68),r=t(16),o=t(69);e.exports=function(e,n,t){var a=i(n);a in e?r.f(e,a,o(0,t)):e[a]=t}},function(e,n,t){var i=t(5),r=t(6),o=t(91),a=r("species");e.exports=function(e){return o>=51||!i((function(){var n=[];return(n.constructor={})[a]=function(){return{foo:1}},1!==n[e](Boolean).foo}))}},function(e,n,t){var i=t(239),r=t(149);e.exports=Object.keys||function(e){return i(e,r)}},function(e,n,t){"use strict";var i=t(3),r=t(257);i({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},function(e,n,t){var i=t(9),r=t(248),o=t(257),a=t(25);for(var s in r){var l=i[s],c=l&&l.prototype;if(c&&c.forEach!==o)try{a(c,"forEach",o)}catch(e){c.forEach=o}}},function(e,n,t){t(260)("iterator")},function(e,n,t){"use strict";var i=t(3),r=t(5),o=t(72),a=t(10),s=t(26),l=t(28),c=t(97),u=t(250),d=t(98),h=t(6),p=t(91),f=h("isConcatSpreadable"),m=p>=51||!r((function(){var e=[];return e[f]=!1,e.concat()[0]!==e})),g=d("concat"),v=function(e){if(!a(e))return!1;var n=e[f];return void 0!==n?!!n:o(e)};i({target:"Array",proto:!0,forced:!m||!g},{concat:function(e){var n,t,i,r,o,a=s(this),d=u(a,0),h=0;for(n=-1,i=arguments.length;n<i;n++)if(v(o=-1===n?a:arguments[n])){if(h+(r=l(o.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(t=0;t<r;t++,h++)t in o&&c(d,h,o[t])}else{if(h>=9007199254740991)throw TypeError("Maximum allowed index exceeded");c(d,h++,o)}return d.length=h,d}})},function(e,n,t){var i=t(397),r=t(398),o=t(399),a=t(400),s=t(401);function l(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var i=e[n];this.set(i[0],i[1])}}l.prototype.clear=i,l.prototype.delete=r,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},function(e,n,t){var i=t(193);e.exports=function(e,n){for(var t=e.length;t--;)if(i(e[t][0],n))return t;return-1}},function(e,n,t){var i=t(44)(Object,"create");e.exports=i},function(e,n,t){var i=t(419);e.exports=function(e,n){var t=e.__data__;return i(n)?t["string"==typeof n?"string":"hash"]:t.map}},function(e,n,t){"use strict";n.__esModule=!0;var i,r=t(2),o=(i=r)&&i.__esModule?i:{default:i},a=t(291);var s=o.default.prototype.$isServer?function(){}:t(496),l=function(e){return e.stopPropagation()};n.default={props:{transformOrigin:{type:[Boolean,String],default:!0},placement:{type:String,default:"bottom"},boundariesPadding:{type:Number,default:5},reference:{},popper:{},offset:{default:0},value:Boolean,visibleArrow:Boolean,arrowOffset:{type:Number,default:35},appendToBody:{type:Boolean,default:!0},popperOptions:{type:Object,default:function(){return{gpuAcceleration:!1}}}},data:function(){return{showPopper:!1,currentPlacement:""}},watch:{value:{immediate:!0,handler:function(e){this.showPopper=e,this.$emit("input",e)}},showPopper:function(e){this.disabled||(e?this.updatePopper():this.destroyPopper(),this.$emit("input",e))}},methods:{createPopper:function(){var e=this;if(!this.$isServer&&(this.currentPlacement=this.currentPlacement||this.placement,/^(top|bottom|left|right)(-start|-end)?$/g.test(this.currentPlacement))){var n=this.popperOptions,t=this.popperElm=this.popperElm||this.popper||this.$refs.popper,i=this.referenceElm=this.referenceElm||this.reference||this.$refs.reference;!i&&this.$slots.reference&&this.$slots.reference[0]&&(i=this.referenceElm=this.$slots.reference[0].elm),t&&i&&(this.visibleArrow&&this.appendArrow(t),this.appendToBody&&document.body.appendChild(this.popperElm),this.popperJS&&this.popperJS.destroy&&this.popperJS.destroy(),n.placement=this.currentPlacement,n.offset=this.offset,n.arrowOffset=this.arrowOffset,this.popperJS=new s(i,t,n),this.popperJS.onCreate((function(n){e.$emit("created",e),e.resetTransformOrigin(),e.$nextTick(e.updatePopper)})),"function"==typeof n.onUpdate&&this.popperJS.onUpdate(n.onUpdate),this.popperJS._popper.style.zIndex=a.PopupManager.nextZIndex(),this.popperElm.addEventListener("click",l))}},updatePopper:function(){var e=this.popperJS;e?(e.update(),e._popper&&(e._popper.style.zIndex=a.PopupManager.nextZIndex())):this.createPopper()},doDestroy:function(e){!this.popperJS||this.showPopper&&!e||(this.popperJS.destroy(),this.popperJS=null)},destroyPopper:function(){this.popperJS&&this.resetTransformOrigin()},resetTransformOrigin:function(){if(this.transformOrigin){var e=this.popperJS._popper.getAttribute("x-placement").split("-")[0],n={top:"bottom",bottom:"top",left:"right",right:"left"}[e];this.popperJS._popper.style.transformOrigin="string"==typeof this.transformOrigin?this.transformOrigin:["top","bottom"].indexOf(e)>-1?"center "+n:n+" center"}},appendArrow:function(e){var n=void 0;if(!this.appended){for(var t in this.appended=!0,e.attributes)if(/^_v-/.test(e.attributes[t].name)){n=e.attributes[t].name;break}var i=document.createElement("div");n&&i.setAttribute(n,""),i.setAttribute("x-arrow",""),i.className="popper__arrow",e.appendChild(i)}}},beforeDestroy:function(){this.doDestroy(!0),this.popperElm&&this.popperElm.parentNode===document.body&&(this.popperElm.removeEventListener("click",l),document.body.removeChild(this.popperElm))},deactivated:function(){this.$options.beforeDestroy[0].call(this)}}},function(e,n,t){"use strict";n.__esModule=!0,n.default=function(e){for(var n=1,t=arguments.length;n<t;n++){var i=arguments[n]||{};for(var r in i)if(i.hasOwnProperty(r)){var o=i[r];void 0!==o&&(e[r]=o)}}return e}},function(e,n,t){"use strict";n.__esModule=!0,n.isDef=function(e){return null!=e},n.isKorean=function(e){return/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi.test(e)}},function(e,n,t){var i=t(169);e.exports=function(e,n,t){return void 0===t?i(e,n,!1):i(e,t,!1!==n)}},function(e,n,t){var i=t(78);e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},function(e,n){e.exports=function(e,n){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:n}}},function(e,n,t){var i=t(298),r=t(180);e.exports=Object.keys||function(e){return i(e,r)}},function(e,n){e.exports=!0},function(e,n){var t=0,i=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++t+i).toString(36))}},function(e,n){n.f={}.propertyIsEnumerable},function(e,n,t){"use strict";t.d(n,"a",(function(){return r}));t(17);function i(e,n,t,i,r,o,a){try{var s=e[o](a),l=s.value}catch(e){return void t(e)}s.done?n(l):Promise.resolve(l).then(i,r)}function r(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function s(e){i(a,r,o,s,l,"next",e)}function l(e){i(a,r,o,s,l,"throw",e)}s(void 0)}))}}},function(e,n,t){"use strict";t.d(n,"a",(function(){return r}));t(50),t(17),t(154),t(261),t(22);var i=t(81);function r(e,n){if(e){if("string"==typeof e)return Object(i.a)(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Object(i.a)(e,n):void 0}}},function(e,n,t){"use strict";var i=t(121),r=t(11),o=t(28),a=t(96),s=t(21),l=t(188),c=t(389),u=t(122),d=Math.max,h=Math.min;i("replace",2,(function(e,n,t,i){var p=i.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,f=i.REPLACE_KEEPS_$0,m=p?"$":"$0";return[function(t,i){var r=s(this),o=null==t?void 0:t[e];return void 0!==o?o.call(t,r,i):n.call(String(r),t,i)},function(e,i){if(!p&&f||"string"==typeof i&&-1===i.indexOf(m)){var s=t(n,e,this,i);if(s.done)return s.value}var g=r(e),v=String(this),b="function"==typeof i;b||(i=String(i));var y=g.global;if(y){var w=g.unicode;g.lastIndex=0}for(var x=[];;){var _=u(g,v);if(null===_)break;if(x.push(_),!y)break;""===String(_[0])&&(g.lastIndex=l(v,o(g.lastIndex),w))}for(var S,k="",C=0,E=0;E<x.length;E++){_=x[E];for(var T=String(_[0]),P=d(h(a(_.index),v.length),0),O=[],A=1;A<_.length;A++)O.push(void 0===(S=_[A])?S:String(S));var j=_.groups;if(b){var I=[T].concat(O,P,v);void 0!==j&&I.push(j);var D=String(i.apply(void 0,I))}else D=c(T,v,P,O,j,i);P>=C&&(k+=v.slice(C,P)+D,C=P+T.length)}return k+v.slice(C)}]}))},function(e,n,t){"use strict";t(82);var i=t(36),r=t(5),o=t(6),a=t(25),s=o("species"),l=!r((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),c="$0"==="a".replace(/./,"$0"),u=o("replace"),d=!!/./[u]&&""===/./[u]("a","$0"),h=!r((function(){var e=/(?:)/,n=e.exec;e.exec=function(){return n.apply(this,arguments)};var t="ab".split(e);return 2!==t.length||"a"!==t[0]||"b"!==t[1]}));e.exports=function(e,n,t,u){var p=o(e),f=!r((function(){var n={};return n[p]=function(){return 7},7!=""[e](n)})),m=f&&!r((function(){var n=!1,t=/a/;return"split"===e&&((t={}).constructor={},t.constructor[s]=function(){return t},t.flags="",t[p]=/./[p]),t.exec=function(){return n=!0,null},t[p](""),!n}));if(!f||!m||"replace"===e&&(!l||!c||d)||"split"===e&&!h){var g=/./[p],v=t(p,""[e],(function(e,n,t,i,r){return n.exec===RegExp.prototype.exec?f&&!r?{done:!0,value:g.call(n,t,i)}:{done:!0,value:e.call(t,n,i)}:{done:!1}}),{REPLACE_KEEPS_$0:c,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),b=v[0],y=v[1];i(String.prototype,e,b),i(RegExp.prototype,p,2==n?function(e,n){return y.call(e,this,n)}:function(e){return y.call(e,this)})}u&&a(RegExp.prototype[p],"sham",!0)}},function(e,n,t){var i=t(41),r=t(155);e.exports=function(e,n){var t=e.exec;if("function"==typeof t){var o=t.call(e,n);if("object"!=typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==i(e))throw TypeError("RegExp#exec called on incompatible receiver");return r.call(e,n)}},function(e,n){e.exports=function(e){var n=typeof e;return null!=e&&("object"==n||"function"==n)}},function(e,n,t){var i=t(6),r=t(54),o=t(16),a=i("unscopables"),s=Array.prototype;null==s[a]&&o.f(s,a,{configurable:!0,value:r(null)}),e.exports=function(e){s[a][e]=!0}},function(e,n){e.exports=function(e){return e}},function(e,n,t){var i=t(13),r=i({}.toString),o=i("".slice);e.exports=function(e){return o(r(e),8,-1)}},function(e,n,t){var i=t(4),r=t(128),o=i["__core-js_shared__"]||r("__core-js_shared__",{});e.exports=o},function(e,n,t){var i=t(4),r=Object.defineProperty;e.exports=function(e,n){try{r(i,e,{value:n,configurable:!0,writable:!0})}catch(t){i[e]=n}return n}},function(e,n,t){var i=t(4),r=t(200),o=i.Object;e.exports=function(e){return o(r(e))}},function(e,n,t){var i,r=t(24),o=t(335),a=t(135),s=t(134),l=t(213),c=t(131),u=t(136),d=u("IE_PROTO"),h=function(){},p=function(e){return"<script>"+e+"<\/script>"},f=function(e){e.write(p("")),e.close();var n=e.parentWindow.Object;return e=null,n},m=function(){try{i=new ActiveXObject("htmlfile")}catch(e){}var e,n;m="undefined"!=typeof document?document.domain&&i?f(i):((n=c("iframe")).style.display="none",l.appendChild(n),n.src=String("javascript:"),(e=n.contentWindow.document).open(),e.write(p("document.F=Object")),e.close(),e.F):f(i);for(var t=a.length;t--;)delete m.prototype[a[t]];return m()};s[d]=!0,e.exports=Object.create||function(e,n){var t;return null!==e?(h.prototype=r(e),t=new h,h.prototype=null,t[d]=e):t=m(),void 0===n?t:o(t,n)}},function(e,n,t){var i=t(4),r=t(40),o=i.document,a=r(o)&&r(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},function(e,n,t){var i=t(13);e.exports=i({}.isPrototypeOf)},function(e,n,t){var i=t(65);e.exports=function(e,n){var t=e[n];return null==t?void 0:i(t)}},function(e,n){e.exports={}},function(e,n){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,n,t){var i=t(201),r=t(202),o=i("keys");e.exports=function(e){return o[e]||(o[e]=r(e))}},function(e,n,t){var i,r,o,a=t(341),s=t(4),l=t(13),c=t(40),u=t(87),d=t(23),h=t(127),p=t(136),f=t(134),m=s.TypeError,g=s.WeakMap;if(a||h.state){var v=h.state||(h.state=new g),b=l(v.get),y=l(v.has),w=l(v.set);i=function(e,n){if(y(v,e))throw new m("Object already initialized");return n.facade=e,w(v,e,n),n},r=function(e){return b(v,e)||{}},o=function(e){return y(v,e)}}else{var x=p("state");f[x]=!0,i=function(e,n){if(d(e,x))throw new m("Object already initialized");return n.facade=e,u(e,x,n),n},r=function(e){return d(e,x)?e[x]:{}},o=function(e){return d(e,x)}}e.exports={set:i,get:r,has:o,enforce:function(e){return o(e)?r(e):i(e,{})},getterFor:function(e){return function(n){var t;if(!c(n)||(t=r(n)).type!==e)throw m("Incompatible receiver, "+e+" required");return t}}}},function(e,n){e.exports=function(e,n){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:n}}},function(e,n,t){var i=t(35),r=t(30),o=t(214),a=t(138),s=t(63),l=t(207),c=t(23),u=t(206),d=Object.getOwnPropertyDescriptor;n.f=i?d:function(e,n){if(e=s(e),n=l(n),u)try{return d(e,n)}catch(e){}if(c(e,n))return a(!r(o.f,e,n),e[n])}},function(e,n,t){var i=t(52).f,r=t(23),o=t(15)("toStringTag");e.exports=function(e,n,t){e&&!r(e=t?e:e.prototype,o)&&i(e,o,{configurable:!0,value:n})}},function(e,n,t){var i=t(13),r=t(65),o=i(i.bind);e.exports=function(e,n){return r(e),void 0===n?e:o?o(e,n):function(){return e.apply(n,arguments)}}},function(e,n,t){var i=t(126),r=t(4);e.exports="process"==i(r.process)},function(e,n,t){var i={};i[t(6)("toStringTag")]="z",e.exports="[object z]"===String(i)},function(e,n,t){var i=t(9),r=t(145),o=i["__core-js_shared__"]||r("__core-js_shared__",{});e.exports=o},function(e,n,t){var i=t(9),r=t(25);e.exports=function(e,n){try{r(i,e,n)}catch(t){i[e]=n}return n}},function(e,n,t){var i=t(231),r=t(91),o=t(5);e.exports=!!Object.getOwnPropertySymbols&&!o((function(){return!Symbol.sham&&(i?38===r:r>37&&r<41)}))},function(e,n,t){"use strict";var i={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,o=r&&!i.call({1:2},1);n.f=o?function(e){var n=r(this,e);return!!n&&n.enumerable}:i},function(e,n,t){var i=t(20),r=t(28),o=t(240),a=function(e){return function(n,t,a){var s,l=i(n),c=r(l.length),u=o(a,c);if(e&&t!=t){for(;c>u;)if((s=l[u++])!=s)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===t)return e||u||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},function(e,n){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,n,t){var i=t(14),r=t(26),o=t(93),a=t(246),s=o("IE_PROTO"),l=Object.prototype;e.exports=a?Object.getPrototypeOf:function(e){return e=r(e),i(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?l:null}},function(e,n,t){var i=t(16).f,r=t(14),o=t(6)("toStringTag");e.exports=function(e,n,t){e&&!r(e=t?e:e.prototype,o)&&i(e,o,{configurable:!0,value:n})}},function(e,n,t){var i=t(11),r=t(376);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,n=!1,t={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(t,[]),n=t instanceof Array}catch(e){}return function(t,o){return i(t),r(o),n?e.call(t,o):t.__proto__=o,t}}():void 0)},function(e,n,t){t(3)({target:"Array",stat:!0},{isArray:t(72)})},function(e,n,t){var i=t(12),r=t(16).f,o=Function.prototype,a=o.toString,s=/^\s*function ([^ (]*)/;i&&!("name"in o)&&r(o,"name",{configurable:!0,get:function(){try{return a.call(this).match(s)[1]}catch(e){return""}}})},function(e,n,t){"use strict";var i,r,o=t(263),a=t(264),s=t(89),l=RegExp.prototype.exec,c=s("native-string-replace",String.prototype.replace),u=l,d=(i=/a/,r=/b*/g,l.call(i,"a"),l.call(r,"a"),0!==i.lastIndex||0!==r.lastIndex),h=a.UNSUPPORTED_Y||a.BROKEN_CARET,p=void 0!==/()??/.exec("")[1];(d||p||h)&&(u=function(e){var n,t,i,r,a=this,s=h&&a.sticky,u=o.call(a),f=a.source,m=0,g=e;return s&&(-1===(u=u.replace("y","")).indexOf("g")&&(u+="g"),g=String(e).slice(a.lastIndex),a.lastIndex>0&&(!a.multiline||a.multiline&&"\n"!==e[a.lastIndex-1])&&(f="(?: "+f+")",g=" "+g,m++),t=new RegExp("^(?:"+f+")",u)),p&&(t=new RegExp("^"+f+"$(?!\\s)",u)),d&&(n=a.lastIndex),i=l.call(s?t:a,g),s?i?(i.input=i.input.slice(m),i[0]=i[0].slice(m),i.index=a.lastIndex,a.lastIndex+=i[0].length):a.lastIndex=0:d&&i&&(a.lastIndex=a.global?i.index+i[0].length:n),p&&i&&i.length>1&&c.call(i[0],t,(function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(i[r]=void 0)})),i}),e.exports=u},function(e,n,t){var i=t(392),r=t(57),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,l=i(function(){return arguments}())?i:function(e){return r(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=l},function(e,n,t){var i=t(44)(t(31),"Map");e.exports=i},function(e,n,t){var i=t(411),r=t(418),o=t(420),a=t(421),s=t(422);function l(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var i=e[n];this.set(i[0],i[1])}}l.prototype.clear=i,l.prototype.delete=r,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},function(e,n){e.exports=function(e){var n=-1,t=Array(e.size);return e.forEach((function(e){t[++n]=e})),t}},function(e,n){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,n,t){var i=t(32),r=t(162),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,n){if(i(e))return!1;var t=typeof e;return!("number"!=t&&"symbol"!=t&&"boolean"!=t&&null!=e&&!r(e))||(a.test(e)||!o.test(e)||null!=n&&e in Object(n))}},function(e,n,t){var i=t(76),r=t(57);e.exports=function(e){return"symbol"==typeof e||r(e)&&"[object Symbol]"==i(e)}},function(e,n,t){var i=t(3),r=t(12);i({target:"Object",stat:!0,forced:!r,sham:!r},{defineProperty:t(16).f})},function(e,n,t){"use strict";n.__esModule=!0,n.i18n=n.use=n.t=void 0;var i=a(t(492)),r=a(t(2)),o=a(t(493));function a(e){return e&&e.__esModule?e:{default:e}}var s=(0,a(t(494)).default)(r.default),l=i.default,c=!1,u=function(){var e=Object.getPrototypeOf(this||r.default).$t;if("function"==typeof e&&r.default.locale)return c||(c=!0,r.default.locale(r.default.config.lang,(0,o.default)(l,r.default.locale(r.default.config.lang)||{},{clone:!0}))),e.apply(this,arguments)},d=n.t=function(e,n){var t=u.apply(this,arguments);if(null!=t)return t;for(var i=e.split("."),r=l,o=0,a=i.length;o<a;o++){var c=i[o];if(t=r[c],o===a-1)return s(t,n);if(!t)return"";r=t}return""},h=n.use=function(e){l=e||l},p=n.i18n=function(e){u=e||u};n.default={use:h,t:d,i18n:p}},function(e,n,t){"use strict";n.__esModule=!0;var i=t(164);n.default={methods:{t:function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return i.t.apply(this,n)}}}},function(e,n,t){"use strict";n.__esModule=!0,n.default=function(){if(o.default.prototype.$isServer)return 0;if(void 0!==a)return a;var e=document.createElement("div");e.className="el-scrollbar__wrap",e.style.visibility="hidden",e.style.width="100px",e.style.position="absolute",e.style.top="-9999px",document.body.appendChild(e);var n=e.offsetWidth;e.style.overflow="scroll";var t=document.createElement("div");t.style.width="100%",e.appendChild(t);var i=t.offsetWidth;return e.parentNode.removeChild(e),a=n-i};var i,r=t(2),o=(i=r)&&i.__esModule?i:{default:i};var a=void 0},function(e,n,t){e.exports=function(e){var n={};function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(i,r,function(n){return e[n]}.bind(null,r));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/dist/",t(t.s=76)}({0:function(e,n,t){"use strict";function i(e,n,t,i,r,o,a,s){var l,c="function"==typeof e?e.options:e;if(n&&(c.render=n,c.staticRenderFns=t,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,n){return l.call(n),u(e,n)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:c}}t.d(n,"a",(function(){return i}))},11:function(e,n){e.exports=t(292)},21:function(e,n){e.exports=t(110)},4:function(e,n){e.exports=t(45)},76:function(e,n,t){"use strict";t.r(n);var i=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{class:["textarea"===e.type?"el-textarea":"el-input",e.inputSize?"el-input--"+e.inputSize:"",{"is-disabled":e.inputDisabled,"is-exceed":e.inputExceed,"el-input-group":e.$slots.prepend||e.$slots.append,"el-input-group--append":e.$slots.append,"el-input-group--prepend":e.$slots.prepend,"el-input--prefix":e.$slots.prefix||e.prefixIcon,"el-input--suffix":e.$slots.suffix||e.suffixIcon||e.clearable||e.showPassword}],on:{mouseenter:function(n){e.hovering=!0},mouseleave:function(n){e.hovering=!1}}},["textarea"!==e.type?[e.$slots.prepend?t("div",{staticClass:"el-input-group__prepend"},[e._t("prepend")],2):e._e(),"textarea"!==e.type?t("input",e._b({ref:"input",staticClass:"el-input__inner",attrs:{tabindex:e.tabindex,type:e.showPassword?e.passwordVisible?"text":"password":e.type,disabled:e.inputDisabled,readonly:e.readonly,autocomplete:e.autoComplete||e.autocomplete,"aria-label":e.label},on:{compositionstart:e.handleCompositionStart,compositionupdate:e.handleCompositionUpdate,compositionend:e.handleCompositionEnd,input:e.handleInput,focus:e.handleFocus,blur:e.handleBlur,change:e.handleChange}},"input",e.$attrs,!1)):e._e(),e.$slots.prefix||e.prefixIcon?t("span",{staticClass:"el-input__prefix"},[e._t("prefix"),e.prefixIcon?t("i",{staticClass:"el-input__icon",class:e.prefixIcon}):e._e()],2):e._e(),e.getSuffixVisible()?t("span",{staticClass:"el-input__suffix"},[t("span",{staticClass:"el-input__suffix-inner"},[e.showClear&&e.showPwdVisible&&e.isWordLimitVisible?e._e():[e._t("suffix"),e.suffixIcon?t("i",{staticClass:"el-input__icon",class:e.suffixIcon}):e._e()],e.showClear?t("i",{staticClass:"el-input__icon el-icon-circle-close el-input__clear",on:{mousedown:function(e){e.preventDefault()},click:e.clear}}):e._e(),e.showPwdVisible?t("i",{staticClass:"el-input__icon el-icon-view el-input__clear",on:{click:e.handlePasswordVisible}}):e._e(),e.isWordLimitVisible?t("span",{staticClass:"el-input__count"},[t("span",{staticClass:"el-input__count-inner"},[e._v("\n            "+e._s(e.textLength)+"/"+e._s(e.upperLimit)+"\n          ")])]):e._e()],2),e.validateState?t("i",{staticClass:"el-input__icon",class:["el-input__validateIcon",e.validateIcon]}):e._e()]):e._e(),e.$slots.append?t("div",{staticClass:"el-input-group__append"},[e._t("append")],2):e._e()]:t("textarea",e._b({ref:"textarea",staticClass:"el-textarea__inner",style:e.textareaStyle,attrs:{tabindex:e.tabindex,disabled:e.inputDisabled,readonly:e.readonly,autocomplete:e.autoComplete||e.autocomplete,"aria-label":e.label},on:{compositionstart:e.handleCompositionStart,compositionupdate:e.handleCompositionUpdate,compositionend:e.handleCompositionEnd,input:e.handleInput,focus:e.handleFocus,blur:e.handleBlur,change:e.handleChange}},"textarea",e.$attrs,!1)),e.isWordLimitVisible&&"textarea"===e.type?t("span",{staticClass:"el-input__count"},[e._v(e._s(e.textLength)+"/"+e._s(e.upperLimit))]):e._e()],2)};i._withStripped=!0;var r=t(4),o=t.n(r),a=t(11),s=t.n(a),l=void 0,c="\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important\n",u=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function d(e){var n=window.getComputedStyle(e),t=n.getPropertyValue("box-sizing"),i=parseFloat(n.getPropertyValue("padding-bottom"))+parseFloat(n.getPropertyValue("padding-top")),r=parseFloat(n.getPropertyValue("border-bottom-width"))+parseFloat(n.getPropertyValue("border-top-width"));return{contextStyle:u.map((function(e){return e+":"+n.getPropertyValue(e)})).join(";"),paddingSize:i,borderSize:r,boxSizing:t}}function h(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;l||(l=document.createElement("textarea"),document.body.appendChild(l));var i=d(e),r=i.paddingSize,o=i.borderSize,a=i.boxSizing,s=i.contextStyle;l.setAttribute("style",s+";"+c),l.value=e.value||e.placeholder||"";var u=l.scrollHeight,h={};"border-box"===a?u+=o:"content-box"===a&&(u-=r),l.value="";var p=l.scrollHeight-r;if(null!==n){var f=p*n;"border-box"===a&&(f=f+r+o),u=Math.max(f,u),h.minHeight=f+"px"}if(null!==t){var m=p*t;"border-box"===a&&(m=m+r+o),u=Math.min(m,u)}return h.height=u+"px",l.parentNode&&l.parentNode.removeChild(l),l=null,h}var p=t(9),f=t.n(p),m=t(21),g={name:"ElInput",componentName:"ElInput",mixins:[o.a,s.a],inheritAttrs:!1,inject:{elForm:{default:""},elFormItem:{default:""}},data:function(){return{textareaCalcStyle:{},hovering:!1,focused:!1,isComposing:!1,passwordVisible:!1}},props:{value:[String,Number],size:String,resize:String,form:String,disabled:Boolean,readonly:Boolean,type:{type:String,default:"text"},autosize:{type:[Boolean,Object],default:!1},autocomplete:{type:String,default:"off"},autoComplete:{type:String,validator:function(e){return!0}},validateEvent:{type:Boolean,default:!0},suffixIcon:String,prefixIcon:String,label:String,clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},tabindex:String},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},validateState:function(){return this.elFormItem?this.elFormItem.validateState:""},needStatusIcon:function(){return!!this.elForm&&this.elForm.statusIcon},validateIcon:function(){return{validating:"el-icon-loading",success:"el-icon-circle-check",error:"el-icon-circle-close"}[this.validateState]},textareaStyle:function(){return f()({},this.textareaCalcStyle,{resize:this.resize})},inputSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},inputDisabled:function(){return this.disabled||(this.elForm||{}).disabled},nativeInputValue:function(){return null===this.value||void 0===this.value?"":String(this.value)},showClear:function(){return this.clearable&&!this.inputDisabled&&!this.readonly&&this.nativeInputValue&&(this.focused||this.hovering)},showPwdVisible:function(){return this.showPassword&&!this.inputDisabled&&!this.readonly&&(!!this.nativeInputValue||this.focused)},isWordLimitVisible:function(){return this.showWordLimit&&this.$attrs.maxlength&&("text"===this.type||"textarea"===this.type)&&!this.inputDisabled&&!this.readonly&&!this.showPassword},upperLimit:function(){return this.$attrs.maxlength},textLength:function(){return"number"==typeof this.value?String(this.value).length:(this.value||"").length},inputExceed:function(){return this.isWordLimitVisible&&this.textLength>this.upperLimit}},watch:{value:function(e){this.$nextTick(this.resizeTextarea),this.validateEvent&&this.dispatch("ElFormItem","el.form.change",[e])},nativeInputValue:function(){this.setNativeInputValue()},type:function(){var e=this;this.$nextTick((function(){e.setNativeInputValue(),e.resizeTextarea(),e.updateIconOffset()}))}},methods:{focus:function(){this.getInput().focus()},blur:function(){this.getInput().blur()},getMigratingConfig:function(){return{props:{icon:"icon is removed, use suffix-icon / prefix-icon instead.","on-icon-click":"on-icon-click is removed."},events:{click:"click is removed."}}},handleBlur:function(e){this.focused=!1,this.$emit("blur",e),this.validateEvent&&this.dispatch("ElFormItem","el.form.blur",[this.value])},select:function(){this.getInput().select()},resizeTextarea:function(){if(!this.$isServer){var e=this.autosize;if("textarea"===this.type)if(e){var n=e.minRows,t=e.maxRows;this.textareaCalcStyle=h(this.$refs.textarea,n,t)}else this.textareaCalcStyle={minHeight:h(this.$refs.textarea).minHeight}}},setNativeInputValue:function(){var e=this.getInput();e&&e.value!==this.nativeInputValue&&(e.value=this.nativeInputValue)},handleFocus:function(e){this.focused=!0,this.$emit("focus",e)},handleCompositionStart:function(){this.isComposing=!0},handleCompositionUpdate:function(e){var n=e.target.value,t=n[n.length-1]||"";this.isComposing=!Object(m.isKorean)(t)},handleCompositionEnd:function(e){this.isComposing&&(this.isComposing=!1,this.handleInput(e))},handleInput:function(e){this.isComposing||e.target.value!==this.nativeInputValue&&(this.$emit("input",e.target.value),this.$nextTick(this.setNativeInputValue))},handleChange:function(e){this.$emit("change",e.target.value)},calcIconOffset:function(e){var n=[].slice.call(this.$el.querySelectorAll(".el-input__"+e)||[]);if(n.length){for(var t=null,i=0;i<n.length;i++)if(n[i].parentNode===this.$el){t=n[i];break}if(t){var r={suffix:"append",prefix:"prepend"}[e];this.$slots[r]?t.style.transform="translateX("+("suffix"===e?"-":"")+this.$el.querySelector(".el-input-group__"+r).offsetWidth+"px)":t.removeAttribute("style")}}},updateIconOffset:function(){this.calcIconOffset("prefix"),this.calcIconOffset("suffix")},clear:function(){this.$emit("input",""),this.$emit("change",""),this.$emit("clear")},handlePasswordVisible:function(){this.passwordVisible=!this.passwordVisible,this.focus()},getInput:function(){return this.$refs.input||this.$refs.textarea},getSuffixVisible:function(){return this.$slots.suffix||this.suffixIcon||this.showClear||this.showPassword||this.isWordLimitVisible||this.validateState&&this.needStatusIcon}},created:function(){this.$on("inputSelect",this.select)},mounted:function(){this.setNativeInputValue(),this.resizeTextarea(),this.updateIconOffset()},updated:function(){this.$nextTick(this.updateIconOffset)}},v=t(0),b=Object(v.a)(g,i,[],!1,null,null,null);b.options.__file="packages/input/src/input.vue";var y=b.exports;y.install=function(e){e.component(y.name,y)};n.default=y},9:function(e,n){e.exports=t(109)}})},function(e,n,t){"use strict";n.__esModule=!0,n.removeResizeListener=n.addResizeListener=void 0;var i,r=t(498),o=(i=r)&&i.__esModule?i:{default:i};var a="undefined"==typeof window,s=function(e){var n=e,t=Array.isArray(n),i=0;for(n=t?n:n[Symbol.iterator]();;){var r;if(t){if(i>=n.length)break;r=n[i++]}else{if((i=n.next()).done)break;r=i.value}var o=r.target.__resizeListeners__||[];o.length&&o.forEach((function(e){e()}))}};n.addResizeListener=function(e,n){a||(e.__resizeListeners__||(e.__resizeListeners__=[],e.__ro__=new o.default(s),e.__ro__.observe(e)),e.__resizeListeners__.push(n))},n.removeResizeListener=function(e,n){e&&e.__resizeListeners__&&(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(n),1),e.__resizeListeners__.length||e.__ro__.disconnect())}},function(e,n){e.exports=function(e,n,t,i){var r,o=0;return"boolean"!=typeof n&&(i=t,t=n,n=void 0),function(){var a=this,s=Number(new Date)-o,l=arguments;function c(){o=Number(new Date),t.apply(a,l)}function u(){r=void 0}i&&!r&&c(),r&&clearTimeout(r),void 0===i&&s>e?c():!0!==n&&(r=setTimeout(i?u:c,void 0===i?e-s:e))}}},function(e,n,t){e.exports=function(e){var n={};function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(i,r,function(n){return e[n]}.bind(null,r));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/dist/",t(t.s=127)}({127:function(e,n,t){"use strict";t.r(n);var i=t(16),r=t(38),o=t.n(r),a=t(3),s=t(2),l={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}};function c(e){var n=e.move,t=e.size,i=e.bar,r={},o="translate"+i.axis+"("+n+"%)";return r[i.size]=t,r.transform=o,r.msTransform=o,r.webkitTransform=o,r}var u={name:"Bar",props:{vertical:Boolean,size:String,move:Number},computed:{bar:function(){return l[this.vertical?"vertical":"horizontal"]},wrap:function(){return this.$parent.wrap}},render:function(e){var n=this.size,t=this.move,i=this.bar;return e("div",{class:["el-scrollbar__bar","is-"+i.key],on:{mousedown:this.clickTrackHandler}},[e("div",{ref:"thumb",class:"el-scrollbar__thumb",on:{mousedown:this.clickThumbHandler},style:c({size:n,move:t,bar:i})})])},methods:{clickThumbHandler:function(e){e.ctrlKey||2===e.button||(this.startDrag(e),this[this.bar.axis]=e.currentTarget[this.bar.offset]-(e[this.bar.client]-e.currentTarget.getBoundingClientRect()[this.bar.direction]))},clickTrackHandler:function(e){var n=100*(Math.abs(e.target.getBoundingClientRect()[this.bar.direction]-e[this.bar.client])-this.$refs.thumb[this.bar.offset]/2)/this.$el[this.bar.offset];this.wrap[this.bar.scroll]=n*this.wrap[this.bar.scrollSize]/100},startDrag:function(e){e.stopImmediatePropagation(),this.cursorDown=!0,Object(s.on)(document,"mousemove",this.mouseMoveDocumentHandler),Object(s.on)(document,"mouseup",this.mouseUpDocumentHandler),document.onselectstart=function(){return!1}},mouseMoveDocumentHandler:function(e){if(!1!==this.cursorDown){var n=this[this.bar.axis];if(n){var t=100*(-1*(this.$el.getBoundingClientRect()[this.bar.direction]-e[this.bar.client])-(this.$refs.thumb[this.bar.offset]-n))/this.$el[this.bar.offset];this.wrap[this.bar.scroll]=t*this.wrap[this.bar.scrollSize]/100}}},mouseUpDocumentHandler:function(e){this.cursorDown=!1,this[this.bar.axis]=0,Object(s.off)(document,"mousemove",this.mouseMoveDocumentHandler),document.onselectstart=null}},destroyed:function(){Object(s.off)(document,"mouseup",this.mouseUpDocumentHandler)}},d={name:"ElScrollbar",components:{Bar:u},props:{native:Boolean,wrapStyle:{},wrapClass:{},viewClass:{},viewStyle:{},noresize:Boolean,tag:{type:String,default:"div"}},data:function(){return{sizeWidth:"0",sizeHeight:"0",moveX:0,moveY:0}},computed:{wrap:function(){return this.$refs.wrap}},render:function(e){var n=o()(),t=this.wrapStyle;if(n){var i="-"+n+"px",r="margin-bottom: "+i+"; margin-right: "+i+";";Array.isArray(this.wrapStyle)?(t=Object(a.toObject)(this.wrapStyle)).marginRight=t.marginBottom=i:"string"==typeof this.wrapStyle?t+=r:t=r}var s=e(this.tag,{class:["el-scrollbar__view",this.viewClass],style:this.viewStyle,ref:"resize"},this.$slots.default),l=e("div",{ref:"wrap",style:t,on:{scroll:this.handleScroll},class:[this.wrapClass,"el-scrollbar__wrap",n?"":"el-scrollbar__wrap--hidden-default"]},[[s]]),c=void 0;return c=this.native?[e("div",{ref:"wrap",class:[this.wrapClass,"el-scrollbar__wrap"],style:t},[[s]])]:[l,e(u,{attrs:{move:this.moveX,size:this.sizeWidth}}),e(u,{attrs:{vertical:!0,move:this.moveY,size:this.sizeHeight}})],e("div",{class:"el-scrollbar"},c)},methods:{handleScroll:function(){var e=this.wrap;this.moveY=100*e.scrollTop/e.clientHeight,this.moveX=100*e.scrollLeft/e.clientWidth},update:function(){var e,n,t=this.wrap;t&&(e=100*t.clientHeight/t.scrollHeight,n=100*t.clientWidth/t.scrollWidth,this.sizeHeight=e<100?e+"%":"",this.sizeWidth=n<100?n+"%":"")}},mounted:function(){this.native||(this.$nextTick(this.update),!this.noresize&&Object(i.addResizeListener)(this.$refs.resize,this.update))},beforeDestroy:function(){this.native||!this.noresize&&Object(i.removeResizeListener)(this.$refs.resize,this.update)},install:function(e){e.component(d.name,d)}};n.default=d},16:function(e,n){e.exports=t(168)},2:function(e,n){e.exports=t(33)},3:function(e,n){e.exports=t(27)},38:function(e,n){e.exports=t(166)}})},function(e,n,t){"use strict";n.__esModule=!0,n.default=function(e){return{methods:{focus:function(){this.$refs[e].focus()}}}}},function(e,n,t){"use strict";n.__esModule=!0,n.default=function(e,n){if(o.default.prototype.$isServer)return;if(!n)return void(e.scrollTop=0);var t=[],i=n.offsetParent;for(;i&&e!==i&&e.contains(i);)t.push(i),i=i.offsetParent;var r=n.offsetTop+t.reduce((function(e,n){return e+n.offsetTop}),0),a=r+n.offsetHeight,s=e.scrollTop,l=s+e.clientHeight;r<s?e.scrollTop=r:a>l&&(e.scrollTop=a-e.clientHeight)};var i,r=t(2),o=(i=r)&&i.__esModule?i:{default:i}},function(e,n,t){"use strict";n.__esModule=!0;var i=i||{};i.Utils=i.Utils||{},i.Utils.focusFirstDescendant=function(e){for(var n=0;n<e.childNodes.length;n++){var t=e.childNodes[n];if(i.Utils.attemptFocus(t)||i.Utils.focusFirstDescendant(t))return!0}return!1},i.Utils.focusLastDescendant=function(e){for(var n=e.childNodes.length-1;n>=0;n--){var t=e.childNodes[n];if(i.Utils.attemptFocus(t)||i.Utils.focusLastDescendant(t))return!0}return!1},i.Utils.attemptFocus=function(e){if(!i.Utils.isFocusable(e))return!1;i.Utils.IgnoreUtilFocusChanges=!0;try{e.focus()}catch(e){}return i.Utils.IgnoreUtilFocusChanges=!1,document.activeElement===e},i.Utils.isFocusable=function(e){if(e.tabIndex>0||0===e.tabIndex&&null!==e.getAttribute("tabIndex"))return!0;if(e.disabled)return!1;switch(e.nodeName){case"A":return!!e.href&&"ignore"!==e.rel;case"INPUT":return"hidden"!==e.type&&"file"!==e.type;case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},i.Utils.triggerEvent=function(e,n){var t=void 0;t=/^mouse|click/.test(n)?"MouseEvents":/^key/.test(n)?"KeyboardEvent":"HTMLEvents";for(var i=document.createEvent(t),r=arguments.length,o=Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];return i.initEvent.apply(i,[n].concat(o)),e.dispatchEvent?e.dispatchEvent(i):e.fireEvent("on"+n,i),e},i.Utils.keys={tab:9,enter:13,space:32,left:37,up:38,right:39,down:40,esc:27},n.default=i.Utils},function(e,n,t){var i=t(37),r=t(77),o=t(518),a=t(58),s=t(47),l=function(e,n,t){var c,u,d,h=e&l.F,p=e&l.G,f=e&l.S,m=e&l.P,g=e&l.B,v=e&l.W,b=p?r:r[n]||(r[n]={}),y=b.prototype,w=p?i:f?i[n]:(i[n]||{}).prototype;for(c in p&&(t=n),t)(u=!h&&w&&void 0!==w[c])&&s(b,c)||(d=u?w[c]:t[c],b[c]=p&&"function"!=typeof w[c]?t[c]:g&&u?o(d,i):v&&w[c]==d?function(e){var n=function(n,t,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(n);case 2:return new e(n,t)}return new e(n,t,i)}return e.apply(this,arguments)};return n.prototype=e.prototype,n}(d):m&&"function"==typeof d?o(Function.call,d):d,m&&((b.virtual||(b.virtual={}))[c]=d,e&l.R&&y&&!y[c]&&a(y,c,d)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e,n,t){var i=t(78);e.exports=function(e,n){if(!i(e))return e;var t,r;if(n&&"function"==typeof(t=e.toString)&&!i(r=t.call(e)))return r;if("function"==typeof(t=e.valueOf)&&!i(r=t.call(e)))return r;if(!n&&"function"==typeof(t=e.toString)&&!i(r=t.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,n){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,n){var t=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:t)(e)}},function(e,n,t){var i=t(179)("keys"),r=t(116);e.exports=function(e){return i[e]||(i[e]=r(e))}},function(e,n,t){var i=t(77),r=t(37),o=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(e.exports=function(e,n){return o[e]||(o[e]=void 0!==n?n:{})})("versions",[]).push({version:i.version,mode:t(115)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(e,n){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,n){n.f=Object.getOwnPropertySymbols},function(e,n,t){var i=t(176);e.exports=function(e){return Object(i(e))}},function(e,n){e.exports={}},function(e,n,t){var i=t(59).f,r=t(47),o=t(61)("toStringTag");e.exports=function(e,n,t){e&&!r(e=t?e:e.prototype,o)&&i(e,o,{configurable:!0,value:n})}},function(e,n,t){n.f=t(61)},function(e,n,t){var i=t(37),r=t(77),o=t(115),a=t(185),s=t(59).f;e.exports=function(e){var n=r.Symbol||(r.Symbol=o?{}:i.Symbol||{});"_"==e.charAt(0)||e in n||s(n,e,{value:a.f(e)})}},function(e,n,t){var i=t(3),r=t(70),o=t(55),a=t(11),s=t(10),l=t(54),c=t(306),u=t(5),d=r("Reflect","construct"),h=u((function(){function e(){}return!(d((function(){}),[],e)instanceof e)})),p=!u((function(){d((function(){}))})),f=h||p;i({target:"Reflect",stat:!0,forced:f,sham:f},{construct:function(e,n){o(e),a(n);var t=arguments.length<3?e:o(arguments[2]);if(p&&!h)return d(e,n,t);if(e==t){switch(n.length){case 0:return new e;case 1:return new e(n[0]);case 2:return new e(n[0],n[1]);case 3:return new e(n[0],n[1],n[2]);case 4:return new e(n[0],n[1],n[2],n[3])}var i=[null];return i.push.apply(i,n),new(c.apply(e,i))}var r=t.prototype,u=l(s(r)?r:Object.prototype),f=Function.apply.call(e,u,n);return s(f)?f:u}})},function(e,n,t){"use strict";var i=t(243).charAt;e.exports=function(e,n,t){return n+(t?i(e,n).length:1)}},function(e,n,t){var i=t(32),r=t(161),o=t(447),a=t(450);e.exports=function(e,n){return i(e)?e:r(e,n)?[e]:o(a(e))}},function(e,n,t){"use strict";var i=t(3),r=t(485);i({target:"String",proto:!0,forced:t(486)("link")},{link:function(e){return r(this,"a","href",e)}})},function(e,n){!function(n){"use strict";var t=Object.prototype,i=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag",l="object"==typeof e,c=n.regeneratorRuntime;if(c)l&&(e.exports=c);else{(c=n.regeneratorRuntime=l?e.exports:{}).wrap=m;var u={},d={};d[o]=function(){return this};var h=Object.getPrototypeOf,p=h&&h(h(E([])));p&&p!==t&&i.call(p,o)&&(d=p);var f=y.prototype=v.prototype=Object.create(d);b.prototype=f.constructor=y,y.constructor=b,y[s]=b.displayName="GeneratorFunction",c.isGeneratorFunction=function(e){var n="function"==typeof e&&e.constructor;return!!n&&(n===b||"GeneratorFunction"===(n.displayName||n.name))},c.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(f),e},c.awrap=function(e){return{__await:e}},w(x.prototype),x.prototype[a]=function(){return this},c.AsyncIterator=x,c.async=function(e,n,t,i){var r=new x(m(e,n,t,i));return c.isGeneratorFunction(n)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},w(f),f[s]="Generator",f[o]=function(){return this},f.toString=function(){return"[object Generator]"},c.keys=function(e){var n=[];for(var t in e)n.push(t);return n.reverse(),function t(){for(;n.length;){var i=n.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},c.values=E,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function t(t,i){return a.type="throw",a.arg=e,n.next=t,i&&(n.method="next",n.arg=void 0),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],a=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var s=i.call(o,"catchLoc"),l=i.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(e,n){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=n,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(a)},complete:function(e,n){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&n&&(this.next=n),u},finish:function(e){for(var n=this.tryEntries.length-1;n>=0;--n){var t=this.tryEntries[n];if(t.finallyLoc===e)return this.complete(t.completion,t.afterLoc),k(t),u}},catch:function(e){for(var n=this.tryEntries.length-1;n>=0;--n){var t=this.tryEntries[n];if(t.tryLoc===e){var i=t.completion;if("throw"===i.type){var r=i.arg;k(t)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,t){return this.delegate={iterator:E(e),resultName:n,nextLoc:t},"next"===this.method&&(this.arg=void 0),u}}}function m(e,n,t,i){var r=n&&n.prototype instanceof v?n:v,o=Object.create(r.prototype),a=new C(i||[]);return o._invoke=function(e,n,t){var i="suspendedStart";return function(r,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw o;return T()}for(t.method=r,t.arg=o;;){var a=t.delegate;if(a){var s=_(a,t);if(s){if(s===u)continue;return s}}if("next"===t.method)t.sent=t._sent=t.arg;else if("throw"===t.method){if("suspendedStart"===i)throw i="completed",t.arg;t.dispatchException(t.arg)}else"return"===t.method&&t.abrupt("return",t.arg);i="executing";var l=g(e,n,t);if("normal"===l.type){if(i=t.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:t.done}}"throw"===l.type&&(i="completed",t.method="throw",t.arg=l.arg)}}}(e,t,a),o}function g(e,n,t){try{return{type:"normal",arg:e.call(n,t)}}catch(e){return{type:"throw",arg:e}}}function v(){}function b(){}function y(){}function w(e){["next","throw","return"].forEach((function(n){e[n]=function(e){return this._invoke(n,e)}}))}function x(e){var n;this._invoke=function(t,r){function o(){return new Promise((function(n,o){!function n(t,r,o,a){var s=g(e[t],e,r);if("throw"!==s.type){var l=s.arg,c=l.value;return c&&"object"==typeof c&&i.call(c,"__await")?Promise.resolve(c.__await).then((function(e){n("next",e,o,a)}),(function(e){n("throw",e,o,a)})):Promise.resolve(c).then((function(e){l.value=e,o(l)}),a)}a(s.arg)}(t,r,n,o)}))}return n=n?n.then(o,o):o()}}function _(e,n){var t=e.iterator[n.method];if(void 0===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=void 0,_(e,n),"throw"===n.method))return u;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var i=g(t,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,u;var r=i.arg;return r?r.done?(n[e.resultName]=r.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,u):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,u)}function S(e){var n={tryLoc:e[0]};1 in e&&(n.catchLoc=e[1]),2 in e&&(n.finallyLoc=e[2],n.afterLoc=e[3]),this.tryEntries.push(n)}function k(e){var n=e.completion||{};n.type="normal",delete n.arg,e.completion=n}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function E(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var t=-1,r=function n(){for(;++t<e.length;)if(i.call(e,t))return n.value=e[t],n.done=!1,n;return n.value=void 0,n.done=!0,n};return r.next=r}}return{next:T}}function T(){return{value:void 0,done:!0}}}(function(){return this}()||Function("return this")())},function(e,n){e.exports=function(e,n){for(var t=-1,i=n.length,r=e.length;++t<i;)e[r+t]=n[t];return e}},function(e,n){e.exports=function(e,n){return e===n||e!=e&&n!=n}},function(e,n){var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var i=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==i||"symbol"!=i&&t.test(e))&&e>-1&&e%1==0&&e<n}},function(e,n,t){var i=t(268),r=t(160);e.exports=function(e){return null!=e&&r(e.length)&&!i(e)}},function(e,n,t){var i=t(189),r=t(83);e.exports=function(e,n){for(var t=0,o=(n=i(n,e)).length;null!=e&&t<o;)e=e[r(n[t++])];return t&&t==o?e:void 0}},function(e,n){var t=/^(attrs|props|on|nativeOn|class|style|hook)$/;function i(e,n){return function(){e&&e.apply(this,arguments),n&&n.apply(this,arguments)}}e.exports=function(e){return e.reduce((function(e,n){var r,o,a,s,l;for(a in n)if(r=e[a],o=n[a],r&&t.test(a))if("class"===a&&("string"==typeof r&&(l=r,e[a]=r={},r[l]=!0),"string"==typeof o&&(l=o,n[a]=o={},o[l]=!0)),"on"===a||"nativeOn"===a||"hook"===a)for(s in o)r[s]=i(r[s],o[s]);else if(Array.isArray(r))e[a]=r.concat(o);else if(Array.isArray(o))e[a]=[r].concat(o);else for(s in o)r[s]=o[s];else e[a]=n[a];return e}),{})}},function(e,n,t){"use strict";var i=t(3),r=t(39).some;i({target:"Array",proto:!0,forced:!t(43)("some")},{some:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,n,t){var i=t(4),r=t(13),o=t(19),a=t(126),s=i.Object,l=r("".split);e.exports=o((function(){return!s("z").propertyIsEnumerable(0)}))?function(e){return"String"==a(e)?l(e,""):s(e)}:s},function(e,n,t){var i=t(4).TypeError;e.exports=function(e){if(null==e)throw i("Can't call method on "+e);return e}},function(e,n,t){var i=t(64),r=t(127);(e.exports=function(e,n){return r[e]||(r[e]=void 0!==n?n:{})})("versions",[]).push({version:"3.19.3",mode:i?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},function(e,n,t){var i=t(13),r=0,o=Math.random(),a=i(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+a(++r+o,36)}},function(e,n,t){var i=t(204),r=t(19);e.exports=!!Object.getOwnPropertySymbols&&!r((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&i&&i<41}))},function(e,n,t){var i,r,o=t(4),a=t(84),s=o.process,l=o.Deno,c=s&&s.versions||l&&l.version,u=c&&c.v8;u&&(r=(i=u.split("."))[0]>0&&i[0]<4?1:+(i[0]+i[1])),!r&&a&&(!(i=a.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=a.match(/Chrome\/(\d+)/))&&(r=+i[1]),e.exports=r},function(e,n,t){var i=t(203);e.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,n,t){var i=t(35),r=t(19),o=t(131);e.exports=!i&&!r((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},function(e,n,t){var i=t(336),r=t(208);e.exports=function(e){var n=i(e,"string");return r(n)?n:n+""}},function(e,n,t){var i=t(4),r=t(34),o=t(8),a=t(132),s=t(205),l=i.Object;e.exports=s?function(e){return"symbol"==typeof e}:function(e){var n=r("Symbol");return o(n)&&a(n.prototype,l(e))}},function(e,n,t){var i=t(210),r=t(135);e.exports=Object.keys||function(e){return i(e,r)}},function(e,n,t){var i=t(13),r=t(23),o=t(63),a=t(338).indexOf,s=t(134),l=i([].push);e.exports=function(e,n){var t,i=o(e),c=0,u=[];for(t in i)!r(s,t)&&r(i,t)&&l(u,t);for(;n.length>c;)r(i,t=n[c++])&&(~a(u,t)||l(u,t));return u}},function(e,n){var t=Math.ceil,i=Math.floor;e.exports=function(e){var n=+e;return n!=n||0===n?0:(n>0?i:t)(n)}},function(e,n,t){var i=t(340);e.exports=function(e){return i(e.length)}},function(e,n,t){var i=t(34);e.exports=i("document","documentElement")},function(e,n,t){"use strict";var i={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,o=r&&!i.call({1:2},1);n.f=o?function(e){var n=r(this,e);return!!n&&n.enumerable}:i},function(e,n,t){var i=t(35),r=t(23),o=Function.prototype,a=i&&Object.getOwnPropertyDescriptor,s=r(o,"name"),l=s&&"something"===function(){}.name,c=s&&(!i||i&&a(o,"name").configurable);e.exports={EXISTS:s,PROPER:l,CONFIGURABLE:c}},function(e,n){n.f=Object.getOwnPropertySymbols},function(e,n,t){var i=t(19),r=t(8),o=/#|\.prototype\./,a=function(e,n){var t=l[s(e)];return t==u||t!=c&&(r(n)?i(n):!!n)},s=a.normalize=function(e){return String(e).replace(o,".").toLowerCase()},l=a.data={},c=a.NATIVE="N",u=a.POLYFILL="P";e.exports=a},function(e,n,t){"use strict";var i,r,o,a=t(19),s=t(8),l=t(130),c=t(219),u=t(53),d=t(15),h=t(64),p=d("iterator"),f=!1;[].keys&&("next"in(o=[].keys())?(r=c(c(o)))!==Object.prototype&&(i=r):f=!0),null==i||a((function(){var e={};return i[p].call(e)!==e}))?i={}:h&&(i=l(i)),s(i[p])||u(i,p,(function(){return this})),e.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:f}},function(e,n,t){var i=t(4),r=t(23),o=t(8),a=t(129),s=t(136),l=t(347),c=s("IE_PROTO"),u=i.Object,d=u.prototype;e.exports=l?u.getPrototypeOf:function(e){var n=a(e);if(r(n,c))return n[c];var t=n.constructor;return o(t)&&n instanceof t?t.prototype:n instanceof u?d:null}},function(e,n,t){var i=t(13),r=t(24),o=t(348);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,n=!1,t={};try{(e=i(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(t,[]),n=t instanceof Array}catch(e){}return function(t,i){return r(t),o(i),n?e(t,i):t.__proto__=i,t}}():void 0)},function(e,n,t){var i=t(4);e.exports=i.Promise},function(e,n,t){var i=t(223),r=t(133),o=t(66),a=t(15)("iterator");e.exports=function(e){if(null!=e)return r(e,a)||r(e,"@@iterator")||o[i(e)]}},function(e,n,t){var i=t(4),r=t(356),o=t(8),a=t(126),s=t(15)("toStringTag"),l=i.Object,c="Arguments"==a(function(){return arguments}());e.exports=r?a:function(e){var n,t,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(t=function(e,n){try{return e[n]}catch(e){}}(n=l(e),s))?t:c?a(n):"Object"==(i=a(n))&&o(n.callee)?"Arguments":i}},function(e,n,t){var i=t(24),r=t(359),o=t(15)("species");e.exports=function(e,n){var t,a=i(e).constructor;return void 0===a||null==(t=i(a)[o])?n:r(t)}},function(e,n,t){var i,r,o,a,s=t(4),l=t(361),c=t(141),u=t(8),d=t(23),h=t(19),p=t(213),f=t(362),m=t(131),g=t(226),v=t(142),b=s.setImmediate,y=s.clearImmediate,w=s.process,x=s.Dispatch,_=s.Function,S=s.MessageChannel,k=s.String,C=0,E={};try{i=s.location}catch(e){}var T=function(e){if(d(E,e)){var n=E[e];delete E[e],n()}},P=function(e){return function(){T(e)}},O=function(e){T(e.data)},A=function(e){s.postMessage(k(e),i.protocol+"//"+i.host)};b&&y||(b=function(e){var n=f(arguments,1);return E[++C]=function(){l(u(e)?e:_(e),void 0,n)},r(C),C},y=function(e){delete E[e]},v?r=function(e){w.nextTick(P(e))}:x&&x.now?r=function(e){x.now(P(e))}:S&&!g?(a=(o=new S).port2,o.port1.onmessage=O,r=c(a.postMessage,a)):s.addEventListener&&u(s.postMessage)&&!s.importScripts&&i&&"file:"!==i.protocol&&!h(A)?(r=A,s.addEventListener("message",O,!1)):r="onreadystatechange"in m("script")?function(e){p.appendChild(m("script")).onreadystatechange=function(){p.removeChild(this),T(e)}}:function(e){setTimeout(P(e),0)}),e.exports={set:b,clear:y}},function(e,n,t){var i=t(84);e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(i)},function(e,n,t){var i=t(24),r=t(40),o=t(228);e.exports=function(e,n){if(i(e),r(n)&&n.constructor===e)return n;var t=o.f(e);return(0,t.resolve)(n),t.promise}},function(e,n,t){"use strict";var i=t(65),r=function(e){var n,t;this.promise=new e((function(e,i){if(void 0!==n||void 0!==t)throw TypeError("Bad Promise constructor");n=e,t=i})),this.resolve=i(n),this.reject=i(t)};e.exports.f=function(e){return new r(e)}},function(e,n,t){var i=t(12),r=t(5),o=t(230);e.exports=!i&&!r((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},function(e,n,t){var i=t(9),r=t(10),o=i.document,a=r(o)&&r(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},function(e,n,t){var i=t(41),r=t(9);e.exports="process"==i(r.process)},function(e,n,t){var i=t(70);e.exports=i("navigator","userAgent")||""},function(e,n,t){var i=t(9);e.exports=i},function(e,n,t){var i=t(146);e.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,n,t){var i=t(144),r=Function.toString;"function"!=typeof i.inspectSource&&(i.inspectSource=function(e){return r.call(e)}),e.exports=i.inspectSource},function(e,n,t){var i=t(143),r=t(41),o=t(6)("toStringTag"),a="Arguments"==r(function(){return arguments}());e.exports=i?r:function(e){var n,t,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(t=function(e,n){try{return e[n]}catch(e){}}(n=Object(e),o))?t:a?r(n):"Object"==(i=r(n))&&"function"==typeof n.callee?"Arguments":i}},function(e,n,t){var i=t(14),r=t(238),o=t(42),a=t(16);e.exports=function(e,n){for(var t=r(n),s=a.f,l=o.f,c=0;c<t.length;c++){var u=t[c];i(e,u)||s(e,u,l(n,u))}}},function(e,n,t){var i=t(70),r=t(95),o=t(241),a=t(11);e.exports=i("Reflect","ownKeys")||function(e){var n=r.f(a(e)),t=o.f;return t?n.concat(t(e)):n}},function(e,n,t){var i=t(14),r=t(20),o=t(148).indexOf,a=t(71);e.exports=function(e,n){var t,s=r(e),l=0,c=[];for(t in s)!i(a,t)&&i(s,t)&&c.push(t);for(;n.length>l;)i(s,t=n[l++])&&(~o(c,t)||c.push(t));return c}},function(e,n,t){var i=t(96),r=Math.max,o=Math.min;e.exports=function(e,n){var t=i(e);return t<0?r(t+n,0):o(t,n)}},function(e,n){n.f=Object.getOwnPropertySymbols},function(e,n,t){var i=t(5),r=/#|\.prototype\./,o=function(e,n){var t=s[a(e)];return t==c||t!=l&&("function"==typeof n?i(n):!!n)},a=o.normalize=function(e){return String(e).replace(r,".").toLowerCase()},s=o.data={},l=o.NATIVE="N",c=o.POLYFILL="P";e.exports=o},function(e,n,t){var i=t(96),r=t(21),o=function(e){return function(n,t){var o,a,s=String(r(n)),l=i(t),c=s.length;return l<0||l>=c?e?"":void 0:(o=s.charCodeAt(l))<55296||o>56319||l+1===c||(a=s.charCodeAt(l+1))<56320||a>57343?e?s.charAt(l):o:e?s.slice(l,l+2):a-56320+(o-55296<<10)+65536}};e.exports={codeAt:o(!1),charAt:o(!0)}},function(e,n,t){"use strict";var i=t(3),r=t(374),o=t(150),a=t(152),s=t(151),l=t(25),c=t(36),u=t(6),d=t(67),h=t(73),p=t(245),f=p.IteratorPrototype,m=p.BUGGY_SAFARI_ITERATORS,g=u("iterator"),v=function(){return this};e.exports=function(e,n,t,u,p,b,y){r(t,n,u);var w,x,_,S=function(e){if(e===p&&P)return P;if(!m&&e in E)return E[e];switch(e){case"keys":case"values":case"entries":return function(){return new t(this,e)}}return function(){return new t(this)}},k=n+" Iterator",C=!1,E=e.prototype,T=E[g]||E["@@iterator"]||p&&E[p],P=!m&&T||S(p),O="Array"==n&&E.entries||T;if(O&&(w=o(O.call(new e)),f!==Object.prototype&&w.next&&(d||o(w)===f||(a?a(w,f):"function"!=typeof w[g]&&l(w,g,v)),s(w,k,!0,!0),d&&(h[k]=v))),"values"==p&&T&&"values"!==T.name&&(C=!0,P=function(){return T.call(this)}),d&&!y||E[g]===P||l(E,g,P),h[n]=P,p)if(x={values:S("values"),keys:b?P:S("keys"),entries:S("entries")},y)for(_ in x)(m||C||!(_ in E))&&c(E,_,x[_]);else i({target:n,proto:!0,forced:m||C},x);return x}},function(e,n,t){"use strict";var i,r,o,a=t(5),s=t(150),l=t(25),c=t(14),u=t(6),d=t(67),h=u("iterator"),p=!1;[].keys&&("next"in(o=[].keys())?(r=s(s(o)))!==Object.prototype&&(i=r):p=!0);var f=null==i||a((function(){var e={};return i[h].call(e)!==e}));f&&(i={}),d&&!f||c(i,h)||l(i,h,(function(){return this})),e.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:p}},function(e,n,t){var i=t(5);e.exports=!i((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},function(e,n,t){var i=t(12),r=t(16),o=t(11),a=t(99);e.exports=i?Object.defineProperties:function(e,n){o(e);for(var t,i=a(n),s=i.length,l=0;s>l;)r.f(e,t=i[l++],n[t]);return e}},function(e,n){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(e,n,t){var i=t(55);e.exports=function(e,n,t){if(i(e),void 0===n)return e;switch(t){case 0:return function(){return e.call(n)};case 1:return function(t){return e.call(n,t)};case 2:return function(t,i){return e.call(n,t,i)};case 3:return function(t,i,r){return e.call(n,t,i,r)}}return function(){return e.apply(n,arguments)}}},function(e,n,t){var i=t(10),r=t(72),o=t(6)("species");e.exports=function(e,n){var t;return r(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!r(t.prototype)?i(t)&&null===(t=t[o])&&(t=void 0):t=void 0),new(void 0===t?Array:t)(0===n?0:n)}},function(e,n,t){var i=t(3),r=t(12),o=t(238),a=t(20),s=t(42),l=t(97);i({target:"Object",stat:!0,sham:!r},{getOwnPropertyDescriptors:function(e){for(var n,t,i=a(e),r=s.f,c=o(i),u={},d=0;c.length>d;)void 0!==(t=r(i,n=c[d++]))&&l(u,n,t);return u}})},function(e,n,t){var i=t(3),r=t(5),o=t(26),a=t(150),s=t(246);i({target:"Object",stat:!0,forced:r((function(){a(1)})),sham:!s},{getPrototypeOf:function(e){return a(o(e))}})},function(e,n,t){"use strict";var i=t(3),r=t(378).left,o=t(43),a=t(91),s=t(231);i({target:"Array",proto:!0,forced:!o("reduce")||!s&&a>79&&a<83},{reduce:function(e){return r(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},function(e,n,t){var i=t(255);e.exports=function(e){if(i(e))throw TypeError("The method doesn't accept regular expressions");return e}},function(e,n,t){var i=t(10),r=t(41),o=t(6)("match");e.exports=function(e){var n;return i(e)&&(void 0!==(n=e[o])?!!n:"RegExp"==r(e))}},function(e,n,t){var i=t(6)("match");e.exports=function(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[i]=!1,"/./"[e](n)}catch(e){}}return!1}},function(e,n,t){"use strict";var i=t(39).forEach,r=t(43)("forEach");e.exports=r?[].forEach:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}},function(e,n,t){var i=t(5);e.exports=!i((function(){return Object.isExtensible(Object.preventExtensions({}))}))},function(e,n,t){var i=t(6);n.f=i},function(e,n,t){var i=t(233),r=t(14),o=t(259),a=t(16).f;e.exports=function(e){var n=i.Symbol||(i.Symbol={});r(n,e)||a(n,e,{value:o.f(e)})}},function(e,n,t){var i=t(3),r=t(383);i({target:"Array",stat:!0,forced:!t(388)((function(e){Array.from(e)}))},{from:r})},function(e,n,t){t(3)({target:"Object",stat:!0,sham:!t(12)},{create:t(54)})},function(e,n,t){"use strict";var i=t(11);e.exports=function(){var e=i(this),n="";return e.global&&(n+="g"),e.ignoreCase&&(n+="i"),e.multiline&&(n+="m"),e.dotAll&&(n+="s"),e.unicode&&(n+="u"),e.sticky&&(n+="y"),n}},function(e,n,t){"use strict";var i=t(5);function r(e,n){return RegExp(e,n)}n.UNSUPPORTED_Y=i((function(){var e=r("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),n.BROKEN_CARET=i((function(){var e=r("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},function(e,n,t){"use strict";var i=t(3),r=t(94),o=t(20),a=t(43),s=[].join,l=r!=Object,c=a("join",",");i({target:"Array",proto:!0,forced:l||!c},{join:function(e){return s.call(o(this),void 0===e?",":e)}})},function(e,n){var t="object"==typeof global&&global&&global.Object===Object&&global;e.exports=t},function(e,n,t){var i=t(104),r=t(402),o=t(403),a=t(404),s=t(405),l=t(406);function c(e){var n=this.__data__=new i(e);this.size=n.size}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=s,c.prototype.set=l,e.exports=c},function(e,n,t){var i=t(76),r=t(123);e.exports=function(e){if(!r(e))return!1;var n=i(e);return"[object Function]"==n||"[object GeneratorFunction]"==n||"[object AsyncFunction]"==n||"[object Proxy]"==n}},function(e,n){var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,n,t){var i=t(423),r=t(57);e.exports=function e(n,t,o,a,s){return n===t||(null==n||null==t||!r(n)&&!r(t)?n!=n&&t!=t:i(n,t,o,a,e,s))}},function(e,n,t){var i=t(272),r=t(426),o=t(273);e.exports=function(e,n,t,a,s,l){var c=1&t,u=e.length,d=n.length;if(u!=d&&!(c&&d>u))return!1;var h=l.get(e),p=l.get(n);if(h&&p)return h==n&&p==e;var f=-1,m=!0,g=2&t?new i:void 0;for(l.set(e,n),l.set(n,e);++f<u;){var v=e[f],b=n[f];if(a)var y=c?a(b,v,f,n,e,l):a(v,b,f,e,n,l);if(void 0!==y){if(y)continue;m=!1;break}if(g){if(!r(n,(function(e,n){if(!o(g,n)&&(v===e||s(v,e,t,a,l)))return g.push(n)}))){m=!1;break}}else if(v!==b&&!s(v,b,t,a,l)){m=!1;break}}return l.delete(e),l.delete(n),m}},function(e,n,t){var i=t(158),r=t(424),o=t(425);function a(e){var n=-1,t=null==e?0:e.length;for(this.__data__=new i;++n<t;)this.add(e[n])}a.prototype.add=a.prototype.push=r,a.prototype.has=o,e.exports=a},function(e,n){e.exports=function(e,n){return e.has(n)}},function(e,n,t){var i=t(323),r=t(438),o=t(195);e.exports=function(e){return o(e)?i(e):r(e)}},function(e,n,t){(function(e){var i=t(31),r=t(434),o=n&&!n.nodeType&&n,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===o?i.Buffer:void 0,l=(s?s.isBuffer:void 0)||r;e.exports=l}).call(this,t(276)(e))},function(e,n){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,n,t){var i=t(435),r=t(436),o=t(437),a=o&&o.isTypedArray,s=a?r(a):i;e.exports=s},function(e,n,t){var i=t(44)(t(31),"Set");e.exports=i},function(e,n,t){var i=t(123);e.exports=function(e){return e==e&&!i(e)}},function(e,n){e.exports=function(e,n){return function(t){return null!=t&&(t[e]===n&&(void 0!==n||e in Object(t)))}}},function(e,n,t){var i=t(21),r="["+t(282)+"]",o=RegExp("^"+r+r+"*"),a=RegExp(r+r+"*$"),s=function(e){return function(n){var t=String(i(n));return 1&e&&(t=t.replace(o,"")),2&e&&(t=t.replace(a,"")),t}};e.exports={start:s(1),end:s(2),trim:s(3)}},function(e,n){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},function(e,n,t){},function(e,n,t){"use strict";var i=t(3),r=t(148).indexOf,o=t(43),a=[].indexOf,s=!!a&&1/[1].indexOf(1,-0)<0,l=o("indexOf");i({target:"Array",proto:!0,forced:s||!l},{indexOf:function(e){return s?a.apply(this,arguments)||0:r(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){"use strict";var i;!function(r){var o={},a=/d{1,4}|M{1,4}|yy(?:yy)?|S{1,3}|Do|ZZ|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,s="[^\\s]+",l=/\[([^]*?)\]/gm,c=function(){};function u(e,n){for(var t=[],i=0,r=e.length;i<r;i++)t.push(e[i].substr(0,n));return t}function d(e){return function(n,t,i){var r=i[e].indexOf(t.charAt(0).toUpperCase()+t.substr(1).toLowerCase());~r&&(n.month=r)}}function h(e,n){for(e=String(e),n=n||2;e.length<n;)e="0"+e;return e}var p=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],f=["January","February","March","April","May","June","July","August","September","October","November","December"],m=u(f,3),g=u(p,3);o.i18n={dayNamesShort:g,dayNames:p,monthNamesShort:m,monthNames:f,amPm:["am","pm"],DoFn:function(e){return e+["th","st","nd","rd"][e%10>3?0:(e-e%10!=10)*e%10]}};var v={D:function(e){return e.getDay()},DD:function(e){return h(e.getDay())},Do:function(e,n){return n.DoFn(e.getDate())},d:function(e){return e.getDate()},dd:function(e){return h(e.getDate())},ddd:function(e,n){return n.dayNamesShort[e.getDay()]},dddd:function(e,n){return n.dayNames[e.getDay()]},M:function(e){return e.getMonth()+1},MM:function(e){return h(e.getMonth()+1)},MMM:function(e,n){return n.monthNamesShort[e.getMonth()]},MMMM:function(e,n){return n.monthNames[e.getMonth()]},yy:function(e){return h(String(e.getFullYear()),4).substr(2)},yyyy:function(e){return h(e.getFullYear(),4)},h:function(e){return e.getHours()%12||12},hh:function(e){return h(e.getHours()%12||12)},H:function(e){return e.getHours()},HH:function(e){return h(e.getHours())},m:function(e){return e.getMinutes()},mm:function(e){return h(e.getMinutes())},s:function(e){return e.getSeconds()},ss:function(e){return h(e.getSeconds())},S:function(e){return Math.round(e.getMilliseconds()/100)},SS:function(e){return h(Math.round(e.getMilliseconds()/10),2)},SSS:function(e){return h(e.getMilliseconds(),3)},a:function(e,n){return e.getHours()<12?n.amPm[0]:n.amPm[1]},A:function(e,n){return e.getHours()<12?n.amPm[0].toUpperCase():n.amPm[1].toUpperCase()},ZZ:function(e){var n=e.getTimezoneOffset();return(n>0?"-":"+")+h(100*Math.floor(Math.abs(n)/60)+Math.abs(n)%60,4)}},b={d:["\\d\\d?",function(e,n){e.day=n}],Do:["\\d\\d?"+s,function(e,n){e.day=parseInt(n,10)}],M:["\\d\\d?",function(e,n){e.month=n-1}],yy:["\\d\\d?",function(e,n){var t=+(""+(new Date).getFullYear()).substr(0,2);e.year=""+(n>68?t-1:t)+n}],h:["\\d\\d?",function(e,n){e.hour=n}],m:["\\d\\d?",function(e,n){e.minute=n}],s:["\\d\\d?",function(e,n){e.second=n}],yyyy:["\\d{4}",function(e,n){e.year=n}],S:["\\d",function(e,n){e.millisecond=100*n}],SS:["\\d{2}",function(e,n){e.millisecond=10*n}],SSS:["\\d{3}",function(e,n){e.millisecond=n}],D:["\\d\\d?",c],ddd:[s,c],MMM:[s,d("monthNamesShort")],MMMM:[s,d("monthNames")],a:[s,function(e,n,t){var i=n.toLowerCase();i===t.amPm[0]?e.isPm=!1:i===t.amPm[1]&&(e.isPm=!0)}],ZZ:["[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z",function(e,n){var t,i=(n+"").match(/([+-]|\d\d)/gi);i&&(t=60*i[1]+parseInt(i[2],10),e.timezoneOffset="+"===i[0]?t:-t)}]};b.dd=b.d,b.dddd=b.ddd,b.DD=b.D,b.mm=b.m,b.hh=b.H=b.HH=b.h,b.MM=b.M,b.ss=b.s,b.A=b.a,o.masks={default:"ddd MMM dd yyyy HH:mm:ss",shortDate:"M/D/yy",mediumDate:"MMM d, yyyy",longDate:"MMMM d, yyyy",fullDate:"dddd, MMMM d, yyyy",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},o.format=function(e,n,t){var i=t||o.i18n;if("number"==typeof e&&(e=new Date(e)),"[object Date]"!==Object.prototype.toString.call(e)||isNaN(e.getTime()))throw new Error("Invalid Date in fecha.format");n=o.masks[n]||n||o.masks.default;var r=[];return(n=(n=n.replace(l,(function(e,n){return r.push(n),"@@@"}))).replace(a,(function(n){return n in v?v[n](e,i):n.slice(1,n.length-1)}))).replace(/@@@/g,(function(){return r.shift()}))},o.parse=function(e,n,t){var i=t||o.i18n;if("string"!=typeof n)throw new Error("Invalid format in fecha.parse");if(n=o.masks[n]||n,e.length>1e3)return null;var r={},s=[],c=[];n=n.replace(l,(function(e,n){return c.push(n),"@@@"}));var u,d=(u=n,u.replace(/[|\\{()[^$+*?.-]/g,"\\$&")).replace(a,(function(e){if(b[e]){var n=b[e];return s.push(n[1]),"("+n[0]+")"}return e}));d=d.replace(/@@@/g,(function(){return c.shift()}));var h=e.match(new RegExp(d,"i"));if(!h)return null;for(var p=1;p<h.length;p++)s[p-1](r,h[p],i);var f,m=new Date;return!0===r.isPm&&null!=r.hour&&12!=+r.hour?r.hour=+r.hour+12:!1===r.isPm&&12==+r.hour&&(r.hour=0),null!=r.timezoneOffset?(r.minute=+(r.minute||0)-+r.timezoneOffset,f=new Date(Date.UTC(r.year||m.getFullYear(),r.month||0,r.day||1,r.hour||0,r.minute||0,r.second||0,r.millisecond||0))):f=new Date(r.year||m.getFullYear(),r.month||0,r.day||1,r.hour||0,r.minute||0,r.second||0,r.millisecond||0),f},e.exports?e.exports=o:void 0===(i=function(){return o}.call(n,t,n,e))||(e.exports=i)}()},function(e,n,t){"use strict";n.__esModule=!0,n.isString=function(e){return"[object String]"===Object.prototype.toString.call(e)},n.isObject=function(e){return"[object Object]"===Object.prototype.toString.call(e)},n.isHtmlElement=function(e){return e&&e.nodeType===Node.ELEMENT_NODE};n.isFunction=function(e){return e&&"[object Function]"==={}.toString.call(e)},n.isUndefined=function(e){return void 0===e},n.isDefined=function(e){return null!=e}},function(e,n,t){"use strict";n.__esModule=!0,n.PopupManager=void 0;var i=l(t(2)),r=l(t(109)),o=l(t(495)),a=l(t(166)),s=t(33);function l(e){return e&&e.__esModule?e:{default:e}}var c=1,u=void 0;n.default={props:{visible:{type:Boolean,default:!1},openDelay:{},closeDelay:{},zIndex:{},modal:{type:Boolean,default:!1},modalFade:{type:Boolean,default:!0},modalClass:{},modalAppendToBody:{type:Boolean,default:!1},lockScroll:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!1}},beforeMount:function(){this._popupId="popup-"+c++,o.default.register(this._popupId,this)},beforeDestroy:function(){o.default.deregister(this._popupId),o.default.closeModal(this._popupId),this.restoreBodyStyle()},data:function(){return{opened:!1,bodyPaddingRight:null,computedBodyPaddingRight:0,withoutHiddenClass:!0,rendered:!1}},watch:{visible:function(e){var n=this;if(e){if(this._opening)return;this.rendered?this.open():(this.rendered=!0,i.default.nextTick((function(){n.open()})))}else this.close()}},methods:{open:function(e){var n=this;this.rendered||(this.rendered=!0);var t=(0,r.default)({},this.$props||this,e);this._closeTimer&&(clearTimeout(this._closeTimer),this._closeTimer=null),clearTimeout(this._openTimer);var i=Number(t.openDelay);i>0?this._openTimer=setTimeout((function(){n._openTimer=null,n.doOpen(t)}),i):this.doOpen(t)},doOpen:function(e){if(!this.$isServer&&(!this.willOpen||this.willOpen())&&!this.opened){this._opening=!0;var n=this.$el,t=e.modal,i=e.zIndex;if(i&&(o.default.zIndex=i),t&&(this._closing&&(o.default.closeModal(this._popupId),this._closing=!1),o.default.openModal(this._popupId,o.default.nextZIndex(),this.modalAppendToBody?void 0:n,e.modalClass,e.modalFade),e.lockScroll)){this.withoutHiddenClass=!(0,s.hasClass)(document.body,"el-popup-parent--hidden"),this.withoutHiddenClass&&(this.bodyPaddingRight=document.body.style.paddingRight,this.computedBodyPaddingRight=parseInt((0,s.getStyle)(document.body,"paddingRight"),10)),u=(0,a.default)();var r=document.documentElement.clientHeight<document.body.scrollHeight,l=(0,s.getStyle)(document.body,"overflowY");u>0&&(r||"scroll"===l)&&this.withoutHiddenClass&&(document.body.style.paddingRight=this.computedBodyPaddingRight+u+"px"),(0,s.addClass)(document.body,"el-popup-parent--hidden")}"static"===getComputedStyle(n).position&&(n.style.position="absolute"),n.style.zIndex=o.default.nextZIndex(),this.opened=!0,this.onOpen&&this.onOpen(),this.doAfterOpen()}},doAfterOpen:function(){this._opening=!1},close:function(){var e=this;if(!this.willClose||this.willClose()){null!==this._openTimer&&(clearTimeout(this._openTimer),this._openTimer=null),clearTimeout(this._closeTimer);var n=Number(this.closeDelay);n>0?this._closeTimer=setTimeout((function(){e._closeTimer=null,e.doClose()}),n):this.doClose()}},doClose:function(){this._closing=!0,this.onClose&&this.onClose(),this.lockScroll&&setTimeout(this.restoreBodyStyle,200),this.opened=!1,this.doAfterClose()},doAfterClose:function(){o.default.closeModal(this._popupId),this._closing=!1},restoreBodyStyle:function(){this.modal&&this.withoutHiddenClass&&(document.body.style.paddingRight=this.bodyPaddingRight,(0,s.removeClass)(document.body,"el-popup-parent--hidden")),this.withoutHiddenClass=!0}}},n.PopupManager=o.default},function(e,n,t){"use strict";n.__esModule=!0;t(27);n.default={mounted:function(){},methods:{getMigratingConfig:function(){return{props:{},events:{}}}}}},function(e,n,t){"use strict";n.__esModule=!0;var i,r=t(2),o=(i=r)&&i.__esModule?i:{default:i},a=t(33);var s=[],l="@@clickoutsideContext",c=void 0,u=0;function d(e,n,t){return function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!(t&&t.context&&i.target&&r.target)||e.contains(i.target)||e.contains(r.target)||e===i.target||t.context.popperElm&&(t.context.popperElm.contains(i.target)||t.context.popperElm.contains(r.target))||(n.expression&&e[l].methodName&&t.context[e[l].methodName]?t.context[e[l].methodName]():e[l].bindingFn&&e[l].bindingFn())}}!o.default.prototype.$isServer&&(0,a.on)(document,"mousedown",(function(e){return c=e})),!o.default.prototype.$isServer&&(0,a.on)(document,"mouseup",(function(e){s.forEach((function(n){return n[l].documentHandler(e,c)}))})),n.default={bind:function(e,n,t){s.push(e);var i=u++;e[l]={id:i,documentHandler:d(e,n,t),methodName:n.expression,bindingFn:n.value}},update:function(e,n,t){e[l].documentHandler=d(e,n,t),e[l].methodName=n.expression,e[l].bindingFn=n.value},unbind:function(e){for(var n=s.length,t=0;t<n;t++)if(s[t][l].id===e[l].id){s.splice(t,1);break}delete e[l]}}},function(e,n,t){e.exports=function(e){var n={};function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(i,r,function(n){return e[n]}.bind(null,r));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/dist/",t(t.s=83)}({0:function(e,n,t){"use strict";function i(e,n,t,i,r,o,a,s){var l,c="function"==typeof e?e.options:e;if(n&&(c.render=n,c.staticRenderFns=t,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,n){return l.call(n),u(e,n)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:c}}t.d(n,"a",(function(){return i}))},4:function(e,n){e.exports=t(45)},83:function(e,n,t){"use strict";t.r(n);var i=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("label",{staticClass:"el-checkbox",class:[e.border&&e.checkboxSize?"el-checkbox--"+e.checkboxSize:"",{"is-disabled":e.isDisabled},{"is-bordered":e.border},{"is-checked":e.isChecked}],attrs:{id:e.id}},[t("span",{staticClass:"el-checkbox__input",class:{"is-disabled":e.isDisabled,"is-checked":e.isChecked,"is-indeterminate":e.indeterminate,"is-focus":e.focus},attrs:{tabindex:!!e.indeterminate&&0,role:!!e.indeterminate&&"checkbox","aria-checked":!!e.indeterminate&&"mixed"}},[t("span",{staticClass:"el-checkbox__inner"}),e.trueLabel||e.falseLabel?t("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],staticClass:"el-checkbox__original",attrs:{type:"checkbox","aria-hidden":e.indeterminate?"true":"false",name:e.name,disabled:e.isDisabled,"true-value":e.trueLabel,"false-value":e.falseLabel},domProps:{checked:Array.isArray(e.model)?e._i(e.model,null)>-1:e._q(e.model,e.trueLabel)},on:{change:[function(n){var t=e.model,i=n.target,r=i.checked?e.trueLabel:e.falseLabel;if(Array.isArray(t)){var o=e._i(t,null);i.checked?o<0&&(e.model=t.concat([null])):o>-1&&(e.model=t.slice(0,o).concat(t.slice(o+1)))}else e.model=r},e.handleChange],focus:function(n){e.focus=!0},blur:function(n){e.focus=!1}}}):t("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],staticClass:"el-checkbox__original",attrs:{type:"checkbox","aria-hidden":e.indeterminate?"true":"false",disabled:e.isDisabled,name:e.name},domProps:{value:e.label,checked:Array.isArray(e.model)?e._i(e.model,e.label)>-1:e.model},on:{change:[function(n){var t=e.model,i=n.target,r=!!i.checked;if(Array.isArray(t)){var o=e.label,a=e._i(t,o);i.checked?a<0&&(e.model=t.concat([o])):a>-1&&(e.model=t.slice(0,a).concat(t.slice(a+1)))}else e.model=r},e.handleChange],focus:function(n){e.focus=!0},blur:function(n){e.focus=!1}}})]),e.$slots.default||e.label?t("span",{staticClass:"el-checkbox__label"},[e._t("default"),e.$slots.default?e._e():[e._v(e._s(e.label))]],2):e._e()])};i._withStripped=!0;var r=t(4),o={name:"ElCheckbox",mixins:[t.n(r).a],inject:{elForm:{default:""},elFormItem:{default:""}},componentName:"ElCheckbox",data:function(){return{selfModel:!1,focus:!1,isLimitExceeded:!1}},computed:{model:{get:function(){return this.isGroup?this.store:void 0!==this.value?this.value:this.selfModel},set:function(e){this.isGroup?(this.isLimitExceeded=!1,void 0!==this._checkboxGroup.min&&e.length<this._checkboxGroup.min&&(this.isLimitExceeded=!0),void 0!==this._checkboxGroup.max&&e.length>this._checkboxGroup.max&&(this.isLimitExceeded=!0),!1===this.isLimitExceeded&&this.dispatch("ElCheckboxGroup","input",[e])):(this.$emit("input",e),this.selfModel=e)}},isChecked:function(){return"[object Boolean]"==={}.toString.call(this.model)?this.model:Array.isArray(this.model)?this.model.indexOf(this.label)>-1:null!==this.model&&void 0!==this.model?this.model===this.trueLabel:void 0},isGroup:function(){for(var e=this.$parent;e;){if("ElCheckboxGroup"===e.$options.componentName)return this._checkboxGroup=e,!0;e=e.$parent}return!1},store:function(){return this._checkboxGroup?this._checkboxGroup.value:this.value},isLimitDisabled:function(){var e=this._checkboxGroup,n=e.max,t=e.min;return!(!n&&!t)&&this.model.length>=n&&!this.isChecked||this.model.length<=t&&this.isChecked},isDisabled:function(){return this.isGroup?this._checkboxGroup.disabled||this.disabled||(this.elForm||{}).disabled||this.isLimitDisabled:this.disabled||(this.elForm||{}).disabled},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},checkboxSize:function(){var e=this.size||this._elFormItemSize||(this.$ELEMENT||{}).size;return this.isGroup&&this._checkboxGroup.checkboxGroupSize||e}},props:{value:{},label:{},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:String,trueLabel:[String,Number],falseLabel:[String,Number],id:String,controls:String,border:Boolean,size:String},methods:{addToStore:function(){Array.isArray(this.model)&&-1===this.model.indexOf(this.label)?this.model.push(this.label):this.model=this.trueLabel||!0},handleChange:function(e){var n=this;if(!this.isLimitExceeded){var t=void 0;t=e.target.checked?void 0===this.trueLabel||this.trueLabel:void 0!==this.falseLabel&&this.falseLabel,this.$emit("change",t,e),this.$nextTick((function(){n.isGroup&&n.dispatch("ElCheckboxGroup","change",[n._checkboxGroup.value])}))}}},created:function(){this.checked&&this.addToStore()},mounted:function(){this.indeterminate&&this.$el.setAttribute("aria-controls",this.controls)},watch:{value:function(e){this.dispatch("ElFormItem","el.form.change",e)}}},a=t(0),s=Object(a.a)(o,i,[],!1,null,null,null);s.options.__file="packages/checkbox/src/checkbox.vue";var l=s.exports;l.install=function(e){e.component(l.name,l)};n.default=l}})},function(e,n,t){e.exports=function(e){var n={};function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(i,r,function(n){return e[n]}.bind(null,r));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/dist/",t(t.s=124)}({0:function(e,n,t){"use strict";function i(e,n,t,i,r,o,a,s){var l,c="function"==typeof e?e.options:e;if(n&&(c.render=n,c.staticRenderFns=t,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,n){return l.call(n),u(e,n)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:c}}t.d(n,"a",(function(){return i}))},124:function(e,n,t){"use strict";t.r(n);var i={name:"ElTag",props:{text:String,closable:Boolean,type:String,hit:Boolean,disableTransitions:Boolean,color:String,size:String,effect:{type:String,default:"light",validator:function(e){return-1!==["dark","light","plain"].indexOf(e)}}},methods:{handleClose:function(e){e.stopPropagation(),this.$emit("close",e)},handleClick:function(e){this.$emit("click",e)}},computed:{tagSize:function(){return this.size||(this.$ELEMENT||{}).size}},render:function(e){var n=this.type,t=this.tagSize,i=this.hit,r=this.effect,o=e("span",{class:["el-tag",n?"el-tag--"+n:"",t?"el-tag--"+t:"",r?"el-tag--"+r:"",i&&"is-hit"],style:{backgroundColor:this.color},on:{click:this.handleClick}},[this.$slots.default,this.closable&&e("i",{class:"el-tag__close el-icon-close",on:{click:this.handleClose}})]);return this.disableTransitions?o:e("transition",{attrs:{name:"el-zoom-in-center"}},[o])}},r=t(0),o=Object(r.a)(i,void 0,void 0,!1,null,null,null);o.options.__file="packages/tag/src/tag.vue";var a=o.exports;a.install=function(e){e.component(a.name,a)};n.default=a}})},function(e,n,t){e.exports=!t(46)&&!t(79)((function(){return 7!=Object.defineProperty(t(297)("div"),"a",{get:function(){return 7}}).a}))},function(e,n,t){var i=t(78),r=t(37).document,o=i(r)&&i(r.createElement);e.exports=function(e){return o?r.createElement(e):{}}},function(e,n,t){var i=t(47),r=t(60),o=t(521)(!1),a=t(178)("IE_PROTO");e.exports=function(e,n){var t,s=r(e),l=0,c=[];for(t in s)t!=a&&i(s,t)&&c.push(t);for(;n.length>l;)i(s,t=n[l++])&&(~o(c,t)||c.push(t));return c}},function(e,n,t){var i=t(300);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},function(e,n){var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},function(e,n,t){"use strict";var i=t(115),r=t(174),o=t(302),a=t(58),s=t(183),l=t(528),c=t(184),u=t(531),d=t(61)("iterator"),h=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,n,t,f,m,g,v){l(t,n,f);var b,y,w,x=function(e){if(!h&&e in C)return C[e];switch(e){case"keys":case"values":return function(){return new t(this,e)}}return function(){return new t(this,e)}},_=n+" Iterator",S="values"==m,k=!1,C=e.prototype,E=C[d]||C["@@iterator"]||m&&C[m],T=E||x(m),P=m?S?x("entries"):T:void 0,O="Array"==n&&C.entries||E;if(O&&(w=u(O.call(new e)))!==Object.prototype&&w.next&&(c(w,_,!0),i||"function"==typeof w[d]||a(w,d,p)),S&&E&&"values"!==E.name&&(k=!0,T=function(){return E.call(this)}),i&&!v||!h&&!k&&C[d]||a(C,d,T),s[n]=T,s[_]=p,m)if(b={values:S?T:x("values"),keys:g?T:x("keys"),entries:P},v)for(y in b)y in C||o(C,y,b[y]);else r(r.P+r.F*(h||k),n,b);return b}},function(e,n,t){e.exports=t(58)},function(e,n,t){var i=t(112),r=t(529),o=t(180),a=t(178)("IE_PROTO"),s=function(){},l=function(){var e,n=t(297)("iframe"),i=o.length;for(n.style.display="none",t(530).appendChild(n),n.src="javascript:",(e=n.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;i--;)delete l.prototype[o[i]];return l()};e.exports=Object.create||function(e,n){var t;return null!==e?(s.prototype=i(e),t=new s,s.prototype=null,t[a]=e):t=l(),void 0===n?t:r(t,n)}},function(e,n,t){var i=t(298),r=t(180).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},function(e,n,t){e.exports=function(e){var n={};function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(i,r,function(n){return e[n]}.bind(null,r));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/dist/",t(t.s=116)}({0:function(e,n,t){"use strict";function i(e,n,t,i,r,o,a,s){var l,c="function"==typeof e?e.options:e;if(n&&(c.render=n,c.staticRenderFns=t,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,n){return l.call(n),u(e,n)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:c}}t.d(n,"a",(function(){return i}))},116:function(e,n,t){"use strict";t.r(n);var i=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("label",{staticClass:"el-radio",class:[e.border&&e.radioSize?"el-radio--"+e.radioSize:"",{"is-disabled":e.isDisabled},{"is-focus":e.focus},{"is-bordered":e.border},{"is-checked":e.model===e.label}],attrs:{role:"radio","aria-checked":e.model===e.label,"aria-disabled":e.isDisabled,tabindex:e.tabIndex},on:{keydown:function(n){if(!("button"in n)&&e._k(n.keyCode,"space",32,n.key,[" ","Spacebar"]))return null;n.stopPropagation(),n.preventDefault(),e.model=e.isDisabled?e.model:e.label}}},[t("span",{staticClass:"el-radio__input",class:{"is-disabled":e.isDisabled,"is-checked":e.model===e.label}},[t("span",{staticClass:"el-radio__inner"}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],ref:"radio",staticClass:"el-radio__original",attrs:{type:"radio","aria-hidden":"true",name:e.name,disabled:e.isDisabled,tabindex:"-1"},domProps:{value:e.label,checked:e._q(e.model,e.label)},on:{focus:function(n){e.focus=!0},blur:function(n){e.focus=!1},change:[function(n){e.model=e.label},e.handleChange]}})]),t("span",{staticClass:"el-radio__label",on:{keydown:function(e){e.stopPropagation()}}},[e._t("default"),e.$slots.default?e._e():[e._v(e._s(e.label))]],2)])};i._withStripped=!0;var r=t(4),o={name:"ElRadio",mixins:[t.n(r).a],inject:{elForm:{default:""},elFormItem:{default:""}},componentName:"ElRadio",props:{value:{},label:{},disabled:Boolean,name:String,border:Boolean,size:String},data:function(){return{focus:!1}},computed:{isGroup:function(){for(var e=this.$parent;e;){if("ElRadioGroup"===e.$options.componentName)return this._radioGroup=e,!0;e=e.$parent}return!1},model:{get:function(){return this.isGroup?this._radioGroup.value:this.value},set:function(e){this.isGroup?this.dispatch("ElRadioGroup","input",[e]):this.$emit("input",e),this.$refs.radio&&(this.$refs.radio.checked=this.model===this.label)}},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},radioSize:function(){var e=this.size||this._elFormItemSize||(this.$ELEMENT||{}).size;return this.isGroup&&this._radioGroup.radioGroupSize||e},isDisabled:function(){return this.isGroup?this._radioGroup.disabled||this.disabled||(this.elForm||{}).disabled:this.disabled||(this.elForm||{}).disabled},tabIndex:function(){return this.isDisabled||this.isGroup&&this.model!==this.label?-1:0}},methods:{handleChange:function(){var e=this;this.$nextTick((function(){e.$emit("change",e.model),e.isGroup&&e.dispatch("ElRadioGroup","handleChange",e.model)}))}}},a=t(0),s=Object(a.a)(o,i,[],!1,null,null,null);s.options.__file="packages/radio/src/radio.vue";var l=s.exports;l.install=function(e){e.component(l.name,l)};n.default=l},4:function(e,n){e.exports=t(45)}})},function(e,n,t){"use strict";var i=t(55),r=t(10),o=[].slice,a={},s=function(e,n,t){if(!(n in a)){for(var i=[],r=0;r<n;r++)i[r]="a["+r+"]";a[n]=Function("C,a","return new C("+i.join(",")+")")}return a[n](e,t)};e.exports=Function.bind||function(e){var n=i(this),t=o.call(arguments,1),a=function(){var i=t.concat(o.call(arguments));return this instanceof a?s(n,i.length,i):n.apply(e,i)};return r(n.prototype)&&(a.prototype=n.prototype),a}},function(e,n,t){t(3)({target:"Object",stat:!0},{setPrototypeOf:t(152)})},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){var i=t(390),r=t(319),o=t(458),a=t(465),s=t(474),l=t(475),c=o((function(e){var n=l(e);return s(n)&&(n=void 0),a(i(e,1,s,!0),r(n,2))}));e.exports=c},function(e,n,t){
/*!
 * vue-cookie-law v1.12.0
 * (c) 2020 Jakub Juszczak <jakub@posteo.de>
 * 
 */
var i;i=function(){return function(e){var n={};function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=38)}([function(e,n){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)},function(e,n){var t={}.hasOwnProperty;e.exports=function(e,n){return t.call(e,n)}},function(e,n,t){var i=t(32),r=t(17);e.exports=function(e){return i(r(e))}},function(e,n){var t=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=t)},function(e,n,t){var i=t(5),r=t(13);e.exports=t(6)?function(e,n,t){return i.f(e,n,r(1,t))}:function(e,n,t){return e[n]=t,e}},function(e,n,t){var i=t(11),r=t(29),o=t(16),a=Object.defineProperty;n.f=t(6)?Object.defineProperty:function(e,n,t){if(i(e),n=o(n,!0),i(t),r)try{return a(e,n,t)}catch(e){}if("get"in t||"set"in t)throw TypeError("Accessors not supported!");return"value"in t&&(e[n]=t.value),e}},function(e,n,t){e.exports=!t(7)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,n){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,n,t){var i=t(31),r=t(21);e.exports=Object.keys||function(e){return i(e,r)}},function(e,n,t){var i=t(20)("wks"),r=t(14),o=t(0).Symbol,a="function"==typeof o;(e.exports=function(e){return i[e]||(i[e]=a&&o[e]||(a?o:r)("Symbol."+e))}).store=i},function(e,n,t){var i=t(0),r=t(3),o=t(50),a=t(4),s=function(e,n,t){var l,c,u,d=e&s.F,h=e&s.G,p=e&s.S,f=e&s.P,m=e&s.B,g=e&s.W,v=h?r:r[n]||(r[n]={}),b=v.prototype,y=h?i:p?i[n]:(i[n]||{}).prototype;for(l in h&&(t=n),t)(c=!d&&y&&void 0!==y[l])&&l in v||(u=c?y[l]:t[l],v[l]=h&&"function"!=typeof y[l]?t[l]:m&&c?o(u,i):g&&y[l]==u?function(e){var n=function(n,t,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(n);case 2:return new e(n,t)}return new e(n,t,i)}return e.apply(this,arguments)};return n.prototype=e.prototype,n}(u):f&&"function"==typeof u?o(Function.call,u):u,f&&((v.virtual||(v.virtual={}))[l]=u,e&s.R&&b&&!b[l]&&a(b,l,u)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,n,t){var i=t(12);e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},function(e,n){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,n){e.exports=function(e,n){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:n}}},function(e,n){var t=0,i=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++t+i).toString(36))}},function(e,n){n.f={}.propertyIsEnumerable},function(e,n,t){var i=t(12);e.exports=function(e,n){if(!i(e))return e;var t,r;if(n&&"function"==typeof(t=e.toString)&&!i(r=t.call(e)))return r;if("function"==typeof(t=e.valueOf)&&!i(r=t.call(e)))return r;if(!n&&"function"==typeof(t=e.toString)&&!i(r=t.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,n){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,n){var t=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:t)(e)}},function(e,n,t){var i=t(20)("keys"),r=t(14);e.exports=function(e){return i[e]||(i[e]=r(e))}},function(e,n,t){var i=t(0),r=i["__core-js_shared__"]||(i["__core-js_shared__"]={});e.exports=function(e){return r[e]||(r[e]={})}},function(e,n){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,n){n.f=Object.getOwnPropertySymbols},function(e,n,t){var i=t(17);e.exports=function(e){return Object(i(e))}},function(e,n){e.exports=!0},function(e,n){e.exports={}},function(e,n,t){var i=t(5).f,r=t(1),o=t(9)("toStringTag");e.exports=function(e,n,t){e&&!r(e=t?e:e.prototype,o)&&i(e,o,{configurable:!0,value:n})}},function(e,n,t){n.f=t(9)},function(e,n,t){var i=t(0),r=t(3),o=t(24),a=t(27),s=t(5).f;e.exports=function(e){var n=r.Symbol||(r.Symbol=o?{}:i.Symbol||{});"_"==e.charAt(0)||e in n||s(n,e,{value:a.f(e)})}},function(e,n,t){e.exports=!t(6)&&!t(7)((function(){return 7!=Object.defineProperty(t(30)("div"),"a",{get:function(){return 7}}).a}))},function(e,n,t){var i=t(12),r=t(0).document,o=i(r)&&i(r.createElement);e.exports=function(e){return o?r.createElement(e):{}}},function(e,n,t){var i=t(1),r=t(2),o=t(53)(!1),a=t(19)("IE_PROTO");e.exports=function(e,n){var t,s=r(e),l=0,c=[];for(t in s)t!=a&&i(s,t)&&c.push(t);for(;n.length>l;)i(s,t=n[l++])&&(~o(c,t)||c.push(t));return c}},function(e,n,t){var i=t(33);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},function(e,n){var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},function(e,n,t){"use strict";var i=t(24),r=t(10),o=t(35),a=t(4),s=t(1),l=t(25),c=t(65),u=t(26),d=t(68),h=t(9)("iterator"),p=!([].keys&&"next"in[].keys()),f=function(){return this};e.exports=function(e,n,t,m,g,v,b){c(t,n,m);var y,w,x,_=function(e){if(!p&&e in E)return E[e];switch(e){case"keys":case"values":return function(){return new t(this,e)}}return function(){return new t(this,e)}},S=n+" Iterator",k="values"==g,C=!1,E=e.prototype,T=E[h]||E["@@iterator"]||g&&E[g],P=T||_(g),O=g?k?_("entries"):P:void 0,A="Array"==n&&E.entries||T;if(A&&(x=d(A.call(new e)))!==Object.prototype&&(u(x,S,!0),i||s(x,h)||a(x,h,f)),k&&T&&"values"!==T.name&&(C=!0,P=function(){return T.call(this)}),i&&!b||!p&&!C&&E[h]||a(E,h,P),l[n]=P,l[S]=f,g)if(y={values:k?P:_("values"),keys:v?P:_("keys"),entries:O},b)for(w in y)w in E||o(E,w,y[w]);else r(r.P+r.F*(p||C),n,y);return y}},function(e,n,t){e.exports=t(4)},function(e,n,t){var i=t(11),r=t(66),o=t(21),a=t(19)("IE_PROTO"),s=function(){},l=function(){var e,n=t(30)("iframe"),i=o.length;for(n.style.display="none",t(67).appendChild(n),n.src="javascript:",(e=n.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;i--;)delete l.prototype[o[i]];return l()};e.exports=Object.create||function(e,n){var t;return null!==e?(s.prototype=i(e),t=new s,s.prototype=null,t[a]=e):t=l(),void 0===n?t:r(t,n)}},function(e,n,t){var i=t(31),r=t(21).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},function(e,n,t){var i=t(44)(t(45),t(87),(function(e){t(39)}),null,null);e.exports=i.exports},function(e,n,t){var i=t(40);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals),t(42)("27b7854e",i,!0)},function(e,n,t){(e.exports=t(41)(!1)).push([e.i,".Cookie{position:fixed;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:9999;width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.Cookie>*{margin:.9375rem 0;-ms-flex-item-align:center;align-self:center}@media screen and (min-width:48rem){.Cookie{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-flow:row;flex-flow:row}.Cookie>*{margin:0}}.Cookie--top{top:0;left:0;right:0}.Cookie--bottom{bottom:0;left:0;right:0}.Cookie__buttons{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.Cookie__buttons>*{margin:.3125rem 0}@media screen and (min-width:48rem){.Cookie__buttons{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}.Cookie__buttons>*{margin:0 .9375rem}}.Cookie__button,.Cookie__declineButton{cursor:pointer;-ms-flex-item-align:center;align-self:center;white-space:nowrap}.Cookie--base{background:#f1f1f1;color:#232323;padding:1.25em}.Cookie--base .Cookie__button{background:#97d058;padding:.625em 3.125em;color:#fff;border-radius:0;border:0;font-size:1em}.Cookie--base .Cookie__button:hover{background:#7ebf36}.Cookie--base .Cookie__declineButton{background:transparent;padding:.625em 3.125em;color:#727272;border-radius:0;border:0;font-size:1em}.Cookie--base .Cookie__declineButton:hover{background:#cbcbcb}.Cookie--base--rounded{background:#f1f1f1;color:#232323;padding:1.25em}.Cookie--base--rounded .Cookie__button{background:#97d058;padding:.625em 3.125em;color:#fff;border-radius:20px;border:0;font-size:1em}.Cookie--base--rounded .Cookie__button:hover{background:#7ebf36}.Cookie--base--rounded .Cookie__declineButton{background:transparent;padding:.625em 3.125em;color:#727272;border-radius:20px;border:0;font-size:1em}.Cookie--base--rounded .Cookie__declineButton:hover{background:#cbcbcb}.Cookie--blood-orange{background:#424851;color:#fff;padding:1.25em}.Cookie--blood-orange .Cookie__button{background:#e76a68;padding:.625em 3.125em;color:#fff;border-radius:0;border:0;font-size:1em}.Cookie--blood-orange .Cookie__button:hover{background:#e03f3c}.Cookie--blood-orange .Cookie__declineButton{background:transparent;padding:.625em 3.125em;color:#000;border-radius:0;border:0;font-size:1em}.Cookie--blood-orange .Cookie__declineButton:hover{background:#202327}.Cookie--blood-orange--rounded{background:#424851;color:#fff;padding:1.25em}.Cookie--blood-orange--rounded .Cookie__button{background:#e76a68;padding:.625em 3.125em;color:#fff;border-radius:20px;border:0;font-size:1em}.Cookie--blood-orange--rounded .Cookie__button:hover{background:#e03f3c}.Cookie--blood-orange--rounded .Cookie__declineButton{background:transparent;padding:.625em 3.125em;color:#000;border-radius:20px;border:0;font-size:1em}.Cookie--blood-orange--rounded .Cookie__declineButton:hover{background:#202327}.Cookie--dark-lime{background:#424851;color:#fff;padding:1.25em}.Cookie--dark-lime .Cookie__button{background:#97d058;padding:.625em 3.125em;color:#fff;border-radius:0;border:0;font-size:1em}.Cookie--dark-lime .Cookie__button:hover{background:#7ebf36}.Cookie--dark-lime .Cookie__declineButton{background:transparent;padding:.625em 3.125em;color:#000;border-radius:0;border:0;font-size:1em}.Cookie--dark-lime .Cookie__declineButton:hover{background:#202327}.Cookie--dark-lime--rounded{background:#424851;color:#fff;padding:1.25em}.Cookie--dark-lime--rounded .Cookie__button{background:#97d058;padding:.625em 3.125em;color:#fff;border-radius:20px;border:0;font-size:1em}.Cookie--dark-lime--rounded .Cookie__button:hover{background:#7ebf36}.Cookie--dark-lime--rounded .Cookie__declineButton{background:transparent;padding:.625em 3.125em;color:#000;border-radius:20px;border:0;font-size:1em}.Cookie--dark-lime--rounded .Cookie__declineButton:hover{background:#202327}.Cookie--royal{background:#fbc227;color:#232323;padding:1.25em}.Cookie--royal .Cookie__button{background:#726cea;padding:.625em 3.125em;color:#fff;border-radius:0;border:0;font-size:1em}.Cookie--royal .Cookie__button:hover{background:#473fe4}.Cookie--royal .Cookie__declineButton{background:transparent;padding:.625em 3.125em;color:#221901;border-radius:0;border:0;font-size:1em}.Cookie--royal .Cookie__declineButton:hover{background:#d29a04}.Cookie--royal--rounded{background:#fbc227;color:#232323;padding:1.25em}.Cookie--royal--rounded .Cookie__button{background:#726cea;padding:.625em 3.125em;color:#fff;border-radius:20px;border:0;font-size:1em}.Cookie--royal--rounded .Cookie__button:hover{background:#473fe4}.Cookie--royal--rounded .Cookie__declineButton{background:transparent;padding:.625em 3.125em;color:#221901;border-radius:20px;border:0;font-size:1em}.Cookie--royal--rounded .Cookie__declineButton:hover{background:#d29a04}.slideFromTop-enter,.slideFromTop-leave-to{-webkit-transform:translateY(-12.5em);transform:translateY(-12.5em)}.slideFromTop-enter-to,.slideFromTop-leave{-webkit-transform:translate(0);transform:translate(0)}.slideFromBottom-enter,.slideFromBottom-leave-to{-webkit-transform:translateY(12.5em);transform:translateY(12.5em)}.slideFromBottom-enter-to,.slideFromBottom-leave{-webkit-transform:translate(0);transform:translate(0)}.slideFromBottom-enter-active,.slideFromBottom-leave-active,.slideFromTop-enter-active,.slideFromTop-leave-active{-webkit-transition:-webkit-transform .4s ease-in;transition:-webkit-transform .4s ease-in;transition:transform .4s ease-in;transition:transform .4s ease-in,-webkit-transform .4s ease-in}.fade-enter-active,.fade-leave-active{-webkit-transition:opacity .5s;transition:opacity .5s}.fade-enter,.fade-leave-to{opacity:0}",""])},function(e,n){e.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var t=function(e,n){var t,i=e[1]||"",r=e[3];if(!r)return i;if(n&&"function"==typeof btoa){var o=(t=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"),a=r.sources.map((function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"}));return[i].concat(a).concat([o]).join("\n")}return[i].join("\n")}(n,e);return n[2]?"@media "+n[2]+"{"+t+"}":t})).join("")},n.i=function(e,t){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},r=0;r<this.length;r++){var o=this[r][0];"number"==typeof o&&(i[o]=!0)}for(r=0;r<e.length;r++){var a=e[r];"number"==typeof a[0]&&i[a[0]]||(t&&!a[2]?a[2]=t:t&&(a[2]="("+a[2]+") and ("+t+")"),n.push(a))}},n}},function(e,n,t){var i="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!i)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var r=t(43),o={},a=i&&(document.head||document.getElementsByTagName("head")[0]),s=null,l=0,c=!1,u=function(){},d="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function h(e){for(var n=0;n<e.length;n++){var t=e[n],i=o[t.id];if(i){i.refs++;for(var r=0;r<i.parts.length;r++)i.parts[r](t.parts[r]);for(;r<t.parts.length;r++)i.parts.push(f(t.parts[r]));i.parts.length>t.parts.length&&(i.parts.length=t.parts.length)}else{var a=[];for(r=0;r<t.parts.length;r++)a.push(f(t.parts[r]));o[t.id]={id:t.id,refs:1,parts:a}}}}function p(){var e=document.createElement("style");return e.type="text/css",a.appendChild(e),e}function f(e){var n,t,i=document.querySelector('style[data-vue-ssr-id~="'+e.id+'"]');if(i){if(c)return u;i.parentNode.removeChild(i)}if(d){var r=l++;i=s||(s=p()),n=v.bind(null,i,r,!1),t=v.bind(null,i,r,!0)}else i=p(),n=b.bind(null,i),t=function(){i.parentNode.removeChild(i)};return n(e),function(i){if(i){if(i.css===e.css&&i.media===e.media&&i.sourceMap===e.sourceMap)return;n(e=i)}else t()}}e.exports=function(e,n,t){c=t;var i=r(e,n);return h(i),function(n){for(var t=[],a=0;a<i.length;a++){var s=i[a];(l=o[s.id]).refs--,t.push(l)}for(n?h(i=r(e,n)):i=[],a=0;a<t.length;a++){var l;if(0===(l=t[a]).refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete o[l.id]}}}};var m,g=(m=[],function(e,n){return m[e]=n,m.filter(Boolean).join("\n")});function v(e,n,t,i){var r=t?"":i.css;if(e.styleSheet)e.styleSheet.cssText=g(n,r);else{var o=document.createTextNode(r),a=e.childNodes;a[n]&&e.removeChild(a[n]),a.length?e.insertBefore(o,a[n]):e.appendChild(o)}}function b(e,n){var t=n.css,i=n.media,r=n.sourceMap;if(i&&e.setAttribute("media",i),r&&(t+="\n/*# sourceURL="+r.sources[0]+" */",t+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},function(e,n){e.exports=function(e,n){for(var t=[],i={},r=0;r<n.length;r++){var o=n[r],a=o[0],s={id:e+":"+r,css:o[1],media:o[2],sourceMap:o[3]};i[a]?i[a].parts.push(s):t.push(i[a]={id:a,parts:[s]})}return t}},function(e,n){e.exports=function(e,n,t,i,r){var o,a=e=e||{},s=typeof e.default;"object"!==s&&"function"!==s||(o=e,a=e.default);var l,c="function"==typeof a?a.options:a;if(n&&(c.render=n.render,c.staticRenderFns=n.staticRenderFns),i&&(c._scopeId=i),r?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(r)},c._ssrRegister=l):t&&(l=t),l){var u=c.functional,d=u?c.render:c.beforeCreate;u?c.render=function(e,n){return l.call(n),d(e,n)}:c.beforeCreate=d?[].concat(d,l):[l]}return{esModule:o,exports:a,options:c}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=s(t(46)),r=s(t(56)),o=s(t(60)),a=function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n.default=e,n}(t(85));function s(e){return e&&e.__esModule?e:{default:e}}var l="localStorage";n.default={name:"VueCookieLaw",props:{buttonText:{type:String,default:"Got it!"},buttonDecline:{type:Boolean,default:!1},buttonDeclineText:{type:String,default:"Decline"},buttonLink:{type:[String,Object],required:!1},buttonLinkText:{type:String,default:"More info"},buttonLinkNewTab:{type:Boolean,default:!1},message:{type:String,default:"This website uses cookies to ensure you get the best experience on our website."},theme:{type:String,default:"base"},position:{type:String,default:"bottom"},transitionName:{type:String,default:"slideFromBottom"},buttonClass:{type:String,default:"Cookie__button"},buttonDeclineClass:{type:String,default:"Cookie__declineButton"},storageName:{type:String,default:"cookie:accepted"},storageType:{type:String,default:l},cookieOptions:{type:Object,default:function(){},required:!1}},data:function(){return{supportsLocalStorage:!0,isOpen:!1}},computed:{containerPosition:function(){return"Cookie--"+this.position},cookieTheme:function(){return"Cookie--"+this.theme},externalButtonLink:function(){return"string"==typeof this.buttonLink&&this.buttonLink.length},internalButtonLink:function(){return"object"===(0,o.default)(this.buttonLink)&&null!=this.buttonLink&&(0,r.default)(this.buttonLink).length},target:function(){return this.buttonLinkNewTab?"_blank":"_self"},canUseLocalStorage:function(){return this.storageType===l&&this.supportsLocalStorage}},created:function(){if(this.storageType===l)try{var e="__vue-cookielaw-check-localStorage";window.localStorage.setItem(e,e),window.localStorage.removeItem(e)}catch(e){console.info("Local storage is not supported, falling back to cookie use"),this.supportsLocalStorage=!1}1==!this.getVisited()&&(this.isOpen=!0)},methods:{setVisited:function(){this.canUseLocalStorage?localStorage.setItem(this.storageName,!0):a.set(this.storageName,!0,(0,i.default)({},this.cookieOptions,{expires:"1Y"}))},setAccepted:function(){this.canUseLocalStorage?localStorage.setItem("cookie:all",!0):a.set("cookie:all",!0,(0,i.default)({},this.cookieOptions,{expires:"1Y"}))},setDeclined:function(){this.canUseLocalStorage?localStorage.setItem("cookie:all",!1):a.set("cookie:all",!1,(0,i.default)({},this.cookieOptions,{expires:"1Y"}))},getVisited:function(){return this.canUseLocalStorage?localStorage.getItem(this.storageName):a.get(this.storageName)},accept:function(){this.setVisited(),this.setAccepted(),this.isOpen=!1,this.$emit("accept")},close:function(){this.isOpen=!1,this.$emit("close")},decline:function(){this.setVisited(),this.setDeclined(),this.isOpen=!1,this.$emit("decline")},open:function(){1==!this.getVisited()&&(this.isOpen=!0)}}}},function(e,n,t){"use strict";n.__esModule=!0;var i,r=t(47),o=(i=r)&&i.__esModule?i:{default:i};n.default=o.default||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}},function(e,n,t){e.exports={default:t(48),__esModule:!0}},function(e,n,t){t(49),e.exports=t(3).Object.assign},function(e,n,t){var i=t(10);i(i.S+i.F,"Object",{assign:t(52)})},function(e,n,t){var i=t(51);e.exports=function(e,n,t){if(i(e),void 0===n)return e;switch(t){case 1:return function(t){return e.call(n,t)};case 2:return function(t,i){return e.call(n,t,i)};case 3:return function(t,i,r){return e.call(n,t,i,r)}}return function(){return e.apply(n,arguments)}}},function(e,n){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,n,t){"use strict";var i=t(8),r=t(22),o=t(15),a=t(23),s=t(32),l=Object.assign;e.exports=!l||t(7)((function(){var e={},n={},t=Symbol(),i="abcdefghijklmnopqrst";return e[t]=7,i.split("").forEach((function(e){n[e]=e})),7!=l({},e)[t]||Object.keys(l({},n)).join("")!=i}))?function(e,n){for(var t=a(e),l=arguments.length,c=1,u=r.f,d=o.f;l>c;)for(var h,p=s(arguments[c++]),f=u?i(p).concat(u(p)):i(p),m=f.length,g=0;m>g;)d.call(p,h=f[g++])&&(t[h]=p[h]);return t}:l},function(e,n,t){var i=t(2),r=t(54),o=t(55);e.exports=function(e){return function(n,t,a){var s,l=i(n),c=r(l.length),u=o(a,c);if(e&&t!=t){for(;c>u;)if((s=l[u++])!=s)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===t)return e||u||0;return!e&&-1}}},function(e,n,t){var i=t(18),r=Math.min;e.exports=function(e){return e>0?r(i(e),9007199254740991):0}},function(e,n,t){var i=t(18),r=Math.max,o=Math.min;e.exports=function(e,n){return(e=i(e))<0?r(e+n,0):o(e,n)}},function(e,n,t){e.exports={default:t(57),__esModule:!0}},function(e,n,t){t(58),e.exports=t(3).Object.keys},function(e,n,t){var i=t(23),r=t(8);t(59)("keys",(function(){return function(e){return r(i(e))}}))},function(e,n,t){var i=t(10),r=t(3),o=t(7);e.exports=function(e,n){var t=(r.Object||{})[e]||Object[e],a={};a[e]=n(t),i(i.S+i.F*o((function(){t(1)})),"Object",a)}},function(e,n,t){"use strict";n.__esModule=!0;var i=a(t(61)),r=a(t(73)),o="function"==typeof r.default&&"symbol"==typeof i.default?function(e){return typeof e}:function(e){return e&&"function"==typeof r.default&&e.constructor===r.default&&e!==r.default.prototype?"symbol":typeof e};function a(e){return e&&e.__esModule?e:{default:e}}n.default="function"==typeof r.default&&"symbol"===o(i.default)?function(e){return void 0===e?"undefined":o(e)}:function(e){return e&&"function"==typeof r.default&&e.constructor===r.default&&e!==r.default.prototype?"symbol":void 0===e?"undefined":o(e)}},function(e,n,t){e.exports={default:t(62),__esModule:!0}},function(e,n,t){t(63),t(69),e.exports=t(27).f("iterator")},function(e,n,t){"use strict";var i=t(64)(!0);t(34)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,n=this._t,t=this._i;return t>=n.length?{value:void 0,done:!0}:(e=i(n,t),this._i+=e.length,{value:e,done:!1})}))},function(e,n,t){var i=t(18),r=t(17);e.exports=function(e){return function(n,t){var o,a,s=String(r(n)),l=i(t),c=s.length;return l<0||l>=c?e?"":void 0:(o=s.charCodeAt(l))<55296||o>56319||l+1===c||(a=s.charCodeAt(l+1))<56320||a>57343?e?s.charAt(l):o:e?s.slice(l,l+2):a-56320+(o-55296<<10)+65536}}},function(e,n,t){"use strict";var i=t(36),r=t(13),o=t(26),a={};t(4)(a,t(9)("iterator"),(function(){return this})),e.exports=function(e,n,t){e.prototype=i(a,{next:r(1,t)}),o(e,n+" Iterator")}},function(e,n,t){var i=t(5),r=t(11),o=t(8);e.exports=t(6)?Object.defineProperties:function(e,n){r(e);for(var t,a=o(n),s=a.length,l=0;s>l;)i.f(e,t=a[l++],n[t]);return e}},function(e,n,t){e.exports=t(0).document&&document.documentElement},function(e,n,t){var i=t(1),r=t(23),o=t(19)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),i(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,n,t){t(70);for(var i=t(0),r=t(4),o=t(25),a=t(9)("toStringTag"),s=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],l=0;l<5;l++){var c=s[l],u=i[c],d=u&&u.prototype;d&&!d[a]&&r(d,a,c),o[c]=o.Array}},function(e,n,t){"use strict";var i=t(71),r=t(72),o=t(25),a=t(2);e.exports=t(34)(Array,"Array",(function(e,n){this._t=a(e),this._i=0,this._k=n}),(function(){var e=this._t,n=this._k,t=this._i++;return!e||t>=e.length?(this._t=void 0,r(1)):r(0,"keys"==n?t:"values"==n?e[t]:[t,e[t]])}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(e,n){e.exports=function(){}},function(e,n){e.exports=function(e,n){return{value:n,done:!!e}}},function(e,n,t){e.exports={default:t(74),__esModule:!0}},function(e,n,t){t(75),t(82),t(83),t(84),e.exports=t(3).Symbol},function(e,n,t){"use strict";var i=t(0),r=t(1),o=t(6),a=t(10),s=t(35),l=t(76).KEY,c=t(7),u=t(20),d=t(26),h=t(14),p=t(9),f=t(27),m=t(28),g=t(77),v=t(78),b=t(79),y=t(11),w=t(2),x=t(16),_=t(13),S=t(36),k=t(80),C=t(81),E=t(5),T=t(8),P=C.f,O=E.f,A=k.f,j=i.Symbol,I=i.JSON,D=I&&I.stringify,M=p("_hidden"),L=p("toPrimitive"),N={}.propertyIsEnumerable,$=u("symbol-registry"),F=u("symbols"),R=u("op-symbols"),B=Object.prototype,V="function"==typeof j,z=i.QObject,q=!z||!z.prototype||!z.prototype.findChild,H=o&&c((function(){return 7!=S(O({},"a",{get:function(){return O(this,"a",{value:7}).a}})).a}))?function(e,n,t){var i=P(B,n);i&&delete B[n],O(e,n,t),i&&e!==B&&O(B,n,i)}:O,W=function(e){var n=F[e]=S(j.prototype);return n._k=e,n},U=V&&"symbol"==typeof j.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof j},J=function(e,n,t){return e===B&&J(R,n,t),y(e),n=x(n,!0),y(t),r(F,n)?(t.enumerable?(r(e,M)&&e[M][n]&&(e[M][n]=!1),t=S(t,{enumerable:_(0,!1)})):(r(e,M)||O(e,M,_(1,{})),e[M][n]=!0),H(e,n,t)):O(e,n,t)},Y=function(e,n){y(e);for(var t,i=v(n=w(n)),r=0,o=i.length;o>r;)J(e,t=i[r++],n[t]);return e},G=function(e){var n=N.call(this,e=x(e,!0));return!(this===B&&r(F,e)&&!r(R,e))&&(!(n||!r(this,e)||!r(F,e)||r(this,M)&&this[M][e])||n)},K=function(e,n){if(e=w(e),n=x(n,!0),e!==B||!r(F,n)||r(R,n)){var t=P(e,n);return!t||!r(F,n)||r(e,M)&&e[M][n]||(t.enumerable=!0),t}},X=function(e){for(var n,t=A(w(e)),i=[],o=0;t.length>o;)r(F,n=t[o++])||n==M||n==l||i.push(n);return i},Q=function(e){for(var n,t=e===B,i=A(t?R:w(e)),o=[],a=0;i.length>a;)!r(F,n=i[a++])||t&&!r(B,n)||o.push(F[n]);return o};V||(s((j=function(){if(this instanceof j)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),n=function(t){this===B&&n.call(R,t),r(this,M)&&r(this[M],e)&&(this[M][e]=!1),H(this,e,_(1,t))};return o&&q&&H(B,e,{configurable:!0,set:n}),W(e)}).prototype,"toString",(function(){return this._k})),C.f=K,E.f=J,t(37).f=k.f=X,t(15).f=G,t(22).f=Q,o&&!t(24)&&s(B,"propertyIsEnumerable",G,!0),f.f=function(e){return W(p(e))}),a(a.G+a.W+a.F*!V,{Symbol:j});for(var Z="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ee=0;Z.length>ee;)p(Z[ee++]);for(Z=T(p.store),ee=0;Z.length>ee;)m(Z[ee++]);a(a.S+a.F*!V,"Symbol",{for:function(e){return r($,e+="")?$[e]:$[e]=j(e)},keyFor:function(e){if(U(e))return g($,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){q=!0},useSimple:function(){q=!1}}),a(a.S+a.F*!V,"Object",{create:function(e,n){return void 0===n?S(e):Y(S(e),n)},defineProperty:J,defineProperties:Y,getOwnPropertyDescriptor:K,getOwnPropertyNames:X,getOwnPropertySymbols:Q}),I&&a(a.S+a.F*(!V||c((function(){var e=j();return"[null]"!=D([e])||"{}"!=D({a:e})||"{}"!=D(Object(e))}))),"JSON",{stringify:function(e){if(void 0!==e&&!U(e)){for(var n,t,i=[e],r=1;arguments.length>r;)i.push(arguments[r++]);return"function"==typeof(n=i[1])&&(t=n),!t&&b(n)||(n=function(e,n){if(t&&(n=t.call(this,e,n)),!U(n))return n}),i[1]=n,D.apply(I,i)}}}),j.prototype[L]||t(4)(j.prototype,L,j.prototype.valueOf),d(j,"Symbol"),d(Math,"Math",!0),d(i.JSON,"JSON",!0)},function(e,n,t){var i=t(14)("meta"),r=t(12),o=t(1),a=t(5).f,s=0,l=Object.isExtensible||function(){return!0},c=!t(7)((function(){return l(Object.preventExtensions({}))})),u=function(e){a(e,i,{value:{i:"O"+ ++s,w:{}}})},d=e.exports={KEY:i,NEED:!1,fastKey:function(e,n){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,i)){if(!l(e))return"F";if(!n)return"E";u(e)}return e[i].i},getWeak:function(e,n){if(!o(e,i)){if(!l(e))return!0;if(!n)return!1;u(e)}return e[i].w},onFreeze:function(e){return c&&d.NEED&&l(e)&&!o(e,i)&&u(e),e}}},function(e,n,t){var i=t(8),r=t(2);e.exports=function(e,n){for(var t,o=r(e),a=i(o),s=a.length,l=0;s>l;)if(o[t=a[l++]]===n)return t}},function(e,n,t){var i=t(8),r=t(22),o=t(15);e.exports=function(e){var n=i(e),t=r.f;if(t)for(var a,s=t(e),l=o.f,c=0;s.length>c;)l.call(e,a=s[c++])&&n.push(a);return n}},function(e,n,t){var i=t(33);e.exports=Array.isArray||function(e){return"Array"==i(e)}},function(e,n,t){var i=t(2),r=t(37).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?function(e){try{return r(e)}catch(e){return a.slice()}}(e):r(i(e))}},function(e,n,t){var i=t(15),r=t(13),o=t(2),a=t(16),s=t(1),l=t(29),c=Object.getOwnPropertyDescriptor;n.f=t(6)?c:function(e,n){if(e=o(e),n=a(n,!0),l)try{return c(e,n)}catch(e){}if(s(e,n))return r(!i.f.call(e,n),e[n])}},function(e,n){},function(e,n,t){t(28)("asyncIterator")},function(e,n,t){t(28)("observable")},function(e,n,t){"use strict";n.__esModule=!0,n.removeCookie=n.setRawCookie=n.getRawCookie=n.setCookie=n.getAllCookies=n.getCookie=n.isCookieEnabled=n.remove=n.setRaw=n.getRaw=n.set=n.getAll=n.get=n.isEnabled=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=t(86);function o(){var e=new RegExp("(?:^|; )@key@=1(?:;|$)");document.cookie="@key@=1";var n=e.test(document.cookie);return n&&c("@key@"),n}function a(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:decodeURIComponent;if("string"!=typeof e||!e)return null;var t=new RegExp("(?:^|; )"+(0,r.escapeRe)(e)+"(?:=([^;]*))?(?:;|$)"),i=t.exec(document.cookie);return null===i?null:"function"==typeof n?n(i[1]):i[1]}function s(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:decodeURIComponent,n=/(?:^|; )([^=]+?)(?:=([^;]*))?(?:;|$)/g,t={},i=void 0;i=n.exec(document.cookie);)n.lastIndex=i.index+i.length-1,t[i[1]]="function"==typeof e?e(i[2]):i[2];return t}function l(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:encodeURIComponent,o=arguments[3];"object"===(void 0===t?"undefined":i(t))&&null!==t&&(o=t,t=encodeURIComponent);var a=(0,r.convert)(o||{}),s="function"==typeof t?t(n):n,l=e+"="+s+a;document.cookie=l}function c(e,n){var t={expires:-1};return n&&n.domain&&(t.domain=n.domain),l(e,"a",t)}function u(e){return a(e,null)}function d(e,n,t){return l(e,n,null,t)}n.isEnabled=o,n.get=a,n.getAll=s,n.set=l,n.getRaw=u,n.setRaw=d,n.remove=c,n.isCookieEnabled=o,n.getCookie=a,n.getAllCookies=s,n.setCookie=l,n.getRawCookie=u,n.setRawCookie=d,n.removeCookie=c},function(e,n,t){"use strict";n.__esModule=!0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function r(e,n){return Object.prototype.hasOwnProperty.call(e,n)}function o(e){var n=e.charAt(e.length-1),t=parseInt(e,10),i=new Date;switch(n){case"Y":i.setFullYear(i.getFullYear()+t);break;case"M":i.setMonth(i.getMonth()+t);break;case"D":i.setDate(i.getDate()+t);break;case"h":i.setHours(i.getHours()+t);break;case"m":i.setMinutes(i.getMinutes()+t);break;case"s":i.setSeconds(i.getSeconds()+t);break;default:i=new Date(e)}return i}n.hasOwn=r,n.escapeRe=function(e){return e.replace(/[.*+?^$|[\](){}\\-]/g,"\\$&")},n.computeExpires=o,n.convert=function(e){var n="";for(var t in e)if(r(e,t))if(/^expires$/i.test(t)){var a=e[t];"object"!==(void 0===a?"undefined":i(a))&&(a=o(a+="number"==typeof a?"D":"")),n+=";"+t+"="+a.toUTCString()}else/^secure$/.test(t)?e[t]&&(n+=";"+t):n+=";"+t+"="+e[t];return r(e,"path")||(n+=";path=/"),n}},function(e,n){e.exports={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("transition",{attrs:{appear:"",name:e.transitionName}},[e.isOpen?t("div",{staticClass:"Cookie",class:[e.containerPosition,e.cookieTheme]},[e._t("default",[t("div",{staticClass:"Cookie__content"},[e._t("message",[e._v(e._s(e.message))])],2),e._v(" "),t("div",{staticClass:"Cookie__buttons"},[e.externalButtonLink?t("a",{class:e.buttonClass,attrs:{target:e.target,href:e.buttonLink}},[e._v(e._s(e.buttonLinkText))]):e._e(),e._v(" "),e.internalButtonLink?t("router-link",{class:e.buttonClass,attrs:{to:e.buttonLink}},[e._v(e._s(e.buttonLinkText))]):e._e(),e._v(" "),e.buttonDecline?t("button",{class:e.buttonDeclineClass,on:{click:e.decline}},[e._v(e._s(e.buttonDeclineText))]):e._e(),e._v(" "),t("button",{class:e.buttonClass,on:{click:e.accept}},[e._v(e._s(e.buttonText))])],1)],{accept:e.accept,close:e.close,decline:e.decline,open:e.open})],2):e._e()])},staticRenderFns:[]}}])},e.exports=i()},function(e,n,t){"use strict";!function(n,t,i){let r;(r=i.define)&&r.amd?r([],(function(){return t})):(r=i.modules)?r["FlexSearch".toLowerCase()]=t:e.exports=t}(0,function e(n){function t(e,n){const t=n?n.id:e&&e.id;this.id=t||0===t?t:O++,this.init(e,n),a(this,"index",(function(){return this.a?Object.keys(this.a.index[this.a.keys[0]].c):Object.keys(this.c)})),a(this,"length",(function(){return this.index.length}))}function i(e,n,t,i){return this.u!==this.g&&(this.o=this.o.concat(t),this.u++,i&&this.o.length>=i&&(this.u=this.g),this.u===this.g&&(this.cache&&this.j.set(n,this.o),this.F&&this.F(this.o))),this}function r(e,n){const t=e.length,i=y(n),r=[];for(let o=0,a=0;o<t;o++){const t=e[o];(i&&n(t)||!i&&!n[t])&&(r[a++]=t)}return r}function o(e,n,t,i,r,o,a,s,l,c){let u;if(t=g(t,a?0:r,s,o,n,l,c),s&&(s=t.page,u=t.next,t=t.result),a)n=this.where(a,null,r,t);else{for(n=t,t=this.l,r=n.length,o=Array(r),a=0;a<r;a++)o[a]=t[n[a]];n=o}return t=n,i&&(y(i)||(I=i.split(":"),1<I.length?i=f:(I=I[0],i=p)),t.sort(i)),t=m(s,u,t),this.cache&&this.j.set(e,t),t}function a(e,n,t){Object.defineProperty(e,n,{get:t})}function s(e){return new RegExp(e,"g")}function l(e,n){for(let t=0;t<n.length;t+=2)e=e.replace(n[t],n[t+1]);return e}function c(e,n,t,i,r,o,a,s){return n[t]?n[t]:(r=r?(s-(a||s/1.5))*o+(a||s/1.5)*r:o,n[t]=r,r>=a&&((e=(e=e[s-(r+.5>>0)])[t]||(e[t]=[]))[e.length]=i),r)}function u(e,n){if(e){const t=Object.keys(e);for(let i=0,r=t.length;i<r;i++){const r=t[i],o=e[r];if(o)for(let t=0,i=o.length;t<i;t++){if(o[t]===n){1===i?delete e[r]:o.splice(t,1);break}w(o[t])&&u(o[t],n)}}}}function d(e){let n="",t="";var i="";for(let r=0;r<e.length;r++){const o=e[r];o!==t&&(r&&"h"===o?(i="a"===i||"e"===i||"i"===i||"o"===i||"u"===i||"y"===i,(("a"===t||"e"===t||"i"===t||"o"===t||"u"===t||"y"===t)&&i||" "===t)&&(n+=o)):n+=o),i=r===e.length-1?"":e[r+1],t=o}return n}function h(e,n){return 0>(e=e.length-n.length)?1:e?-1:0}function p(e,n){return(e=e[I])<(n=n[I])?-1:e>n?1:0}function f(e,n){const t=I.length;for(let i=0;i<t;i++)e=e[I[i]],n=n[I[i]];return e<n?-1:e>n?1:0}function m(e,n,t){return e?{page:e,next:n?""+n:null,result:t}:t}function g(e,n,t,i,r,o,a){let s,l=[];if(!0===t){t="0";var c=""}else c=t&&t.split(":");const u=e.length;if(1<u){const y=S(),w=[];let _,k;var d,h=0;let C;var p=!0;let E,T,P,O,A,j,I=0;if(c&&(2===c.length?(O=c,c=!1):c=A=parseInt(c[0],10)),a){for(_=S();h<u;h++)if("not"===r[h])for(k=e[h],C=k.length,d=0;d<C;d++)_["@"+k[d]]=1;else P=h+1;if(x(P))return m(t,s,l);h=0}else T=v(r)&&r;for(;h<u;h++){const v=h===(P||u)-1;if(!T||!h)if((d=T||r&&r[h])&&"and"!==d){if("or"!==d)continue;j=!1}else j=o=!0;if(k=e[h],C=k.length){if(p){if(!E){E=k;continue}var f=E.length;for(d=0;d<f;d++){var g="@"+(p=E[d]);a&&_[g]||(y[g]=1,o||(l[I++]=p))}E=null,p=!1}for(g=!1,d=0;d<C;d++){var b="@"+(f=k[d]);const e=o?y[b]||0:h;if(!(!e&&!i||a&&_[b]||!o&&y[b]))if(e===h){if(v){if((!A||--A<I)&&(l[I++]=f,n&&I===n))return m(t,I+(c||0),l)}else y[b]=h+1;g=!0}else i&&((b=w[e]||(w[e]=[]))[b.length]=f)}if(j&&!g&&!i)break}else if(j&&!i)return m(t,s,k)}if(E)if(h=E.length,a)for(d=c?parseInt(c,10):0;d<h;d++)_["@"+(e=E[d])]||(l[I++]=e);else l=E;if(i)for(I=l.length,O?(h=parseInt(O[0],10)+1,d=parseInt(O[1],10)+1):(h=w.length,d=0);h--;)if(f=w[h]){for(C=f.length;d<C;d++)if(i=f[d],(!a||!_["@"+i])&&(l[I++]=i,n&&I===n))return m(t,h+":"+d,l);d=0}}else!u||r&&"not"===r[0]||(l=e[0],c&&(c=parseInt(c[0],10)));return n&&(a=l.length,c&&c>a&&(c=0),s=(c=c||0)+n,s<a?l=l.slice(c,s):(s=0,c&&(l=l.slice(c)))),m(t,s,l)}function v(e){return"string"==typeof e}function b(e){return e.constructor===Array}function y(e){return"function"==typeof e}function w(e){return"object"==typeof e}function x(e){return void 0===e}function _(e){const n=Array(e);for(let t=0;t<e;t++)n[t]=S();return n}function S(){return Object.create(null)}function k(){let e,n;self.onmessage=function(t){if(t=t.data)if(t.search){const i=n.search(t.content,t.threshold?{limit:t.limit,threshold:t.threshold,where:t.where}:t.limit);self.postMessage({id:e,content:t.content,limit:t.limit,result:i})}else t.add?n.add(t.id,t.content):t.update?n.update(t.id,t.content):t.remove?n.remove(t.id):t.clear?n.clear():t.info?((t=n.info()).worker=e,console.log(t)):t.register&&(e=t.id,t.options.cache=!1,t.options.async=!1,t.options.worker=!1,n=new Function(t.register.substring(t.register.indexOf("{")+1,t.register.lastIndexOf("}")))(),n=new n(t.options))}}function C(t,i,r,o){t=n("flexsearch","id"+t,k,(function(e){(e=e.data)&&e.result&&o(e.id,e.content,e.result,e.limit,e.where,e.cursor,e.suggest)}),i);const a=e.toString();return r.id=i,t.postMessage({register:a,options:r,id:i}),t}const E={encode:"icase",f:"forward",split:/\W+/,cache:!1,async:!1,g:!1,D:!1,a:!1,b:9,threshold:0,depth:0},T={memory:{encode:"extra",f:"strict",threshold:0,b:1},speed:{encode:"icase",f:"strict",threshold:1,b:3,depth:2},match:{encode:"extra",f:"full",threshold:1,b:3},score:{encode:"extra",f:"strict",threshold:1,b:9,depth:4},balance:{encode:"balance",f:"strict",threshold:0,b:3,depth:3},fast:{encode:"icase",f:"strict",threshold:8,b:9,depth:1}},P=[];let O=0;const A={},j={};let I;t.create=function(e,n){return new t(e,n)},t.registerMatcher=function(e){for(const n in e)e.hasOwnProperty(n)&&P.push(s(n),e[n]);return this},t.registerEncoder=function(e,n){return M[e]=n.bind(M),this},t.registerLanguage=function(e,n){return A[e]=n.filter,j[e]=n.stemmer,this},t.encode=function(e,n){return M[e](n)},t.prototype.init=function(e,n){if(this.v=[],n){var r=n.preset;e=n}else e||(e=E),r=e.preset;if(n={},v(e)?(n=T[e],e={}):r&&(n=T[r]),r=e.worker)if("undefined"==typeof Worker)e.worker=!1,this.m=null;else{var o=parseInt(r,10)||4;this.C=-1,this.u=0,this.o=[],this.F=null,this.m=Array(o);for(var a=0;a<o;a++)this.m[a]=C(this.id,a,e,i.bind(this))}if(this.f=e.tokenize||n.f||this.f||E.f,this.split=x(r=e.split)?this.split||E.split:v(r)?s(r):r,this.D=e.rtl||this.D||E.D,this.async="undefined"==typeof Promise||x(r=e.async)?this.async||E.async:r,this.g=x(r=e.worker)?this.g||E.g:r,this.threshold=x(r=e.threshold)?n.threshold||this.threshold||E.threshold:r,this.b=x(r=e.resolution)?r=n.b||this.b||E.b:r,r<=this.threshold&&(this.b=this.threshold+1),this.depth="strict"!==this.f||x(r=e.depth)?n.depth||this.depth||E.depth:r,this.w=(r=x(r=e.encode)?n.encode||E.encode:r)&&M[r]&&M[r].bind(M)||(y(r)?r:this.w||!1),(r=e.matcher)&&this.addMatcher(r),r=(n=e.lang)||e.filter){if(v(r)&&(r=A[r]),b(r)){o=this.w,a=S();for(var l=0;l<r.length;l++){var c=o?o(r[l]):r[l];a[c]=1}r=a}this.filter=r}if(r=n||e.stemmer){var u;for(u in n=v(r)?j[r]:r,o=this.w,a=[],n)n.hasOwnProperty(u)&&(l=o?o(u):u,a.push(s(l+"($|\\W)"),o?o(n[u]):n[u]));this.stemmer=u=a}if(this.a=a=(r=e.doc)?function e(n){const t=S();for(const i in n)if(n.hasOwnProperty(i)){const r=n[i];b(r)?t[i]=r.slice(0):w(r)?t[i]=e(r):t[i]=r}return t}(r):this.a||E.a,this.i=_(this.b-(this.threshold||0)),this.h=S(),this.c=S(),a){if(this.l=S(),e.doc=null,u=a.index={},n=a.keys=[],o=a.field,l=a.tag,c=a.store,b(a.id)||(a.id=a.id.split(":")),c){var d=S();if(v(c))d[c]=1;else if(b(c))for(let e=0;e<c.length;e++)d[c[e]]=1;else w(c)&&(d=c);a.store=d}if(l){if(this.G=S(),c=S(),o)if(v(o))c[o]=e;else if(b(o))for(d=0;d<o.length;d++)c[o[d]]=e;else w(o)&&(c=o);for(b(l)||(a.tag=l=[l]),o=0;o<l.length;o++)this.G[l[o]]=S();this.I=l,o=c}if(o){let i;for(b(o)||(w(o)?(i=o,a.field=o=Object.keys(o)):a.field=o=[o]),a=0;a<o.length;a++)b(l=o[a])||(i&&(e=i[l]),n[a]=l,o[a]=l.split(":")),u[l]=new t(e)}e.doc=r}return this.B=!0,this.j=!!(this.cache=r=x(r=e.cache)?this.cache||E.cache:r)&&new L(r),this},t.prototype.encode=function(e){return e&&(P.length&&(e=l(e,P)),this.v.length&&(e=l(e,this.v)),this.w&&(e=this.w(e)),this.stemmer&&(e=l(e,this.stemmer))),e},t.prototype.addMatcher=function(e){const n=this.v;for(const t in e)e.hasOwnProperty(t)&&n.push(s(t),e[t]);return this},t.prototype.add=function(e,n,t,i,o){if(this.a&&w(e))return this.A("add",e,n);if(n&&v(n)&&(e||0===e)){var a="@"+e;if(this.c[a]&&!i)return this.update(e,n);if(this.g)return++this.C>=this.m.length&&(this.C=0),this.m[this.C].postMessage({add:!0,id:e,content:n}),this.c[a]=""+this.C,t&&t(),this;if(!o){if(this.async&&"function"!=typeof importScripts){let r=this;return a=new Promise((function(t){setTimeout((function(){r.add(e,n,null,i,!0),r=null,t()}))})),t?(a.then(t),this):a}if(t)return this.add(e,n,null,i,!0),t(),this}if(!(n=this.encode(n)).length)return this;o=y(t=this.f)?t(n):n.split(this.split),this.filter&&(o=r(o,this.filter));const p=S();p._ctx=S();const f=o.length,m=this.threshold,g=this.depth,v=this.b,b=this.i,w=this.D;for(let n=0;n<f;n++){var s=o[n];if(s){var l=s.length,u=(w?n+1:f-n)/f,d="";switch(t){case"reverse":case"both":for(var h=l;--h;)c(b,p,d=s[h]+d,e,w?1:(l-h)/l,u,m,v-1);d="";case"forward":for(h=0;h<l;h++)c(b,p,d+=s[h],e,w?(h+1)/l:1,u,m,v-1);break;case"full":for(h=0;h<l;h++){const n=(w?h+1:l-h)/l;for(let t=l;t>h;t--)c(b,p,d=s.substring(h,t),e,n,u,m,v-1)}break;default:if(l=c(b,p,s,e,1,u,m,v-1),g&&1<f&&l>=m)for(l=p._ctx[s]||(p._ctx[s]=S()),s=this.h[s]||(this.h[s]=_(v-(m||0))),0>(u=n-g)&&(u=0),(d=n+g+1)>f&&(d=f);u<d;u++)u!==n&&c(s,l,o[u],e,0,v-(u<n?n-u:u-n),m,v-1)}}}this.c[a]=1,this.B=!1}return this},t.prototype.A=function(e,n,t){if(b(n)){var i=n.length;if(i--){for(var r=0;r<i;r++)this.A(e,n[r]);return this.A(e,n[i],t)}}else{var o,a=this.a.index,s=this.a.keys,l=this.a.tag;r=this.a.store;var c=this.a.id;i=n;for(var u=0;u<c.length;u++)i=i[c[u]];if("remove"===e&&(delete this.l[i],c=s.length,c--)){for(n=0;n<c;n++)a[s[n]].remove(i);return a[s[c]].remove(i,t)}if(l){for(o=0;o<l.length;o++){var d=l[o],h=n;for(c=d.split(":"),u=0;u<c.length;u++)h=h[c[u]];h="@"+h}o=(o=this.G[d])[h]||(o[h]=[])}for(let r=0,o=(c=this.a.field).length;r<o;r++){for(d=c[r],l=n,h=0;h<d.length;h++)l=l[d[h]];d=a[s[r]],h="add"===e?d.add:d.update,r===o-1?h.call(d,i,l,t):h.call(d,i,l)}if(r){for(t=Object.keys(r),e=S(),a=0;a<t.length;a++)if(r[s=t[a]]){let t,i;for(s=s.split(":"),c=0;c<s.length;c++)t=(t||n)[l=s[c]],i=(i||e)[l]=t}n=e}o&&(o[o.length]=n),this.l[i]=n}return this},t.prototype.update=function(e,n,t){return this.a&&w(e)?this.A("update",e,n):(this.c["@"+e]&&v(n)&&(this.remove(e),this.add(e,n,t,!0)),this)},t.prototype.remove=function(e,n,t){if(this.a&&w(e))return this.A("remove",e,n);var i="@"+e;if(this.c[i]){if(this.g)return this.m[this.c[i]].postMessage({remove:!0,id:e}),delete this.c[i],n&&n(),this;if(!t){if(this.async&&"function"!=typeof importScripts){let t=this;return i=new Promise((function(n){setTimeout((function(){t.remove(e,null,!0),t=null,n()}))})),n?(i.then(n),this):i}if(n)return this.remove(e,null,!0),n(),this}for(n=0;n<this.b-(this.threshold||0);n++)u(this.i[n],e);this.depth&&u(this.h,e),delete this.c[i],this.B=!1}return this},t.prototype.search=function(e,n,t,i){if(w(n)){if(b(n))for(var a=0;a<n.length;a++)n[a].query=e;else n.query=e;e=n,n=1e3}else n&&y(n)?(t=n,n=1e3):n||0===n||(n=1e3);if(!this.g){var s=[],l=e;if(w(e)&&!b(e)){t||(t=e.callback)&&(l.callback=null);var c=e.sort,u=e.page;n=e.limit,C=e.threshold;var d=e.suggest;e=e.query}if(this.a){C=this.a.index;const r=l.where;var p=l.bool||"or",f=l.field;let h,g,y=p;if(f)b(f)||(f=[f]);else if(b(l)){var m=l;f=[],y=[];for(var x=0;x<l.length;x++)a=(i=l[x]).bool||p,f[x]=i.field,y[x]=a,"not"===a?h=!0:"and"===a&&(g=!0)}else f=this.a.keys;for(p=f.length,x=0;x<p;x++)m&&(l=m[x]),u&&!v(l)&&(l.page=null,l.limit=0),s[x]=C[f[x]].search(l,0);if(t)return t(o.call(this,e,y,s,c,n,d,r,u,g,h));if(this.async){const t=this;return new Promise((function(i){Promise.all(s).then((function(a){i(o.call(t,e,y,a,c,n,d,r,u,g,h))}))}))}return o.call(this,e,y,s,c,n,d,r,u,g,h)}if(C||(C=this.threshold||0),!i){if(this.async&&"function"!=typeof importScripts){let e=this;return C=new Promise((function(t){setTimeout((function(){t(e.search(l,n,null,!0)),e=null}))})),t?(C.then(t),this):C}if(t)return t(this.search(l,n,null,!0)),this}if(!e||!v(e))return s;if(l=e,this.cache)if(this.B){if(t=this.j.get(e))return t}else this.j.clear(),this.B=!0;if(!(l=this.encode(l)).length)return s;t=y(t=this.f)?t(l):l.split(this.split),this.filter&&(t=r(t,this.filter)),m=t.length,i=!0,a=[];var _=S(),k=0;if(1<m&&(this.depth&&"strict"===this.f?p=!0:t.sort(h)),!p||(x=this.h)){const e=this.b;for(;k<m;k++){let n=t[k];if(n){if(p){if(!f)if(x[n])f=n,_[n]=1;else if(!d)return s;if(d&&k===m-1&&!a.length)p=!1,n=f||n,_[n]=0;else if(!f)continue}if(!_[n]){const t=[];let r=!1,o=0;const s=p?x[f]:this.i;if(s){let i;for(let a=0;a<e-C;a++)(i=s[a]&&s[a][n])&&(t[o++]=i,r=!0)}if(r)f=n,a[a.length]=1<o?t.concat.apply([],t):t[0];else if(!d){i=!1;break}_[n]=1}}}}else i=!1;return i&&(s=g(a,n,u,d)),this.cache&&this.j.set(e,s),s}this.F=t,this.u=0,this.o=[];for(var C=0;C<this.g;C++)this.m[C].postMessage({search:!0,limit:n,content:e})},t.prototype.find=function(e,n){return this.where(e,n,1)[0]||null},t.prototype.where=function(e,n,t,i){const r=this.l,o=[];let a,s=0;var l;let c;if(w(e)){t||(t=n);var u=Object.keys(e),d=u.length;if(a=!1,1===d&&"id"===u[0])return[r[e.id]];if((l=this.I)&&!i)for(var h=0;h<l.length;h++){var p=l[h],f=e[p];if(!x(f)){if(c=this.G[p]["@"+f],0==--d)return c;u.splice(u.indexOf(p),1),delete e[p];break}}for(l=Array(d),h=0;h<d;h++)l[h]=u[h].split(":")}else{if(y(e)){for(t=(n=i||Object.keys(r)).length,u=0;u<t;u++)e(d=r[n[u]])&&(o[s++]=d);return o}if(x(n))return[r[e]];if("id"===e)return[r[n]];u=[e],d=1,l=[e.split(":")],a=!0}for(h=(i=c||i||Object.keys(r)).length,p=0;p<h;p++){f=c?i[p]:r[i[p]];let h=!0;for(let t=0;t<d;t++){a||(n=e[u[t]]);const i=l[t],r=i.length;let o=f;if(1<r)for(let e=0;e<r;e++)o=o[i[e]];else o=o[i[0]];if(o!==n){h=!1;break}}if(h&&(o[s++]=f,t&&s===t))break}return o},t.prototype.info=function(){if(!this.g)return{id:this.id,items:this.length,cache:!(!this.cache||!this.cache.s)&&this.cache.s.length,matcher:P.length+(this.v?this.v.length:0),worker:this.g,threshold:this.threshold,depth:this.depth,resolution:this.b,contextual:this.depth&&"strict"===this.f};for(let e=0;e<this.g;e++)this.m[e].postMessage({info:!0,id:this.id})},t.prototype.clear=function(){return this.destroy().init()},t.prototype.destroy=function(){if(this.cache&&(this.j.clear(),this.j=null),this.i=this.h=this.c=null,this.a){const e=this.a.keys;for(let n=0;n<e.length;n++)this.a.index[e[n]].destroy();this.a=this.l=null}return this},t.prototype.export=function(e){const n=!e||x(e.serialize)||e.serialize;if(this.a){const n=!e||x(e.doc)||e.doc;var t=!e||x(e.index)||e.index;e=[];let i=0;if(t)for(t=this.a.keys;i<t.length;i++){const n=this.a.index[t[i]];e[i]=[n.i,n.h,Object.keys(n.c)]}n&&(e[i]=this.l)}else e=[this.i,this.h,Object.keys(this.c)];return n&&(e=JSON.stringify(e)),e},t.prototype.import=function(e,n){(!n||x(n.serialize)||n.serialize)&&(e=JSON.parse(e));const t=S();if(this.a){var i=!n||x(n.doc)||n.doc,r=0;if(!n||x(n.index)||n.index){const i=(n=this.a.keys).length;for(var o=e[0][2];r<o.length;r++)t[o[r]]=1;for(r=0;r<i;r++){o=this.a.index[n[r]];const i=e[r];i&&(o.i=i[0],o.h=i[1],o.c=t)}}i&&(this.l=w(i)?i:e[r])}else{for(i=e[2],r=0;r<i.length;r++)t[i[r]]=1;this.i=e[0],this.h=e[1],this.c=t}};const D=function(){const e=s("\\s+"),n=s("[^a-z0-9 ]"),t=[s("[-/]")," ",n,"",e," "];return function(e){return d(l(e.toLowerCase(),t))}}(),M={icase:function(e){return e.toLowerCase()},simple:function(){const e=s("\\s+"),n=s("[^a-z0-9 ]"),t=s("[-/]"),i=[s("[àáâãäå]"),"a",s("[èéêë]"),"e",s("[ìíîï]"),"i",s("[òóôõöő]"),"o",s("[ùúûüű]"),"u",s("[ýŷÿ]"),"y",s("ñ"),"n",s("[çc]"),"k",s("ß"),"s",s(" & ")," and ",t," ",n,"",e," "];return function(e){return" "===(e=l(e.toLowerCase(),i))?"":e}}(),advanced:function(){const e=s("ae"),n=s("ai"),t=s("ay"),i=s("ey"),r=s("oe"),o=s("ue"),a=s("ie"),c=s("sz"),u=s("zs"),h=s("ck"),p=s("cc"),f=[e,"a",n,"ei",t,"ei",i,"ei",r,"o",o,"u",a,"i",c,"s",u,"s",s("sh"),"s",h,"k",p,"k",s("th"),"t",s("dt"),"t",s("ph"),"f",s("pf"),"f",s("ou"),"o",s("uo"),"u"];return function(e,n){return e?(2<(e=this.simple(e)).length&&(e=l(e,f)),n||1<e.length&&(e=d(e)),e):e}}(),extra:function(){const e=[s("p"),"b",s("z"),"s",s("[cgq]"),"k",s("n"),"m",s("d"),"t",s("[vw]"),"f",s("[aeiouy]"),""];return function(n){if(!n)return n;if(1<(n=this.advanced(n,!0)).length){n=n.split(" ");for(let t=0;t<n.length;t++){const i=n[t];1<i.length&&(n[t]=i[0]+l(i.substring(1),e))}n=d(n=n.join(" "))}return n}}(),balance:D},L=function(){function e(e){this.clear(),this.H=!0!==e&&e}return e.prototype.clear=function(){this.cache=S(),this.count=S(),this.index=S(),this.s=[]},e.prototype.set=function(e,n){if(this.H&&x(this.cache[e])){let t=this.s.length;if(t===this.H){t--;const e=this.s[t];delete this.cache[e],delete this.count[e],delete this.index[e]}this.index[e]=t,this.s[t]=e,this.count[e]=-1,this.cache[e]=n,this.get(e)}else this.cache[e]=n},e.prototype.get=function(e){const n=this.cache[e];if(this.H&&n){var t=++this.count[e];const n=this.index;let r=n[e];if(0<r){const o=this.s;for(var i=r;this.count[o[--r]]<=t&&-1!==r;);if(r++,r!==i){for(t=i;t>r;t--)i=o[t-1],o[t]=i,n[i]=t;o[r]=e,n[e]=r}}}return n},e}();return t}(function(){const e={},n="undefined"!=typeof Blob&&"undefined"!=typeof URL&&URL.createObjectURL;return function(t,i,r,o,a){return r=n?URL.createObjectURL(new Blob(["("+r.toString()+")()"],{type:"text/javascript"})):t+".min.js",e[t+="-"+i]||(e[t]=[]),e[t][a]=new Worker(r),e[t][a].onmessage=o,e[t][a]}}()),this)},function(e,n,t){e.exports=function(e){var n={};function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(i,r,function(n){return e[n]}.bind(null,r));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/dist/",t(t.s=45)}([function(e,n){e.exports=t(491)},function(e,n){e.exports=t(33)},function(e,n){e.exports=t(27)},function(e,n){e.exports=t(45)},function(e,n){e.exports=t(165)},function(e,n){e.exports=t(108)},function(e,n){e.exports=t(2)},function(e,n){e.exports=t(109)},function(e,n){e.exports=t(167)},function(e,n){e.exports=t(292)},function(e,n){e.exports=t(293)},function(e,n){e.exports=t(497)},function(e,n){e.exports=t(168)},function(e,n){e.exports=t(291)},function(e,n){e.exports=t(111)},function(e,n){e.exports=t(164)},function(e,n){e.exports=t(294)},function(e,n){e.exports=t(170)},function(e,n){e.exports=t(290)},function(e,n){e.exports=t(110)},function(e,n){e.exports=t(289)},function(e,n){e.exports=t(499)},function(e,n){e.exports=t(171)},function(e,n){e.exports=t(500)},function(e,n){e.exports=t(197)},function(e,n){e.exports=t(169)},function(e,n){e.exports=t(501)},function(e,n){e.exports=t(172)},function(e,n){e.exports=t(502)},function(e,n){e.exports=t(295)},function(e,n){e.exports=t(166)},function(e,n){e.exports=t(503)},function(e,n){e.exports=t(504)},function(e,n){e.exports=t(505)},function(e,n){e.exports=t(173)},function(e,n){e.exports=t(506)},function(e,n){e.exports=t(507)},function(e,n){e.exports=t(508)},function(e,n){e.exports=t(509)},function(e,n){e.exports=t(514)},function(e,n){e.exports=t(571)},function(e,n){e.exports=t(547)},function(e,n){e.exports=t(548)},function(e,n){e.exports=t(305)},function(e,n){e.exports=t(549)},function(e,n,t){e.exports=t(46)},function(e,n,t){"use strict";t.r(n);var i=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("ul",{staticClass:"el-pager",on:{click:e.onPagerClick}},[e.pageCount>0?t("li",{staticClass:"number",class:{active:1===e.currentPage,disabled:e.disabled}},[e._v("1")]):e._e(),e.showPrevMore?t("li",{staticClass:"el-icon more btn-quickprev",class:[e.quickprevIconClass,{disabled:e.disabled}],on:{mouseenter:function(n){e.onMouseenter("left")},mouseleave:function(n){e.quickprevIconClass="el-icon-more"}}}):e._e(),e._l(e.pagers,(function(n){return t("li",{key:n,staticClass:"number",class:{active:e.currentPage===n,disabled:e.disabled}},[e._v(e._s(n))])})),e.showNextMore?t("li",{staticClass:"el-icon more btn-quicknext",class:[e.quicknextIconClass,{disabled:e.disabled}],on:{mouseenter:function(n){e.onMouseenter("right")},mouseleave:function(n){e.quicknextIconClass="el-icon-more"}}}):e._e(),e.pageCount>1?t("li",{staticClass:"number",class:{active:e.currentPage===e.pageCount,disabled:e.disabled}},[e._v(e._s(e.pageCount))]):e._e()],2)};function r(e,n,t,i,r,o,a,s){var l,c="function"==typeof e?e.options:e;if(n&&(c.render=n,c.staticRenderFns=t,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,n){return l.call(n),u(e,n)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:c}}i._withStripped=!0;var o=r({name:"ElPager",props:{currentPage:Number,pageCount:Number,pagerCount:Number,disabled:Boolean},watch:{showPrevMore:function(e){e||(this.quickprevIconClass="el-icon-more")},showNextMore:function(e){e||(this.quicknextIconClass="el-icon-more")}},methods:{onPagerClick:function(e){var n=e.target;if("UL"!==n.tagName&&!this.disabled){var t=Number(e.target.textContent),i=this.pageCount,r=this.currentPage,o=this.pagerCount-2;-1!==n.className.indexOf("more")&&(-1!==n.className.indexOf("quickprev")?t=r-o:-1!==n.className.indexOf("quicknext")&&(t=r+o)),isNaN(t)||(t<1&&(t=1),t>i&&(t=i)),t!==r&&this.$emit("change",t)}},onMouseenter:function(e){this.disabled||("left"===e?this.quickprevIconClass="el-icon-d-arrow-left":this.quicknextIconClass="el-icon-d-arrow-right")}},computed:{pagers:function(){var e=this.pagerCount,n=(e-1)/2,t=Number(this.currentPage),i=Number(this.pageCount),r=!1,o=!1;i>e&&(t>e-n&&(r=!0),t<i-n&&(o=!0));var a=[];if(r&&!o)for(var s=i-(e-2);s<i;s++)a.push(s);else if(!r&&o)for(var l=2;l<e;l++)a.push(l);else if(r&&o)for(var c=Math.floor(e/2)-1,u=t-c;u<=t+c;u++)a.push(u);else for(var d=2;d<i;d++)a.push(d);return this.showPrevMore=r,this.showNextMore=o,a}},data:function(){return{current:null,showPrevMore:!1,showNextMore:!1,quicknextIconClass:"el-icon-more",quickprevIconClass:"el-icon-more"}}},i,[],!1,null,null,null);o.options.__file="packages/pagination/src/pager.vue";var a=o.exports,s=t(36),l=t.n(s),c=t(37),u=t.n(c),d=t(8),h=t.n(d),p=t(4),f=t.n(p),m=t(2),g={name:"ElPagination",props:{pageSize:{type:Number,default:10},small:Boolean,total:Number,pageCount:Number,pagerCount:{type:Number,validator:function(e){return(0|e)===e&&e>4&&e<22&&e%2==1},default:7},currentPage:{type:Number,default:1},layout:{default:"prev, pager, next, jumper, ->, total"},pageSizes:{type:Array,default:function(){return[10,20,30,40,50,100]}},popperClass:String,prevText:String,nextText:String,background:Boolean,disabled:Boolean,hideOnSinglePage:Boolean},data:function(){return{internalCurrentPage:1,internalPageSize:0,lastEmittedPage:-1,userChangePageSize:!1}},render:function(e){var n=this.layout;if(!n)return null;if(this.hideOnSinglePage&&(!this.internalPageCount||1===this.internalPageCount))return null;var t=e("div",{class:["el-pagination",{"is-background":this.background,"el-pagination--small":this.small}]}),i={prev:e("prev"),jumper:e("jumper"),pager:e("pager",{attrs:{currentPage:this.internalCurrentPage,pageCount:this.internalPageCount,pagerCount:this.pagerCount,disabled:this.disabled},on:{change:this.handleCurrentChange}}),next:e("next"),sizes:e("sizes",{attrs:{pageSizes:this.pageSizes}}),slot:e("slot",[this.$slots.default?this.$slots.default:""]),total:e("total")},r=n.split(",").map((function(e){return e.trim()})),o=e("div",{class:"el-pagination__rightwrapper"}),a=!1;return t.children=t.children||[],o.children=o.children||[],r.forEach((function(e){"->"!==e?a?o.children.push(i[e]):t.children.push(i[e]):a=!0})),a&&t.children.unshift(o),t},components:{Prev:{render:function(e){return e("button",{attrs:{type:"button",disabled:this.$parent.disabled||this.$parent.internalCurrentPage<=1},class:"btn-prev",on:{click:this.$parent.prev}},[this.$parent.prevText?e("span",[this.$parent.prevText]):e("i",{class:"el-icon el-icon-arrow-left"})])}},Next:{render:function(e){return e("button",{attrs:{type:"button",disabled:this.$parent.disabled||this.$parent.internalCurrentPage===this.$parent.internalPageCount||0===this.$parent.internalPageCount},class:"btn-next",on:{click:this.$parent.next}},[this.$parent.nextText?e("span",[this.$parent.nextText]):e("i",{class:"el-icon el-icon-arrow-right"})])}},Sizes:{mixins:[f.a],props:{pageSizes:Array},watch:{pageSizes:{immediate:!0,handler:function(e,n){Object(m.valueEquals)(e,n)||Array.isArray(e)&&(this.$parent.internalPageSize=e.indexOf(this.$parent.pageSize)>-1?this.$parent.pageSize:this.pageSizes[0])}}},render:function(e){var n=this;return e("span",{class:"el-pagination__sizes"},[e("el-select",{attrs:{value:this.$parent.internalPageSize,popperClass:this.$parent.popperClass||"",size:"mini",disabled:this.$parent.disabled},on:{input:this.handleChange}},[this.pageSizes.map((function(t){return e("el-option",{attrs:{value:t,label:t+n.t("el.pagination.pagesize")}})}))])])},components:{ElSelect:l.a,ElOption:u.a},methods:{handleChange:function(e){e!==this.$parent.internalPageSize&&(this.$parent.internalPageSize=e=parseInt(e,10),this.$parent.userChangePageSize=!0,this.$parent.$emit("update:pageSize",e),this.$parent.$emit("size-change",e))}}},Jumper:{mixins:[f.a],components:{ElInput:h.a},data:function(){return{userInput:null}},watch:{"$parent.internalCurrentPage":function(){this.userInput=null}},methods:{handleKeyup:function(e){var n=e.keyCode,t=e.target;13===n&&this.handleChange(t.value)},handleInput:function(e){this.userInput=e},handleChange:function(e){this.$parent.internalCurrentPage=this.$parent.getValidCurrentPage(e),this.$parent.emitChange(),this.userInput=null}},render:function(e){return e("span",{class:"el-pagination__jump"},[this.t("el.pagination.goto"),e("el-input",{class:"el-pagination__editor is-in-pagination",attrs:{min:1,max:this.$parent.internalPageCount,value:null!==this.userInput?this.userInput:this.$parent.internalCurrentPage,type:"number",disabled:this.$parent.disabled},nativeOn:{keyup:this.handleKeyup},on:{input:this.handleInput,change:this.handleChange}}),this.t("el.pagination.pageClassifier")])}},Total:{mixins:[f.a],render:function(e){return"number"==typeof this.$parent.total?e("span",{class:"el-pagination__total"},[this.t("el.pagination.total",{total:this.$parent.total})]):""}},Pager:a},methods:{handleCurrentChange:function(e){this.internalCurrentPage=this.getValidCurrentPage(e),this.userChangePageSize=!0,this.emitChange()},prev:function(){if(!this.disabled){var e=this.internalCurrentPage-1;this.internalCurrentPage=this.getValidCurrentPage(e),this.$emit("prev-click",this.internalCurrentPage),this.emitChange()}},next:function(){if(!this.disabled){var e=this.internalCurrentPage+1;this.internalCurrentPage=this.getValidCurrentPage(e),this.$emit("next-click",this.internalCurrentPage),this.emitChange()}},getValidCurrentPage:function(e){e=parseInt(e,10);var n=void 0;return"number"==typeof this.internalPageCount?e<1?n=1:e>this.internalPageCount&&(n=this.internalPageCount):(isNaN(e)||e<1)&&(n=1),(void 0===n&&isNaN(e)||0===n)&&(n=1),void 0===n?e:n},emitChange:function(){var e=this;this.$nextTick((function(){(e.internalCurrentPage!==e.lastEmittedPage||e.userChangePageSize)&&(e.$emit("current-change",e.internalCurrentPage),e.lastEmittedPage=e.internalCurrentPage,e.userChangePageSize=!1)}))}},computed:{internalPageCount:function(){return"number"==typeof this.total?Math.max(1,Math.ceil(this.total/this.internalPageSize)):"number"==typeof this.pageCount?Math.max(1,this.pageCount):null}},watch:{currentPage:{immediate:!0,handler:function(e){this.internalCurrentPage=this.getValidCurrentPage(e)}},pageSize:{immediate:!0,handler:function(e){this.internalPageSize=isNaN(e)?10:e}},internalCurrentPage:{immediate:!0,handler:function(e){this.$emit("update:currentPage",e),this.lastEmittedPage=-1}},internalPageCount:function(e){var n=this.internalCurrentPage;e>0&&0===n?this.internalCurrentPage=1:n>e&&(this.internalCurrentPage=0===e?1:e,this.userChangePageSize&&this.emitChange()),this.userChangePageSize=!1}},install:function(e){e.component(g.name,g)}},v=g,b=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("transition",{attrs:{name:"dialog-fade"},on:{"after-enter":e.afterEnter,"after-leave":e.afterLeave}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-dialog__wrapper",on:{click:function(n){return n.target!==n.currentTarget?null:e.handleWrapperClick(n)}}},[t("div",{key:e.key,ref:"dialog",class:["el-dialog",{"is-fullscreen":e.fullscreen,"el-dialog--center":e.center},e.customClass],style:e.style,attrs:{role:"dialog","aria-modal":"true","aria-label":e.title||"dialog"}},[t("div",{staticClass:"el-dialog__header"},[e._t("title",[t("span",{staticClass:"el-dialog__title"},[e._v(e._s(e.title))])]),e.showClose?t("button",{staticClass:"el-dialog__headerbtn",attrs:{type:"button","aria-label":"Close"},on:{click:e.handleClose}},[t("i",{staticClass:"el-dialog__close el-icon el-icon-close"})]):e._e()],2),e.rendered?t("div",{staticClass:"el-dialog__body"},[e._t("default")],2):e._e(),e.$slots.footer?t("div",{staticClass:"el-dialog__footer"},[e._t("footer")],2):e._e()])])])};b._withStripped=!0;var y=t(13),w=t.n(y),x=t(9),_=t.n(x),S=t(3),k=t.n(S),C=r({name:"ElDialog",mixins:[w.a,k.a,_.a],props:{title:{type:String,default:""},modal:{type:Boolean,default:!0},modalAppendToBody:{type:Boolean,default:!0},appendToBody:{type:Boolean,default:!1},lockScroll:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},width:String,fullscreen:Boolean,customClass:{type:String,default:""},top:{type:String,default:"15vh"},beforeClose:Function,center:{type:Boolean,default:!1},destroyOnClose:Boolean},data:function(){return{closed:!1,key:0}},watch:{visible:function(e){var n=this;e?(this.closed=!1,this.$emit("open"),this.$el.addEventListener("scroll",this.updatePopper),this.$nextTick((function(){n.$refs.dialog.scrollTop=0})),this.appendToBody&&document.body.appendChild(this.$el)):(this.$el.removeEventListener("scroll",this.updatePopper),this.closed||this.$emit("close"),this.destroyOnClose&&this.$nextTick((function(){n.key++})))}},computed:{style:function(){var e={};return this.fullscreen||(e.marginTop=this.top,this.width&&(e.width=this.width)),e}},methods:{getMigratingConfig:function(){return{props:{size:"size is removed."}}},handleWrapperClick:function(){this.closeOnClickModal&&this.handleClose()},handleClose:function(){"function"==typeof this.beforeClose?this.beforeClose(this.hide):this.hide()},hide:function(e){!1!==e&&(this.$emit("update:visible",!1),this.$emit("close"),this.closed=!0)},updatePopper:function(){this.broadcast("ElSelectDropdown","updatePopper"),this.broadcast("ElDropdownMenu","updatePopper")},afterEnter:function(){this.$emit("opened")},afterLeave:function(){this.$emit("closed")}},mounted:function(){this.visible&&(this.rendered=!0,this.open(),this.appendToBody&&document.body.appendChild(this.$el))},destroyed:function(){this.appendToBody&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}},b,[],!1,null,null,null);C.options.__file="packages/dialog/src/component.vue";var E=C.exports;E.install=function(e){e.component(E.name,E)};var T=E,P=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.close,expression:"close"}],staticClass:"el-autocomplete",attrs:{"aria-haspopup":"listbox",role:"combobox","aria-expanded":e.suggestionVisible,"aria-owns":e.id}},[t("el-input",e._b({ref:"input",on:{input:e.handleInput,change:e.handleChange,focus:e.handleFocus,blur:e.handleBlur,clear:e.handleClear},nativeOn:{keydown:[function(n){if(!("button"in n)&&e._k(n.keyCode,"up",38,n.key,["Up","ArrowUp"]))return null;n.preventDefault(),e.highlight(e.highlightedIndex-1)},function(n){if(!("button"in n)&&e._k(n.keyCode,"down",40,n.key,["Down","ArrowDown"]))return null;n.preventDefault(),e.highlight(e.highlightedIndex+1)},function(n){return!("button"in n)&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.handleKeyEnter(n)},function(n){return!("button"in n)&&e._k(n.keyCode,"tab",9,n.key,"Tab")?null:e.close(n)}]}},"el-input",[e.$props,e.$attrs],!1),[e.$slots.prepend?t("template",{slot:"prepend"},[e._t("prepend")],2):e._e(),e.$slots.append?t("template",{slot:"append"},[e._t("append")],2):e._e(),e.$slots.prefix?t("template",{slot:"prefix"},[e._t("prefix")],2):e._e(),e.$slots.suffix?t("template",{slot:"suffix"},[e._t("suffix")],2):e._e()],2),t("el-autocomplete-suggestions",{ref:"suggestions",class:[e.popperClass?e.popperClass:""],attrs:{"visible-arrow":"","popper-options":e.popperOptions,"append-to-body":e.popperAppendToBody,placement:e.placement,id:e.id}},e._l(e.suggestions,(function(n,i){return t("li",{key:i,class:{highlighted:e.highlightedIndex===i},attrs:{id:e.id+"-item-"+i,role:"option","aria-selected":e.highlightedIndex===i},on:{click:function(t){e.select(n)}}},[e._t("default",[e._v("\n        "+e._s(n[e.valueKey])+"\n      ")],{item:n})],2)})),0)],1)};P._withStripped=!0;var O=t(14),A=t.n(O),j=t(10),I=t.n(j),D=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":e.doDestroy}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.showPopper,expression:"showPopper"}],staticClass:"el-autocomplete-suggestion el-popper",class:{"is-loading":!e.parent.hideLoading&&e.parent.loading},style:{width:e.dropdownWidth},attrs:{role:"region"}},[t("el-scrollbar",{attrs:{tag:"ul","wrap-class":"el-autocomplete-suggestion__wrap","view-class":"el-autocomplete-suggestion__list"}},[!e.parent.hideLoading&&e.parent.loading?t("li",[t("i",{staticClass:"el-icon-loading"})]):e._t("default")],2)],1)])};D._withStripped=!0;var M=t(5),L=t.n(M),N=t(17),$=t.n(N),F=r({components:{ElScrollbar:$.a},mixins:[L.a,k.a],componentName:"ElAutocompleteSuggestions",data:function(){return{parent:this.$parent,dropdownWidth:""}},props:{options:{default:function(){return{gpuAcceleration:!1}}},id:String},methods:{select:function(e){this.dispatch("ElAutocomplete","item-click",e)}},updated:function(){var e=this;this.$nextTick((function(n){e.popperJS&&e.updatePopper()}))},mounted:function(){this.$parent.popperElm=this.popperElm=this.$el,this.referenceElm=this.$parent.$refs.input.$refs.input||this.$parent.$refs.input.$refs.textarea,this.referenceList=this.$el.querySelector(".el-autocomplete-suggestion__list"),this.referenceList.setAttribute("role","listbox"),this.referenceList.setAttribute("id",this.id)},created:function(){var e=this;this.$on("visible",(function(n,t){e.dropdownWidth=t+"px",e.showPopper=n}))}},D,[],!1,null,null,null);F.options.__file="packages/autocomplete/src/autocomplete-suggestions.vue";var R=F.exports,B=t(22),V=t.n(B),z=r({name:"ElAutocomplete",mixins:[k.a,V()("input"),_.a],inheritAttrs:!1,componentName:"ElAutocomplete",components:{ElInput:h.a,ElAutocompleteSuggestions:R},directives:{Clickoutside:I.a},props:{valueKey:{type:String,default:"value"},popperClass:String,popperOptions:Object,placeholder:String,clearable:{type:Boolean,default:!1},disabled:Boolean,name:String,size:String,value:String,maxlength:Number,minlength:Number,autofocus:Boolean,fetchSuggestions:Function,triggerOnFocus:{type:Boolean,default:!0},customItem:String,selectWhenUnmatched:{type:Boolean,default:!1},prefixIcon:String,suffixIcon:String,label:String,debounce:{type:Number,default:300},placement:{type:String,default:"bottom-start"},hideLoading:Boolean,popperAppendToBody:{type:Boolean,default:!0},highlightFirstItem:{type:Boolean,default:!1}},data:function(){return{activated:!1,suggestions:[],loading:!1,highlightedIndex:-1,suggestionDisabled:!1}},computed:{suggestionVisible:function(){var e=this.suggestions;return(Array.isArray(e)&&e.length>0||this.loading)&&this.activated},id:function(){return"el-autocomplete-"+Object(m.generateId)()}},watch:{suggestionVisible:function(e){var n=this.getInput();n&&this.broadcast("ElAutocompleteSuggestions","visible",[e,n.offsetWidth])}},methods:{getMigratingConfig:function(){return{props:{"custom-item":"custom-item is removed, use scoped slot instead.",props:"props is removed, use value-key instead."}}},getData:function(e){var n=this;this.suggestionDisabled||(this.loading=!0,this.fetchSuggestions(e,(function(e){n.loading=!1,n.suggestionDisabled||(Array.isArray(e)?(n.suggestions=e,n.highlightedIndex=n.highlightFirstItem?0:-1):console.error("[Element Error][Autocomplete]autocomplete suggestions must be an array"))})))},handleInput:function(e){if(this.$emit("input",e),this.suggestionDisabled=!1,!this.triggerOnFocus&&!e)return this.suggestionDisabled=!0,void(this.suggestions=[]);this.debouncedGetData(e)},handleChange:function(e){this.$emit("change",e)},handleFocus:function(e){this.activated=!0,this.$emit("focus",e),this.triggerOnFocus&&this.debouncedGetData(this.value)},handleBlur:function(e){this.$emit("blur",e)},handleClear:function(){this.activated=!1,this.$emit("clear")},close:function(e){this.activated=!1},handleKeyEnter:function(e){var n=this;this.suggestionVisible&&this.highlightedIndex>=0&&this.highlightedIndex<this.suggestions.length?(e.preventDefault(),this.select(this.suggestions[this.highlightedIndex])):this.selectWhenUnmatched&&(this.$emit("select",{value:this.value}),this.$nextTick((function(e){n.suggestions=[],n.highlightedIndex=-1})))},select:function(e){var n=this;this.$emit("input",e[this.valueKey]),this.$emit("select",e),this.$nextTick((function(e){n.suggestions=[],n.highlightedIndex=-1}))},highlight:function(e){if(this.suggestionVisible&&!this.loading)if(e<0)this.highlightedIndex=-1;else{e>=this.suggestions.length&&(e=this.suggestions.length-1);var n=this.$refs.suggestions.$el.querySelector(".el-autocomplete-suggestion__wrap"),t=n.querySelectorAll(".el-autocomplete-suggestion__list li")[e],i=n.scrollTop,r=t.offsetTop;r+t.scrollHeight>i+n.clientHeight&&(n.scrollTop+=t.scrollHeight),r<i&&(n.scrollTop-=t.scrollHeight),this.highlightedIndex=e,this.getInput().setAttribute("aria-activedescendant",this.id+"-item-"+this.highlightedIndex)}},getInput:function(){return this.$refs.input.getInput()}},mounted:function(){var e=this;this.debouncedGetData=A()(this.debounce,this.getData),this.$on("item-click",(function(n){e.select(n)}));var n=this.getInput();n.setAttribute("role","textbox"),n.setAttribute("aria-autocomplete","list"),n.setAttribute("aria-controls","id"),n.setAttribute("aria-activedescendant",this.id+"-item-"+this.highlightedIndex)},beforeDestroy:function(){this.$refs.suggestions.$destroy()}},P,[],!1,null,null,null);z.options.__file="packages/autocomplete/src/autocomplete.vue";var q=z.exports;q.install=function(e){e.component(q.name,q)};var H=q,W=t(11),U=t.n(W),J=t(28),Y=t.n(J),G=r({name:"ElDropdown",componentName:"ElDropdown",mixins:[k.a,_.a],directives:{Clickoutside:I.a},components:{ElButton:U.a,ElButtonGroup:Y.a},provide:function(){return{dropdown:this}},props:{trigger:{type:String,default:"hover"},type:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},placement:{type:String,default:"bottom-end"},visibleArrow:{default:!0},showTimeout:{type:Number,default:250},hideTimeout:{type:Number,default:150},tabindex:{type:Number,default:0}},data:function(){return{timeout:null,visible:!1,triggerElm:null,menuItems:null,menuItemsArray:null,dropdownElm:null,focusing:!1,listId:"dropdown-menu-"+Object(m.generateId)()}},computed:{dropdownSize:function(){return this.size||(this.$ELEMENT||{}).size}},mounted:function(){this.$on("menu-item-click",this.handleMenuItemClick)},watch:{visible:function(e){this.broadcast("ElDropdownMenu","visible",e),this.$emit("visible-change",e)},focusing:function(e){var n=this.$el.querySelector(".el-dropdown-selfdefine");n&&(e?n.className+=" focusing":n.className=n.className.replace("focusing",""))}},methods:{getMigratingConfig:function(){return{props:{"menu-align":"menu-align is renamed to placement."}}},show:function(){var e=this;this.triggerElm.disabled||(clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.visible=!0}),"click"===this.trigger?0:this.showTimeout))},hide:function(){var e=this;this.triggerElm.disabled||(this.removeTabindex(),this.tabindex>=0&&this.resetTabindex(this.triggerElm),clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.visible=!1}),"click"===this.trigger?0:this.hideTimeout))},handleClick:function(){this.triggerElm.disabled||(this.visible?this.hide():this.show())},handleTriggerKeyDown:function(e){var n=e.keyCode;[38,40].indexOf(n)>-1?(this.removeTabindex(),this.resetTabindex(this.menuItems[0]),this.menuItems[0].focus(),e.preventDefault(),e.stopPropagation()):13===n?this.handleClick():[9,27].indexOf(n)>-1&&this.hide()},handleItemKeyDown:function(e){var n=e.keyCode,t=e.target,i=this.menuItemsArray.indexOf(t),r=this.menuItemsArray.length-1,o=void 0;[38,40].indexOf(n)>-1?(o=38===n?0!==i?i-1:0:i<r?i+1:r,this.removeTabindex(),this.resetTabindex(this.menuItems[o]),this.menuItems[o].focus(),e.preventDefault(),e.stopPropagation()):13===n?(this.triggerElmFocus(),t.click(),this.hideOnClick&&(this.visible=!1)):[9,27].indexOf(n)>-1&&(this.hide(),this.triggerElmFocus())},resetTabindex:function(e){this.removeTabindex(),e.setAttribute("tabindex","0")},removeTabindex:function(){this.triggerElm.setAttribute("tabindex","-1"),this.menuItemsArray.forEach((function(e){e.setAttribute("tabindex","-1")}))},initAria:function(){this.dropdownElm.setAttribute("id",this.listId),this.triggerElm.setAttribute("aria-haspopup","list"),this.triggerElm.setAttribute("aria-controls",this.listId),this.splitButton||(this.triggerElm.setAttribute("role","button"),this.triggerElm.setAttribute("tabindex",this.tabindex),this.triggerElm.setAttribute("class",(this.triggerElm.getAttribute("class")||"")+" el-dropdown-selfdefine"))},initEvent:function(){var e=this,n=this.trigger,t=this.show,i=this.hide,r=this.handleClick,o=this.splitButton,a=this.handleTriggerKeyDown,s=this.handleItemKeyDown;this.triggerElm=o?this.$refs.trigger.$el:this.$slots.default[0].elm;var l=this.dropdownElm;this.triggerElm.addEventListener("keydown",a),l.addEventListener("keydown",s,!0),o||(this.triggerElm.addEventListener("focus",(function(){e.focusing=!0})),this.triggerElm.addEventListener("blur",(function(){e.focusing=!1})),this.triggerElm.addEventListener("click",(function(){e.focusing=!1}))),"hover"===n?(this.triggerElm.addEventListener("mouseenter",t),this.triggerElm.addEventListener("mouseleave",i),l.addEventListener("mouseenter",t),l.addEventListener("mouseleave",i)):"click"===n&&this.triggerElm.addEventListener("click",r)},handleMenuItemClick:function(e,n){this.hideOnClick&&(this.visible=!1),this.$emit("command",e,n)},triggerElmFocus:function(){this.triggerElm.focus&&this.triggerElm.focus()},initDomOperation:function(){this.dropdownElm=this.popperElm,this.menuItems=this.dropdownElm.querySelectorAll("[tabindex='-1']"),this.menuItemsArray=[].slice.call(this.menuItems),this.initEvent(),this.initAria()}},render:function(e){var n=this,t=this.hide,i=this.splitButton,r=this.type,o=this.dropdownSize,a=i?e("el-button-group",[e("el-button",{attrs:{type:r,size:o},nativeOn:{click:function(e){n.$emit("click",e),t()}}},[this.$slots.default]),e("el-button",{ref:"trigger",attrs:{type:r,size:o},class:"el-dropdown__caret-button"},[e("i",{class:"el-dropdown__icon el-icon-arrow-down"})])]):this.$slots.default;return e("div",{class:"el-dropdown",directives:[{name:"clickoutside",value:t}]},[a,this.$slots.dropdown])}},void 0,void 0,!1,null,null,null);G.options.__file="packages/dropdown/src/dropdown.vue";var K=G.exports;K.install=function(e){e.component(K.name,K)};var X=K,Q=function(){var e=this.$createElement,n=this._self._c||e;return n("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":this.doDestroy}},[n("ul",{directives:[{name:"show",rawName:"v-show",value:this.showPopper,expression:"showPopper"}],staticClass:"el-dropdown-menu el-popper",class:[this.size&&"el-dropdown-menu--"+this.size]},[this._t("default")],2)])};Q._withStripped=!0;var Z=r({name:"ElDropdownMenu",componentName:"ElDropdownMenu",mixins:[L.a],props:{visibleArrow:{type:Boolean,default:!0},arrowOffset:{type:Number,default:0}},data:function(){return{size:this.dropdown.dropdownSize}},inject:["dropdown"],created:function(){var e=this;this.$on("updatePopper",(function(){e.showPopper&&e.updatePopper()})),this.$on("visible",(function(n){e.showPopper=n}))},mounted:function(){this.dropdown.popperElm=this.popperElm=this.$el,this.referenceElm=this.dropdown.$el,this.dropdown.initDomOperation()},watch:{"dropdown.placement":{immediate:!0,handler:function(e){this.currentPlacement=e}}}},Q,[],!1,null,null,null);Z.options.__file="packages/dropdown/src/dropdown-menu.vue";var ee=Z.exports;ee.install=function(e){e.component(ee.name,ee)};var ne=ee,te=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("li",{staticClass:"el-dropdown-menu__item",class:{"is-disabled":e.disabled,"el-dropdown-menu__item--divided":e.divided},attrs:{"aria-disabled":e.disabled,tabindex:e.disabled?null:-1},on:{click:e.handleClick}},[e.icon?t("i",{class:e.icon}):e._e(),e._t("default")],2)};te._withStripped=!0;var ie=r({name:"ElDropdownItem",mixins:[k.a],props:{command:{},disabled:Boolean,divided:Boolean,icon:String},methods:{handleClick:function(e){this.dispatch("ElDropdown","menu-item-click",[this.command,this])}}},te,[],!1,null,null,null);ie.options.__file="packages/dropdown/src/dropdown-item.vue";var re=ie.exports;re.install=function(e){e.component(re.name,re)};var oe=re,ae=ae||{};ae.Utils=ae.Utils||{},ae.Utils.focusFirstDescendant=function(e){for(var n=0;n<e.childNodes.length;n++){var t=e.childNodes[n];if(ae.Utils.attemptFocus(t)||ae.Utils.focusFirstDescendant(t))return!0}return!1},ae.Utils.focusLastDescendant=function(e){for(var n=e.childNodes.length-1;n>=0;n--){var t=e.childNodes[n];if(ae.Utils.attemptFocus(t)||ae.Utils.focusLastDescendant(t))return!0}return!1},ae.Utils.attemptFocus=function(e){if(!ae.Utils.isFocusable(e))return!1;ae.Utils.IgnoreUtilFocusChanges=!0;try{e.focus()}catch(e){}return ae.Utils.IgnoreUtilFocusChanges=!1,document.activeElement===e},ae.Utils.isFocusable=function(e){if(e.tabIndex>0||0===e.tabIndex&&null!==e.getAttribute("tabIndex"))return!0;if(e.disabled)return!1;switch(e.nodeName){case"A":return!!e.href&&"ignore"!==e.rel;case"INPUT":return"hidden"!==e.type&&"file"!==e.type;case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},ae.Utils.triggerEvent=function(e,n){var t=void 0;t=/^mouse|click/.test(n)?"MouseEvents":/^key/.test(n)?"KeyboardEvent":"HTMLEvents";for(var i=document.createEvent(t),r=arguments.length,o=Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];return i.initEvent.apply(i,[n].concat(o)),e.dispatchEvent?e.dispatchEvent(i):e.fireEvent("on"+n,i),e},ae.Utils.keys={tab:9,enter:13,space:32,left:37,up:38,right:39,down:40,esc:27};var se=ae.Utils,le=function(e,n){this.domNode=n,this.parent=e,this.subMenuItems=[],this.subIndex=0,this.init()};le.prototype.init=function(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()},le.prototype.gotoSubIndex=function(e){e===this.subMenuItems.length?e=0:e<0&&(e=this.subMenuItems.length-1),this.subMenuItems[e].focus(),this.subIndex=e},le.prototype.addListeners=function(){var e=this,n=se.keys,t=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,(function(i){i.addEventListener("keydown",(function(i){var r=!1;switch(i.keyCode){case n.down:e.gotoSubIndex(e.subIndex+1),r=!0;break;case n.up:e.gotoSubIndex(e.subIndex-1),r=!0;break;case n.tab:se.triggerEvent(t,"mouseleave");break;case n.enter:case n.space:r=!0,i.currentTarget.click()}return r&&(i.preventDefault(),i.stopPropagation()),!1}))}))};var ce=le,ue=function(e){this.domNode=e,this.submenu=null,this.init()};ue.prototype.init=function(){this.domNode.setAttribute("tabindex","0");var e=this.domNode.querySelector(".el-menu");e&&(this.submenu=new ce(this,e)),this.addListeners()},ue.prototype.addListeners=function(){var e=this,n=se.keys;this.domNode.addEventListener("keydown",(function(t){var i=!1;switch(t.keyCode){case n.down:se.triggerEvent(t.currentTarget,"mouseenter"),e.submenu&&e.submenu.gotoSubIndex(0),i=!0;break;case n.up:se.triggerEvent(t.currentTarget,"mouseenter"),e.submenu&&e.submenu.gotoSubIndex(e.submenu.subMenuItems.length-1),i=!0;break;case n.tab:se.triggerEvent(t.currentTarget,"mouseleave");break;case n.enter:case n.space:i=!0,t.currentTarget.click()}i&&t.preventDefault()}))};var de=ue,he=function(e){this.domNode=e,this.init()};he.prototype.init=function(){var e=this.domNode.childNodes;[].filter.call(e,(function(e){return 1===e.nodeType})).forEach((function(e){new de(e)}))};var pe=he,fe=t(1),me=r({name:"ElMenu",render:function(e){var n=e("ul",{attrs:{role:"menubar"},key:+this.collapse,style:{backgroundColor:this.backgroundColor||""},class:{"el-menu--horizontal":"horizontal"===this.mode,"el-menu--collapse":this.collapse,"el-menu":!0}},[this.$slots.default]);return this.collapseTransition?e("el-menu-collapse-transition",[n]):n},componentName:"ElMenu",mixins:[k.a,_.a],provide:function(){return{rootMenu:this}},components:{"el-menu-collapse-transition":{functional:!0,render:function(e,n){return e("transition",{props:{mode:"out-in"},on:{beforeEnter:function(e){e.style.opacity=.2},enter:function(e){Object(fe.addClass)(e,"el-opacity-transition"),e.style.opacity=1},afterEnter:function(e){Object(fe.removeClass)(e,"el-opacity-transition"),e.style.opacity=""},beforeLeave:function(e){e.dataset||(e.dataset={}),Object(fe.hasClass)(e,"el-menu--collapse")?(Object(fe.removeClass)(e,"el-menu--collapse"),e.dataset.oldOverflow=e.style.overflow,e.dataset.scrollWidth=e.clientWidth,Object(fe.addClass)(e,"el-menu--collapse")):(Object(fe.addClass)(e,"el-menu--collapse"),e.dataset.oldOverflow=e.style.overflow,e.dataset.scrollWidth=e.clientWidth,Object(fe.removeClass)(e,"el-menu--collapse")),e.style.width=e.scrollWidth+"px",e.style.overflow="hidden"},leave:function(e){Object(fe.addClass)(e,"horizontal-collapse-transition"),e.style.width=e.dataset.scrollWidth+"px"}}},n.children)}}},props:{mode:{type:String,default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:Array,uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,collapseTransition:{type:Boolean,default:!0}},data:function(){return{activeIndex:this.defaultActive,openedMenus:this.defaultOpeneds&&!this.collapse?this.defaultOpeneds.slice(0):[],items:{},submenus:{}}},computed:{hoverBackground:function(){return this.backgroundColor?this.mixColor(this.backgroundColor,.2):""},isMenuPopup:function(){return"horizontal"===this.mode||"vertical"===this.mode&&this.collapse}},watch:{defaultActive:function(e){this.items[e]||(this.activeIndex=null),this.updateActiveIndex(e)},defaultOpeneds:function(e){this.collapse||(this.openedMenus=e)},collapse:function(e){e&&(this.openedMenus=[]),this.broadcast("ElSubmenu","toggle-collapse",e)}},methods:{updateActiveIndex:function(e){var n=this.items[e]||this.items[this.activeIndex]||this.items[this.defaultActive];n?(this.activeIndex=n.index,this.initOpenedMenu()):this.activeIndex=null},getMigratingConfig:function(){return{props:{theme:"theme is removed."}}},getColorChannels:function(e){if(e=e.replace("#",""),/^[0-9a-fA-F]{3}$/.test(e)){e=e.split("");for(var n=2;n>=0;n--)e.splice(n,0,e[n]);e=e.join("")}return/^[0-9a-fA-F]{6}$/.test(e)?{red:parseInt(e.slice(0,2),16),green:parseInt(e.slice(2,4),16),blue:parseInt(e.slice(4,6),16)}:{red:255,green:255,blue:255}},mixColor:function(e,n){var t=this.getColorChannels(e),i=t.red,r=t.green,o=t.blue;return n>0?(i*=1-n,r*=1-n,o*=1-n):(i+=(255-i)*n,r+=(255-r)*n,o+=(255-o)*n),"rgb("+Math.round(i)+", "+Math.round(r)+", "+Math.round(o)+")"},addItem:function(e){this.$set(this.items,e.index,e)},removeItem:function(e){delete this.items[e.index]},addSubmenu:function(e){this.$set(this.submenus,e.index,e)},removeSubmenu:function(e){delete this.submenus[e.index]},openMenu:function(e,n){var t=this.openedMenus;-1===t.indexOf(e)&&(this.uniqueOpened&&(this.openedMenus=t.filter((function(e){return-1!==n.indexOf(e)}))),this.openedMenus.push(e))},closeMenu:function(e){var n=this.openedMenus.indexOf(e);-1!==n&&this.openedMenus.splice(n,1)},handleSubmenuClick:function(e){var n=e.index,t=e.indexPath;-1!==this.openedMenus.indexOf(n)?(this.closeMenu(n),this.$emit("close",n,t)):(this.openMenu(n,t),this.$emit("open",n,t))},handleItemClick:function(e){var n=this,t=e.index,i=e.indexPath,r=this.activeIndex,o=null!==e.index;o&&(this.activeIndex=e.index),this.$emit("select",t,i,e),("horizontal"===this.mode||this.collapse)&&(this.openedMenus=[]),this.router&&o&&this.routeToItem(e,(function(e){if(n.activeIndex=r,e){if("NavigationDuplicated"===e.name)return;console.error(e)}}))},initOpenedMenu:function(){var e=this,n=this.activeIndex,t=this.items[n];t&&"horizontal"!==this.mode&&!this.collapse&&t.indexPath.forEach((function(n){var t=e.submenus[n];t&&e.openMenu(n,t.indexPath)}))},routeToItem:function(e,n){var t=e.route||e.index;try{this.$router.push(t,(function(){}),n)}catch(e){console.error(e)}},open:function(e){var n=this,t=this.submenus[e.toString()].indexPath;t.forEach((function(e){return n.openMenu(e,t)}))},close:function(e){this.closeMenu(e)}},mounted:function(){this.initOpenedMenu(),this.$on("item-click",this.handleItemClick),this.$on("submenu-click",this.handleSubmenuClick),"horizontal"===this.mode&&new pe(this.$el),this.$watch("items",this.updateActiveIndex)}},void 0,void 0,!1,null,null,null);me.options.__file="packages/menu/src/menu.vue";var ge=me.exports;ge.install=function(e){e.component(ge.name,ge)};var ve=ge,be=t(21),ye=t.n(be),we={inject:["rootMenu"],computed:{indexPath:function(){for(var e=[this.index],n=this.$parent;"ElMenu"!==n.$options.componentName;)n.index&&e.unshift(n.index),n=n.$parent;return e},parentMenu:function(){for(var e=this.$parent;e&&-1===["ElMenu","ElSubmenu"].indexOf(e.$options.componentName);)e=e.$parent;return e},paddingStyle:function(){if("vertical"!==this.rootMenu.mode)return{};var e=20,n=this.$parent;if(this.rootMenu.collapse)e=20;else for(;n&&"ElMenu"!==n.$options.componentName;)"ElSubmenu"===n.$options.componentName&&(e+=20),n=n.$parent;return{paddingLeft:e+"px"}}}},xe={props:{transformOrigin:{type:[Boolean,String],default:!1},offset:L.a.props.offset,boundariesPadding:L.a.props.boundariesPadding,popperOptions:L.a.props.popperOptions},data:L.a.data,methods:L.a.methods,beforeDestroy:L.a.beforeDestroy,deactivated:L.a.deactivated},_e=r({name:"ElSubmenu",componentName:"ElSubmenu",mixins:[we,k.a,xe],components:{ElCollapseTransition:ye.a},props:{index:{type:String,required:!0},showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300},popperClass:String,disabled:Boolean,popperAppendToBody:{type:Boolean,default:void 0}},data:function(){return{popperJS:null,timeout:null,items:{},submenus:{},mouseInChild:!1}},watch:{opened:function(e){var n=this;this.isMenuPopup&&this.$nextTick((function(e){n.updatePopper()}))}},computed:{appendToBody:function(){return void 0===this.popperAppendToBody?this.isFirstLevel:this.popperAppendToBody},menuTransitionName:function(){return this.rootMenu.collapse?"el-zoom-in-left":"el-zoom-in-top"},opened:function(){return this.rootMenu.openedMenus.indexOf(this.index)>-1},active:function(){var e=!1,n=this.submenus,t=this.items;return Object.keys(t).forEach((function(n){t[n].active&&(e=!0)})),Object.keys(n).forEach((function(t){n[t].active&&(e=!0)})),e},hoverBackground:function(){return this.rootMenu.hoverBackground},backgroundColor:function(){return this.rootMenu.backgroundColor||""},activeTextColor:function(){return this.rootMenu.activeTextColor||""},textColor:function(){return this.rootMenu.textColor||""},mode:function(){return this.rootMenu.mode},isMenuPopup:function(){return this.rootMenu.isMenuPopup},titleStyle:function(){return"horizontal"!==this.mode?{color:this.textColor}:{borderBottomColor:this.active?this.rootMenu.activeTextColor?this.activeTextColor:"":"transparent",color:this.active?this.activeTextColor:this.textColor}},isFirstLevel:function(){for(var e=!0,n=this.$parent;n&&n!==this.rootMenu;){if(["ElSubmenu","ElMenuItemGroup"].indexOf(n.$options.componentName)>-1){e=!1;break}n=n.$parent}return e}},methods:{handleCollapseToggle:function(e){e?this.initPopper():this.doDestroy()},addItem:function(e){this.$set(this.items,e.index,e)},removeItem:function(e){delete this.items[e.index]},addSubmenu:function(e){this.$set(this.submenus,e.index,e)},removeSubmenu:function(e){delete this.submenus[e.index]},handleClick:function(){var e=this.rootMenu,n=this.disabled;"hover"===e.menuTrigger&&"horizontal"===e.mode||e.collapse&&"vertical"===e.mode||n||this.dispatch("ElMenu","submenu-click",this)},handleMouseenter:function(e){var n=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.showTimeout;if("ActiveXObject"in window||"focus"!==e.type||e.relatedTarget){var i=this.rootMenu,r=this.disabled;"click"===i.menuTrigger&&"horizontal"===i.mode||!i.collapse&&"vertical"===i.mode||r||(this.dispatch("ElSubmenu","mouse-enter-child"),clearTimeout(this.timeout),this.timeout=setTimeout((function(){n.rootMenu.openMenu(n.index,n.indexPath)}),t),this.appendToBody&&this.$parent.$el.dispatchEvent(new MouseEvent("mouseenter")))}},handleMouseleave:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.rootMenu;"click"===t.menuTrigger&&"horizontal"===t.mode||!t.collapse&&"vertical"===t.mode||(this.dispatch("ElSubmenu","mouse-leave-child"),clearTimeout(this.timeout),this.timeout=setTimeout((function(){!e.mouseInChild&&e.rootMenu.closeMenu(e.index)}),this.hideTimeout),this.appendToBody&&n&&"ElSubmenu"===this.$parent.$options.name&&this.$parent.handleMouseleave(!0))},handleTitleMouseenter:function(){if("horizontal"!==this.mode||this.rootMenu.backgroundColor){var e=this.$refs["submenu-title"];e&&(e.style.backgroundColor=this.rootMenu.hoverBackground)}},handleTitleMouseleave:function(){if("horizontal"!==this.mode||this.rootMenu.backgroundColor){var e=this.$refs["submenu-title"];e&&(e.style.backgroundColor=this.rootMenu.backgroundColor||"")}},updatePlacement:function(){this.currentPlacement="horizontal"===this.mode&&this.isFirstLevel?"bottom-start":"right-start"},initPopper:function(){this.referenceElm=this.$el,this.popperElm=this.$refs.menu,this.updatePlacement()}},created:function(){var e=this;this.$on("toggle-collapse",this.handleCollapseToggle),this.$on("mouse-enter-child",(function(){e.mouseInChild=!0,clearTimeout(e.timeout)})),this.$on("mouse-leave-child",(function(){e.mouseInChild=!1,clearTimeout(e.timeout)}))},mounted:function(){this.parentMenu.addSubmenu(this),this.rootMenu.addSubmenu(this),this.initPopper()},beforeDestroy:function(){this.parentMenu.removeSubmenu(this),this.rootMenu.removeSubmenu(this)},render:function(e){var n=this,t=this.active,i=this.opened,r=this.paddingStyle,o=this.titleStyle,a=this.backgroundColor,s=this.rootMenu,l=this.currentPlacement,c=this.menuTransitionName,u=this.mode,d=this.disabled,h=this.popperClass,p=this.$slots,f=this.isFirstLevel,m=e("transition",{attrs:{name:c}},[e("div",{ref:"menu",directives:[{name:"show",value:i}],class:["el-menu--"+u,h],on:{mouseenter:function(e){return n.handleMouseenter(e,100)},mouseleave:function(){return n.handleMouseleave(!0)},focus:function(e){return n.handleMouseenter(e,100)}}},[e("ul",{attrs:{role:"menu"},class:["el-menu el-menu--popup","el-menu--popup-"+l],style:{backgroundColor:s.backgroundColor||""}},[p.default])])]),g=e("el-collapse-transition",[e("ul",{attrs:{role:"menu"},class:"el-menu el-menu--inline",directives:[{name:"show",value:i}],style:{backgroundColor:s.backgroundColor||""}},[p.default])]),v="horizontal"===s.mode&&f||"vertical"===s.mode&&!s.collapse?"el-icon-arrow-down":"el-icon-arrow-right";return e("li",{class:{"el-submenu":!0,"is-active":t,"is-opened":i,"is-disabled":d},attrs:{role:"menuitem","aria-haspopup":"true","aria-expanded":i},on:{mouseenter:this.handleMouseenter,mouseleave:function(){return n.handleMouseleave(!1)},focus:this.handleMouseenter}},[e("div",{class:"el-submenu__title",ref:"submenu-title",on:{click:this.handleClick,mouseenter:this.handleTitleMouseenter,mouseleave:this.handleTitleMouseleave},style:[r,o,{backgroundColor:a}]},[p.title,e("i",{class:["el-submenu__icon-arrow",v]})]),this.isMenuPopup?m:g])}},void 0,void 0,!1,null,null,null);_e.options.__file="packages/menu/src/submenu.vue";var Se=_e.exports;Se.install=function(e){e.component(Se.name,Se)};var ke=Se,Ce=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("li",{staticClass:"el-menu-item",class:{"is-active":e.active,"is-disabled":e.disabled},style:[e.paddingStyle,e.itemStyle,{backgroundColor:e.backgroundColor}],attrs:{role:"menuitem",tabindex:"-1"},on:{click:e.handleClick,mouseenter:e.onMouseEnter,focus:e.onMouseEnter,blur:e.onMouseLeave,mouseleave:e.onMouseLeave}},["ElMenu"===e.parentMenu.$options.componentName&&e.rootMenu.collapse&&e.$slots.title?t("el-tooltip",{attrs:{effect:"dark",placement:"right"}},[t("div",{attrs:{slot:"content"},slot:"content"},[e._t("title")],2),t("div",{staticStyle:{position:"absolute",left:"0",top:"0",height:"100%",width:"100%",display:"inline-block","box-sizing":"border-box",padding:"0 20px"}},[e._t("default")],2)]):[e._t("default"),e._t("title")]],2)};Ce._withStripped=!0;var Ee=t(26),Te=t.n(Ee),Pe=r({name:"ElMenuItem",componentName:"ElMenuItem",mixins:[we,k.a],components:{ElTooltip:Te.a},props:{index:{default:null,validator:function(e){return"string"==typeof e||null===e}},route:[String,Object],disabled:Boolean},computed:{active:function(){return this.index===this.rootMenu.activeIndex},hoverBackground:function(){return this.rootMenu.hoverBackground},backgroundColor:function(){return this.rootMenu.backgroundColor||""},activeTextColor:function(){return this.rootMenu.activeTextColor||""},textColor:function(){return this.rootMenu.textColor||""},mode:function(){return this.rootMenu.mode},itemStyle:function(){var e={color:this.active?this.activeTextColor:this.textColor};return"horizontal"!==this.mode||this.isNested||(e.borderBottomColor=this.active?this.rootMenu.activeTextColor?this.activeTextColor:"":"transparent"),e},isNested:function(){return this.parentMenu!==this.rootMenu}},methods:{onMouseEnter:function(){("horizontal"!==this.mode||this.rootMenu.backgroundColor)&&(this.$el.style.backgroundColor=this.hoverBackground)},onMouseLeave:function(){("horizontal"!==this.mode||this.rootMenu.backgroundColor)&&(this.$el.style.backgroundColor=this.backgroundColor)},handleClick:function(){this.disabled||(this.dispatch("ElMenu","item-click",this),this.$emit("click",this))}},mounted:function(){this.parentMenu.addItem(this),this.rootMenu.addItem(this)},beforeDestroy:function(){this.parentMenu.removeItem(this),this.rootMenu.removeItem(this)}},Ce,[],!1,null,null,null);Pe.options.__file="packages/menu/src/menu-item.vue";var Oe=Pe.exports;Oe.install=function(e){e.component(Oe.name,Oe)};var Ae=Oe,je=function(){var e=this.$createElement,n=this._self._c||e;return n("li",{staticClass:"el-menu-item-group"},[n("div",{staticClass:"el-menu-item-group__title",style:{paddingLeft:this.levelPadding+"px"}},[this.$slots.title?this._t("title"):[this._v(this._s(this.title))]],2),n("ul",[this._t("default")],2)])};je._withStripped=!0;var Ie=r({name:"ElMenuItemGroup",componentName:"ElMenuItemGroup",inject:["rootMenu"],props:{title:{type:String}},data:function(){return{paddingLeft:20}},computed:{levelPadding:function(){var e=20,n=this.$parent;if(this.rootMenu.collapse)return 20;for(;n&&"ElMenu"!==n.$options.componentName;)"ElSubmenu"===n.$options.componentName&&(e+=20),n=n.$parent;return e}}},je,[],!1,null,null,null);Ie.options.__file="packages/menu/src/menu-item-group.vue";var De=Ie.exports;De.install=function(e){e.component(De.name,De)};var Me=De,Le=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{class:["textarea"===e.type?"el-textarea":"el-input",e.inputSize?"el-input--"+e.inputSize:"",{"is-disabled":e.inputDisabled,"is-exceed":e.inputExceed,"el-input-group":e.$slots.prepend||e.$slots.append,"el-input-group--append":e.$slots.append,"el-input-group--prepend":e.$slots.prepend,"el-input--prefix":e.$slots.prefix||e.prefixIcon,"el-input--suffix":e.$slots.suffix||e.suffixIcon||e.clearable||e.showPassword}],on:{mouseenter:function(n){e.hovering=!0},mouseleave:function(n){e.hovering=!1}}},["textarea"!==e.type?[e.$slots.prepend?t("div",{staticClass:"el-input-group__prepend"},[e._t("prepend")],2):e._e(),"textarea"!==e.type?t("input",e._b({ref:"input",staticClass:"el-input__inner",attrs:{tabindex:e.tabindex,type:e.showPassword?e.passwordVisible?"text":"password":e.type,disabled:e.inputDisabled,readonly:e.readonly,autocomplete:e.autoComplete||e.autocomplete,"aria-label":e.label},on:{compositionstart:e.handleCompositionStart,compositionupdate:e.handleCompositionUpdate,compositionend:e.handleCompositionEnd,input:e.handleInput,focus:e.handleFocus,blur:e.handleBlur,change:e.handleChange}},"input",e.$attrs,!1)):e._e(),e.$slots.prefix||e.prefixIcon?t("span",{staticClass:"el-input__prefix"},[e._t("prefix"),e.prefixIcon?t("i",{staticClass:"el-input__icon",class:e.prefixIcon}):e._e()],2):e._e(),e.getSuffixVisible()?t("span",{staticClass:"el-input__suffix"},[t("span",{staticClass:"el-input__suffix-inner"},[e.showClear&&e.showPwdVisible&&e.isWordLimitVisible?e._e():[e._t("suffix"),e.suffixIcon?t("i",{staticClass:"el-input__icon",class:e.suffixIcon}):e._e()],e.showClear?t("i",{staticClass:"el-input__icon el-icon-circle-close el-input__clear",on:{mousedown:function(e){e.preventDefault()},click:e.clear}}):e._e(),e.showPwdVisible?t("i",{staticClass:"el-input__icon el-icon-view el-input__clear",on:{click:e.handlePasswordVisible}}):e._e(),e.isWordLimitVisible?t("span",{staticClass:"el-input__count"},[t("span",{staticClass:"el-input__count-inner"},[e._v("\n            "+e._s(e.textLength)+"/"+e._s(e.upperLimit)+"\n          ")])]):e._e()],2),e.validateState?t("i",{staticClass:"el-input__icon",class:["el-input__validateIcon",e.validateIcon]}):e._e()]):e._e(),e.$slots.append?t("div",{staticClass:"el-input-group__append"},[e._t("append")],2):e._e()]:t("textarea",e._b({ref:"textarea",staticClass:"el-textarea__inner",style:e.textareaStyle,attrs:{tabindex:e.tabindex,disabled:e.inputDisabled,readonly:e.readonly,autocomplete:e.autoComplete||e.autocomplete,"aria-label":e.label},on:{compositionstart:e.handleCompositionStart,compositionupdate:e.handleCompositionUpdate,compositionend:e.handleCompositionEnd,input:e.handleInput,focus:e.handleFocus,blur:e.handleBlur,change:e.handleChange}},"textarea",e.$attrs,!1)),e.isWordLimitVisible&&"textarea"===e.type?t("span",{staticClass:"el-input__count"},[e._v(e._s(e.textLength)+"/"+e._s(e.upperLimit))]):e._e()],2)};Le._withStripped=!0;var Ne=void 0,$e="\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important\n",Fe=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function Re(e){var n=window.getComputedStyle(e),t=n.getPropertyValue("box-sizing"),i=parseFloat(n.getPropertyValue("padding-bottom"))+parseFloat(n.getPropertyValue("padding-top")),r=parseFloat(n.getPropertyValue("border-bottom-width"))+parseFloat(n.getPropertyValue("border-top-width"));return{contextStyle:Fe.map((function(e){return e+":"+n.getPropertyValue(e)})).join(";"),paddingSize:i,borderSize:r,boxSizing:t}}function Be(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Ne||(Ne=document.createElement("textarea"),document.body.appendChild(Ne));var i=Re(e),r=i.paddingSize,o=i.borderSize,a=i.boxSizing,s=i.contextStyle;Ne.setAttribute("style",s+";"+$e),Ne.value=e.value||e.placeholder||"";var l=Ne.scrollHeight,c={};"border-box"===a?l+=o:"content-box"===a&&(l-=r),Ne.value="";var u=Ne.scrollHeight-r;if(null!==n){var d=u*n;"border-box"===a&&(d=d+r+o),l=Math.max(d,l),c.minHeight=d+"px"}if(null!==t){var h=u*t;"border-box"===a&&(h=h+r+o),l=Math.min(h,l)}return c.height=l+"px",Ne.parentNode&&Ne.parentNode.removeChild(Ne),Ne=null,c}var Ve=t(7),ze=t.n(Ve),qe=t(19),He=r({name:"ElInput",componentName:"ElInput",mixins:[k.a,_.a],inheritAttrs:!1,inject:{elForm:{default:""},elFormItem:{default:""}},data:function(){return{textareaCalcStyle:{},hovering:!1,focused:!1,isComposing:!1,passwordVisible:!1}},props:{value:[String,Number],size:String,resize:String,form:String,disabled:Boolean,readonly:Boolean,type:{type:String,default:"text"},autosize:{type:[Boolean,Object],default:!1},autocomplete:{type:String,default:"off"},autoComplete:{type:String,validator:function(e){return!0}},validateEvent:{type:Boolean,default:!0},suffixIcon:String,prefixIcon:String,label:String,clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},tabindex:String},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},validateState:function(){return this.elFormItem?this.elFormItem.validateState:""},needStatusIcon:function(){return!!this.elForm&&this.elForm.statusIcon},validateIcon:function(){return{validating:"el-icon-loading",success:"el-icon-circle-check",error:"el-icon-circle-close"}[this.validateState]},textareaStyle:function(){return ze()({},this.textareaCalcStyle,{resize:this.resize})},inputSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},inputDisabled:function(){return this.disabled||(this.elForm||{}).disabled},nativeInputValue:function(){return null===this.value||void 0===this.value?"":String(this.value)},showClear:function(){return this.clearable&&!this.inputDisabled&&!this.readonly&&this.nativeInputValue&&(this.focused||this.hovering)},showPwdVisible:function(){return this.showPassword&&!this.inputDisabled&&!this.readonly&&(!!this.nativeInputValue||this.focused)},isWordLimitVisible:function(){return this.showWordLimit&&this.$attrs.maxlength&&("text"===this.type||"textarea"===this.type)&&!this.inputDisabled&&!this.readonly&&!this.showPassword},upperLimit:function(){return this.$attrs.maxlength},textLength:function(){return"number"==typeof this.value?String(this.value).length:(this.value||"").length},inputExceed:function(){return this.isWordLimitVisible&&this.textLength>this.upperLimit}},watch:{value:function(e){this.$nextTick(this.resizeTextarea),this.validateEvent&&this.dispatch("ElFormItem","el.form.change",[e])},nativeInputValue:function(){this.setNativeInputValue()},type:function(){var e=this;this.$nextTick((function(){e.setNativeInputValue(),e.resizeTextarea(),e.updateIconOffset()}))}},methods:{focus:function(){this.getInput().focus()},blur:function(){this.getInput().blur()},getMigratingConfig:function(){return{props:{icon:"icon is removed, use suffix-icon / prefix-icon instead.","on-icon-click":"on-icon-click is removed."},events:{click:"click is removed."}}},handleBlur:function(e){this.focused=!1,this.$emit("blur",e),this.validateEvent&&this.dispatch("ElFormItem","el.form.blur",[this.value])},select:function(){this.getInput().select()},resizeTextarea:function(){if(!this.$isServer){var e=this.autosize;if("textarea"===this.type)if(e){var n=e.minRows,t=e.maxRows;this.textareaCalcStyle=Be(this.$refs.textarea,n,t)}else this.textareaCalcStyle={minHeight:Be(this.$refs.textarea).minHeight}}},setNativeInputValue:function(){var e=this.getInput();e&&e.value!==this.nativeInputValue&&(e.value=this.nativeInputValue)},handleFocus:function(e){this.focused=!0,this.$emit("focus",e)},handleCompositionStart:function(){this.isComposing=!0},handleCompositionUpdate:function(e){var n=e.target.value,t=n[n.length-1]||"";this.isComposing=!Object(qe.isKorean)(t)},handleCompositionEnd:function(e){this.isComposing&&(this.isComposing=!1,this.handleInput(e))},handleInput:function(e){this.isComposing||e.target.value!==this.nativeInputValue&&(this.$emit("input",e.target.value),this.$nextTick(this.setNativeInputValue))},handleChange:function(e){this.$emit("change",e.target.value)},calcIconOffset:function(e){var n=[].slice.call(this.$el.querySelectorAll(".el-input__"+e)||[]);if(n.length){for(var t=null,i=0;i<n.length;i++)if(n[i].parentNode===this.$el){t=n[i];break}if(t){var r={suffix:"append",prefix:"prepend"}[e];this.$slots[r]?t.style.transform="translateX("+("suffix"===e?"-":"")+this.$el.querySelector(".el-input-group__"+r).offsetWidth+"px)":t.removeAttribute("style")}}},updateIconOffset:function(){this.calcIconOffset("prefix"),this.calcIconOffset("suffix")},clear:function(){this.$emit("input",""),this.$emit("change",""),this.$emit("clear")},handlePasswordVisible:function(){this.passwordVisible=!this.passwordVisible,this.focus()},getInput:function(){return this.$refs.input||this.$refs.textarea},getSuffixVisible:function(){return this.$slots.suffix||this.suffixIcon||this.showClear||this.showPassword||this.isWordLimitVisible||this.validateState&&this.needStatusIcon}},created:function(){this.$on("inputSelect",this.select)},mounted:function(){this.setNativeInputValue(),this.resizeTextarea(),this.updateIconOffset()},updated:function(){this.$nextTick(this.updateIconOffset)}},Le,[],!1,null,null,null);He.options.__file="packages/input/src/input.vue";var We=He.exports;We.install=function(e){e.component(We.name,We)};var Ue=We,Je=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{class:["el-input-number",e.inputNumberSize?"el-input-number--"+e.inputNumberSize:"",{"is-disabled":e.inputNumberDisabled},{"is-without-controls":!e.controls},{"is-controls-right":e.controlsAtRight}],on:{dragstart:function(e){e.preventDefault()}}},[e.controls?t("span",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.decrease,expression:"decrease"}],staticClass:"el-input-number__decrease",class:{"is-disabled":e.minDisabled},attrs:{role:"button"},on:{keydown:function(n){return!("button"in n)&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.decrease(n)}}},[t("i",{class:"el-icon-"+(e.controlsAtRight?"arrow-down":"minus")})]):e._e(),e.controls?t("span",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.increase,expression:"increase"}],staticClass:"el-input-number__increase",class:{"is-disabled":e.maxDisabled},attrs:{role:"button"},on:{keydown:function(n){return!("button"in n)&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.increase(n)}}},[t("i",{class:"el-icon-"+(e.controlsAtRight?"arrow-up":"plus")})]):e._e(),t("el-input",{ref:"input",attrs:{value:e.displayValue,placeholder:e.placeholder,disabled:e.inputNumberDisabled,size:e.inputNumberSize,max:e.max,min:e.min,name:e.name,label:e.label},on:{blur:e.handleBlur,focus:e.handleFocus,input:e.handleInput,change:e.handleInputChange},nativeOn:{keydown:[function(n){return!("button"in n)&&e._k(n.keyCode,"up",38,n.key,["Up","ArrowUp"])?null:(n.preventDefault(),e.increase(n))},function(n){return!("button"in n)&&e._k(n.keyCode,"down",40,n.key,["Down","ArrowDown"])?null:(n.preventDefault(),e.decrease(n))}]}})],1)};Je._withStripped=!0;var Ye={bind:function(e,n,t){var i=null,r=void 0,o=function(){return t.context[n.expression].apply()},a=function(){Date.now()-r<100&&o(),clearInterval(i),i=null};Object(fe.on)(e,"mousedown",(function(e){0===e.button&&(r=Date.now(),Object(fe.once)(document,"mouseup",a),clearInterval(i),i=setInterval(o,100))}))}},Ge=r({name:"ElInputNumber",mixins:[V()("input")],inject:{elForm:{default:""},elFormItem:{default:""}},directives:{repeatClick:Ye},components:{ElInput:h.a},props:{step:{type:Number,default:1},stepStrictly:{type:Boolean,default:!1},max:{type:Number,default:1/0},min:{type:Number,default:-1/0},value:{},disabled:Boolean,size:String,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:""},name:String,label:String,placeholder:String,precision:{type:Number,validator:function(e){return e>=0&&e===parseInt(e,10)}}},data:function(){return{currentValue:0,userInput:null}},watch:{value:{immediate:!0,handler:function(e){var n=void 0===e?e:Number(e);if(void 0!==n){if(isNaN(n))return;if(this.stepStrictly){var t=this.getPrecision(this.step),i=Math.pow(10,t);n=Math.round(n/this.step)*i*this.step/i}void 0!==this.precision&&(n=this.toPrecision(n,this.precision))}n>=this.max&&(n=this.max),n<=this.min&&(n=this.min),this.currentValue=n,this.userInput=null,this.$emit("input",n)}}},computed:{minDisabled:function(){return this._decrease(this.value,this.step)<this.min},maxDisabled:function(){return this._increase(this.value,this.step)>this.max},numPrecision:function(){var e=this.value,n=this.step,t=this.getPrecision,i=this.precision,r=t(n);return void 0!==i?(r>i&&console.warn("[Element Warn][InputNumber]precision should not be less than the decimal places of step"),i):Math.max(t(e),r)},controlsAtRight:function(){return this.controls&&"right"===this.controlsPosition},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},inputNumberSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},inputNumberDisabled:function(){return this.disabled||!!(this.elForm||{}).disabled},displayValue:function(){if(null!==this.userInput)return this.userInput;var e=this.currentValue;if("number"==typeof e){if(this.stepStrictly){var n=this.getPrecision(this.step),t=Math.pow(10,n);e=Math.round(e/this.step)*t*this.step/t}void 0!==this.precision&&(e=e.toFixed(this.precision))}return e}},methods:{toPrecision:function(e,n){return void 0===n&&(n=this.numPrecision),parseFloat(Math.round(e*Math.pow(10,n))/Math.pow(10,n))},getPrecision:function(e){if(void 0===e)return 0;var n=e.toString(),t=n.indexOf("."),i=0;return-1!==t&&(i=n.length-t-1),i},_increase:function(e,n){if("number"!=typeof e&&void 0!==e)return this.currentValue;var t=Math.pow(10,this.numPrecision);return this.toPrecision((t*e+t*n)/t)},_decrease:function(e,n){if("number"!=typeof e&&void 0!==e)return this.currentValue;var t=Math.pow(10,this.numPrecision);return this.toPrecision((t*e-t*n)/t)},increase:function(){if(!this.inputNumberDisabled&&!this.maxDisabled){var e=this.value||0,n=this._increase(e,this.step);this.setCurrentValue(n)}},decrease:function(){if(!this.inputNumberDisabled&&!this.minDisabled){var e=this.value||0,n=this._decrease(e,this.step);this.setCurrentValue(n)}},handleBlur:function(e){this.$emit("blur",e)},handleFocus:function(e){this.$emit("focus",e)},setCurrentValue:function(e){var n=this.currentValue;"number"==typeof e&&void 0!==this.precision&&(e=this.toPrecision(e,this.precision)),e>=this.max&&(e=this.max),e<=this.min&&(e=this.min),n!==e&&(this.userInput=null,this.$emit("input",e),this.$emit("change",e,n),this.currentValue=e)},handleInput:function(e){this.userInput=e},handleInputChange:function(e){var n=""===e?void 0:Number(e);isNaN(n)&&""!==e||this.setCurrentValue(n),this.userInput=null},select:function(){this.$refs.input.select()}},mounted:function(){var e=this.$refs.input.$refs.input;e.setAttribute("role","spinbutton"),e.setAttribute("aria-valuemax",this.max),e.setAttribute("aria-valuemin",this.min),e.setAttribute("aria-valuenow",this.currentValue),e.setAttribute("aria-disabled",this.inputNumberDisabled)},updated:function(){this.$refs&&this.$refs.input&&this.$refs.input.$refs.input.setAttribute("aria-valuenow",this.currentValue)}},Je,[],!1,null,null,null);Ge.options.__file="packages/input-number/src/input-number.vue";var Ke=Ge.exports;Ke.install=function(e){e.component(Ke.name,Ke)};var Xe=Ke,Qe=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("label",{staticClass:"el-radio",class:[e.border&&e.radioSize?"el-radio--"+e.radioSize:"",{"is-disabled":e.isDisabled},{"is-focus":e.focus},{"is-bordered":e.border},{"is-checked":e.model===e.label}],attrs:{role:"radio","aria-checked":e.model===e.label,"aria-disabled":e.isDisabled,tabindex:e.tabIndex},on:{keydown:function(n){if(!("button"in n)&&e._k(n.keyCode,"space",32,n.key,[" ","Spacebar"]))return null;n.stopPropagation(),n.preventDefault(),e.model=e.isDisabled?e.model:e.label}}},[t("span",{staticClass:"el-radio__input",class:{"is-disabled":e.isDisabled,"is-checked":e.model===e.label}},[t("span",{staticClass:"el-radio__inner"}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],ref:"radio",staticClass:"el-radio__original",attrs:{type:"radio","aria-hidden":"true",name:e.name,disabled:e.isDisabled,tabindex:"-1"},domProps:{value:e.label,checked:e._q(e.model,e.label)},on:{focus:function(n){e.focus=!0},blur:function(n){e.focus=!1},change:[function(n){e.model=e.label},e.handleChange]}})]),t("span",{staticClass:"el-radio__label",on:{keydown:function(e){e.stopPropagation()}}},[e._t("default"),e.$slots.default?e._e():[e._v(e._s(e.label))]],2)])};Qe._withStripped=!0;var Ze=r({name:"ElRadio",mixins:[k.a],inject:{elForm:{default:""},elFormItem:{default:""}},componentName:"ElRadio",props:{value:{},label:{},disabled:Boolean,name:String,border:Boolean,size:String},data:function(){return{focus:!1}},computed:{isGroup:function(){for(var e=this.$parent;e;){if("ElRadioGroup"===e.$options.componentName)return this._radioGroup=e,!0;e=e.$parent}return!1},model:{get:function(){return this.isGroup?this._radioGroup.value:this.value},set:function(e){this.isGroup?this.dispatch("ElRadioGroup","input",[e]):this.$emit("input",e),this.$refs.radio&&(this.$refs.radio.checked=this.model===this.label)}},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},radioSize:function(){var e=this.size||this._elFormItemSize||(this.$ELEMENT||{}).size;return this.isGroup&&this._radioGroup.radioGroupSize||e},isDisabled:function(){return this.isGroup?this._radioGroup.disabled||this.disabled||(this.elForm||{}).disabled:this.disabled||(this.elForm||{}).disabled},tabIndex:function(){return this.isDisabled||this.isGroup&&this.model!==this.label?-1:0}},methods:{handleChange:function(){var e=this;this.$nextTick((function(){e.$emit("change",e.model),e.isGroup&&e.dispatch("ElRadioGroup","handleChange",e.model)}))}}},Qe,[],!1,null,null,null);Ze.options.__file="packages/radio/src/radio.vue";var en=Ze.exports;en.install=function(e){e.component(en.name,en)};var nn=en,tn=function(){var e=this.$createElement;return(this._self._c||e)(this._elTag,{tag:"component",staticClass:"el-radio-group",attrs:{role:"radiogroup"},on:{keydown:this.handleKeydown}},[this._t("default")],2)};tn._withStripped=!0;var rn=Object.freeze({LEFT:37,UP:38,RIGHT:39,DOWN:40}),on=r({name:"ElRadioGroup",componentName:"ElRadioGroup",inject:{elFormItem:{default:""}},mixins:[k.a],props:{value:{},size:String,fill:String,textColor:String,disabled:Boolean},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},_elTag:function(){return(this.$vnode.data||{}).tag||"div"},radioGroupSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size}},created:function(){var e=this;this.$on("handleChange",(function(n){e.$emit("change",n)}))},mounted:function(){var e=this.$el.querySelectorAll("[type=radio]"),n=this.$el.querySelectorAll("[role=radio]")[0];![].some.call(e,(function(e){return e.checked}))&&n&&(n.tabIndex=0)},methods:{handleKeydown:function(e){var n=e.target,t="INPUT"===n.nodeName?"[type=radio]":"[role=radio]",i=this.$el.querySelectorAll(t),r=i.length,o=[].indexOf.call(i,n),a=this.$el.querySelectorAll("[role=radio]");switch(e.keyCode){case rn.LEFT:case rn.UP:e.stopPropagation(),e.preventDefault(),0===o?(a[r-1].click(),a[r-1].focus()):(a[o-1].click(),a[o-1].focus());break;case rn.RIGHT:case rn.DOWN:o===r-1?(e.stopPropagation(),e.preventDefault(),a[0].click(),a[0].focus()):(a[o+1].click(),a[o+1].focus())}}},watch:{value:function(e){this.dispatch("ElFormItem","el.form.change",[this.value])}}},tn,[],!1,null,null,null);on.options.__file="packages/radio/src/radio-group.vue";var an=on.exports;an.install=function(e){e.component(an.name,an)};var sn=an,ln=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("label",{staticClass:"el-radio-button",class:[e.size?"el-radio-button--"+e.size:"",{"is-active":e.value===e.label},{"is-disabled":e.isDisabled},{"is-focus":e.focus}],attrs:{role:"radio","aria-checked":e.value===e.label,"aria-disabled":e.isDisabled,tabindex:e.tabIndex},on:{keydown:function(n){if(!("button"in n)&&e._k(n.keyCode,"space",32,n.key,[" ","Spacebar"]))return null;n.stopPropagation(),n.preventDefault(),e.value=e.isDisabled?e.value:e.label}}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],staticClass:"el-radio-button__orig-radio",attrs:{type:"radio",name:e.name,disabled:e.isDisabled,tabindex:"-1"},domProps:{value:e.label,checked:e._q(e.value,e.label)},on:{change:[function(n){e.value=e.label},e.handleChange],focus:function(n){e.focus=!0},blur:function(n){e.focus=!1}}}),t("span",{staticClass:"el-radio-button__inner",style:e.value===e.label?e.activeStyle:null,on:{keydown:function(e){e.stopPropagation()}}},[e._t("default"),e.$slots.default?e._e():[e._v(e._s(e.label))]],2)])};ln._withStripped=!0;var cn=r({name:"ElRadioButton",mixins:[k.a],inject:{elForm:{default:""},elFormItem:{default:""}},props:{label:{},disabled:Boolean,name:String},data:function(){return{focus:!1}},computed:{value:{get:function(){return this._radioGroup.value},set:function(e){this._radioGroup.$emit("input",e)}},_radioGroup:function(){for(var e=this.$parent;e;){if("ElRadioGroup"===e.$options.componentName)return e;e=e.$parent}return!1},activeStyle:function(){return{backgroundColor:this._radioGroup.fill||"",borderColor:this._radioGroup.fill||"",boxShadow:this._radioGroup.fill?"-1px 0 0 0 "+this._radioGroup.fill:"",color:this._radioGroup.textColor||""}},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},size:function(){return this._radioGroup.radioGroupSize||this._elFormItemSize||(this.$ELEMENT||{}).size},isDisabled:function(){return this.disabled||this._radioGroup.disabled||(this.elForm||{}).disabled},tabIndex:function(){return this.isDisabled||this._radioGroup&&this.value!==this.label?-1:0}},methods:{handleChange:function(){var e=this;this.$nextTick((function(){e.dispatch("ElRadioGroup","handleChange",e.value)}))}}},ln,[],!1,null,null,null);cn.options.__file="packages/radio/src/radio-button.vue";var un=cn.exports;un.install=function(e){e.component(un.name,un)};var dn=un,hn=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("label",{staticClass:"el-checkbox",class:[e.border&&e.checkboxSize?"el-checkbox--"+e.checkboxSize:"",{"is-disabled":e.isDisabled},{"is-bordered":e.border},{"is-checked":e.isChecked}],attrs:{id:e.id}},[t("span",{staticClass:"el-checkbox__input",class:{"is-disabled":e.isDisabled,"is-checked":e.isChecked,"is-indeterminate":e.indeterminate,"is-focus":e.focus},attrs:{tabindex:!!e.indeterminate&&0,role:!!e.indeterminate&&"checkbox","aria-checked":!!e.indeterminate&&"mixed"}},[t("span",{staticClass:"el-checkbox__inner"}),e.trueLabel||e.falseLabel?t("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],staticClass:"el-checkbox__original",attrs:{type:"checkbox","aria-hidden":e.indeterminate?"true":"false",name:e.name,disabled:e.isDisabled,"true-value":e.trueLabel,"false-value":e.falseLabel},domProps:{checked:Array.isArray(e.model)?e._i(e.model,null)>-1:e._q(e.model,e.trueLabel)},on:{change:[function(n){var t=e.model,i=n.target,r=i.checked?e.trueLabel:e.falseLabel;if(Array.isArray(t)){var o=e._i(t,null);i.checked?o<0&&(e.model=t.concat([null])):o>-1&&(e.model=t.slice(0,o).concat(t.slice(o+1)))}else e.model=r},e.handleChange],focus:function(n){e.focus=!0},blur:function(n){e.focus=!1}}}):t("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],staticClass:"el-checkbox__original",attrs:{type:"checkbox","aria-hidden":e.indeterminate?"true":"false",disabled:e.isDisabled,name:e.name},domProps:{value:e.label,checked:Array.isArray(e.model)?e._i(e.model,e.label)>-1:e.model},on:{change:[function(n){var t=e.model,i=n.target,r=!!i.checked;if(Array.isArray(t)){var o=e.label,a=e._i(t,o);i.checked?a<0&&(e.model=t.concat([o])):a>-1&&(e.model=t.slice(0,a).concat(t.slice(a+1)))}else e.model=r},e.handleChange],focus:function(n){e.focus=!0},blur:function(n){e.focus=!1}}})]),e.$slots.default||e.label?t("span",{staticClass:"el-checkbox__label"},[e._t("default"),e.$slots.default?e._e():[e._v(e._s(e.label))]],2):e._e()])};hn._withStripped=!0;var pn=r({name:"ElCheckbox",mixins:[k.a],inject:{elForm:{default:""},elFormItem:{default:""}},componentName:"ElCheckbox",data:function(){return{selfModel:!1,focus:!1,isLimitExceeded:!1}},computed:{model:{get:function(){return this.isGroup?this.store:void 0!==this.value?this.value:this.selfModel},set:function(e){this.isGroup?(this.isLimitExceeded=!1,void 0!==this._checkboxGroup.min&&e.length<this._checkboxGroup.min&&(this.isLimitExceeded=!0),void 0!==this._checkboxGroup.max&&e.length>this._checkboxGroup.max&&(this.isLimitExceeded=!0),!1===this.isLimitExceeded&&this.dispatch("ElCheckboxGroup","input",[e])):(this.$emit("input",e),this.selfModel=e)}},isChecked:function(){return"[object Boolean]"==={}.toString.call(this.model)?this.model:Array.isArray(this.model)?this.model.indexOf(this.label)>-1:null!==this.model&&void 0!==this.model?this.model===this.trueLabel:void 0},isGroup:function(){for(var e=this.$parent;e;){if("ElCheckboxGroup"===e.$options.componentName)return this._checkboxGroup=e,!0;e=e.$parent}return!1},store:function(){return this._checkboxGroup?this._checkboxGroup.value:this.value},isLimitDisabled:function(){var e=this._checkboxGroup,n=e.max,t=e.min;return!(!n&&!t)&&this.model.length>=n&&!this.isChecked||this.model.length<=t&&this.isChecked},isDisabled:function(){return this.isGroup?this._checkboxGroup.disabled||this.disabled||(this.elForm||{}).disabled||this.isLimitDisabled:this.disabled||(this.elForm||{}).disabled},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},checkboxSize:function(){var e=this.size||this._elFormItemSize||(this.$ELEMENT||{}).size;return this.isGroup&&this._checkboxGroup.checkboxGroupSize||e}},props:{value:{},label:{},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:String,trueLabel:[String,Number],falseLabel:[String,Number],id:String,controls:String,border:Boolean,size:String},methods:{addToStore:function(){Array.isArray(this.model)&&-1===this.model.indexOf(this.label)?this.model.push(this.label):this.model=this.trueLabel||!0},handleChange:function(e){var n=this;if(!this.isLimitExceeded){var t=void 0;t=e.target.checked?void 0===this.trueLabel||this.trueLabel:void 0!==this.falseLabel&&this.falseLabel,this.$emit("change",t,e),this.$nextTick((function(){n.isGroup&&n.dispatch("ElCheckboxGroup","change",[n._checkboxGroup.value])}))}}},created:function(){this.checked&&this.addToStore()},mounted:function(){this.indeterminate&&this.$el.setAttribute("aria-controls",this.controls)},watch:{value:function(e){this.dispatch("ElFormItem","el.form.change",e)}}},hn,[],!1,null,null,null);pn.options.__file="packages/checkbox/src/checkbox.vue";var fn=pn.exports;fn.install=function(e){e.component(fn.name,fn)};var mn=fn,gn=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("label",{staticClass:"el-checkbox-button",class:[e.size?"el-checkbox-button--"+e.size:"",{"is-disabled":e.isDisabled},{"is-checked":e.isChecked},{"is-focus":e.focus}],attrs:{role:"checkbox","aria-checked":e.isChecked,"aria-disabled":e.isDisabled}},[e.trueLabel||e.falseLabel?t("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],staticClass:"el-checkbox-button__original",attrs:{type:"checkbox",name:e.name,disabled:e.isDisabled,"true-value":e.trueLabel,"false-value":e.falseLabel},domProps:{checked:Array.isArray(e.model)?e._i(e.model,null)>-1:e._q(e.model,e.trueLabel)},on:{change:[function(n){var t=e.model,i=n.target,r=i.checked?e.trueLabel:e.falseLabel;if(Array.isArray(t)){var o=e._i(t,null);i.checked?o<0&&(e.model=t.concat([null])):o>-1&&(e.model=t.slice(0,o).concat(t.slice(o+1)))}else e.model=r},e.handleChange],focus:function(n){e.focus=!0},blur:function(n){e.focus=!1}}}):t("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],staticClass:"el-checkbox-button__original",attrs:{type:"checkbox",name:e.name,disabled:e.isDisabled},domProps:{value:e.label,checked:Array.isArray(e.model)?e._i(e.model,e.label)>-1:e.model},on:{change:[function(n){var t=e.model,i=n.target,r=!!i.checked;if(Array.isArray(t)){var o=e.label,a=e._i(t,o);i.checked?a<0&&(e.model=t.concat([o])):a>-1&&(e.model=t.slice(0,a).concat(t.slice(a+1)))}else e.model=r},e.handleChange],focus:function(n){e.focus=!0},blur:function(n){e.focus=!1}}}),e.$slots.default||e.label?t("span",{staticClass:"el-checkbox-button__inner",style:e.isChecked?e.activeStyle:null},[e._t("default",[e._v(e._s(e.label))])],2):e._e()])};gn._withStripped=!0;var vn=r({name:"ElCheckboxButton",mixins:[k.a],inject:{elForm:{default:""},elFormItem:{default:""}},data:function(){return{selfModel:!1,focus:!1,isLimitExceeded:!1}},props:{value:{},label:{},disabled:Boolean,checked:Boolean,name:String,trueLabel:[String,Number],falseLabel:[String,Number]},computed:{model:{get:function(){return this._checkboxGroup?this.store:void 0!==this.value?this.value:this.selfModel},set:function(e){this._checkboxGroup?(this.isLimitExceeded=!1,void 0!==this._checkboxGroup.min&&e.length<this._checkboxGroup.min&&(this.isLimitExceeded=!0),void 0!==this._checkboxGroup.max&&e.length>this._checkboxGroup.max&&(this.isLimitExceeded=!0),!1===this.isLimitExceeded&&this.dispatch("ElCheckboxGroup","input",[e])):void 0!==this.value?this.$emit("input",e):this.selfModel=e}},isChecked:function(){return"[object Boolean]"==={}.toString.call(this.model)?this.model:Array.isArray(this.model)?this.model.indexOf(this.label)>-1:null!==this.model&&void 0!==this.model?this.model===this.trueLabel:void 0},_checkboxGroup:function(){for(var e=this.$parent;e;){if("ElCheckboxGroup"===e.$options.componentName)return e;e=e.$parent}return!1},store:function(){return this._checkboxGroup?this._checkboxGroup.value:this.value},activeStyle:function(){return{backgroundColor:this._checkboxGroup.fill||"",borderColor:this._checkboxGroup.fill||"",color:this._checkboxGroup.textColor||"","box-shadow":"-1px 0 0 0 "+this._checkboxGroup.fill}},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},size:function(){return this._checkboxGroup.checkboxGroupSize||this._elFormItemSize||(this.$ELEMENT||{}).size},isLimitDisabled:function(){var e=this._checkboxGroup,n=e.max,t=e.min;return!(!n&&!t)&&this.model.length>=n&&!this.isChecked||this.model.length<=t&&this.isChecked},isDisabled:function(){return this._checkboxGroup?this._checkboxGroup.disabled||this.disabled||(this.elForm||{}).disabled||this.isLimitDisabled:this.disabled||(this.elForm||{}).disabled}},methods:{addToStore:function(){Array.isArray(this.model)&&-1===this.model.indexOf(this.label)?this.model.push(this.label):this.model=this.trueLabel||!0},handleChange:function(e){var n=this;if(!this.isLimitExceeded){var t=void 0;t=e.target.checked?void 0===this.trueLabel||this.trueLabel:void 0!==this.falseLabel&&this.falseLabel,this.$emit("change",t,e),this.$nextTick((function(){n._checkboxGroup&&n.dispatch("ElCheckboxGroup","change",[n._checkboxGroup.value])}))}}},created:function(){this.checked&&this.addToStore()}},gn,[],!1,null,null,null);vn.options.__file="packages/checkbox/src/checkbox-button.vue";var bn=vn.exports;bn.install=function(e){e.component(bn.name,bn)};var yn=bn,wn=function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"el-checkbox-group",attrs:{role:"group","aria-label":"checkbox-group"}},[this._t("default")],2)};wn._withStripped=!0;var xn=r({name:"ElCheckboxGroup",componentName:"ElCheckboxGroup",mixins:[k.a],inject:{elFormItem:{default:""}},props:{value:{},disabled:Boolean,min:Number,max:Number,size:String,fill:String,textColor:String},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},checkboxGroupSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size}},watch:{value:function(e){this.dispatch("ElFormItem","el.form.change",[e])}}},wn,[],!1,null,null,null);xn.options.__file="packages/checkbox/src/checkbox-group.vue";var _n=xn.exports;_n.install=function(e){e.component(_n.name,_n)};var Sn=_n,kn=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"el-switch",class:{"is-disabled":e.switchDisabled,"is-checked":e.checked},attrs:{role:"switch","aria-checked":e.checked,"aria-disabled":e.switchDisabled},on:{click:function(n){return n.preventDefault(),e.switchValue(n)}}},[t("input",{ref:"input",staticClass:"el-switch__input",attrs:{type:"checkbox",id:e.id,name:e.name,"true-value":e.activeValue,"false-value":e.inactiveValue,disabled:e.switchDisabled},on:{change:e.handleChange,keydown:function(n){return!("button"in n)&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.switchValue(n)}}}),e.inactiveIconClass||e.inactiveText?t("span",{class:["el-switch__label","el-switch__label--left",e.checked?"":"is-active"]},[e.inactiveIconClass?t("i",{class:[e.inactiveIconClass]}):e._e(),!e.inactiveIconClass&&e.inactiveText?t("span",{attrs:{"aria-hidden":e.checked}},[e._v(e._s(e.inactiveText))]):e._e()]):e._e(),t("span",{ref:"core",staticClass:"el-switch__core",style:{width:e.coreWidth+"px"}}),e.activeIconClass||e.activeText?t("span",{class:["el-switch__label","el-switch__label--right",e.checked?"is-active":""]},[e.activeIconClass?t("i",{class:[e.activeIconClass]}):e._e(),!e.activeIconClass&&e.activeText?t("span",{attrs:{"aria-hidden":!e.checked}},[e._v(e._s(e.activeText))]):e._e()]):e._e()])};kn._withStripped=!0;var Cn=r({name:"ElSwitch",mixins:[V()("input"),_.a,k.a],inject:{elForm:{default:""}},props:{value:{type:[Boolean,String,Number],default:!1},disabled:{type:Boolean,default:!1},width:{type:Number,default:40},activeIconClass:{type:String,default:""},inactiveIconClass:{type:String,default:""},activeText:String,inactiveText:String,activeColor:{type:String,default:""},inactiveColor:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},id:String},data:function(){return{coreWidth:this.width}},created:function(){~[this.activeValue,this.inactiveValue].indexOf(this.value)||this.$emit("input",this.inactiveValue)},computed:{checked:function(){return this.value===this.activeValue},switchDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},watch:{checked:function(){this.$refs.input.checked=this.checked,(this.activeColor||this.inactiveColor)&&this.setBackgroundColor(),this.validateEvent&&this.dispatch("ElFormItem","el.form.change",[this.value])}},methods:{handleChange:function(e){var n=this,t=this.checked?this.inactiveValue:this.activeValue;this.$emit("input",t),this.$emit("change",t),this.$nextTick((function(){n.$refs.input.checked=n.checked}))},setBackgroundColor:function(){var e=this.checked?this.activeColor:this.inactiveColor;this.$refs.core.style.borderColor=e,this.$refs.core.style.backgroundColor=e},switchValue:function(){!this.switchDisabled&&this.handleChange()},getMigratingConfig:function(){return{props:{"on-color":"on-color is renamed to active-color.","off-color":"off-color is renamed to inactive-color.","on-text":"on-text is renamed to active-text.","off-text":"off-text is renamed to inactive-text.","on-value":"on-value is renamed to active-value.","off-value":"off-value is renamed to inactive-value.","on-icon-class":"on-icon-class is renamed to active-icon-class.","off-icon-class":"off-icon-class is renamed to inactive-icon-class."}}}},mounted:function(){this.coreWidth=this.width||40,(this.activeColor||this.inactiveColor)&&this.setBackgroundColor(),this.$refs.input.checked=this.checked}},kn,[],!1,null,null,null);Cn.options.__file="packages/switch/src/component.vue";var En=Cn.exports;En.install=function(e){e.component(En.name,En)};var Tn=En,Pn=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleClose,expression:"handleClose"}],staticClass:"el-select",class:[e.selectSize?"el-select--"+e.selectSize:""],on:{click:function(n){return n.stopPropagation(),e.toggleMenu(n)}}},[e.multiple?t("div",{ref:"tags",staticClass:"el-select__tags",style:{"max-width":e.inputWidth-32+"px",width:"100%"}},[e.collapseTags&&e.selected.length?t("span",[t("el-tag",{attrs:{closable:!e.selectDisabled,size:e.collapseTagSize,hit:e.selected[0].hitState,type:"info","disable-transitions":""},on:{close:function(n){e.deleteTag(n,e.selected[0])}}},[t("span",{staticClass:"el-select__tags-text"},[e._v(e._s(e.selected[0].currentLabel))])]),e.selected.length>1?t("el-tag",{attrs:{closable:!1,size:e.collapseTagSize,type:"info","disable-transitions":""}},[t("span",{staticClass:"el-select__tags-text"},[e._v("+ "+e._s(e.selected.length-1))])]):e._e()],1):e._e(),e.collapseTags?e._e():t("transition-group",{on:{"after-leave":e.resetInputHeight}},e._l(e.selected,(function(n){return t("el-tag",{key:e.getValueKey(n),attrs:{closable:!e.selectDisabled,size:e.collapseTagSize,hit:n.hitState,type:"info","disable-transitions":""},on:{close:function(t){e.deleteTag(t,n)}}},[t("span",{staticClass:"el-select__tags-text"},[e._v(e._s(n.currentLabel))])])})),1),e.filterable?t("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],ref:"input",staticClass:"el-select__input",class:[e.selectSize?"is-"+e.selectSize:""],style:{"flex-grow":"1",width:e.inputLength/(e.inputWidth-32)+"%","max-width":e.inputWidth-42+"px"},attrs:{type:"text",disabled:e.selectDisabled,autocomplete:e.autoComplete||e.autocomplete},domProps:{value:e.query},on:{focus:e.handleFocus,blur:function(n){e.softFocus=!1},keyup:e.managePlaceholder,keydown:[e.resetInputState,function(n){if(!("button"in n)&&e._k(n.keyCode,"down",40,n.key,["Down","ArrowDown"]))return null;n.preventDefault(),e.navigateOptions("next")},function(n){if(!("button"in n)&&e._k(n.keyCode,"up",38,n.key,["Up","ArrowUp"]))return null;n.preventDefault(),e.navigateOptions("prev")},function(n){return!("button"in n)&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:(n.preventDefault(),e.selectOption(n))},function(n){if(!("button"in n)&&e._k(n.keyCode,"esc",27,n.key,["Esc","Escape"]))return null;n.stopPropagation(),n.preventDefault(),e.visible=!1},function(n){return!("button"in n)&&e._k(n.keyCode,"delete",[8,46],n.key,["Backspace","Delete","Del"])?null:e.deletePrevTag(n)},function(n){if(!("button"in n)&&e._k(n.keyCode,"tab",9,n.key,"Tab"))return null;e.visible=!1}],compositionstart:e.handleComposition,compositionupdate:e.handleComposition,compositionend:e.handleComposition,input:[function(n){n.target.composing||(e.query=n.target.value)},e.debouncedQueryChange]}}):e._e()],1):e._e(),t("el-input",{ref:"reference",class:{"is-focus":e.visible},attrs:{type:"text",placeholder:e.currentPlaceholder,name:e.name,id:e.id,autocomplete:e.autoComplete||e.autocomplete,size:e.selectSize,disabled:e.selectDisabled,readonly:e.readonly,"validate-event":!1,tabindex:e.multiple&&e.filterable?"-1":null},on:{focus:e.handleFocus,blur:e.handleBlur},nativeOn:{keyup:function(n){return e.debouncedOnInputChange(n)},keydown:[function(n){if(!("button"in n)&&e._k(n.keyCode,"down",40,n.key,["Down","ArrowDown"]))return null;n.stopPropagation(),n.preventDefault(),e.navigateOptions("next")},function(n){if(!("button"in n)&&e._k(n.keyCode,"up",38,n.key,["Up","ArrowUp"]))return null;n.stopPropagation(),n.preventDefault(),e.navigateOptions("prev")},function(n){return!("button"in n)&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:(n.preventDefault(),e.selectOption(n))},function(n){if(!("button"in n)&&e._k(n.keyCode,"esc",27,n.key,["Esc","Escape"]))return null;n.stopPropagation(),n.preventDefault(),e.visible=!1},function(n){if(!("button"in n)&&e._k(n.keyCode,"tab",9,n.key,"Tab"))return null;e.visible=!1}],paste:function(n){return e.debouncedOnInputChange(n)},mouseenter:function(n){e.inputHovering=!0},mouseleave:function(n){e.inputHovering=!1}},model:{value:e.selectedLabel,callback:function(n){e.selectedLabel=n},expression:"selectedLabel"}},[e.$slots.prefix?t("template",{slot:"prefix"},[e._t("prefix")],2):e._e(),t("template",{slot:"suffix"},[t("i",{directives:[{name:"show",rawName:"v-show",value:!e.showClose,expression:"!showClose"}],class:["el-select__caret","el-input__icon","el-icon-"+e.iconClass]}),e.showClose?t("i",{staticClass:"el-select__caret el-input__icon el-icon-circle-close",on:{click:e.handleClearClick}}):e._e()])],2),t("transition",{attrs:{name:"el-zoom-in-top"},on:{"before-enter":e.handleMenuEnter,"after-leave":e.doDestroy}},[t("el-select-menu",{directives:[{name:"show",rawName:"v-show",value:e.visible&&!1!==e.emptyText,expression:"visible && emptyText !== false"}],ref:"popper",attrs:{"append-to-body":e.popperAppendToBody}},[t("el-scrollbar",{directives:[{name:"show",rawName:"v-show",value:e.options.length>0&&!e.loading,expression:"options.length > 0 && !loading"}],ref:"scrollbar",class:{"is-empty":!e.allowCreate&&e.query&&0===e.filteredOptionsCount},attrs:{tag:"ul","wrap-class":"el-select-dropdown__wrap","view-class":"el-select-dropdown__list"}},[e.showNewOption?t("el-option",{attrs:{value:e.query,created:""}}):e._e(),e._t("default")],2),e.emptyText&&(!e.allowCreate||e.loading||e.allowCreate&&0===e.options.length)?[e.$slots.empty?e._t("empty"):t("p",{staticClass:"el-select-dropdown__empty"},[e._v("\n          "+e._s(e.emptyText)+"\n        ")])]:e._e()],2)],1)],1)};Pn._withStripped=!0;var On=function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"el-select-dropdown el-popper",class:[{"is-multiple":this.$parent.multiple},this.popperClass],style:{minWidth:this.minWidth}},[this._t("default")],2)};On._withStripped=!0;var An=r({name:"ElSelectDropdown",componentName:"ElSelectDropdown",mixins:[L.a],props:{placement:{default:"bottom-start"},boundariesPadding:{default:0},popperOptions:{default:function(){return{gpuAcceleration:!1}}},visibleArrow:{default:!0},appendToBody:{type:Boolean,default:!0}},data:function(){return{minWidth:""}},computed:{popperClass:function(){return this.$parent.popperClass}},watch:{"$parent.inputWidth":function(){this.minWidth=this.$parent.$el.getBoundingClientRect().width+"px"}},mounted:function(){var e=this;this.referenceElm=this.$parent.$refs.reference.$el,this.$parent.popperElm=this.popperElm=this.$el,this.$on("updatePopper",(function(){e.$parent.visible&&e.updatePopper()})),this.$on("destroyPopper",this.destroyPopper)}},On,[],!1,null,null,null);An.options.__file="packages/select/src/select-dropdown.vue";var jn=An.exports,In=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("li",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-select-dropdown__item",class:{selected:e.itemSelected,"is-disabled":e.disabled||e.groupDisabled||e.limitReached,hover:e.hover},on:{mouseenter:e.hoverItem,click:function(n){return n.stopPropagation(),e.selectOptionClick(n)}}},[e._t("default",[t("span",[e._v(e._s(e.currentLabel))])])],2)};In._withStripped=!0;var Dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mn=r({mixins:[k.a],name:"ElOption",componentName:"ElOption",inject:["select"],props:{value:{required:!0},label:[String,Number],created:Boolean,disabled:{type:Boolean,default:!1}},data:function(){return{index:-1,groupDisabled:!1,visible:!0,hitState:!1,hover:!1}},computed:{isObject:function(){return"[object object]"===Object.prototype.toString.call(this.value).toLowerCase()},currentLabel:function(){return this.label||(this.isObject?"":this.value)},currentValue:function(){return this.value||this.label||""},itemSelected:function(){return this.select.multiple?this.contains(this.select.value,this.value):this.isEqual(this.value,this.select.value)},limitReached:function(){return!!this.select.multiple&&(!this.itemSelected&&(this.select.value||[]).length>=this.select.multipleLimit&&this.select.multipleLimit>0)}},watch:{currentLabel:function(){this.created||this.select.remote||this.dispatch("ElSelect","setSelected")},value:function(e,n){var t=this.select,i=t.remote,r=t.valueKey;if(!this.created&&!i){if(r&&"object"===(void 0===e?"undefined":Dn(e))&&"object"===(void 0===n?"undefined":Dn(n))&&e[r]===n[r])return;this.dispatch("ElSelect","setSelected")}}},methods:{isEqual:function(e,n){if(this.isObject){var t=this.select.valueKey;return Object(m.getValueByPath)(e,t)===Object(m.getValueByPath)(n,t)}return e===n},contains:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments[1];if(this.isObject){var t=this.select.valueKey;return e&&e.some((function(e){return Object(m.getValueByPath)(e,t)===Object(m.getValueByPath)(n,t)}))}return e&&e.indexOf(n)>-1},handleGroupDisabled:function(e){this.groupDisabled=e},hoverItem:function(){this.disabled||this.groupDisabled||(this.select.hoverIndex=this.select.options.indexOf(this))},selectOptionClick:function(){!0!==this.disabled&&!0!==this.groupDisabled&&this.dispatch("ElSelect","handleOptionClick",[this,!0])},queryChange:function(e){this.visible=new RegExp(Object(m.escapeRegexpString)(e),"i").test(this.currentLabel)||this.created,this.visible||this.select.filteredOptionsCount--}},created:function(){this.select.options.push(this),this.select.cachedOptions.push(this),this.select.optionsCount++,this.select.filteredOptionsCount++,this.$on("queryChange",this.queryChange),this.$on("handleGroupDisabled",this.handleGroupDisabled)},beforeDestroy:function(){var e=this.select,n=e.selected,t=e.multiple?n:[n],i=this.select.cachedOptions.indexOf(this),r=t.indexOf(this);i>-1&&r<0&&this.select.cachedOptions.splice(i,1),this.select.onOptionDestroy(this.select.options.indexOf(this))}},In,[],!1,null,null,null);Mn.options.__file="packages/select/src/option.vue";var Ln=Mn.exports,Nn=t(29),$n=t.n(Nn),Fn=t(12),Rn=t(27),Bn=t.n(Rn),Vn=r({mixins:[k.a,f.a,V()("reference"),{data:function(){return{hoverOption:-1}},computed:{optionsAllDisabled:function(){return this.options.filter((function(e){return e.visible})).every((function(e){return e.disabled}))}},watch:{hoverIndex:function(e){var n=this;"number"==typeof e&&e>-1&&(this.hoverOption=this.options[e]||{}),this.options.forEach((function(e){e.hover=n.hoverOption===e}))}},methods:{navigateOptions:function(e){var n=this;if(this.visible){if(0!==this.options.length&&0!==this.filteredOptionsCount&&!this.optionsAllDisabled){"next"===e?(this.hoverIndex++,this.hoverIndex===this.options.length&&(this.hoverIndex=0)):"prev"===e&&(this.hoverIndex--,this.hoverIndex<0&&(this.hoverIndex=this.options.length-1));var t=this.options[this.hoverIndex];!0!==t.disabled&&!0!==t.groupDisabled&&t.visible||this.navigateOptions(e),this.$nextTick((function(){return n.scrollToOption(n.hoverOption)}))}}else this.visible=!0}}}],name:"ElSelect",componentName:"ElSelect",inject:{elForm:{default:""},elFormItem:{default:""}},provide:function(){return{select:this}},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},readonly:function(){return!this.filterable||this.multiple||!Object(m.isIE)()&&!Object(m.isEdge)()&&!this.visible},showClose:function(){var e=this.multiple?Array.isArray(this.value)&&this.value.length>0:void 0!==this.value&&null!==this.value&&""!==this.value;return this.clearable&&!this.selectDisabled&&this.inputHovering&&e},iconClass:function(){return this.remote&&this.filterable?"":this.visible?"arrow-up is-reverse":"arrow-up"},debounce:function(){return this.remote?300:0},emptyText:function(){return this.loading?this.loadingText||this.t("el.select.loading"):(!this.remote||""!==this.query||0!==this.options.length)&&(this.filterable&&this.query&&this.options.length>0&&0===this.filteredOptionsCount?this.noMatchText||this.t("el.select.noMatch"):0===this.options.length?this.noDataText||this.t("el.select.noData"):null)},showNewOption:function(){var e=this,n=this.options.filter((function(e){return!e.created})).some((function(n){return n.currentLabel===e.query}));return this.filterable&&this.allowCreate&&""!==this.query&&!n},selectSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},selectDisabled:function(){return this.disabled||(this.elForm||{}).disabled},collapseTagSize:function(){return["small","mini"].indexOf(this.selectSize)>-1?"mini":"small"},propPlaceholder:function(){return void 0!==this.placeholder?this.placeholder:this.t("el.select.placeholder")}},components:{ElInput:h.a,ElSelectMenu:jn,ElOption:Ln,ElTag:$n.a,ElScrollbar:$.a},directives:{Clickoutside:I.a},props:{name:String,id:String,value:{required:!0},autocomplete:{type:String,default:"off"},autoComplete:{type:String,validator:function(e){return!0}},automaticDropdown:Boolean,size:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:String,remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String,required:!1},defaultFirstOption:Boolean,reserveKeyword:Boolean,valueKey:{type:String,default:"value"},collapseTags:Boolean,popperAppendToBody:{type:Boolean,default:!0}},data:function(){return{options:[],cachedOptions:[],createdLabel:null,createdSelected:!1,selected:this.multiple?[]:{},inputLength:20,inputWidth:0,initialInputHeight:0,cachedPlaceHolder:"",optionsCount:0,filteredOptionsCount:0,visible:!1,softFocus:!1,selectedLabel:"",hoverIndex:-1,query:"",previousQuery:null,inputHovering:!1,currentPlaceholder:"",menuVisibleOnFocus:!1,isOnComposition:!1,isSilentBlur:!1}},watch:{selectDisabled:function(){var e=this;this.$nextTick((function(){e.resetInputHeight()}))},propPlaceholder:function(e){this.cachedPlaceHolder=this.currentPlaceholder=e},value:function(e,n){this.multiple&&(this.resetInputHeight(),e&&e.length>0||this.$refs.input&&""!==this.query?this.currentPlaceholder="":this.currentPlaceholder=this.cachedPlaceHolder,this.filterable&&!this.reserveKeyword&&(this.query="",this.handleQueryChange(this.query))),this.setSelected(),this.filterable&&!this.multiple&&(this.inputLength=20),Object(m.valueEquals)(e,n)||this.dispatch("ElFormItem","el.form.change",e)},visible:function(e){var n=this;e?(this.broadcast("ElSelectDropdown","updatePopper"),this.filterable&&(this.query=this.remote?"":this.selectedLabel,this.handleQueryChange(this.query),this.multiple?this.$refs.input.focus():(this.remote||(this.broadcast("ElOption","queryChange",""),this.broadcast("ElOptionGroup","queryChange")),this.selectedLabel&&(this.currentPlaceholder=this.selectedLabel,this.selectedLabel="")))):(this.broadcast("ElSelectDropdown","destroyPopper"),this.$refs.input&&this.$refs.input.blur(),this.query="",this.previousQuery=null,this.selectedLabel="",this.inputLength=20,this.menuVisibleOnFocus=!1,this.resetHoverIndex(),this.$nextTick((function(){n.$refs.input&&""===n.$refs.input.value&&0===n.selected.length&&(n.currentPlaceholder=n.cachedPlaceHolder)})),this.multiple||(this.selected&&(this.filterable&&this.allowCreate&&this.createdSelected&&this.createdLabel?this.selectedLabel=this.createdLabel:this.selectedLabel=this.selected.currentLabel,this.filterable&&(this.query=this.selectedLabel)),this.filterable&&(this.currentPlaceholder=this.cachedPlaceHolder))),this.$emit("visible-change",e)},options:function(){var e=this;if(!this.$isServer){this.$nextTick((function(){e.broadcast("ElSelectDropdown","updatePopper")})),this.multiple&&this.resetInputHeight();var n=this.$el.querySelectorAll("input");-1===[].indexOf.call(n,document.activeElement)&&this.setSelected(),this.defaultFirstOption&&(this.filterable||this.remote)&&this.filteredOptionsCount&&this.checkDefaultFirstOption()}}},methods:{handleComposition:function(e){var n=this,t=e.target.value;if("compositionend"===e.type)this.isOnComposition=!1,this.$nextTick((function(e){return n.handleQueryChange(t)}));else{var i=t[t.length-1]||"";this.isOnComposition=!Object(qe.isKorean)(i)}},handleQueryChange:function(e){var n=this;this.previousQuery===e||this.isOnComposition||(null!==this.previousQuery||"function"!=typeof this.filterMethod&&"function"!=typeof this.remoteMethod?(this.previousQuery=e,this.$nextTick((function(){n.visible&&n.broadcast("ElSelectDropdown","updatePopper")})),this.hoverIndex=-1,this.multiple&&this.filterable&&this.$nextTick((function(){var e=15*n.$refs.input.value.length+20;n.inputLength=n.collapseTags?Math.min(50,e):e,n.managePlaceholder(),n.resetInputHeight()})),this.remote&&"function"==typeof this.remoteMethod?(this.hoverIndex=-1,this.remoteMethod(e)):"function"==typeof this.filterMethod?(this.filterMethod(e),this.broadcast("ElOptionGroup","queryChange")):(this.filteredOptionsCount=this.optionsCount,this.broadcast("ElOption","queryChange",e),this.broadcast("ElOptionGroup","queryChange")),this.defaultFirstOption&&(this.filterable||this.remote)&&this.filteredOptionsCount&&this.checkDefaultFirstOption()):this.previousQuery=e)},scrollToOption:function(e){var n=Array.isArray(e)&&e[0]?e[0].$el:e.$el;if(this.$refs.popper&&n){var t=this.$refs.popper.$el.querySelector(".el-select-dropdown__wrap");Bn()(t,n)}this.$refs.scrollbar&&this.$refs.scrollbar.handleScroll()},handleMenuEnter:function(){var e=this;this.$nextTick((function(){return e.scrollToOption(e.selected)}))},emitChange:function(e){Object(m.valueEquals)(this.value,e)||this.$emit("change",e)},getOption:function(e){for(var n=void 0,t="[object object]"===Object.prototype.toString.call(e).toLowerCase(),i="[object null]"===Object.prototype.toString.call(e).toLowerCase(),r="[object undefined]"===Object.prototype.toString.call(e).toLowerCase(),o=this.cachedOptions.length-1;o>=0;o--){var a=this.cachedOptions[o];if(t?Object(m.getValueByPath)(a.value,this.valueKey)===Object(m.getValueByPath)(e,this.valueKey):a.value===e){n=a;break}}if(n)return n;var s={value:e,currentLabel:t||i||r?"":e};return this.multiple&&(s.hitState=!1),s},setSelected:function(){var e=this;if(!this.multiple){var n=this.getOption(this.value);return n.created?(this.createdLabel=n.currentLabel,this.createdSelected=!0):this.createdSelected=!1,this.selectedLabel=n.currentLabel,this.selected=n,void(this.filterable&&(this.query=this.selectedLabel))}var t=[];Array.isArray(this.value)&&this.value.forEach((function(n){t.push(e.getOption(n))})),this.selected=t,this.$nextTick((function(){e.resetInputHeight()}))},handleFocus:function(e){this.softFocus?this.softFocus=!1:((this.automaticDropdown||this.filterable)&&(this.visible=!0,this.filterable&&(this.menuVisibleOnFocus=!0)),this.$emit("focus",e))},blur:function(){this.visible=!1,this.$refs.reference.blur()},handleBlur:function(e){var n=this;setTimeout((function(){n.isSilentBlur?n.isSilentBlur=!1:n.$emit("blur",e)}),50),this.softFocus=!1},handleClearClick:function(e){this.deleteSelected(e)},doDestroy:function(){this.$refs.popper&&this.$refs.popper.doDestroy()},handleClose:function(){this.visible=!1},toggleLastOptionHitState:function(e){if(Array.isArray(this.selected)){var n=this.selected[this.selected.length-1];if(n)return!0===e||!1===e?(n.hitState=e,e):(n.hitState=!n.hitState,n.hitState)}},deletePrevTag:function(e){if(e.target.value.length<=0&&!this.toggleLastOptionHitState()){var n=this.value.slice();n.pop(),this.$emit("input",n),this.emitChange(n)}},managePlaceholder:function(){""!==this.currentPlaceholder&&(this.currentPlaceholder=this.$refs.input.value?"":this.cachedPlaceHolder)},resetInputState:function(e){8!==e.keyCode&&this.toggleLastOptionHitState(!1),this.inputLength=15*this.$refs.input.value.length+20,this.resetInputHeight()},resetInputHeight:function(){var e=this;this.collapseTags&&!this.filterable||this.$nextTick((function(){if(e.$refs.reference){var n=e.$refs.reference.$el.childNodes,t=[].filter.call(n,(function(e){return"INPUT"===e.tagName}))[0],i=e.$refs.tags,r=e.initialInputHeight||40;t.style.height=0===e.selected.length?r+"px":Math.max(i?i.clientHeight+(i.clientHeight>r?6:0):0,r)+"px",e.visible&&!1!==e.emptyText&&e.broadcast("ElSelectDropdown","updatePopper")}}))},resetHoverIndex:function(){var e=this;setTimeout((function(){e.multiple?e.selected.length>0?e.hoverIndex=Math.min.apply(null,e.selected.map((function(n){return e.options.indexOf(n)}))):e.hoverIndex=-1:e.hoverIndex=e.options.indexOf(e.selected)}),300)},handleOptionSelect:function(e,n){var t=this;if(this.multiple){var i=(this.value||[]).slice(),r=this.getValueIndex(i,e.value);r>-1?i.splice(r,1):(this.multipleLimit<=0||i.length<this.multipleLimit)&&i.push(e.value),this.$emit("input",i),this.emitChange(i),e.created&&(this.query="",this.handleQueryChange(""),this.inputLength=20),this.filterable&&this.$refs.input.focus()}else this.$emit("input",e.value),this.emitChange(e.value),this.visible=!1;this.isSilentBlur=n,this.setSoftFocus(),this.visible||this.$nextTick((function(){t.scrollToOption(e)}))},setSoftFocus:function(){this.softFocus=!0;var e=this.$refs.input||this.$refs.reference;e&&e.focus()},getValueIndex:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments[1],t="[object object]"===Object.prototype.toString.call(n).toLowerCase();if(t){var i=this.valueKey,r=-1;return e.some((function(e,t){return Object(m.getValueByPath)(e,i)===Object(m.getValueByPath)(n,i)&&(r=t,!0)})),r}return e.indexOf(n)},toggleMenu:function(){this.selectDisabled||(this.menuVisibleOnFocus?this.menuVisibleOnFocus=!1:this.visible=!this.visible,this.visible&&(this.$refs.input||this.$refs.reference).focus())},selectOption:function(){this.visible?this.options[this.hoverIndex]&&this.handleOptionSelect(this.options[this.hoverIndex]):this.toggleMenu()},deleteSelected:function(e){e.stopPropagation();var n=this.multiple?[]:"";this.$emit("input",n),this.emitChange(n),this.visible=!1,this.$emit("clear")},deleteTag:function(e,n){var t=this.selected.indexOf(n);if(t>-1&&!this.selectDisabled){var i=this.value.slice();i.splice(t,1),this.$emit("input",i),this.emitChange(i),this.$emit("remove-tag",n.value)}e.stopPropagation()},onInputChange:function(){this.filterable&&this.query!==this.selectedLabel&&(this.query=this.selectedLabel,this.handleQueryChange(this.query))},onOptionDestroy:function(e){e>-1&&(this.optionsCount--,this.filteredOptionsCount--,this.options.splice(e,1))},resetInputWidth:function(){this.inputWidth=this.$refs.reference.$el.getBoundingClientRect().width},handleResize:function(){this.resetInputWidth(),this.multiple&&this.resetInputHeight()},checkDefaultFirstOption:function(){this.hoverIndex=-1;for(var e=!1,n=this.options.length-1;n>=0;n--)if(this.options[n].created){e=!0,this.hoverIndex=n;break}if(!e)for(var t=0;t!==this.options.length;++t){var i=this.options[t];if(this.query){if(!i.disabled&&!i.groupDisabled&&i.visible){this.hoverIndex=t;break}}else if(i.itemSelected){this.hoverIndex=t;break}}},getValueKey:function(e){return"[object object]"!==Object.prototype.toString.call(e.value).toLowerCase()?e.value:Object(m.getValueByPath)(e.value,this.valueKey)}},created:function(){var e=this;this.cachedPlaceHolder=this.currentPlaceholder=this.propPlaceholder,this.multiple&&!Array.isArray(this.value)&&this.$emit("input",[]),!this.multiple&&Array.isArray(this.value)&&this.$emit("input",""),this.debouncedOnInputChange=A()(this.debounce,(function(){e.onInputChange()})),this.debouncedQueryChange=A()(this.debounce,(function(n){e.handleQueryChange(n.target.value)})),this.$on("handleOptionClick",this.handleOptionSelect),this.$on("setSelected",this.setSelected)},mounted:function(){var e=this;this.multiple&&Array.isArray(this.value)&&this.value.length>0&&(this.currentPlaceholder=""),Object(Fn.addResizeListener)(this.$el,this.handleResize);var n=this.$refs.reference;if(n&&n.$el){var t=n.$el.querySelector("input");this.initialInputHeight=t.getBoundingClientRect().height||{medium:36,small:32,mini:28}[this.selectSize]}this.remote&&this.multiple&&this.resetInputHeight(),this.$nextTick((function(){n&&n.$el&&(e.inputWidth=n.$el.getBoundingClientRect().width)})),this.setSelected()},beforeDestroy:function(){this.$el&&this.handleResize&&Object(Fn.removeResizeListener)(this.$el,this.handleResize)}},Pn,[],!1,null,null,null);Vn.options.__file="packages/select/src/select.vue";var zn=Vn.exports;zn.install=function(e){e.component(zn.name,zn)};var qn=zn;Ln.install=function(e){e.component(Ln.name,Ln)};var Hn=Ln,Wn=function(){var e=this.$createElement,n=this._self._c||e;return n("ul",{directives:[{name:"show",rawName:"v-show",value:this.visible,expression:"visible"}],staticClass:"el-select-group__wrap"},[n("li",{staticClass:"el-select-group__title"},[this._v(this._s(this.label))]),n("li",[n("ul",{staticClass:"el-select-group"},[this._t("default")],2)])])};Wn._withStripped=!0;var Un=r({mixins:[k.a],name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:{type:Boolean,default:!1}},data:function(){return{visible:!0}},watch:{disabled:function(e){this.broadcast("ElOption","handleGroupDisabled",e)}},methods:{queryChange:function(){this.visible=this.$children&&Array.isArray(this.$children)&&this.$children.some((function(e){return!0===e.visible}))}},created:function(){this.$on("queryChange",this.queryChange)},mounted:function(){this.disabled&&this.broadcast("ElOption","handleGroupDisabled",this.disabled)}},Wn,[],!1,null,null,null);Un.options.__file="packages/select/src/option-group.vue";var Jn=Un.exports;Jn.install=function(e){e.component(Jn.name,Jn)};var Yn=Jn,Gn=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("button",{staticClass:"el-button",class:[e.type?"el-button--"+e.type:"",e.buttonSize?"el-button--"+e.buttonSize:"",{"is-disabled":e.buttonDisabled,"is-loading":e.loading,"is-plain":e.plain,"is-round":e.round,"is-circle":e.circle}],attrs:{disabled:e.buttonDisabled||e.loading,autofocus:e.autofocus,type:e.nativeType},on:{click:e.handleClick}},[e.loading?t("i",{staticClass:"el-icon-loading"}):e._e(),e.icon&&!e.loading?t("i",{class:e.icon}):e._e(),e.$slots.default?t("span",[e._t("default")],2):e._e()])};Gn._withStripped=!0;var Kn=r({name:"ElButton",inject:{elForm:{default:""},elFormItem:{default:""}},props:{type:{type:String,default:"default"},size:String,icon:{type:String,default:""},nativeType:{type:String,default:"button"},loading:Boolean,disabled:Boolean,plain:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},buttonSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},buttonDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},methods:{handleClick:function(e){this.$emit("click",e)}}},Gn,[],!1,null,null,null);Kn.options.__file="packages/button/src/button.vue";var Xn=Kn.exports;Xn.install=function(e){e.component(Xn.name,Xn)};var Qn=Xn,Zn=function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"el-button-group"},[this._t("default")],2)};Zn._withStripped=!0;var et=r({name:"ElButtonGroup"},Zn,[],!1,null,null,null);et.options.__file="packages/button/src/button-group.vue";var nt=et.exports;nt.install=function(e){e.component(nt.name,nt)};var tt=nt,it=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"el-table",class:[{"el-table--fit":e.fit,"el-table--striped":e.stripe,"el-table--border":e.border||e.isGroup,"el-table--hidden":e.isHidden,"el-table--group":e.isGroup,"el-table--fluid-height":e.maxHeight,"el-table--scrollable-x":e.layout.scrollX,"el-table--scrollable-y":e.layout.scrollY,"el-table--enable-row-hover":!e.store.states.isComplex,"el-table--enable-row-transition":0!==(e.store.states.data||[]).length&&(e.store.states.data||[]).length<100},e.tableSize?"el-table--"+e.tableSize:""],on:{mouseleave:function(n){e.handleMouseLeave(n)}}},[t("div",{ref:"hiddenColumns",staticClass:"hidden-columns"},[e._t("default")],2),e.showHeader?t("div",{directives:[{name:"mousewheel",rawName:"v-mousewheel",value:e.handleHeaderFooterMousewheel,expression:"handleHeaderFooterMousewheel"}],ref:"headerWrapper",staticClass:"el-table__header-wrapper"},[t("table-header",{ref:"tableHeader",style:{width:e.layout.bodyWidth?e.layout.bodyWidth+"px":""},attrs:{store:e.store,border:e.border,"default-sort":e.defaultSort}})],1):e._e(),t("div",{ref:"bodyWrapper",staticClass:"el-table__body-wrapper",class:[e.layout.scrollX?"is-scrolling-"+e.scrollPosition:"is-scrolling-none"],style:[e.bodyHeight]},[t("table-body",{style:{width:e.bodyWidth},attrs:{context:e.context,store:e.store,stripe:e.stripe,"row-class-name":e.rowClassName,"row-style":e.rowStyle,highlight:e.highlightCurrentRow}}),e.data&&0!==e.data.length?e._e():t("div",{ref:"emptyBlock",staticClass:"el-table__empty-block",style:e.emptyBlockStyle},[t("span",{staticClass:"el-table__empty-text"},[e._t("empty",[e._v(e._s(e.emptyText||e.t("el.table.emptyText")))])],2)]),e.$slots.append?t("div",{ref:"appendWrapper",staticClass:"el-table__append-wrapper"},[e._t("append")],2):e._e()],1),e.showSummary?t("div",{directives:[{name:"show",rawName:"v-show",value:e.data&&e.data.length>0,expression:"data && data.length > 0"},{name:"mousewheel",rawName:"v-mousewheel",value:e.handleHeaderFooterMousewheel,expression:"handleHeaderFooterMousewheel"}],ref:"footerWrapper",staticClass:"el-table__footer-wrapper"},[t("table-footer",{style:{width:e.layout.bodyWidth?e.layout.bodyWidth+"px":""},attrs:{store:e.store,border:e.border,"sum-text":e.sumText||e.t("el.table.sumText"),"summary-method":e.summaryMethod,"default-sort":e.defaultSort}})],1):e._e(),e.fixedColumns.length>0?t("div",{directives:[{name:"mousewheel",rawName:"v-mousewheel",value:e.handleFixedMousewheel,expression:"handleFixedMousewheel"}],ref:"fixedWrapper",staticClass:"el-table__fixed",style:[{width:e.layout.fixedWidth?e.layout.fixedWidth+"px":""},e.fixedHeight]},[e.showHeader?t("div",{ref:"fixedHeaderWrapper",staticClass:"el-table__fixed-header-wrapper"},[t("table-header",{ref:"fixedTableHeader",style:{width:e.bodyWidth},attrs:{fixed:"left",border:e.border,store:e.store}})],1):e._e(),t("div",{ref:"fixedBodyWrapper",staticClass:"el-table__fixed-body-wrapper",style:[{top:e.layout.headerHeight+"px"},e.fixedBodyHeight]},[t("table-body",{style:{width:e.bodyWidth},attrs:{fixed:"left",store:e.store,stripe:e.stripe,highlight:e.highlightCurrentRow,"row-class-name":e.rowClassName,"row-style":e.rowStyle}}),e.$slots.append?t("div",{staticClass:"el-table__append-gutter",style:{height:e.layout.appendHeight+"px"}}):e._e()],1),e.showSummary?t("div",{directives:[{name:"show",rawName:"v-show",value:e.data&&e.data.length>0,expression:"data && data.length > 0"}],ref:"fixedFooterWrapper",staticClass:"el-table__fixed-footer-wrapper"},[t("table-footer",{style:{width:e.bodyWidth},attrs:{fixed:"left",border:e.border,"sum-text":e.sumText||e.t("el.table.sumText"),"summary-method":e.summaryMethod,store:e.store}})],1):e._e()]):e._e(),e.rightFixedColumns.length>0?t("div",{directives:[{name:"mousewheel",rawName:"v-mousewheel",value:e.handleFixedMousewheel,expression:"handleFixedMousewheel"}],ref:"rightFixedWrapper",staticClass:"el-table__fixed-right",style:[{width:e.layout.rightFixedWidth?e.layout.rightFixedWidth+"px":"",right:e.layout.scrollY?(e.border?e.layout.gutterWidth:e.layout.gutterWidth||0)+"px":""},e.fixedHeight]},[e.showHeader?t("div",{ref:"rightFixedHeaderWrapper",staticClass:"el-table__fixed-header-wrapper"},[t("table-header",{ref:"rightFixedTableHeader",style:{width:e.bodyWidth},attrs:{fixed:"right",border:e.border,store:e.store}})],1):e._e(),t("div",{ref:"rightFixedBodyWrapper",staticClass:"el-table__fixed-body-wrapper",style:[{top:e.layout.headerHeight+"px"},e.fixedBodyHeight]},[t("table-body",{style:{width:e.bodyWidth},attrs:{fixed:"right",store:e.store,stripe:e.stripe,"row-class-name":e.rowClassName,"row-style":e.rowStyle,highlight:e.highlightCurrentRow}}),e.$slots.append?t("div",{staticClass:"el-table__append-gutter",style:{height:e.layout.appendHeight+"px"}}):e._e()],1),e.showSummary?t("div",{directives:[{name:"show",rawName:"v-show",value:e.data&&e.data.length>0,expression:"data && data.length > 0"}],ref:"rightFixedFooterWrapper",staticClass:"el-table__fixed-footer-wrapper"},[t("table-footer",{style:{width:e.bodyWidth},attrs:{fixed:"right",border:e.border,"sum-text":e.sumText||e.t("el.table.sumText"),"summary-method":e.summaryMethod,store:e.store}})],1):e._e()]):e._e(),e.rightFixedColumns.length>0?t("div",{ref:"rightFixedPatch",staticClass:"el-table__fixed-right-patch",style:{width:e.layout.scrollY?e.layout.gutterWidth+"px":"0",height:e.layout.headerHeight+"px"}}):e._e(),t("div",{directives:[{name:"show",rawName:"v-show",value:e.resizeProxyVisible,expression:"resizeProxyVisible"}],ref:"resizeProxy",staticClass:"el-table__column-resize-proxy"})])};it._withStripped=!0;var rt=t(16),ot=t.n(rt),at=t(35),st=t(38),lt=t.n(st),ct="undefined"!=typeof navigator&&navigator.userAgent.toLowerCase().indexOf("firefox")>-1,ut={bind:function(e,n){var t,i;t=e,i=n.value,t&&t.addEventListener&&t.addEventListener(ct?"DOMMouseScroll":"mousewheel",(function(e){var n=lt()(e);i&&i.apply(this,[e,n])}))}},dt=t(6),ht=t.n(dt),pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ft=function(e){for(var n=e.target;n&&"HTML"!==n.tagName.toUpperCase();){if("TD"===n.tagName.toUpperCase())return n;n=n.parentNode}return null},mt=function(e){return null!==e&&"object"===(void 0===e?"undefined":pt(e))},gt=function(e,n,t,i,r){if(!n&&!i&&(!r||Array.isArray(r)&&!r.length))return e;t="string"==typeof t?"descending"===t?-1:1:t&&t<0?-1:1;var o=i?null:function(t,i){return r?(Array.isArray(r)||(r=[r]),r.map((function(n){return"string"==typeof n?Object(m.getValueByPath)(t,n):n(t,i,e)}))):("$key"!==n&&mt(t)&&"$value"in t&&(t=t.$value),[mt(t)?Object(m.getValueByPath)(t,n):t])};return e.map((function(e,n){return{value:e,index:n,key:o?o(e,n):null}})).sort((function(e,n){var r=function(e,n){if(i)return i(e.value,n.value);for(var t=0,r=e.key.length;t<r;t++){if(e.key[t]<n.key[t])return-1;if(e.key[t]>n.key[t])return 1}return 0}(e,n);return r||(r=e.index-n.index),r*t})).map((function(e){return e.value}))},vt=function(e,n){var t=null;return e.columns.forEach((function(e){e.id===n&&(t=e)})),t},bt=function(e,n){var t=(n.className||"").match(/el-table_[^\s]+/gm);return t?vt(e,t[0]):null},yt=function(e,n){if(!e)throw new Error("row is required when get row identity");if("string"==typeof n){if(n.indexOf(".")<0)return e[n];for(var t=n.split("."),i=e,r=0;r<t.length;r++)i=i[t[r]];return i}if("function"==typeof n)return n.call(null,e)},wt=function(e,n){var t={};return(e||[]).forEach((function(e,i){t[yt(e,n)]={row:e,index:i}})),t};function xt(e,n){return Object.prototype.hasOwnProperty.call(e,n)}function _t(e){return void 0!==e&&(e=parseInt(e,10),isNaN(e)&&(e=null)),e}function St(e){return"number"==typeof e?e:"string"==typeof e?/^\d+(?:px)?$/.test(e)?parseInt(e,10):e:null}function kt(e,n,t){var i=!1,r=e.indexOf(n),o=-1!==r,a=function(){e.push(n),i=!0},s=function(){e.splice(r,1),i=!0};return"boolean"==typeof t?t&&!o?a():!t&&o&&s():o?s():a(),i}var Ct={data:function(){return{states:{defaultExpandAll:!1,expandRows:[]}}},methods:{updateExpandRows:function(){var e=this.states,n=e.data,t=void 0===n?[]:n,i=e.rowKey,r=e.defaultExpandAll,o=e.expandRows;if(r)this.states.expandRows=t.slice();else if(i){var a=wt(o,i);this.states.expandRows=t.reduce((function(e,n){var t=yt(n,i);return a[t]&&e.push(n),e}),[])}else this.states.expandRows=[]},toggleRowExpansion:function(e,n){kt(this.states.expandRows,e,n)&&(this.table.$emit("expand-change",e,this.states.expandRows.slice()),this.scheduleLayout())},setExpandRowKeys:function(e){this.assertRowKey();var n=this.states,t=n.data,i=n.rowKey,r=wt(t,i);this.states.expandRows=e.reduce((function(e,n){var t=r[n];return t&&e.push(t.row),e}),[])},isRowExpanded:function(e){var n=this.states,t=n.expandRows,i=void 0===t?[]:t,r=n.rowKey;return r?!!wt(i,r)[yt(e,r)]:-1!==i.indexOf(e)}}},Et={data:function(){return{states:{_currentRowKey:null,currentRow:null}}},methods:{setCurrentRowKey:function(e){this.assertRowKey(),this.states._currentRowKey=e,this.setCurrentRowByKey(e)},restoreCurrentRowKey:function(){this.states._currentRowKey=null},setCurrentRowByKey:function(e){var n=this.states,t=n.data,i=void 0===t?[]:t,r=n.rowKey,o=null;r&&(o=Object(m.arrayFind)(i,(function(n){return yt(n,r)===e}))),n.currentRow=o},updateCurrentRow:function(e){var n=this.states,t=this.table,i=n.currentRow;if(e&&e!==i)return n.currentRow=e,void t.$emit("current-change",e,i);!e&&i&&(n.currentRow=null,t.$emit("current-change",null,i))},updateCurrentRowData:function(){var e=this.states,n=this.table,t=e.rowKey,i=e._currentRowKey,r=e.data||[],o=e.currentRow;if(-1===r.indexOf(o)&&o){if(t){var a=yt(o,t);this.setCurrentRowByKey(a)}else e.currentRow=null;null===e.currentRow&&n.$emit("current-change",null,o)}else i&&(this.setCurrentRowByKey(i),this.restoreCurrentRowKey())}}},Tt=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Pt={data:function(){return{states:{expandRowKeys:[],treeData:{},indent:16,lazy:!1,lazyTreeNodeMap:{},lazyColumnIdentifier:"hasChildren",childrenColumnName:"children"}}},computed:{normalizedData:function(){if(!this.states.rowKey)return{};var e=this.states.data||[];return this.normalize(e)},normalizedLazyNode:function(){var e=this.states,n=e.rowKey,t=e.lazyTreeNodeMap,i=e.lazyColumnIdentifier,r=Object.keys(t),o={};return r.length?(r.forEach((function(e){if(t[e].length){var r={children:[]};t[e].forEach((function(e){var t=yt(e,n);r.children.push(t),e[i]&&!o[t]&&(o[t]={children:[]})})),o[e]=r}})),o):o}},watch:{normalizedData:"updateTreeData",normalizedLazyNode:"updateTreeData"},methods:{normalize:function(e){var n=this.states,t=n.childrenColumnName,i=n.lazyColumnIdentifier,r=n.rowKey,o=n.lazy,a={};return function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"children",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"hasChildren",r=function(e){return!(Array.isArray(e)&&e.length)};function o(e,a,s){n(e,a,s),a.forEach((function(e){if(e[i])n(e,null,s+1);else{var a=e[t];r(a)||o(e,a,s+1)}}))}e.forEach((function(e){if(e[i])n(e,null,0);else{var a=e[t];r(a)||o(e,a,0)}}))}(e,(function(e,n,t){var i=yt(e,r);Array.isArray(n)?a[i]={children:n.map((function(e){return yt(e,r)})),level:t}:o&&(a[i]={children:[],lazy:!0,level:t})}),t,i),a},updateTreeData:function(){var e=this.normalizedData,n=this.normalizedLazyNode,t=Object.keys(e),i={};if(t.length){var r=this.states,o=r.treeData,a=r.defaultExpandAll,s=r.expandRowKeys,l=r.lazy,c=[],u=function(e,n){var t=a||s&&-1!==s.indexOf(n);return!!(e&&e.expanded||t)};t.forEach((function(n){var t=o[n],r=Tt({},e[n]);if(r.expanded=u(t,n),r.lazy){var a=t||{},s=a.loaded,l=void 0!==s&&s,d=a.loading,h=void 0!==d&&d;r.loaded=!!l,r.loading=!!h,c.push(n)}i[n]=r}));var d=Object.keys(n);l&&d.length&&c.length&&d.forEach((function(e){var t=o[e],r=n[e].children;if(-1!==c.indexOf(e)){if(0!==i[e].children.length)throw new Error("[ElTable]children must be an empty array.");i[e].children=r}else{var a=t||{},s=a.loaded,l=void 0!==s&&s,d=a.loading,h=void 0!==d&&d;i[e]={lazy:!0,loaded:!!l,loading:!!h,expanded:u(t,e),children:r,level:""}}}))}this.states.treeData=i,this.updateTableScrollY()},updateTreeExpandKeys:function(e){this.states.expandRowKeys=e,this.updateTreeData()},toggleTreeExpansion:function(e,n){this.assertRowKey();var t=this.states,i=t.rowKey,r=t.treeData,o=yt(e,i),a=o&&r[o];if(o&&a&&"expanded"in a){var s=a.expanded;n=void 0===n?!a.expanded:n,r[o].expanded=n,s!==n&&this.table.$emit("expand-change",e,n),this.updateTableScrollY()}},loadOrToggle:function(e){this.assertRowKey();var n=this.states,t=n.lazy,i=n.treeData,r=n.rowKey,o=yt(e,r),a=i[o];t&&a&&"loaded"in a&&!a.loaded?this.loadData(e,o,a):this.toggleTreeExpansion(e)},loadData:function(e,n,t){var i=this,r=this.table.load,o=this.states,a=o.lazyTreeNodeMap,s=o.treeData;r&&!s[n].loaded&&(s[n].loading=!0,r(e,t,(function(t){if(!Array.isArray(t))throw new Error("[ElTable] data must be an array");s[n].loading=!1,s[n].loaded=!0,s[n].expanded=!0,t.length&&i.$set(a,n,t),i.table.$emit("expand-change",e,!0)})))}}},Ot=function e(n){var t=[];return n.forEach((function(n){n.children?t.push.apply(t,e(n.children)):t.push(n)})),t},At=ht.a.extend({data:function(){return{states:{rowKey:null,data:[],isComplex:!1,_columns:[],originColumns:[],columns:[],fixedColumns:[],rightFixedColumns:[],leafColumns:[],fixedLeafColumns:[],rightFixedLeafColumns:[],leafColumnsLength:0,fixedLeafColumnsLength:0,rightFixedLeafColumnsLength:0,isAllSelected:!1,selection:[],reserveSelection:!1,selectOnIndeterminate:!1,selectable:null,filters:{},filteredData:null,sortingColumn:null,sortProp:null,sortOrder:null,hoverRow:null}}},mixins:[Ct,Et,Pt],methods:{assertRowKey:function(){if(!this.states.rowKey)throw new Error("[ElTable] prop row-key is required")},updateColumns:function(){var e=this.states,n=e._columns||[];e.fixedColumns=n.filter((function(e){return!0===e.fixed||"left"===e.fixed})),e.rightFixedColumns=n.filter((function(e){return"right"===e.fixed})),e.fixedColumns.length>0&&n[0]&&"selection"===n[0].type&&!n[0].fixed&&(n[0].fixed=!0,e.fixedColumns.unshift(n[0]));var t=n.filter((function(e){return!e.fixed}));e.originColumns=[].concat(e.fixedColumns).concat(t).concat(e.rightFixedColumns);var i=Ot(t),r=Ot(e.fixedColumns),o=Ot(e.rightFixedColumns);e.leafColumnsLength=i.length,e.fixedLeafColumnsLength=r.length,e.rightFixedLeafColumnsLength=o.length,e.columns=[].concat(r).concat(i).concat(o),e.isComplex=e.fixedColumns.length>0||e.rightFixedColumns.length>0},scheduleLayout:function(e){e&&this.updateColumns(),this.table.debouncedUpdateLayout()},isSelected:function(e){var n=this.states.selection;return(void 0===n?[]:n).indexOf(e)>-1},clearSelection:function(){var e=this.states;e.isAllSelected=!1,e.selection.length&&(e.selection=[],this.table.$emit("selection-change",[]))},cleanSelection:function(){var e=this.states,n=e.data,t=e.rowKey,i=e.selection,r=void 0;if(t){r=[];var o=wt(i,t),a=wt(n,t);for(var s in o)o.hasOwnProperty(s)&&!a[s]&&r.push(o[s].row)}else r=i.filter((function(e){return-1===n.indexOf(e)}));if(r.length){var l=i.filter((function(e){return-1===r.indexOf(e)}));e.selection=l,this.table.$emit("selection-change",l.slice())}},toggleRowSelection:function(e,n){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=kt(this.states.selection,e,n);if(i){var r=(this.states.selection||[]).slice();t&&this.table.$emit("select",r,e),this.table.$emit("selection-change",r)}},_toggleAllSelection:function(){var e=this.states,n=e.data,t=void 0===n?[]:n,i=e.selection,r=e.selectOnIndeterminate?!e.isAllSelected:!(e.isAllSelected||i.length);e.isAllSelected=r;var o=!1;t.forEach((function(n,t){e.selectable?e.selectable.call(null,n,t)&&kt(i,n,r)&&(o=!0):kt(i,n,r)&&(o=!0)})),o&&this.table.$emit("selection-change",i?i.slice():[]),this.table.$emit("select-all",i)},updateSelectionByRowKey:function(){var e=this.states,n=e.selection,t=e.rowKey,i=e.data,r=wt(n,t);i.forEach((function(e){var i=yt(e,t),o=r[i];o&&(n[o.index]=e)}))},updateAllSelected:function(){var e=this.states,n=e.selection,t=e.rowKey,i=e.selectable,r=e.data||[];if(0!==r.length){var o=void 0;t&&(o=wt(n,t));for(var a,s=!0,l=0,c=0,u=r.length;c<u;c++){var d=r[c],h=i&&i.call(null,d,c);if(a=d,o?o[yt(a,t)]:-1!==n.indexOf(a))l++;else if(!i||h){s=!1;break}}0===l&&(s=!1),e.isAllSelected=s}else e.isAllSelected=!1},updateFilters:function(e,n){Array.isArray(e)||(e=[e]);var t=this.states,i={};return e.forEach((function(e){t.filters[e.id]=n,i[e.columnKey||e.id]=n})),i},updateSort:function(e,n,t){this.states.sortingColumn&&this.states.sortingColumn!==e&&(this.states.sortingColumn.order=null),this.states.sortingColumn=e,this.states.sortProp=n,this.states.sortOrder=t},execFilter:function(){var e=this,n=this.states,t=n._data,i=n.filters,r=t;Object.keys(i).forEach((function(t){var i=n.filters[t];if(i&&0!==i.length){var o=vt(e.states,t);o&&o.filterMethod&&(r=r.filter((function(e){return i.some((function(n){return o.filterMethod.call(null,n,e,o)}))})))}})),n.filteredData=r},execSort:function(){var e=this.states;e.data=function(e,n){var t=n.sortingColumn;return t&&"string"!=typeof t.sortable?gt(e,n.sortProp,n.sortOrder,t.sortMethod,t.sortBy):e}(e.filteredData,e)},execQuery:function(e){e&&e.filter||this.execFilter(),this.execSort()},clearFilter:function(e){var n=this.states,t=this.table.$refs,i=t.tableHeader,r=t.fixedTableHeader,o=t.rightFixedTableHeader,a={};i&&(a=ze()(a,i.filterPanels)),r&&(a=ze()(a,r.filterPanels)),o&&(a=ze()(a,o.filterPanels));var s=Object.keys(a);if(s.length)if("string"==typeof e&&(e=[e]),Array.isArray(e)){var l=e.map((function(e){return function(e,n){for(var t=null,i=0;i<e.columns.length;i++){var r=e.columns[i];if(r.columnKey===n){t=r;break}}return t}(n,e)}));s.forEach((function(e){l.find((function(n){return n.id===e}))&&(a[e].filteredValue=[])})),this.commit("filterChange",{column:l,values:[],silent:!0,multi:!0})}else s.forEach((function(e){a[e].filteredValue=[]})),n.filters={},this.commit("filterChange",{column:{},values:[],silent:!0})},clearSort:function(){this.states.sortingColumn&&(this.updateSort(null,null,null),this.commit("changeSortCondition",{silent:!0}))},setExpandRowKeysAdapter:function(e){this.setExpandRowKeys(e),this.updateTreeExpandKeys(e)},toggleRowExpansionAdapter:function(e,n){this.states.columns.some((function(e){return"expand"===e.type}))?this.toggleRowExpansion(e,n):this.toggleTreeExpansion(e,n)}}});At.prototype.mutations={setData:function(e,n){var t=e._data!==n;e._data=n,this.execQuery(),this.updateCurrentRowData(),this.updateExpandRows(),e.reserveSelection?(this.assertRowKey(),this.updateSelectionByRowKey()):t?this.clearSelection():this.cleanSelection(),this.updateAllSelected(),this.updateTableScrollY()},insertColumn:function(e,n,t,i){var r=e._columns;i&&((r=i.children)||(r=i.children=[])),void 0!==t?r.splice(t,0,n):r.push(n),"selection"===n.type&&(e.selectable=n.selectable,e.reserveSelection=n.reserveSelection),this.table.$ready&&(this.updateColumns(),this.scheduleLayout())},removeColumn:function(e,n,t){var i=e._columns;t&&((i=t.children)||(i=t.children=[])),i&&i.splice(i.indexOf(n),1),this.table.$ready&&(this.updateColumns(),this.scheduleLayout())},sort:function(e,n){var t=n.prop,i=n.order,r=n.init;if(t){var o=Object(m.arrayFind)(e.columns,(function(e){return e.property===t}));o&&(o.order=i,this.updateSort(o,t,i),this.commit("changeSortCondition",{init:r}))}},changeSortCondition:function(e,n){var t=e.sortingColumn,i=e.sortProp,r=e.sortOrder;null===r&&(e.sortingColumn=null,e.sortProp=null);this.execQuery({filter:!0}),n&&(n.silent||n.init)||this.table.$emit("sort-change",{column:t,prop:i,order:r}),this.updateTableScrollY()},filterChange:function(e,n){var t=n.column,i=n.values,r=n.silent,o=this.updateFilters(t,i);this.execQuery(),r||this.table.$emit("filter-change",o),this.updateTableScrollY()},toggleAllSelection:function(){this.toggleAllSelection()},rowSelectedChanged:function(e,n){this.toggleRowSelection(n),this.updateAllSelected()},setHoverRow:function(e,n){e.hoverRow=n},setCurrentRow:function(e,n){this.updateCurrentRow(n)}},At.prototype.commit=function(e){var n=this.mutations;if(!n[e])throw new Error("Action not found: "+e);for(var t=arguments.length,i=Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];n[e].apply(this,[this.states].concat(i))},At.prototype.updateTableScrollY=function(){ht.a.nextTick(this.table.updateScrollY)};var jt=At;function It(e){var n={};return Object.keys(e).forEach((function(t){var i=e[t],r=void 0;"string"==typeof i?r=function(){return this.store.states[i]}:"function"==typeof i?r=function(){return i.call(this,this.store.states)}:console.error("invalid value type"),r&&(n[t]=r)})),n}var Dt=t(30),Mt=t.n(Dt);var Lt=function(){function e(n){for(var t in function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.observers=[],this.table=null,this.store=null,this.columns=null,this.fit=!0,this.showHeader=!0,this.height=null,this.scrollX=!1,this.scrollY=!1,this.bodyWidth=null,this.fixedWidth=null,this.rightFixedWidth=null,this.tableHeight=null,this.headerHeight=44,this.appendHeight=0,this.footerHeight=44,this.viewportHeight=null,this.bodyHeight=null,this.fixedBodyHeight=null,this.gutterWidth=Mt()(),n)n.hasOwnProperty(t)&&(this[t]=n[t]);if(!this.table)throw new Error("table is required for Table Layout");if(!this.store)throw new Error("store is required for Table Layout")}return e.prototype.updateScrollY=function(){if(null===this.height)return!1;var e=this.table.bodyWrapper;if(this.table.$el&&e){var n=e.querySelector(".el-table__body"),t=this.scrollY,i=n.offsetHeight>this.bodyHeight;return this.scrollY=i,t!==i}return!1},e.prototype.setHeight=function(e){var n=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"height";if(!ht.a.prototype.$isServer){var i=this.table.$el;if(e=St(e),this.height=e,!i&&(e||0===e))return ht.a.nextTick((function(){return n.setHeight(e,t)}));"number"==typeof e?(i.style[t]=e+"px",this.updateElsHeight()):"string"==typeof e&&(i.style[t]=e,this.updateElsHeight())}},e.prototype.setMaxHeight=function(e){this.setHeight(e,"max-height")},e.prototype.getFlattenColumns=function(){var e=[];return this.table.columns.forEach((function(n){n.isColumnGroup?e.push.apply(e,n.columns):e.push(n)})),e},e.prototype.updateElsHeight=function(){var e=this;if(!this.table.$ready)return ht.a.nextTick((function(){return e.updateElsHeight()}));var n=this.table.$refs,t=n.headerWrapper,i=n.appendWrapper,r=n.footerWrapper;if(this.appendHeight=i?i.offsetHeight:0,!this.showHeader||t){var o=t?t.querySelector(".el-table__header tr"):null,a=this.headerDisplayNone(o),s=this.headerHeight=this.showHeader?t.offsetHeight:0;if(this.showHeader&&!a&&t.offsetWidth>0&&(this.table.columns||[]).length>0&&s<2)return ht.a.nextTick((function(){return e.updateElsHeight()}));var l=this.tableHeight=this.table.$el.clientHeight,c=this.footerHeight=r?r.offsetHeight:0;null!==this.height&&(this.bodyHeight=l-s-c+(r?1:0)),this.fixedBodyHeight=this.scrollX?this.bodyHeight-this.gutterWidth:this.bodyHeight;var u=!(this.store.states.data&&this.store.states.data.length);this.viewportHeight=this.scrollX?l-(u?0:this.gutterWidth):l,this.updateScrollY(),this.notifyObservers("scrollable")}},e.prototype.headerDisplayNone=function(e){if(!e)return!0;for(var n=e;"DIV"!==n.tagName;){if("none"===getComputedStyle(n).display)return!0;n=n.parentElement}return!1},e.prototype.updateColumnsWidth=function(){if(!ht.a.prototype.$isServer){var e=this.fit,n=this.table.$el.clientWidth,t=0,i=this.getFlattenColumns(),r=i.filter((function(e){return"number"!=typeof e.width}));if(i.forEach((function(e){"number"==typeof e.width&&e.realWidth&&(e.realWidth=null)})),r.length>0&&e){i.forEach((function(e){t+=e.width||e.minWidth||80}));var o=this.scrollY?this.gutterWidth:0;if(t<=n-o){this.scrollX=!1;var a=n-o-t;if(1===r.length)r[0].realWidth=(r[0].minWidth||80)+a;else{var s=a/r.reduce((function(e,n){return e+(n.minWidth||80)}),0),l=0;r.forEach((function(e,n){if(0!==n){var t=Math.floor((e.minWidth||80)*s);l+=t,e.realWidth=(e.minWidth||80)+t}})),r[0].realWidth=(r[0].minWidth||80)+a-l}}else this.scrollX=!0,r.forEach((function(e){e.realWidth=e.minWidth}));this.bodyWidth=Math.max(t,n),this.table.resizeState.width=this.bodyWidth}else i.forEach((function(e){e.width||e.minWidth?e.realWidth=e.width||e.minWidth:e.realWidth=80,t+=e.realWidth})),this.scrollX=t>n,this.bodyWidth=t;var c=this.store.states.fixedColumns;if(c.length>0){var u=0;c.forEach((function(e){u+=e.realWidth||e.width})),this.fixedWidth=u}var d=this.store.states.rightFixedColumns;if(d.length>0){var h=0;d.forEach((function(e){h+=e.realWidth||e.width})),this.rightFixedWidth=h}this.notifyObservers("columns")}},e.prototype.addObserver=function(e){this.observers.push(e)},e.prototype.removeObserver=function(e){var n=this.observers.indexOf(e);-1!==n&&this.observers.splice(n,1)},e.prototype.notifyObservers=function(e){var n=this;this.observers.forEach((function(t){switch(e){case"columns":t.onColumnsChange(n);break;case"scrollable":t.onScrollableChange(n);break;default:throw new Error("Table Layout don't have event "+e+".")}}))},e}(),Nt={created:function(){this.tableLayout.addObserver(this)},destroyed:function(){this.tableLayout.removeObserver(this)},computed:{tableLayout:function(){var e=this.layout;if(!e&&this.table&&(e=this.table.layout),!e)throw new Error("Can not find table layout.");return e}},mounted:function(){this.onColumnsChange(this.tableLayout),this.onScrollableChange(this.tableLayout)},updated:function(){this.__updated__||(this.onColumnsChange(this.tableLayout),this.onScrollableChange(this.tableLayout),this.__updated__=!0)},methods:{onColumnsChange:function(e){var n=this.$el.querySelectorAll("colgroup > col");if(n.length){var t=e.getFlattenColumns(),i={};t.forEach((function(e){i[e.id]=e}));for(var r=0,o=n.length;r<o;r++){var a=n[r],s=a.getAttribute("name"),l=i[s];l&&a.setAttribute("width",l.realWidth||l.width)}}},onScrollableChange:function(e){for(var n=this.$el.querySelectorAll("colgroup > col[name=gutter]"),t=0,i=n.length;t<i;t++){n[t].setAttribute("width",e.scrollY?e.gutterWidth:"0")}for(var r=this.$el.querySelectorAll("th.gutter"),o=0,a=r.length;o<a;o++){var s=r[o];s.style.width=e.scrollY?e.gutterWidth+"px":"0",s.style.display=e.scrollY?"":"none"}}}},$t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ft=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Rt={name:"ElTableBody",mixins:[Nt],components:{ElCheckbox:ot.a,ElTooltip:Te.a},props:{store:{required:!0},stripe:Boolean,context:{},rowClassName:[String,Function],rowStyle:[Object,Function],fixed:String,highlight:Boolean},render:function(e){var n=this,t=this.data||[];return e("table",{class:"el-table__body",attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[e("colgroup",[this.columns.map((function(n){return e("col",{attrs:{name:n.id},key:n.id})}))]),e("tbody",[t.reduce((function(e,t){return e.concat(n.wrappedRowRender(t,e.length))}),[]),e("el-tooltip",{attrs:{effect:this.table.tooltipEffect,placement:"top",content:this.tooltipContent},ref:"tooltip"})])])},computed:Ft({table:function(){return this.$parent}},It({data:"data",columns:"columns",treeIndent:"indent",leftFixedLeafCount:"fixedLeafColumnsLength",rightFixedLeafCount:"rightFixedLeafColumnsLength",columnsCount:function(e){return e.columns.length},leftFixedCount:function(e){return e.fixedColumns.length},rightFixedCount:function(e){return e.rightFixedColumns.length},hasExpandColumn:function(e){return e.columns.some((function(e){return"expand"===e.type}))}}),{firstDefaultColumnIndex:function(){return Object(m.arrayFindIndex)(this.columns,(function(e){return"default"===e.type}))}}),watch:{"store.states.hoverRow":function(e,n){var t=this;if(this.store.states.isComplex&&!this.$isServer){var i=window.requestAnimationFrame;i||(i=function(e){return setTimeout(e,16)}),i((function(){var i=t.$el.querySelectorAll(".el-table__row"),r=i[n],o=i[e];r&&Object(fe.removeClass)(r,"hover-row"),o&&Object(fe.addClass)(o,"hover-row")}))}}},data:function(){return{tooltipContent:""}},created:function(){this.activateTooltip=A()(50,(function(e){return e.handleShowPopper()}))},methods:{getKeyOfRow:function(e,n){var t=this.table.rowKey;return t?yt(e,t):n},isColumnHidden:function(e){return!0===this.fixed||"left"===this.fixed?e>=this.leftFixedLeafCount:"right"===this.fixed?e<this.columnsCount-this.rightFixedLeafCount:e<this.leftFixedLeafCount||e>=this.columnsCount-this.rightFixedLeafCount},getSpan:function(e,n,t,i){var r=1,o=1,a=this.table.spanMethod;if("function"==typeof a){var s=a({row:e,column:n,rowIndex:t,columnIndex:i});Array.isArray(s)?(r=s[0],o=s[1]):"object"===(void 0===s?"undefined":$t(s))&&(r=s.rowspan,o=s.colspan)}return{rowspan:r,colspan:o}},getRowStyle:function(e,n){var t=this.table.rowStyle;return"function"==typeof t?t.call(null,{row:e,rowIndex:n}):t||null},getRowClass:function(e,n){var t=["el-table__row"];this.table.highlightCurrentRow&&e===this.store.states.currentRow&&t.push("current-row"),this.stripe&&n%2==1&&t.push("el-table__row--striped");var i=this.table.rowClassName;return"string"==typeof i?t.push(i):"function"==typeof i&&t.push(i.call(null,{row:e,rowIndex:n})),this.store.states.expandRows.indexOf(e)>-1&&t.push("expanded"),t},getCellStyle:function(e,n,t,i){var r=this.table.cellStyle;return"function"==typeof r?r.call(null,{rowIndex:e,columnIndex:n,row:t,column:i}):r},getCellClass:function(e,n,t,i){var r=[i.id,i.align,i.className];this.isColumnHidden(n)&&r.push("is-hidden");var o=this.table.cellClassName;return"string"==typeof o?r.push(o):"function"==typeof o&&r.push(o.call(null,{rowIndex:e,columnIndex:n,row:t,column:i})),r.join(" ")},getColspanRealWidth:function(e,n,t){return n<1?e[t].realWidth:e.map((function(e){return e.realWidth})).slice(t,t+n).reduce((function(e,n){return e+n}),-1)},handleCellMouseEnter:function(e,n){var t=this.table,i=ft(e);if(i){var r=bt(t,i),o=t.hoverState={cell:i,column:r,row:n};t.$emit("cell-mouse-enter",o.row,o.column,o.cell,e)}var a=e.target.querySelector(".cell");if(Object(fe.hasClass)(a,"el-tooltip")&&a.childNodes.length){var s=document.createRange();if(s.setStart(a,0),s.setEnd(a,a.childNodes.length),(s.getBoundingClientRect().width+((parseInt(Object(fe.getStyle)(a,"paddingLeft"),10)||0)+(parseInt(Object(fe.getStyle)(a,"paddingRight"),10)||0))>a.offsetWidth||a.scrollWidth>a.offsetWidth)&&this.$refs.tooltip){var l=this.$refs.tooltip;this.tooltipContent=i.innerText||i.textContent,l.referenceElm=i,l.$refs.popper&&(l.$refs.popper.style.display="none"),l.doDestroy(),l.setExpectedState(!0),this.activateTooltip(l)}}},handleCellMouseLeave:function(e){var n=this.$refs.tooltip;if(n&&(n.setExpectedState(!1),n.handleClosePopper()),ft(e)){var t=this.table.hoverState||{};this.table.$emit("cell-mouse-leave",t.row,t.column,t.cell,e)}},handleMouseEnter:A()(30,(function(e){this.store.commit("setHoverRow",e)})),handleMouseLeave:A()(30,(function(){this.store.commit("setHoverRow",null)})),handleContextMenu:function(e,n){this.handleEvent(e,n,"contextmenu")},handleDoubleClick:function(e,n){this.handleEvent(e,n,"dblclick")},handleClick:function(e,n){this.store.commit("setCurrentRow",n),this.handleEvent(e,n,"click")},handleEvent:function(e,n,t){var i=this.table,r=ft(e),o=void 0;r&&(o=bt(i,r))&&i.$emit("cell-"+t,n,o,r,e),i.$emit("row-"+t,n,o,e)},rowRender:function(e,n,t){var i=this,r=this.$createElement,o=this.treeIndent,a=this.columns,s=this.firstDefaultColumnIndex,l=a.map((function(e,n){return i.isColumnHidden(n)})),c=this.getRowClass(e,n),u=!0;return t&&(c.push("el-table__row--level-"+t.level),u=t.display),r("tr",{style:[u?null:{display:"none"},this.getRowStyle(e,n)],class:c,key:this.getKeyOfRow(e,n),on:{dblclick:function(n){return i.handleDoubleClick(n,e)},click:function(n){return i.handleClick(n,e)},contextmenu:function(n){return i.handleContextMenu(n,e)},mouseenter:function(e){return i.handleMouseEnter(n)},mouseleave:this.handleMouseLeave}},[a.map((function(c,u){var d=i.getSpan(e,c,n,u),h=d.rowspan,p=d.colspan;if(!h||!p)return null;var f=Ft({},c);f.realWidth=i.getColspanRealWidth(a,p,u);var m={store:i.store,_self:i.context||i.table.$vnode.context,column:f,row:e,$index:n};return u===s&&t&&(m.treeNode={indent:t.level*o,level:t.level},"boolean"==typeof t.expanded&&(m.treeNode.expanded=t.expanded,"loading"in t&&(m.treeNode.loading=t.loading),"noLazyChildren"in t&&(m.treeNode.noLazyChildren=t.noLazyChildren))),r("td",{style:i.getCellStyle(n,u,e,c),class:i.getCellClass(n,u,e,c),attrs:{rowspan:h,colspan:p},on:{mouseenter:function(n){return i.handleCellMouseEnter(n,e)},mouseleave:i.handleCellMouseLeave}},[c.renderCell.call(i._renderProxy,i.$createElement,m,l[u])])}))])},wrappedRowRender:function(e,n){var t=this,i=this.$createElement,r=this.store,o=r.isRowExpanded,a=r.assertRowKey,s=r.states,l=s.treeData,c=s.lazyTreeNodeMap,u=s.childrenColumnName,d=s.rowKey;if(this.hasExpandColumn&&o(e)){var h=this.table.renderExpanded,p=this.rowRender(e,n);return h?[[p,i("tr",{key:"expanded-row__"+p.key},[i("td",{attrs:{colspan:this.columnsCount},class:"el-table__expanded-cell"},[h(this.$createElement,{row:e,$index:n,store:this.store})])])]]:(console.error("[Element Error]renderExpanded is required."),p)}if(Object.keys(l).length){a();var f=yt(e,d),m=l[f],g=null;m&&(g={expanded:m.expanded,level:m.level,display:!0},"boolean"==typeof m.lazy&&("boolean"==typeof m.loaded&&m.loaded&&(g.noLazyChildren=!(m.children&&m.children.length)),g.loading=m.loading));var v=[this.rowRender(e,n,g)];if(m){var b=0;m.display=!0,function e(i,r){i&&i.length&&r&&i.forEach((function(i){var o={display:r.display&&r.expanded,level:r.level+1},a=yt(i,d);if(null==a)throw new Error("for nested data item, row-key is required.");if((m=Ft({},l[a]))&&(o.expanded=m.expanded,m.level=m.level||o.level,m.display=!(!m.expanded||!o.display),"boolean"==typeof m.lazy&&("boolean"==typeof m.loaded&&m.loaded&&(o.noLazyChildren=!(m.children&&m.children.length)),o.loading=m.loading)),b++,v.push(t.rowRender(i,n+b,o)),m){var s=c[a]||i[u];e(s,m)}}))}(c[f]||e[u],m)}return v}return this.rowRender(e,n)}}},Bt=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("transition",{attrs:{name:"el-zoom-in-top"}},[e.multiple?t("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleOutsideClick,expression:"handleOutsideClick"},{name:"show",rawName:"v-show",value:e.showPopper,expression:"showPopper"}],staticClass:"el-table-filter"},[t("div",{staticClass:"el-table-filter__content"},[t("el-scrollbar",{attrs:{"wrap-class":"el-table-filter__wrap"}},[t("el-checkbox-group",{staticClass:"el-table-filter__checkbox-group",model:{value:e.filteredValue,callback:function(n){e.filteredValue=n},expression:"filteredValue"}},e._l(e.filters,(function(n){return t("el-checkbox",{key:n.value,attrs:{label:n.value}},[e._v(e._s(n.text))])})),1)],1)],1),t("div",{staticClass:"el-table-filter__bottom"},[t("button",{class:{"is-disabled":0===e.filteredValue.length},attrs:{disabled:0===e.filteredValue.length},on:{click:e.handleConfirm}},[e._v(e._s(e.t("el.table.confirmFilter")))]),t("button",{on:{click:e.handleReset}},[e._v(e._s(e.t("el.table.resetFilter")))])])]):t("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleOutsideClick,expression:"handleOutsideClick"},{name:"show",rawName:"v-show",value:e.showPopper,expression:"showPopper"}],staticClass:"el-table-filter"},[t("ul",{staticClass:"el-table-filter__list"},[t("li",{staticClass:"el-table-filter__list-item",class:{"is-active":void 0===e.filterValue||null===e.filterValue},on:{click:function(n){e.handleSelect(null)}}},[e._v(e._s(e.t("el.table.clearFilter")))]),e._l(e.filters,(function(n){return t("li",{key:n.value,staticClass:"el-table-filter__list-item",class:{"is-active":e.isActive(n)},attrs:{label:n.value},on:{click:function(t){e.handleSelect(n.value)}}},[e._v(e._s(n.text))])}))],2)])])};Bt._withStripped=!0;var Vt=[];!ht.a.prototype.$isServer&&document.addEventListener("click",(function(e){Vt.forEach((function(n){var t=e.target;n&&n.$el&&(t===n.$el||n.$el.contains(t)||n.handleOutsideClick&&n.handleOutsideClick(e))}))}));var zt=function(e){e&&Vt.push(e)},qt=function(e){-1!==Vt.indexOf(e)&&Vt.splice(e,1)},Ht=t(31),Wt=t.n(Ht),Ut=r({name:"ElTableFilterPanel",mixins:[L.a,f.a],directives:{Clickoutside:I.a},components:{ElCheckbox:ot.a,ElCheckboxGroup:Wt.a,ElScrollbar:$.a},props:{placement:{type:String,default:"bottom-end"}},methods:{isActive:function(e){return e.value===this.filterValue},handleOutsideClick:function(){var e=this;setTimeout((function(){e.showPopper=!1}),16)},handleConfirm:function(){this.confirmFilter(this.filteredValue),this.handleOutsideClick()},handleReset:function(){this.filteredValue=[],this.confirmFilter(this.filteredValue),this.handleOutsideClick()},handleSelect:function(e){this.filterValue=e,null!=e?this.confirmFilter(this.filteredValue):this.confirmFilter([]),this.handleOutsideClick()},confirmFilter:function(e){this.table.store.commit("filterChange",{column:this.column,values:e}),this.table.store.updateAllSelected()}},data:function(){return{table:null,cell:null,column:null}},computed:{filters:function(){return this.column&&this.column.filters},filterValue:{get:function(){return(this.column.filteredValue||[])[0]},set:function(e){this.filteredValue&&(null!=e?this.filteredValue.splice(0,1,e):this.filteredValue.splice(0,1))}},filteredValue:{get:function(){return this.column&&this.column.filteredValue||[]},set:function(e){this.column&&(this.column.filteredValue=e)}},multiple:function(){return!this.column||this.column.filterMultiple}},mounted:function(){var e=this;this.popperElm=this.$el,this.referenceElm=this.cell,this.table.bodyWrapper.addEventListener("scroll",(function(){e.updatePopper()})),this.$watch("showPopper",(function(n){e.column&&(e.column.filterOpened=n),n?zt(e):qt(e)}))},watch:{showPopper:function(e){!0===e&&parseInt(this.popperJS._popper.style.zIndex,10)<y.PopupManager.zIndex&&(this.popperJS._popper.style.zIndex=y.PopupManager.nextZIndex())}}},Bt,[],!1,null,null,null);Ut.options.__file="packages/table/src/filter-panel.vue";var Jt=Ut.exports,Yt=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Gt=function(e){var n=1;e.forEach((function(e){e.level=1,function e(t,i){if(i&&(t.level=i.level+1,n<t.level&&(n=t.level)),t.children){var r=0;t.children.forEach((function(n){e(n,t),r+=n.colSpan})),t.colSpan=r}else t.colSpan=1}(e)}));for(var t=[],i=0;i<n;i++)t.push([]);return function e(n){var t=[];return n.forEach((function(n){n.children?(t.push(n),t.push.apply(t,e(n.children))):t.push(n)})),t}(e).forEach((function(e){e.children?e.rowSpan=1:e.rowSpan=n-e.level+1,t[e.level-1].push(e)})),t},Kt={name:"ElTableHeader",mixins:[Nt],render:function(e){var n=this,t=this.store.states.originColumns,i=Gt(t,this.columns),r=i.length>1;return r&&(this.$parent.isGroup=!0),e("table",{class:"el-table__header",attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[e("colgroup",[this.columns.map((function(n){return e("col",{attrs:{name:n.id},key:n.id})})),this.hasGutter?e("col",{attrs:{name:"gutter"}}):""]),e("thead",{class:[{"is-group":r,"has-gutter":this.hasGutter}]},[this._l(i,(function(t,i){return e("tr",{style:n.getHeaderRowStyle(i),class:n.getHeaderRowClass(i)},[t.map((function(r,o){return e("th",{attrs:{colspan:r.colSpan,rowspan:r.rowSpan},on:{mousemove:function(e){return n.handleMouseMove(e,r)},mouseout:n.handleMouseOut,mousedown:function(e){return n.handleMouseDown(e,r)},click:function(e){return n.handleHeaderClick(e,r)},contextmenu:function(e){return n.handleHeaderContextMenu(e,r)}},style:n.getHeaderCellStyle(i,o,t,r),class:n.getHeaderCellClass(i,o,t,r),key:r.id},[e("div",{class:["cell",r.filteredValue&&r.filteredValue.length>0?"highlight":"",r.labelClassName]},[r.renderHeader?r.renderHeader.call(n._renderProxy,e,{column:r,$index:o,store:n.store,_self:n.$parent.$vnode.context}):r.label,r.sortable?e("span",{class:"caret-wrapper",on:{click:function(e){return n.handleSortClick(e,r)}}},[e("i",{class:"sort-caret ascending",on:{click:function(e){return n.handleSortClick(e,r,"ascending")}}}),e("i",{class:"sort-caret descending",on:{click:function(e){return n.handleSortClick(e,r,"descending")}}})]):"",r.filterable?e("span",{class:"el-table__column-filter-trigger",on:{click:function(e){return n.handleFilterClick(e,r)}}},[e("i",{class:["el-icon-arrow-down",r.filterOpened?"el-icon-arrow-up":""]})]):""])])})),n.hasGutter?e("th",{class:"gutter"}):""])}))])])},props:{fixed:String,store:{required:!0},border:Boolean,defaultSort:{type:Object,default:function(){return{prop:"",order:""}}}},components:{ElCheckbox:ot.a},computed:Yt({table:function(){return this.$parent},hasGutter:function(){return!this.fixed&&this.tableLayout.gutterWidth}},It({columns:"columns",isAllSelected:"isAllSelected",leftFixedLeafCount:"fixedLeafColumnsLength",rightFixedLeafCount:"rightFixedLeafColumnsLength",columnsCount:function(e){return e.columns.length},leftFixedCount:function(e){return e.fixedColumns.length},rightFixedCount:function(e){return e.rightFixedColumns.length}})),created:function(){this.filterPanels={}},mounted:function(){var e=this;this.$nextTick((function(){var n=e.defaultSort,t=n.prop,i=n.order;e.store.commit("sort",{prop:t,order:i,init:!0})}))},beforeDestroy:function(){var e=this.filterPanels;for(var n in e)e.hasOwnProperty(n)&&e[n]&&e[n].$destroy(!0)},methods:{isCellHidden:function(e,n){for(var t=0,i=0;i<e;i++)t+=n[i].colSpan;var r=t+n[e].colSpan-1;return!0===this.fixed||"left"===this.fixed?r>=this.leftFixedLeafCount:"right"===this.fixed?t<this.columnsCount-this.rightFixedLeafCount:r<this.leftFixedLeafCount||t>=this.columnsCount-this.rightFixedLeafCount},getHeaderRowStyle:function(e){var n=this.table.headerRowStyle;return"function"==typeof n?n.call(null,{rowIndex:e}):n},getHeaderRowClass:function(e){var n=[],t=this.table.headerRowClassName;return"string"==typeof t?n.push(t):"function"==typeof t&&n.push(t.call(null,{rowIndex:e})),n.join(" ")},getHeaderCellStyle:function(e,n,t,i){var r=this.table.headerCellStyle;return"function"==typeof r?r.call(null,{rowIndex:e,columnIndex:n,row:t,column:i}):r},getHeaderCellClass:function(e,n,t,i){var r=[i.id,i.order,i.headerAlign,i.className,i.labelClassName];0===e&&this.isCellHidden(n,t)&&r.push("is-hidden"),i.children||r.push("is-leaf"),i.sortable&&r.push("is-sortable");var o=this.table.headerCellClassName;return"string"==typeof o?r.push(o):"function"==typeof o&&r.push(o.call(null,{rowIndex:e,columnIndex:n,row:t,column:i})),r.join(" ")},toggleAllSelection:function(e){e.stopPropagation(),this.store.commit("toggleAllSelection")},handleFilterClick:function(e,n){e.stopPropagation();var t=e.target,i="TH"===t.tagName?t:t.parentNode;if(!Object(fe.hasClass)(i,"noclick")){i=i.querySelector(".el-table__column-filter-trigger")||i;var r=this.$parent,o=this.filterPanels[n.id];o&&n.filterOpened?o.showPopper=!1:(o||(o=new ht.a(Jt),this.filterPanels[n.id]=o,n.filterPlacement&&(o.placement=n.filterPlacement),o.table=r,o.cell=i,o.column=n,!this.$isServer&&o.$mount(document.createElement("div"))),setTimeout((function(){o.showPopper=!0}),16))}},handleHeaderClick:function(e,n){!n.filters&&n.sortable?this.handleSortClick(e,n):n.filterable&&!n.sortable&&this.handleFilterClick(e,n),this.$parent.$emit("header-click",n,e)},handleHeaderContextMenu:function(e,n){this.$parent.$emit("header-contextmenu",n,e)},handleMouseDown:function(e,n){var t=this;if(!this.$isServer&&!(n.children&&n.children.length>0)&&this.draggingColumn&&this.border){this.dragging=!0,this.$parent.resizeProxyVisible=!0;var i=this.$parent,r=i.$el.getBoundingClientRect().left,o=this.$el.querySelector("th."+n.id),a=o.getBoundingClientRect(),s=a.left-r+30;Object(fe.addClass)(o,"noclick"),this.dragState={startMouseLeft:e.clientX,startLeft:a.right-r,startColumnLeft:a.left-r,tableLeft:r};var l=i.$refs.resizeProxy;l.style.left=this.dragState.startLeft+"px",document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};var c=function(e){var n=e.clientX-t.dragState.startMouseLeft,i=t.dragState.startLeft+n;l.style.left=Math.max(s,i)+"px"};document.addEventListener("mousemove",c),document.addEventListener("mouseup",(function r(){if(t.dragging){var a=t.dragState,s=a.startColumnLeft,u=a.startLeft,d=parseInt(l.style.left,10)-s;n.width=n.realWidth=d,i.$emit("header-dragend",n.width,u-s,n,e),t.store.scheduleLayout(),document.body.style.cursor="",t.dragging=!1,t.draggingColumn=null,t.dragState={},i.resizeProxyVisible=!1}document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",r),document.onselectstart=null,document.ondragstart=null,setTimeout((function(){Object(fe.removeClass)(o,"noclick")}),0)}))}},handleMouseMove:function(e,n){if(!(n.children&&n.children.length>0)){for(var t=e.target;t&&"TH"!==t.tagName;)t=t.parentNode;if(n&&n.resizable&&!this.dragging&&this.border){var i=t.getBoundingClientRect(),r=document.body.style;i.width>12&&i.right-e.pageX<8?(r.cursor="col-resize",Object(fe.hasClass)(t,"is-sortable")&&(t.style.cursor="col-resize"),this.draggingColumn=n):this.dragging||(r.cursor="",Object(fe.hasClass)(t,"is-sortable")&&(t.style.cursor="pointer"),this.draggingColumn=null)}}},handleMouseOut:function(){this.$isServer||(document.body.style.cursor="")},toggleOrder:function(e){var n=e.order,t=e.sortOrders;if(""===n)return t[0];var i=t.indexOf(n||null);return t[i>t.length-2?0:i+1]},handleSortClick:function(e,n,t){e.stopPropagation();for(var i=n.order===t?null:t||this.toggleOrder(n),r=e.target;r&&"TH"!==r.tagName;)r=r.parentNode;if(r&&"TH"===r.tagName&&Object(fe.hasClass)(r,"noclick"))Object(fe.removeClass)(r,"noclick");else if(n.sortable){var o=this.store.states,a=o.sortProp,s=void 0,l=o.sortingColumn;(l!==n||l===n&&null===l.order)&&(l&&(l.order=null),o.sortingColumn=n,a=n.property),s=n.order=i||null,o.sortProp=a,o.sortOrder=s,this.store.commit("changeSortCondition")}}},data:function(){return{draggingColumn:null,dragging:!1,dragState:{}}}},Xt=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Qt={name:"ElTableFooter",mixins:[Nt],render:function(e){var n=this,t=[];return this.summaryMethod?t=this.summaryMethod({columns:this.columns,data:this.store.states.data}):this.columns.forEach((function(e,i){if(0!==i){var r=n.store.states.data.map((function(n){return Number(n[e.property])})),o=[],a=!0;r.forEach((function(e){if(!isNaN(e)){a=!1;var n=(""+e).split(".")[1];o.push(n?n.length:0)}}));var s=Math.max.apply(null,o);t[i]=a?"":r.reduce((function(e,n){var t=Number(n);return isNaN(t)?e:parseFloat((e+n).toFixed(Math.min(s,20)))}),0)}else t[i]=n.sumText})),e("table",{class:"el-table__footer",attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[e("colgroup",[this.columns.map((function(n){return e("col",{attrs:{name:n.id},key:n.id})})),this.hasGutter?e("col",{attrs:{name:"gutter"}}):""]),e("tbody",{class:[{"has-gutter":this.hasGutter}]},[e("tr",[this.columns.map((function(i,r){return e("td",{key:r,attrs:{colspan:i.colSpan,rowspan:i.rowSpan},class:n.getRowClasses(i,r)},[e("div",{class:["cell",i.labelClassName]},[t[r]])])})),this.hasGutter?e("th",{class:"gutter"}):""])])])},props:{fixed:String,store:{required:!0},summaryMethod:Function,sumText:String,border:Boolean,defaultSort:{type:Object,default:function(){return{prop:"",order:""}}}},computed:Xt({table:function(){return this.$parent},hasGutter:function(){return!this.fixed&&this.tableLayout.gutterWidth}},It({columns:"columns",isAllSelected:"isAllSelected",leftFixedLeafCount:"fixedLeafColumnsLength",rightFixedLeafCount:"rightFixedLeafColumnsLength",columnsCount:function(e){return e.columns.length},leftFixedCount:function(e){return e.fixedColumns.length},rightFixedCount:function(e){return e.rightFixedColumns.length}})),methods:{isCellHidden:function(e,n,t){if(!0===this.fixed||"left"===this.fixed)return e>=this.leftFixedLeafCount;if("right"===this.fixed){for(var i=0,r=0;r<e;r++)i+=n[r].colSpan;return i<this.columnsCount-this.rightFixedLeafCount}return!(this.fixed||!t.fixed)||(e<this.leftFixedCount||e>=this.columnsCount-this.rightFixedCount)},getRowClasses:function(e,n){var t=[e.id,e.align,e.labelClassName];return e.className&&t.push(e.className),this.isCellHidden(n,this.columns,e)&&t.push("is-hidden"),e.children||t.push("is-leaf"),t}}},Zt=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ei=1,ni=r({name:"ElTable",mixins:[f.a,_.a],directives:{Mousewheel:ut},props:{data:{type:Array,default:function(){return[]}},size:String,width:[String,Number],height:[String,Number],maxHeight:[String,Number],fit:{type:Boolean,default:!0},stripe:Boolean,border:Boolean,rowKey:[String,Function],context:{},showHeader:{type:Boolean,default:!0},showSummary:Boolean,sumText:String,summaryMethod:Function,rowClassName:[String,Function],rowStyle:[Object,Function],cellClassName:[String,Function],cellStyle:[Object,Function],headerRowClassName:[String,Function],headerRowStyle:[Object,Function],headerCellClassName:[String,Function],headerCellStyle:[Object,Function],highlightCurrentRow:Boolean,currentRowKey:[String,Number],emptyText:String,expandRowKeys:Array,defaultExpandAll:Boolean,defaultSort:Object,tooltipEffect:String,spanMethod:Function,selectOnIndeterminate:{type:Boolean,default:!0},indent:{type:Number,default:16},treeProps:{type:Object,default:function(){return{hasChildren:"hasChildren",children:"children"}}},lazy:Boolean,load:Function},components:{TableHeader:Kt,TableFooter:Qt,TableBody:Rt,ElCheckbox:ot.a},methods:{getMigratingConfig:function(){return{events:{expand:"expand is renamed to expand-change"}}},setCurrentRow:function(e){this.store.commit("setCurrentRow",e)},toggleRowSelection:function(e,n){this.store.toggleRowSelection(e,n,!1),this.store.updateAllSelected()},toggleRowExpansion:function(e,n){this.store.toggleRowExpansionAdapter(e,n)},clearSelection:function(){this.store.clearSelection()},clearFilter:function(e){this.store.clearFilter(e)},clearSort:function(){this.store.clearSort()},handleMouseLeave:function(){this.store.commit("setHoverRow",null),this.hoverState&&(this.hoverState=null)},updateScrollY:function(){this.layout.updateScrollY()&&(this.layout.notifyObservers("scrollable"),this.layout.updateColumnsWidth())},handleFixedMousewheel:function(e,n){var t=this.bodyWrapper;if(Math.abs(n.spinY)>0){var i=t.scrollTop;n.pixelY<0&&0!==i&&e.preventDefault(),n.pixelY>0&&t.scrollHeight-t.clientHeight>i&&e.preventDefault(),t.scrollTop+=Math.ceil(n.pixelY/5)}else t.scrollLeft+=Math.ceil(n.pixelX/5)},handleHeaderFooterMousewheel:function(e,n){var t=n.pixelX,i=n.pixelY;Math.abs(t)>=Math.abs(i)&&(this.bodyWrapper.scrollLeft+=n.pixelX/5)},syncPostion:Object(at.throttle)(20,(function(){var e=this.bodyWrapper,n=e.scrollLeft,t=e.scrollTop,i=e.offsetWidth,r=e.scrollWidth,o=this.$refs,a=o.headerWrapper,s=o.footerWrapper,l=o.fixedBodyWrapper,c=o.rightFixedBodyWrapper;a&&(a.scrollLeft=n),s&&(s.scrollLeft=n),l&&(l.scrollTop=t),c&&(c.scrollTop=t);var u=r-i-1;this.scrollPosition=n>=u?"right":0===n?"left":"middle"})),bindEvents:function(){this.bodyWrapper.addEventListener("scroll",this.syncPostion,{passive:!0}),this.fit&&Object(Fn.addResizeListener)(this.$el,this.resizeListener)},unbindEvents:function(){this.bodyWrapper.removeEventListener("scroll",this.syncPostion,{passive:!0}),this.fit&&Object(Fn.removeResizeListener)(this.$el,this.resizeListener)},resizeListener:function(){if(this.$ready){var e=!1,n=this.$el,t=this.resizeState,i=t.width,r=t.height,o=n.offsetWidth;i!==o&&(e=!0);var a=n.offsetHeight;(this.height||this.shouldUpdateHeight)&&r!==a&&(e=!0),e&&(this.resizeState.width=o,this.resizeState.height=a,this.doLayout())}},doLayout:function(){this.shouldUpdateHeight&&this.layout.updateElsHeight(),this.layout.updateColumnsWidth()},sort:function(e,n){this.store.commit("sort",{prop:e,order:n})},toggleAllSelection:function(){this.store.commit("toggleAllSelection")}},computed:Zt({tableSize:function(){return this.size||(this.$ELEMENT||{}).size},bodyWrapper:function(){return this.$refs.bodyWrapper},shouldUpdateHeight:function(){return this.height||this.maxHeight||this.fixedColumns.length>0||this.rightFixedColumns.length>0},bodyWidth:function(){var e=this.layout,n=e.bodyWidth,t=e.scrollY,i=e.gutterWidth;return n?n-(t?i:0)+"px":""},bodyHeight:function(){var e=this.layout,n=e.headerHeight,t=void 0===n?0:n,i=e.bodyHeight,r=e.footerHeight,o=void 0===r?0:r;if(this.height)return{height:i?i+"px":""};if(this.maxHeight){var a=St(this.maxHeight);if("number"==typeof a)return{"max-height":a-o-(this.showHeader?t:0)+"px"}}return{}},fixedBodyHeight:function(){if(this.height)return{height:this.layout.fixedBodyHeight?this.layout.fixedBodyHeight+"px":""};if(this.maxHeight){var e=St(this.maxHeight);if("number"==typeof e)return e=this.layout.scrollX?e-this.layout.gutterWidth:e,this.showHeader&&(e-=this.layout.headerHeight),{"max-height":(e-=this.layout.footerHeight)+"px"}}return{}},fixedHeight:function(){return this.maxHeight?this.showSummary?{bottom:0}:{bottom:this.layout.scrollX&&this.data.length?this.layout.gutterWidth+"px":""}:this.showSummary?{height:this.layout.tableHeight?this.layout.tableHeight+"px":""}:{height:this.layout.viewportHeight?this.layout.viewportHeight+"px":""}},emptyBlockStyle:function(){if(this.data&&this.data.length)return null;var e="100%";return this.layout.appendHeight&&(e="calc(100% - "+this.layout.appendHeight+"px)"),{width:this.bodyWidth,height:e}}},It({selection:"selection",columns:"columns",tableData:"data",fixedColumns:"fixedColumns",rightFixedColumns:"rightFixedColumns"})),watch:{height:{immediate:!0,handler:function(e){this.layout.setHeight(e)}},maxHeight:{immediate:!0,handler:function(e){this.layout.setMaxHeight(e)}},currentRowKey:{immediate:!0,handler:function(e){this.rowKey&&this.store.setCurrentRowKey(e)}},data:{immediate:!0,handler:function(e){this.store.commit("setData",e)}},expandRowKeys:{immediate:!0,handler:function(e){e&&this.store.setExpandRowKeysAdapter(e)}}},created:function(){var e=this;this.tableId="el-table_"+ei++,this.debouncedUpdateLayout=Object(at.debounce)(50,(function(){return e.doLayout()}))},mounted:function(){var e=this;this.bindEvents(),this.store.updateColumns(),this.doLayout(),this.resizeState={width:this.$el.offsetWidth,height:this.$el.offsetHeight},this.store.states.columns.forEach((function(n){n.filteredValue&&n.filteredValue.length&&e.store.commit("filterChange",{column:n,values:n.filteredValue,silent:!0})})),this.$ready=!0},destroyed:function(){this.unbindEvents()},data:function(){var e=this.treeProps,n=e.hasChildren,t=void 0===n?"hasChildren":n,i=e.children,r=void 0===i?"children":i;return this.store=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)throw new Error("Table is required.");var t=new jt;return t.table=e,t.toggleAllSelection=A()(10,t._toggleAllSelection),Object.keys(n).forEach((function(e){t.states[e]=n[e]})),t}(this,{rowKey:this.rowKey,defaultExpandAll:this.defaultExpandAll,selectOnIndeterminate:this.selectOnIndeterminate,indent:this.indent,lazy:this.lazy,lazyColumnIdentifier:t,childrenColumnName:r}),{layout:new Lt({store:this.store,table:this,fit:this.fit,showHeader:this.showHeader}),isHidden:!1,renderExpanded:null,resizeProxyVisible:!1,resizeState:{width:null,height:null},isGroup:!1,scrollPosition:"left"}}},it,[],!1,null,null,null);ni.options.__file="packages/table/src/table.vue";var ti=ni.exports;ti.install=function(e){e.component(ti.name,ti)};var ii=ti,ri={default:{order:""},selection:{width:48,minWidth:48,realWidth:48,order:"",className:"el-table-column--selection"},expand:{width:48,minWidth:48,realWidth:48,order:""},index:{width:48,minWidth:48,realWidth:48,order:""}},oi={selection:{renderHeader:function(e,n){var t=n.store;return e("el-checkbox",{attrs:{disabled:t.states.data&&0===t.states.data.length,indeterminate:t.states.selection.length>0&&!this.isAllSelected,value:this.isAllSelected},nativeOn:{click:this.toggleAllSelection}})},renderCell:function(e,n){var t=n.row,i=n.column,r=n.store,o=n.$index;return e("el-checkbox",{nativeOn:{click:function(e){return e.stopPropagation()}},attrs:{value:r.isSelected(t),disabled:!!i.selectable&&!i.selectable.call(null,t,o)},on:{input:function(){r.commit("rowSelectedChanged",t)}}})},sortable:!1,resizable:!1},index:{renderHeader:function(e,n){return n.column.label||"#"},renderCell:function(e,n){var t=n.$index,i=t+1,r=n.column.index;return"number"==typeof r?i=t+r:"function"==typeof r&&(i=r(t)),e("div",[i])},sortable:!1},expand:{renderHeader:function(e,n){return n.column.label||""},renderCell:function(e,n){var t=n.row,i=n.store,r=["el-table__expand-icon"];i.states.expandRows.indexOf(t)>-1&&r.push("el-table__expand-icon--expanded");return e("div",{class:r,on:{click:function(e){e.stopPropagation(),i.toggleRowExpansion(t)}}},[e("i",{class:"el-icon el-icon-arrow-right"})])},sortable:!1,resizable:!1,className:"el-table__expand-column"}};function ai(e,n){var t=n.row,i=n.column,r=n.$index,o=i.property,a=o&&Object(m.getPropByPath)(t,o).v;return i&&i.formatter?i.formatter(t,i,a,r):a}var si=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},li=1,ci={name:"ElTableColumn",props:{type:{type:String,default:"default"},label:String,className:String,labelClassName:String,property:String,prop:String,width:{},minWidth:{},renderHeader:Function,sortable:{type:[Boolean,String],default:!1},sortMethod:Function,sortBy:[String,Function,Array],resizable:{type:Boolean,default:!0},columnKey:String,align:String,headerAlign:String,showTooltipWhenOverflow:Boolean,showOverflowTooltip:Boolean,fixed:[Boolean,String],formatter:Function,selectable:Function,reserveSelection:Boolean,filterMethod:Function,filteredValue:Array,filters:Array,filterPlacement:String,filterMultiple:{type:Boolean,default:!0},index:[Number,Function],sortOrders:{type:Array,default:function(){return["ascending","descending",null]},validator:function(e){return e.every((function(e){return["ascending","descending",null].indexOf(e)>-1}))}}},data:function(){return{isSubColumn:!1,columns:[]}},computed:{owner:function(){for(var e=this.$parent;e&&!e.tableId;)e=e.$parent;return e},columnOrTableParent:function(){for(var e=this.$parent;e&&!e.tableId&&!e.columnId;)e=e.$parent;return e},realWidth:function(){return _t(this.width)},realMinWidth:function(){return void 0!==(e=this.minWidth)&&(e=_t(e),isNaN(e)&&(e=80)),e;var e},realAlign:function(){return this.align?"is-"+this.align:null},realHeaderAlign:function(){return this.headerAlign?"is-"+this.headerAlign:this.realAlign}},methods:{getPropsData:function(){for(var e=this,n=arguments.length,t=Array(n),i=0;i<n;i++)t[i]=arguments[i];return t.reduce((function(n,t){return Array.isArray(t)&&t.forEach((function(t){n[t]=e[t]})),n}),{})},getColumnElIndex:function(e,n){return[].indexOf.call(e,n)},setColumnWidth:function(e){return this.realWidth&&(e.width=this.realWidth),this.realMinWidth&&(e.minWidth=this.realMinWidth),e.minWidth||(e.minWidth=80),e.realWidth=void 0===e.width?e.minWidth:e.width,e},setColumnForcedProps:function(e){var n=e.type,t=oi[n]||{};return Object.keys(t).forEach((function(n){var i=t[n];void 0!==i&&(e[n]="className"===n?e[n]+" "+i:i)})),e},setColumnRenders:function(e){var n=this;this.$createElement;this.renderHeader?console.warn("[Element Warn][TableColumn]Comparing to render-header, scoped-slot header is easier to use. We recommend users to use scoped-slot header."):"selection"!==e.type&&(e.renderHeader=function(t,i){var r=n.$scopedSlots.header;return r?r(i):e.label});var t=e.renderCell;return"expand"===e.type?(e.renderCell=function(e,n){return e("div",{class:"cell"},[t(e,n)])},this.owner.renderExpanded=function(e,t){return n.$scopedSlots.default?n.$scopedSlots.default(t):n.$slots.default}):(t=t||ai,e.renderCell=function(i,r){var o=null;o=n.$scopedSlots.default?n.$scopedSlots.default(r):t(i,r);var a=function(e,n){var t=n.row,i=n.treeNode,r=n.store;if(!i)return null;var o=[];if(i.indent&&o.push(e("span",{class:"el-table__indent",style:{"padding-left":i.indent+"px"}})),"boolean"!=typeof i.expanded||i.noLazyChildren)o.push(e("span",{class:"el-table__placeholder"}));else{var a=["el-table__expand-icon",i.expanded?"el-table__expand-icon--expanded":""],s=["el-icon-arrow-right"];i.loading&&(s=["el-icon-loading"]),o.push(e("div",{class:a,on:{click:function(e){e.stopPropagation(),r.loadOrToggle(t)}}},[e("i",{class:s})]))}return o}(i,r),s={class:"cell",style:{}};return e.showOverflowTooltip&&(s.class+=" el-tooltip",s.style={width:(r.column.realWidth||r.column.width)-1+"px"}),i("div",s,[a,o])}),e},registerNormalWatchers:function(){var e=this,n={prop:"property",realAlign:"align",realHeaderAlign:"headerAlign",realWidth:"width"},t=["label","property","filters","filterMultiple","sortable","index","formatter","className","labelClassName","showOverflowTooltip"].reduce((function(e,n){return e[n]=n,e}),n);Object.keys(t).forEach((function(t){var i=n[t];e.$watch(t,(function(n){e.columnConfig[i]=n}))}))},registerComplexWatchers:function(){var e=this,n={realWidth:"width",realMinWidth:"minWidth"},t=["fixed"].reduce((function(e,n){return e[n]=n,e}),n);Object.keys(t).forEach((function(t){var i=n[t];e.$watch(t,(function(n){e.columnConfig[i]=n;var t="fixed"===i;e.owner.store.scheduleLayout(t)}))}))}},components:{ElCheckbox:ot.a},beforeCreate:function(){this.row={},this.column={},this.$index=0,this.columnId=""},created:function(){var e=this.columnOrTableParent;this.isSubColumn=this.owner!==e,this.columnId=(e.tableId||e.columnId)+"_column_"+li++;var n=this.type||"default",t=""===this.sortable||this.sortable,i=si({},ri[n],{id:this.columnId,type:n,property:this.prop||this.property,align:this.realAlign,headerAlign:this.realHeaderAlign,showOverflowTooltip:this.showOverflowTooltip||this.showTooltipWhenOverflow,filterable:this.filters||this.filterMethod,filteredValue:[],filterPlacement:"",isColumnGroup:!1,filterOpened:!1,sortable:t,index:this.index}),r=this.getPropsData(["columnKey","label","className","labelClassName","type","renderHeader","formatter","fixed","resizable"],["sortMethod","sortBy","sortOrders"],["selectable","reserveSelection"],["filterMethod","filters","filterMultiple","filterOpened","filteredValue","filterPlacement"]);r=function(e,n){var t={},i=void 0;for(i in e)t[i]=e[i];for(i in n)if(xt(n,i)){var r=n[i];void 0!==r&&(t[i]=r)}return t}(i,r),r=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return 0===n.length?function(e){return e}:1===n.length?n[0]:n.reduce((function(e,n){return function(){return e(n.apply(void 0,arguments))}}))}(this.setColumnRenders,this.setColumnWidth,this.setColumnForcedProps)(r),this.columnConfig=r,this.registerNormalWatchers(),this.registerComplexWatchers()},mounted:function(){var e=this.owner,n=this.columnOrTableParent,t=this.isSubColumn?n.$el.children:n.$refs.hiddenColumns.children,i=this.getColumnElIndex(t,this.$el);e.store.commit("insertColumn",this.columnConfig,i,this.isSubColumn?n.columnConfig:null)},destroyed:function(){if(this.$parent){var e=this.$parent;this.owner.store.commit("removeColumn",this.columnConfig,this.isSubColumn?e.columnConfig:null)}},render:function(e){return e("div",this.$slots.default)},install:function(e){e.component(ci.name,ci)}},ui=ci,di=function(){var e=this,n=e.$createElement,t=e._self._c||n;return e.ranged?t("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleClose,expression:"handleClose"}],ref:"reference",staticClass:"el-date-editor el-range-editor el-input__inner",class:["el-date-editor--"+e.type,e.pickerSize?"el-range-editor--"+e.pickerSize:"",e.pickerDisabled?"is-disabled":"",e.pickerVisible?"is-active":""],on:{click:e.handleRangeClick,mouseenter:e.handleMouseEnter,mouseleave:function(n){e.showClose=!1},keydown:e.handleKeydown}},[t("i",{class:["el-input__icon","el-range__icon",e.triggerClass]}),t("input",e._b({staticClass:"el-range-input",attrs:{autocomplete:"off",placeholder:e.startPlaceholder,disabled:e.pickerDisabled,readonly:!e.editable||e.readonly,name:e.name&&e.name[0]},domProps:{value:e.displayValue&&e.displayValue[0]},on:{input:e.handleStartInput,change:e.handleStartChange,focus:e.handleFocus}},"input",e.firstInputId,!1)),e._t("range-separator",[t("span",{staticClass:"el-range-separator"},[e._v(e._s(e.rangeSeparator))])]),t("input",e._b({staticClass:"el-range-input",attrs:{autocomplete:"off",placeholder:e.endPlaceholder,disabled:e.pickerDisabled,readonly:!e.editable||e.readonly,name:e.name&&e.name[1]},domProps:{value:e.displayValue&&e.displayValue[1]},on:{input:e.handleEndInput,change:e.handleEndChange,focus:e.handleFocus}},"input",e.secondInputId,!1)),e.haveTrigger?t("i",{staticClass:"el-input__icon el-range__close-icon",class:[e.showClose?""+e.clearIcon:""],on:{click:e.handleClickIcon}}):e._e()],2):t("el-input",e._b({directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleClose,expression:"handleClose"}],ref:"reference",staticClass:"el-date-editor",class:"el-date-editor--"+e.type,attrs:{readonly:!e.editable||e.readonly||"dates"===e.type||"week"===e.type,disabled:e.pickerDisabled,size:e.pickerSize,name:e.name,placeholder:e.placeholder,value:e.displayValue,validateEvent:!1},on:{focus:e.handleFocus,input:function(n){return e.userInput=n},change:e.handleChange},nativeOn:{keydown:function(n){return e.handleKeydown(n)},mouseenter:function(n){return e.handleMouseEnter(n)},mouseleave:function(n){e.showClose=!1}}},"el-input",e.firstInputId,!1),[t("i",{staticClass:"el-input__icon",class:e.triggerClass,attrs:{slot:"prefix"},on:{click:e.handleFocus},slot:"prefix"}),e.haveTrigger?t("i",{staticClass:"el-input__icon",class:[e.showClose?""+e.clearIcon:""],attrs:{slot:"suffix"},on:{click:e.handleClickIcon},slot:"suffix"}):e._e()])};di._withStripped=!0;var hi=t(0),pi={props:{appendToBody:L.a.props.appendToBody,offset:L.a.props.offset,boundariesPadding:L.a.props.boundariesPadding,arrowOffset:L.a.props.arrowOffset},methods:L.a.methods,data:function(){return ze()({visibleArrow:!0},L.a.data)},beforeDestroy:L.a.beforeDestroy},fi={date:"yyyy-MM-dd",month:"yyyy-MM",datetime:"yyyy-MM-dd HH:mm:ss",time:"HH:mm:ss",week:"yyyywWW",timerange:"HH:mm:ss",daterange:"yyyy-MM-dd",monthrange:"yyyy-MM",datetimerange:"yyyy-MM-dd HH:mm:ss",year:"yyyy"},mi=["date","datetime","time","time-select","week","month","year","daterange","monthrange","timerange","datetimerange","dates"],gi=function(e,n){return"timestamp"===n?e.getTime():Object(hi.formatDate)(e,n)},vi=function(e,n){return"timestamp"===n?new Date(Number(e)):Object(hi.parseDate)(e,n)},bi=function(e,n){if(Array.isArray(e)&&2===e.length){var t=e[0],i=e[1];if(t&&i)return[gi(t,n),gi(i,n)]}return""},yi=function(e,n,t){if(Array.isArray(e)||(e=e.split(t)),2===e.length){var i=e[0],r=e[1];return[vi(i,n),vi(r,n)]}return[]},wi={default:{formatter:function(e){return e?""+e:""},parser:function(e){return void 0===e||""===e?null:e}},week:{formatter:function(e,n){var t=Object(hi.getWeekNumber)(e),i=e.getMonth(),r=new Date(e);1===t&&11===i&&(r.setHours(0,0,0,0),r.setDate(r.getDate()+3-(r.getDay()+6)%7));var o=Object(hi.formatDate)(r,n);return o=/WW/.test(o)?o.replace(/WW/,t<10?"0"+t:t):o.replace(/W/,t)},parser:function(e,n){return wi.date.parser(e,n)}},date:{formatter:gi,parser:vi},datetime:{formatter:gi,parser:vi},daterange:{formatter:bi,parser:yi},monthrange:{formatter:bi,parser:yi},datetimerange:{formatter:bi,parser:yi},timerange:{formatter:bi,parser:yi},time:{formatter:gi,parser:vi},month:{formatter:gi,parser:vi},year:{formatter:gi,parser:vi},number:{formatter:function(e){return e?""+e:""},parser:function(e){var n=Number(e);return isNaN(e)?null:n}},dates:{formatter:function(e,n){return e.map((function(e){return gi(e,n)}))},parser:function(e,n){return("string"==typeof e?e.split(", "):e).map((function(e){return e instanceof Date?e:vi(e,n)}))}}},xi={left:"bottom-start",center:"bottom",right:"bottom-end"},_i=function(e,n,t){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"-";if(!e)return null;var r=(wi[t]||wi.default).parser,o=n||fi[t];return r(e,o,i)},Si=function(e,n,t){return e?(0,(wi[t]||wi.default).formatter)(e,n||fi[t]):null},ki=function(e,n){var t=function(e,n){var t=e instanceof Date,i=n instanceof Date;return t&&i?e.getTime()===n.getTime():!t&&!i&&e===n},i=e instanceof Array,r=n instanceof Array;return i&&r?e.length===n.length&&e.every((function(e,i){return t(e,n[i])})):!i&&!r&&t(e,n)},Ci=function(e){return"string"==typeof e||e instanceof String},Ei=function(e){return null==e||Ci(e)||Array.isArray(e)&&2===e.length&&e.every(Ci)},Ti=r({mixins:[k.a,pi],inject:{elForm:{default:""},elFormItem:{default:""}},props:{size:String,format:String,valueFormat:String,readonly:Boolean,placeholder:String,startPlaceholder:String,endPlaceholder:String,prefixIcon:String,clearIcon:{type:String,default:"el-icon-circle-close"},name:{default:"",validator:Ei},disabled:Boolean,clearable:{type:Boolean,default:!0},id:{default:"",validator:Ei},popperClass:String,editable:{type:Boolean,default:!0},align:{type:String,default:"left"},value:{},defaultValue:{},defaultTime:{},rangeSeparator:{default:"-"},pickerOptions:{},unlinkPanels:Boolean,validateEvent:{type:Boolean,default:!0}},components:{ElInput:h.a},directives:{Clickoutside:I.a},data:function(){return{pickerVisible:!1,showClose:!1,userInput:null,valueOnOpen:null,unwatchPickerOptions:null}},watch:{pickerVisible:function(e){this.readonly||this.pickerDisabled||(e?(this.showPicker(),this.valueOnOpen=Array.isArray(this.value)?[].concat(this.value):this.value):(this.hidePicker(),this.emitChange(this.value),this.userInput=null,this.validateEvent&&this.dispatch("ElFormItem","el.form.blur"),this.$emit("blur",this),this.blur()))},parsedValue:{immediate:!0,handler:function(e){this.picker&&(this.picker.value=e)}},defaultValue:function(e){this.picker&&(this.picker.defaultValue=e)},value:function(e,n){ki(e,n)||this.pickerVisible||!this.validateEvent||this.dispatch("ElFormItem","el.form.change",e)}},computed:{ranged:function(){return this.type.indexOf("range")>-1},reference:function(){var e=this.$refs.reference;return e.$el||e},refInput:function(){return this.reference?[].slice.call(this.reference.querySelectorAll("input")):[]},valueIsEmpty:function(){var e=this.value;if(Array.isArray(e)){for(var n=0,t=e.length;n<t;n++)if(e[n])return!1}else if(e)return!1;return!0},triggerClass:function(){return this.prefixIcon||(-1!==this.type.indexOf("time")?"el-icon-time":"el-icon-date")},selectionMode:function(){return"week"===this.type?"week":"month"===this.type?"month":"year"===this.type?"year":"dates"===this.type?"dates":"day"},haveTrigger:function(){return void 0!==this.showTrigger?this.showTrigger:-1!==mi.indexOf(this.type)},displayValue:function(){var e=Si(this.parsedValue,this.format,this.type,this.rangeSeparator);return Array.isArray(this.userInput)?[this.userInput[0]||e&&e[0]||"",this.userInput[1]||e&&e[1]||""]:null!==this.userInput?this.userInput:e?"dates"===this.type?e.join(", "):e:""},parsedValue:function(){return this.value?"time-select"===this.type||Object(hi.isDateObject)(this.value)||Array.isArray(this.value)&&this.value.every(hi.isDateObject)?this.value:this.valueFormat?_i(this.value,this.valueFormat,this.type,this.rangeSeparator)||this.value:Array.isArray(this.value)?this.value.map((function(e){return new Date(e)})):new Date(this.value):this.value},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},pickerSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},pickerDisabled:function(){return this.disabled||(this.elForm||{}).disabled},firstInputId:function(){var e={},n=void 0;return(n=this.ranged?this.id&&this.id[0]:this.id)&&(e.id=n),e},secondInputId:function(){var e={},n=void 0;return this.ranged&&(n=this.id&&this.id[1]),n&&(e.id=n),e}},created:function(){this.popperOptions={boundariesPadding:0,gpuAcceleration:!1},this.placement=xi[this.align]||xi.left,this.$on("fieldReset",this.handleFieldReset)},methods:{focus:function(){this.ranged?this.handleFocus():this.$refs.reference.focus()},blur:function(){this.refInput.forEach((function(e){return e.blur()}))},parseValue:function(e){var n=Object(hi.isDateObject)(e)||Array.isArray(e)&&e.every(hi.isDateObject);return this.valueFormat&&!n&&_i(e,this.valueFormat,this.type,this.rangeSeparator)||e},formatToValue:function(e){var n=Object(hi.isDateObject)(e)||Array.isArray(e)&&e.every(hi.isDateObject);return this.valueFormat&&n?Si(e,this.valueFormat,this.type,this.rangeSeparator):e},parseString:function(e){var n=Array.isArray(e)?this.type:this.type.replace("range","");return _i(e,this.format,n)},formatToString:function(e){var n=Array.isArray(e)?this.type:this.type.replace("range","");return Si(e,this.format,n)},handleMouseEnter:function(){this.readonly||this.pickerDisabled||!this.valueIsEmpty&&this.clearable&&(this.showClose=!0)},handleChange:function(){if(this.userInput){var e=this.parseString(this.displayValue);e&&(this.picker.value=e,this.isValidValue(e)&&(this.emitInput(e),this.userInput=null))}""===this.userInput&&(this.emitInput(null),this.emitChange(null),this.userInput=null)},handleStartInput:function(e){this.userInput?this.userInput=[e.target.value,this.userInput[1]]:this.userInput=[e.target.value,null]},handleEndInput:function(e){this.userInput?this.userInput=[this.userInput[0],e.target.value]:this.userInput=[null,e.target.value]},handleStartChange:function(e){var n=this.parseString(this.userInput&&this.userInput[0]);if(n){this.userInput=[this.formatToString(n),this.displayValue[1]];var t=[n,this.picker.value&&this.picker.value[1]];this.picker.value=t,this.isValidValue(t)&&(this.emitInput(t),this.userInput=null)}},handleEndChange:function(e){var n=this.parseString(this.userInput&&this.userInput[1]);if(n){this.userInput=[this.displayValue[0],this.formatToString(n)];var t=[this.picker.value&&this.picker.value[0],n];this.picker.value=t,this.isValidValue(t)&&(this.emitInput(t),this.userInput=null)}},handleClickIcon:function(e){this.readonly||this.pickerDisabled||(this.showClose?(this.valueOnOpen=this.value,e.stopPropagation(),this.emitInput(null),this.emitChange(null),this.showClose=!1,this.picker&&"function"==typeof this.picker.handleClear&&this.picker.handleClear()):this.pickerVisible=!this.pickerVisible)},handleClose:function(){if(this.pickerVisible&&(this.pickerVisible=!1,"dates"===this.type)){var e=_i(this.valueOnOpen,this.valueFormat,this.type,this.rangeSeparator)||this.valueOnOpen;this.emitInput(e)}},handleFieldReset:function(e){this.userInput=""===e?null:e},handleFocus:function(){var e=this.type;-1===mi.indexOf(e)||this.pickerVisible||(this.pickerVisible=!0),this.$emit("focus",this)},handleKeydown:function(e){var n=this,t=e.keyCode;return 27===t?(this.pickerVisible=!1,void e.stopPropagation()):9!==t?13===t?((""===this.userInput||this.isValidValue(this.parseString(this.displayValue)))&&(this.handleChange(),this.pickerVisible=this.picker.visible=!1,this.blur()),void e.stopPropagation()):void(this.userInput?e.stopPropagation():this.picker&&this.picker.handleKeydown&&this.picker.handleKeydown(e)):void(this.ranged?setTimeout((function(){-1===n.refInput.indexOf(document.activeElement)&&(n.pickerVisible=!1,n.blur(),e.stopPropagation())}),0):(this.handleChange(),this.pickerVisible=this.picker.visible=!1,this.blur(),e.stopPropagation()))},handleRangeClick:function(){var e=this.type;-1===mi.indexOf(e)||this.pickerVisible||(this.pickerVisible=!0),this.$emit("focus",this)},hidePicker:function(){this.picker&&(this.picker.resetView&&this.picker.resetView(),this.pickerVisible=this.picker.visible=!1,this.destroyPopper())},showPicker:function(){var e=this;this.$isServer||(this.picker||this.mountPicker(),this.pickerVisible=this.picker.visible=!0,this.updatePopper(),this.picker.value=this.parsedValue,this.picker.resetView&&this.picker.resetView(),this.$nextTick((function(){e.picker.adjustSpinners&&e.picker.adjustSpinners()})))},mountPicker:function(){var e=this;this.picker=new ht.a(this.panel).$mount(),this.picker.defaultValue=this.defaultValue,this.picker.defaultTime=this.defaultTime,this.picker.popperClass=this.popperClass,this.popperElm=this.picker.$el,this.picker.width=this.reference.getBoundingClientRect().width,this.picker.showTime="datetime"===this.type||"datetimerange"===this.type,this.picker.selectionMode=this.selectionMode,this.picker.unlinkPanels=this.unlinkPanels,this.picker.arrowControl=this.arrowControl||this.timeArrowControl||!1,this.$watch("format",(function(n){e.picker.format=n}));var n=function(){var n=e.pickerOptions;if(n&&n.selectableRange){var t=n.selectableRange,i=wi.datetimerange.parser,r=fi.timerange;t=Array.isArray(t)?t:[t],e.picker.selectableRange=t.map((function(n){return i(n,r,e.rangeSeparator)}))}for(var o in n)n.hasOwnProperty(o)&&"selectableRange"!==o&&(e.picker[o]=n[o]);e.format&&(e.picker.format=e.format)};n(),this.unwatchPickerOptions=this.$watch("pickerOptions",(function(){return n()}),{deep:!0}),this.$el.appendChild(this.picker.$el),this.picker.resetView&&this.picker.resetView(),this.picker.$on("dodestroy",this.doDestroy),this.picker.$on("pick",(function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.userInput=null,e.pickerVisible=e.picker.visible=t,e.emitInput(n),e.picker.resetView&&e.picker.resetView()})),this.picker.$on("select-range",(function(n,t,i){0!==e.refInput.length&&(i&&"min"!==i?"max"===i&&(e.refInput[1].setSelectionRange(n,t),e.refInput[1].focus()):(e.refInput[0].setSelectionRange(n,t),e.refInput[0].focus()))}))},unmountPicker:function(){this.picker&&(this.picker.$destroy(),this.picker.$off(),"function"==typeof this.unwatchPickerOptions&&this.unwatchPickerOptions(),this.picker.$el.parentNode.removeChild(this.picker.$el))},emitChange:function(e){ki(e,this.valueOnOpen)||(this.$emit("change",e),this.valueOnOpen=e,this.validateEvent&&this.dispatch("ElFormItem","el.form.change",e))},emitInput:function(e){var n=this.formatToValue(e);ki(this.value,n)||this.$emit("input",n)},isValidValue:function(e){return this.picker||this.mountPicker(),!this.picker.isValidValue||e&&this.picker.isValidValue(e)}}},di,[],!1,null,null,null);Ti.options.__file="packages/date-picker/src/picker.vue";var Pi=Ti.exports,Oi=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-enter":e.handleEnter,"after-leave":e.handleLeave}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-picker-panel el-date-picker el-popper",class:[{"has-sidebar":e.$slots.sidebar||e.shortcuts,"has-time":e.showTime},e.popperClass]},[t("div",{staticClass:"el-picker-panel__body-wrapper"},[e._t("sidebar"),e.shortcuts?t("div",{staticClass:"el-picker-panel__sidebar"},e._l(e.shortcuts,(function(n,i){return t("button",{key:i,staticClass:"el-picker-panel__shortcut",attrs:{type:"button"},on:{click:function(t){e.handleShortcutClick(n)}}},[e._v(e._s(n.text))])})),0):e._e(),t("div",{staticClass:"el-picker-panel__body"},[e.showTime?t("div",{staticClass:"el-date-picker__time-header"},[t("span",{staticClass:"el-date-picker__editor-wrap"},[t("el-input",{attrs:{placeholder:e.t("el.datepicker.selectDate"),value:e.visibleDate,size:"small"},on:{input:function(n){return e.userInputDate=n},change:e.handleVisibleDateChange}})],1),t("span",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleTimePickClose,expression:"handleTimePickClose"}],staticClass:"el-date-picker__editor-wrap"},[t("el-input",{ref:"input",attrs:{placeholder:e.t("el.datepicker.selectTime"),value:e.visibleTime,size:"small"},on:{focus:function(n){e.timePickerVisible=!0},input:function(n){return e.userInputTime=n},change:e.handleVisibleTimeChange}}),t("time-picker",{ref:"timepicker",attrs:{"time-arrow-control":e.arrowControl,visible:e.timePickerVisible},on:{pick:e.handleTimePick,mounted:e.proxyTimePickerDataProperties}})],1)]):e._e(),t("div",{directives:[{name:"show",rawName:"v-show",value:"time"!==e.currentView,expression:"currentView !== 'time'"}],staticClass:"el-date-picker__header",class:{"el-date-picker__header--bordered":"year"===e.currentView||"month"===e.currentView}},[t("button",{staticClass:"el-picker-panel__icon-btn el-date-picker__prev-btn el-icon-d-arrow-left",attrs:{type:"button","aria-label":e.t("el.datepicker.prevYear")},on:{click:e.prevYear}}),t("button",{directives:[{name:"show",rawName:"v-show",value:"date"===e.currentView,expression:"currentView === 'date'"}],staticClass:"el-picker-panel__icon-btn el-date-picker__prev-btn el-icon-arrow-left",attrs:{type:"button","aria-label":e.t("el.datepicker.prevMonth")},on:{click:e.prevMonth}}),t("span",{staticClass:"el-date-picker__header-label",attrs:{role:"button"},on:{click:e.showYearPicker}},[e._v(e._s(e.yearLabel))]),t("span",{directives:[{name:"show",rawName:"v-show",value:"date"===e.currentView,expression:"currentView === 'date'"}],staticClass:"el-date-picker__header-label",class:{active:"month"===e.currentView},attrs:{role:"button"},on:{click:e.showMonthPicker}},[e._v(e._s(e.t("el.datepicker.month"+(e.month+1))))]),t("button",{staticClass:"el-picker-panel__icon-btn el-date-picker__next-btn el-icon-d-arrow-right",attrs:{type:"button","aria-label":e.t("el.datepicker.nextYear")},on:{click:e.nextYear}}),t("button",{directives:[{name:"show",rawName:"v-show",value:"date"===e.currentView,expression:"currentView === 'date'"}],staticClass:"el-picker-panel__icon-btn el-date-picker__next-btn el-icon-arrow-right",attrs:{type:"button","aria-label":e.t("el.datepicker.nextMonth")},on:{click:e.nextMonth}})]),t("div",{staticClass:"el-picker-panel__content"},[t("date-table",{directives:[{name:"show",rawName:"v-show",value:"date"===e.currentView,expression:"currentView === 'date'"}],attrs:{"selection-mode":e.selectionMode,"first-day-of-week":e.firstDayOfWeek,value:e.value,"default-value":e.defaultValue?new Date(e.defaultValue):null,date:e.date,"cell-class-name":e.cellClassName,"disabled-date":e.disabledDate},on:{pick:e.handleDatePick}}),t("year-table",{directives:[{name:"show",rawName:"v-show",value:"year"===e.currentView,expression:"currentView === 'year'"}],attrs:{value:e.value,"default-value":e.defaultValue?new Date(e.defaultValue):null,date:e.date,"disabled-date":e.disabledDate},on:{pick:e.handleYearPick}}),t("month-table",{directives:[{name:"show",rawName:"v-show",value:"month"===e.currentView,expression:"currentView === 'month'"}],attrs:{value:e.value,"default-value":e.defaultValue?new Date(e.defaultValue):null,date:e.date,"disabled-date":e.disabledDate},on:{pick:e.handleMonthPick}})],1)])],2),t("div",{directives:[{name:"show",rawName:"v-show",value:e.footerVisible&&"date"===e.currentView,expression:"footerVisible && currentView === 'date'"}],staticClass:"el-picker-panel__footer"},[t("el-button",{directives:[{name:"show",rawName:"v-show",value:"dates"!==e.selectionMode,expression:"selectionMode !== 'dates'"}],staticClass:"el-picker-panel__link-btn",attrs:{size:"mini",type:"text"},on:{click:e.changeToNow}},[e._v("\n        "+e._s(e.t("el.datepicker.now"))+"\n      ")]),t("el-button",{staticClass:"el-picker-panel__link-btn",attrs:{plain:"",size:"mini"},on:{click:e.confirm}},[e._v("\n        "+e._s(e.t("el.datepicker.confirm"))+"\n      ")])],1)])])};Oi._withStripped=!0;var Ai=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":function(n){e.$emit("dodestroy")}}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-time-panel el-popper",class:e.popperClass},[t("div",{staticClass:"el-time-panel__content",class:{"has-seconds":e.showSeconds}},[t("time-spinner",{ref:"spinner",attrs:{"arrow-control":e.useArrow,"show-seconds":e.showSeconds,"am-pm-mode":e.amPmMode,date:e.date},on:{change:e.handleChange,"select-range":e.setSelectionRange}})],1),t("div",{staticClass:"el-time-panel__footer"},[t("button",{staticClass:"el-time-panel__btn cancel",attrs:{type:"button"},on:{click:e.handleCancel}},[e._v(e._s(e.t("el.datepicker.cancel")))]),t("button",{staticClass:"el-time-panel__btn",class:{confirm:!e.disabled},attrs:{type:"button"},on:{click:function(n){e.handleConfirm()}}},[e._v(e._s(e.t("el.datepicker.confirm")))])])])])};Ai._withStripped=!0;var ji=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"el-time-spinner",class:{"has-seconds":e.showSeconds}},[e.arrowControl?e._e():[t("el-scrollbar",{ref:"hours",staticClass:"el-time-spinner__wrapper",attrs:{"wrap-style":"max-height: inherit;","view-class":"el-time-spinner__list",noresize:"",tag:"ul"},nativeOn:{mouseenter:function(n){e.emitSelectRange("hours")},mousemove:function(n){e.adjustCurrentSpinner("hours")}}},e._l(e.hoursList,(function(n,i){return t("li",{key:i,staticClass:"el-time-spinner__item",class:{active:i===e.hours,disabled:n},on:{click:function(t){e.handleClick("hours",{value:i,disabled:n})}}},[e._v(e._s(("0"+(e.amPmMode?i%12||12:i)).slice(-2))+e._s(e.amPm(i)))])})),0),t("el-scrollbar",{ref:"minutes",staticClass:"el-time-spinner__wrapper",attrs:{"wrap-style":"max-height: inherit;","view-class":"el-time-spinner__list",noresize:"",tag:"ul"},nativeOn:{mouseenter:function(n){e.emitSelectRange("minutes")},mousemove:function(n){e.adjustCurrentSpinner("minutes")}}},e._l(e.minutesList,(function(n,i){return t("li",{key:i,staticClass:"el-time-spinner__item",class:{active:i===e.minutes,disabled:!n},on:{click:function(n){e.handleClick("minutes",{value:i,disabled:!1})}}},[e._v(e._s(("0"+i).slice(-2)))])})),0),t("el-scrollbar",{directives:[{name:"show",rawName:"v-show",value:e.showSeconds,expression:"showSeconds"}],ref:"seconds",staticClass:"el-time-spinner__wrapper",attrs:{"wrap-style":"max-height: inherit;","view-class":"el-time-spinner__list",noresize:"",tag:"ul"},nativeOn:{mouseenter:function(n){e.emitSelectRange("seconds")},mousemove:function(n){e.adjustCurrentSpinner("seconds")}}},e._l(60,(function(n,i){return t("li",{key:i,staticClass:"el-time-spinner__item",class:{active:i===e.seconds},on:{click:function(n){e.handleClick("seconds",{value:i,disabled:!1})}}},[e._v(e._s(("0"+i).slice(-2)))])})),0)],e.arrowControl?[t("div",{staticClass:"el-time-spinner__wrapper is-arrow",on:{mouseenter:function(n){e.emitSelectRange("hours")}}},[t("i",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.decrease,expression:"decrease"}],staticClass:"el-time-spinner__arrow el-icon-arrow-up"}),t("i",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.increase,expression:"increase"}],staticClass:"el-time-spinner__arrow el-icon-arrow-down"}),t("ul",{ref:"hours",staticClass:"el-time-spinner__list"},e._l(e.arrowHourList,(function(n,i){return t("li",{key:i,staticClass:"el-time-spinner__item",class:{active:n===e.hours,disabled:e.hoursList[n]}},[e._v(e._s(void 0===n?"":("0"+(e.amPmMode?n%12||12:n)).slice(-2)+e.amPm(n)))])})),0)]),t("div",{staticClass:"el-time-spinner__wrapper is-arrow",on:{mouseenter:function(n){e.emitSelectRange("minutes")}}},[t("i",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.decrease,expression:"decrease"}],staticClass:"el-time-spinner__arrow el-icon-arrow-up"}),t("i",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.increase,expression:"increase"}],staticClass:"el-time-spinner__arrow el-icon-arrow-down"}),t("ul",{ref:"minutes",staticClass:"el-time-spinner__list"},e._l(e.arrowMinuteList,(function(n,i){return t("li",{key:i,staticClass:"el-time-spinner__item",class:{active:n===e.minutes}},[e._v("\n          "+e._s(void 0===n?"":("0"+n).slice(-2))+"\n        ")])})),0)]),e.showSeconds?t("div",{staticClass:"el-time-spinner__wrapper is-arrow",on:{mouseenter:function(n){e.emitSelectRange("seconds")}}},[t("i",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.decrease,expression:"decrease"}],staticClass:"el-time-spinner__arrow el-icon-arrow-up"}),t("i",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.increase,expression:"increase"}],staticClass:"el-time-spinner__arrow el-icon-arrow-down"}),t("ul",{ref:"seconds",staticClass:"el-time-spinner__list"},e._l(e.arrowSecondList,(function(n,i){return t("li",{key:i,staticClass:"el-time-spinner__item",class:{active:n===e.seconds}},[e._v("\n          "+e._s(void 0===n?"":("0"+n).slice(-2))+"\n        ")])})),0)]):e._e()]:e._e()],2)};ji._withStripped=!0;var Ii=r({components:{ElScrollbar:$.a},directives:{repeatClick:Ye},props:{date:{},defaultValue:{},showSeconds:{type:Boolean,default:!0},arrowControl:Boolean,amPmMode:{type:String,default:""}},computed:{hours:function(){return this.date.getHours()},minutes:function(){return this.date.getMinutes()},seconds:function(){return this.date.getSeconds()},hoursList:function(){return Object(hi.getRangeHours)(this.selectableRange)},minutesList:function(){return Object(hi.getRangeMinutes)(this.selectableRange,this.hours)},arrowHourList:function(){var e=this.hours;return[e>0?e-1:void 0,e,e<23?e+1:void 0]},arrowMinuteList:function(){var e=this.minutes;return[e>0?e-1:void 0,e,e<59?e+1:void 0]},arrowSecondList:function(){var e=this.seconds;return[e>0?e-1:void 0,e,e<59?e+1:void 0]}},data:function(){return{selectableRange:[],currentScrollbar:null}},mounted:function(){var e=this;this.$nextTick((function(){!e.arrowControl&&e.bindScrollEvent()}))},methods:{increase:function(){this.scrollDown(1)},decrease:function(){this.scrollDown(-1)},modifyDateField:function(e,n){switch(e){case"hours":this.$emit("change",Object(hi.modifyTime)(this.date,n,this.minutes,this.seconds));break;case"minutes":this.$emit("change",Object(hi.modifyTime)(this.date,this.hours,n,this.seconds));break;case"seconds":this.$emit("change",Object(hi.modifyTime)(this.date,this.hours,this.minutes,n))}},handleClick:function(e,n){var t=n.value;n.disabled||(this.modifyDateField(e,t),this.emitSelectRange(e),this.adjustSpinner(e,t))},emitSelectRange:function(e){"hours"===e?this.$emit("select-range",0,2):"minutes"===e?this.$emit("select-range",3,5):"seconds"===e&&this.$emit("select-range",6,8),this.currentScrollbar=e},bindScrollEvent:function(){var e=this,n=function(n){e.$refs[n].wrap.onscroll=function(t){e.handleScroll(n,t)}};n("hours"),n("minutes"),n("seconds")},handleScroll:function(e){var n=Math.min(Math.round((this.$refs[e].wrap.scrollTop-(.5*this.scrollBarHeight(e)-10)/this.typeItemHeight(e)+3)/this.typeItemHeight(e)),"hours"===e?23:59);this.modifyDateField(e,n)},adjustSpinners:function(){this.adjustSpinner("hours",this.hours),this.adjustSpinner("minutes",this.minutes),this.adjustSpinner("seconds",this.seconds)},adjustCurrentSpinner:function(e){this.adjustSpinner(e,this[e])},adjustSpinner:function(e,n){if(!this.arrowControl){var t=this.$refs[e].wrap;t&&(t.scrollTop=Math.max(0,n*this.typeItemHeight(e)))}},scrollDown:function(e){var n=this;this.currentScrollbar||this.emitSelectRange("hours");var t=this.currentScrollbar,i=this.hoursList,r=this[t];if("hours"===this.currentScrollbar){var o=Math.abs(e);e=e>0?1:-1;for(var a=i.length;a--&&o;)i[r=(r+e+i.length)%i.length]||o--;if(i[r])return}else r=(r+e+60)%60;this.modifyDateField(t,r),this.adjustSpinner(t,r),this.$nextTick((function(){return n.emitSelectRange(n.currentScrollbar)}))},amPm:function(e){if(!("a"===this.amPmMode.toLowerCase()))return"";var n=e<12?" am":" pm";return"A"===this.amPmMode&&(n=n.toUpperCase()),n},typeItemHeight:function(e){return this.$refs[e].$el.querySelector("li").offsetHeight},scrollBarHeight:function(e){return this.$refs[e].$el.offsetHeight}}},ji,[],!1,null,null,null);Ii.options.__file="packages/date-picker/src/basic/time-spinner.vue";var Di=Ii.exports,Mi=r({mixins:[f.a],components:{TimeSpinner:Di},props:{visible:Boolean,timeArrowControl:Boolean},watch:{visible:function(e){var n=this;e?(this.oldValue=this.value,this.$nextTick((function(){return n.$refs.spinner.emitSelectRange("hours")}))):this.needInitAdjust=!0},value:function(e){var n=this,t=void 0;e instanceof Date?t=Object(hi.limitTimeRange)(e,this.selectableRange,this.format):e||(t=this.defaultValue?new Date(this.defaultValue):new Date),this.date=t,this.visible&&this.needInitAdjust&&(this.$nextTick((function(e){return n.adjustSpinners()})),this.needInitAdjust=!1)},selectableRange:function(e){this.$refs.spinner.selectableRange=e},defaultValue:function(e){Object(hi.isDate)(this.value)||(this.date=e?new Date(e):new Date)}},data:function(){return{popperClass:"",format:"HH:mm:ss",value:"",defaultValue:null,date:new Date,oldValue:new Date,selectableRange:[],selectionRange:[0,2],disabled:!1,arrowControl:!1,needInitAdjust:!0}},computed:{showSeconds:function(){return-1!==(this.format||"").indexOf("ss")},useArrow:function(){return this.arrowControl||this.timeArrowControl||!1},amPmMode:function(){return-1!==(this.format||"").indexOf("A")?"A":-1!==(this.format||"").indexOf("a")?"a":""}},methods:{handleCancel:function(){this.$emit("pick",this.oldValue,!1)},handleChange:function(e){this.visible&&(this.date=Object(hi.clearMilliseconds)(e),this.isValidValue(this.date)&&this.$emit("pick",this.date,!0))},setSelectionRange:function(e,n){this.$emit("select-range",e,n),this.selectionRange=[e,n]},handleConfirm:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments[1];if(!n){var t=Object(hi.clearMilliseconds)(Object(hi.limitTimeRange)(this.date,this.selectableRange,this.format));this.$emit("pick",t,e,n)}},handleKeydown:function(e){var n=e.keyCode,t={38:-1,40:1,37:-1,39:1};if(37===n||39===n){var i=t[n];return this.changeSelectionRange(i),void e.preventDefault()}if(38===n||40===n){var r=t[n];return this.$refs.spinner.scrollDown(r),void e.preventDefault()}},isValidValue:function(e){return Object(hi.timeWithinRange)(e,this.selectableRange,this.format)},adjustSpinners:function(){return this.$refs.spinner.adjustSpinners()},changeSelectionRange:function(e){var n=[0,3].concat(this.showSeconds?[6]:[]),t=["hours","minutes"].concat(this.showSeconds?["seconds"]:[]),i=(n.indexOf(this.selectionRange[0])+e+n.length)%n.length;this.$refs.spinner.emitSelectRange(t[i])}},mounted:function(){var e=this;this.$nextTick((function(){return e.handleConfirm(!0,!0)})),this.$emit("mounted")}},Ai,[],!1,null,null,null);Mi.options.__file="packages/date-picker/src/panel/time.vue";var Li=Mi.exports,Ni=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("table",{staticClass:"el-year-table",on:{click:e.handleYearTableClick}},[t("tbody",[t("tr",[t("td",{staticClass:"available",class:e.getCellStyle(e.startYear+0)},[t("a",{staticClass:"cell"},[e._v(e._s(e.startYear))])]),t("td",{staticClass:"available",class:e.getCellStyle(e.startYear+1)},[t("a",{staticClass:"cell"},[e._v(e._s(e.startYear+1))])]),t("td",{staticClass:"available",class:e.getCellStyle(e.startYear+2)},[t("a",{staticClass:"cell"},[e._v(e._s(e.startYear+2))])]),t("td",{staticClass:"available",class:e.getCellStyle(e.startYear+3)},[t("a",{staticClass:"cell"},[e._v(e._s(e.startYear+3))])])]),t("tr",[t("td",{staticClass:"available",class:e.getCellStyle(e.startYear+4)},[t("a",{staticClass:"cell"},[e._v(e._s(e.startYear+4))])]),t("td",{staticClass:"available",class:e.getCellStyle(e.startYear+5)},[t("a",{staticClass:"cell"},[e._v(e._s(e.startYear+5))])]),t("td",{staticClass:"available",class:e.getCellStyle(e.startYear+6)},[t("a",{staticClass:"cell"},[e._v(e._s(e.startYear+6))])]),t("td",{staticClass:"available",class:e.getCellStyle(e.startYear+7)},[t("a",{staticClass:"cell"},[e._v(e._s(e.startYear+7))])])]),t("tr",[t("td",{staticClass:"available",class:e.getCellStyle(e.startYear+8)},[t("a",{staticClass:"cell"},[e._v(e._s(e.startYear+8))])]),t("td",{staticClass:"available",class:e.getCellStyle(e.startYear+9)},[t("a",{staticClass:"cell"},[e._v(e._s(e.startYear+9))])]),t("td"),t("td")])])])};Ni._withStripped=!0;var $i=r({props:{disabledDate:{},value:{},defaultValue:{validator:function(e){return null===e||e instanceof Date&&Object(hi.isDate)(e)}},date:{}},computed:{startYear:function(){return 10*Math.floor(this.date.getFullYear()/10)}},methods:{getCellStyle:function(e){var n={},t=new Date;return n.disabled="function"==typeof this.disabledDate&&function(e){var n=Object(hi.getDayCountOfYear)(e),t=new Date(e,0,1);return Object(hi.range)(n).map((function(e){return Object(hi.nextDate)(t,e)}))}(e).every(this.disabledDate),n.current=Object(m.arrayFindIndex)(Object(m.coerceTruthyValueToArray)(this.value),(function(n){return n.getFullYear()===e}))>=0,n.today=t.getFullYear()===e,n.default=this.defaultValue&&this.defaultValue.getFullYear()===e,n},handleYearTableClick:function(e){var n=e.target;if("A"===n.tagName){if(Object(fe.hasClass)(n.parentNode,"disabled"))return;var t=n.textContent||n.innerText;this.$emit("pick",Number(t))}}}},Ni,[],!1,null,null,null);$i.options.__file="packages/date-picker/src/basic/year-table.vue";var Fi=$i.exports,Ri=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("table",{staticClass:"el-month-table",on:{click:e.handleMonthTableClick,mousemove:e.handleMouseMove}},[t("tbody",e._l(e.rows,(function(n,i){return t("tr",{key:i},e._l(n,(function(n,i){return t("td",{key:i,class:e.getCellStyle(n)},[t("div",[t("a",{staticClass:"cell"},[e._v(e._s(e.t("el.datepicker.months."+e.months[n.text])))])])])})),0)})),0)])};Ri._withStripped=!0;var Bi=function(e){return new Date(e.getFullYear(),e.getMonth())},Vi=function(e){return"number"==typeof e||"string"==typeof e?Bi(new Date(e)).getTime():e instanceof Date?Bi(e).getTime():NaN},zi=r({props:{disabledDate:{},value:{},selectionMode:{default:"month"},minDate:{},maxDate:{},defaultValue:{validator:function(e){return null===e||Object(hi.isDate)(e)||Array.isArray(e)&&e.every(hi.isDate)}},date:{},rangeState:{default:function(){return{endDate:null,selecting:!1}}}},mixins:[f.a],watch:{"rangeState.endDate":function(e){this.markRange(this.minDate,e)},minDate:function(e,n){Vi(e)!==Vi(n)&&this.markRange(this.minDate,this.maxDate)},maxDate:function(e,n){Vi(e)!==Vi(n)&&this.markRange(this.minDate,this.maxDate)}},data:function(){return{months:["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],tableRows:[[],[],[]],lastRow:null,lastColumn:null}},methods:{cellMatchesDate:function(e,n){var t=new Date(n);return this.date.getFullYear()===t.getFullYear()&&Number(e.text)===t.getMonth()},getCellStyle:function(e){var n=this,t={},i=this.date.getFullYear(),r=new Date,o=e.text,a=this.defaultValue?Array.isArray(this.defaultValue)?this.defaultValue:[this.defaultValue]:[];return t.disabled="function"==typeof this.disabledDate&&function(e,n){var t=Object(hi.getDayCountOfMonth)(e,n),i=new Date(e,n,1);return Object(hi.range)(t).map((function(e){return Object(hi.nextDate)(i,e)}))}(i,o).every(this.disabledDate),t.current=Object(m.arrayFindIndex)(Object(m.coerceTruthyValueToArray)(this.value),(function(e){return e.getFullYear()===i&&e.getMonth()===o}))>=0,t.today=r.getFullYear()===i&&r.getMonth()===o,t.default=a.some((function(t){return n.cellMatchesDate(e,t)})),e.inRange&&(t["in-range"]=!0,e.start&&(t["start-date"]=!0),e.end&&(t["end-date"]=!0)),t},getMonthOfCell:function(e){var n=this.date.getFullYear();return new Date(n,e,1)},markRange:function(e,n){e=Vi(e),n=Vi(n)||e;var t=[Math.min(e,n),Math.max(e,n)];e=t[0],n=t[1];for(var i=this.rows,r=0,o=i.length;r<o;r++)for(var a=i[r],s=0,l=a.length;s<l;s++){var c=a[s],u=4*r+s,d=new Date(this.date.getFullYear(),u).getTime();c.inRange=e&&d>=e&&d<=n,c.start=e&&d===e,c.end=n&&d===n}},handleMouseMove:function(e){if(this.rangeState.selecting){var n=e.target;if("A"===n.tagName&&(n=n.parentNode.parentNode),"DIV"===n.tagName&&(n=n.parentNode),"TD"===n.tagName){var t=n.parentNode.rowIndex,i=n.cellIndex;this.rows[t][i].disabled||t===this.lastRow&&i===this.lastColumn||(this.lastRow=t,this.lastColumn=i,this.$emit("changerange",{minDate:this.minDate,maxDate:this.maxDate,rangeState:{selecting:!0,endDate:this.getMonthOfCell(4*t+i)}}))}}},handleMonthTableClick:function(e){var n=e.target;if("A"===n.tagName&&(n=n.parentNode.parentNode),"DIV"===n.tagName&&(n=n.parentNode),"TD"===n.tagName&&!Object(fe.hasClass)(n,"disabled")){var t=n.cellIndex,i=4*n.parentNode.rowIndex+t,r=this.getMonthOfCell(i);"range"===this.selectionMode?this.rangeState.selecting?(r>=this.minDate?this.$emit("pick",{minDate:this.minDate,maxDate:r}):this.$emit("pick",{minDate:r,maxDate:this.minDate}),this.rangeState.selecting=!1):(this.$emit("pick",{minDate:r,maxDate:null}),this.rangeState.selecting=!0):this.$emit("pick",i)}}},computed:{rows:function(){for(var e=this,n=this.tableRows,t=this.disabledDate,i=[],r=Vi(new Date),o=0;o<3;o++)for(var a=n[o],s=function(n){var s=a[n];s||(s={row:o,column:n,type:"normal",inRange:!1,start:!1,end:!1}),s.type="normal";var l=4*o+n,c=new Date(e.date.getFullYear(),l).getTime();s.inRange=c>=Vi(e.minDate)&&c<=Vi(e.maxDate),s.start=e.minDate&&c===Vi(e.minDate),s.end=e.maxDate&&c===Vi(e.maxDate),c===r&&(s.type="today"),s.text=l;var u=new Date(c);s.disabled="function"==typeof t&&t(u),s.selected=Object(m.arrayFind)(i,(function(e){return e.getTime()===u.getTime()})),e.$set(a,n,s)},l=0;l<4;l++)s(l);return n}}},Ri,[],!1,null,null,null);zi.options.__file="packages/date-picker/src/basic/month-table.vue";var qi=zi.exports,Hi=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("table",{staticClass:"el-date-table",class:{"is-week-mode":"week"===e.selectionMode},attrs:{cellspacing:"0",cellpadding:"0"},on:{click:e.handleClick,mousemove:e.handleMouseMove}},[t("tbody",[t("tr",[e.showWeekNumber?t("th",[e._v(e._s(e.t("el.datepicker.week")))]):e._e(),e._l(e.WEEKS,(function(n,i){return t("th",{key:i},[e._v(e._s(e.t("el.datepicker.weeks."+n)))])}))],2),e._l(e.rows,(function(n,i){return t("tr",{key:i,staticClass:"el-date-table__row",class:{current:e.isWeekActive(n[1])}},e._l(n,(function(n,i){return t("td",{key:i,class:e.getCellClasses(n)},[t("div",[t("span",[e._v("\n          "+e._s(n.text)+"\n        ")])])])})),0)}))],2)])};Hi._withStripped=!0;var Wi=["sun","mon","tue","wed","thu","fri","sat"],Ui=function(e){return"number"==typeof e||"string"==typeof e?Object(hi.clearTime)(new Date(e)).getTime():e instanceof Date?Object(hi.clearTime)(e).getTime():NaN},Ji=r({mixins:[f.a],props:{firstDayOfWeek:{default:7,type:Number,validator:function(e){return e>=1&&e<=7}},value:{},defaultValue:{validator:function(e){return null===e||Object(hi.isDate)(e)||Array.isArray(e)&&e.every(hi.isDate)}},date:{},selectionMode:{default:"day"},showWeekNumber:{type:Boolean,default:!1},disabledDate:{},cellClassName:{},minDate:{},maxDate:{},rangeState:{default:function(){return{endDate:null,selecting:!1}}}},computed:{offsetDay:function(){var e=this.firstDayOfWeek;return e>3?7-e:-e},WEEKS:function(){var e=this.firstDayOfWeek;return Wi.concat(Wi).slice(e,e+7)},year:function(){return this.date.getFullYear()},month:function(){return this.date.getMonth()},startDate:function(){return Object(hi.getStartDateOfMonth)(this.year,this.month)},rows:function(){var e=this,n=new Date(this.year,this.month,1),t=Object(hi.getFirstDayOfMonth)(n),i=Object(hi.getDayCountOfMonth)(n.getFullYear(),n.getMonth()),r=Object(hi.getDayCountOfMonth)(n.getFullYear(),0===n.getMonth()?11:n.getMonth()-1);t=0===t?7:t;for(var o=this.offsetDay,a=this.tableRows,s=1,l=this.startDate,c=this.disabledDate,u=this.cellClassName,d="dates"===this.selectionMode?Object(m.coerceTruthyValueToArray)(this.value):[],h=Ui(new Date),p=0;p<6;p++){var f=a[p];this.showWeekNumber&&(f[0]||(f[0]={type:"week",text:Object(hi.getWeekNumber)(Object(hi.nextDate)(l,7*p+1))}));for(var g=function(n){var a=f[e.showWeekNumber?n+1:n];a||(a={row:p,column:n,type:"normal",inRange:!1,start:!1,end:!1}),a.type="normal";var g=7*p+n,v=Object(hi.nextDate)(l,g-o).getTime();if(a.inRange=v>=Ui(e.minDate)&&v<=Ui(e.maxDate),a.start=e.minDate&&v===Ui(e.minDate),a.end=e.maxDate&&v===Ui(e.maxDate),v===h&&(a.type="today"),p>=0&&p<=1){var b=t+o<0?7+t+o:t+o;n+7*p>=b?a.text=s++:(a.text=r-(b-n%7)+1+7*p,a.type="prev-month")}else s<=i?a.text=s++:(a.text=s++-i,a.type="next-month");var y=new Date(v);a.disabled="function"==typeof c&&c(y),a.selected=Object(m.arrayFind)(d,(function(e){return e.getTime()===y.getTime()})),a.customClass="function"==typeof u&&u(y),e.$set(f,e.showWeekNumber?n+1:n,a)},v=0;v<7;v++)g(v);if("week"===this.selectionMode){var b=this.showWeekNumber?1:0,y=this.showWeekNumber?7:6,w=this.isWeekActive(f[b+1]);f[b].inRange=w,f[b].start=w,f[y].inRange=w,f[y].end=w}}return a}},watch:{"rangeState.endDate":function(e){this.markRange(this.minDate,e)},minDate:function(e,n){Ui(e)!==Ui(n)&&this.markRange(this.minDate,this.maxDate)},maxDate:function(e,n){Ui(e)!==Ui(n)&&this.markRange(this.minDate,this.maxDate)}},data:function(){return{tableRows:[[],[],[],[],[],[]],lastRow:null,lastColumn:null}},methods:{cellMatchesDate:function(e,n){var t=new Date(n);return this.year===t.getFullYear()&&this.month===t.getMonth()&&Number(e.text)===t.getDate()},getCellClasses:function(e){var n=this,t=this.selectionMode,i=this.defaultValue?Array.isArray(this.defaultValue)?this.defaultValue:[this.defaultValue]:[],r=[];return"normal"!==e.type&&"today"!==e.type||e.disabled?r.push(e.type):(r.push("available"),"today"===e.type&&r.push("today")),"normal"===e.type&&i.some((function(t){return n.cellMatchesDate(e,t)}))&&r.push("default"),"day"!==t||"normal"!==e.type&&"today"!==e.type||!this.cellMatchesDate(e,this.value)||r.push("current"),!e.inRange||"normal"!==e.type&&"today"!==e.type&&"week"!==this.selectionMode||(r.push("in-range"),e.start&&r.push("start-date"),e.end&&r.push("end-date")),e.disabled&&r.push("disabled"),e.selected&&r.push("selected"),e.customClass&&r.push(e.customClass),r.join(" ")},getDateOfCell:function(e,n){var t=7*e+(n-(this.showWeekNumber?1:0))-this.offsetDay;return Object(hi.nextDate)(this.startDate,t)},isWeekActive:function(e){if("week"!==this.selectionMode)return!1;var n=new Date(this.year,this.month,1),t=n.getFullYear(),i=n.getMonth();if("prev-month"===e.type&&(n.setMonth(0===i?11:i-1),n.setFullYear(0===i?t-1:t)),"next-month"===e.type&&(n.setMonth(11===i?0:i+1),n.setFullYear(11===i?t+1:t)),n.setDate(parseInt(e.text,10)),Object(hi.isDate)(this.value)){var r=(this.value.getDay()-this.firstDayOfWeek+7)%7-1;return Object(hi.prevDate)(this.value,r).getTime()===n.getTime()}return!1},markRange:function(e,n){e=Ui(e),n=Ui(n)||e;var t=[Math.min(e,n),Math.max(e,n)];e=t[0],n=t[1];for(var i=this.startDate,r=this.rows,o=0,a=r.length;o<a;o++)for(var s=r[o],l=0,c=s.length;l<c;l++)if(!this.showWeekNumber||0!==l){var u=s[l],d=7*o+l+(this.showWeekNumber?-1:0),h=Object(hi.nextDate)(i,d-this.offsetDay).getTime();u.inRange=e&&h>=e&&h<=n,u.start=e&&h===e,u.end=n&&h===n}},handleMouseMove:function(e){if(this.rangeState.selecting){var n=e.target;if("SPAN"===n.tagName&&(n=n.parentNode.parentNode),"DIV"===n.tagName&&(n=n.parentNode),"TD"===n.tagName){var t=n.parentNode.rowIndex-1,i=n.cellIndex;this.rows[t][i].disabled||t===this.lastRow&&i===this.lastColumn||(this.lastRow=t,this.lastColumn=i,this.$emit("changerange",{minDate:this.minDate,maxDate:this.maxDate,rangeState:{selecting:!0,endDate:this.getDateOfCell(t,i)}}))}}},handleClick:function(e){var n=e.target;if("SPAN"===n.tagName&&(n=n.parentNode.parentNode),"DIV"===n.tagName&&(n=n.parentNode),"TD"===n.tagName){var t=n.parentNode.rowIndex-1,i="week"===this.selectionMode?1:n.cellIndex,r=this.rows[t][i];if(!r.disabled&&"week"!==r.type){var o,a,s,l=this.getDateOfCell(t,i);if("range"===this.selectionMode)this.rangeState.selecting?(l>=this.minDate?this.$emit("pick",{minDate:this.minDate,maxDate:l}):this.$emit("pick",{minDate:l,maxDate:this.minDate}),this.rangeState.selecting=!1):(this.$emit("pick",{minDate:l,maxDate:null}),this.rangeState.selecting=!0);else if("day"===this.selectionMode)this.$emit("pick",l);else if("week"===this.selectionMode){var c=Object(hi.getWeekNumber)(l),u=l.getFullYear()+"w"+c;this.$emit("pick",{year:l.getFullYear(),week:c,value:u,date:l})}else if("dates"===this.selectionMode){var d=this.value||[],h=r.selected?(o=d,(s="function"==typeof(a=function(e){return e.getTime()===l.getTime()})?Object(m.arrayFindIndex)(o,a):o.indexOf(a))>=0?[].concat(o.slice(0,s),o.slice(s+1)):o):[].concat(d,[l]);this.$emit("pick",h)}}}}}},Hi,[],!1,null,null,null);Ji.options.__file="packages/date-picker/src/basic/date-table.vue";var Yi=Ji.exports,Gi=r({mixins:[f.a],directives:{Clickoutside:I.a},watch:{showTime:function(e){var n=this;e&&this.$nextTick((function(e){var t=n.$refs.input.$el;t&&(n.pickerWidth=t.getBoundingClientRect().width+10)}))},value:function(e){"dates"===this.selectionMode&&this.value||(Object(hi.isDate)(e)?this.date=new Date(e):this.date=this.getDefaultValue())},defaultValue:function(e){Object(hi.isDate)(this.value)||(this.date=e?new Date(e):new Date)},timePickerVisible:function(e){var n=this;e&&this.$nextTick((function(){return n.$refs.timepicker.adjustSpinners()}))},selectionMode:function(e){"month"===e?"year"===this.currentView&&"month"===this.currentView||(this.currentView="month"):"dates"===e&&(this.currentView="date")}},methods:{proxyTimePickerDataProperties:function(){var e,n=this,t=function(e){n.$refs.timepicker.value=e},i=function(e){n.$refs.timepicker.date=e},r=function(e){n.$refs.timepicker.selectableRange=e};this.$watch("value",t),this.$watch("date",i),this.$watch("selectableRange",r),e=this.timeFormat,n.$refs.timepicker.format=e,t(this.value),i(this.date),r(this.selectableRange)},handleClear:function(){this.date=this.getDefaultValue(),this.$emit("pick",null)},emit:function(e){for(var n=this,t=arguments.length,i=Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];if(e)if(Array.isArray(e)){var o=e.map((function(e){return n.showTime?Object(hi.clearMilliseconds)(e):Object(hi.clearTime)(e)}));this.$emit.apply(this,["pick",o].concat(i))}else this.$emit.apply(this,["pick",this.showTime?Object(hi.clearMilliseconds)(e):Object(hi.clearTime)(e)].concat(i));else this.$emit.apply(this,["pick",e].concat(i));this.userInputDate=null,this.userInputTime=null},showMonthPicker:function(){this.currentView="month"},showYearPicker:function(){this.currentView="year"},prevMonth:function(){this.date=Object(hi.prevMonth)(this.date)},nextMonth:function(){this.date=Object(hi.nextMonth)(this.date)},prevYear:function(){"year"===this.currentView?this.date=Object(hi.prevYear)(this.date,10):this.date=Object(hi.prevYear)(this.date)},nextYear:function(){"year"===this.currentView?this.date=Object(hi.nextYear)(this.date,10):this.date=Object(hi.nextYear)(this.date)},handleShortcutClick:function(e){e.onClick&&e.onClick(this)},handleTimePick:function(e,n,t){if(Object(hi.isDate)(e)){var i=this.value?Object(hi.modifyTime)(this.value,e.getHours(),e.getMinutes(),e.getSeconds()):Object(hi.modifyWithTimeString)(this.getDefaultValue(),this.defaultTime);this.date=i,this.emit(this.date,!0)}else this.emit(e,!0);t||(this.timePickerVisible=n)},handleTimePickClose:function(){this.timePickerVisible=!1},handleMonthPick:function(e){"month"===this.selectionMode?(this.date=Object(hi.modifyDate)(this.date,this.year,e,1),this.emit(this.date)):(this.date=Object(hi.changeYearMonthAndClampDate)(this.date,this.year,e),this.currentView="date")},handleDatePick:function(e){if("day"===this.selectionMode){var n=this.value?Object(hi.modifyDate)(this.value,e.getFullYear(),e.getMonth(),e.getDate()):Object(hi.modifyWithTimeString)(e,this.defaultTime);this.checkDateWithinRange(n)||(n=Object(hi.modifyDate)(this.selectableRange[0][0],e.getFullYear(),e.getMonth(),e.getDate())),this.date=n,this.emit(this.date,this.showTime)}else"week"===this.selectionMode?this.emit(e.date):"dates"===this.selectionMode&&this.emit(e,!0)},handleYearPick:function(e){"year"===this.selectionMode?(this.date=Object(hi.modifyDate)(this.date,e,0,1),this.emit(this.date)):(this.date=Object(hi.changeYearMonthAndClampDate)(this.date,e,this.month),this.currentView="month")},changeToNow:function(){this.disabledDate&&this.disabledDate(new Date)||!this.checkDateWithinRange(new Date)||(this.date=new Date,this.emit(this.date))},confirm:function(){if("dates"===this.selectionMode)this.emit(this.value);else{var e=this.value?this.value:Object(hi.modifyWithTimeString)(this.getDefaultValue(),this.defaultTime);this.date=new Date(e),this.emit(e)}},resetView:function(){"month"===this.selectionMode?this.currentView="month":"year"===this.selectionMode?this.currentView="year":this.currentView="date"},handleEnter:function(){document.body.addEventListener("keydown",this.handleKeydown)},handleLeave:function(){this.$emit("dodestroy"),document.body.removeEventListener("keydown",this.handleKeydown)},handleKeydown:function(e){var n=e.keyCode;this.visible&&!this.timePickerVisible&&(-1!==[38,40,37,39].indexOf(n)&&(this.handleKeyControl(n),e.stopPropagation(),e.preventDefault()),13===n&&null===this.userInputDate&&null===this.userInputTime&&this.emit(this.date,!1))},handleKeyControl:function(e){for(var n={year:{38:-4,40:4,37:-1,39:1,offset:function(e,n){return e.setFullYear(e.getFullYear()+n)}},month:{38:-4,40:4,37:-1,39:1,offset:function(e,n){return e.setMonth(e.getMonth()+n)}},week:{38:-1,40:1,37:-1,39:1,offset:function(e,n){return e.setDate(e.getDate()+7*n)}},day:{38:-7,40:7,37:-1,39:1,offset:function(e,n){return e.setDate(e.getDate()+n)}}},t=this.selectionMode,i=this.date.getTime(),r=new Date(this.date.getTime());Math.abs(i-r.getTime())<=31536e6;){var o=n[t];if(o.offset(r,o[e]),"function"!=typeof this.disabledDate||!this.disabledDate(r)){this.date=r,this.$emit("pick",r,!0);break}}},handleVisibleTimeChange:function(e){var n=Object(hi.parseDate)(e,this.timeFormat);n&&this.checkDateWithinRange(n)&&(this.date=Object(hi.modifyDate)(n,this.year,this.month,this.monthDate),this.userInputTime=null,this.$refs.timepicker.value=this.date,this.timePickerVisible=!1,this.emit(this.date,!0))},handleVisibleDateChange:function(e){var n=Object(hi.parseDate)(e,this.dateFormat);if(n){if("function"==typeof this.disabledDate&&this.disabledDate(n))return;this.date=Object(hi.modifyTime)(n,this.date.getHours(),this.date.getMinutes(),this.date.getSeconds()),this.userInputDate=null,this.resetView(),this.emit(this.date,!0)}},isValidValue:function(e){return e&&!isNaN(e)&&("function"!=typeof this.disabledDate||!this.disabledDate(e))&&this.checkDateWithinRange(e)},getDefaultValue:function(){return this.defaultValue?new Date(this.defaultValue):new Date},checkDateWithinRange:function(e){return!(this.selectableRange.length>0)||Object(hi.timeWithinRange)(e,this.selectableRange,this.format||"HH:mm:ss")}},components:{TimePicker:Li,YearTable:Fi,MonthTable:qi,DateTable:Yi,ElInput:h.a,ElButton:U.a},data:function(){return{popperClass:"",date:new Date,value:"",defaultValue:null,defaultTime:null,showTime:!1,selectionMode:"day",shortcuts:"",visible:!1,currentView:"date",disabledDate:"",cellClassName:"",selectableRange:[],firstDayOfWeek:7,showWeekNumber:!1,timePickerVisible:!1,format:"",arrowControl:!1,userInputDate:null,userInputTime:null}},computed:{year:function(){return this.date.getFullYear()},month:function(){return this.date.getMonth()},week:function(){return Object(hi.getWeekNumber)(this.date)},monthDate:function(){return this.date.getDate()},footerVisible:function(){return this.showTime||"dates"===this.selectionMode},visibleTime:function(){return null!==this.userInputTime?this.userInputTime:Object(hi.formatDate)(this.value||this.defaultValue,this.timeFormat)},visibleDate:function(){return null!==this.userInputDate?this.userInputDate:Object(hi.formatDate)(this.value||this.defaultValue,this.dateFormat)},yearLabel:function(){var e=this.t("el.datepicker.year");if("year"===this.currentView){var n=10*Math.floor(this.year/10);return e?n+" "+e+" - "+(n+9)+" "+e:n+" - "+(n+9)}return this.year+" "+e},timeFormat:function(){return this.format?Object(hi.extractTimeFormat)(this.format):"HH:mm:ss"},dateFormat:function(){return this.format?Object(hi.extractDateFormat)(this.format):"yyyy-MM-dd"}}},Oi,[],!1,null,null,null);Gi.options.__file="packages/date-picker/src/panel/date.vue";var Ki=Gi.exports,Xi=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":function(n){e.$emit("dodestroy")}}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-picker-panel el-date-range-picker el-popper",class:[{"has-sidebar":e.$slots.sidebar||e.shortcuts,"has-time":e.showTime},e.popperClass]},[t("div",{staticClass:"el-picker-panel__body-wrapper"},[e._t("sidebar"),e.shortcuts?t("div",{staticClass:"el-picker-panel__sidebar"},e._l(e.shortcuts,(function(n,i){return t("button",{key:i,staticClass:"el-picker-panel__shortcut",attrs:{type:"button"},on:{click:function(t){e.handleShortcutClick(n)}}},[e._v(e._s(n.text))])})),0):e._e(),t("div",{staticClass:"el-picker-panel__body"},[e.showTime?t("div",{staticClass:"el-date-range-picker__time-header"},[t("span",{staticClass:"el-date-range-picker__editors-wrap"},[t("span",{staticClass:"el-date-range-picker__time-picker-wrap"},[t("el-input",{ref:"minInput",staticClass:"el-date-range-picker__editor",attrs:{size:"small",disabled:e.rangeState.selecting,placeholder:e.t("el.datepicker.startDate"),value:e.minVisibleDate},on:{input:function(n){return e.handleDateInput(n,"min")},change:function(n){return e.handleDateChange(n,"min")}}})],1),t("span",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleMinTimeClose,expression:"handleMinTimeClose"}],staticClass:"el-date-range-picker__time-picker-wrap"},[t("el-input",{staticClass:"el-date-range-picker__editor",attrs:{size:"small",disabled:e.rangeState.selecting,placeholder:e.t("el.datepicker.startTime"),value:e.minVisibleTime},on:{focus:function(n){e.minTimePickerVisible=!0},input:function(n){return e.handleTimeInput(n,"min")},change:function(n){return e.handleTimeChange(n,"min")}}}),t("time-picker",{ref:"minTimePicker",attrs:{"time-arrow-control":e.arrowControl,visible:e.minTimePickerVisible},on:{pick:e.handleMinTimePick,mounted:function(n){e.$refs.minTimePicker.format=e.timeFormat}}})],1)]),t("span",{staticClass:"el-icon-arrow-right"}),t("span",{staticClass:"el-date-range-picker__editors-wrap is-right"},[t("span",{staticClass:"el-date-range-picker__time-picker-wrap"},[t("el-input",{staticClass:"el-date-range-picker__editor",attrs:{size:"small",disabled:e.rangeState.selecting,placeholder:e.t("el.datepicker.endDate"),value:e.maxVisibleDate,readonly:!e.minDate},on:{input:function(n){return e.handleDateInput(n,"max")},change:function(n){return e.handleDateChange(n,"max")}}})],1),t("span",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleMaxTimeClose,expression:"handleMaxTimeClose"}],staticClass:"el-date-range-picker__time-picker-wrap"},[t("el-input",{staticClass:"el-date-range-picker__editor",attrs:{size:"small",disabled:e.rangeState.selecting,placeholder:e.t("el.datepicker.endTime"),value:e.maxVisibleTime,readonly:!e.minDate},on:{focus:function(n){e.minDate&&(e.maxTimePickerVisible=!0)},input:function(n){return e.handleTimeInput(n,"max")},change:function(n){return e.handleTimeChange(n,"max")}}}),t("time-picker",{ref:"maxTimePicker",attrs:{"time-arrow-control":e.arrowControl,visible:e.maxTimePickerVisible},on:{pick:e.handleMaxTimePick,mounted:function(n){e.$refs.maxTimePicker.format=e.timeFormat}}})],1)])]):e._e(),t("div",{staticClass:"el-picker-panel__content el-date-range-picker__content is-left"},[t("div",{staticClass:"el-date-range-picker__header"},[t("button",{staticClass:"el-picker-panel__icon-btn el-icon-d-arrow-left",attrs:{type:"button"},on:{click:e.leftPrevYear}}),t("button",{staticClass:"el-picker-panel__icon-btn el-icon-arrow-left",attrs:{type:"button"},on:{click:e.leftPrevMonth}}),e.unlinkPanels?t("button",{staticClass:"el-picker-panel__icon-btn el-icon-d-arrow-right",class:{"is-disabled":!e.enableYearArrow},attrs:{type:"button",disabled:!e.enableYearArrow},on:{click:e.leftNextYear}}):e._e(),e.unlinkPanels?t("button",{staticClass:"el-picker-panel__icon-btn el-icon-arrow-right",class:{"is-disabled":!e.enableMonthArrow},attrs:{type:"button",disabled:!e.enableMonthArrow},on:{click:e.leftNextMonth}}):e._e(),t("div",[e._v(e._s(e.leftLabel))])]),t("date-table",{attrs:{"selection-mode":"range",date:e.leftDate,"default-value":e.defaultValue,"min-date":e.minDate,"max-date":e.maxDate,"range-state":e.rangeState,"disabled-date":e.disabledDate,"cell-class-name":e.cellClassName,"first-day-of-week":e.firstDayOfWeek},on:{changerange:e.handleChangeRange,pick:e.handleRangePick}})],1),t("div",{staticClass:"el-picker-panel__content el-date-range-picker__content is-right"},[t("div",{staticClass:"el-date-range-picker__header"},[e.unlinkPanels?t("button",{staticClass:"el-picker-panel__icon-btn el-icon-d-arrow-left",class:{"is-disabled":!e.enableYearArrow},attrs:{type:"button",disabled:!e.enableYearArrow},on:{click:e.rightPrevYear}}):e._e(),e.unlinkPanels?t("button",{staticClass:"el-picker-panel__icon-btn el-icon-arrow-left",class:{"is-disabled":!e.enableMonthArrow},attrs:{type:"button",disabled:!e.enableMonthArrow},on:{click:e.rightPrevMonth}}):e._e(),t("button",{staticClass:"el-picker-panel__icon-btn el-icon-d-arrow-right",attrs:{type:"button"},on:{click:e.rightNextYear}}),t("button",{staticClass:"el-picker-panel__icon-btn el-icon-arrow-right",attrs:{type:"button"},on:{click:e.rightNextMonth}}),t("div",[e._v(e._s(e.rightLabel))])]),t("date-table",{attrs:{"selection-mode":"range",date:e.rightDate,"default-value":e.defaultValue,"min-date":e.minDate,"max-date":e.maxDate,"range-state":e.rangeState,"disabled-date":e.disabledDate,"cell-class-name":e.cellClassName,"first-day-of-week":e.firstDayOfWeek},on:{changerange:e.handleChangeRange,pick:e.handleRangePick}})],1)])],2),e.showTime?t("div",{staticClass:"el-picker-panel__footer"},[t("el-button",{staticClass:"el-picker-panel__link-btn",attrs:{size:"mini",type:"text"},on:{click:e.handleClear}},[e._v("\n        "+e._s(e.t("el.datepicker.clear"))+"\n      ")]),t("el-button",{staticClass:"el-picker-panel__link-btn",attrs:{plain:"",size:"mini",disabled:e.btnDisabled},on:{click:function(n){e.handleConfirm(!1)}}},[e._v("\n        "+e._s(e.t("el.datepicker.confirm"))+"\n      ")])],1):e._e()])])};Xi._withStripped=!0;var Qi=function(e){return Array.isArray(e)?[new Date(e[0]),new Date(e[1])]:e?[new Date(e),Object(hi.nextDate)(new Date(e),1)]:[new Date,Object(hi.nextDate)(new Date,1)]},Zi=r({mixins:[f.a],directives:{Clickoutside:I.a},computed:{btnDisabled:function(){return!(this.minDate&&this.maxDate&&!this.selecting&&this.isValidValue([this.minDate,this.maxDate]))},leftLabel:function(){return this.leftDate.getFullYear()+" "+this.t("el.datepicker.year")+" "+this.t("el.datepicker.month"+(this.leftDate.getMonth()+1))},rightLabel:function(){return this.rightDate.getFullYear()+" "+this.t("el.datepicker.year")+" "+this.t("el.datepicker.month"+(this.rightDate.getMonth()+1))},leftYear:function(){return this.leftDate.getFullYear()},leftMonth:function(){return this.leftDate.getMonth()},leftMonthDate:function(){return this.leftDate.getDate()},rightYear:function(){return this.rightDate.getFullYear()},rightMonth:function(){return this.rightDate.getMonth()},rightMonthDate:function(){return this.rightDate.getDate()},minVisibleDate:function(){return null!==this.dateUserInput.min?this.dateUserInput.min:this.minDate?Object(hi.formatDate)(this.minDate,this.dateFormat):""},maxVisibleDate:function(){return null!==this.dateUserInput.max?this.dateUserInput.max:this.maxDate||this.minDate?Object(hi.formatDate)(this.maxDate||this.minDate,this.dateFormat):""},minVisibleTime:function(){return null!==this.timeUserInput.min?this.timeUserInput.min:this.minDate?Object(hi.formatDate)(this.minDate,this.timeFormat):""},maxVisibleTime:function(){return null!==this.timeUserInput.max?this.timeUserInput.max:this.maxDate||this.minDate?Object(hi.formatDate)(this.maxDate||this.minDate,this.timeFormat):""},timeFormat:function(){return this.format?Object(hi.extractTimeFormat)(this.format):"HH:mm:ss"},dateFormat:function(){return this.format?Object(hi.extractDateFormat)(this.format):"yyyy-MM-dd"},enableMonthArrow:function(){var e=(this.leftMonth+1)%12,n=this.leftMonth+1>=12?1:0;return this.unlinkPanels&&new Date(this.leftYear+n,e)<new Date(this.rightYear,this.rightMonth)},enableYearArrow:function(){return this.unlinkPanels&&12*this.rightYear+this.rightMonth-(12*this.leftYear+this.leftMonth+1)>=12}},data:function(){return{popperClass:"",value:[],defaultValue:null,defaultTime:null,minDate:"",maxDate:"",leftDate:new Date,rightDate:Object(hi.nextMonth)(new Date),rangeState:{endDate:null,selecting:!1,row:null,column:null},showTime:!1,shortcuts:"",visible:"",disabledDate:"",cellClassName:"",firstDayOfWeek:7,minTimePickerVisible:!1,maxTimePickerVisible:!1,format:"",arrowControl:!1,unlinkPanels:!1,dateUserInput:{min:null,max:null},timeUserInput:{min:null,max:null}}},watch:{minDate:function(e){var n=this;this.dateUserInput.min=null,this.timeUserInput.min=null,this.$nextTick((function(){if(n.$refs.maxTimePicker&&n.maxDate&&n.maxDate<n.minDate){n.$refs.maxTimePicker.selectableRange=[[Object(hi.parseDate)(Object(hi.formatDate)(n.minDate,"HH:mm:ss"),"HH:mm:ss"),Object(hi.parseDate)("23:59:59","HH:mm:ss")]]}})),e&&this.$refs.minTimePicker&&(this.$refs.minTimePicker.date=e,this.$refs.minTimePicker.value=e)},maxDate:function(e){this.dateUserInput.max=null,this.timeUserInput.max=null,e&&this.$refs.maxTimePicker&&(this.$refs.maxTimePicker.date=e,this.$refs.maxTimePicker.value=e)},minTimePickerVisible:function(e){var n=this;e&&this.$nextTick((function(){n.$refs.minTimePicker.date=n.minDate,n.$refs.minTimePicker.value=n.minDate,n.$refs.minTimePicker.adjustSpinners()}))},maxTimePickerVisible:function(e){var n=this;e&&this.$nextTick((function(){n.$refs.maxTimePicker.date=n.maxDate,n.$refs.maxTimePicker.value=n.maxDate,n.$refs.maxTimePicker.adjustSpinners()}))},value:function(e){if(e){if(Array.isArray(e))if(this.minDate=Object(hi.isDate)(e[0])?new Date(e[0]):null,this.maxDate=Object(hi.isDate)(e[1])?new Date(e[1]):null,this.minDate)if(this.leftDate=this.minDate,this.unlinkPanels&&this.maxDate){var n=this.minDate.getFullYear(),t=this.minDate.getMonth(),i=this.maxDate.getFullYear(),r=this.maxDate.getMonth();this.rightDate=n===i&&t===r?Object(hi.nextMonth)(this.maxDate):this.maxDate}else this.rightDate=Object(hi.nextMonth)(this.leftDate);else this.leftDate=Qi(this.defaultValue)[0],this.rightDate=Object(hi.nextMonth)(this.leftDate)}else this.minDate=null,this.maxDate=null},defaultValue:function(e){if(!Array.isArray(this.value)){var n=Qi(e),t=n[0],i=n[1];this.leftDate=t,this.rightDate=e&&e[1]&&this.unlinkPanels?i:Object(hi.nextMonth)(this.leftDate)}}},methods:{handleClear:function(){this.minDate=null,this.maxDate=null,this.leftDate=Qi(this.defaultValue)[0],this.rightDate=Object(hi.nextMonth)(this.leftDate),this.$emit("pick",null)},handleChangeRange:function(e){this.minDate=e.minDate,this.maxDate=e.maxDate,this.rangeState=e.rangeState},handleDateInput:function(e,n){if(this.dateUserInput[n]=e,e.length===this.dateFormat.length){var t=Object(hi.parseDate)(e,this.dateFormat);if(t){if("function"==typeof this.disabledDate&&this.disabledDate(new Date(t)))return;"min"===n?(this.minDate=Object(hi.modifyDate)(this.minDate||new Date,t.getFullYear(),t.getMonth(),t.getDate()),this.leftDate=new Date(t),this.unlinkPanels||(this.rightDate=Object(hi.nextMonth)(this.leftDate))):(this.maxDate=Object(hi.modifyDate)(this.maxDate||new Date,t.getFullYear(),t.getMonth(),t.getDate()),this.rightDate=new Date(t),this.unlinkPanels||(this.leftDate=Object(hi.prevMonth)(t)))}}},handleDateChange:function(e,n){var t=Object(hi.parseDate)(e,this.dateFormat);t&&("min"===n?(this.minDate=Object(hi.modifyDate)(this.minDate,t.getFullYear(),t.getMonth(),t.getDate()),this.minDate>this.maxDate&&(this.maxDate=this.minDate)):(this.maxDate=Object(hi.modifyDate)(this.maxDate,t.getFullYear(),t.getMonth(),t.getDate()),this.maxDate<this.minDate&&(this.minDate=this.maxDate)))},handleTimeInput:function(e,n){var t=this;if(this.timeUserInput[n]=e,e.length===this.timeFormat.length){var i=Object(hi.parseDate)(e,this.timeFormat);i&&("min"===n?(this.minDate=Object(hi.modifyTime)(this.minDate,i.getHours(),i.getMinutes(),i.getSeconds()),this.$nextTick((function(e){return t.$refs.minTimePicker.adjustSpinners()}))):(this.maxDate=Object(hi.modifyTime)(this.maxDate,i.getHours(),i.getMinutes(),i.getSeconds()),this.$nextTick((function(e){return t.$refs.maxTimePicker.adjustSpinners()}))))}},handleTimeChange:function(e,n){var t=Object(hi.parseDate)(e,this.timeFormat);t&&("min"===n?(this.minDate=Object(hi.modifyTime)(this.minDate,t.getHours(),t.getMinutes(),t.getSeconds()),this.minDate>this.maxDate&&(this.maxDate=this.minDate),this.$refs.minTimePicker.value=this.minDate,this.minTimePickerVisible=!1):(this.maxDate=Object(hi.modifyTime)(this.maxDate,t.getHours(),t.getMinutes(),t.getSeconds()),this.maxDate<this.minDate&&(this.minDate=this.maxDate),this.$refs.maxTimePicker.value=this.minDate,this.maxTimePickerVisible=!1))},handleRangePick:function(e){var n=this,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.defaultTime||[],r=Object(hi.modifyWithTimeString)(e.minDate,i[0]),o=Object(hi.modifyWithTimeString)(e.maxDate,i[1]);this.maxDate===o&&this.minDate===r||(this.onPick&&this.onPick(e),this.maxDate=o,this.minDate=r,setTimeout((function(){n.maxDate=o,n.minDate=r}),10),t&&!this.showTime&&this.handleConfirm())},handleShortcutClick:function(e){e.onClick&&e.onClick(this)},handleMinTimePick:function(e,n,t){this.minDate=this.minDate||new Date,e&&(this.minDate=Object(hi.modifyTime)(this.minDate,e.getHours(),e.getMinutes(),e.getSeconds())),t||(this.minTimePickerVisible=n),(!this.maxDate||this.maxDate&&this.maxDate.getTime()<this.minDate.getTime())&&(this.maxDate=new Date(this.minDate))},handleMinTimeClose:function(){this.minTimePickerVisible=!1},handleMaxTimePick:function(e,n,t){this.maxDate&&e&&(this.maxDate=Object(hi.modifyTime)(this.maxDate,e.getHours(),e.getMinutes(),e.getSeconds())),t||(this.maxTimePickerVisible=n),this.maxDate&&this.minDate&&this.minDate.getTime()>this.maxDate.getTime()&&(this.minDate=new Date(this.maxDate))},handleMaxTimeClose:function(){this.maxTimePickerVisible=!1},leftPrevYear:function(){this.leftDate=Object(hi.prevYear)(this.leftDate),this.unlinkPanels||(this.rightDate=Object(hi.nextMonth)(this.leftDate))},leftPrevMonth:function(){this.leftDate=Object(hi.prevMonth)(this.leftDate),this.unlinkPanels||(this.rightDate=Object(hi.nextMonth)(this.leftDate))},rightNextYear:function(){this.unlinkPanels?this.rightDate=Object(hi.nextYear)(this.rightDate):(this.leftDate=Object(hi.nextYear)(this.leftDate),this.rightDate=Object(hi.nextMonth)(this.leftDate))},rightNextMonth:function(){this.unlinkPanels?this.rightDate=Object(hi.nextMonth)(this.rightDate):(this.leftDate=Object(hi.nextMonth)(this.leftDate),this.rightDate=Object(hi.nextMonth)(this.leftDate))},leftNextYear:function(){this.leftDate=Object(hi.nextYear)(this.leftDate)},leftNextMonth:function(){this.leftDate=Object(hi.nextMonth)(this.leftDate)},rightPrevYear:function(){this.rightDate=Object(hi.prevYear)(this.rightDate)},rightPrevMonth:function(){this.rightDate=Object(hi.prevMonth)(this.rightDate)},handleConfirm:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isValidValue([this.minDate,this.maxDate])&&this.$emit("pick",[this.minDate,this.maxDate],e)},isValidValue:function(e){return Array.isArray(e)&&e&&e[0]&&e[1]&&Object(hi.isDate)(e[0])&&Object(hi.isDate)(e[1])&&e[0].getTime()<=e[1].getTime()&&("function"!=typeof this.disabledDate||!this.disabledDate(e[0])&&!this.disabledDate(e[1]))},resetView:function(){this.minDate&&null==this.maxDate&&(this.rangeState.selecting=!1),this.minDate=this.value&&Object(hi.isDate)(this.value[0])?new Date(this.value[0]):null,this.maxDate=this.value&&Object(hi.isDate)(this.value[0])?new Date(this.value[1]):null}},components:{TimePicker:Li,DateTable:Yi,ElInput:h.a,ElButton:U.a}},Xi,[],!1,null,null,null);Zi.options.__file="packages/date-picker/src/panel/date-range.vue";var er=Zi.exports,nr=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":function(n){e.$emit("dodestroy")}}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-picker-panel el-date-range-picker el-popper",class:[{"has-sidebar":e.$slots.sidebar||e.shortcuts},e.popperClass]},[t("div",{staticClass:"el-picker-panel__body-wrapper"},[e._t("sidebar"),e.shortcuts?t("div",{staticClass:"el-picker-panel__sidebar"},e._l(e.shortcuts,(function(n,i){return t("button",{key:i,staticClass:"el-picker-panel__shortcut",attrs:{type:"button"},on:{click:function(t){e.handleShortcutClick(n)}}},[e._v(e._s(n.text))])})),0):e._e(),t("div",{staticClass:"el-picker-panel__body"},[t("div",{staticClass:"el-picker-panel__content el-date-range-picker__content is-left"},[t("div",{staticClass:"el-date-range-picker__header"},[t("button",{staticClass:"el-picker-panel__icon-btn el-icon-d-arrow-left",attrs:{type:"button"},on:{click:e.leftPrevYear}}),e.unlinkPanels?t("button",{staticClass:"el-picker-panel__icon-btn el-icon-d-arrow-right",class:{"is-disabled":!e.enableYearArrow},attrs:{type:"button",disabled:!e.enableYearArrow},on:{click:e.leftNextYear}}):e._e(),t("div",[e._v(e._s(e.leftLabel))])]),t("month-table",{attrs:{"selection-mode":"range",date:e.leftDate,"default-value":e.defaultValue,"min-date":e.minDate,"max-date":e.maxDate,"range-state":e.rangeState,"disabled-date":e.disabledDate},on:{changerange:e.handleChangeRange,pick:e.handleRangePick}})],1),t("div",{staticClass:"el-picker-panel__content el-date-range-picker__content is-right"},[t("div",{staticClass:"el-date-range-picker__header"},[e.unlinkPanels?t("button",{staticClass:"el-picker-panel__icon-btn el-icon-d-arrow-left",class:{"is-disabled":!e.enableYearArrow},attrs:{type:"button",disabled:!e.enableYearArrow},on:{click:e.rightPrevYear}}):e._e(),t("button",{staticClass:"el-picker-panel__icon-btn el-icon-d-arrow-right",attrs:{type:"button"},on:{click:e.rightNextYear}}),t("div",[e._v(e._s(e.rightLabel))])]),t("month-table",{attrs:{"selection-mode":"range",date:e.rightDate,"default-value":e.defaultValue,"min-date":e.minDate,"max-date":e.maxDate,"range-state":e.rangeState,"disabled-date":e.disabledDate},on:{changerange:e.handleChangeRange,pick:e.handleRangePick}})],1)])],2)])])};nr._withStripped=!0;var tr=function(e){return Array.isArray(e)?[new Date(e[0]),new Date(e[1])]:e?[new Date(e),Object(hi.nextMonth)(new Date(e))]:[new Date,Object(hi.nextMonth)(new Date)]},ir=r({mixins:[f.a],directives:{Clickoutside:I.a},computed:{btnDisabled:function(){return!(this.minDate&&this.maxDate&&!this.selecting&&this.isValidValue([this.minDate,this.maxDate]))},leftLabel:function(){return this.leftDate.getFullYear()+" "+this.t("el.datepicker.year")},rightLabel:function(){return this.rightDate.getFullYear()+" "+this.t("el.datepicker.year")},leftYear:function(){return this.leftDate.getFullYear()},rightYear:function(){return this.rightDate.getFullYear()===this.leftDate.getFullYear()?this.leftDate.getFullYear()+1:this.rightDate.getFullYear()},enableYearArrow:function(){return this.unlinkPanels&&this.rightYear>this.leftYear+1}},data:function(){return{popperClass:"",value:[],defaultValue:null,defaultTime:null,minDate:"",maxDate:"",leftDate:new Date,rightDate:Object(hi.nextYear)(new Date),rangeState:{endDate:null,selecting:!1,row:null,column:null},shortcuts:"",visible:"",disabledDate:"",format:"",arrowControl:!1,unlinkPanels:!1}},watch:{value:function(e){if(e){if(Array.isArray(e))if(this.minDate=Object(hi.isDate)(e[0])?new Date(e[0]):null,this.maxDate=Object(hi.isDate)(e[1])?new Date(e[1]):null,this.minDate)if(this.leftDate=this.minDate,this.unlinkPanels&&this.maxDate){var n=this.minDate.getFullYear(),t=this.maxDate.getFullYear();this.rightDate=n===t?Object(hi.nextYear)(this.maxDate):this.maxDate}else this.rightDate=Object(hi.nextYear)(this.leftDate);else this.leftDate=tr(this.defaultValue)[0],this.rightDate=Object(hi.nextYear)(this.leftDate)}else this.minDate=null,this.maxDate=null},defaultValue:function(e){if(!Array.isArray(this.value)){var n=tr(e),t=n[0],i=n[1];this.leftDate=t,this.rightDate=e&&e[1]&&t.getFullYear()!==i.getFullYear()&&this.unlinkPanels?i:Object(hi.nextYear)(this.leftDate)}}},methods:{handleClear:function(){this.minDate=null,this.maxDate=null,this.leftDate=tr(this.defaultValue)[0],this.rightDate=Object(hi.nextYear)(this.leftDate),this.$emit("pick",null)},handleChangeRange:function(e){this.minDate=e.minDate,this.maxDate=e.maxDate,this.rangeState=e.rangeState},handleRangePick:function(e){var n=this,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.defaultTime||[],r=Object(hi.modifyWithTimeString)(e.minDate,i[0]),o=Object(hi.modifyWithTimeString)(e.maxDate,i[1]);this.maxDate===o&&this.minDate===r||(this.onPick&&this.onPick(e),this.maxDate=o,this.minDate=r,setTimeout((function(){n.maxDate=o,n.minDate=r}),10),t&&this.handleConfirm())},handleShortcutClick:function(e){e.onClick&&e.onClick(this)},leftPrevYear:function(){this.leftDate=Object(hi.prevYear)(this.leftDate),this.unlinkPanels||(this.rightDate=Object(hi.prevYear)(this.rightDate))},rightNextYear:function(){this.unlinkPanels||(this.leftDate=Object(hi.nextYear)(this.leftDate)),this.rightDate=Object(hi.nextYear)(this.rightDate)},leftNextYear:function(){this.leftDate=Object(hi.nextYear)(this.leftDate)},rightPrevYear:function(){this.rightDate=Object(hi.prevYear)(this.rightDate)},handleConfirm:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isValidValue([this.minDate,this.maxDate])&&this.$emit("pick",[this.minDate,this.maxDate],e)},isValidValue:function(e){return Array.isArray(e)&&e&&e[0]&&e[1]&&Object(hi.isDate)(e[0])&&Object(hi.isDate)(e[1])&&e[0].getTime()<=e[1].getTime()&&("function"!=typeof this.disabledDate||!this.disabledDate(e[0])&&!this.disabledDate(e[1]))},resetView:function(){this.minDate=this.value&&Object(hi.isDate)(this.value[0])?new Date(this.value[0]):null,this.maxDate=this.value&&Object(hi.isDate)(this.value[0])?new Date(this.value[1]):null}},components:{MonthTable:qi,ElInput:h.a,ElButton:U.a}},nr,[],!1,null,null,null);ir.options.__file="packages/date-picker/src/panel/month-range.vue";var rr=ir.exports,or=function(e){return"daterange"===e||"datetimerange"===e?er:"monthrange"===e?rr:Ki},ar={mixins:[Pi],name:"ElDatePicker",props:{type:{type:String,default:"date"},timeArrowControl:Boolean},watch:{type:function(e){this.picker?(this.unmountPicker(),this.panel=or(e),this.mountPicker()):this.panel=or(e)}},created:function(){this.panel=or(this.type)},install:function(e){e.component(ar.name,ar)}},sr=ar,lr=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("transition",{attrs:{name:"el-zoom-in-top"},on:{"before-enter":e.handleMenuEnter,"after-leave":function(n){e.$emit("dodestroy")}}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],ref:"popper",staticClass:"el-picker-panel time-select el-popper",class:e.popperClass,style:{width:e.width+"px"}},[t("el-scrollbar",{attrs:{noresize:"","wrap-class":"el-picker-panel__content"}},e._l(e.items,(function(n){return t("div",{key:n.value,staticClass:"time-select-item",class:{selected:e.value===n.value,disabled:n.disabled,default:n.value===e.defaultValue},attrs:{disabled:n.disabled},on:{click:function(t){e.handleClick(n)}}},[e._v(e._s(n.value))])})),0)],1)])};lr._withStripped=!0;var cr=function(e){var n=(e||"").split(":");return n.length>=2?{hours:parseInt(n[0],10),minutes:parseInt(n[1],10)}:null},ur=function(e,n){var t=cr(e),i=cr(n),r=t.minutes+60*t.hours,o=i.minutes+60*i.hours;return r===o?0:r>o?1:-1},dr=function(e,n){var t=cr(e),i=cr(n),r={hours:t.hours,minutes:t.minutes};return r.minutes+=i.minutes,r.hours+=i.hours,r.hours+=Math.floor(r.minutes/60),r.minutes=r.minutes%60,function(e){return(e.hours<10?"0"+e.hours:e.hours)+":"+(e.minutes<10?"0"+e.minutes:e.minutes)}(r)},hr=r({components:{ElScrollbar:$.a},watch:{value:function(e){var n=this;e&&this.$nextTick((function(){return n.scrollToOption()}))}},methods:{handleClick:function(e){e.disabled||this.$emit("pick",e.value)},handleClear:function(){this.$emit("pick",null)},scrollToOption:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".selected",n=this.$refs.popper.querySelector(".el-picker-panel__content");Bn()(n,n.querySelector(e))},handleMenuEnter:function(){var e=this,n=-1!==this.items.map((function(e){return e.value})).indexOf(this.value),t=-1!==this.items.map((function(e){return e.value})).indexOf(this.defaultValue),i=(n?".selected":t&&".default")||".time-select-item:not(.disabled)";this.$nextTick((function(){return e.scrollToOption(i)}))},scrollDown:function(e){for(var n=this.items,t=n.length,i=n.length,r=n.map((function(e){return e.value})).indexOf(this.value);i--;)if(!n[r=(r+e+t)%t].disabled)return void this.$emit("pick",n[r].value,!0)},isValidValue:function(e){return-1!==this.items.filter((function(e){return!e.disabled})).map((function(e){return e.value})).indexOf(e)},handleKeydown:function(e){var n=e.keyCode;if(38===n||40===n){var t={40:1,38:-1}[n.toString()];return this.scrollDown(t),void e.stopPropagation()}}},data:function(){return{popperClass:"",start:"09:00",end:"18:00",step:"00:30",value:"",defaultValue:"",visible:!1,minTime:"",maxTime:"",width:0}},computed:{items:function(){var e=this.start,n=this.end,t=this.step,i=[];if(e&&n&&t)for(var r=e;ur(r,n)<=0;)i.push({value:r,disabled:ur(r,this.minTime||"-1:-1")<=0||ur(r,this.maxTime||"100:100")>=0}),r=dr(r,t);return i}}},lr,[],!1,null,null,null);hr.options.__file="packages/date-picker/src/panel/time-select.vue";var pr=hr.exports,fr={mixins:[Pi],name:"ElTimeSelect",componentName:"ElTimeSelect",props:{type:{type:String,default:"time-select"}},beforeCreate:function(){this.panel=pr},install:function(e){e.component(fr.name,fr)}},mr=fr,gr=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":function(n){e.$emit("dodestroy")}}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-time-range-picker el-picker-panel el-popper",class:e.popperClass},[t("div",{staticClass:"el-time-range-picker__content"},[t("div",{staticClass:"el-time-range-picker__cell"},[t("div",{staticClass:"el-time-range-picker__header"},[e._v(e._s(e.t("el.datepicker.startTime")))]),t("div",{staticClass:"el-time-range-picker__body el-time-panel__content",class:{"has-seconds":e.showSeconds,"is-arrow":e.arrowControl}},[t("time-spinner",{ref:"minSpinner",attrs:{"show-seconds":e.showSeconds,"am-pm-mode":e.amPmMode,"arrow-control":e.arrowControl,date:e.minDate},on:{change:e.handleMinChange,"select-range":e.setMinSelectionRange}})],1)]),t("div",{staticClass:"el-time-range-picker__cell"},[t("div",{staticClass:"el-time-range-picker__header"},[e._v(e._s(e.t("el.datepicker.endTime")))]),t("div",{staticClass:"el-time-range-picker__body el-time-panel__content",class:{"has-seconds":e.showSeconds,"is-arrow":e.arrowControl}},[t("time-spinner",{ref:"maxSpinner",attrs:{"show-seconds":e.showSeconds,"am-pm-mode":e.amPmMode,"arrow-control":e.arrowControl,date:e.maxDate},on:{change:e.handleMaxChange,"select-range":e.setMaxSelectionRange}})],1)])]),t("div",{staticClass:"el-time-panel__footer"},[t("button",{staticClass:"el-time-panel__btn cancel",attrs:{type:"button"},on:{click:function(n){e.handleCancel()}}},[e._v(e._s(e.t("el.datepicker.cancel")))]),t("button",{staticClass:"el-time-panel__btn confirm",attrs:{type:"button",disabled:e.btnDisabled},on:{click:function(n){e.handleConfirm()}}},[e._v(e._s(e.t("el.datepicker.confirm")))])])])])};gr._withStripped=!0;var vr=Object(hi.parseDate)("00:00:00","HH:mm:ss"),br=Object(hi.parseDate)("23:59:59","HH:mm:ss"),yr=function(e){return Object(hi.modifyDate)(br,e.getFullYear(),e.getMonth(),e.getDate())},wr=function(e,n){return new Date(Math.min(e.getTime()+n,yr(e).getTime()))},xr=r({mixins:[f.a],components:{TimeSpinner:Di},computed:{showSeconds:function(){return-1!==(this.format||"").indexOf("ss")},offset:function(){return this.showSeconds?11:8},spinner:function(){return this.selectionRange[0]<this.offset?this.$refs.minSpinner:this.$refs.maxSpinner},btnDisabled:function(){return this.minDate.getTime()>this.maxDate.getTime()},amPmMode:function(){return-1!==(this.format||"").indexOf("A")?"A":-1!==(this.format||"").indexOf("a")?"a":""}},data:function(){return{popperClass:"",minDate:new Date,maxDate:new Date,value:[],oldValue:[new Date,new Date],defaultValue:null,format:"HH:mm:ss",visible:!1,selectionRange:[0,2],arrowControl:!1}},watch:{value:function(e){Array.isArray(e)?(this.minDate=new Date(e[0]),this.maxDate=new Date(e[1])):Array.isArray(this.defaultValue)?(this.minDate=new Date(this.defaultValue[0]),this.maxDate=new Date(this.defaultValue[1])):this.defaultValue?(this.minDate=new Date(this.defaultValue),this.maxDate=wr(new Date(this.defaultValue),36e5)):(this.minDate=new Date,this.maxDate=wr(new Date,36e5))},visible:function(e){var n=this;e&&(this.oldValue=this.value,this.$nextTick((function(){return n.$refs.minSpinner.emitSelectRange("hours")})))}},methods:{handleClear:function(){this.$emit("pick",null)},handleCancel:function(){this.$emit("pick",this.oldValue)},handleMinChange:function(e){this.minDate=Object(hi.clearMilliseconds)(e),this.handleChange()},handleMaxChange:function(e){this.maxDate=Object(hi.clearMilliseconds)(e),this.handleChange()},handleChange:function(){var e;this.isValidValue([this.minDate,this.maxDate])&&(this.$refs.minSpinner.selectableRange=[[(e=this.minDate,Object(hi.modifyDate)(vr,e.getFullYear(),e.getMonth(),e.getDate())),this.maxDate]],this.$refs.maxSpinner.selectableRange=[[this.minDate,yr(this.maxDate)]],this.$emit("pick",[this.minDate,this.maxDate],!0))},setMinSelectionRange:function(e,n){this.$emit("select-range",e,n,"min"),this.selectionRange=[e,n]},setMaxSelectionRange:function(e,n){this.$emit("select-range",e,n,"max"),this.selectionRange=[e+this.offset,n+this.offset]},handleConfirm:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.$refs.minSpinner.selectableRange,t=this.$refs.maxSpinner.selectableRange;this.minDate=Object(hi.limitTimeRange)(this.minDate,n,this.format),this.maxDate=Object(hi.limitTimeRange)(this.maxDate,t,this.format),this.$emit("pick",[this.minDate,this.maxDate],e)},adjustSpinners:function(){this.$refs.minSpinner.adjustSpinners(),this.$refs.maxSpinner.adjustSpinners()},changeSelectionRange:function(e){var n=this.showSeconds?[0,3,6,11,14,17]:[0,3,8,11],t=["hours","minutes"].concat(this.showSeconds?["seconds"]:[]),i=(n.indexOf(this.selectionRange[0])+e+n.length)%n.length,r=n.length/2;i<r?this.$refs.minSpinner.emitSelectRange(t[i]):this.$refs.maxSpinner.emitSelectRange(t[i-r])},isValidValue:function(e){return Array.isArray(e)&&Object(hi.timeWithinRange)(this.minDate,this.$refs.minSpinner.selectableRange)&&Object(hi.timeWithinRange)(this.maxDate,this.$refs.maxSpinner.selectableRange)},handleKeydown:function(e){var n=e.keyCode,t={38:-1,40:1,37:-1,39:1};if(37===n||39===n){var i=t[n];return this.changeSelectionRange(i),void e.preventDefault()}if(38===n||40===n){var r=t[n];return this.spinner.scrollDown(r),void e.preventDefault()}}}},gr,[],!1,null,null,null);xr.options.__file="packages/date-picker/src/panel/time-range.vue";var _r=xr.exports,Sr={mixins:[Pi],name:"ElTimePicker",props:{isRange:Boolean,arrowControl:Boolean},data:function(){return{type:""}},watch:{isRange:function(e){this.picker?(this.unmountPicker(),this.type=e?"timerange":"time",this.panel=e?_r:Li,this.mountPicker()):(this.type=e?"timerange":"time",this.panel=e?_r:Li)}},created:function(){this.type=this.isRange?"timerange":"time",this.panel=this.isRange?_r:Li},install:function(e){e.component(Sr.name,Sr)}},kr=Sr,Cr=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("span",[t("transition",{attrs:{name:e.transition},on:{"after-enter":e.handleAfterEnter,"after-leave":e.handleAfterLeave}},[t("div",{directives:[{name:"show",rawName:"v-show",value:!e.disabled&&e.showPopper,expression:"!disabled && showPopper"}],ref:"popper",staticClass:"el-popover el-popper",class:[e.popperClass,e.content&&"el-popover--plain"],style:{width:e.width+"px"},attrs:{role:"tooltip",id:e.tooltipId,"aria-hidden":e.disabled||!e.showPopper?"true":"false"}},[e.title?t("div",{staticClass:"el-popover__title",domProps:{textContent:e._s(e.title)}}):e._e(),e._t("default",[e._v(e._s(e.content))])],2)]),t("span",{ref:"wrapper",staticClass:"el-popover__reference-wrapper"},[e._t("reference")],2)],1)};Cr._withStripped=!0;var Er=r({name:"ElPopover",mixins:[L.a],props:{trigger:{type:String,default:"click",validator:function(e){return["click","focus","hover","manual"].indexOf(e)>-1}},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:200},title:String,disabled:Boolean,content:String,reference:{},popperClass:String,width:{},visibleArrow:{default:!0},arrowOffset:{type:Number,default:0},transition:{type:String,default:"fade-in-linear"},tabindex:{type:Number,default:0}},computed:{tooltipId:function(){return"el-popover-"+Object(m.generateId)()}},watch:{showPopper:function(e){this.disabled||(e?this.$emit("show"):this.$emit("hide"))}},mounted:function(){var e=this,n=this.referenceElm=this.reference||this.$refs.reference,t=this.popper||this.$refs.popper;!n&&this.$refs.wrapper.children&&(n=this.referenceElm=this.$refs.wrapper.children[0]),n&&(Object(fe.addClass)(n,"el-popover__reference"),n.setAttribute("aria-describedby",this.tooltipId),n.setAttribute("tabindex",this.tabindex),t.setAttribute("tabindex",0),"click"!==this.trigger&&(Object(fe.on)(n,"focusin",(function(){e.handleFocus();var t=n.__vue__;t&&"function"==typeof t.focus&&t.focus()})),Object(fe.on)(t,"focusin",this.handleFocus),Object(fe.on)(n,"focusout",this.handleBlur),Object(fe.on)(t,"focusout",this.handleBlur)),Object(fe.on)(n,"keydown",this.handleKeydown),Object(fe.on)(n,"click",this.handleClick)),"click"===this.trigger?(Object(fe.on)(n,"click",this.doToggle),Object(fe.on)(document,"click",this.handleDocumentClick)):"hover"===this.trigger?(Object(fe.on)(n,"mouseenter",this.handleMouseEnter),Object(fe.on)(t,"mouseenter",this.handleMouseEnter),Object(fe.on)(n,"mouseleave",this.handleMouseLeave),Object(fe.on)(t,"mouseleave",this.handleMouseLeave)):"focus"===this.trigger&&(this.tabindex<0&&console.warn("[Element Warn][Popover]a negative taindex means that the element cannot be focused by tab key"),n.querySelector("input, textarea")?(Object(fe.on)(n,"focusin",this.doShow),Object(fe.on)(n,"focusout",this.doClose)):(Object(fe.on)(n,"mousedown",this.doShow),Object(fe.on)(n,"mouseup",this.doClose)))},beforeDestroy:function(){this.cleanup()},deactivated:function(){this.cleanup()},methods:{doToggle:function(){this.showPopper=!this.showPopper},doShow:function(){this.showPopper=!0},doClose:function(){this.showPopper=!1},handleFocus:function(){Object(fe.addClass)(this.referenceElm,"focusing"),"click"!==this.trigger&&"focus"!==this.trigger||(this.showPopper=!0)},handleClick:function(){Object(fe.removeClass)(this.referenceElm,"focusing")},handleBlur:function(){Object(fe.removeClass)(this.referenceElm,"focusing"),"click"!==this.trigger&&"focus"!==this.trigger||(this.showPopper=!1)},handleMouseEnter:function(){var e=this;clearTimeout(this._timer),this.openDelay?this._timer=setTimeout((function(){e.showPopper=!0}),this.openDelay):this.showPopper=!0},handleKeydown:function(e){27===e.keyCode&&"manual"!==this.trigger&&this.doClose()},handleMouseLeave:function(){var e=this;clearTimeout(this._timer),this.closeDelay?this._timer=setTimeout((function(){e.showPopper=!1}),this.closeDelay):this.showPopper=!1},handleDocumentClick:function(e){var n=this.reference||this.$refs.reference,t=this.popper||this.$refs.popper;!n&&this.$refs.wrapper.children&&(n=this.referenceElm=this.$refs.wrapper.children[0]),this.$el&&n&&!this.$el.contains(e.target)&&!n.contains(e.target)&&t&&!t.contains(e.target)&&(this.showPopper=!1)},handleAfterEnter:function(){this.$emit("after-enter")},handleAfterLeave:function(){this.$emit("after-leave"),this.doDestroy()},cleanup:function(){(this.openDelay||this.closeDelay)&&clearTimeout(this._timer)}},destroyed:function(){var e=this.reference;Object(fe.off)(e,"click",this.doToggle),Object(fe.off)(e,"mouseup",this.doClose),Object(fe.off)(e,"mousedown",this.doShow),Object(fe.off)(e,"focusin",this.doShow),Object(fe.off)(e,"focusout",this.doClose),Object(fe.off)(e,"mousedown",this.doShow),Object(fe.off)(e,"mouseup",this.doClose),Object(fe.off)(e,"mouseleave",this.handleMouseLeave),Object(fe.off)(e,"mouseenter",this.handleMouseEnter),Object(fe.off)(document,"click",this.handleDocumentClick)}},Cr,[],!1,null,null,null);Er.options.__file="packages/popover/src/main.vue";var Tr=Er.exports,Pr=function(e,n,t){var i=n.expression?n.value:n.arg,r=t.context.$refs[i];r&&(Array.isArray(r)?r[0].$refs.reference=e:r.$refs.reference=e)},Or={bind:function(e,n,t){Pr(e,n,t)},inserted:function(e,n,t){Pr(e,n,t)}};ht.a.directive("popover",Or),Tr.install=function(e){e.directive("popover",Or),e.component(Tr.name,Tr)},Tr.directive=Or;var Ar=Tr,jr={name:"ElTooltip",mixins:[L.a],props:{openDelay:{type:Number,default:0},disabled:Boolean,manual:Boolean,effect:{type:String,default:"dark"},arrowOffset:{type:Number,default:0},popperClass:String,content:String,visibleArrow:{default:!0},transition:{type:String,default:"el-fade-in-linear"},popperOptions:{default:function(){return{boundariesPadding:10,gpuAcceleration:!1}}},enterable:{type:Boolean,default:!0},hideAfter:{type:Number,default:0},tabindex:{type:Number,default:0}},data:function(){return{tooltipId:"el-tooltip-"+Object(m.generateId)(),timeoutPending:null,focusing:!1}},beforeCreate:function(){var e=this;this.$isServer||(this.popperVM=new ht.a({data:{node:""},render:function(e){return this.node}}).$mount(),this.debounceClose=A()(200,(function(){return e.handleClosePopper()})))},render:function(e){var n=this;this.popperVM&&(this.popperVM.node=e("transition",{attrs:{name:this.transition},on:{afterLeave:this.doDestroy}},[e("div",{on:{mouseleave:function(){n.setExpectedState(!1),n.debounceClose()},mouseenter:function(){n.setExpectedState(!0)}},ref:"popper",attrs:{role:"tooltip",id:this.tooltipId,"aria-hidden":this.disabled||!this.showPopper?"true":"false"},directives:[{name:"show",value:!this.disabled&&this.showPopper}],class:["el-tooltip__popper","is-"+this.effect,this.popperClass]},[this.$slots.content||this.content])]));var t=this.getFirstElement();if(!t)return null;var i=t.data=t.data||{};return i.staticClass=this.addTooltipClass(i.staticClass),t},mounted:function(){var e=this;this.referenceElm=this.$el,1===this.$el.nodeType&&(this.$el.setAttribute("aria-describedby",this.tooltipId),this.$el.setAttribute("tabindex",this.tabindex),Object(fe.on)(this.referenceElm,"mouseenter",this.show),Object(fe.on)(this.referenceElm,"mouseleave",this.hide),Object(fe.on)(this.referenceElm,"focus",(function(){if(e.$slots.default&&e.$slots.default.length){var n=e.$slots.default[0].componentInstance;n&&n.focus?n.focus():e.handleFocus()}else e.handleFocus()})),Object(fe.on)(this.referenceElm,"blur",this.handleBlur),Object(fe.on)(this.referenceElm,"click",this.removeFocusing)),this.value&&this.popperVM&&this.popperVM.$nextTick((function(){e.value&&e.updatePopper()}))},watch:{focusing:function(e){e?Object(fe.addClass)(this.referenceElm,"focusing"):Object(fe.removeClass)(this.referenceElm,"focusing")}},methods:{show:function(){this.setExpectedState(!0),this.handleShowPopper()},hide:function(){this.setExpectedState(!1),this.debounceClose()},handleFocus:function(){this.focusing=!0,this.show()},handleBlur:function(){this.focusing=!1,this.hide()},removeFocusing:function(){this.focusing=!1},addTooltipClass:function(e){return e?"el-tooltip "+e.replace("el-tooltip",""):"el-tooltip"},handleShowPopper:function(){var e=this;this.expectedState&&!this.manual&&(clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.showPopper=!0}),this.openDelay),this.hideAfter>0&&(this.timeoutPending=setTimeout((function(){e.showPopper=!1}),this.hideAfter)))},handleClosePopper:function(){this.enterable&&this.expectedState||this.manual||(clearTimeout(this.timeout),this.timeoutPending&&clearTimeout(this.timeoutPending),this.showPopper=!1,this.disabled&&this.doDestroy())},setExpectedState:function(e){!1===e&&clearTimeout(this.timeoutPending),this.expectedState=e},getFirstElement:function(){var e=this.$slots.default;if(!Array.isArray(e))return null;for(var n=null,t=0;t<e.length;t++)e[t]&&e[t].tag&&(n=e[t]);return n}},beforeDestroy:function(){this.popperVM&&this.popperVM.$destroy()},destroyed:function(){var e=this.referenceElm;1===e.nodeType&&(Object(fe.off)(e,"mouseenter",this.show),Object(fe.off)(e,"mouseleave",this.hide),Object(fe.off)(e,"focus",this.handleFocus),Object(fe.off)(e,"blur",this.handleBlur),Object(fe.off)(e,"click",this.removeFocusing))},install:function(e){e.component(jr.name,jr)}},Ir=jr,Dr=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("transition",{attrs:{name:"msgbox-fade"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-message-box__wrapper",attrs:{tabindex:"-1",role:"dialog","aria-modal":"true","aria-label":e.title||"dialog"},on:{click:function(n){return n.target!==n.currentTarget?null:e.handleWrapperClick(n)}}},[t("div",{staticClass:"el-message-box",class:[e.customClass,e.center&&"el-message-box--center"]},[null!==e.title?t("div",{staticClass:"el-message-box__header"},[t("div",{staticClass:"el-message-box__title"},[e.icon&&e.center?t("div",{class:["el-message-box__status",e.icon]}):e._e(),t("span",[e._v(e._s(e.title))])]),e.showClose?t("button",{staticClass:"el-message-box__headerbtn",attrs:{type:"button","aria-label":"Close"},on:{click:function(n){e.handleAction(e.distinguishCancelAndClose?"close":"cancel")},keydown:function(n){if(!("button"in n)&&e._k(n.keyCode,"enter",13,n.key,"Enter"))return null;e.handleAction(e.distinguishCancelAndClose?"close":"cancel")}}},[t("i",{staticClass:"el-message-box__close el-icon-close"})]):e._e()]):e._e(),t("div",{staticClass:"el-message-box__content"},[t("div",{staticClass:"el-message-box__container"},[e.icon&&!e.center&&""!==e.message?t("div",{class:["el-message-box__status",e.icon]}):e._e(),""!==e.message?t("div",{staticClass:"el-message-box__message"},[e._t("default",[e.dangerouslyUseHTMLString?t("p",{domProps:{innerHTML:e._s(e.message)}}):t("p",[e._v(e._s(e.message))])])],2):e._e()]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showInput,expression:"showInput"}],staticClass:"el-message-box__input"},[t("el-input",{ref:"input",attrs:{type:e.inputType,placeholder:e.inputPlaceholder},nativeOn:{keydown:function(n){return!("button"in n)&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.handleInputEnter(n)}},model:{value:e.inputValue,callback:function(n){e.inputValue=n},expression:"inputValue"}}),t("div",{staticClass:"el-message-box__errormsg",style:{visibility:e.editorErrorMessage?"visible":"hidden"}},[e._v(e._s(e.editorErrorMessage))])],1)]),t("div",{staticClass:"el-message-box__btns"},[e.showCancelButton?t("el-button",{class:[e.cancelButtonClasses],attrs:{loading:e.cancelButtonLoading,round:e.roundButton,size:"small"},on:{keydown:function(n){if(!("button"in n)&&e._k(n.keyCode,"enter",13,n.key,"Enter"))return null;e.handleAction("cancel")}},nativeOn:{click:function(n){e.handleAction("cancel")}}},[e._v("\n          "+e._s(e.cancelButtonText||e.t("el.messagebox.cancel"))+"\n        ")]):e._e(),t("el-button",{directives:[{name:"show",rawName:"v-show",value:e.showConfirmButton,expression:"showConfirmButton"}],ref:"confirm",class:[e.confirmButtonClasses],attrs:{loading:e.confirmButtonLoading,round:e.roundButton,size:"small"},on:{keydown:function(n){if(!("button"in n)&&e._k(n.keyCode,"enter",13,n.key,"Enter"))return null;e.handleAction("confirm")}},nativeOn:{click:function(n){e.handleAction("confirm")}}},[e._v("\n          "+e._s(e.confirmButtonText||e.t("el.messagebox.confirm"))+"\n        ")])],1)])])])};Dr._withStripped=!0;var Mr=t(15),Lr=t.n(Mr),Nr=t(39),$r=t.n(Nr),Fr=void 0,Rr={success:"success",info:"info",warning:"warning",error:"error"},Br=r({mixins:[w.a,f.a],props:{modal:{default:!0},lockScroll:{default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{default:!0},closeOnPressEscape:{default:!0},closeOnHashChange:{default:!0},center:{default:!1,type:Boolean},roundButton:{default:!1,type:Boolean}},components:{ElInput:h.a,ElButton:U.a},computed:{icon:function(){var e=this.type;return this.iconClass||(e&&Rr[e]?"el-icon-"+Rr[e]:"")},confirmButtonClasses:function(){return"el-button--primary "+this.confirmButtonClass},cancelButtonClasses:function(){return""+this.cancelButtonClass}},methods:{getSafeClose:function(){var e=this,n=this.uid;return function(){e.$nextTick((function(){n===e.uid&&e.doClose()}))}},doClose:function(){var e=this;this.visible&&(this.visible=!1,this._closing=!0,this.onClose&&this.onClose(),Fr.closeDialog(),this.lockScroll&&setTimeout(this.restoreBodyStyle,200),this.opened=!1,this.doAfterClose(),setTimeout((function(){e.action&&e.callback(e.action,e)})))},handleWrapperClick:function(){this.closeOnClickModal&&this.handleAction(this.distinguishCancelAndClose?"close":"cancel")},handleInputEnter:function(){if("textarea"!==this.inputType)return this.handleAction("confirm")},handleAction:function(e){("prompt"!==this.$type||"confirm"!==e||this.validate())&&(this.action=e,"function"==typeof this.beforeClose?(this.close=this.getSafeClose(),this.beforeClose(e,this,this.close)):this.doClose())},validate:function(){if("prompt"===this.$type){var e=this.inputPattern;if(e&&!e.test(this.inputValue||""))return this.editorErrorMessage=this.inputErrorMessage||Object(Mr.t)("el.messagebox.error"),Object(fe.addClass)(this.getInputElement(),"invalid"),!1;var n=this.inputValidator;if("function"==typeof n){var t=n(this.inputValue);if(!1===t)return this.editorErrorMessage=this.inputErrorMessage||Object(Mr.t)("el.messagebox.error"),Object(fe.addClass)(this.getInputElement(),"invalid"),!1;if("string"==typeof t)return this.editorErrorMessage=t,Object(fe.addClass)(this.getInputElement(),"invalid"),!1}}return this.editorErrorMessage="",Object(fe.removeClass)(this.getInputElement(),"invalid"),!0},getFirstFocus:function(){var e=this.$el.querySelector(".el-message-box__btns .el-button"),n=this.$el.querySelector(".el-message-box__btns .el-message-box__title");return e||n},getInputElement:function(){var e=this.$refs.input.$refs;return e.input||e.textarea},handleClose:function(){this.handleAction("close")}},watch:{inputValue:{immediate:!0,handler:function(e){var n=this;this.$nextTick((function(t){"prompt"===n.$type&&null!==e&&n.validate()}))}},visible:function(e){var n=this;e&&(this.uid++,"alert"!==this.$type&&"confirm"!==this.$type||this.$nextTick((function(){n.$refs.confirm.$el.focus()})),this.focusAfterClosed=document.activeElement,Fr=new $r.a(this.$el,this.focusAfterClosed,this.getFirstFocus())),"prompt"===this.$type&&(e?setTimeout((function(){n.$refs.input&&n.$refs.input.$el&&n.getInputElement().focus()}),500):(this.editorErrorMessage="",Object(fe.removeClass)(this.getInputElement(),"invalid")))}},mounted:function(){var e=this;this.$nextTick((function(){e.closeOnHashChange&&window.addEventListener("hashchange",e.close)}))},beforeDestroy:function(){this.closeOnHashChange&&window.removeEventListener("hashchange",this.close),setTimeout((function(){Fr.closeDialog()}))},data:function(){return{uid:1,title:void 0,message:"",type:"",iconClass:"",customClass:"",showInput:!1,inputValue:null,inputPlaceholder:"",inputType:"text",inputPattern:null,inputValidator:null,inputErrorMessage:"",showConfirmButton:!0,showCancelButton:!1,action:"",confirmButtonText:"",cancelButtonText:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonClass:"",confirmButtonDisabled:!1,cancelButtonClass:"",editorErrorMessage:null,callback:null,dangerouslyUseHTMLString:!1,focusAfterClosed:null,isOnComposition:!1,distinguishCancelAndClose:!1}}},Dr,[],!1,null,null,null);Br.options.__file="packages/message-box/src/main.vue";var Vr=Br.exports,zr=t(23),qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hr={title:null,message:"",type:"",iconClass:"",showInput:!1,showClose:!0,modalFade:!0,lockScroll:!0,closeOnClickModal:!0,closeOnPressEscape:!0,closeOnHashChange:!0,inputValue:null,inputPlaceholder:"",inputType:"text",inputPattern:null,inputValidator:null,inputErrorMessage:"",showConfirmButton:!0,showCancelButton:!1,confirmButtonPosition:"right",confirmButtonHighlight:!1,cancelButtonHighlight:!1,confirmButtonText:"",cancelButtonText:"",confirmButtonClass:"",cancelButtonClass:"",customClass:"",beforeClose:null,dangerouslyUseHTMLString:!1,center:!1,roundButton:!1,distinguishCancelAndClose:!1},Wr=ht.a.extend(Vr),Ur=void 0,Jr=void 0,Yr=[],Gr=function(e){if(Ur){var n=Ur.callback;"function"==typeof n&&(Jr.showInput?n(Jr.inputValue,e):n(e)),Ur.resolve&&("confirm"===e?Jr.showInput?Ur.resolve({value:Jr.inputValue,action:e}):Ur.resolve(e):!Ur.reject||"cancel"!==e&&"close"!==e||Ur.reject(e))}},Kr=function e(){if(Jr||((Jr=new Wr({el:document.createElement("div")})).callback=Gr),Jr.action="",(!Jr.visible||Jr.closeTimer)&&Yr.length>0){var n=(Ur=Yr.shift()).options;for(var t in n)n.hasOwnProperty(t)&&(Jr[t]=n[t]);void 0===n.callback&&(Jr.callback=Gr);var i=Jr.callback;Jr.callback=function(n,t){i(n,t),e()},Object(zr.isVNode)(Jr.message)?(Jr.$slots.default=[Jr.message],Jr.message=null):delete Jr.$slots.default,["modal","showClose","closeOnClickModal","closeOnPressEscape","closeOnHashChange"].forEach((function(e){void 0===Jr[e]&&(Jr[e]=!0)})),document.body.appendChild(Jr.$el),ht.a.nextTick((function(){Jr.visible=!0}))}},Xr=function e(n,t){if(!ht.a.prototype.$isServer){if("string"==typeof n||Object(zr.isVNode)(n)?(n={message:n},"string"==typeof arguments[1]&&(n.title=arguments[1])):n.callback&&!t&&(t=n.callback),"undefined"!=typeof Promise)return new Promise((function(i,r){Yr.push({options:ze()({},Hr,e.defaults,n),callback:t,resolve:i,reject:r}),Kr()}));Yr.push({options:ze()({},Hr,e.defaults,n),callback:t}),Kr()}};Xr.setDefaults=function(e){Xr.defaults=e},Xr.alert=function(e,n,t){return"object"===(void 0===n?"undefined":qr(n))?(t=n,n=""):void 0===n&&(n=""),Xr(ze()({title:n,message:e,$type:"alert",closeOnPressEscape:!1,closeOnClickModal:!1},t))},Xr.confirm=function(e,n,t){return"object"===(void 0===n?"undefined":qr(n))?(t=n,n=""):void 0===n&&(n=""),Xr(ze()({title:n,message:e,$type:"confirm",showCancelButton:!0},t))},Xr.prompt=function(e,n,t){return"object"===(void 0===n?"undefined":qr(n))?(t=n,n=""):void 0===n&&(n=""),Xr(ze()({title:n,message:e,showCancelButton:!0,showInput:!0,$type:"prompt"},t))},Xr.close=function(){Jr.doClose(),Jr.visible=!1,Yr=[],Ur=null};var Qr=Xr,Zr=function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"el-breadcrumb",attrs:{"aria-label":"Breadcrumb",role:"navigation"}},[this._t("default")],2)};Zr._withStripped=!0;var eo=r({name:"ElBreadcrumb",props:{separator:{type:String,default:"/"},separatorClass:{type:String,default:""}},provide:function(){return{elBreadcrumb:this}},mounted:function(){var e=this.$el.querySelectorAll(".el-breadcrumb__item");e.length&&e[e.length-1].setAttribute("aria-current","page")}},Zr,[],!1,null,null,null);eo.options.__file="packages/breadcrumb/src/breadcrumb.vue";var no=eo.exports;no.install=function(e){e.component(no.name,no)};var to=no,io=function(){var e=this.$createElement,n=this._self._c||e;return n("span",{staticClass:"el-breadcrumb__item"},[n("span",{ref:"link",class:["el-breadcrumb__inner",this.to?"is-link":""],attrs:{role:"link"}},[this._t("default")],2),this.separatorClass?n("i",{staticClass:"el-breadcrumb__separator",class:this.separatorClass}):n("span",{staticClass:"el-breadcrumb__separator",attrs:{role:"presentation"}},[this._v(this._s(this.separator))])])};io._withStripped=!0;var ro=r({name:"ElBreadcrumbItem",props:{to:{},replace:Boolean},data:function(){return{separator:"",separatorClass:""}},inject:["elBreadcrumb"],mounted:function(){var e=this;this.separator=this.elBreadcrumb.separator,this.separatorClass=this.elBreadcrumb.separatorClass;var n=this.$refs.link;n.setAttribute("role","link"),n.addEventListener("click",(function(n){var t=e.to,i=e.$router;t&&i&&(e.replace?i.replace(t):i.push(t))}))}},io,[],!1,null,null,null);ro.options.__file="packages/breadcrumb/src/breadcrumb-item.vue";var oo=ro.exports;oo.install=function(e){e.component(oo.name,oo)};var ao=oo,so=function(){var e=this.$createElement;return(this._self._c||e)("form",{staticClass:"el-form",class:[this.labelPosition?"el-form--label-"+this.labelPosition:"",{"el-form--inline":this.inline}]},[this._t("default")],2)};so._withStripped=!0;var lo=r({name:"ElForm",componentName:"ElForm",provide:function(){return{elForm:this}},props:{model:Object,rules:Object,labelPosition:String,labelWidth:String,labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},size:String,disabled:Boolean,validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:{type:Boolean,default:!1}},watch:{rules:function(){this.fields.forEach((function(e){e.removeValidateEvents(),e.addValidateEvents()})),this.validateOnRuleChange&&this.validate((function(){}))}},computed:{autoLabelWidth:function(){if(!this.potentialLabelWidthArr.length)return 0;var e=Math.max.apply(Math,this.potentialLabelWidthArr);return e?e+"px":""}},data:function(){return{fields:[],potentialLabelWidthArr:[]}},created:function(){var e=this;this.$on("el.form.addField",(function(n){n&&e.fields.push(n)})),this.$on("el.form.removeField",(function(n){n.prop&&e.fields.splice(e.fields.indexOf(n),1)}))},methods:{resetFields:function(){this.model?this.fields.forEach((function(e){e.resetField()})):console.warn("[Element Warn][Form]model is required for resetFields to work.")},clearValidate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=e.length?"string"==typeof e?this.fields.filter((function(n){return e===n.prop})):this.fields.filter((function(n){return e.indexOf(n.prop)>-1})):this.fields;n.forEach((function(e){e.clearValidate()}))},validate:function(e){var n=this;if(this.model){var t=void 0;"function"!=typeof e&&window.Promise&&(t=new window.Promise((function(n,t){e=function(e){e?n(e):t(e)}})));var i=!0,r=0;0===this.fields.length&&e&&e(!0);var o={};return this.fields.forEach((function(t){t.validate("",(function(t,a){t&&(i=!1),o=ze()({},o,a),"function"==typeof e&&++r===n.fields.length&&e(i,o)}))})),t||void 0}console.warn("[Element Warn][Form]model is required for validate to work!")},validateField:function(e,n){e=[].concat(e);var t=this.fields.filter((function(n){return-1!==e.indexOf(n.prop)}));t.length?t.forEach((function(e){e.validate("",n)})):console.warn("[Element Warn]please pass correct props!")},getLabelWidthIndex:function(e){var n=this.potentialLabelWidthArr.indexOf(e);if(-1===n)throw new Error("[ElementForm]unpected width ",e);return n},registerLabelWidth:function(e,n){if(e&&n){var t=this.getLabelWidthIndex(n);this.potentialLabelWidthArr.splice(t,1,e)}else e&&this.potentialLabelWidthArr.push(e)},deregisterLabelWidth:function(e){var n=this.getLabelWidthIndex(e);this.potentialLabelWidthArr.splice(n,1)}}},so,[],!1,null,null,null);lo.options.__file="packages/form/src/form.vue";var co=lo.exports;co.install=function(e){e.component(co.name,co)};var uo=co,ho=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"el-form-item",class:[{"el-form-item--feedback":e.elForm&&e.elForm.statusIcon,"is-error":"error"===e.validateState,"is-validating":"validating"===e.validateState,"is-success":"success"===e.validateState,"is-required":e.isRequired||e.required,"is-no-asterisk":e.elForm&&e.elForm.hideRequiredAsterisk},e.sizeClass?"el-form-item--"+e.sizeClass:""]},[t("label-wrap",{attrs:{"is-auto-width":e.labelStyle&&"auto"===e.labelStyle.width,"update-all":"auto"===e.form.labelWidth}},[e.label||e.$slots.label?t("label",{staticClass:"el-form-item__label",style:e.labelStyle,attrs:{for:e.labelFor}},[e._t("label",[e._v(e._s(e.label+e.form.labelSuffix))])],2):e._e()]),t("div",{staticClass:"el-form-item__content",style:e.contentStyle},[e._t("default"),t("transition",{attrs:{name:"el-zoom-in-top"}},["error"===e.validateState&&e.showMessage&&e.form.showMessage?e._t("error",[t("div",{staticClass:"el-form-item__error",class:{"el-form-item__error--inline":"boolean"==typeof e.inlineMessage?e.inlineMessage:e.elForm&&e.elForm.inlineMessage||!1}},[e._v("\n          "+e._s(e.validateMessage)+"\n        ")])],{error:e.validateMessage}):e._e()],2)],2)],1)};ho._withStripped=!0;var po=t(40),fo=t.n(po),mo=r({props:{isAutoWidth:Boolean,updateAll:Boolean},inject:["elForm","elFormItem"],render:function(){var e=arguments[0],n=this.$slots.default;if(!n)return null;if(this.isAutoWidth){var t=this.elForm.autoLabelWidth,i={};if(t&&"auto"!==t){var r=parseInt(t,10)-this.computedWidth;r&&(i.marginLeft=r+"px")}return e("div",{class:"el-form-item__label-wrap",style:i},[n])}return n[0]},methods:{getLabelWidth:function(){if(this.$el&&this.$el.firstElementChild){var e=window.getComputedStyle(this.$el.firstElementChild).width;return Math.ceil(parseFloat(e))}return 0},updateLabelWidth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"update";this.$slots.default&&this.isAutoWidth&&this.$el.firstElementChild&&("update"===e?this.computedWidth=this.getLabelWidth():"remove"===e&&this.elForm.deregisterLabelWidth(this.computedWidth))}},watch:{computedWidth:function(e,n){this.updateAll&&(this.elForm.registerLabelWidth(e,n),this.elFormItem.updateComputedLabelWidth(e))}},data:function(){return{computedWidth:0}},mounted:function(){this.updateLabelWidth("update")},updated:function(){this.updateLabelWidth("update")},beforeDestroy:function(){this.updateLabelWidth("remove")}},void 0,void 0,!1,null,null,null);mo.options.__file="packages/form/src/label-wrap.vue";var go=mo.exports,vo=r({name:"ElFormItem",componentName:"ElFormItem",mixins:[k.a],provide:function(){return{elFormItem:this}},inject:["elForm"],props:{label:String,labelWidth:String,prop:String,required:{type:Boolean,default:void 0},rules:[Object,Array],error:String,validateStatus:String,for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:String},components:{LabelWrap:go},watch:{error:{immediate:!0,handler:function(e){this.validateMessage=e,this.validateState=e?"error":""}},validateStatus:function(e){this.validateState=e}},computed:{labelFor:function(){return this.for||this.prop},labelStyle:function(){var e={};if("top"===this.form.labelPosition)return e;var n=this.labelWidth||this.form.labelWidth;return n&&(e.width=n),e},contentStyle:function(){var e={},n=this.label;if("top"===this.form.labelPosition||this.form.inline)return e;if(!n&&!this.labelWidth&&this.isNested)return e;var t=this.labelWidth||this.form.labelWidth;return"auto"===t?"auto"===this.labelWidth?e.marginLeft=this.computedLabelWidth:"auto"===this.form.labelWidth&&(e.marginLeft=this.elForm.autoLabelWidth):e.marginLeft=t,e},form:function(){for(var e=this.$parent,n=e.$options.componentName;"ElForm"!==n;)"ElFormItem"===n&&(this.isNested=!0),n=(e=e.$parent).$options.componentName;return e},fieldValue:function(){var e=this.form.model;if(e&&this.prop){var n=this.prop;return-1!==n.indexOf(":")&&(n=n.replace(/:/,".")),Object(m.getPropByPath)(e,n,!0).v}},isRequired:function(){var e=this.getRules(),n=!1;return e&&e.length&&e.every((function(e){return!e.required||(n=!0,!1)})),n},_formSize:function(){return this.elForm.size},elFormItemSize:function(){return this.size||this._formSize},sizeClass:function(){return this.elFormItemSize||(this.$ELEMENT||{}).size}},data:function(){return{validateState:"",validateMessage:"",validateDisabled:!1,validator:{},isNested:!1,computedLabelWidth:""}},methods:{validate:function(e){var n=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.noop;this.validateDisabled=!1;var i=this.getFilteredRule(e);if((!i||0===i.length)&&void 0===this.required)return t(),!0;this.validateState="validating";var r={};i&&i.length>0&&i.forEach((function(e){delete e.trigger})),r[this.prop]=i;var o=new fo.a(r),a={};a[this.prop]=this.fieldValue,o.validate(a,{firstFields:!0},(function(e,i){n.validateState=e?"error":"success",n.validateMessage=e?e[0].message:"",t(n.validateMessage,i),n.elForm&&n.elForm.$emit("validate",n.prop,!e,n.validateMessage||null)}))},clearValidate:function(){this.validateState="",this.validateMessage="",this.validateDisabled=!1},resetField:function(){var e=this;this.validateState="",this.validateMessage="";var n=this.form.model,t=this.fieldValue,i=this.prop;-1!==i.indexOf(":")&&(i=i.replace(/:/,"."));var r=Object(m.getPropByPath)(n,i,!0);this.validateDisabled=!0,Array.isArray(t)?r.o[r.k]=[].concat(this.initialValue):r.o[r.k]=this.initialValue,this.$nextTick((function(){e.validateDisabled=!1})),this.broadcast("ElTimeSelect","fieldReset",this.initialValue)},getRules:function(){var e=this.form.rules,n=this.rules,t=void 0!==this.required?{required:!!this.required}:[],i=Object(m.getPropByPath)(e,this.prop||"");return e=e?i.o[this.prop||""]||i.v:[],[].concat(n||e||[]).concat(t)},getFilteredRule:function(e){return this.getRules().filter((function(n){return!n.trigger||""===e||(Array.isArray(n.trigger)?n.trigger.indexOf(e)>-1:n.trigger===e)})).map((function(e){return ze()({},e)}))},onFieldBlur:function(){this.validate("blur")},onFieldChange:function(){this.validateDisabled?this.validateDisabled=!1:this.validate("change")},updateComputedLabelWidth:function(e){this.computedLabelWidth=e?e+"px":""},addValidateEvents:function(){(this.getRules().length||void 0!==this.required)&&(this.$on("el.form.blur",this.onFieldBlur),this.$on("el.form.change",this.onFieldChange))},removeValidateEvents:function(){this.$off()}},mounted:function(){if(this.prop){this.dispatch("ElForm","el.form.addField",[this]);var e=this.fieldValue;Array.isArray(e)&&(e=[].concat(e)),Object.defineProperty(this,"initialValue",{value:e}),this.addValidateEvents()}},beforeDestroy:function(){this.dispatch("ElForm","el.form.removeField",[this])}},ho,[],!1,null,null,null);vo.options.__file="packages/form/src/form-item.vue";var bo=vo.exports;bo.install=function(e){e.component(bo.name,bo)};var yo=bo,wo=function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"el-tabs__active-bar",class:"is-"+this.rootTabs.tabPosition,style:this.barStyle})};wo._withStripped=!0;var xo=r({name:"TabBar",props:{tabs:Array},inject:["rootTabs"],computed:{barStyle:{get:function(){var e=this,n={},t=0,i=0,r=-1!==["top","bottom"].indexOf(this.rootTabs.tabPosition)?"width":"height",o="width"===r?"x":"y",a=function(e){return e.toLowerCase().replace(/( |^)[a-z]/g,(function(e){return e.toUpperCase()}))};this.tabs.every((function(n,o){var s=Object(m.arrayFind)(e.$parent.$refs.tabs||[],(function(e){return e.id.replace("tab-","")===n.paneName}));if(!s)return!1;if(n.active){i=s["client"+a(r)];var l=window.getComputedStyle(s);return"width"===r&&e.tabs.length>1&&(i-=parseFloat(l.paddingLeft)+parseFloat(l.paddingRight)),"width"===r&&(t+=parseFloat(l.paddingLeft)),!1}return t+=s["client"+a(r)],!0}));var s="translate"+a(o)+"("+t+"px)";return n[r]=i+"px",n.transform=s,n.msTransform=s,n.webkitTransform=s,n}}}},wo,[],!1,null,null,null);xo.options.__file="packages/tabs/src/tab-bar.vue";var _o=xo.exports;function So(){}var ko=function(e){return e.toLowerCase().replace(/( |^)[a-z]/g,(function(e){return e.toUpperCase()}))},Co=r({name:"TabNav",components:{TabBar:_o},inject:["rootTabs"],props:{panes:Array,currentName:String,editable:Boolean,onTabClick:{type:Function,default:So},onTabRemove:{type:Function,default:So},type:String,stretch:Boolean},data:function(){return{scrollable:!1,navOffset:0,isFocus:!1,focusable:!0}},computed:{navStyle:function(){return{transform:"translate"+(-1!==["top","bottom"].indexOf(this.rootTabs.tabPosition)?"X":"Y")+"(-"+this.navOffset+"px)"}},sizeName:function(){return-1!==["top","bottom"].indexOf(this.rootTabs.tabPosition)?"width":"height"}},methods:{scrollPrev:function(){var e=this.$refs.navScroll["offset"+ko(this.sizeName)],n=this.navOffset;if(n){var t=n>e?n-e:0;this.navOffset=t}},scrollNext:function(){var e=this.$refs.nav["offset"+ko(this.sizeName)],n=this.$refs.navScroll["offset"+ko(this.sizeName)],t=this.navOffset;if(!(e-t<=n)){var i=e-t>2*n?t+n:e-n;this.navOffset=i}},scrollToActiveTab:function(){if(this.scrollable){var e=this.$refs.nav,n=this.$el.querySelector(".is-active");if(n){var t=this.$refs.navScroll,i=-1!==["top","bottom"].indexOf(this.rootTabs.tabPosition),r=n.getBoundingClientRect(),o=t.getBoundingClientRect(),a=i?e.offsetWidth-o.width:e.offsetHeight-o.height,s=this.navOffset,l=s;i?(r.left<o.left&&(l=s-(o.left-r.left)),r.right>o.right&&(l=s+r.right-o.right)):(r.top<o.top&&(l=s-(o.top-r.top)),r.bottom>o.bottom&&(l=s+(r.bottom-o.bottom))),l=Math.max(l,0),this.navOffset=Math.min(l,a)}}},update:function(){if(this.$refs.nav){var e=this.sizeName,n=this.$refs.nav["offset"+ko(e)],t=this.$refs.navScroll["offset"+ko(e)],i=this.navOffset;if(t<n){var r=this.navOffset;this.scrollable=this.scrollable||{},this.scrollable.prev=r,this.scrollable.next=r+t<n,n-r<t&&(this.navOffset=n-t)}else this.scrollable=!1,i>0&&(this.navOffset=0)}},changeTab:function(e){var n=e.keyCode,t=void 0,i=void 0,r=void 0;-1!==[37,38,39,40].indexOf(n)&&(r=e.currentTarget.querySelectorAll("[role=tab]"),i=Array.prototype.indexOf.call(r,e.target),r[t=37===n||38===n?0===i?r.length-1:i-1:i<r.length-1?i+1:0].focus(),r[t].click(),this.setFocus())},setFocus:function(){this.focusable&&(this.isFocus=!0)},removeFocus:function(){this.isFocus=!1},visibilityChangeHandler:function(){var e=this,n=document.visibilityState;"hidden"===n?this.focusable=!1:"visible"===n&&setTimeout((function(){e.focusable=!0}),50)},windowBlurHandler:function(){this.focusable=!1},windowFocusHandler:function(){var e=this;setTimeout((function(){e.focusable=!0}),50)}},updated:function(){this.update()},render:function(e){var n=this,t=this.type,i=this.panes,r=this.editable,o=this.stretch,a=this.onTabClick,s=this.onTabRemove,l=this.navStyle,c=this.scrollable,u=this.scrollNext,d=this.scrollPrev,h=this.changeTab,p=this.setFocus,f=this.removeFocus,m=c?[e("span",{class:["el-tabs__nav-prev",c.prev?"":"is-disabled"],on:{click:d}},[e("i",{class:"el-icon-arrow-left"})]),e("span",{class:["el-tabs__nav-next",c.next?"":"is-disabled"],on:{click:u}},[e("i",{class:"el-icon-arrow-right"})])]:null,g=this._l(i,(function(t,i){var o,l=t.name||t.index||i,c=t.isClosable||r;t.index=""+i;var u=c?e("span",{class:"el-icon-close",on:{click:function(e){s(t,e)}}}):null,d=t.$slots.label||t.label,h=t.active?0:-1;return e("div",{class:(o={"el-tabs__item":!0},o["is-"+n.rootTabs.tabPosition]=!0,o["is-active"]=t.active,o["is-disabled"]=t.disabled,o["is-closable"]=c,o["is-focus"]=n.isFocus,o),attrs:{id:"tab-"+l,"aria-controls":"pane-"+l,role:"tab","aria-selected":t.active,tabindex:h},key:"tab-"+l,ref:"tabs",refInFor:!0,on:{focus:function(){p()},blur:function(){f()},click:function(e){f(),a(t,l,e)},keydown:function(e){!c||46!==e.keyCode&&8!==e.keyCode||s(t,e)}}},[d,u])}));return e("div",{class:["el-tabs__nav-wrap",c?"is-scrollable":"","is-"+this.rootTabs.tabPosition]},[m,e("div",{class:["el-tabs__nav-scroll"],ref:"navScroll"},[e("div",{class:["el-tabs__nav","is-"+this.rootTabs.tabPosition,o&&-1!==["top","bottom"].indexOf(this.rootTabs.tabPosition)?"is-stretch":""],ref:"nav",style:l,attrs:{role:"tablist"},on:{keydown:h}},[t?null:e("tab-bar",{attrs:{tabs:i}}),g])])])},mounted:function(){var e=this;Object(Fn.addResizeListener)(this.$el,this.update),document.addEventListener("visibilitychange",this.visibilityChangeHandler),window.addEventListener("blur",this.windowBlurHandler),window.addEventListener("focus",this.windowFocusHandler),setTimeout((function(){e.scrollToActiveTab()}),0)},beforeDestroy:function(){this.$el&&this.update&&Object(Fn.removeResizeListener)(this.$el,this.update),document.removeEventListener("visibilitychange",this.visibilityChangeHandler),window.removeEventListener("blur",this.windowBlurHandler),window.removeEventListener("focus",this.windowFocusHandler)}},void 0,void 0,!1,null,null,null);Co.options.__file="packages/tabs/src/tab-nav.vue";var Eo=r({name:"ElTabs",components:{TabNav:Co.exports},props:{type:String,activeName:String,closable:Boolean,addable:Boolean,value:{},editable:Boolean,tabPosition:{type:String,default:"top"},beforeLeave:Function,stretch:Boolean},provide:function(){return{rootTabs:this}},data:function(){return{currentName:this.value||this.activeName,panes:[]}},watch:{activeName:function(e){this.setCurrentName(e)},value:function(e){this.setCurrentName(e)},currentName:function(e){var n=this;this.$refs.nav&&this.$nextTick((function(){n.$refs.nav.$nextTick((function(e){n.$refs.nav.scrollToActiveTab()}))}))}},methods:{calcPaneInstances:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.$slots.default){var t=this.$slots.default.filter((function(e){return e.tag&&e.componentOptions&&"ElTabPane"===e.componentOptions.Ctor.options.name})),i=t.map((function(e){return e.componentInstance})),r=!(i.length===this.panes.length&&i.every((function(n,t){return n===e.panes[t]})));(n||r)&&(this.panes=i)}else 0!==this.panes.length&&(this.panes=[])},handleTabClick:function(e,n,t){e.disabled||(this.setCurrentName(n),this.$emit("tab-click",e,t))},handleTabRemove:function(e,n){e.disabled||(n.stopPropagation(),this.$emit("edit",e.name,"remove"),this.$emit("tab-remove",e.name))},handleTabAdd:function(){this.$emit("edit",null,"add"),this.$emit("tab-add")},setCurrentName:function(e){var n=this,t=function(){n.currentName=e,n.$emit("input",e)};if(this.currentName!==e&&this.beforeLeave){var i=this.beforeLeave(e,this.currentName);i&&i.then?i.then((function(){t(),n.$refs.nav&&n.$refs.nav.removeFocus()}),(function(){})):!1!==i&&t()}else t()}},render:function(e){var n,t=this.type,i=this.handleTabClick,r=this.handleTabRemove,o=this.handleTabAdd,a=this.currentName,s=this.panes,l=this.editable,c=this.addable,u=this.tabPosition,d=this.stretch,h=l||c?e("span",{class:"el-tabs__new-tab",on:{click:o,keydown:function(e){13===e.keyCode&&o()}},attrs:{tabindex:"0"}},[e("i",{class:"el-icon-plus"})]):null,p=e("div",{class:["el-tabs__header","is-"+u]},[h,e("tab-nav",{props:{currentName:a,onTabClick:i,onTabRemove:r,editable:l,type:t,panes:s,stretch:d},ref:"nav"})]),f=e("div",{class:"el-tabs__content"},[this.$slots.default]);return e("div",{class:(n={"el-tabs":!0,"el-tabs--card":"card"===t},n["el-tabs--"+u]=!0,n["el-tabs--border-card"]="border-card"===t,n)},["bottom"!==u?[p,f]:[f,p]])},created:function(){this.currentName||this.setCurrentName("0"),this.$on("tab-nav-update",this.calcPaneInstances.bind(null,!0))},mounted:function(){this.calcPaneInstances()},updated:function(){this.calcPaneInstances()}},void 0,void 0,!1,null,null,null);Eo.options.__file="packages/tabs/src/tabs.vue";var To=Eo.exports;To.install=function(e){e.component(To.name,To)};var Po=To,Oo=function(){var e=this,n=e.$createElement,t=e._self._c||n;return!e.lazy||e.loaded||e.active?t("div",{directives:[{name:"show",rawName:"v-show",value:e.active,expression:"active"}],staticClass:"el-tab-pane",attrs:{role:"tabpanel","aria-hidden":!e.active,id:"pane-"+e.paneName,"aria-labelledby":"tab-"+e.paneName}},[e._t("default")],2):e._e()};Oo._withStripped=!0;var Ao=r({name:"ElTabPane",componentName:"ElTabPane",props:{label:String,labelContent:Function,name:String,closable:Boolean,disabled:Boolean,lazy:Boolean},data:function(){return{index:null,loaded:!1}},computed:{isClosable:function(){return this.closable||this.$parent.closable},active:function(){var e=this.$parent.currentName===(this.name||this.index);return e&&(this.loaded=!0),e},paneName:function(){return this.name||this.index}},updated:function(){this.$parent.$emit("tab-nav-update")}},Oo,[],!1,null,null,null);Ao.options.__file="packages/tabs/src/tab-pane.vue";var jo=Ao.exports;jo.install=function(e){e.component(jo.name,jo)};var Io=jo,Do=r({name:"ElTag",props:{text:String,closable:Boolean,type:String,hit:Boolean,disableTransitions:Boolean,color:String,size:String,effect:{type:String,default:"light",validator:function(e){return-1!==["dark","light","plain"].indexOf(e)}}},methods:{handleClose:function(e){e.stopPropagation(),this.$emit("close",e)},handleClick:function(e){this.$emit("click",e)}},computed:{tagSize:function(){return this.size||(this.$ELEMENT||{}).size}},render:function(e){var n=this.type,t=this.tagSize,i=this.hit,r=this.effect,o=e("span",{class:["el-tag",n?"el-tag--"+n:"",t?"el-tag--"+t:"",r?"el-tag--"+r:"",i&&"is-hit"],style:{backgroundColor:this.color},on:{click:this.handleClick}},[this.$slots.default,this.closable&&e("i",{class:"el-tag__close el-icon-close",on:{click:this.handleClose}})]);return this.disableTransitions?o:e("transition",{attrs:{name:"el-zoom-in-center"}},[o])}},void 0,void 0,!1,null,null,null);Do.options.__file="packages/tag/src/tag.vue";var Mo=Do.exports;Mo.install=function(e){e.component(Mo.name,Mo)};var Lo=Mo,No=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"el-tree",class:{"el-tree--highlight-current":e.highlightCurrent,"is-dragging":!!e.dragState.draggingNode,"is-drop-not-allow":!e.dragState.allowDrop,"is-drop-inner":"inner"===e.dragState.dropType},attrs:{role:"tree"}},[e._l(e.root.childNodes,(function(n){return t("el-tree-node",{key:e.getNodeKey(n),attrs:{node:n,props:e.props,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,"render-content":e.renderContent},on:{"node-expand":e.handleNodeExpand}})})),e.isEmpty?t("div",{staticClass:"el-tree__empty-block"},[t("span",{staticClass:"el-tree__empty-text"},[e._v(e._s(e.emptyText))])]):e._e(),t("div",{directives:[{name:"show",rawName:"v-show",value:e.dragState.showDropIndicator,expression:"dragState.showDropIndicator"}],ref:"dropIndicator",staticClass:"el-tree__drop-indicator"})],2)};No._withStripped=!0;var $o="$treeNodeId",Fo=function(e,n){n&&!n[$o]&&Object.defineProperty(n,$o,{value:e.id,enumerable:!1,configurable:!1,writable:!1})},Ro=function(e,n){return e?n[e]:n[$o]},Bo=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}();var Vo=function(e){for(var n=!0,t=!0,i=!0,r=0,o=e.length;r<o;r++){var a=e[r];(!0!==a.checked||a.indeterminate)&&(n=!1,a.disabled||(i=!1)),(!1!==a.checked||a.indeterminate)&&(t=!1)}return{all:n,none:t,allWithoutDisable:i,half:!n&&!t}},zo=function e(n){if(0!==n.childNodes.length){var t=Vo(n.childNodes),i=t.all,r=t.none,o=t.half;i?(n.checked=!0,n.indeterminate=!1):o?(n.checked=!1,n.indeterminate=!0):r&&(n.checked=!1,n.indeterminate=!1);var a=n.parent;a&&0!==a.level&&(n.store.checkStrictly||e(a))}},qo=function(e,n){var t=e.store.props,i=e.data||{},r=t[n];if("function"==typeof r)return r(i,e);if("string"==typeof r)return i[r];if(void 0===r){var o=i[n];return void 0===o?"":o}},Ho=0,Wo=function(){function e(n){for(var t in function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=Ho++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,n)n.hasOwnProperty(t)&&(this[t]=n[t]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1);var i=this.store;if(!i)throw new Error("[Node]store is required!");i.registerNode(this);var r=i.props;if(r&&void 0!==r.isLeaf){var o=qo(this,"isLeaf");"boolean"==typeof o&&(this.isLeafByUser=o)}if(!0!==i.lazy&&this.data?(this.setData(this.data),i.defaultExpandAll&&(this.expanded=!0)):this.level>0&&i.lazy&&i.defaultExpandAll&&this.expand(),Array.isArray(this.data)||Fo(this,this.data),this.data){var a=i.defaultExpandedKeys,s=i.key;s&&a&&-1!==a.indexOf(this.key)&&this.expand(null,i.autoExpandParent),s&&void 0!==i.currentNodeKey&&this.key===i.currentNodeKey&&(i.currentNode=this,i.currentNode.isCurrent=!0),i.lazy&&i._initDefaultCheckedNode(this),this.updateLeafState()}}return e.prototype.setData=function(e){Array.isArray(e)||Fo(this,e),this.data=e,this.childNodes=[];for(var n=void 0,t=0,i=(n=0===this.level&&this.data instanceof Array?this.data:qo(this,"children")||[]).length;t<i;t++)this.insertChild({data:n[t]})},e.prototype.contains=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=function t(i){for(var r=i.childNodes||[],o=!1,a=0,s=r.length;a<s;a++){var l=r[a];if(l===e||n&&t(l)){o=!0;break}}return o};return t(this)},e.prototype.remove=function(){var e=this.parent;e&&e.removeChild(this)},e.prototype.insertChild=function(n,t,i){if(!n)throw new Error("insertChild error: child is required.");if(!(n instanceof e)){if(!i){var r=this.getChildren(!0);-1===r.indexOf(n.data)&&(void 0===t||t<0?r.push(n.data):r.splice(t,0,n.data))}ze()(n,{parent:this,store:this.store}),n=new e(n)}n.level=this.level+1,void 0===t||t<0?this.childNodes.push(n):this.childNodes.splice(t,0,n),this.updateLeafState()},e.prototype.insertBefore=function(e,n){var t=void 0;n&&(t=this.childNodes.indexOf(n)),this.insertChild(e,t)},e.prototype.insertAfter=function(e,n){var t=void 0;n&&-1!==(t=this.childNodes.indexOf(n))&&(t+=1),this.insertChild(e,t)},e.prototype.removeChild=function(e){var n=this.getChildren()||[],t=n.indexOf(e.data);t>-1&&n.splice(t,1);var i=this.childNodes.indexOf(e);i>-1&&(this.store&&this.store.deregisterNode(e),e.parent=null,this.childNodes.splice(i,1)),this.updateLeafState()},e.prototype.removeChildByData=function(e){for(var n=null,t=0;t<this.childNodes.length;t++)if(this.childNodes[t].data===e){n=this.childNodes[t];break}n&&this.removeChild(n)},e.prototype.expand=function(e,n){var t=this,i=function(){if(n)for(var i=t.parent;i.level>0;)i.expanded=!0,i=i.parent;t.expanded=!0,e&&e()};this.shouldLoadData()?this.loadData((function(e){e instanceof Array&&(t.checked?t.setChecked(!0,!0):t.store.checkStrictly||zo(t),i())})):i()},e.prototype.doCreateChildren=function(e){var n=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.forEach((function(e){n.insertChild(ze()({data:e},t),void 0,!0)}))},e.prototype.collapse=function(){this.expanded=!1},e.prototype.shouldLoadData=function(){return!0===this.store.lazy&&this.store.load&&!this.loaded},e.prototype.updateLeafState=function(){if(!0!==this.store.lazy||!0===this.loaded||void 0===this.isLeafByUser){var e=this.childNodes;!this.store.lazy||!0===this.store.lazy&&!0===this.loaded?this.isLeaf=!e||0===e.length:this.isLeaf=!1}else this.isLeaf=this.isLeafByUser},e.prototype.setChecked=function(e,n,t,i){var r=this;if(this.indeterminate="half"===e,this.checked=!0===e,!this.store.checkStrictly){if(!this.shouldLoadData()||this.store.checkDescendants){var o=Vo(this.childNodes),a=o.all,s=o.allWithoutDisable;this.isLeaf||a||!s||(this.checked=!1,e=!1);var l=function(){if(n){for(var t=r.childNodes,o=0,a=t.length;o<a;o++){var s=t[o];i=i||!1!==e;var l=s.disabled?s.checked:i;s.setChecked(l,n,!0,i)}var c=Vo(t),u=c.half,d=c.all;d||(r.checked=d,r.indeterminate=u)}};if(this.shouldLoadData())return void this.loadData((function(){l(),zo(r)}),{checked:!1!==e});l()}var c=this.parent;c&&0!==c.level&&(t||zo(c))}},e.prototype.getChildren=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(0===this.level)return this.data;var n=this.data;if(!n)return null;var t=this.store.props,i="children";return t&&(i=t.children||"children"),void 0===n[i]&&(n[i]=null),e&&!n[i]&&(n[i]=[]),n[i]},e.prototype.updateChildren=function(){var e=this,n=this.getChildren()||[],t=this.childNodes.map((function(e){return e.data})),i={},r=[];n.forEach((function(e,n){var o=e[$o];!!o&&Object(m.arrayFindIndex)(t,(function(e){return e[$o]===o}))>=0?i[o]={index:n,data:e}:r.push({index:n,data:e})})),this.store.lazy||t.forEach((function(n){i[n[$o]]||e.removeChildByData(n)})),r.forEach((function(n){var t=n.index,i=n.data;e.insertChild({data:i},t)})),this.updateLeafState()},e.prototype.loadData=function(e){var n=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!0!==this.store.lazy||!this.store.load||this.loaded||this.loading&&!Object.keys(t).length)e&&e.call(this);else{this.loading=!0;var i=function(i){n.loaded=!0,n.loading=!1,n.childNodes=[],n.doCreateChildren(i,t),n.updateLeafState(),e&&e.call(n,i)};this.store.load(this,i)}},Bo(e,[{key:"label",get:function(){return qo(this,"label")}},{key:"key",get:function(){var e=this.store.key;return this.data?this.data[e]:null}},{key:"disabled",get:function(){return qo(this,"disabled")}},{key:"nextSibling",get:function(){var e=this.parent;if(e){var n=e.childNodes.indexOf(this);if(n>-1)return e.childNodes[n+1]}return null}},{key:"previousSibling",get:function(){var e=this.parent;if(e){var n=e.childNodes.indexOf(this);if(n>-1)return n>0?e.childNodes[n-1]:null}return null}}]),e}(),Uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var Jo=function(){function e(n){var t=this;for(var i in function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.currentNode=null,this.currentNodeKey=null,n)n.hasOwnProperty(i)&&(this[i]=n[i]);(this.nodesMap={},this.root=new Wo({data:this.data,store:this}),this.lazy&&this.load)?(0,this.load)(this.root,(function(e){t.root.doCreateChildren(e),t._initDefaultCheckedNodes()})):this._initDefaultCheckedNodes()}return e.prototype.filter=function(e){var n=this.filterNodeMethod,t=this.lazy;!function i(r){var o=r.root?r.root.childNodes:r.childNodes;if(o.forEach((function(t){t.visible=n.call(t,e,t.data,t),i(t)})),!r.visible&&o.length){var a;a=!o.some((function(e){return e.visible})),r.root?r.root.visible=!1===a:r.visible=!1===a}e&&(!r.visible||r.isLeaf||t||r.expand())}(this)},e.prototype.setData=function(e){e!==this.root.data?(this.root.setData(e),this._initDefaultCheckedNodes()):this.root.updateChildren()},e.prototype.getNode=function(e){if(e instanceof Wo)return e;var n="object"!==(void 0===e?"undefined":Uo(e))?e:Ro(this.key,e);return this.nodesMap[n]||null},e.prototype.insertBefore=function(e,n){var t=this.getNode(n);t.parent.insertBefore({data:e},t)},e.prototype.insertAfter=function(e,n){var t=this.getNode(n);t.parent.insertAfter({data:e},t)},e.prototype.remove=function(e){var n=this.getNode(e);n&&n.parent&&(n===this.currentNode&&(this.currentNode=null),n.parent.removeChild(n))},e.prototype.append=function(e,n){var t=n?this.getNode(n):this.root;t&&t.insertChild({data:e})},e.prototype._initDefaultCheckedNodes=function(){var e=this,n=this.defaultCheckedKeys||[],t=this.nodesMap;n.forEach((function(n){var i=t[n];i&&i.setChecked(!0,!e.checkStrictly)}))},e.prototype._initDefaultCheckedNode=function(e){-1!==(this.defaultCheckedKeys||[]).indexOf(e.key)&&e.setChecked(!0,!this.checkStrictly)},e.prototype.setDefaultCheckedKey=function(e){e!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=e,this._initDefaultCheckedNodes())},e.prototype.registerNode=function(e){this.key&&e&&e.data&&(void 0!==e.key&&(this.nodesMap[e.key]=e))},e.prototype.deregisterNode=function(e){var n=this;this.key&&e&&e.data&&(e.childNodes.forEach((function(e){n.deregisterNode(e)})),delete this.nodesMap[e.key])},e.prototype.getCheckedNodes=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=[],i=function i(r){(r.root?r.root.childNodes:r.childNodes).forEach((function(r){(r.checked||n&&r.indeterminate)&&(!e||e&&r.isLeaf)&&t.push(r.data),i(r)}))};return i(this),t},e.prototype.getCheckedKeys=function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.getCheckedNodes(n).map((function(n){return(n||{})[e.key]}))},e.prototype.getHalfCheckedNodes=function(){var e=[];return function n(t){(t.root?t.root.childNodes:t.childNodes).forEach((function(t){t.indeterminate&&e.push(t.data),n(t)}))}(this),e},e.prototype.getHalfCheckedKeys=function(){var e=this;return this.getHalfCheckedNodes().map((function(n){return(n||{})[e.key]}))},e.prototype._getAllNodes=function(){var e=[],n=this.nodesMap;for(var t in n)n.hasOwnProperty(t)&&e.push(n[t]);return e},e.prototype.updateChildren=function(e,n){var t=this.nodesMap[e];if(t){for(var i=t.childNodes,r=i.length-1;r>=0;r--){var o=i[r];this.remove(o.data)}for(var a=0,s=n.length;a<s;a++){var l=n[a];this.append(l,t.data)}}},e.prototype._setCheckedKeys=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=arguments[2],i=this._getAllNodes().sort((function(e,n){return n.level-e.level})),r=Object.create(null),o=Object.keys(t);i.forEach((function(e){return e.setChecked(!1,!1)}));for(var a=0,s=i.length;a<s;a++){var l=i[a],c=l.data[e].toString(),u=o.indexOf(c)>-1;if(u){for(var d=l.parent;d&&d.level>0;)r[d.data[e]]=!0,d=d.parent;l.isLeaf||this.checkStrictly?l.setChecked(!0,!1):(l.setChecked(!0,!0),n&&function(){l.setChecked(!1,!1);!function e(n){n.childNodes.forEach((function(n){n.isLeaf||n.setChecked(!1,!1),e(n)}))}(l)}())}else l.checked&&!r[c]&&l.setChecked(!1,!1)}},e.prototype.setCheckedNodes=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=this.key,i={};e.forEach((function(e){i[(e||{})[t]]=!0})),this._setCheckedKeys(t,n,i)},e.prototype.setCheckedKeys=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.defaultCheckedKeys=e;var t=this.key,i={};e.forEach((function(e){i[e]=!0})),this._setCheckedKeys(t,n,i)},e.prototype.setDefaultExpandedKeys=function(e){var n=this;e=e||[],this.defaultExpandedKeys=e,e.forEach((function(e){var t=n.getNode(e);t&&t.expand(null,n.autoExpandParent)}))},e.prototype.setChecked=function(e,n,t){var i=this.getNode(e);i&&i.setChecked(!!n,t)},e.prototype.getCurrentNode=function(){return this.currentNode},e.prototype.setCurrentNode=function(e){var n=this.currentNode;n&&(n.isCurrent=!1),this.currentNode=e,this.currentNode.isCurrent=!0},e.prototype.setUserCurrentNode=function(e){var n=e[this.key],t=this.nodesMap[n];this.setCurrentNode(t)},e.prototype.setCurrentNodeKey=function(e){if(null==e)return this.currentNode&&(this.currentNode.isCurrent=!1),void(this.currentNode=null);var n=this.getNode(e);n&&this.setCurrentNode(n)},e}(),Yo=function(){var e=this,n=this,t=n.$createElement,i=n._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:n.node.visible,expression:"node.visible"}],ref:"node",staticClass:"el-tree-node",class:{"is-expanded":n.expanded,"is-current":n.node.isCurrent,"is-hidden":!n.node.visible,"is-focusable":!n.node.disabled,"is-checked":!n.node.disabled&&n.node.checked},attrs:{role:"treeitem",tabindex:"-1","aria-expanded":n.expanded,"aria-disabled":n.node.disabled,"aria-checked":n.node.checked,draggable:n.tree.draggable},on:{click:function(e){return e.stopPropagation(),n.handleClick(e)},contextmenu:function(n){return e.handleContextMenu(n)},dragstart:function(e){return e.stopPropagation(),n.handleDragStart(e)},dragover:function(e){return e.stopPropagation(),n.handleDragOver(e)},dragend:function(e){return e.stopPropagation(),n.handleDragEnd(e)},drop:function(e){return e.stopPropagation(),n.handleDrop(e)}}},[i("div",{staticClass:"el-tree-node__content",style:{"padding-left":(n.node.level-1)*n.tree.indent+"px"}},[i("span",{class:[{"is-leaf":n.node.isLeaf,expanded:!n.node.isLeaf&&n.expanded},"el-tree-node__expand-icon",n.tree.iconClass?n.tree.iconClass:"el-icon-caret-right"],on:{click:function(e){return e.stopPropagation(),n.handleExpandIconClick(e)}}}),n.showCheckbox?i("el-checkbox",{attrs:{indeterminate:n.node.indeterminate,disabled:!!n.node.disabled},on:{change:n.handleCheckChange},nativeOn:{click:function(e){e.stopPropagation()}},model:{value:n.node.checked,callback:function(e){n.$set(n.node,"checked",e)},expression:"node.checked"}}):n._e(),n.node.loading?i("span",{staticClass:"el-tree-node__loading-icon el-icon-loading"}):n._e(),i("node-content",{attrs:{node:n.node}})],1),i("el-collapse-transition",[!n.renderAfterExpand||n.childNodeRendered?i("div",{directives:[{name:"show",rawName:"v-show",value:n.expanded,expression:"expanded"}],staticClass:"el-tree-node__children",attrs:{role:"group","aria-expanded":n.expanded}},n._l(n.node.childNodes,(function(e){return i("el-tree-node",{key:n.getNodeKey(e),attrs:{"render-content":n.renderContent,"render-after-expand":n.renderAfterExpand,"show-checkbox":n.showCheckbox,node:e},on:{"node-expand":n.handleChildNodeExpand}})})),1):n._e()])],1)};Yo._withStripped=!0;var Go=r({name:"ElTreeNode",componentName:"ElTreeNode",mixins:[k.a],props:{node:{default:function(){return{}}},props:{},renderContent:Function,renderAfterExpand:{type:Boolean,default:!0},showCheckbox:{type:Boolean,default:!1}},components:{ElCollapseTransition:ye.a,ElCheckbox:ot.a,NodeContent:{props:{node:{required:!0}},render:function(e){var n=this.$parent,t=n.tree,i=this.node,r=i.data,o=i.store;return n.renderContent?n.renderContent.call(n._renderProxy,e,{_self:t.$vnode.context,node:i,data:r,store:o}):t.$scopedSlots.default?t.$scopedSlots.default({node:i,data:r}):e("span",{class:"el-tree-node__label"},[i.label])}}},data:function(){return{tree:null,expanded:!1,childNodeRendered:!1,oldChecked:null,oldIndeterminate:null}},watch:{"node.indeterminate":function(e){this.handleSelectChange(this.node.checked,e)},"node.checked":function(e){this.handleSelectChange(e,this.node.indeterminate)},"node.expanded":function(e){var n=this;this.$nextTick((function(){return n.expanded=e})),e&&(this.childNodeRendered=!0)}},methods:{getNodeKey:function(e){return Ro(this.tree.nodeKey,e.data)},handleSelectChange:function(e,n){this.oldChecked!==e&&this.oldIndeterminate!==n&&this.tree.$emit("check-change",this.node.data,e,n),this.oldChecked=e,this.indeterminate=n},handleClick:function(){var e=this.tree.store;e.setCurrentNode(this.node),this.tree.$emit("current-change",e.currentNode?e.currentNode.data:null,e.currentNode),this.tree.currentNode=this,this.tree.expandOnClickNode&&this.handleExpandIconClick(),this.tree.checkOnClickNode&&!this.node.disabled&&this.handleCheckChange(null,{target:{checked:!this.node.checked}}),this.tree.$emit("node-click",this.node.data,this.node,this)},handleContextMenu:function(e){this.tree._events["node-contextmenu"]&&this.tree._events["node-contextmenu"].length>0&&(e.stopPropagation(),e.preventDefault()),this.tree.$emit("node-contextmenu",e,this.node.data,this.node,this)},handleExpandIconClick:function(){this.node.isLeaf||(this.expanded?(this.tree.$emit("node-collapse",this.node.data,this.node,this),this.node.collapse()):(this.node.expand(),this.$emit("node-expand",this.node.data,this.node,this)))},handleCheckChange:function(e,n){var t=this;this.node.setChecked(n.target.checked,!this.tree.checkStrictly),this.$nextTick((function(){var e=t.tree.store;t.tree.$emit("check",t.node.data,{checkedNodes:e.getCheckedNodes(),checkedKeys:e.getCheckedKeys(),halfCheckedNodes:e.getHalfCheckedNodes(),halfCheckedKeys:e.getHalfCheckedKeys()})}))},handleChildNodeExpand:function(e,n,t){this.broadcast("ElTreeNode","tree-node-expand",n),this.tree.$emit("node-expand",e,n,t)},handleDragStart:function(e){this.tree.draggable&&this.tree.$emit("tree-node-drag-start",e,this)},handleDragOver:function(e){this.tree.draggable&&(this.tree.$emit("tree-node-drag-over",e,this),e.preventDefault())},handleDrop:function(e){e.preventDefault()},handleDragEnd:function(e){this.tree.draggable&&this.tree.$emit("tree-node-drag-end",e,this)}},created:function(){var e=this,n=this.$parent;n.isTree?this.tree=n:this.tree=n.tree;var t=this.tree;t||console.warn("Can not find node's tree.");var i=(t.props||{}).children||"children";this.$watch("node.data."+i,(function(){e.node.updateChildren()})),this.node.expanded&&(this.expanded=!0,this.childNodeRendered=!0),this.tree.accordion&&this.$on("tree-node-expand",(function(n){e.node!==n&&e.node.collapse()}))}},Yo,[],!1,null,null,null);Go.options.__file="packages/tree/src/tree-node.vue";var Ko=Go.exports,Xo=r({name:"ElTree",mixins:[k.a],components:{ElTreeNode:Ko},data:function(){return{store:null,root:null,currentNode:null,treeItems:null,checkboxItems:[],dragState:{showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0}}},props:{data:{type:Array},emptyText:{type:String,default:function(){return Object(Mr.t)("el.tree.emptyText")}},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkDescendants:{type:Boolean,default:!1},autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:Function,showCheckbox:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},allowDrag:Function,allowDrop:Function,props:{default:function(){return{children:"children",label:"label",disabled:"disabled"}}},lazy:{type:Boolean,default:!1},highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},iconClass:String},computed:{children:{set:function(e){this.data=e},get:function(){return this.data}},treeItemArray:function(){return Array.prototype.slice.call(this.treeItems)},isEmpty:function(){var e=this.root.childNodes;return!e||0===e.length||e.every((function(e){return!e.visible}))}},watch:{defaultCheckedKeys:function(e){this.store.setDefaultCheckedKey(e)},defaultExpandedKeys:function(e){this.store.defaultExpandedKeys=e,this.store.setDefaultExpandedKeys(e)},data:function(e){this.store.setData(e)},checkboxItems:function(e){Array.prototype.forEach.call(e,(function(e){e.setAttribute("tabindex",-1)}))},checkStrictly:function(e){this.store.checkStrictly=e}},methods:{filter:function(e){if(!this.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");this.store.filter(e)},getNodeKey:function(e){return Ro(this.nodeKey,e.data)},getNodePath:function(e){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");var n=this.store.getNode(e);if(!n)return[];for(var t=[n.data],i=n.parent;i&&i!==this.root;)t.push(i.data),i=i.parent;return t.reverse()},getCheckedNodes:function(e,n){return this.store.getCheckedNodes(e,n)},getCheckedKeys:function(e){return this.store.getCheckedKeys(e)},getCurrentNode:function(){var e=this.store.getCurrentNode();return e?e.data:null},getCurrentKey:function(){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");var e=this.getCurrentNode();return e?e[this.nodeKey]:null},setCheckedNodes:function(e,n){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");this.store.setCheckedNodes(e,n)},setCheckedKeys:function(e,n){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");this.store.setCheckedKeys(e,n)},setChecked:function(e,n,t){this.store.setChecked(e,n,t)},getHalfCheckedNodes:function(){return this.store.getHalfCheckedNodes()},getHalfCheckedKeys:function(){return this.store.getHalfCheckedKeys()},setCurrentNode:function(e){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");this.store.setUserCurrentNode(e)},setCurrentKey:function(e){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");this.store.setCurrentNodeKey(e)},getNode:function(e){return this.store.getNode(e)},remove:function(e){this.store.remove(e)},append:function(e,n){this.store.append(e,n)},insertBefore:function(e,n){this.store.insertBefore(e,n)},insertAfter:function(e,n){this.store.insertAfter(e,n)},handleNodeExpand:function(e,n,t){this.broadcast("ElTreeNode","tree-node-expand",n),this.$emit("node-expand",e,n,t)},updateKeyChildren:function(e,n){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");this.store.updateChildren(e,n)},initTabIndex:function(){this.treeItems=this.$el.querySelectorAll(".is-focusable[role=treeitem]"),this.checkboxItems=this.$el.querySelectorAll("input[type=checkbox]");var e=this.$el.querySelectorAll(".is-checked[role=treeitem]");e.length?e[0].setAttribute("tabindex",0):this.treeItems[0]&&this.treeItems[0].setAttribute("tabindex",0)},handleKeydown:function(e){var n=e.target;if(-1!==n.className.indexOf("el-tree-node")){var t=e.keyCode;this.treeItems=this.$el.querySelectorAll(".is-focusable[role=treeitem]");var i=this.treeItemArray.indexOf(n),r=void 0;[38,40].indexOf(t)>-1&&(e.preventDefault(),r=38===t?0!==i?i-1:0:i<this.treeItemArray.length-1?i+1:0,this.treeItemArray[r].focus()),[37,39].indexOf(t)>-1&&(e.preventDefault(),n.click());var o=n.querySelector('[type="checkbox"]');[13,32].indexOf(t)>-1&&o&&(e.preventDefault(),o.click())}}},created:function(){var e=this;this.isTree=!0,this.store=new Jo({key:this.nodeKey,data:this.data,lazy:this.lazy,props:this.props,load:this.load,currentNodeKey:this.currentNodeKey,checkStrictly:this.checkStrictly,checkDescendants:this.checkDescendants,defaultCheckedKeys:this.defaultCheckedKeys,defaultExpandedKeys:this.defaultExpandedKeys,autoExpandParent:this.autoExpandParent,defaultExpandAll:this.defaultExpandAll,filterNodeMethod:this.filterNodeMethod}),this.root=this.store.root;var n=this.dragState;this.$on("tree-node-drag-start",(function(t,i){if("function"==typeof e.allowDrag&&!e.allowDrag(i.node))return t.preventDefault(),!1;t.dataTransfer.effectAllowed="move";try{t.dataTransfer.setData("text/plain","")}catch(e){}n.draggingNode=i,e.$emit("node-drag-start",i.node,t)})),this.$on("tree-node-drag-over",(function(t,i){var r=function(e,n){for(var t=e;t&&"BODY"!==t.tagName;){if(t.__vue__&&t.__vue__.$options.name===n)return t.__vue__;t=t.parentNode}return null}(t.target,"ElTreeNode"),o=n.dropNode;o&&o!==r&&Object(fe.removeClass)(o.$el,"is-drop-inner");var a=n.draggingNode;if(a&&r){var s=!0,l=!0,c=!0,u=!0;"function"==typeof e.allowDrop&&(s=e.allowDrop(a.node,r.node,"prev"),u=l=e.allowDrop(a.node,r.node,"inner"),c=e.allowDrop(a.node,r.node,"next")),t.dataTransfer.dropEffect=l?"move":"none",(s||l||c)&&o!==r&&(o&&e.$emit("node-drag-leave",a.node,o.node,t),e.$emit("node-drag-enter",a.node,r.node,t)),(s||l||c)&&(n.dropNode=r),r.node.nextSibling===a.node&&(c=!1),r.node.previousSibling===a.node&&(s=!1),r.node.contains(a.node,!1)&&(l=!1),(a.node===r.node||a.node.contains(r.node))&&(s=!1,l=!1,c=!1);var d=r.$el.getBoundingClientRect(),h=e.$el.getBoundingClientRect(),p=void 0,f=s?l?.25:c?.45:1:-1,m=c?l?.75:s?.55:0:1,g=-9999,v=t.clientY-d.top;p=v<d.height*f?"before":v>d.height*m?"after":l?"inner":"none";var b=r.$el.querySelector(".el-tree-node__expand-icon").getBoundingClientRect(),y=e.$refs.dropIndicator;"before"===p?g=b.top-h.top:"after"===p&&(g=b.bottom-h.top),y.style.top=g+"px",y.style.left=b.right-h.left+"px","inner"===p?Object(fe.addClass)(r.$el,"is-drop-inner"):Object(fe.removeClass)(r.$el,"is-drop-inner"),n.showDropIndicator="before"===p||"after"===p,n.allowDrop=n.showDropIndicator||u,n.dropType=p,e.$emit("node-drag-over",a.node,r.node,t)}})),this.$on("tree-node-drag-end",(function(t){var i=n.draggingNode,r=n.dropType,o=n.dropNode;if(t.preventDefault(),t.dataTransfer.dropEffect="move",i&&o){var a={data:i.node.data};"none"!==r&&i.node.remove(),"before"===r?o.node.parent.insertBefore(a,o.node):"after"===r?o.node.parent.insertAfter(a,o.node):"inner"===r&&o.node.insertChild(a),"none"!==r&&e.store.registerNode(a),Object(fe.removeClass)(o.$el,"is-drop-inner"),e.$emit("node-drag-end",i.node,o.node,r,t),"none"!==r&&e.$emit("node-drop",i.node,o.node,r,t)}i&&!o&&e.$emit("node-drag-end",i.node,null,r,t),n.showDropIndicator=!1,n.draggingNode=null,n.dropNode=null,n.allowDrop=!0}))},mounted:function(){this.initTabIndex(),this.$el.addEventListener("keydown",this.handleKeydown)},updated:function(){this.treeItems=this.$el.querySelectorAll("[role=treeitem]"),this.checkboxItems=this.$el.querySelectorAll("input[type=checkbox]")}},No,[],!1,null,null,null);Xo.options.__file="packages/tree/src/tree.vue";var Qo=Xo.exports;Qo.install=function(e){e.component(Qo.name,Qo)};var Zo=Qo,ea=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("transition",{attrs:{name:"el-alert-fade"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-alert",class:[e.typeClass,e.center?"is-center":"","is-"+e.effect],attrs:{role:"alert"}},[e.showIcon?t("i",{staticClass:"el-alert__icon",class:[e.iconClass,e.isBigIcon]}):e._e(),t("div",{staticClass:"el-alert__content"},[e.title||e.$slots.title?t("span",{staticClass:"el-alert__title",class:[e.isBoldTitle]},[e._t("title",[e._v(e._s(e.title))])],2):e._e(),e.$slots.default&&!e.description?t("p",{staticClass:"el-alert__description"},[e._t("default")],2):e._e(),e.description&&!e.$slots.default?t("p",{staticClass:"el-alert__description"},[e._v(e._s(e.description))]):e._e(),t("i",{directives:[{name:"show",rawName:"v-show",value:e.closable,expression:"closable"}],staticClass:"el-alert__closebtn",class:{"is-customed":""!==e.closeText,"el-icon-close":""===e.closeText},on:{click:function(n){e.close()}}},[e._v(e._s(e.closeText))])])])])};ea._withStripped=!0;var na={success:"el-icon-success",warning:"el-icon-warning",error:"el-icon-error"},ta=r({name:"ElAlert",props:{title:{type:String,default:""},description:{type:String,default:""},type:{type:String,default:"info"},closable:{type:Boolean,default:!0},closeText:{type:String,default:""},showIcon:Boolean,center:Boolean,effect:{type:String,default:"light",validator:function(e){return-1!==["light","dark"].indexOf(e)}}},data:function(){return{visible:!0}},methods:{close:function(){this.visible=!1,this.$emit("close")}},computed:{typeClass:function(){return"el-alert--"+this.type},iconClass:function(){return na[this.type]||"el-icon-info"},isBigIcon:function(){return this.description||this.$slots.default?"is-big":""},isBoldTitle:function(){return this.description||this.$slots.default?"is-bold":""}}},ea,[],!1,null,null,null);ta.options.__file="packages/alert/src/main.vue";var ia=ta.exports;ia.install=function(e){e.component(ia.name,ia)};var ra=ia,oa=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("transition",{attrs:{name:"el-notification-fade"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],class:["el-notification",e.customClass,e.horizontalClass],style:e.positionStyle,attrs:{role:"alert"},on:{mouseenter:function(n){e.clearTimer()},mouseleave:function(n){e.startTimer()},click:e.click}},[e.type||e.iconClass?t("i",{staticClass:"el-notification__icon",class:[e.typeClass,e.iconClass]}):e._e(),t("div",{staticClass:"el-notification__group",class:{"is-with-icon":e.typeClass||e.iconClass}},[t("h2",{staticClass:"el-notification__title",domProps:{textContent:e._s(e.title)}}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.message,expression:"message"}],staticClass:"el-notification__content"},[e._t("default",[e.dangerouslyUseHTMLString?t("p",{domProps:{innerHTML:e._s(e.message)}}):t("p",[e._v(e._s(e.message))])])],2),e.showClose?t("div",{staticClass:"el-notification__closeBtn el-icon-close",on:{click:function(n){return n.stopPropagation(),e.close(n)}}}):e._e()])])])};oa._withStripped=!0;var aa={success:"success",info:"info",warning:"warning",error:"error"},sa=r({data:function(){return{visible:!1,title:"",message:"",duration:4500,type:"",showClose:!0,customClass:"",iconClass:"",onClose:null,onClick:null,closed:!1,verticalOffset:0,timer:null,dangerouslyUseHTMLString:!1,position:"top-right"}},computed:{typeClass:function(){return this.type&&aa[this.type]?"el-icon-"+aa[this.type]:""},horizontalClass:function(){return this.position.indexOf("right")>-1?"right":"left"},verticalProperty:function(){return/^top-/.test(this.position)?"top":"bottom"},positionStyle:function(){var e;return(e={})[this.verticalProperty]=this.verticalOffset+"px",e}},watch:{closed:function(e){e&&(this.visible=!1,this.$el.addEventListener("transitionend",this.destroyElement))}},methods:{destroyElement:function(){this.$el.removeEventListener("transitionend",this.destroyElement),this.$destroy(!0),this.$el.parentNode.removeChild(this.$el)},click:function(){"function"==typeof this.onClick&&this.onClick()},close:function(){this.closed=!0,"function"==typeof this.onClose&&this.onClose()},clearTimer:function(){clearTimeout(this.timer)},startTimer:function(){var e=this;this.duration>0&&(this.timer=setTimeout((function(){e.closed||e.close()}),this.duration))},keydown:function(e){46===e.keyCode||8===e.keyCode?this.clearTimer():27===e.keyCode?this.closed||this.close():this.startTimer()}},mounted:function(){var e=this;this.duration>0&&(this.timer=setTimeout((function(){e.closed||e.close()}),this.duration)),document.addEventListener("keydown",this.keydown)},beforeDestroy:function(){document.removeEventListener("keydown",this.keydown)}},oa,[],!1,null,null,null);sa.options.__file="packages/notification/src/main.vue";var la=sa.exports,ca=ht.a.extend(la),ua=void 0,da=[],ha=1,pa=function e(n){if(!ht.a.prototype.$isServer){var t=(n=ze()({},n)).onClose,i="notification_"+ha++,r=n.position||"top-right";n.onClose=function(){e.close(i,t)},ua=new ca({data:n}),Object(zr.isVNode)(n.message)&&(ua.$slots.default=[n.message],n.message="REPLACED_BY_VNODE"),ua.id=i,ua.$mount(),document.body.appendChild(ua.$el),ua.visible=!0,ua.dom=ua.$el,ua.dom.style.zIndex=y.PopupManager.nextZIndex();var o=n.offset||0;return da.filter((function(e){return e.position===r})).forEach((function(e){o+=e.$el.offsetHeight+16})),o+=16,ua.verticalOffset=o,da.push(ua),ua}};["success","warning","info","error"].forEach((function(e){pa[e]=function(n){return("string"==typeof n||Object(zr.isVNode)(n))&&(n={message:n}),n.type=e,pa(n)}})),pa.close=function(e,n){var t=-1,i=da.length,r=da.filter((function(n,i){return n.id===e&&(t=i,!0)}))[0];if(r&&("function"==typeof n&&n(r),da.splice(t,1),!(i<=1)))for(var o=r.position,a=r.dom.offsetHeight,s=t;s<i-1;s++)da[s].position===o&&(da[s].dom.style[r.verticalProperty]=parseInt(da[s].dom.style[r.verticalProperty],10)-a-16+"px")},pa.closeAll=function(){for(var e=da.length-1;e>=0;e--)da[e].close()};var fa=pa,ma=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"el-slider",class:{"is-vertical":e.vertical,"el-slider--with-input":e.showInput},attrs:{role:"slider","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-orientation":e.vertical?"vertical":"horizontal","aria-disabled":e.sliderDisabled}},[e.showInput&&!e.range?t("el-input-number",{ref:"input",staticClass:"el-slider__input",attrs:{step:e.step,disabled:e.sliderDisabled,controls:e.showInputControls,min:e.min,max:e.max,debounce:e.debounce,size:e.inputSize},on:{change:e.emitChange},model:{value:e.firstValue,callback:function(n){e.firstValue=n},expression:"firstValue"}}):e._e(),t("div",{ref:"slider",staticClass:"el-slider__runway",class:{"show-input":e.showInput,disabled:e.sliderDisabled},style:e.runwayStyle,on:{click:e.onSliderClick}},[t("div",{staticClass:"el-slider__bar",style:e.barStyle}),t("slider-button",{ref:"button1",attrs:{vertical:e.vertical,"tooltip-class":e.tooltipClass},model:{value:e.firstValue,callback:function(n){e.firstValue=n},expression:"firstValue"}}),e.range?t("slider-button",{ref:"button2",attrs:{vertical:e.vertical,"tooltip-class":e.tooltipClass},model:{value:e.secondValue,callback:function(n){e.secondValue=n},expression:"secondValue"}}):e._e(),e._l(e.stops,(function(n,i){return e.showStops?t("div",{key:i,staticClass:"el-slider__stop",style:e.getStopStyle(n)}):e._e()})),e.markList.length>0?[t("div",e._l(e.markList,(function(n,i){return t("div",{key:i,staticClass:"el-slider__stop el-slider__marks-stop",style:e.getStopStyle(n.position)})})),0),t("div",{staticClass:"el-slider__marks"},e._l(e.markList,(function(n,i){return t("slider-marker",{key:i,style:e.getStopStyle(n.position),attrs:{mark:n.mark}})})),1)]:e._e()],2)],1)};ma._withStripped=!0;var ga=t(41),va=t.n(ga),ba=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{ref:"button",staticClass:"el-slider__button-wrapper",class:{hover:e.hovering,dragging:e.dragging},style:e.wrapperStyle,attrs:{tabindex:"0"},on:{mouseenter:e.handleMouseEnter,mouseleave:e.handleMouseLeave,mousedown:e.onButtonDown,touchstart:e.onButtonDown,focus:e.handleMouseEnter,blur:e.handleMouseLeave,keydown:[function(n){return!("button"in n)&&e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&0!==n.button?null:e.onLeftKeyDown(n)},function(n){return!("button"in n)&&e._k(n.keyCode,"right",39,n.key,["Right","ArrowRight"])||"button"in n&&2!==n.button?null:e.onRightKeyDown(n)},function(n){return!("button"in n)&&e._k(n.keyCode,"down",40,n.key,["Down","ArrowDown"])?null:(n.preventDefault(),e.onLeftKeyDown(n))},function(n){return!("button"in n)&&e._k(n.keyCode,"up",38,n.key,["Up","ArrowUp"])?null:(n.preventDefault(),e.onRightKeyDown(n))}]}},[t("el-tooltip",{ref:"tooltip",attrs:{placement:"top","popper-class":e.tooltipClass,disabled:!e.showTooltip}},[t("span",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(e.formatValue))]),t("div",{staticClass:"el-slider__button",class:{hover:e.hovering,dragging:e.dragging}})])],1)};ba._withStripped=!0;var ya=r({name:"ElSliderButton",components:{ElTooltip:Te.a},props:{value:{type:Number,default:0},vertical:{type:Boolean,default:!1},tooltipClass:String},data:function(){return{hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:null,oldValue:this.value}},computed:{disabled:function(){return this.$parent.sliderDisabled},max:function(){return this.$parent.max},min:function(){return this.$parent.min},step:function(){return this.$parent.step},showTooltip:function(){return this.$parent.showTooltip},precision:function(){return this.$parent.precision},currentPosition:function(){return(this.value-this.min)/(this.max-this.min)*100+"%"},enableFormat:function(){return this.$parent.formatTooltip instanceof Function},formatValue:function(){return this.enableFormat&&this.$parent.formatTooltip(this.value)||this.value},wrapperStyle:function(){return this.vertical?{bottom:this.currentPosition}:{left:this.currentPosition}}},watch:{dragging:function(e){this.$parent.dragging=e}},methods:{displayTooltip:function(){this.$refs.tooltip&&(this.$refs.tooltip.showPopper=!0)},hideTooltip:function(){this.$refs.tooltip&&(this.$refs.tooltip.showPopper=!1)},handleMouseEnter:function(){this.hovering=!0,this.displayTooltip()},handleMouseLeave:function(){this.hovering=!1,this.hideTooltip()},onButtonDown:function(e){this.disabled||(e.preventDefault(),this.onDragStart(e),window.addEventListener("mousemove",this.onDragging),window.addEventListener("touchmove",this.onDragging),window.addEventListener("mouseup",this.onDragEnd),window.addEventListener("touchend",this.onDragEnd),window.addEventListener("contextmenu",this.onDragEnd))},onLeftKeyDown:function(){this.disabled||(this.newPosition=parseFloat(this.currentPosition)-this.step/(this.max-this.min)*100,this.setPosition(this.newPosition),this.$parent.emitChange())},onRightKeyDown:function(){this.disabled||(this.newPosition=parseFloat(this.currentPosition)+this.step/(this.max-this.min)*100,this.setPosition(this.newPosition),this.$parent.emitChange())},onDragStart:function(e){this.dragging=!0,this.isClick=!0,"touchstart"===e.type&&(e.clientY=e.touches[0].clientY,e.clientX=e.touches[0].clientX),this.vertical?this.startY=e.clientY:this.startX=e.clientX,this.startPosition=parseFloat(this.currentPosition),this.newPosition=this.startPosition},onDragging:function(e){if(this.dragging){this.isClick=!1,this.displayTooltip(),this.$parent.resetSize();var n=0;"touchmove"===e.type&&(e.clientY=e.touches[0].clientY,e.clientX=e.touches[0].clientX),this.vertical?(this.currentY=e.clientY,n=(this.startY-this.currentY)/this.$parent.sliderSize*100):(this.currentX=e.clientX,n=(this.currentX-this.startX)/this.$parent.sliderSize*100),this.newPosition=this.startPosition+n,this.setPosition(this.newPosition)}},onDragEnd:function(){var e=this;this.dragging&&(setTimeout((function(){e.dragging=!1,e.hideTooltip(),e.isClick||(e.setPosition(e.newPosition),e.$parent.emitChange())}),0),window.removeEventListener("mousemove",this.onDragging),window.removeEventListener("touchmove",this.onDragging),window.removeEventListener("mouseup",this.onDragEnd),window.removeEventListener("touchend",this.onDragEnd),window.removeEventListener("contextmenu",this.onDragEnd))},setPosition:function(e){var n=this;if(null!==e&&!isNaN(e)){e<0?e=0:e>100&&(e=100);var t=100/((this.max-this.min)/this.step),i=Math.round(e/t)*t*(this.max-this.min)*.01+this.min;i=parseFloat(i.toFixed(this.precision)),this.$emit("input",i),this.$nextTick((function(){n.displayTooltip(),n.$refs.tooltip&&n.$refs.tooltip.updatePopper()})),this.dragging||this.value===this.oldValue||(this.oldValue=this.value)}}}},ba,[],!1,null,null,null);ya.options.__file="packages/slider/src/button.vue";var wa=ya.exports,xa={name:"ElMarker",props:{mark:{type:[String,Object]}},render:function(){var e=arguments[0],n="string"==typeof this.mark?this.mark:this.mark.label;return e("div",{class:"el-slider__marks-text",style:this.mark.style||{}},[n])}},_a=r({name:"ElSlider",mixins:[k.a],inject:{elForm:{default:""}},props:{min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},value:{type:[Number,Array],default:0},showInput:{type:Boolean,default:!1},showInputControls:{type:Boolean,default:!0},inputSize:{type:String,default:"small"},showStops:{type:Boolean,default:!1},showTooltip:{type:Boolean,default:!0},formatTooltip:Function,disabled:{type:Boolean,default:!1},range:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},height:{type:String},debounce:{type:Number,default:300},label:{type:String},tooltipClass:String,marks:Object},components:{ElInputNumber:va.a,SliderButton:wa,SliderMarker:xa},data:function(){return{firstValue:null,secondValue:null,oldValue:null,dragging:!1,sliderSize:1}},watch:{value:function(e,n){this.dragging||Array.isArray(e)&&Array.isArray(n)&&e.every((function(e,t){return e===n[t]}))||this.setValues()},dragging:function(e){e||this.setValues()},firstValue:function(e){this.range?this.$emit("input",[this.minValue,this.maxValue]):this.$emit("input",e)},secondValue:function(){this.range&&this.$emit("input",[this.minValue,this.maxValue])},min:function(){this.setValues()},max:function(){this.setValues()}},methods:{valueChanged:function(){var e=this;return this.range?![this.minValue,this.maxValue].every((function(n,t){return n===e.oldValue[t]})):this.value!==this.oldValue},setValues:function(){if(this.min>this.max)console.error("[Element Error][Slider]min should not be greater than max.");else{var e=this.value;this.range&&Array.isArray(e)?e[1]<this.min?this.$emit("input",[this.min,this.min]):e[0]>this.max?this.$emit("input",[this.max,this.max]):e[0]<this.min?this.$emit("input",[this.min,e[1]]):e[1]>this.max?this.$emit("input",[e[0],this.max]):(this.firstValue=e[0],this.secondValue=e[1],this.valueChanged()&&(this.dispatch("ElFormItem","el.form.change",[this.minValue,this.maxValue]),this.oldValue=e.slice())):this.range||"number"!=typeof e||isNaN(e)||(e<this.min?this.$emit("input",this.min):e>this.max?this.$emit("input",this.max):(this.firstValue=e,this.valueChanged()&&(this.dispatch("ElFormItem","el.form.change",e),this.oldValue=e)))}},setPosition:function(e){var n=this.min+e*(this.max-this.min)/100;if(this.range){var t=void 0;t=Math.abs(this.minValue-n)<Math.abs(this.maxValue-n)?this.firstValue<this.secondValue?"button1":"button2":this.firstValue>this.secondValue?"button1":"button2",this.$refs[t].setPosition(e)}else this.$refs.button1.setPosition(e)},onSliderClick:function(e){if(!this.sliderDisabled&&!this.dragging){if(this.resetSize(),this.vertical){var n=this.$refs.slider.getBoundingClientRect().bottom;this.setPosition((n-e.clientY)/this.sliderSize*100)}else{var t=this.$refs.slider.getBoundingClientRect().left;this.setPosition((e.clientX-t)/this.sliderSize*100)}this.emitChange()}},resetSize:function(){this.$refs.slider&&(this.sliderSize=this.$refs.slider["client"+(this.vertical?"Height":"Width")])},emitChange:function(){var e=this;this.$nextTick((function(){e.$emit("change",e.range?[e.minValue,e.maxValue]:e.value)}))},getStopStyle:function(e){return this.vertical?{bottom:e+"%"}:{left:e+"%"}}},computed:{stops:function(){var e=this;if(!this.showStops||this.min>this.max)return[];if(0===this.step)return[];for(var n=(this.max-this.min)/this.step,t=100*this.step/(this.max-this.min),i=[],r=1;r<n;r++)i.push(r*t);return this.range?i.filter((function(n){return n<100*(e.minValue-e.min)/(e.max-e.min)||n>100*(e.maxValue-e.min)/(e.max-e.min)})):i.filter((function(n){return n>100*(e.firstValue-e.min)/(e.max-e.min)}))},markList:function(){var e=this;return this.marks?Object.keys(this.marks).map(parseFloat).sort((function(e,n){return e-n})).filter((function(n){return n<=e.max&&n>=e.min})).map((function(n){return{point:n,position:100*(n-e.min)/(e.max-e.min),mark:e.marks[n]}})):[]},minValue:function(){return Math.min(this.firstValue,this.secondValue)},maxValue:function(){return Math.max(this.firstValue,this.secondValue)},barSize:function(){return this.range?100*(this.maxValue-this.minValue)/(this.max-this.min)+"%":100*(this.firstValue-this.min)/(this.max-this.min)+"%"},barStart:function(){return this.range?100*(this.minValue-this.min)/(this.max-this.min)+"%":"0%"},precision:function(){var e=[this.min,this.max,this.step].map((function(e){var n=(""+e).split(".")[1];return n?n.length:0}));return Math.max.apply(null,e)},runwayStyle:function(){return this.vertical?{height:this.height}:{}},barStyle:function(){return this.vertical?{height:this.barSize,bottom:this.barStart}:{width:this.barSize,left:this.barStart}},sliderDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},mounted:function(){var e=void 0;this.range?(Array.isArray(this.value)?(this.firstValue=Math.max(this.min,this.value[0]),this.secondValue=Math.min(this.max,this.value[1])):(this.firstValue=this.min,this.secondValue=this.max),this.oldValue=[this.firstValue,this.secondValue],e=this.firstValue+"-"+this.secondValue):("number"!=typeof this.value||isNaN(this.value)?this.firstValue=this.min:this.firstValue=Math.min(this.max,Math.max(this.min,this.value)),this.oldValue=this.firstValue,e=this.firstValue),this.$el.setAttribute("aria-valuetext",e),this.$el.setAttribute("aria-label",this.label?this.label:"slider between "+this.min+" and "+this.max),this.resetSize(),window.addEventListener("resize",this.resetSize)},beforeDestroy:function(){window.removeEventListener("resize",this.resetSize)}},ma,[],!1,null,null,null);_a.options.__file="packages/slider/src/main.vue";var Sa=_a.exports;Sa.install=function(e){e.component(Sa.name,Sa)};var ka=Sa,Ca=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("transition",{attrs:{name:"el-loading-fade"},on:{"after-leave":e.handleAfterLeave}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-loading-mask",class:[e.customClass,{"is-fullscreen":e.fullscreen}],style:{backgroundColor:e.background||""}},[t("div",{staticClass:"el-loading-spinner"},[e.spinner?t("i",{class:e.spinner}):t("svg",{staticClass:"circular",attrs:{viewBox:"25 25 50 50"}},[t("circle",{staticClass:"path",attrs:{cx:"50",cy:"50",r:"20",fill:"none"}})]),e.text?t("p",{staticClass:"el-loading-text"},[e._v(e._s(e.text))]):e._e()])])])};Ca._withStripped=!0;var Ea=r({data:function(){return{text:null,spinner:null,background:null,fullscreen:!0,visible:!1,customClass:""}},methods:{handleAfterLeave:function(){this.$emit("after-leave")},setText:function(e){this.text=e}}},Ca,[],!1,null,null,null);Ea.options.__file="packages/loading/src/loading.vue";var Ta=Ea.exports,Pa=t(32),Oa=t.n(Pa),Aa=ht.a.extend(Ta),ja={install:function(e){if(!e.prototype.$isServer){var n=function(n,i){i.value?e.nextTick((function(){i.modifiers.fullscreen?(n.originalPosition=Object(fe.getStyle)(document.body,"position"),n.originalOverflow=Object(fe.getStyle)(document.body,"overflow"),n.maskStyle.zIndex=y.PopupManager.nextZIndex(),Object(fe.addClass)(n.mask,"is-fullscreen"),t(document.body,n,i)):(Object(fe.removeClass)(n.mask,"is-fullscreen"),i.modifiers.body?(n.originalPosition=Object(fe.getStyle)(document.body,"position"),["top","left"].forEach((function(e){var t="top"===e?"scrollTop":"scrollLeft";n.maskStyle[e]=n.getBoundingClientRect()[e]+document.body[t]+document.documentElement[t]-parseInt(Object(fe.getStyle)(document.body,"margin-"+e),10)+"px"})),["height","width"].forEach((function(e){n.maskStyle[e]=n.getBoundingClientRect()[e]+"px"})),t(document.body,n,i)):(n.originalPosition=Object(fe.getStyle)(n,"position"),t(n,n,i)))})):(Oa()(n.instance,(function(e){if(n.instance.hiding){n.domVisible=!1;var t=i.modifiers.fullscreen||i.modifiers.body?document.body:n;Object(fe.removeClass)(t,"el-loading-parent--relative"),Object(fe.removeClass)(t,"el-loading-parent--hidden"),n.instance.hiding=!1}}),300,!0),n.instance.visible=!1,n.instance.hiding=!0)},t=function(n,t,i){t.domVisible||"none"===Object(fe.getStyle)(t,"display")||"hidden"===Object(fe.getStyle)(t,"visibility")?t.domVisible&&!0===t.instance.hiding&&(t.instance.visible=!0,t.instance.hiding=!1):(Object.keys(t.maskStyle).forEach((function(e){t.mask.style[e]=t.maskStyle[e]})),"absolute"!==t.originalPosition&&"fixed"!==t.originalPosition&&Object(fe.addClass)(n,"el-loading-parent--relative"),i.modifiers.fullscreen&&i.modifiers.lock&&Object(fe.addClass)(n,"el-loading-parent--hidden"),t.domVisible=!0,n.appendChild(t.mask),e.nextTick((function(){t.instance.hiding?t.instance.$emit("after-leave"):t.instance.visible=!0})),t.domInserted=!0)};e.directive("loading",{bind:function(e,t,i){var r=e.getAttribute("element-loading-text"),o=e.getAttribute("element-loading-spinner"),a=e.getAttribute("element-loading-background"),s=e.getAttribute("element-loading-custom-class"),l=i.context,c=new Aa({el:document.createElement("div"),data:{text:l&&l[r]||r,spinner:l&&l[o]||o,background:l&&l[a]||a,customClass:l&&l[s]||s,fullscreen:!!t.modifiers.fullscreen}});e.instance=c,e.mask=c.$el,e.maskStyle={},t.value&&n(e,t)},update:function(e,t){e.instance.setText(e.getAttribute("element-loading-text")),t.oldValue!==t.value&&n(e,t)},unbind:function(e,t){e.domInserted&&(e.mask&&e.mask.parentNode&&e.mask.parentNode.removeChild(e.mask),n(e,{value:!1,modifiers:t.modifiers})),e.instance&&e.instance.$destroy()}})}}},Ia=ja,Da=ht.a.extend(Ta),Ma={text:null,fullscreen:!0,body:!1,lock:!1,customClass:""},La=void 0;Da.prototype.originalPosition="",Da.prototype.originalOverflow="",Da.prototype.close=function(){var e=this;this.fullscreen&&(La=void 0),Oa()(this,(function(n){var t=e.fullscreen||e.body?document.body:e.target;Object(fe.removeClass)(t,"el-loading-parent--relative"),Object(fe.removeClass)(t,"el-loading-parent--hidden"),e.$el&&e.$el.parentNode&&e.$el.parentNode.removeChild(e.$el),e.$destroy()}),300),this.visible=!1};var Na=function(e,n,t){var i={};e.fullscreen?(t.originalPosition=Object(fe.getStyle)(document.body,"position"),t.originalOverflow=Object(fe.getStyle)(document.body,"overflow"),i.zIndex=y.PopupManager.nextZIndex()):e.body?(t.originalPosition=Object(fe.getStyle)(document.body,"position"),["top","left"].forEach((function(n){var t="top"===n?"scrollTop":"scrollLeft";i[n]=e.target.getBoundingClientRect()[n]+document.body[t]+document.documentElement[t]+"px"})),["height","width"].forEach((function(n){i[n]=e.target.getBoundingClientRect()[n]+"px"}))):t.originalPosition=Object(fe.getStyle)(n,"position"),Object.keys(i).forEach((function(e){t.$el.style[e]=i[e]}))},$a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!ht.a.prototype.$isServer){if("string"==typeof(e=ze()({},Ma,e)).target&&(e.target=document.querySelector(e.target)),e.target=e.target||document.body,e.target!==document.body?e.fullscreen=!1:e.body=!0,e.fullscreen&&La)return La;var n=e.body?document.body:e.target,t=new Da({el:document.createElement("div"),data:e});return Na(e,n,t),"absolute"!==t.originalPosition&&"fixed"!==t.originalPosition&&Object(fe.addClass)(n,"el-loading-parent--relative"),e.fullscreen&&e.lock&&Object(fe.addClass)(n,"el-loading-parent--hidden"),n.appendChild(t.$el),ht.a.nextTick((function(){t.visible=!0})),e.fullscreen&&(La=t),t}},Fa={install:function(e){e.use(Ia),e.prototype.$loading=$a},directive:Ia,service:$a},Ra=function(){var e=this.$createElement;return(this._self._c||e)("i",{class:"el-icon-"+this.name})};Ra._withStripped=!0;var Ba=r({name:"ElIcon",props:{name:String}},Ra,[],!1,null,null,null);Ba.options.__file="packages/icon/src/icon.vue";var Va=Ba.exports;Va.install=function(e){e.component(Va.name,Va)};var za=Va,qa={name:"ElRow",componentName:"ElRow",props:{tag:{type:String,default:"div"},gutter:Number,type:String,justify:{type:String,default:"start"},align:{type:String,default:"top"}},computed:{style:function(){var e={};return this.gutter&&(e.marginLeft="-"+this.gutter/2+"px",e.marginRight=e.marginLeft),e}},render:function(e){return e(this.tag,{class:["el-row","start"!==this.justify?"is-justify-"+this.justify:"","top"!==this.align?"is-align-"+this.align:"",{"el-row--flex":"flex"===this.type}],style:this.style},this.$slots.default)},install:function(e){e.component(qa.name,qa)}},Ha=qa,Wa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ua={name:"ElCol",props:{span:{type:Number,default:24},tag:{type:String,default:"div"},offset:Number,pull:Number,push:Number,xs:[Number,Object],sm:[Number,Object],md:[Number,Object],lg:[Number,Object],xl:[Number,Object]},computed:{gutter:function(){for(var e=this.$parent;e&&"ElRow"!==e.$options.componentName;)e=e.$parent;return e?e.gutter:0}},render:function(e){var n=this,t=[],i={};return this.gutter&&(i.paddingLeft=this.gutter/2+"px",i.paddingRight=i.paddingLeft),["span","offset","pull","push"].forEach((function(e){(n[e]||0===n[e])&&t.push("span"!==e?"el-col-"+e+"-"+n[e]:"el-col-"+n[e])})),["xs","sm","md","lg","xl"].forEach((function(e){if("number"==typeof n[e])t.push("el-col-"+e+"-"+n[e]);else if("object"===Wa(n[e])){var i=n[e];Object.keys(i).forEach((function(n){t.push("span"!==n?"el-col-"+e+"-"+n+"-"+i[n]:"el-col-"+e+"-"+i[n])}))}})),e(this.tag,{class:["el-col",t],style:i},this.$slots.default)},install:function(e){e.component(Ua.name,Ua)}},Ja=Ua,Ya=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("transition-group",{class:["el-upload-list","el-upload-list--"+e.listType,{"is-disabled":e.disabled}],attrs:{tag:"ul",name:"el-list"}},e._l(e.files,(function(n){return t("li",{key:n.uid,class:["el-upload-list__item","is-"+n.status,e.focusing?"focusing":""],attrs:{tabindex:"0"},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"delete",[8,46],t.key,["Backspace","Delete","Del"]))return null;!e.disabled&&e.$emit("remove",n)},focus:function(n){e.focusing=!0},blur:function(n){e.focusing=!1},click:function(n){e.focusing=!1}}},[e._t("default",["uploading"!==n.status&&["picture-card","picture"].indexOf(e.listType)>-1?t("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:n.url,alt:""}}):e._e(),t("a",{staticClass:"el-upload-list__item-name",on:{click:function(t){e.handleClick(n)}}},[t("i",{staticClass:"el-icon-document"}),e._v(e._s(n.name)+"\n      ")]),t("label",{staticClass:"el-upload-list__item-status-label"},[t("i",{class:{"el-icon-upload-success":!0,"el-icon-circle-check":"text"===e.listType,"el-icon-check":["picture-card","picture"].indexOf(e.listType)>-1}})]),e.disabled?e._e():t("i",{staticClass:"el-icon-close",on:{click:function(t){e.$emit("remove",n)}}}),e.disabled?e._e():t("i",{staticClass:"el-icon-close-tip"},[e._v(e._s(e.t("el.upload.deleteTip")))]),"uploading"===n.status?t("el-progress",{attrs:{type:"picture-card"===e.listType?"circle":"line","stroke-width":"picture-card"===e.listType?6:2,percentage:e.parsePercentage(n.percentage)}}):e._e(),"picture-card"===e.listType?t("span",{staticClass:"el-upload-list__item-actions"},[e.handlePreview&&"picture-card"===e.listType?t("span",{staticClass:"el-upload-list__item-preview",on:{click:function(t){e.handlePreview(n)}}},[t("i",{staticClass:"el-icon-zoom-in"})]):e._e(),e.disabled?e._e():t("span",{staticClass:"el-upload-list__item-delete",on:{click:function(t){e.$emit("remove",n)}}},[t("i",{staticClass:"el-icon-delete"})])]):e._e()],{file:n})],2)})),0)};Ya._withStripped=!0;var Ga=t(33),Ka=t.n(Ga),Xa=r({name:"ElUploadList",mixins:[f.a],data:function(){return{focusing:!1}},components:{ElProgress:Ka.a},props:{files:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:!1},handlePreview:Function,listType:String},methods:{parsePercentage:function(e){return parseInt(e,10)},handleClick:function(e){this.handlePreview&&this.handlePreview(e)}}},Ya,[],!1,null,null,null);Xa.options.__file="packages/upload/src/upload-list.vue";var Qa=Xa.exports,Za=t(24),es=t.n(Za);var ns=function(){var e=this,n=e.$createElement;return(e._self._c||n)("div",{staticClass:"el-upload-dragger",class:{"is-dragover":e.dragover},on:{drop:function(n){return n.preventDefault(),e.onDrop(n)},dragover:function(n){return n.preventDefault(),e.onDragover(n)},dragleave:function(n){n.preventDefault(),e.dragover=!1}}},[e._t("default")],2)};ns._withStripped=!0;var ts=r({name:"ElUploadDrag",props:{disabled:Boolean},inject:{uploader:{default:""}},data:function(){return{dragover:!1}},methods:{onDragover:function(){this.disabled||(this.dragover=!0)},onDrop:function(e){if(!this.disabled&&this.uploader){var n=this.uploader.accept;this.dragover=!1,n?this.$emit("file",[].slice.call(e.dataTransfer.files).filter((function(e){var t=e.type,i=e.name,r=i.indexOf(".")>-1?"."+i.split(".").pop():"",o=t.replace(/\/.*$/,"");return n.split(",").map((function(e){return e.trim()})).filter((function(e){return e})).some((function(e){return/\..+$/.test(e)?r===e:/\/\*$/.test(e)?o===e.replace(/\/\*$/,""):!!/^[^\/]+\/[^\/]+$/.test(e)&&t===e}))}))):this.$emit("file",e.dataTransfer.files)}}}},ns,[],!1,null,null,null);ts.options.__file="packages/upload/src/upload-dragger.vue";var is=r({inject:["uploader"],components:{UploadDragger:ts.exports},props:{type:String,action:{type:String,required:!0},name:{type:String,default:"file"},data:Object,headers:Object,withCredentials:Boolean,multiple:Boolean,accept:String,onStart:Function,onProgress:Function,onSuccess:Function,onError:Function,beforeUpload:Function,drag:Boolean,onPreview:{type:Function,default:function(){}},onRemove:{type:Function,default:function(){}},fileList:Array,autoUpload:Boolean,listType:String,httpRequest:{type:Function,default:function(e){if("undefined"!=typeof XMLHttpRequest){var n=new XMLHttpRequest,t=e.action;n.upload&&(n.upload.onprogress=function(n){n.total>0&&(n.percent=n.loaded/n.total*100),e.onProgress(n)});var i=new FormData;e.data&&Object.keys(e.data).forEach((function(n){i.append(n,e.data[n])})),i.append(e.filename,e.file,e.file.name),n.onerror=function(n){e.onError(n)},n.onload=function(){if(n.status<200||n.status>=300)return e.onError(function(e,n,t){var i=void 0;i=t.response?""+(t.response.error||t.response):t.responseText?""+t.responseText:"fail to post "+e+" "+t.status;var r=new Error(i);return r.status=t.status,r.method="post",r.url=e,r}(t,0,n));e.onSuccess(function(e){var n=e.responseText||e.response;if(!n)return n;try{return JSON.parse(n)}catch(e){return n}}(n))},n.open("post",t,!0),e.withCredentials&&"withCredentials"in n&&(n.withCredentials=!0);var r=e.headers||{};for(var o in r)r.hasOwnProperty(o)&&null!==r[o]&&n.setRequestHeader(o,r[o]);return n.send(i),n}}},disabled:Boolean,limit:Number,onExceed:Function},data:function(){return{mouseover:!1,reqs:{}}},methods:{isImage:function(e){return-1!==e.indexOf("image")},handleChange:function(e){var n=e.target.files;n&&this.uploadFiles(n)},uploadFiles:function(e){var n=this;if(this.limit&&this.fileList.length+e.length>this.limit)this.onExceed&&this.onExceed(e,this.fileList);else{var t=Array.prototype.slice.call(e);this.multiple||(t=t.slice(0,1)),0!==t.length&&t.forEach((function(e){n.onStart(e),n.autoUpload&&n.upload(e)}))}},upload:function(e){var n=this;if(this.$refs.input.value=null,!this.beforeUpload)return this.post(e);var t=this.beforeUpload(e);t&&t.then?t.then((function(t){var i=Object.prototype.toString.call(t);if("[object File]"===i||"[object Blob]"===i){for(var r in"[object Blob]"===i&&(t=new File([t],e.name,{type:e.type})),e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.post(t)}else n.post(e)}),(function(){n.onRemove(null,e)})):!1!==t?this.post(e):this.onRemove(null,e)},abort:function(e){var n=this.reqs;if(e){var t=e;e.uid&&(t=e.uid),n[t]&&n[t].abort()}else Object.keys(n).forEach((function(e){n[e]&&n[e].abort(),delete n[e]}))},post:function(e){var n=this,t=e.uid,i={headers:this.headers,withCredentials:this.withCredentials,file:e,data:this.data,filename:this.name,action:this.action,onProgress:function(t){n.onProgress(t,e)},onSuccess:function(i){n.onSuccess(i,e),delete n.reqs[t]},onError:function(i){n.onError(i,e),delete n.reqs[t]}},r=this.httpRequest(i);this.reqs[t]=r,r&&r.then&&r.then(i.onSuccess,i.onError)},handleClick:function(){this.disabled||(this.$refs.input.value=null,this.$refs.input.click())},handleKeydown:function(e){e.target===e.currentTarget&&(13!==e.keyCode&&32!==e.keyCode||this.handleClick())}},render:function(e){var n=this.handleClick,t=this.drag,i=this.name,r=this.handleChange,o=this.multiple,a=this.accept,s=this.listType,l=this.uploadFiles,c=this.disabled,u={class:{"el-upload":!0},on:{click:n,keydown:this.handleKeydown}};return u.class["el-upload--"+s]=!0,e("div",es()([u,{attrs:{tabindex:"0"}}]),[t?e("upload-dragger",{attrs:{disabled:c},on:{file:l}},[this.$slots.default]):this.$slots.default,e("input",{class:"el-upload__input",attrs:{type:"file",name:i,multiple:o,accept:a},ref:"input",on:{change:r}})])}},void 0,void 0,!1,null,null,null);is.options.__file="packages/upload/src/upload.vue";var rs=is.exports;function os(){}var as=r({name:"ElUpload",mixins:[_.a],components:{ElProgress:Ka.a,UploadList:Qa,Upload:rs},provide:function(){return{uploader:this}},inject:{elForm:{default:""}},props:{action:{type:String,required:!0},headers:{type:Object,default:function(){return{}}},data:Object,multiple:Boolean,name:{type:String,default:"file"},drag:Boolean,dragger:Boolean,withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:String,type:{type:String,default:"select"},beforeUpload:Function,beforeRemove:Function,onRemove:{type:Function,default:os},onChange:{type:Function,default:os},onPreview:{type:Function},onSuccess:{type:Function,default:os},onProgress:{type:Function,default:os},onError:{type:Function,default:os},fileList:{type:Array,default:function(){return[]}},autoUpload:{type:Boolean,default:!0},listType:{type:String,default:"text"},httpRequest:Function,disabled:Boolean,limit:Number,onExceed:{type:Function,default:os}},data:function(){return{uploadFiles:[],dragOver:!1,draging:!1,tempIndex:1}},computed:{uploadDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},watch:{listType:function(e){"picture-card"!==e&&"picture"!==e||(this.uploadFiles=this.uploadFiles.map((function(e){if(!e.url&&e.raw)try{e.url=URL.createObjectURL(e.raw)}catch(e){console.error("[Element Error][Upload]",e)}return e})))},fileList:{immediate:!0,handler:function(e){var n=this;this.uploadFiles=e.map((function(e){return e.uid=e.uid||Date.now()+n.tempIndex++,e.status=e.status||"success",e}))}}},methods:{handleStart:function(e){e.uid=Date.now()+this.tempIndex++;var n={status:"ready",name:e.name,size:e.size,percentage:0,uid:e.uid,raw:e};if("picture-card"===this.listType||"picture"===this.listType)try{n.url=URL.createObjectURL(e)}catch(e){return void console.error("[Element Error][Upload]",e)}this.uploadFiles.push(n),this.onChange(n,this.uploadFiles)},handleProgress:function(e,n){var t=this.getFile(n);this.onProgress(e,t,this.uploadFiles),t.status="uploading",t.percentage=e.percent||0},handleSuccess:function(e,n){var t=this.getFile(n);t&&(t.status="success",t.response=e,this.onSuccess(e,t,this.uploadFiles),this.onChange(t,this.uploadFiles))},handleError:function(e,n){var t=this.getFile(n),i=this.uploadFiles;t.status="fail",i.splice(i.indexOf(t),1),this.onError(e,t,this.uploadFiles),this.onChange(t,this.uploadFiles)},handleRemove:function(e,n){var t=this;n&&(e=this.getFile(n));var i=function(){t.abort(e);var n=t.uploadFiles;n.splice(n.indexOf(e),1),t.onRemove(e,n)};if(this.beforeRemove){if("function"==typeof this.beforeRemove){var r=this.beforeRemove(e,this.uploadFiles);r&&r.then?r.then((function(){i()}),os):!1!==r&&i()}}else i()},getFile:function(e){var n=this.uploadFiles,t=void 0;return n.every((function(n){return!(t=e.uid===n.uid?n:null)})),t},abort:function(e){this.$refs["upload-inner"].abort(e)},clearFiles:function(){this.uploadFiles=[]},submit:function(){var e=this;this.uploadFiles.filter((function(e){return"ready"===e.status})).forEach((function(n){e.$refs["upload-inner"].upload(n.raw)}))},getMigratingConfig:function(){return{props:{"default-file-list":"default-file-list is renamed to file-list.","show-upload-list":"show-upload-list is renamed to show-file-list.","thumbnail-mode":"thumbnail-mode has been deprecated, you can implement the same effect according to this case: http://element.eleme.io/#/zh-CN/component/upload#yong-hu-tou-xiang-shang-chuan"}}}},beforeDestroy:function(){this.uploadFiles.forEach((function(e){e.url&&0===e.url.indexOf("blob:")&&URL.revokeObjectURL(e.url)}))},render:function(e){var n=this,t=void 0;this.showFileList&&(t=e(Qa,{attrs:{disabled:this.uploadDisabled,listType:this.listType,files:this.uploadFiles,handlePreview:this.onPreview},on:{remove:this.handleRemove}},[function(e){if(n.$scopedSlots.file)return n.$scopedSlots.file({file:e.file})}]));var i=e("upload",{props:{type:this.type,drag:this.drag,action:this.action,multiple:this.multiple,"before-upload":this.beforeUpload,"with-credentials":this.withCredentials,headers:this.headers,name:this.name,data:this.data,accept:this.accept,fileList:this.uploadFiles,autoUpload:this.autoUpload,listType:this.listType,disabled:this.uploadDisabled,limit:this.limit,"on-exceed":this.onExceed,"on-start":this.handleStart,"on-progress":this.handleProgress,"on-success":this.handleSuccess,"on-error":this.handleError,"on-preview":this.onPreview,"on-remove":this.handleRemove,"http-request":this.httpRequest},ref:"upload-inner"},[this.$slots.trigger||this.$slots.default]);return e("div",["picture-card"===this.listType?t:"",this.$slots.trigger?[i,this.$slots.default]:i,this.$slots.tip,"picture-card"!==this.listType?t:""])}},void 0,void 0,!1,null,null,null);as.options.__file="packages/upload/src/index.vue";var ss=as.exports;ss.install=function(e){e.component(ss.name,ss)};var ls=ss,cs=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"el-progress",class:["el-progress--"+e.type,e.status?"is-"+e.status:"",{"el-progress--without-text":!e.showText,"el-progress--text-inside":e.textInside}],attrs:{role:"progressbar","aria-valuenow":e.percentage,"aria-valuemin":"0","aria-valuemax":"100"}},["line"===e.type?t("div",{staticClass:"el-progress-bar"},[t("div",{staticClass:"el-progress-bar__outer",style:{height:e.strokeWidth+"px"}},[t("div",{staticClass:"el-progress-bar__inner",style:e.barStyle},[e.showText&&e.textInside?t("div",{staticClass:"el-progress-bar__innerText"},[e._v(e._s(e.content))]):e._e()])])]):t("div",{staticClass:"el-progress-circle",style:{height:e.width+"px",width:e.width+"px"}},[t("svg",{attrs:{viewBox:"0 0 100 100"}},[t("path",{staticClass:"el-progress-circle__track",style:e.trailPathStyle,attrs:{d:e.trackPath,stroke:"#e5e9f2","stroke-width":e.relativeStrokeWidth,fill:"none"}}),t("path",{staticClass:"el-progress-circle__path",style:e.circlePathStyle,attrs:{d:e.trackPath,stroke:e.stroke,fill:"none","stroke-linecap":e.strokeLinecap,"stroke-width":e.percentage?e.relativeStrokeWidth:0}})])]),e.showText&&!e.textInside?t("div",{staticClass:"el-progress__text",style:{fontSize:e.progressTextSize+"px"}},[e.status?t("i",{class:e.iconClass}):[e._v(e._s(e.content))]],2):e._e()])};cs._withStripped=!0;var us=r({name:"ElProgress",props:{type:{type:String,default:"line",validator:function(e){return["line","circle","dashboard"].indexOf(e)>-1}},percentage:{type:Number,default:0,required:!0,validator:function(e){return e>=0&&e<=100}},status:{type:String,validator:function(e){return["success","exception","warning"].indexOf(e)>-1}},strokeWidth:{type:Number,default:6},strokeLinecap:{type:String,default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:[String,Array,Function],default:""},format:Function},computed:{barStyle:function(){var e={};return e.width=this.percentage+"%",e.backgroundColor=this.getCurrentColor(this.percentage),e},relativeStrokeWidth:function(){return(this.strokeWidth/this.width*100).toFixed(1)},radius:function(){return"circle"===this.type||"dashboard"===this.type?parseInt(50-parseFloat(this.relativeStrokeWidth)/2,10):0},trackPath:function(){var e=this.radius,n="dashboard"===this.type;return"\n        M 50 50\n        m 0 "+(n?"":"-")+e+"\n        a "+e+" "+e+" 0 1 1 0 "+(n?"-":"")+2*e+"\n        a "+e+" "+e+" 0 1 1 0 "+(n?"":"-")+2*e+"\n        "},perimeter:function(){return 2*Math.PI*this.radius},rate:function(){return"dashboard"===this.type?.75:1},strokeDashoffset:function(){return-1*this.perimeter*(1-this.rate)/2+"px"},trailPathStyle:function(){return{strokeDasharray:this.perimeter*this.rate+"px, "+this.perimeter+"px",strokeDashoffset:this.strokeDashoffset}},circlePathStyle:function(){return{strokeDasharray:this.perimeter*this.rate*(this.percentage/100)+"px, "+this.perimeter+"px",strokeDashoffset:this.strokeDashoffset,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease"}},stroke:function(){var e=void 0;if(this.color)e=this.getCurrentColor(this.percentage);else switch(this.status){case"success":e="#13ce66";break;case"exception":e="#ff4949";break;case"warning":e="#e6a23c";break;default:e="#20a0ff"}return e},iconClass:function(){return"warning"===this.status?"el-icon-warning":"line"===this.type?"success"===this.status?"el-icon-circle-check":"el-icon-circle-close":"success"===this.status?"el-icon-check":"el-icon-close"},progressTextSize:function(){return"line"===this.type?12+.4*this.strokeWidth:.111111*this.width+2},content:function(){return"function"==typeof this.format?this.format(this.percentage)||"":this.percentage+"%"}},methods:{getCurrentColor:function(e){return"function"==typeof this.color?this.color(e):"string"==typeof this.color?this.color:this.getLevelColor(e)},getLevelColor:function(e){for(var n=this.getColorArray().sort((function(e,n){return e.percentage-n.percentage})),t=0;t<n.length;t++)if(n[t].percentage>e)return n[t].color;return n[n.length-1].color},getColorArray:function(){var e=this.color,n=100/e.length;return e.map((function(e,t){return"string"==typeof e?{color:e,percentage:(t+1)*n}:e}))}}},cs,[],!1,null,null,null);us.options.__file="packages/progress/src/progress.vue";var ds=us.exports;ds.install=function(e){e.component(ds.name,ds)};var hs=ds,ps=function(){var e=this.$createElement,n=this._self._c||e;return n("span",{staticClass:"el-spinner"},[n("svg",{staticClass:"el-spinner-inner",style:{width:this.radius/2+"px",height:this.radius/2+"px"},attrs:{viewBox:"0 0 50 50"}},[n("circle",{staticClass:"path",attrs:{cx:"25",cy:"25",r:"20",fill:"none",stroke:this.strokeColor,"stroke-width":this.strokeWidth}})])])};ps._withStripped=!0;var fs=r({name:"ElSpinner",props:{type:String,radius:{type:Number,default:100},strokeWidth:{type:Number,default:5},strokeColor:{type:String,default:"#efefef"}}},ps,[],!1,null,null,null);fs.options.__file="packages/spinner/src/spinner.vue";var ms=fs.exports;ms.install=function(e){e.component(ms.name,ms)};var gs=ms,vs=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("transition",{attrs:{name:"el-message-fade"},on:{"after-leave":e.handleAfterLeave}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],class:["el-message",e.type&&!e.iconClass?"el-message--"+e.type:"",e.center?"is-center":"",e.showClose?"is-closable":"",e.customClass],style:e.positionStyle,attrs:{role:"alert"},on:{mouseenter:e.clearTimer,mouseleave:e.startTimer}},[e.iconClass?t("i",{class:e.iconClass}):t("i",{class:e.typeClass}),e._t("default",[e.dangerouslyUseHTMLString?t("p",{staticClass:"el-message__content",domProps:{innerHTML:e._s(e.message)}}):t("p",{staticClass:"el-message__content"},[e._v(e._s(e.message))])]),e.showClose?t("i",{staticClass:"el-message__closeBtn el-icon-close",on:{click:e.close}}):e._e()],2)])};vs._withStripped=!0;var bs={success:"success",info:"info",warning:"warning",error:"error"},ys=r({data:function(){return{visible:!1,message:"",duration:3e3,type:"info",iconClass:"",customClass:"",onClose:null,showClose:!1,closed:!1,verticalOffset:20,timer:null,dangerouslyUseHTMLString:!1,center:!1}},computed:{typeClass:function(){return this.type&&!this.iconClass?"el-message__icon el-icon-"+bs[this.type]:""},positionStyle:function(){return{top:this.verticalOffset+"px"}}},watch:{closed:function(e){e&&(this.visible=!1)}},methods:{handleAfterLeave:function(){this.$destroy(!0),this.$el.parentNode.removeChild(this.$el)},close:function(){this.closed=!0,"function"==typeof this.onClose&&this.onClose(this)},clearTimer:function(){clearTimeout(this.timer)},startTimer:function(){var e=this;this.duration>0&&(this.timer=setTimeout((function(){e.closed||e.close()}),this.duration))},keydown:function(e){27===e.keyCode&&(this.closed||this.close())}},mounted:function(){this.startTimer(),document.addEventListener("keydown",this.keydown)},beforeDestroy:function(){document.removeEventListener("keydown",this.keydown)}},vs,[],!1,null,null,null);ys.options.__file="packages/message/src/main.vue";var ws=ys.exports,xs=ht.a.extend(ws),_s=void 0,Ss=[],ks=1,Cs=function e(n){if(!ht.a.prototype.$isServer){"string"==typeof(n=n||{})&&(n={message:n});var t=n.onClose,i="message_"+ks++;n.onClose=function(){e.close(i,t)},(_s=new xs({data:n})).id=i,Object(zr.isVNode)(_s.message)&&(_s.$slots.default=[_s.message],_s.message=null),_s.$mount(),document.body.appendChild(_s.$el);var r=n.offset||20;return Ss.forEach((function(e){r+=e.$el.offsetHeight+16})),_s.verticalOffset=r,_s.visible=!0,_s.$el.style.zIndex=y.PopupManager.nextZIndex(),Ss.push(_s),_s}};["success","warning","info","error"].forEach((function(e){Cs[e]=function(n){return"string"==typeof n&&(n={message:n}),n.type=e,Cs(n)}})),Cs.close=function(e,n){for(var t=Ss.length,i=-1,r=void 0,o=0;o<t;o++)if(e===Ss[o].id){r=Ss[o].$el.offsetHeight,i=o,"function"==typeof n&&n(Ss[o]),Ss.splice(o,1);break}if(!(t<=1||-1===i||i>Ss.length-1))for(var a=i;a<t-1;a++){var s=Ss[a].$el;s.style.top=parseInt(s.style.top,10)-r-16+"px"}},Cs.closeAll=function(){for(var e=Ss.length-1;e>=0;e--)Ss[e].close()};var Es=Cs,Ts=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"el-badge"},[e._t("default"),t("transition",{attrs:{name:"el-zoom-in-center"}},[t("sup",{directives:[{name:"show",rawName:"v-show",value:!e.hidden&&(e.content||0===e.content||e.isDot),expression:"!hidden && (content || content === 0 || isDot)"}],staticClass:"el-badge__content",class:["el-badge__content--"+e.type,{"is-fixed":e.$slots.default,"is-dot":e.isDot}],domProps:{textContent:e._s(e.content)}})])],2)};Ts._withStripped=!0;var Ps=r({name:"ElBadge",props:{value:[String,Number],max:Number,isDot:Boolean,hidden:Boolean,type:{type:String,validator:function(e){return["primary","success","warning","info","danger"].indexOf(e)>-1}}},computed:{content:function(){if(!this.isDot){var e=this.value,n=this.max;return"number"==typeof e&&"number"==typeof n&&n<e?n+"+":e}}}},Ts,[],!1,null,null,null);Ps.options.__file="packages/badge/src/main.vue";var Os=Ps.exports;Os.install=function(e){e.component(Os.name,Os)};var As=Os,js=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"el-card",class:e.shadow?"is-"+e.shadow+"-shadow":"is-always-shadow"},[e.$slots.header||e.header?t("div",{staticClass:"el-card__header"},[e._t("header",[e._v(e._s(e.header))])],2):e._e(),t("div",{staticClass:"el-card__body",style:e.bodyStyle},[e._t("default")],2)])};js._withStripped=!0;var Is=r({name:"ElCard",props:{header:{},bodyStyle:{},shadow:{type:String}}},js,[],!1,null,null,null);Is.options.__file="packages/card/src/main.vue";var Ds=Is.exports;Ds.install=function(e){e.component(Ds.name,Ds)};var Ms=Ds,Ls=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"el-rate",attrs:{role:"slider","aria-valuenow":e.currentValue,"aria-valuetext":e.text,"aria-valuemin":"0","aria-valuemax":e.max,tabindex:"0"},on:{keydown:e.handleKey}},[e._l(e.max,(function(n,i){return t("span",{key:i,staticClass:"el-rate__item",style:{cursor:e.rateDisabled?"auto":"pointer"},on:{mousemove:function(t){e.setCurrentValue(n,t)},mouseleave:e.resetCurrentValue,click:function(t){e.selectValue(n)}}},[t("i",{staticClass:"el-rate__icon",class:[e.classes[n-1],{hover:e.hoverIndex===n}],style:e.getIconStyle(n)},[e.showDecimalIcon(n)?t("i",{staticClass:"el-rate__decimal",class:e.decimalIconClass,style:e.decimalStyle}):e._e()])])})),e.showText||e.showScore?t("span",{staticClass:"el-rate__text",style:{color:e.textColor}},[e._v(e._s(e.text))]):e._e()],2)};Ls._withStripped=!0;var Ns=t(18),$s=r({name:"ElRate",mixins:[_.a],inject:{elForm:{default:""}},data:function(){return{pointerAtLeftHalf:!0,currentValue:this.value,hoverIndex:-1}},props:{value:{type:Number,default:0},lowThreshold:{type:Number,default:2},highThreshold:{type:Number,default:4},max:{type:Number,default:5},colors:{type:[Array,Object],default:function(){return["#F7BA2A","#F7BA2A","#F7BA2A"]}},voidColor:{type:String,default:"#C6D1DE"},disabledVoidColor:{type:String,default:"#EFF2F7"},iconClasses:{type:[Array,Object],default:function(){return["el-icon-star-on","el-icon-star-on","el-icon-star-on"]}},voidIconClass:{type:String,default:"el-icon-star-off"},disabledVoidIconClass:{type:String,default:"el-icon-star-on"},disabled:{type:Boolean,default:!1},allowHalf:{type:Boolean,default:!1},showText:{type:Boolean,default:!1},showScore:{type:Boolean,default:!1},textColor:{type:String,default:"#1f2d3d"},texts:{type:Array,default:function(){return["极差","失望","一般","满意","惊喜"]}},scoreTemplate:{type:String,default:"{value}"}},computed:{text:function(){var e="";return this.showScore?e=this.scoreTemplate.replace(/\{\s*value\s*\}/,this.rateDisabled?this.value:this.currentValue):this.showText&&(e=this.texts[Math.ceil(this.currentValue)-1]),e},decimalStyle:function(){var e="";return this.rateDisabled?e=this.valueDecimal+"%":this.allowHalf&&(e="50%"),{color:this.activeColor,width:e}},valueDecimal:function(){return 100*this.value-100*Math.floor(this.value)},classMap:function(){var e;return Array.isArray(this.iconClasses)?((e={})[this.lowThreshold]=this.iconClasses[0],e[this.highThreshold]={value:this.iconClasses[1],excluded:!0},e[this.max]=this.iconClasses[2],e):this.iconClasses},decimalIconClass:function(){return this.getValueFromMap(this.value,this.classMap)},voidClass:function(){return this.rateDisabled?this.disabledVoidIconClass:this.voidIconClass},activeClass:function(){return this.getValueFromMap(this.currentValue,this.classMap)},colorMap:function(){var e;return Array.isArray(this.colors)?((e={})[this.lowThreshold]=this.colors[0],e[this.highThreshold]={value:this.colors[1],excluded:!0},e[this.max]=this.colors[2],e):this.colors},activeColor:function(){return this.getValueFromMap(this.currentValue,this.colorMap)},classes:function(){var e=[],n=0,t=this.currentValue;for(this.allowHalf&&this.currentValue!==Math.floor(this.currentValue)&&t--;n<t;n++)e.push(this.activeClass);for(;n<this.max;n++)e.push(this.voidClass);return e},rateDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},watch:{value:function(e){this.currentValue=e,this.pointerAtLeftHalf=this.value!==Math.floor(this.value)}},methods:{getMigratingConfig:function(){return{props:{"text-template":"text-template is renamed to score-template."}}},getValueFromMap:function(e,n){var t=Object.keys(n).filter((function(t){var i=n[t];return!!Object(Ns.isObject)(i)&&i.excluded?e<t:e<=t})).sort((function(e,n){return e-n})),i=n[t[0]];return Object(Ns.isObject)(i)?i.value:i||""},showDecimalIcon:function(e){var n=this.rateDisabled&&this.valueDecimal>0&&e-1<this.value&&e>this.value,t=this.allowHalf&&this.pointerAtLeftHalf&&e-.5<=this.currentValue&&e>this.currentValue;return n||t},getIconStyle:function(e){var n=this.rateDisabled?this.disabledVoidColor:this.voidColor;return{color:e<=this.currentValue?this.activeColor:n}},selectValue:function(e){this.rateDisabled||(this.allowHalf&&this.pointerAtLeftHalf?(this.$emit("input",this.currentValue),this.$emit("change",this.currentValue)):(this.$emit("input",e),this.$emit("change",e)))},handleKey:function(e){if(!this.rateDisabled){var n=this.currentValue,t=e.keyCode;38===t||39===t?(this.allowHalf?n+=.5:n+=1,e.stopPropagation(),e.preventDefault()):37!==t&&40!==t||(this.allowHalf?n-=.5:n-=1,e.stopPropagation(),e.preventDefault()),n=(n=n<0?0:n)>this.max?this.max:n,this.$emit("input",n),this.$emit("change",n)}},setCurrentValue:function(e,n){if(!this.rateDisabled){if(this.allowHalf){var t=n.target;Object(fe.hasClass)(t,"el-rate__item")&&(t=t.querySelector(".el-rate__icon")),Object(fe.hasClass)(t,"el-rate__decimal")&&(t=t.parentNode),this.pointerAtLeftHalf=2*n.offsetX<=t.clientWidth,this.currentValue=this.pointerAtLeftHalf?e-.5:e}else this.currentValue=e;this.hoverIndex=e}},resetCurrentValue:function(){this.rateDisabled||(this.allowHalf&&(this.pointerAtLeftHalf=this.value!==Math.floor(this.value)),this.currentValue=this.value,this.hoverIndex=-1)}},created:function(){this.value||this.$emit("input",0)}},Ls,[],!1,null,null,null);$s.options.__file="packages/rate/src/main.vue";var Fs=$s.exports;Fs.install=function(e){e.component(Fs.name,Fs)};var Rs=Fs,Bs=function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"el-steps",class:[!this.simple&&"el-steps--"+this.direction,this.simple&&"el-steps--simple"]},[this._t("default")],2)};Bs._withStripped=!0;var Vs=r({name:"ElSteps",mixins:[_.a],props:{space:[Number,String],active:Number,direction:{type:String,default:"horizontal"},alignCenter:Boolean,simple:Boolean,finishStatus:{type:String,default:"finish"},processStatus:{type:String,default:"process"}},data:function(){return{steps:[],stepOffset:0}},methods:{getMigratingConfig:function(){return{props:{center:"center is removed."}}}},watch:{active:function(e,n){this.$emit("change",e,n)},steps:function(e){e.forEach((function(e,n){e.index=n}))}}},Bs,[],!1,null,null,null);Vs.options.__file="packages/steps/src/steps.vue";var zs=Vs.exports;zs.install=function(e){e.component(zs.name,zs)};var qs=zs,Hs=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"el-step",class:[!e.isSimple&&"is-"+e.$parent.direction,e.isSimple&&"is-simple",e.isLast&&!e.space&&!e.isCenter&&"is-flex",e.isCenter&&!e.isVertical&&!e.isSimple&&"is-center"],style:e.style},[t("div",{staticClass:"el-step__head",class:"is-"+e.currentStatus},[t("div",{staticClass:"el-step__line",style:e.isLast?"":{marginRight:e.$parent.stepOffset+"px"}},[t("i",{staticClass:"el-step__line-inner",style:e.lineStyle})]),t("div",{staticClass:"el-step__icon",class:"is-"+(e.icon?"icon":"text")},["success"!==e.currentStatus&&"error"!==e.currentStatus?e._t("icon",[e.icon?t("i",{staticClass:"el-step__icon-inner",class:[e.icon]}):e._e(),e.icon||e.isSimple?e._e():t("div",{staticClass:"el-step__icon-inner"},[e._v(e._s(e.index+1))])]):t("i",{staticClass:"el-step__icon-inner is-status",class:["el-icon-"+("success"===e.currentStatus?"check":"close")]})],2)]),t("div",{staticClass:"el-step__main"},[t("div",{ref:"title",staticClass:"el-step__title",class:["is-"+e.currentStatus]},[e._t("title",[e._v(e._s(e.title))])],2),e.isSimple?t("div",{staticClass:"el-step__arrow"}):t("div",{staticClass:"el-step__description",class:["is-"+e.currentStatus]},[e._t("description",[e._v(e._s(e.description))])],2)])])};Hs._withStripped=!0;var Ws=r({name:"ElStep",props:{title:String,icon:String,description:String,status:String},data:function(){return{index:-1,lineStyle:{},internalStatus:""}},beforeCreate:function(){this.$parent.steps.push(this)},beforeDestroy:function(){var e=this.$parent.steps,n=e.indexOf(this);n>=0&&e.splice(n,1)},computed:{currentStatus:function(){return this.status||this.internalStatus},prevStatus:function(){var e=this.$parent.steps[this.index-1];return e?e.currentStatus:"wait"},isCenter:function(){return this.$parent.alignCenter},isVertical:function(){return"vertical"===this.$parent.direction},isSimple:function(){return this.$parent.simple},isLast:function(){var e=this.$parent;return e.steps[e.steps.length-1]===this},stepsCount:function(){return this.$parent.steps.length},space:function(){var e=this.isSimple,n=this.$parent.space;return e?"":n},style:function(){var e={},n=this.$parent.steps.length,t="number"==typeof this.space?this.space+"px":this.space?this.space:100/(n-(this.isCenter?0:1))+"%";return e.flexBasis=t,this.isVertical||(this.isLast?e.maxWidth=100/this.stepsCount+"%":e.marginRight=-this.$parent.stepOffset+"px"),e}},methods:{updateStatus:function(e){var n=this.$parent.$children[this.index-1];e>this.index?this.internalStatus=this.$parent.finishStatus:e===this.index&&"error"!==this.prevStatus?this.internalStatus=this.$parent.processStatus:this.internalStatus="wait",n&&n.calcProgress(this.internalStatus)},calcProgress:function(e){var n=100,t={};t.transitionDelay=150*this.index+"ms",e===this.$parent.processStatus?(this.currentStatus,n=0):"wait"===e&&(n=0,t.transitionDelay=-150*this.index+"ms"),t.borderWidth=n&&!this.isSimple?"1px":0,"vertical"===this.$parent.direction?t.height=n+"%":t.width=n+"%",this.lineStyle=t}},mounted:function(){var e=this,n=this.$watch("index",(function(t){e.$watch("$parent.active",e.updateStatus,{immediate:!0}),e.$watch("$parent.processStatus",(function(){var n=e.$parent.active;e.updateStatus(n)}),{immediate:!0}),n()}))}},Hs,[],!1,null,null,null);Ws.options.__file="packages/steps/src/step.vue";var Us=Ws.exports;Us.install=function(e){e.component(Us.name,Us)};var Js=Us,Ys=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{class:e.carouselClasses,on:{mouseenter:function(n){return n.stopPropagation(),e.handleMouseEnter(n)},mouseleave:function(n){return n.stopPropagation(),e.handleMouseLeave(n)}}},[t("div",{staticClass:"el-carousel__container",style:{height:e.height}},[e.arrowDisplay?t("transition",{attrs:{name:"carousel-arrow-left"}},[t("button",{directives:[{name:"show",rawName:"v-show",value:("always"===e.arrow||e.hover)&&(e.loop||e.activeIndex>0),expression:"(arrow === 'always' || hover) && (loop || activeIndex > 0)"}],staticClass:"el-carousel__arrow el-carousel__arrow--left",attrs:{type:"button"},on:{mouseenter:function(n){e.handleButtonEnter("left")},mouseleave:e.handleButtonLeave,click:function(n){n.stopPropagation(),e.throttledArrowClick(e.activeIndex-1)}}},[t("i",{staticClass:"el-icon-arrow-left"})])]):e._e(),e.arrowDisplay?t("transition",{attrs:{name:"carousel-arrow-right"}},[t("button",{directives:[{name:"show",rawName:"v-show",value:("always"===e.arrow||e.hover)&&(e.loop||e.activeIndex<e.items.length-1),expression:"(arrow === 'always' || hover) && (loop || activeIndex < items.length - 1)"}],staticClass:"el-carousel__arrow el-carousel__arrow--right",attrs:{type:"button"},on:{mouseenter:function(n){e.handleButtonEnter("right")},mouseleave:e.handleButtonLeave,click:function(n){n.stopPropagation(),e.throttledArrowClick(e.activeIndex+1)}}},[t("i",{staticClass:"el-icon-arrow-right"})])]):e._e(),e._t("default")],2),"none"!==e.indicatorPosition?t("ul",{class:e.indicatorsClasses},e._l(e.items,(function(n,i){return t("li",{key:i,class:["el-carousel__indicator","el-carousel__indicator--"+e.direction,{"is-active":i===e.activeIndex}],on:{mouseenter:function(n){e.throttledIndicatorHover(i)},click:function(n){n.stopPropagation(),e.handleIndicatorClick(i)}}},[t("button",{staticClass:"el-carousel__button"},[e.hasLabel?t("span",[e._v(e._s(n.label))]):e._e()])])})),0):e._e()])};Ys._withStripped=!0;var Gs=t(25),Ks=t.n(Gs),Xs=r({name:"ElCarousel",props:{initialIndex:{type:Number,default:0},height:String,trigger:{type:String,default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:String,indicator:{type:Boolean,default:!0},arrow:{type:String,default:"hover"},type:String,loop:{type:Boolean,default:!0},direction:{type:String,default:"horizontal",validator:function(e){return-1!==["horizontal","vertical"].indexOf(e)}}},data:function(){return{items:[],activeIndex:-1,containerWidth:0,timer:null,hover:!1}},computed:{arrowDisplay:function(){return"never"!==this.arrow&&"vertical"!==this.direction},hasLabel:function(){return this.items.some((function(e){return e.label.toString().length>0}))},carouselClasses:function(){var e=["el-carousel","el-carousel--"+this.direction];return"card"===this.type&&e.push("el-carousel--card"),e},indicatorsClasses:function(){var e=["el-carousel__indicators","el-carousel__indicators--"+this.direction];return this.hasLabel&&e.push("el-carousel__indicators--labels"),"outside"!==this.indicatorPosition&&"card"!==this.type||e.push("el-carousel__indicators--outside"),e}},watch:{items:function(e){e.length>0&&this.setActiveItem(this.initialIndex)},activeIndex:function(e,n){this.resetItemPosition(n),n>-1&&this.$emit("change",e,n)},autoplay:function(e){e?this.startTimer():this.pauseTimer()},loop:function(){this.setActiveItem(this.activeIndex)}},methods:{handleMouseEnter:function(){this.hover=!0,this.pauseTimer()},handleMouseLeave:function(){this.hover=!1,this.startTimer()},itemInStage:function(e,n){var t=this.items.length;return n===t-1&&e.inStage&&this.items[0].active||e.inStage&&this.items[n+1]&&this.items[n+1].active?"left":!!(0===n&&e.inStage&&this.items[t-1].active||e.inStage&&this.items[n-1]&&this.items[n-1].active)&&"right"},handleButtonEnter:function(e){var n=this;"vertical"!==this.direction&&this.items.forEach((function(t,i){e===n.itemInStage(t,i)&&(t.hover=!0)}))},handleButtonLeave:function(){"vertical"!==this.direction&&this.items.forEach((function(e){e.hover=!1}))},updateItems:function(){this.items=this.$children.filter((function(e){return"ElCarouselItem"===e.$options.name}))},resetItemPosition:function(e){var n=this;this.items.forEach((function(t,i){t.translateItem(i,n.activeIndex,e)}))},playSlides:function(){this.activeIndex<this.items.length-1?this.activeIndex++:this.loop&&(this.activeIndex=0)},pauseTimer:function(){this.timer&&(clearInterval(this.timer),this.timer=null)},startTimer:function(){this.interval<=0||!this.autoplay||this.timer||(this.timer=setInterval(this.playSlides,this.interval))},setActiveItem:function(e){if("string"==typeof e){var n=this.items.filter((function(n){return n.name===e}));n.length>0&&(e=this.items.indexOf(n[0]))}if(e=Number(e),isNaN(e)||e!==Math.floor(e))console.warn("[Element Warn][Carousel]index must be an integer.");else{var t=this.items.length,i=this.activeIndex;this.activeIndex=e<0?this.loop?t-1:0:e>=t?this.loop?0:t-1:e,i===this.activeIndex&&this.resetItemPosition(i)}},prev:function(){this.setActiveItem(this.activeIndex-1)},next:function(){this.setActiveItem(this.activeIndex+1)},handleIndicatorClick:function(e){this.activeIndex=e},handleIndicatorHover:function(e){"hover"===this.trigger&&e!==this.activeIndex&&(this.activeIndex=e)}},created:function(){var e=this;this.throttledArrowClick=Ks()(300,!0,(function(n){e.setActiveItem(n)})),this.throttledIndicatorHover=Ks()(300,(function(n){e.handleIndicatorHover(n)}))},mounted:function(){var e=this;this.updateItems(),this.$nextTick((function(){Object(Fn.addResizeListener)(e.$el,e.resetItemPosition),e.initialIndex<e.items.length&&e.initialIndex>=0&&(e.activeIndex=e.initialIndex),e.startTimer()}))},beforeDestroy:function(){this.$el&&Object(Fn.removeResizeListener)(this.$el,this.resetItemPosition),this.pauseTimer()}},Ys,[],!1,null,null,null);Xs.options.__file="packages/carousel/src/main.vue";var Qs=Xs.exports;Qs.install=function(e){e.component(Qs.name,Qs)};var Zs=Qs,el={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}};function nl(e){var n=e.move,t=e.size,i=e.bar,r={},o="translate"+i.axis+"("+n+"%)";return r[i.size]=t,r.transform=o,r.msTransform=o,r.webkitTransform=o,r}var tl={name:"Bar",props:{vertical:Boolean,size:String,move:Number},computed:{bar:function(){return el[this.vertical?"vertical":"horizontal"]},wrap:function(){return this.$parent.wrap}},render:function(e){var n=this.size,t=this.move,i=this.bar;return e("div",{class:["el-scrollbar__bar","is-"+i.key],on:{mousedown:this.clickTrackHandler}},[e("div",{ref:"thumb",class:"el-scrollbar__thumb",on:{mousedown:this.clickThumbHandler},style:nl({size:n,move:t,bar:i})})])},methods:{clickThumbHandler:function(e){e.ctrlKey||2===e.button||(this.startDrag(e),this[this.bar.axis]=e.currentTarget[this.bar.offset]-(e[this.bar.client]-e.currentTarget.getBoundingClientRect()[this.bar.direction]))},clickTrackHandler:function(e){var n=100*(Math.abs(e.target.getBoundingClientRect()[this.bar.direction]-e[this.bar.client])-this.$refs.thumb[this.bar.offset]/2)/this.$el[this.bar.offset];this.wrap[this.bar.scroll]=n*this.wrap[this.bar.scrollSize]/100},startDrag:function(e){e.stopImmediatePropagation(),this.cursorDown=!0,Object(fe.on)(document,"mousemove",this.mouseMoveDocumentHandler),Object(fe.on)(document,"mouseup",this.mouseUpDocumentHandler),document.onselectstart=function(){return!1}},mouseMoveDocumentHandler:function(e){if(!1!==this.cursorDown){var n=this[this.bar.axis];if(n){var t=100*(-1*(this.$el.getBoundingClientRect()[this.bar.direction]-e[this.bar.client])-(this.$refs.thumb[this.bar.offset]-n))/this.$el[this.bar.offset];this.wrap[this.bar.scroll]=t*this.wrap[this.bar.scrollSize]/100}}},mouseUpDocumentHandler:function(e){this.cursorDown=!1,this[this.bar.axis]=0,Object(fe.off)(document,"mousemove",this.mouseMoveDocumentHandler),document.onselectstart=null}},destroyed:function(){Object(fe.off)(document,"mouseup",this.mouseUpDocumentHandler)}},il={name:"ElScrollbar",components:{Bar:tl},props:{native:Boolean,wrapStyle:{},wrapClass:{},viewClass:{},viewStyle:{},noresize:Boolean,tag:{type:String,default:"div"}},data:function(){return{sizeWidth:"0",sizeHeight:"0",moveX:0,moveY:0}},computed:{wrap:function(){return this.$refs.wrap}},render:function(e){var n=Mt()(),t=this.wrapStyle;if(n){var i="-"+n+"px",r="margin-bottom: "+i+"; margin-right: "+i+";";Array.isArray(this.wrapStyle)?(t=Object(m.toObject)(this.wrapStyle)).marginRight=t.marginBottom=i:"string"==typeof this.wrapStyle?t+=r:t=r}var o=e(this.tag,{class:["el-scrollbar__view",this.viewClass],style:this.viewStyle,ref:"resize"},this.$slots.default),a=e("div",{ref:"wrap",style:t,on:{scroll:this.handleScroll},class:[this.wrapClass,"el-scrollbar__wrap",n?"":"el-scrollbar__wrap--hidden-default"]},[[o]]),s=void 0;return s=this.native?[e("div",{ref:"wrap",class:[this.wrapClass,"el-scrollbar__wrap"],style:t},[[o]])]:[a,e(tl,{attrs:{move:this.moveX,size:this.sizeWidth}}),e(tl,{attrs:{vertical:!0,move:this.moveY,size:this.sizeHeight}})],e("div",{class:"el-scrollbar"},s)},methods:{handleScroll:function(){var e=this.wrap;this.moveY=100*e.scrollTop/e.clientHeight,this.moveX=100*e.scrollLeft/e.clientWidth},update:function(){var e,n,t=this.wrap;t&&(e=100*t.clientHeight/t.scrollHeight,n=100*t.clientWidth/t.scrollWidth,this.sizeHeight=e<100?e+"%":"",this.sizeWidth=n<100?n+"%":"")}},mounted:function(){this.native||(this.$nextTick(this.update),!this.noresize&&Object(Fn.addResizeListener)(this.$refs.resize,this.update))},beforeDestroy:function(){this.native||!this.noresize&&Object(Fn.removeResizeListener)(this.$refs.resize,this.update)},install:function(e){e.component(il.name,il)}},rl=il,ol=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{directives:[{name:"show",rawName:"v-show",value:e.ready,expression:"ready"}],staticClass:"el-carousel__item",class:{"is-active":e.active,"el-carousel__item--card":"card"===e.$parent.type,"is-in-stage":e.inStage,"is-hover":e.hover,"is-animating":e.animating},style:e.itemStyle,on:{click:e.handleItemClick}},["card"===e.$parent.type?t("div",{directives:[{name:"show",rawName:"v-show",value:!e.active,expression:"!active"}],staticClass:"el-carousel__mask"}):e._e(),e._t("default")],2)};ol._withStripped=!0;var al=r({name:"ElCarouselItem",props:{name:String,label:{type:[String,Number],default:""}},data:function(){return{hover:!1,translate:0,scale:1,active:!1,ready:!1,inStage:!1,animating:!1}},methods:{processIndex:function(e,n,t){return 0===n&&e===t-1?-1:n===t-1&&0===e?t:e<n-1&&n-e>=t/2?t+1:e>n+1&&e-n>=t/2?-2:e},calcCardTranslate:function(e,n){var t=this.$parent.$el.offsetWidth;return this.inStage?t*(1.17*(e-n)+1)/4:e<n?-1.83*t/4:3.83*t/4},calcTranslate:function(e,n,t){return this.$parent.$el[t?"offsetHeight":"offsetWidth"]*(e-n)},translateItem:function(e,n,t){var i=this.$parent.type,r=this.parentDirection,o=this.$parent.items.length;if("card"!==i&&void 0!==t&&(this.animating=e===n||e===t),e!==n&&o>2&&this.$parent.loop&&(e=this.processIndex(e,n,o)),"card"===i)"vertical"===r&&console.warn("[Element Warn][Carousel]vertical direction is not supported in card mode"),this.inStage=Math.round(Math.abs(e-n))<=1,this.active=e===n,this.translate=this.calcCardTranslate(e,n),this.scale=this.active?1:.83;else{this.active=e===n;var a="vertical"===r;this.translate=this.calcTranslate(e,n,a)}this.ready=!0},handleItemClick:function(){var e=this.$parent;if(e&&"card"===e.type){var n=e.items.indexOf(this);e.setActiveItem(n)}}},computed:{parentDirection:function(){return this.$parent.direction},itemStyle:function(){var e={transform:("vertical"===this.parentDirection?"translateY":"translateX")+"("+this.translate+"px) scale("+this.scale+")"};return Object(m.autoprefixer)(e)}},created:function(){this.$parent&&this.$parent.updateItems()},destroyed:function(){this.$parent&&this.$parent.updateItems()}},ol,[],!1,null,null,null);al.options.__file="packages/carousel/src/item.vue";var sl=al.exports;sl.install=function(e){e.component(sl.name,sl)};var ll=sl,cl=function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"el-collapse",attrs:{role:"tablist","aria-multiselectable":"true"}},[this._t("default")],2)};cl._withStripped=!0;var ul=r({name:"ElCollapse",componentName:"ElCollapse",props:{accordion:Boolean,value:{type:[Array,String,Number],default:function(){return[]}}},data:function(){return{activeNames:[].concat(this.value)}},provide:function(){return{collapse:this}},watch:{value:function(e){this.activeNames=[].concat(e)}},methods:{setActiveNames:function(e){e=[].concat(e);var n=this.accordion?e[0]:e;this.activeNames=e,this.$emit("input",n),this.$emit("change",n)},handleItemClick:function(e){if(this.accordion)this.setActiveNames(!this.activeNames[0]&&0!==this.activeNames[0]||this.activeNames[0]!==e.name?e.name:"");else{var n=this.activeNames.slice(0),t=n.indexOf(e.name);t>-1?n.splice(t,1):n.push(e.name),this.setActiveNames(n)}}},created:function(){this.$on("item-click",this.handleItemClick)}},cl,[],!1,null,null,null);ul.options.__file="packages/collapse/src/collapse.vue";var dl=ul.exports;dl.install=function(e){e.component(dl.name,dl)};var hl=dl,pl=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"el-collapse-item",class:{"is-active":e.isActive,"is-disabled":e.disabled}},[t("div",{attrs:{role:"tab","aria-expanded":e.isActive,"aria-controls":"el-collapse-content-"+e.id,"aria-describedby":"el-collapse-content-"+e.id}},[t("div",{staticClass:"el-collapse-item__header",class:{focusing:e.focusing,"is-active":e.isActive},attrs:{role:"button",id:"el-collapse-head-"+e.id,tabindex:e.disabled?void 0:0},on:{click:e.handleHeaderClick,keyup:function(n){return!("button"in n)&&e._k(n.keyCode,"space",32,n.key,[" ","Spacebar"])&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:(n.stopPropagation(),e.handleEnterClick(n))},focus:e.handleFocus,blur:function(n){e.focusing=!1}}},[e._t("title",[e._v(e._s(e.title))]),t("i",{staticClass:"el-collapse-item__arrow el-icon-arrow-right",class:{"is-active":e.isActive}})],2)]),t("el-collapse-transition",[t("div",{directives:[{name:"show",rawName:"v-show",value:e.isActive,expression:"isActive"}],staticClass:"el-collapse-item__wrap",attrs:{role:"tabpanel","aria-hidden":!e.isActive,"aria-labelledby":"el-collapse-head-"+e.id,id:"el-collapse-content-"+e.id}},[t("div",{staticClass:"el-collapse-item__content"},[e._t("default")],2)])])],1)};pl._withStripped=!0;var fl=r({name:"ElCollapseItem",componentName:"ElCollapseItem",mixins:[k.a],components:{ElCollapseTransition:ye.a},data:function(){return{contentWrapStyle:{height:"auto",display:"block"},contentHeight:0,focusing:!1,isClick:!1,id:Object(m.generateId)()}},inject:["collapse"],props:{title:String,name:{type:[String,Number],default:function(){return this._uid}},disabled:Boolean},computed:{isActive:function(){return this.collapse.activeNames.indexOf(this.name)>-1}},methods:{handleFocus:function(){var e=this;setTimeout((function(){e.isClick?e.isClick=!1:e.focusing=!0}),50)},handleHeaderClick:function(){this.disabled||(this.dispatch("ElCollapse","item-click",this),this.focusing=!1,this.isClick=!0)},handleEnterClick:function(){this.dispatch("ElCollapse","item-click",this)}}},pl,[],!1,null,null,null);fl.options.__file="packages/collapse/src/collapse-item.vue";var ml=fl.exports;ml.install=function(e){e.component(ml.name,ml)};var gl=ml,vl=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:function(){return e.toggleDropDownVisible(!1)},expression:"() => toggleDropDownVisible(false)"}],ref:"reference",class:["el-cascader",e.realSize&&"el-cascader--"+e.realSize,{"is-disabled":e.isDisabled}],on:{mouseenter:function(n){e.inputHover=!0},mouseleave:function(n){e.inputHover=!1},click:function(){return e.toggleDropDownVisible(!e.readonly||void 0)},keydown:e.handleKeyDown}},[t("el-input",{ref:"input",class:{"is-focus":e.dropDownVisible},attrs:{size:e.realSize,placeholder:e.placeholder,readonly:e.readonly,disabled:e.isDisabled,"validate-event":!1},on:{focus:e.handleFocus,blur:e.handleBlur,input:e.handleInput},model:{value:e.multiple?e.presentText:e.inputValue,callback:function(n){e.multiple?e.presentText:e.inputValue=n},expression:"multiple ? presentText : inputValue"}},[t("template",{slot:"suffix"},[e.clearBtnVisible?t("i",{key:"clear",staticClass:"el-input__icon el-icon-circle-close",on:{click:function(n){return n.stopPropagation(),e.handleClear(n)}}}):t("i",{key:"arrow-down",class:["el-input__icon","el-icon-arrow-down",e.dropDownVisible&&"is-reverse"],on:{click:function(n){n.stopPropagation(),e.toggleDropDownVisible()}}})])],2),e.multiple?t("div",{staticClass:"el-cascader__tags"},[e._l(e.presentTags,(function(n,i){return t("el-tag",{key:n.key,attrs:{type:"info",size:e.tagSize,hit:n.hitState,closable:n.closable,"disable-transitions":""},on:{close:function(n){e.deleteTag(i)}}},[t("span",[e._v(e._s(n.text))])])})),e.filterable&&!e.isDisabled?t("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.inputValue,expression:"inputValue",modifiers:{trim:!0}}],staticClass:"el-cascader__search-input",attrs:{type:"text",placeholder:e.presentTags.length?"":e.placeholder},domProps:{value:e.inputValue},on:{input:[function(n){n.target.composing||(e.inputValue=n.target.value.trim())},function(n){return e.handleInput(e.inputValue,n)}],click:function(n){n.stopPropagation(),e.toggleDropDownVisible(!0)},keydown:function(n){return!("button"in n)&&e._k(n.keyCode,"delete",[8,46],n.key,["Backspace","Delete","Del"])?null:e.handleDelete(n)},blur:function(n){e.$forceUpdate()}}}):e._e()],2):e._e(),t("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":e.handleDropdownLeave}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.dropDownVisible,expression:"dropDownVisible"}],ref:"popper",class:["el-popper","el-cascader__dropdown",e.popperClass]},[t("el-cascader-panel",{directives:[{name:"show",rawName:"v-show",value:!e.filtering,expression:"!filtering"}],ref:"panel",attrs:{options:e.options,props:e.config,border:!1,"render-label":e.$scopedSlots.default},on:{"expand-change":e.handleExpandChange,close:function(n){e.toggleDropDownVisible(!1)}},model:{value:e.checkedValue,callback:function(n){e.checkedValue=n},expression:"checkedValue"}}),e.filterable?t("el-scrollbar",{directives:[{name:"show",rawName:"v-show",value:e.filtering,expression:"filtering"}],ref:"suggestionPanel",staticClass:"el-cascader__suggestion-panel",attrs:{tag:"ul","view-class":"el-cascader__suggestion-list"},nativeOn:{keydown:function(n){return e.handleSuggestionKeyDown(n)}}},[e.suggestions.length?e._l(e.suggestions,(function(n,i){return t("li",{key:n.uid,class:["el-cascader__suggestion-item",n.checked&&"is-checked"],attrs:{tabindex:-1},on:{click:function(n){e.handleSuggestionClick(i)}}},[t("span",[e._v(e._s(n.text))]),n.checked?t("i",{staticClass:"el-icon-check"}):e._e()])})):e._t("empty",[t("li",{staticClass:"el-cascader__empty-text"},[e._v(e._s(e.t("el.cascader.noMatch")))])])],2):e._e()],1)])],1)};vl._withStripped=!0;var bl=t(42),yl=t.n(bl),wl=t(34),xl=t.n(wl),_l=xl.a.keys,Sl={expandTrigger:{newProp:"expandTrigger",type:String},changeOnSelect:{newProp:"checkStrictly",type:Boolean},hoverThreshold:{newProp:"hoverThreshold",type:Number}},kl={props:{placement:{type:String,default:"bottom-start"},appendToBody:L.a.props.appendToBody,visibleArrow:{type:Boolean,default:!0},arrowOffset:L.a.props.arrowOffset,offset:L.a.props.offset,boundariesPadding:L.a.props.boundariesPadding,popperOptions:L.a.props.popperOptions},methods:L.a.methods,data:L.a.data,beforeDestroy:L.a.beforeDestroy},Cl={medium:36,small:32,mini:28},El=r({name:"ElCascader",directives:{Clickoutside:I.a},mixins:[kl,k.a,f.a,_.a],inject:{elForm:{default:""},elFormItem:{default:""}},components:{ElInput:h.a,ElTag:$n.a,ElScrollbar:$.a,ElCascaderPanel:yl.a},props:{value:{},options:Array,props:Object,size:String,placeholder:{type:String,default:function(){return Object(Mr.t)("el.cascader.placeholder")}},disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:Function,separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,debounce:{type:Number,default:300},beforeFilter:{type:Function,default:function(){return function(){}}},popperClass:String},data:function(){return{dropDownVisible:!1,checkedValue:this.value||null,inputHover:!1,inputValue:null,presentText:null,presentTags:[],checkedNodes:[],filtering:!1,suggestions:[],inputInitialHeight:0,pressDeleteCount:0}},computed:{realSize:function(){var e=(this.elFormItem||{}).elFormItemSize;return this.size||e||(this.$ELEMENT||{}).size},tagSize:function(){return["small","mini"].indexOf(this.realSize)>-1?"mini":"small"},isDisabled:function(){return this.disabled||(this.elForm||{}).disabled},config:function(){var e=this.props||{},n=this.$attrs;return Object.keys(Sl).forEach((function(t){var i=Sl[t],r=i.newProp,o=i.type,a=n[t]||n[Object(m.kebabCase)(t)];Object(qe.isDef)(t)&&!Object(qe.isDef)(e[r])&&(o===Boolean&&""===a&&(a=!0),e[r]=a)})),e},multiple:function(){return this.config.multiple},leafOnly:function(){return!this.config.checkStrictly},readonly:function(){return!this.filterable||this.multiple},clearBtnVisible:function(){return!(!this.clearable||this.isDisabled||this.filtering||!this.inputHover)&&(this.multiple?!!this.checkedNodes.filter((function(e){return!e.isDisabled})).length:!!this.presentText)},panel:function(){return this.$refs.panel}},watch:{disabled:function(){this.computePresentContent()},value:function(e){Object(m.isEqual)(e,this.checkedValue)||(this.checkedValue=e,this.computePresentContent())},checkedValue:function(e){var n=this.value,t=this.dropDownVisible,i=this.config,r=i.checkStrictly,o=i.multiple;Object(m.isEqual)(e,n)&&!Object(Ns.isUndefined)(n)||(this.computePresentContent(),o||r||!t||this.toggleDropDownVisible(!1),this.$emit("input",e),this.$emit("change",e),this.dispatch("ElFormItem","el.form.change",[e]))},options:{handler:function(){this.$nextTick(this.computePresentContent)},deep:!0},presentText:function(e){this.inputValue=e},presentTags:function(e,n){this.multiple&&(e.length||n.length)&&this.$nextTick(this.updateStyle)},filtering:function(e){this.$nextTick(this.updatePopper)}},mounted:function(){var e=this,n=this.$refs.input;n&&n.$el&&(this.inputInitialHeight=n.$el.offsetHeight||Cl[this.realSize]||40),Object(m.isEmpty)(this.value)||this.computePresentContent(),this.filterHandler=A()(this.debounce,(function(){var n=e.inputValue;if(n){var t=e.beforeFilter(n);t&&t.then?t.then(e.getSuggestions):!1!==t?e.getSuggestions():e.filtering=!1}else e.filtering=!1})),Object(Fn.addResizeListener)(this.$el,this.updateStyle)},beforeDestroy:function(){Object(Fn.removeResizeListener)(this.$el,this.updateStyle)},methods:{getMigratingConfig:function(){return{props:{"expand-trigger":"expand-trigger is removed, use `props.expandTrigger` instead.","change-on-select":"change-on-select is removed, use `props.checkStrictly` instead.","hover-threshold":"hover-threshold is removed, use `props.hoverThreshold` instead"},events:{"active-item-change":"active-item-change is renamed to expand-change"}}},toggleDropDownVisible:function(e){var n=this;if(!this.isDisabled){var t=this.dropDownVisible,i=this.$refs.input;(e=Object(qe.isDef)(e)?e:!t)!==t&&(this.dropDownVisible=e,e&&this.$nextTick((function(){n.updatePopper(),n.panel.scrollIntoView()})),i.$refs.input.setAttribute("aria-expanded",e),this.$emit("visible-change",e))}},handleDropdownLeave:function(){this.filtering=!1,this.inputValue=this.presentText},handleKeyDown:function(e){switch(e.keyCode){case _l.enter:this.toggleDropDownVisible();break;case _l.down:this.toggleDropDownVisible(!0),this.focusFirstNode(),e.preventDefault();break;case _l.esc:case _l.tab:this.toggleDropDownVisible(!1)}},handleFocus:function(e){this.$emit("focus",e)},handleBlur:function(e){this.$emit("blur",e)},handleInput:function(e,n){!this.dropDownVisible&&this.toggleDropDownVisible(!0),n&&n.isComposing||(e?this.filterHandler():this.filtering=!1)},handleClear:function(){this.presentText="",this.panel.clearCheckedNodes()},handleExpandChange:function(e){this.$nextTick(this.updatePopper.bind(this)),this.$emit("expand-change",e),this.$emit("active-item-change",e)},focusFirstNode:function(){var e=this;this.$nextTick((function(){var n=e.filtering,t=e.$refs,i=t.popper,r=t.suggestionPanel,o=null;n&&r?o=r.$el.querySelector(".el-cascader__suggestion-item"):o=i.querySelector(".el-cascader-menu").querySelector('.el-cascader-node[tabindex="-1"]');o&&(o.focus(),!n&&o.click())}))},computePresentContent:function(){var e=this;this.$nextTick((function(){e.config.multiple?(e.computePresentTags(),e.presentText=e.presentTags.length?" ":null):e.computePresentText()}))},computePresentText:function(){var e=this.checkedValue,n=this.config;if(!Object(m.isEmpty)(e)){var t=this.panel.getNodeByValue(e);if(t&&(n.checkStrictly||t.isLeaf))return void(this.presentText=t.getText(this.showAllLevels,this.separator))}this.presentText=null},computePresentTags:function(){var e=this.isDisabled,n=this.leafOnly,t=this.showAllLevels,i=this.separator,r=this.collapseTags,o=this.getCheckedNodes(n),a=[],s=function(n){return{node:n,key:n.uid,text:n.getText(t,i),hitState:!1,closable:!e&&!n.isDisabled}};if(o.length){var l=o[0],c=o.slice(1),u=c.length;a.push(s(l)),u&&(r?a.push({key:-1,text:"+ "+u,closable:!1}):c.forEach((function(e){return a.push(s(e))})))}this.checkedNodes=o,this.presentTags=a},getSuggestions:function(){var e=this,n=this.filterMethod;Object(Ns.isFunction)(n)||(n=function(e,n){return e.text.includes(n)});var t=this.panel.getFlattedNodes(this.leafOnly).filter((function(t){return!t.isDisabled&&(t.text=t.getText(e.showAllLevels,e.separator)||"",n(t,e.inputValue))}));this.multiple?this.presentTags.forEach((function(e){e.hitState=!1})):t.forEach((function(n){n.checked=Object(m.isEqual)(e.checkedValue,n.getValueByOption())})),this.filtering=!0,this.suggestions=t,this.$nextTick(this.updatePopper)},handleSuggestionKeyDown:function(e){var n=e.keyCode,t=e.target;switch(n){case _l.enter:t.click();break;case _l.up:var i=t.previousElementSibling;i&&i.focus();break;case _l.down:var r=t.nextElementSibling;r&&r.focus();break;case _l.esc:case _l.tab:this.toggleDropDownVisible(!1)}},handleDelete:function(){var e=this.inputValue,n=this.pressDeleteCount,t=this.presentTags,i=t.length-1,r=t[i];this.pressDeleteCount=e?0:n+1,r&&this.pressDeleteCount&&(r.hitState?this.deleteTag(i):r.hitState=!0)},handleSuggestionClick:function(e){var n=this.multiple,t=this.suggestions[e];if(n){var i=t.checked;t.doCheck(!i),this.panel.calculateMultiCheckedValue()}else this.checkedValue=t.getValueByOption(),this.toggleDropDownVisible(!1)},deleteTag:function(e){var n=this.checkedValue,t=n[e];this.checkedValue=n.filter((function(n,t){return t!==e})),this.$emit("remove-tag",t)},updateStyle:function(){var e=this.$el,n=this.inputInitialHeight;if(!this.$isServer&&e){var t=this.$refs.suggestionPanel,i=e.querySelector(".el-input__inner");if(i){var r=e.querySelector(".el-cascader__tags"),o=null;if(t&&(o=t.$el))o.querySelector(".el-cascader__suggestion-list").style.minWidth=i.offsetWidth+"px";if(r){var a=r.offsetHeight,s=Math.max(a+6,n)+"px";i.style.height=s,this.updatePopper()}}}},getCheckedNodes:function(e){return this.panel.getCheckedNodes(e)}}},vl,[],!1,null,null,null);El.options.__file="packages/cascader/src/cascader.vue";var Tl=El.exports;Tl.install=function(e){e.component(Tl.name,Tl)};var Pl=Tl,Ol=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.hide,expression:"hide"}],class:["el-color-picker",e.colorDisabled?"is-disabled":"",e.colorSize?"el-color-picker--"+e.colorSize:""]},[e.colorDisabled?t("div",{staticClass:"el-color-picker__mask"}):e._e(),t("div",{staticClass:"el-color-picker__trigger",on:{click:e.handleTrigger}},[t("span",{staticClass:"el-color-picker__color",class:{"is-alpha":e.showAlpha}},[t("span",{staticClass:"el-color-picker__color-inner",style:{backgroundColor:e.displayedColor}}),e.value||e.showPanelColor?e._e():t("span",{staticClass:"el-color-picker__empty el-icon-close"})]),t("span",{directives:[{name:"show",rawName:"v-show",value:e.value||e.showPanelColor,expression:"value || showPanelColor"}],staticClass:"el-color-picker__icon el-icon-arrow-down"})]),t("picker-dropdown",{ref:"dropdown",class:["el-color-picker__panel",e.popperClass||""],attrs:{color:e.color,"show-alpha":e.showAlpha,predefine:e.predefine},on:{pick:e.confirmValue,clear:e.clearValue},model:{value:e.showPicker,callback:function(n){e.showPicker=n},expression:"showPicker"}})],1)};Ol._withStripped=!0;var Al="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var jl=function(e,n,t){return[e,n*t/((e=(2-n)*t)<1?e:2-e)||0,e/2]},Il=function(e,n){var t;"string"==typeof(t=e)&&-1!==t.indexOf(".")&&1===parseFloat(t)&&(e="100%");var i=function(e){return"string"==typeof e&&-1!==e.indexOf("%")}(e);return e=Math.min(n,Math.max(0,parseFloat(e))),i&&(e=parseInt(e*n,10)/100),Math.abs(e-n)<1e-6?1:e%n/parseFloat(n)},Dl={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},Ml={A:10,B:11,C:12,D:13,E:14,F:15},Ll=function(e){return 2===e.length?16*(Ml[e[0].toUpperCase()]||+e[0])+(Ml[e[1].toUpperCase()]||+e[1]):Ml[e[1].toUpperCase()]||+e[1]},Nl=function(e,n,t){e=Il(e,255),n=Il(n,255),t=Il(t,255);var i,r=Math.max(e,n,t),o=Math.min(e,n,t),a=void 0,s=r,l=r-o;if(i=0===r?0:l/r,r===o)a=0;else{switch(r){case e:a=(n-t)/l+(n<t?6:0);break;case n:a=(t-e)/l+2;break;case t:a=(e-n)/l+4}a/=6}return{h:360*a,s:100*i,v:100*s}},$l=function(e,n,t){e=6*Il(e,360),n=Il(n,100),t=Il(t,100);var i=Math.floor(e),r=e-i,o=t*(1-n),a=t*(1-r*n),s=t*(1-(1-r)*n),l=i%6,c=[t,a,o,o,s,t][l],u=[s,t,t,a,o,o][l],d=[o,o,s,t,t,a][l];return{r:Math.round(255*c),g:Math.round(255*u),b:Math.round(255*d)}},Fl=function(){function e(n){for(var t in function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="",n=n||{})n.hasOwnProperty(t)&&(this[t]=n[t]);this.doOnChange()}return e.prototype.set=function(e,n){if(1!==arguments.length||"object"!==(void 0===e?"undefined":Al(e)))this["_"+e]=n,this.doOnChange();else for(var t in e)e.hasOwnProperty(t)&&this.set(t,e[t])},e.prototype.get=function(e){return this["_"+e]},e.prototype.toRgb=function(){return $l(this._hue,this._saturation,this._value)},e.prototype.fromString=function(e){var n=this;if(!e)return this._hue=0,this._saturation=100,this._value=100,void this.doOnChange();var t=function(e,t,i){n._hue=Math.max(0,Math.min(360,e)),n._saturation=Math.max(0,Math.min(100,t)),n._value=Math.max(0,Math.min(100,i)),n.doOnChange()};if(-1!==e.indexOf("hsl")){var i=e.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter((function(e){return""!==e})).map((function(e,n){return n>2?parseFloat(e):parseInt(e,10)}));if(4===i.length?this._alpha=Math.floor(100*parseFloat(i[3])):3===i.length&&(this._alpha=100),i.length>=3){var r=function(e,n,t){t/=100;var i=n/=100,r=Math.max(t,.01);return n*=(t*=2)<=1?t:2-t,i*=r<=1?r:2-r,{h:e,s:100*(0===t?2*i/(r+i):2*n/(t+n)),v:100*((t+n)/2)}}(i[0],i[1],i[2]);t(r.h,r.s,r.v)}}else if(-1!==e.indexOf("hsv")){var o=e.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter((function(e){return""!==e})).map((function(e,n){return n>2?parseFloat(e):parseInt(e,10)}));4===o.length?this._alpha=Math.floor(100*parseFloat(o[3])):3===o.length&&(this._alpha=100),o.length>=3&&t(o[0],o[1],o[2])}else if(-1!==e.indexOf("rgb")){var a=e.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter((function(e){return""!==e})).map((function(e,n){return n>2?parseFloat(e):parseInt(e,10)}));if(4===a.length?this._alpha=Math.floor(100*parseFloat(a[3])):3===a.length&&(this._alpha=100),a.length>=3){var s=Nl(a[0],a[1],a[2]);t(s.h,s.s,s.v)}}else if(-1!==e.indexOf("#")){var l=e.replace("#","").trim();if(!/^(?:[0-9a-fA-F]{3}){1,2}|[0-9a-fA-F]{8}$/.test(l))return;var c=void 0,u=void 0,d=void 0;3===l.length?(c=Ll(l[0]+l[0]),u=Ll(l[1]+l[1]),d=Ll(l[2]+l[2])):6!==l.length&&8!==l.length||(c=Ll(l.substring(0,2)),u=Ll(l.substring(2,4)),d=Ll(l.substring(4,6))),8===l.length?this._alpha=Math.floor(Ll(l.substring(6))/255*100):3!==l.length&&6!==l.length||(this._alpha=100);var h=Nl(c,u,d);t(h.h,h.s,h.v)}},e.prototype.compare=function(e){return Math.abs(e._hue-this._hue)<2&&Math.abs(e._saturation-this._saturation)<1&&Math.abs(e._value-this._value)<1&&Math.abs(e._alpha-this._alpha)<1},e.prototype.doOnChange=function(){var e=this._hue,n=this._saturation,t=this._value,i=this._alpha,r=this.format;if(this.enableAlpha)switch(r){case"hsl":var o=jl(e,n/100,t/100);this.value="hsla("+e+", "+Math.round(100*o[1])+"%, "+Math.round(100*o[2])+"%, "+i/100+")";break;case"hsv":this.value="hsva("+e+", "+Math.round(n)+"%, "+Math.round(t)+"%, "+i/100+")";break;default:var a=$l(e,n,t),s=a.r,l=a.g,c=a.b;this.value="rgba("+s+", "+l+", "+c+", "+i/100+")"}else switch(r){case"hsl":var u=jl(e,n/100,t/100);this.value="hsl("+e+", "+Math.round(100*u[1])+"%, "+Math.round(100*u[2])+"%)";break;case"hsv":this.value="hsv("+e+", "+Math.round(n)+"%, "+Math.round(t)+"%)";break;case"rgb":var d=$l(e,n,t),h=d.r,p=d.g,f=d.b;this.value="rgb("+h+", "+p+", "+f+")";break;default:this.value=function(e){var n=e.r,t=e.g,i=e.b,r=function(e){e=Math.min(Math.round(e),255);var n=Math.floor(e/16),t=e%16;return""+(Dl[n]||n)+(Dl[t]||t)};return isNaN(n)||isNaN(t)||isNaN(i)?"":"#"+r(n)+r(t)+r(i)}($l(e,n,t))}},e}(),Rl=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":e.doDestroy}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.showPopper,expression:"showPopper"}],staticClass:"el-color-dropdown"},[t("div",{staticClass:"el-color-dropdown__main-wrapper"},[t("hue-slider",{ref:"hue",staticStyle:{float:"right"},attrs:{color:e.color,vertical:""}}),t("sv-panel",{ref:"sl",attrs:{color:e.color}})],1),e.showAlpha?t("alpha-slider",{ref:"alpha",attrs:{color:e.color}}):e._e(),e.predefine?t("predefine",{attrs:{color:e.color,colors:e.predefine}}):e._e(),t("div",{staticClass:"el-color-dropdown__btns"},[t("span",{staticClass:"el-color-dropdown__value"},[t("el-input",{attrs:{"validate-event":!1,size:"mini"},on:{blur:e.handleConfirm},nativeOn:{keyup:function(n){return!("button"in n)&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.handleConfirm(n)}},model:{value:e.customInput,callback:function(n){e.customInput=n},expression:"customInput"}})],1),t("el-button",{staticClass:"el-color-dropdown__link-btn",attrs:{size:"mini",type:"text"},on:{click:function(n){e.$emit("clear")}}},[e._v("\n        "+e._s(e.t("el.colorpicker.clear"))+"\n      ")]),t("el-button",{staticClass:"el-color-dropdown__btn",attrs:{plain:"",size:"mini"},on:{click:e.confirmValue}},[e._v("\n        "+e._s(e.t("el.colorpicker.confirm"))+"\n      ")])],1)],1)])};Rl._withStripped=!0;var Bl=function(){var e=this.$createElement,n=this._self._c||e;return n("div",{staticClass:"el-color-svpanel",style:{backgroundColor:this.background}},[n("div",{staticClass:"el-color-svpanel__white"}),n("div",{staticClass:"el-color-svpanel__black"}),n("div",{staticClass:"el-color-svpanel__cursor",style:{top:this.cursorTop+"px",left:this.cursorLeft+"px"}},[n("div")])])};Bl._withStripped=!0;var Vl=!1,zl=function(e,n){if(!ht.a.prototype.$isServer){var t=function(e){n.drag&&n.drag(e)},i=function e(i){document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",e),document.onselectstart=null,document.ondragstart=null,Vl=!1,n.end&&n.end(i)};e.addEventListener("mousedown",(function(e){Vl||(document.onselectstart=function(){return!1},document.ondragstart=function(){return!1},document.addEventListener("mousemove",t),document.addEventListener("mouseup",i),Vl=!0,n.start&&n.start(e))}))}},ql=r({name:"el-sl-panel",props:{color:{required:!0}},computed:{colorValue:function(){return{hue:this.color.get("hue"),value:this.color.get("value")}}},watch:{colorValue:function(){this.update()}},methods:{update:function(){var e=this.color.get("saturation"),n=this.color.get("value"),t=this.$el,i=t.clientWidth,r=t.clientHeight;this.cursorLeft=e*i/100,this.cursorTop=(100-n)*r/100,this.background="hsl("+this.color.get("hue")+", 100%, 50%)"},handleDrag:function(e){var n=this.$el.getBoundingClientRect(),t=e.clientX-n.left,i=e.clientY-n.top;t=Math.max(0,t),t=Math.min(t,n.width),i=Math.max(0,i),i=Math.min(i,n.height),this.cursorLeft=t,this.cursorTop=i,this.color.set({saturation:t/n.width*100,value:100-i/n.height*100})}},mounted:function(){var e=this;zl(this.$el,{drag:function(n){e.handleDrag(n)},end:function(n){e.handleDrag(n)}}),this.update()},data:function(){return{cursorTop:0,cursorLeft:0,background:"hsl(0, 100%, 50%)"}}},Bl,[],!1,null,null,null);ql.options.__file="packages/color-picker/src/components/sv-panel.vue";var Hl=ql.exports,Wl=function(){var e=this.$createElement,n=this._self._c||e;return n("div",{staticClass:"el-color-hue-slider",class:{"is-vertical":this.vertical}},[n("div",{ref:"bar",staticClass:"el-color-hue-slider__bar",on:{click:this.handleClick}}),n("div",{ref:"thumb",staticClass:"el-color-hue-slider__thumb",style:{left:this.thumbLeft+"px",top:this.thumbTop+"px"}})])};Wl._withStripped=!0;var Ul=r({name:"el-color-hue-slider",props:{color:{required:!0},vertical:Boolean},data:function(){return{thumbLeft:0,thumbTop:0}},computed:{hueValue:function(){return this.color.get("hue")}},watch:{hueValue:function(){this.update()}},methods:{handleClick:function(e){var n=this.$refs.thumb;e.target!==n&&this.handleDrag(e)},handleDrag:function(e){var n=this.$el.getBoundingClientRect(),t=this.$refs.thumb,i=void 0;if(this.vertical){var r=e.clientY-n.top;r=Math.min(r,n.height-t.offsetHeight/2),r=Math.max(t.offsetHeight/2,r),i=Math.round((r-t.offsetHeight/2)/(n.height-t.offsetHeight)*360)}else{var o=e.clientX-n.left;o=Math.min(o,n.width-t.offsetWidth/2),o=Math.max(t.offsetWidth/2,o),i=Math.round((o-t.offsetWidth/2)/(n.width-t.offsetWidth)*360)}this.color.set("hue",i)},getThumbLeft:function(){if(this.vertical)return 0;var e=this.$el,n=this.color.get("hue");if(!e)return 0;var t=this.$refs.thumb;return Math.round(n*(e.offsetWidth-t.offsetWidth/2)/360)},getThumbTop:function(){if(!this.vertical)return 0;var e=this.$el,n=this.color.get("hue");if(!e)return 0;var t=this.$refs.thumb;return Math.round(n*(e.offsetHeight-t.offsetHeight/2)/360)},update:function(){this.thumbLeft=this.getThumbLeft(),this.thumbTop=this.getThumbTop()}},mounted:function(){var e=this,n=this.$refs,t=n.bar,i=n.thumb,r={drag:function(n){e.handleDrag(n)},end:function(n){e.handleDrag(n)}};zl(t,r),zl(i,r),this.update()}},Wl,[],!1,null,null,null);Ul.options.__file="packages/color-picker/src/components/hue-slider.vue";var Jl=Ul.exports,Yl=function(){var e=this.$createElement,n=this._self._c||e;return n("div",{staticClass:"el-color-alpha-slider",class:{"is-vertical":this.vertical}},[n("div",{ref:"bar",staticClass:"el-color-alpha-slider__bar",style:{background:this.background},on:{click:this.handleClick}}),n("div",{ref:"thumb",staticClass:"el-color-alpha-slider__thumb",style:{left:this.thumbLeft+"px",top:this.thumbTop+"px"}})])};Yl._withStripped=!0;var Gl=r({name:"el-color-alpha-slider",props:{color:{required:!0},vertical:Boolean},watch:{"color._alpha":function(){this.update()},"color.value":function(){this.update()}},methods:{handleClick:function(e){var n=this.$refs.thumb;e.target!==n&&this.handleDrag(e)},handleDrag:function(e){var n=this.$el.getBoundingClientRect(),t=this.$refs.thumb;if(this.vertical){var i=e.clientY-n.top;i=Math.max(t.offsetHeight/2,i),i=Math.min(i,n.height-t.offsetHeight/2),this.color.set("alpha",Math.round((i-t.offsetHeight/2)/(n.height-t.offsetHeight)*100))}else{var r=e.clientX-n.left;r=Math.max(t.offsetWidth/2,r),r=Math.min(r,n.width-t.offsetWidth/2),this.color.set("alpha",Math.round((r-t.offsetWidth/2)/(n.width-t.offsetWidth)*100))}},getThumbLeft:function(){if(this.vertical)return 0;var e=this.$el,n=this.color._alpha;if(!e)return 0;var t=this.$refs.thumb;return Math.round(n*(e.offsetWidth-t.offsetWidth/2)/100)},getThumbTop:function(){if(!this.vertical)return 0;var e=this.$el,n=this.color._alpha;if(!e)return 0;var t=this.$refs.thumb;return Math.round(n*(e.offsetHeight-t.offsetHeight/2)/100)},getBackground:function(){if(this.color&&this.color.value){var e=this.color.toRgb(),n=e.r,t=e.g,i=e.b;return"linear-gradient(to right, rgba("+n+", "+t+", "+i+", 0) 0%, rgba("+n+", "+t+", "+i+", 1) 100%)"}return null},update:function(){this.thumbLeft=this.getThumbLeft(),this.thumbTop=this.getThumbTop(),this.background=this.getBackground()}},data:function(){return{thumbLeft:0,thumbTop:0,background:null}},mounted:function(){var e=this,n=this.$refs,t=n.bar,i=n.thumb,r={drag:function(n){e.handleDrag(n)},end:function(n){e.handleDrag(n)}};zl(t,r),zl(i,r),this.update()}},Yl,[],!1,null,null,null);Gl.options.__file="packages/color-picker/src/components/alpha-slider.vue";var Kl=Gl.exports,Xl=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"el-color-predefine"},[t("div",{staticClass:"el-color-predefine__colors"},e._l(e.rgbaColors,(function(n,i){return t("div",{key:e.colors[i],staticClass:"el-color-predefine__color-selector",class:{selected:n.selected,"is-alpha":n._alpha<100},on:{click:function(n){e.handleSelect(i)}}},[t("div",{style:{"background-color":n.value}})])})),0)])};Xl._withStripped=!0;var Ql=r({props:{colors:{type:Array,required:!0},color:{required:!0}},data:function(){return{rgbaColors:this.parseColors(this.colors,this.color)}},methods:{handleSelect:function(e){this.color.fromString(this.colors[e])},parseColors:function(e,n){return e.map((function(e){var t=new Fl;return t.enableAlpha=!0,t.format="rgba",t.fromString(e),t.selected=t.value===n.value,t}))}},watch:{"$parent.currentColor":function(e){var n=new Fl;n.fromString(e),this.rgbaColors.forEach((function(e){e.selected=n.compare(e)}))},colors:function(e){this.rgbaColors=this.parseColors(e,this.color)},color:function(e){this.rgbaColors=this.parseColors(this.colors,e)}}},Xl,[],!1,null,null,null);Ql.options.__file="packages/color-picker/src/components/predefine.vue";var Zl=Ql.exports,ec=r({name:"el-color-picker-dropdown",mixins:[L.a,f.a],components:{SvPanel:Hl,HueSlider:Jl,AlphaSlider:Kl,ElInput:h.a,ElButton:U.a,Predefine:Zl},props:{color:{required:!0},showAlpha:Boolean,predefine:Array},data:function(){return{customInput:""}},computed:{currentColor:function(){var e=this.$parent;return e.value||e.showPanelColor?e.color.value:""}},methods:{confirmValue:function(){this.$emit("pick")},handleConfirm:function(){this.color.fromString(this.customInput)}},mounted:function(){this.$parent.popperElm=this.popperElm=this.$el,this.referenceElm=this.$parent.$el},watch:{showPopper:function(e){var n=this;!0===e&&this.$nextTick((function(){var e=n.$refs,t=e.sl,i=e.hue,r=e.alpha;t&&t.update(),i&&i.update(),r&&r.update()}))},currentColor:{immediate:!0,handler:function(e){this.customInput=e}}}},Rl,[],!1,null,null,null);ec.options.__file="packages/color-picker/src/components/picker-dropdown.vue";var nc=ec.exports,tc=r({name:"ElColorPicker",mixins:[k.a],props:{value:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:String,popperClass:String,predefine:Array},inject:{elForm:{default:""},elFormItem:{default:""}},directives:{Clickoutside:I.a},computed:{displayedColor:function(){return this.value||this.showPanelColor?this.displayedRgb(this.color,this.showAlpha):"transparent"},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},colorSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},colorDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},watch:{value:function(e){e?e&&e!==this.color.value&&this.color.fromString(e):this.showPanelColor=!1},color:{deep:!0,handler:function(){this.showPanelColor=!0}},displayedColor:function(e){if(this.showPicker){var n=new Fl({enableAlpha:this.showAlpha,format:this.colorFormat});n.fromString(this.value),e!==this.displayedRgb(n,this.showAlpha)&&this.$emit("active-change",e)}}},methods:{handleTrigger:function(){this.colorDisabled||(this.showPicker=!this.showPicker)},confirmValue:function(){var e=this.color.value;this.$emit("input",e),this.$emit("change",e),this.dispatch("ElFormItem","el.form.change",e),this.showPicker=!1},clearValue:function(){this.$emit("input",null),this.$emit("change",null),null!==this.value&&this.dispatch("ElFormItem","el.form.change",null),this.showPanelColor=!1,this.showPicker=!1,this.resetColor()},hide:function(){this.showPicker=!1,this.resetColor()},resetColor:function(){var e=this;this.$nextTick((function(n){e.value?e.color.fromString(e.value):e.showPanelColor=!1}))},displayedRgb:function(e,n){if(!(e instanceof Fl))throw Error("color should be instance of Color Class");var t=e.toRgb(),i=t.r,r=t.g,o=t.b;return n?"rgba("+i+", "+r+", "+o+", "+e.get("alpha")/100+")":"rgb("+i+", "+r+", "+o+")"}},mounted:function(){var e=this.value;e&&this.color.fromString(e),this.popperElm=this.$refs.dropdown.$el},data:function(){return{color:new Fl({enableAlpha:this.showAlpha,format:this.colorFormat}),showPicker:!1,showPanelColor:!1}},components:{PickerDropdown:nc}},Ol,[],!1,null,null,null);tc.options.__file="packages/color-picker/src/main.vue";var ic=tc.exports;ic.install=function(e){e.component(ic.name,ic)};var rc=ic,oc=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"el-transfer"},[t("transfer-panel",e._b({ref:"leftPanel",attrs:{data:e.sourceData,title:e.titles[0]||e.t("el.transfer.titles.0"),"default-checked":e.leftDefaultChecked,placeholder:e.filterPlaceholder||e.t("el.transfer.filterPlaceholder")},on:{"checked-change":e.onSourceCheckedChange}},"transfer-panel",e.$props,!1),[e._t("left-footer")],2),t("div",{staticClass:"el-transfer__buttons"},[t("el-button",{class:["el-transfer__button",e.hasButtonTexts?"is-with-texts":""],attrs:{type:"primary",disabled:0===e.rightChecked.length},nativeOn:{click:function(n){return e.addToLeft(n)}}},[t("i",{staticClass:"el-icon-arrow-left"}),void 0!==e.buttonTexts[0]?t("span",[e._v(e._s(e.buttonTexts[0]))]):e._e()]),t("el-button",{class:["el-transfer__button",e.hasButtonTexts?"is-with-texts":""],attrs:{type:"primary",disabled:0===e.leftChecked.length},nativeOn:{click:function(n){return e.addToRight(n)}}},[void 0!==e.buttonTexts[1]?t("span",[e._v(e._s(e.buttonTexts[1]))]):e._e(),t("i",{staticClass:"el-icon-arrow-right"})])],1),t("transfer-panel",e._b({ref:"rightPanel",attrs:{data:e.targetData,title:e.titles[1]||e.t("el.transfer.titles.1"),"default-checked":e.rightDefaultChecked,placeholder:e.filterPlaceholder||e.t("el.transfer.filterPlaceholder")},on:{"checked-change":e.onTargetCheckedChange}},"transfer-panel",e.$props,!1),[e._t("right-footer")],2)],1)};oc._withStripped=!0;var ac=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"el-transfer-panel"},[t("p",{staticClass:"el-transfer-panel__header"},[t("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleAllCheckedChange},model:{value:e.allChecked,callback:function(n){e.allChecked=n},expression:"allChecked"}},[e._v("\n      "+e._s(e.title)+"\n      "),t("span",[e._v(e._s(e.checkedSummary))])])],1),t("div",{class:["el-transfer-panel__body",e.hasFooter?"is-with-footer":""]},[e.filterable?t("el-input",{staticClass:"el-transfer-panel__filter",attrs:{size:"small",placeholder:e.placeholder},nativeOn:{mouseenter:function(n){e.inputHover=!0},mouseleave:function(n){e.inputHover=!1}},model:{value:e.query,callback:function(n){e.query=n},expression:"query"}},[t("i",{class:["el-input__icon","el-icon-"+e.inputIcon],attrs:{slot:"prefix"},on:{click:e.clearQuery},slot:"prefix"})]):e._e(),t("el-checkbox-group",{directives:[{name:"show",rawName:"v-show",value:!e.hasNoMatch&&e.data.length>0,expression:"!hasNoMatch && data.length > 0"}],staticClass:"el-transfer-panel__list",class:{"is-filterable":e.filterable},model:{value:e.checked,callback:function(n){e.checked=n},expression:"checked"}},e._l(e.filteredData,(function(n){return t("el-checkbox",{key:n[e.keyProp],staticClass:"el-transfer-panel__item",attrs:{label:n[e.keyProp],disabled:n[e.disabledProp]}},[t("option-content",{attrs:{option:n}})],1)})),1),t("p",{directives:[{name:"show",rawName:"v-show",value:e.hasNoMatch,expression:"hasNoMatch"}],staticClass:"el-transfer-panel__empty"},[e._v(e._s(e.t("el.transfer.noMatch")))]),t("p",{directives:[{name:"show",rawName:"v-show",value:0===e.data.length&&!e.hasNoMatch,expression:"data.length === 0 && !hasNoMatch"}],staticClass:"el-transfer-panel__empty"},[e._v(e._s(e.t("el.transfer.noData")))])],1),e.hasFooter?t("p",{staticClass:"el-transfer-panel__footer"},[e._t("default")],2):e._e()])};ac._withStripped=!0;var sc=r({mixins:[f.a],name:"ElTransferPanel",componentName:"ElTransferPanel",components:{ElCheckboxGroup:Wt.a,ElCheckbox:ot.a,ElInput:h.a,OptionContent:{props:{option:Object},render:function(e){var n=function e(n){return"ElTransferPanel"===n.$options.componentName?n:n.$parent?e(n.$parent):n}(this),t=n.$parent||n;return n.renderContent?n.renderContent(e,this.option):t.$scopedSlots.default?t.$scopedSlots.default({option:this.option}):e("span",[this.option[n.labelProp]||this.option[n.keyProp]])}}},props:{data:{type:Array,default:function(){return[]}},renderContent:Function,placeholder:String,title:String,filterable:Boolean,format:Object,filterMethod:Function,defaultChecked:Array,props:Object},data:function(){return{checked:[],allChecked:!1,query:"",inputHover:!1,checkChangeByUser:!0}},watch:{checked:function(e,n){if(this.updateAllChecked(),this.checkChangeByUser){var t=e.concat(n).filter((function(t){return-1===e.indexOf(t)||-1===n.indexOf(t)}));this.$emit("checked-change",e,t)}else this.$emit("checked-change",e),this.checkChangeByUser=!0},data:function(){var e=this,n=[],t=this.filteredData.map((function(n){return n[e.keyProp]}));this.checked.forEach((function(e){t.indexOf(e)>-1&&n.push(e)})),this.checkChangeByUser=!1,this.checked=n},checkableData:function(){this.updateAllChecked()},defaultChecked:{immediate:!0,handler:function(e,n){var t=this;if(!n||e.length!==n.length||!e.every((function(e){return n.indexOf(e)>-1}))){var i=[],r=this.checkableData.map((function(e){return e[t.keyProp]}));e.forEach((function(e){r.indexOf(e)>-1&&i.push(e)})),this.checkChangeByUser=!1,this.checked=i}}}},computed:{filteredData:function(){var e=this;return this.data.filter((function(n){return"function"==typeof e.filterMethod?e.filterMethod(e.query,n):(n[e.labelProp]||n[e.keyProp].toString()).toLowerCase().indexOf(e.query.toLowerCase())>-1}))},checkableData:function(){var e=this;return this.filteredData.filter((function(n){return!n[e.disabledProp]}))},checkedSummary:function(){var e=this.checked.length,n=this.data.length,t=this.format,i=t.noChecked,r=t.hasChecked;return i&&r?e>0?r.replace(/\${checked}/g,e).replace(/\${total}/g,n):i.replace(/\${total}/g,n):e+"/"+n},isIndeterminate:function(){var e=this.checked.length;return e>0&&e<this.checkableData.length},hasNoMatch:function(){return this.query.length>0&&0===this.filteredData.length},inputIcon:function(){return this.query.length>0&&this.inputHover?"circle-close":"search"},labelProp:function(){return this.props.label||"label"},keyProp:function(){return this.props.key||"key"},disabledProp:function(){return this.props.disabled||"disabled"},hasFooter:function(){return!!this.$slots.default}},methods:{updateAllChecked:function(){var e=this,n=this.checkableData.map((function(n){return n[e.keyProp]}));this.allChecked=n.length>0&&n.every((function(n){return e.checked.indexOf(n)>-1}))},handleAllCheckedChange:function(e){var n=this;this.checked=e?this.checkableData.map((function(e){return e[n.keyProp]})):[]},clearQuery:function(){"circle-close"===this.inputIcon&&(this.query="")}}},ac,[],!1,null,null,null);sc.options.__file="packages/transfer/src/transfer-panel.vue";var lc=sc.exports,cc=r({name:"ElTransfer",mixins:[k.a,f.a,_.a],components:{TransferPanel:lc,ElButton:U.a},props:{data:{type:Array,default:function(){return[]}},titles:{type:Array,default:function(){return[]}},buttonTexts:{type:Array,default:function(){return[]}},filterPlaceholder:{type:String,default:""},filterMethod:Function,leftDefaultChecked:{type:Array,default:function(){return[]}},rightDefaultChecked:{type:Array,default:function(){return[]}},renderContent:Function,value:{type:Array,default:function(){return[]}},format:{type:Object,default:function(){return{}}},filterable:Boolean,props:{type:Object,default:function(){return{label:"label",key:"key",disabled:"disabled"}}},targetOrder:{type:String,default:"original"}},data:function(){return{leftChecked:[],rightChecked:[]}},computed:{dataObj:function(){var e=this.props.key;return this.data.reduce((function(n,t){return(n[t[e]]=t)&&n}),{})},sourceData:function(){var e=this;return this.data.filter((function(n){return-1===e.value.indexOf(n[e.props.key])}))},targetData:function(){var e=this;return"original"===this.targetOrder?this.data.filter((function(n){return e.value.indexOf(n[e.props.key])>-1})):this.value.reduce((function(n,t){var i=e.dataObj[t];return i&&n.push(i),n}),[])},hasButtonTexts:function(){return 2===this.buttonTexts.length}},watch:{value:function(e){this.dispatch("ElFormItem","el.form.change",e)}},methods:{getMigratingConfig:function(){return{props:{"footer-format":"footer-format is renamed to format."}}},onSourceCheckedChange:function(e,n){this.leftChecked=e,void 0!==n&&this.$emit("left-check-change",e,n)},onTargetCheckedChange:function(e,n){this.rightChecked=e,void 0!==n&&this.$emit("right-check-change",e,n)},addToLeft:function(){var e=this.value.slice();this.rightChecked.forEach((function(n){var t=e.indexOf(n);t>-1&&e.splice(t,1)})),this.$emit("input",e),this.$emit("change",e,"left",this.rightChecked)},addToRight:function(){var e=this,n=this.value.slice(),t=[],i=this.props.key;this.data.forEach((function(n){var r=n[i];e.leftChecked.indexOf(r)>-1&&-1===e.value.indexOf(r)&&t.push(r)})),n="unshift"===this.targetOrder?t.concat(n):n.concat(t),this.$emit("input",n),this.$emit("change",n,"right",this.leftChecked)},clearQuery:function(e){"left"===e?this.$refs.leftPanel.query="":"right"===e&&(this.$refs.rightPanel.query="")}}},oc,[],!1,null,null,null);cc.options.__file="packages/transfer/src/main.vue";var uc=cc.exports;uc.install=function(e){e.component(uc.name,uc)};var dc=uc,hc=function(){var e=this.$createElement;return(this._self._c||e)("section",{staticClass:"el-container",class:{"is-vertical":this.isVertical}},[this._t("default")],2)};hc._withStripped=!0;var pc=r({name:"ElContainer",componentName:"ElContainer",props:{direction:String},computed:{isVertical:function(){return"vertical"===this.direction||"horizontal"!==this.direction&&(!(!this.$slots||!this.$slots.default)&&this.$slots.default.some((function(e){var n=e.componentOptions&&e.componentOptions.tag;return"el-header"===n||"el-footer"===n})))}}},hc,[],!1,null,null,null);pc.options.__file="packages/container/src/main.vue";var fc=pc.exports;fc.install=function(e){e.component(fc.name,fc)};var mc=fc,gc=function(){var e=this.$createElement;return(this._self._c||e)("header",{staticClass:"el-header",style:{height:this.height}},[this._t("default")],2)};gc._withStripped=!0;var vc=r({name:"ElHeader",componentName:"ElHeader",props:{height:{type:String,default:"60px"}}},gc,[],!1,null,null,null);vc.options.__file="packages/header/src/main.vue";var bc=vc.exports;bc.install=function(e){e.component(bc.name,bc)};var yc=bc,wc=function(){var e=this.$createElement;return(this._self._c||e)("aside",{staticClass:"el-aside",style:{width:this.width}},[this._t("default")],2)};wc._withStripped=!0;var xc=r({name:"ElAside",componentName:"ElAside",props:{width:{type:String,default:"300px"}}},wc,[],!1,null,null,null);xc.options.__file="packages/aside/src/main.vue";var _c=xc.exports;_c.install=function(e){e.component(_c.name,_c)};var Sc=_c,kc=function(){var e=this.$createElement;return(this._self._c||e)("main",{staticClass:"el-main"},[this._t("default")],2)};kc._withStripped=!0;var Cc=r({name:"ElMain",componentName:"ElMain"},kc,[],!1,null,null,null);Cc.options.__file="packages/main/src/main.vue";var Ec=Cc.exports;Ec.install=function(e){e.component(Ec.name,Ec)};var Tc=Ec,Pc=function(){var e=this.$createElement;return(this._self._c||e)("footer",{staticClass:"el-footer",style:{height:this.height}},[this._t("default")],2)};Pc._withStripped=!0;var Oc=r({name:"ElFooter",componentName:"ElFooter",props:{height:{type:String,default:"60px"}}},Pc,[],!1,null,null,null);Oc.options.__file="packages/footer/src/main.vue";var Ac=Oc.exports;Ac.install=function(e){e.component(Ac.name,Ac)};var jc=Ac,Ic=r({name:"ElTimeline",props:{reverse:{type:Boolean,default:!1}},provide:function(){return{timeline:this}},render:function(){var e=arguments[0],n=this.reverse,t={"el-timeline":!0,"is-reverse":n},i=this.$slots.default||[];return n&&(i=i.reverse()),e("ul",{class:t},[i])}},void 0,void 0,!1,null,null,null);Ic.options.__file="packages/timeline/src/main.vue";var Dc=Ic.exports;Dc.install=function(e){e.component(Dc.name,Dc)};var Mc=Dc,Lc=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("li",{staticClass:"el-timeline-item"},[t("div",{staticClass:"el-timeline-item__tail"}),e.$slots.dot?e._e():t("div",{staticClass:"el-timeline-item__node",class:["el-timeline-item__node--"+(e.size||""),"el-timeline-item__node--"+(e.type||"")],style:{backgroundColor:e.color}},[e.icon?t("i",{staticClass:"el-timeline-item__icon",class:e.icon}):e._e()]),e.$slots.dot?t("div",{staticClass:"el-timeline-item__dot"},[e._t("dot")],2):e._e(),t("div",{staticClass:"el-timeline-item__wrapper"},[e.hideTimestamp||"top"!==e.placement?e._e():t("div",{staticClass:"el-timeline-item__timestamp is-top"},[e._v("\n      "+e._s(e.timestamp)+"\n    ")]),t("div",{staticClass:"el-timeline-item__content"},[e._t("default")],2),e.hideTimestamp||"bottom"!==e.placement?e._e():t("div",{staticClass:"el-timeline-item__timestamp is-bottom"},[e._v("\n      "+e._s(e.timestamp)+"\n    ")])])])};Lc._withStripped=!0;var Nc=r({name:"ElTimelineItem",inject:["timeline"],props:{timestamp:String,hideTimestamp:{type:Boolean,default:!1},placement:{type:String,default:"bottom"},type:String,color:String,size:{type:String,default:"normal"},icon:String}},Lc,[],!1,null,null,null);Nc.options.__file="packages/timeline/src/item.vue";var $c=Nc.exports;$c.install=function(e){e.component($c.name,$c)};var Fc=$c,Rc=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("a",e._b({class:["el-link",e.type?"el-link--"+e.type:"",e.disabled&&"is-disabled",e.underline&&!e.disabled&&"is-underline"],attrs:{href:e.disabled?null:e.href},on:{click:e.handleClick}},"a",e.$attrs,!1),[e.icon?t("i",{class:e.icon}):e._e(),e.$slots.default?t("span",{staticClass:"el-link--inner"},[e._t("default")],2):e._e(),e.$slots.icon?[e.$slots.icon?e._t("icon"):e._e()]:e._e()],2)};Rc._withStripped=!0;var Bc=r({name:"ElLink",props:{type:{type:String,default:"default"},underline:{type:Boolean,default:!0},disabled:Boolean,href:String,icon:String},methods:{handleClick:function(e){this.disabled||this.href||this.$emit("click",e)}}},Rc,[],!1,null,null,null);Bc.options.__file="packages/link/src/main.vue";var Vc=Bc.exports;Vc.install=function(e){e.component(Vc.name,Vc)};var zc=Vc,qc=function(e,n){var t=n._c;return t("div",n._g(n._b({class:[n.data.staticClass,"el-divider","el-divider--"+n.props.direction]},"div",n.data.attrs,!1),n.listeners),[n.slots().default&&"vertical"!==n.props.direction?t("div",{class:["el-divider__text","is-"+n.props.contentPosition]},[n._t("default")],2):n._e()])};qc._withStripped=!0;var Hc=r({name:"ElDivider",props:{direction:{type:String,default:"horizontal",validator:function(e){return-1!==["horizontal","vertical"].indexOf(e)}},contentPosition:{type:String,default:"center",validator:function(e){return-1!==["left","center","right"].indexOf(e)}}}},qc,[],!0,null,null,null);Hc.options.__file="packages/divider/src/main.vue";var Wc=Hc.exports;Wc.install=function(e){e.component(Wc.name,Wc)};var Uc=Wc,Jc=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"el-image"},[e.loading?e._t("placeholder",[t("div",{staticClass:"el-image__placeholder"})]):e.error?e._t("error",[t("div",{staticClass:"el-image__error"},[e._v(e._s(e.t("el.image.error")))])]):t("img",e._g(e._b({staticClass:"el-image__inner",class:{"el-image__inner--center":e.alignCenter,"el-image__preview":e.preview},style:e.imageStyle,attrs:{src:e.src},on:{click:e.clickHandler}},"img",e.$attrs,!1),e.$listeners)),e.preview?[e.showViewer?t("image-viewer",{attrs:{"z-index":e.zIndex,"initial-index":e.imageIndex,"on-close":e.closeViewer,"url-list":e.previewSrcList}}):e._e()]:e._e()],2)};Jc._withStripped=!0;var Yc=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("transition",{attrs:{name:"viewer-fade"}},[t("div",{ref:"el-image-viewer__wrapper",staticClass:"el-image-viewer__wrapper",style:{"z-index":e.zIndex},attrs:{tabindex:"-1"}},[t("div",{staticClass:"el-image-viewer__mask",on:{click:function(n){return n.target!==n.currentTarget?null:e.handleMaskClick(n)}}}),t("span",{staticClass:"el-image-viewer__btn el-image-viewer__close",on:{click:e.hide}},[t("i",{staticClass:"el-icon-close"})]),e.isSingle?e._e():[t("span",{staticClass:"el-image-viewer__btn el-image-viewer__prev",class:{"is-disabled":!e.infinite&&e.isFirst},on:{click:e.prev}},[t("i",{staticClass:"el-icon-arrow-left"})]),t("span",{staticClass:"el-image-viewer__btn el-image-viewer__next",class:{"is-disabled":!e.infinite&&e.isLast},on:{click:e.next}},[t("i",{staticClass:"el-icon-arrow-right"})])],t("div",{staticClass:"el-image-viewer__btn el-image-viewer__actions"},[t("div",{staticClass:"el-image-viewer__actions__inner"},[t("i",{staticClass:"el-icon-zoom-out",on:{click:function(n){e.handleActions("zoomOut")}}}),t("i",{staticClass:"el-icon-zoom-in",on:{click:function(n){e.handleActions("zoomIn")}}}),t("i",{staticClass:"el-image-viewer__actions__divider"}),t("i",{class:e.mode.icon,on:{click:e.toggleMode}}),t("i",{staticClass:"el-image-viewer__actions__divider"}),t("i",{staticClass:"el-icon-refresh-left",on:{click:function(n){e.handleActions("anticlocelise")}}}),t("i",{staticClass:"el-icon-refresh-right",on:{click:function(n){e.handleActions("clocelise")}}})])]),t("div",{staticClass:"el-image-viewer__canvas"},e._l(e.urlList,(function(n,i){return i===e.index?t("img",{key:n,ref:"img",refInFor:!0,staticClass:"el-image-viewer__img",style:e.imgStyle,attrs:{src:e.currentImg},on:{load:e.handleImgLoad,error:e.handleImgError,mousedown:e.handleMouseDown}}):e._e()})),0)],2)])};Yc._withStripped=!0;var Gc=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Kc={CONTAIN:{name:"contain",icon:"el-icon-full-screen"},ORIGINAL:{name:"original",icon:"el-icon-c-scale-to-original"}},Xc=Object(m.isFirefox)()?"DOMMouseScroll":"mousewheel",Qc=r({name:"elImageViewer",props:{urlList:{type:Array,default:function(){return[]}},zIndex:{type:Number,default:2e3},onSwitch:{type:Function,default:function(){}},onClose:{type:Function,default:function(){}},initialIndex:{type:Number,default:0},appendToBody:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!0}},data:function(){return{index:this.initialIndex,isShow:!1,infinite:!0,loading:!1,mode:Kc.CONTAIN,transform:{scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}},computed:{isSingle:function(){return this.urlList.length<=1},isFirst:function(){return 0===this.index},isLast:function(){return this.index===this.urlList.length-1},currentImg:function(){return this.urlList[this.index]},imgStyle:function(){var e=this.transform,n=e.scale,t=e.deg,i=e.offsetX,r=e.offsetY,o={transform:"scale("+n+") rotate("+t+"deg)",transition:e.enableTransition?"transform .3s":"","margin-left":i+"px","margin-top":r+"px"};return this.mode===Kc.CONTAIN&&(o.maxWidth=o.maxHeight="100%"),o}},watch:{index:{handler:function(e){this.reset(),this.onSwitch(e)}},currentImg:function(e){var n=this;this.$nextTick((function(e){n.$refs.img[0].complete||(n.loading=!0)}))}},methods:{hide:function(){this.deviceSupportUninstall(),this.onClose()},deviceSupportInstall:function(){var e=this;this._keyDownHandler=Object(m.rafThrottle)((function(n){switch(n.keyCode){case 27:e.hide();break;case 32:e.toggleMode();break;case 37:e.prev();break;case 38:e.handleActions("zoomIn");break;case 39:e.next();break;case 40:e.handleActions("zoomOut")}})),this._mouseWheelHandler=Object(m.rafThrottle)((function(n){(n.wheelDelta?n.wheelDelta:-n.detail)>0?e.handleActions("zoomIn",{zoomRate:.015,enableTransition:!1}):e.handleActions("zoomOut",{zoomRate:.015,enableTransition:!1})})),Object(fe.on)(document,"keydown",this._keyDownHandler),Object(fe.on)(document,Xc,this._mouseWheelHandler)},deviceSupportUninstall:function(){Object(fe.off)(document,"keydown",this._keyDownHandler),Object(fe.off)(document,Xc,this._mouseWheelHandler),this._keyDownHandler=null,this._mouseWheelHandler=null},handleImgLoad:function(e){this.loading=!1},handleImgError:function(e){this.loading=!1,e.target.alt="加载失败"},handleMouseDown:function(e){var n=this;if(!this.loading&&0===e.button){var t=this.transform,i=t.offsetX,r=t.offsetY,o=e.pageX,a=e.pageY;this._dragHandler=Object(m.rafThrottle)((function(e){n.transform.offsetX=i+e.pageX-o,n.transform.offsetY=r+e.pageY-a})),Object(fe.on)(document,"mousemove",this._dragHandler),Object(fe.on)(document,"mouseup",(function(e){Object(fe.off)(document,"mousemove",n._dragHandler)})),e.preventDefault()}},handleMaskClick:function(){this.maskClosable&&this.hide()},reset:function(){this.transform={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}},toggleMode:function(){if(!this.loading){var e=Object.keys(Kc),n=(Object.values(Kc).indexOf(this.mode)+1)%e.length;this.mode=Kc[e[n]],this.reset()}},prev:function(){if(!this.isFirst||this.infinite){var e=this.urlList.length;this.index=(this.index-1+e)%e}},next:function(){if(!this.isLast||this.infinite){var e=this.urlList.length;this.index=(this.index+1)%e}},handleActions:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.loading){var t=Gc({zoomRate:.2,rotateDeg:90,enableTransition:!0},n),i=t.zoomRate,r=t.rotateDeg,o=t.enableTransition,a=this.transform;switch(e){case"zoomOut":a.scale>.2&&(a.scale=parseFloat((a.scale-i).toFixed(3)));break;case"zoomIn":a.scale=parseFloat((a.scale+i).toFixed(3));break;case"clocelise":a.deg+=r;break;case"anticlocelise":a.deg-=r}a.enableTransition=o}}},mounted:function(){this.deviceSupportInstall(),this.appendToBody&&document.body.appendChild(this.$el),this.$refs["el-image-viewer__wrapper"].focus()},destroyed:function(){this.appendToBody&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}},Yc,[],!1,null,null,null);Qc.options.__file="packages/image/src/image-viewer.vue";var Zc=Qc.exports,eu=function(){return void 0!==document.documentElement.style.objectFit},nu="none",tu="contain",iu="cover",ru="fill",ou="scale-down",au="",su=r({name:"ElImage",mixins:[f.a],inheritAttrs:!1,components:{ImageViewer:Zc},props:{src:String,fit:String,lazy:Boolean,scrollContainer:{},previewSrcList:{type:Array,default:function(){return[]}},zIndex:{type:Number,default:2e3}},data:function(){return{loading:!0,error:!1,show:!this.lazy,imageWidth:0,imageHeight:0,showViewer:!1}},computed:{imageStyle:function(){var e=this.fit;return!this.$isServer&&e?eu()?{"object-fit":e}:this.getImageStyle(e):{}},alignCenter:function(){return!this.$isServer&&!eu()&&this.fit!==ru},preview:function(){var e=this.previewSrcList;return Array.isArray(e)&&e.length>0},imageIndex:function(){var e=0,n=this.previewSrcList.indexOf(this.src);return n>=0&&(e=n),e}},watch:{src:function(e){this.show&&this.loadImage()},show:function(e){e&&this.loadImage()}},mounted:function(){this.lazy?this.addLazyLoadListener():this.loadImage()},beforeDestroy:function(){this.lazy&&this.removeLazyLoadListener()},methods:{loadImage:function(){var e=this;if(!this.$isServer){this.loading=!0,this.error=!1;var n=new Image;n.onload=function(t){return e.handleLoad(t,n)},n.onerror=this.handleError.bind(this),Object.keys(this.$attrs).forEach((function(t){var i=e.$attrs[t];n.setAttribute(t,i)})),n.src=this.src}},handleLoad:function(e,n){this.imageWidth=n.width,this.imageHeight=n.height,this.loading=!1,this.error=!1},handleError:function(e){this.loading=!1,this.error=!0,this.$emit("error",e)},handleLazyLoad:function(){Object(fe.isInContainer)(this.$el,this._scrollContainer)&&(this.show=!0,this.removeLazyLoadListener())},addLazyLoadListener:function(){if(!this.$isServer){var e=this.scrollContainer,n=null;(n=Object(Ns.isHtmlElement)(e)?e:Object(Ns.isString)(e)?document.querySelector(e):Object(fe.getScrollContainer)(this.$el))&&(this._scrollContainer=n,this._lazyLoadHandler=Ks()(200,this.handleLazyLoad),Object(fe.on)(n,"scroll",this._lazyLoadHandler),this.handleLazyLoad())}},removeLazyLoadListener:function(){var e=this._scrollContainer,n=this._lazyLoadHandler;!this.$isServer&&e&&n&&(Object(fe.off)(e,"scroll",n),this._scrollContainer=null,this._lazyLoadHandler=null)},getImageStyle:function(e){var n=this.imageWidth,t=this.imageHeight,i=this.$el,r=i.clientWidth,o=i.clientHeight;if(!(n&&t&&r&&o))return{};var a=n/t,s=r/o;e===ou&&(e=n<r&&t<o?nu:tu);switch(e){case nu:return{width:"auto",height:"auto"};case tu:return a<s?{width:"auto"}:{height:"auto"};case iu:return a<s?{height:"auto"}:{width:"auto"};default:return{}}},clickHandler:function(){this.preview&&(au=document.body.style.overflow,document.body.style.overflow="hidden",this.showViewer=!0)},closeViewer:function(){document.body.style.overflow=au,this.showViewer=!1}}},Jc,[],!1,null,null,null);su.options.__file="packages/image/src/main.vue";var lu=su.exports;lu.install=function(e){e.component(lu.name,lu)};var cu=lu,uu=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"el-calendar"},[t("div",{staticClass:"el-calendar__header"},[t("div",{staticClass:"el-calendar__title"},[e._v("\n      "+e._s(e.i18nDate)+"\n    ")]),0===e.validatedRange.length?t("div",{staticClass:"el-calendar__button-group"},[t("el-button-group",[t("el-button",{attrs:{type:"plain",size:"mini"},on:{click:function(n){e.selectDate("prev-month")}}},[e._v("\n          "+e._s(e.t("el.datepicker.prevMonth"))+"\n        ")]),t("el-button",{attrs:{type:"plain",size:"mini"},on:{click:function(n){e.selectDate("today")}}},[e._v("\n          "+e._s(e.t("el.datepicker.today"))+"\n        ")]),t("el-button",{attrs:{type:"plain",size:"mini"},on:{click:function(n){e.selectDate("next-month")}}},[e._v("\n          "+e._s(e.t("el.datepicker.nextMonth"))+"\n        ")])],1)],1):e._e()]),0===e.validatedRange.length?t("div",{key:"no-range",staticClass:"el-calendar__body"},[t("date-table",{attrs:{date:e.date,"selected-day":e.realSelectedDay,"first-day-of-week":e.realFirstDayOfWeek},on:{pick:e.pickDay}})],1):t("div",{key:"has-range",staticClass:"el-calendar__body"},e._l(e.validatedRange,(function(n,i){return t("date-table",{key:i,attrs:{date:n[0],"selected-day":e.realSelectedDay,range:n,"hide-header":0!==i,"first-day-of-week":e.realFirstDayOfWeek},on:{pick:e.pickDay}})})),1)])};uu._withStripped=!0;var du=t(20),hu=t.n(du),pu=r({props:{selectedDay:String,range:{type:Array,validator:function(e){if(!e||!e.length)return!0;var n=e[0],t=e[1];return Object(hi.validateRangeInOneMonth)(n,t)}},date:Date,hideHeader:Boolean,firstDayOfWeek:Number},inject:["elCalendar"],methods:{toNestedArr:function(e){return Object(hi.range)(e.length/7).map((function(n,t){var i=7*t;return e.slice(i,i+7)}))},getFormateDate:function(e,n){if(!e||-1===["prev","current","next"].indexOf(n))throw new Error("invalid day or type");var t=this.curMonthDatePrefix;return"prev"===n?t=this.prevMonthDatePrefix:"next"===n&&(t=this.nextMonthDatePrefix),t+"-"+(e=("00"+e).slice(-2))},getCellClass:function(e){var n=e.text,t=e.type,i=[t];if("current"===t){var r=this.getFormateDate(n,t);r===this.selectedDay&&i.push("is-selected"),r===this.formatedToday&&i.push("is-today")}return i},pickDay:function(e){var n=e.text,t=e.type,i=this.getFormateDate(n,t);this.$emit("pick",i)},cellRenderProxy:function(e){var n=e.text,t=e.type,i=this.$createElement,r=this.elCalendar.$scopedSlots.dateCell;if(!r)return i("span",[n]);var o=this.getFormateDate(n,t);return r({date:new Date(o),data:{isSelected:this.selectedDay===o,type:t+"-month",day:o}})}},computed:{WEEK_DAYS:function(){return Object(hi.getI18nSettings)().dayNames},prevMonthDatePrefix:function(){var e=new Date(this.date.getTime());return e.setDate(0),hu.a.format(e,"yyyy-MM")},curMonthDatePrefix:function(){return hu.a.format(this.date,"yyyy-MM")},nextMonthDatePrefix:function(){var e=new Date(this.date.getFullYear(),this.date.getMonth()+1,1);return hu.a.format(e,"yyyy-MM")},formatedToday:function(){return this.elCalendar.formatedToday},isInRange:function(){return this.range&&this.range.length},rows:function(){var e=[];if(this.isInRange){var n=this.range,t=n[0],i=n[1],r=Object(hi.range)(i.getDate()-t.getDate()+1).map((function(e,n){return{text:t.getDate()+n,type:"current"}})),o=r.length%7;o=0===o?0:7-o;var a=Object(hi.range)(o).map((function(e,n){return{text:n+1,type:"next"}}));e=r.concat(a)}else{var s=this.date,l=Object(hi.getFirstDayOfMonth)(s);l=0===l?7:l;var c="number"==typeof this.firstDayOfWeek?this.firstDayOfWeek:1,u=Object(hi.getPrevMonthLastDays)(s,l-c).map((function(e){return{text:e,type:"prev"}})),d=Object(hi.getMonthDays)(s).map((function(e){return{text:e,type:"current"}}));e=[].concat(u,d);var h=Object(hi.range)(42-e.length).map((function(e,n){return{text:n+1,type:"next"}}));e=e.concat(h)}return this.toNestedArr(e)},weekDays:function(){var e=this.firstDayOfWeek,n=this.WEEK_DAYS;return"number"!=typeof e||0===e?n.slice():n.slice(e).concat(n.slice(0,e))}},render:function(){var e=this,n=arguments[0],t=this.hideHeader?null:n("thead",[this.weekDays.map((function(e){return n("th",{key:e},[e])}))]);return n("table",{class:{"el-calendar-table":!0,"is-range":this.isInRange},attrs:{cellspacing:"0",cellpadding:"0"}},[t,n("tbody",[this.rows.map((function(t,i){return n("tr",{class:{"el-calendar-table__row":!0,"el-calendar-table__row--hide-border":0===i&&e.hideHeader},key:i},[t.map((function(t,i){return n("td",{key:i,class:e.getCellClass(t),on:{click:e.pickDay.bind(e,t)}},[n("div",{class:"el-calendar-day"},[e.cellRenderProxy(t)])])}))])}))])])}},void 0,void 0,!1,null,null,null);pu.options.__file="packages/calendar/src/date-table.vue";var fu=pu.exports,mu=["prev-month","today","next-month"],gu=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],vu=r({name:"ElCalendar",mixins:[f.a],components:{DateTable:fu,ElButton:U.a,ElButtonGroup:Y.a},props:{value:[Date,String,Number],range:{type:Array,validator:function(e){return!Array.isArray(e)||2===e.length&&e.every((function(e){return"string"==typeof e||"number"==typeof e||e instanceof Date}))}},firstDayOfWeek:{type:Number,default:1}},provide:function(){return{elCalendar:this}},methods:{pickDay:function(e){this.realSelectedDay=e},selectDate:function(e){if(-1===mu.indexOf(e))throw new Error("invalid type "+e);var n="";(n="prev-month"===e?this.prevMonthDatePrefix+"-01":"next-month"===e?this.nextMonthDatePrefix+"-01":this.formatedToday)!==this.formatedDate&&this.pickDay(n)},toDate:function(e){if(!e)throw new Error("invalid val");return e instanceof Date?e:new Date(e)},rangeValidator:function(e,n){var t=this.realFirstDayOfWeek,i=n?t:0===t?6:t-1,r=(n?"start":"end")+" of range should be "+gu[i]+".";return e.getDay()===i||(console.warn("[ElementCalendar]",r,"Invalid range will be ignored."),!1)}},computed:{prevMonthDatePrefix:function(){var e=new Date(this.date.getTime());return e.setDate(0),hu.a.format(e,"yyyy-MM")},curMonthDatePrefix:function(){return hu.a.format(this.date,"yyyy-MM")},nextMonthDatePrefix:function(){var e=new Date(this.date.getFullYear(),this.date.getMonth()+1,1);return hu.a.format(e,"yyyy-MM")},formatedDate:function(){return hu.a.format(this.date,"yyyy-MM-dd")},i18nDate:function(){var e=this.date.getFullYear(),n=this.date.getMonth()+1;return e+" "+this.t("el.datepicker.year")+" "+this.t("el.datepicker.month"+n)},formatedToday:function(){return hu.a.format(this.now,"yyyy-MM-dd")},realSelectedDay:{get:function(){return this.value?this.formatedDate:this.selectedDay},set:function(e){this.selectedDay=e;var n=new Date(e);this.$emit("input",n)}},date:function(){if(this.value)return this.toDate(this.value);if(this.realSelectedDay){var e=this.selectedDay.split("-");return new Date(e[0],e[1]-1,e[2])}return this.validatedRange.length?this.validatedRange[0][0]:this.now},validatedRange:function(){var e=this,n=this.range;if(!n)return[];if(2===(n=n.reduce((function(n,t,i){var r=e.toDate(t);return e.rangeValidator(r,0===i)&&(n=n.concat(r)),n}),[])).length){var t=n,i=t[0],r=t[1];if(i>r)return console.warn("[ElementCalendar]end time should be greater than start time"),[];if(Object(hi.validateRangeInOneMonth)(i,r))return[[i,r]];var o=[],a=new Date(i.getFullYear(),i.getMonth()+1,1),s=this.toDate(a.getTime()-864e5);if(!Object(hi.validateRangeInOneMonth)(a,r))return console.warn("[ElementCalendar]start time and end time interval must not exceed two months"),[];o.push([i,s]);var l=this.realFirstDayOfWeek,c=a.getDay(),u=0;return c!==l&&(u=0===l?7-c:(u=l-c)>0?u:7+u),(a=this.toDate(a.getTime()+864e5*u)).getDate()<r.getDate()&&o.push([a,r]),o}return[]},realFirstDayOfWeek:function(){return this.firstDayOfWeek<1||this.firstDayOfWeek>6?0:Math.floor(this.firstDayOfWeek)}},data:function(){return{selectedDay:"",now:new Date}}},uu,[],!1,null,null,null);vu.options.__file="packages/calendar/src/main.vue";var bu=vu.exports;bu.install=function(e){e.component(bu.name,bu)};var yu=bu,wu=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("transition",{attrs:{name:"el-fade-in"}},[e.visible?t("div",{staticClass:"el-backtop",style:{right:e.styleRight,bottom:e.styleBottom},on:{click:function(n){return n.stopPropagation(),e.handleClick(n)}}},[e._t("default",[t("el-icon",{attrs:{name:"caret-top"}})])],2):e._e()])};wu._withStripped=!0;var xu=function(e){return Math.pow(e,3)},_u=r({name:"ElBacktop",props:{visibilityHeight:{type:Number,default:200},target:[String],right:{type:Number,default:40},bottom:{type:Number,default:40}},data:function(){return{el:null,container:null,visible:!1}},computed:{styleBottom:function(){return this.bottom+"px"},styleRight:function(){return this.right+"px"}},mounted:function(){this.init(),this.throttledScrollHandler=Ks()(300,this.onScroll),this.container.addEventListener("scroll",this.throttledScrollHandler)},methods:{init:function(){if(this.container=document,this.el=document.documentElement,this.target){if(this.el=document.querySelector(this.target),!this.el)throw new Error("target is not existed: "+this.target);this.container=this.el}},onScroll:function(){var e=this.el.scrollTop;this.visible=e>=this.visibilityHeight},handleClick:function(e){this.scrollToTop(),this.$emit("click",e)},scrollToTop:function(){var e=this.el,n=Date.now(),t=e.scrollTop,i=window.requestAnimationFrame||function(e){return setTimeout(e,16)};i((function r(){var o,a=(Date.now()-n)/500;a<1?(e.scrollTop=t*(1-((o=a)<.5?xu(2*o)/2:1-xu(2*(1-o))/2)),i(r)):e.scrollTop=0}))}},beforeDestroy:function(){this.container.removeEventListener("scroll",this.throttledScrollHandler)}},wu,[],!1,null,null,null);_u.options.__file="packages/backtop/src/main.vue";var Su=_u.exports;Su.install=function(e){e.component(Su.name,Su)};var ku=Su,Cu=function(e,n){return e===window||e===document?document.documentElement[n]:e[n]},Eu=function(e){return Cu(e,"offsetHeight")},Tu="ElInfiniteScroll",Pu={delay:{type:Number,default:200},distance:{type:Number,default:0},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},Ou=function(e,n){return Object(Ns.isHtmlElement)(e)?(t=Pu,Object.keys(t||{}).map((function(e){return[e,t[e]]}))).reduce((function(t,i){var r=i[0],o=i[1],a=o.type,s=o.default,l=e.getAttribute("infinite-scroll-"+r);switch(l=Object(Ns.isUndefined)(n[l])?l:n[l],a){case Number:l=Number(l),l=Number.isNaN(l)?s:l;break;case Boolean:l=Object(Ns.isDefined)(l)?"false"!==l&&Boolean(l):s;break;default:l=a(l)}return t[r]=l,t}),{}):{};var t},Au=function(e){return e.getBoundingClientRect().top},ju=function(e){var n=this[Tu],t=n.el,i=n.vm,r=n.container,o=n.observer,a=Ou(t,i),s=a.distance;if(!a.disabled){var l=r.getBoundingClientRect();if(l.width||l.height){var c=!1;if(r===t){var u=r.scrollTop+function(e){return Cu(e,"clientHeight")}(r);c=r.scrollHeight-u<=s}else{c=Eu(t)+Au(t)-Au(r)-Eu(r)+Number.parseFloat(function(e,n){if(e===window&&(e=document.documentElement),1!==e.nodeType)return[];var t=window.getComputedStyle(e,null);return n?t[n]:t}(r,"borderBottomWidth"))<=s}c&&Object(Ns.isFunction)(e)?e.call(i):o&&(o.disconnect(),this[Tu].observer=null)}}},Iu={name:"InfiniteScroll",inserted:function(e,n,t){var i=n.value,r=t.context,o=Object(fe.getScrollContainer)(e,!0),a=Ou(e,r),s=a.delay,l=a.immediate,c=A()(s,ju.bind(e,i));(e[Tu]={el:e,vm:r,container:o,onScroll:c},o)&&(o.addEventListener("scroll",c),l&&((e[Tu].observer=new MutationObserver(c)).observe(o,{childList:!0,subtree:!0}),c()))},unbind:function(e){var n=e[Tu],t=n.container,i=n.onScroll;t&&t.removeEventListener("scroll",i)},install:function(e){e.directive(Iu.name,Iu)}},Du=Iu,Mu=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"el-page-header"},[t("div",{staticClass:"el-page-header__left",on:{click:function(n){e.$emit("back")}}},[t("i",{staticClass:"el-icon-back"}),t("div",{staticClass:"el-page-header__title"},[e._t("title",[e._v(e._s(e.title))])],2)]),t("div",{staticClass:"el-page-header__content"},[e._t("content",[e._v(e._s(e.content))])],2)])};Mu._withStripped=!0;var Lu=r({name:"ElPageHeader",props:{title:{type:String,default:function(){return Object(Mr.t)("el.pageHeader.title")}},content:String}},Mu,[],!1,null,null,null);Lu.options.__file="packages/page-header/src/main.vue";var Nu=Lu.exports;Nu.install=function(e){e.component(Nu.name,Nu)};var $u=Nu,Fu=function(){var e=this.$createElement,n=this._self._c||e;return n("div",{class:["el-cascader-panel",this.border&&"is-bordered"],on:{keydown:this.handleKeyDown}},this._l(this.menus,(function(e,t){return n("cascader-menu",{key:t,ref:"menu",refInFor:!0,attrs:{index:t,nodes:e}})})),1)};Fu._withStripped=!0;var Ru=t(43),Bu=t.n(Ru),Vu=function(e){return e.stopPropagation()},zu=r({inject:["panel"],components:{ElCheckbox:ot.a,ElRadio:Bu.a},props:{node:{required:!0},nodeId:String},computed:{config:function(){return this.panel.config},isLeaf:function(){return this.node.isLeaf},isDisabled:function(){return this.node.isDisabled},checkedValue:function(){return this.panel.checkedValue},isChecked:function(){return this.node.isSameNode(this.checkedValue)},inActivePath:function(){return this.isInPath(this.panel.activePath)},inCheckedPath:function(){var e=this;return!!this.config.checkStrictly&&this.panel.checkedNodePaths.some((function(n){return e.isInPath(n)}))},value:function(){return this.node.getValueByOption()}},methods:{handleExpand:function(){var e=this,n=this.panel,t=this.node,i=this.isDisabled,r=this.config,o=r.multiple;!r.checkStrictly&&i||t.loading||(r.lazy&&!t.loaded?n.lazyLoad(t,(function(){var n=e.isLeaf;if(n||e.handleExpand(),o){var i=!!n&&t.checked;e.handleMultiCheckChange(i)}})):n.handleExpand(t))},handleCheckChange:function(){var e=this.panel,n=this.value,t=this.node;e.handleCheckChange(n),e.handleExpand(t)},handleMultiCheckChange:function(e){this.node.doCheck(e),this.panel.calculateMultiCheckedValue()},isInPath:function(e){var n=this.node;return(e[n.level-1]||{}).uid===n.uid},renderPrefix:function(e){var n=this.isLeaf,t=this.isChecked,i=this.config,r=i.checkStrictly;return i.multiple?this.renderCheckbox(e):r?this.renderRadio(e):n&&t?this.renderCheckIcon(e):null},renderPostfix:function(e){var n=this.node,t=this.isLeaf;return n.loading?this.renderLoadingIcon(e):t?null:this.renderExpandIcon(e)},renderCheckbox:function(e){var n=this.node,t=this.config,i=this.isDisabled,r={on:{change:this.handleMultiCheckChange},nativeOn:{}};return t.checkStrictly&&(r.nativeOn.click=Vu),e("el-checkbox",es()([{attrs:{value:n.checked,indeterminate:n.indeterminate,disabled:i}},r]))},renderRadio:function(e){var n=this.checkedValue,t=this.value,i=this.isDisabled;return Object(m.isEqual)(t,n)&&(t=n),e("el-radio",{attrs:{value:n,label:t,disabled:i},on:{change:this.handleCheckChange},nativeOn:{click:Vu}},[e("span")])},renderCheckIcon:function(e){return e("i",{class:"el-icon-check el-cascader-node__prefix"})},renderLoadingIcon:function(e){return e("i",{class:"el-icon-loading el-cascader-node__postfix"})},renderExpandIcon:function(e){return e("i",{class:"el-icon-arrow-right el-cascader-node__postfix"})},renderContent:function(e){var n=this.panel,t=this.node,i=n.renderLabelFn;return e("span",{class:"el-cascader-node__label"},[(i?i({node:t,data:t.data}):null)||t.label])}},render:function(e){var n=this,t=this.inActivePath,i=this.inCheckedPath,r=this.isChecked,o=this.isLeaf,a=this.isDisabled,s=this.config,l=this.nodeId,c=s.expandTrigger,u=s.checkStrictly,d=s.multiple,h=!u&&a,p={on:{}};return"click"===c?p.on.click=this.handleExpand:(p.on.mouseenter=function(e){n.handleExpand(),n.$emit("expand",e)},p.on.focus=function(e){n.handleExpand(),n.$emit("expand",e)}),!o||a||u||d||(p.on.click=this.handleCheckChange),e("li",es()([{attrs:{role:"menuitem",id:l,"aria-expanded":t,tabindex:h?null:-1},class:{"el-cascader-node":!0,"is-selectable":u,"in-active-path":t,"in-checked-path":i,"is-active":r,"is-disabled":h}},p]),[this.renderPrefix(e),this.renderContent(e),this.renderPostfix(e)])}},void 0,void 0,!1,null,null,null);zu.options.__file="packages/cascader-panel/src/cascader-node.vue";var qu=zu.exports,Hu=r({name:"ElCascaderMenu",mixins:[f.a],inject:["panel"],components:{ElScrollbar:$.a,CascaderNode:qu},props:{nodes:{type:Array,required:!0},index:Number},data:function(){return{activeNode:null,hoverTimer:null,id:Object(m.generateId)()}},computed:{isEmpty:function(){return!this.nodes.length},menuId:function(){return"cascader-menu-"+this.id+"-"+this.index}},methods:{handleExpand:function(e){this.activeNode=e.target},handleMouseMove:function(e){var n=this.activeNode,t=this.hoverTimer,i=this.$refs.hoverZone;if(n&&i)if(n.contains(e.target)){clearTimeout(t);var r=this.$el.getBoundingClientRect().left,o=e.clientX-r,a=this.$el,s=a.offsetWidth,l=a.offsetHeight,c=n.offsetTop,u=c+n.offsetHeight;i.innerHTML='\n          <path style="pointer-events: auto;" fill="transparent" d="M'+o+" "+c+" L"+s+" 0 V"+c+' Z" />\n          <path style="pointer-events: auto;" fill="transparent" d="M'+o+" "+u+" L"+s+" "+l+" V"+u+' Z" />\n        '}else t||(this.hoverTimer=setTimeout(this.clearHoverZone,this.panel.config.hoverThreshold))},clearHoverZone:function(){var e=this.$refs.hoverZone;e&&(e.innerHTML="")},renderEmptyText:function(e){return e("div",{class:"el-cascader-menu__empty-text"},[this.t("el.cascader.noData")])},renderNodeList:function(e){var n=this.menuId,t=this.panel.isHoverMenu,i={on:{}};t&&(i.on.expand=this.handleExpand);var r=this.nodes.map((function(t,r){var o=t.hasChildren;return e("cascader-node",es()([{key:t.uid,attrs:{node:t,"node-id":n+"-"+r,"aria-haspopup":o,"aria-owns":o?n:null}},i]))}));return[].concat(r,[t?e("svg",{ref:"hoverZone",class:"el-cascader-menu__hover-zone"}):null])}},render:function(e){var n=this.isEmpty,t=this.menuId,i={nativeOn:{}};return this.panel.isHoverMenu&&(i.nativeOn.mousemove=this.handleMouseMove),e("el-scrollbar",es()([{attrs:{tag:"ul",role:"menu",id:t,"wrap-class":"el-cascader-menu__wrap","view-class":{"el-cascader-menu__list":!0,"is-empty":n}},class:"el-cascader-menu"},i]),[n?this.renderEmptyText(e):this.renderNodeList(e)])}},void 0,void 0,!1,null,null,null);Hu.options.__file="packages/cascader-panel/src/cascader-menu.vue";var Wu=Hu.exports,Uu=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}();var Ju=0,Yu=function(){function e(n,t,i){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=n,this.config=t,this.parent=i||null,this.level=this.parent?this.parent.level+1:1,this.uid=Ju++,this.initState(),this.initChildren()}return e.prototype.initState=function(){var e=this.config,n=e.value,t=e.label;this.value=this.data[n],this.label=this.data[t],this.pathNodes=this.calculatePathNodes(),this.path=this.pathNodes.map((function(e){return e.value})),this.pathLabels=this.pathNodes.map((function(e){return e.label})),this.loading=!1,this.loaded=!1},e.prototype.initChildren=function(){var n=this,t=this.config,i=t.children,r=this.data[i];this.hasChildren=Array.isArray(r),this.children=(r||[]).map((function(i){return new e(i,t,n)}))},e.prototype.calculatePathNodes=function(){for(var e=[this],n=this.parent;n;)e.unshift(n),n=n.parent;return e},e.prototype.getPath=function(){return this.path},e.prototype.getValue=function(){return this.value},e.prototype.getValueByOption=function(){return this.config.emitPath?this.getPath():this.getValue()},e.prototype.getText=function(e,n){return e?this.pathLabels.join(n):this.label},e.prototype.isSameNode=function(e){var n=this.getValueByOption();return this.config.multiple&&Array.isArray(e)?e.some((function(e){return Object(m.isEqual)(e,n)})):Object(m.isEqual)(e,n)},e.prototype.broadcast=function(e){for(var n=arguments.length,t=Array(n>1?n-1:0),i=1;i<n;i++)t[i-1]=arguments[i];var r="onParent"+Object(m.capitalize)(e);this.children.forEach((function(n){n&&(n.broadcast.apply(n,[e].concat(t)),n[r]&&n[r].apply(n,t))}))},e.prototype.emit=function(e){var n=this.parent,t="onChild"+Object(m.capitalize)(e);if(n){for(var i=arguments.length,r=Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];n[t]&&n[t].apply(n,r),n.emit.apply(n,[e].concat(r))}},e.prototype.onParentCheck=function(e){this.isDisabled||this.setCheckState(e)},e.prototype.onChildCheck=function(){var e=this.children.filter((function(e){return!e.isDisabled})),n=!!e.length&&e.every((function(e){return e.checked}));this.setCheckState(n)},e.prototype.setCheckState=function(e){var n=this.children.length,t=this.children.reduce((function(e,n){return e+(n.checked?1:n.indeterminate?.5:0)}),0);this.checked=e,this.indeterminate=t!==n&&t>0},e.prototype.syncCheckState=function(e){var n=this.getValueByOption(),t=this.isSameNode(e,n);this.doCheck(t)},e.prototype.doCheck=function(e){this.checked!==e&&(this.config.checkStrictly?this.checked=e:(this.broadcast("check",e),this.setCheckState(e),this.emit("check")))},Uu(e,[{key:"isDisabled",get:function(){var e=this.data,n=this.parent,t=this.config,i=t.disabled,r=t.checkStrictly;return e[i]||!r&&n&&n.isDisabled}},{key:"isLeaf",get:function(){var e=this.data,n=this.loaded,t=this.hasChildren,i=this.children,r=this.config,o=r.lazy,a=r.leaf;if(o){var s=Object(qe.isDef)(e[a])?e[a]:!!n&&!i.length;return this.hasChildren=!s,s}return!t}}]),e}();var Gu=function e(n,t){return n.reduce((function(n,i){return i.isLeaf?n.push(i):(!t&&n.push(i),n=n.concat(e(i.children,t))),n}),[])},Ku=function(){function e(n,t){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=t,this.initNodes(n)}return e.prototype.initNodes=function(e){var n=this;e=Object(m.coerceTruthyValueToArray)(e),this.nodes=e.map((function(e){return new Yu(e,n.config)})),this.flattedNodes=this.getFlattedNodes(!1,!1),this.leafNodes=this.getFlattedNodes(!0,!1)},e.prototype.appendNode=function(e,n){var t=new Yu(e,this.config,n);(n?n.children:this.nodes).push(t)},e.prototype.appendNodes=function(e,n){var t=this;(e=Object(m.coerceTruthyValueToArray)(e)).forEach((function(e){return t.appendNode(e,n)}))},e.prototype.getNodes=function(){return this.nodes},e.prototype.getFlattedNodes=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=e?this.leafNodes:this.flattedNodes;return n?t:Gu(this.nodes,e)},e.prototype.getNodeByValue=function(e){if(e){var n=this.getFlattedNodes(!1,!this.config.lazy).filter((function(n){return Object(m.valueEquals)(n.path,e)||n.value===e}));return n&&n.length?n[0]:null}return null},e}(),Xu=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Qu=xl.a.keys,Zu={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:m.noop,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},ed=function(e){return!e.getAttribute("aria-owns")},nd=function(e,n){var t=e.parentNode;if(t){var i=t.querySelectorAll('.el-cascader-node[tabindex="-1"]');return i[Array.prototype.indexOf.call(i,e)+n]||null}return null},td=function(e,n){if(e){var t=e.id.split("-");return Number(t[t.length-2])}},id=function(e){e&&(e.focus(),!ed(e)&&e.click())},rd=r({name:"ElCascaderPanel",components:{CascaderMenu:Wu},props:{value:{},options:Array,props:Object,border:{type:Boolean,default:!0},renderLabel:Function},provide:function(){return{panel:this}},data:function(){return{checkedValue:null,checkedNodePaths:[],store:[],menus:[],activePath:[],loadCount:0}},computed:{config:function(){return ze()(Xu({},Zu),this.props||{})},multiple:function(){return this.config.multiple},checkStrictly:function(){return this.config.checkStrictly},leafOnly:function(){return!this.checkStrictly},isHoverMenu:function(){return"hover"===this.config.expandTrigger},renderLabelFn:function(){return this.renderLabel||this.$scopedSlots.default}},watch:{options:{handler:function(){this.initStore()},immediate:!0,deep:!0},value:function(){this.syncCheckedValue(),this.checkStrictly&&this.calculateCheckedNodePaths()},checkedValue:function(e){Object(m.isEqual)(e,this.value)||(this.checkStrictly&&this.calculateCheckedNodePaths(),this.$emit("input",e),this.$emit("change",e))}},mounted:function(){Object(m.isEmpty)(this.value)||this.syncCheckedValue()},methods:{initStore:function(){var e=this.config,n=this.options;e.lazy&&Object(m.isEmpty)(n)?this.lazyLoad():(this.store=new Ku(n,e),this.menus=[this.store.getNodes()],this.syncMenuState())},syncCheckedValue:function(){var e=this.value,n=this.checkedValue;Object(m.isEqual)(e,n)||(this.activePath=[],this.checkedValue=e,this.syncMenuState())},syncMenuState:function(){var e=this.multiple,n=this.checkStrictly;this.syncActivePath(),e&&this.syncMultiCheckState(),n&&this.calculateCheckedNodePaths(),this.$nextTick(this.scrollIntoView)},syncMultiCheckState:function(){var e=this;this.getFlattedNodes(this.leafOnly).forEach((function(n){n.syncCheckState(e.checkedValue)}))},syncActivePath:function(){var e=this,n=this.store,t=this.multiple,i=this.activePath,r=this.checkedValue;if(Object(m.isEmpty)(i))if(Object(m.isEmpty)(r))this.activePath=[],this.menus=[n.getNodes()];else{var o=t?r[0]:r,a=((this.getNodeByValue(o)||{}).pathNodes||[]).slice(0,-1);this.expandNodes(a)}else{var s=i.map((function(n){return e.getNodeByValue(n.getValue())}));this.expandNodes(s)}},expandNodes:function(e){var n=this;e.forEach((function(e){return n.handleExpand(e,!0)}))},calculateCheckedNodePaths:function(){var e=this,n=this.checkedValue,t=this.multiple?Object(m.coerceTruthyValueToArray)(n):[n];this.checkedNodePaths=t.map((function(n){var t=e.getNodeByValue(n);return t?t.pathNodes:[]}))},handleKeyDown:function(e){var n=e.target;switch(e.keyCode){case Qu.up:var t=nd(n,-1);id(t);break;case Qu.down:var i=nd(n,1);id(i);break;case Qu.left:var r=this.$refs.menu[td(n)-1];if(r){var o=r.$el.querySelector('.el-cascader-node[aria-expanded="true"]');id(o)}break;case Qu.right:var a=this.$refs.menu[td(n)+1];if(a){var s=a.$el.querySelector('.el-cascader-node[tabindex="-1"]');id(s)}break;case Qu.enter:!function(e){if(e){var n=e.querySelector("input");n?n.click():ed(e)&&e.click()}}(n);break;case Qu.esc:case Qu.tab:this.$emit("close");break;default:return}},handleExpand:function(e,n){var t=this.activePath,i=e.level,r=t.slice(0,i-1),o=this.menus.slice(0,i);if(e.isLeaf||(r.push(e),o.push(e.children)),this.activePath=r,this.menus=o,!n){var a=r.map((function(e){return e.getValue()})),s=t.map((function(e){return e.getValue()}));Object(m.valueEquals)(a,s)||(this.$emit("active-item-change",a),this.$emit("expand-change",a))}},handleCheckChange:function(e){this.checkedValue=e},lazyLoad:function(e,n){var t=this,i=this.config;e||(e=e||{root:!0,level:0},this.store=new Ku([],i),this.menus=[this.store.getNodes()]),e.loading=!0;i.lazyLoad(e,(function(i){var r=e.root?null:e;if(i&&i.length&&t.store.appendNodes(i,r),e.loading=!1,e.loaded=!0,Array.isArray(t.checkedValue)){var o=t.checkedValue[t.loadCount++],a=t.config.value,s=t.config.leaf;if(Array.isArray(i)&&i.filter((function(e){return e[a]===o})).length>0){var l=t.store.getNodeByValue(o);l.data[s]||t.lazyLoad(l,(function(){t.handleExpand(l)})),t.loadCount===t.checkedValue.length&&t.$parent.computePresentText()}}n&&n(i)}))},calculateMultiCheckedValue:function(){this.checkedValue=this.getCheckedNodes(this.leafOnly).map((function(e){return e.getValueByOption()}))},scrollIntoView:function(){this.$isServer||(this.$refs.menu||[]).forEach((function(e){var n=e.$el;if(n){var t=n.querySelector(".el-scrollbar__wrap"),i=n.querySelector(".el-cascader-node.is-active")||n.querySelector(".el-cascader-node.in-active-path");Bn()(t,i)}}))},getNodeByValue:function(e){return this.store.getNodeByValue(e)},getFlattedNodes:function(e){var n=!this.config.lazy;return this.store.getFlattedNodes(e,n)},getCheckedNodes:function(e){var n=this.checkedValue;return this.multiple?this.getFlattedNodes(e).filter((function(e){return e.checked})):Object(m.isEmpty)(n)?[]:[this.getNodeByValue(n)]},clearCheckedNodes:function(){var e=this.config,n=this.leafOnly,t=e.multiple,i=e.emitPath;t?(this.getCheckedNodes(n).filter((function(e){return!e.isDisabled})).forEach((function(e){return e.doCheck(!1)})),this.calculateMultiCheckedValue()):this.checkedValue=i?[]:null}}},Fu,[],!1,null,null,null);rd.options.__file="packages/cascader-panel/src/cascader-panel.vue";var od=rd.exports;od.install=function(e){e.component(od.name,od)};var ad=od,sd=r({name:"ElAvatar",props:{size:{type:[Number,String],validator:function(e){return"string"==typeof e?["large","medium","small"].includes(e):"number"==typeof e}},shape:{type:String,default:"circle",validator:function(e){return["circle","square"].includes(e)}},icon:String,src:String,alt:String,srcSet:String,error:Function,fit:{type:String,default:"cover"}},data:function(){return{isImageExist:!0}},computed:{avatarClass:function(){var e=this.size,n=this.icon,t=this.shape,i=["el-avatar"];return e&&"string"==typeof e&&i.push("el-avatar--"+e),n&&i.push("el-avatar--icon"),t&&i.push("el-avatar--"+t),i.join(" ")}},methods:{handleError:function(){var e=this.error;!1!==(e?e():void 0)&&(this.isImageExist=!1)},renderAvatar:function(){var e=this.$createElement,n=this.icon,t=this.src,i=this.alt,r=this.isImageExist,o=this.srcSet,a=this.fit;return r&&t?e("img",{attrs:{src:t,alt:i,srcSet:o},on:{error:this.handleError},style:{"object-fit":a}}):n?e("i",{class:n}):this.$slots.default}},render:function(){var e=arguments[0],n=this.avatarClass,t=this.size,i="number"==typeof t?{height:t+"px",width:t+"px",lineHeight:t+"px"}:{};return e("span",{class:n,style:i},[this.renderAvatar()])}},void 0,void 0,!1,null,null,null);sd.options.__file="packages/avatar/src/main.vue";var ld=sd.exports;ld.install=function(e){e.component(ld.name,ld)};var cd=ld,ud=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("transition",{attrs:{name:"el-drawer-fade"},on:{"after-enter":e.afterEnter,"after-leave":e.afterLeave}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-drawer__wrapper",attrs:{tabindex:"-1"}},[t("div",{staticClass:"el-drawer__container",class:e.visible&&"el-drawer__open",attrs:{role:"document",tabindex:"-1"},on:{click:function(n){return n.target!==n.currentTarget?null:e.handleWrapperClick(n)}}},[t("div",{ref:"drawer",staticClass:"el-drawer",class:[e.direction,e.customClass],style:e.isHorizontal?"width: "+e.drawerSize:"height: "+e.drawerSize,attrs:{"aria-modal":"true","aria-labelledby":"el-drawer__title","aria-label":e.title,role:"dialog",tabindex:"-1"}},[e.withHeader?t("header",{staticClass:"el-drawer__header",attrs:{id:"el-drawer__title"}},[e._t("title",[t("span",{attrs:{role:"heading",title:e.title}},[e._v(e._s(e.title))])]),e.showClose?t("button",{staticClass:"el-drawer__close-btn",attrs:{"aria-label":"close "+(e.title||"drawer"),type:"button"},on:{click:e.closeDrawer}},[t("i",{staticClass:"el-dialog__close el-icon el-icon-close"})]):e._e()],2):e._e(),e.rendered?t("section",{staticClass:"el-drawer__body"},[e._t("default")],2):e._e()])])])])};ud._withStripped=!0;var dd=r({name:"ElDrawer",mixins:[w.a,k.a],props:{appendToBody:{type:Boolean,default:!1},beforeClose:{type:Function},customClass:{type:String,default:""},closeOnPressEscape:{type:Boolean,default:!0},destroyOnClose:{type:Boolean,default:!1},modal:{type:Boolean,default:!0},direction:{type:String,default:"rtl",validator:function(e){return-1!==["ltr","rtl","ttb","btt"].indexOf(e)}},modalAppendToBody:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},size:{type:[Number,String],default:"30%"},title:{type:String,default:""},visible:{type:Boolean},wrapperClosable:{type:Boolean,default:!0},withHeader:{type:Boolean,default:!0}},computed:{isHorizontal:function(){return"rtl"===this.direction||"ltr"===this.direction},drawerSize:function(){return"number"==typeof this.size?this.size+"px":this.size}},data:function(){return{closed:!1,prevActiveElement:null}},watch:{visible:function(e){var n=this;e?(this.closed=!1,this.$emit("open"),this.appendToBody&&document.body.appendChild(this.$el),this.prevActiveElement=document.activeElement):(this.closed||this.$emit("close"),this.$nextTick((function(){n.prevActiveElement&&n.prevActiveElement.focus()})))}},methods:{afterEnter:function(){this.$emit("opened")},afterLeave:function(){this.$emit("closed")},hide:function(e){!1!==e&&(this.$emit("update:visible",!1),this.$emit("close"),!0===this.destroyOnClose&&(this.rendered=!1),this.closed=!0)},handleWrapperClick:function(){this.wrapperClosable&&this.closeDrawer()},closeDrawer:function(){"function"==typeof this.beforeClose?this.beforeClose(this.hide):this.hide()},handleClose:function(){this.closeDrawer()}},mounted:function(){this.visible&&(this.rendered=!0,this.open())},destroyed:function(){this.appendToBody&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}},ud,[],!1,null,null,null);dd.options.__file="packages/drawer/src/main.vue";var hd=dd.exports;hd.install=function(e){e.component(hd.name,hd)};var pd=hd,fd=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("el-popover",e._b({attrs:{trigger:"click"},model:{value:e.visible,callback:function(n){e.visible=n},expression:"visible"}},"el-popover",e.$attrs,!1),[t("div",{staticClass:"el-popconfirm"},[t("p",{staticClass:"el-popconfirm__main"},[e.hideIcon?e._e():t("i",{staticClass:"el-popconfirm__icon",class:e.icon,style:{color:e.iconColor}}),e._v("\n      "+e._s(e.title)+"\n    ")]),t("div",{staticClass:"el-popconfirm__action"},[t("el-button",{attrs:{size:"mini",type:e.cancelButtonType},on:{click:e.cancel}},[e._v("\n        "+e._s(e.displayCancelButtonText)+"\n      ")]),t("el-button",{attrs:{size:"mini",type:e.confirmButtonType},on:{click:e.confirm}},[e._v("\n        "+e._s(e.displayConfirmButtonText)+"\n      ")])],1)]),e._t("reference",null,{slot:"reference"})],2)};fd._withStripped=!0;var md=t(44),gd=r({name:"ElPopconfirm",props:{title:{type:String},confirmButtonText:{type:String},cancelButtonText:{type:String},confirmButtonType:{type:String,default:"primary"},cancelButtonType:{type:String,default:"text"},icon:{type:String,default:"el-icon-question"},iconColor:{type:String,default:"#f90"},hideIcon:{type:Boolean,default:!1}},components:{ElPopover:t.n(md).a,ElButton:U.a},data:function(){return{visible:!1}},computed:{displayConfirmButtonText:function(){return this.confirmButtonText||Object(Mr.t)("el.popconfirm.confirmButtonText")},displayCancelButtonText:function(){return this.cancelButtonText||Object(Mr.t)("el.popconfirm.cancelButtonText")}},methods:{confirm:function(){this.visible=!1,this.$emit("confirm")},cancel:function(){this.visible=!1,this.$emit("cancel")}}},fd,[],!1,null,null,null);gd.options.__file="packages/popconfirm/src/main.vue";var vd=gd.exports;vd.install=function(e){e.component(vd.name,vd)};var bd=vd,yd=[v,T,H,X,ne,oe,ve,ke,Ae,Me,Ue,Xe,nn,sn,dn,mn,yn,Sn,Tn,qn,Hn,Yn,Qn,tt,ii,ui,sr,mr,kr,Ar,Ir,to,ao,uo,yo,Po,Io,Lo,Zo,ra,ka,za,Ha,Ja,ls,hs,gs,As,Ms,Rs,qs,Js,Zs,rl,ll,hl,gl,Pl,rc,dc,mc,yc,Sc,Tc,jc,Mc,Fc,zc,Uc,cu,yu,ku,$u,ad,cd,pd,bd,ye.a],wd=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Lr.a.use(n.locale),Lr.a.i18n(n.i18n),yd.forEach((function(n){e.component(n.name,n)})),e.use(Du),e.use(Fa.directive),e.prototype.$ELEMENT={size:n.size||"",zIndex:n.zIndex||2e3},e.prototype.$loading=Fa.service,e.prototype.$msgbox=Qr,e.prototype.$alert=Qr.alert,e.prototype.$confirm=Qr.confirm,e.prototype.$prompt=Qr.prompt,e.prototype.$notify=fa,e.prototype.$message=Es};"undefined"!=typeof window&&window.Vue&&wd(window.Vue);n.default={version:"2.15.1",locale:Lr.a.use,i18n:Lr.a.i18n,install:wd,CollapseTransition:ye.a,Loading:Fa,Pagination:v,Dialog:T,Autocomplete:H,Dropdown:X,DropdownMenu:ne,DropdownItem:oe,Menu:ve,Submenu:ke,MenuItem:Ae,MenuItemGroup:Me,Input:Ue,InputNumber:Xe,Radio:nn,RadioGroup:sn,RadioButton:dn,Checkbox:mn,CheckboxButton:yn,CheckboxGroup:Sn,Switch:Tn,Select:qn,Option:Hn,OptionGroup:Yn,Button:Qn,ButtonGroup:tt,Table:ii,TableColumn:ui,DatePicker:sr,TimeSelect:mr,TimePicker:kr,Popover:Ar,Tooltip:Ir,MessageBox:Qr,Breadcrumb:to,BreadcrumbItem:ao,Form:uo,FormItem:yo,Tabs:Po,TabPane:Io,Tag:Lo,Tree:Zo,Alert:ra,Notification:fa,Slider:ka,Icon:za,Row:Ha,Col:Ja,Upload:ls,Progress:hs,Spinner:gs,Message:Es,Badge:As,Card:Ms,Rate:Rs,Steps:qs,Step:Js,Carousel:Zs,Scrollbar:rl,CarouselItem:ll,Collapse:hl,CollapseItem:gl,Cascader:Pl,ColorPicker:rc,Transfer:dc,Container:mc,Header:yc,Aside:Sc,Main:Tc,Footer:jc,Timeline:Mc,TimelineItem:Fc,Link:zc,Divider:Uc,Image:cu,Calendar:yu,Backtop:ku,InfiniteScroll:Du,PageHeader:$u,CascaderPanel:ad,Avatar:cd,Drawer:pd,Popconfirm:bd}}]).default},function(e,n,t){n.formatArgs=function(n){if(n[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+n[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const t="color: "+this.color;n.splice(1,0,t,"color: inherit");let i=0,r=0;n[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(i++,"%c"===e&&(r=i))}),n.splice(r,0,t)},n.save=function(e){try{e?n.storage.setItem("debug",e):n.storage.removeItem("debug")}catch(e){}},n.load=function(){let e;try{e=n.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},n.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},n.storage=function(){try{return localStorage}catch(e){}}(),n.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],n.log=console.debug||console.log||(()=>{}),e.exports=t(560)(n);const{formatters:i}=e.exports;i.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},function(e,n,t){function i(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=i=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=i=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),i(n)}t(56),t(74),t(17),t(102),t(22),t(29),e.exports=i,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n,t){"use strict";var i=t(3),r=t(148).includes,o=t(124);i({target:"Array",proto:!0},{includes:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),o("includes")},function(e,n,t){"use strict";var i=t(3),r=t(254),o=t(21);i({target:"String",proto:!0,forced:!t(256)("includes")},{includes:function(e){return!!~String(o(this)).indexOf(r(e),arguments.length>1?arguments[1]:void 0)}})},function(e,n,t){var i=t(395),r=t(445),o=t(125),a=t(32),s=t(455);e.exports=function(e){return"function"==typeof e?e:null==e?o:"object"==typeof e?a(e)?r(e[0],e[1]):i(e):s(e)}},function(e,n,t){var i=t(192),r=t(32);e.exports=function(e,n,t){var o=n(e);return r(e)?o:i(o,t(e))}},function(e,n,t){var i=t(432),r=t(322),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(e){return null==e?[]:(e=Object(e),i(a(e),(function(n){return o.call(e,n)})))}:r;e.exports=s},function(e,n){e.exports=function(){return[]}},function(e,n,t){var i=t(433),r=t(156),o=t(32),a=t(275),s=t(194),l=t(277),c=Object.prototype.hasOwnProperty;e.exports=function(e,n){var t=o(e),u=!t&&r(e),d=!t&&!u&&a(e),h=!t&&!u&&!d&&l(e),p=t||u||d||h,f=p?i(e.length,String):[],m=f.length;for(var g in e)!n&&!c.call(e,g)||p&&("length"==g||d&&("offset"==g||"parent"==g)||h&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,m))||f.push(g);return f}},function(e,n){var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},function(e,n){e.exports=function(e,n){return function(t){return e(n(t))}}},function(e,n){e.exports=function(e,n){for(var t=-1,i=null==e?0:e.length,r=Array(i);++t<i;)r[t]=n(e[t],t,e);return r}},function(e,n,t){var i=t(44),r=function(){try{var e=i(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=r},function(e,n,t){"use strict";var i=t(12),r=t(9),o=t(242),a=t(36),s=t(14),l=t(41),c=t(476),u=t(68),d=t(5),h=t(54),p=t(95).f,f=t(42).f,m=t(16).f,g=t(281).trim,v=r.Number,b=v.prototype,y="Number"==l(h(b)),w=function(e){var n,t,i,r,o,a,s,l,c=u(e,!1);if("string"==typeof c&&c.length>2)if(43===(n=(c=g(c)).charCodeAt(0))||45===n){if(88===(t=c.charCodeAt(2))||120===t)return NaN}else if(48===n){switch(c.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+c}for(a=(o=c.slice(2)).length,s=0;s<a;s++)if((l=o.charCodeAt(s))<48||l>r)return NaN;return parseInt(o,i)}return+c};if(o("Number",!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var x,_=function(e){var n=arguments.length<1?0:e,t=this;return t instanceof _&&(y?d((function(){b.valueOf.call(t)})):"Number"!=l(t))?c(new v(w(n)),t,_):w(n)},S=i?p(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),k=0;S.length>k;k++)s(v,x=S[k])&&!s(_,x)&&m(_,x,f(v,x));_.prototype=b,b.constructor=_,a(r,"Number",_)}},function(e,n,t){var i=t(3),r=t(9),o=t(232),a=[].slice,s=function(e){return function(n,t){var i=arguments.length>2,r=i?a.call(arguments,2):void 0;return e(i?function(){("function"==typeof n?n:Function(n)).apply(this,r)}:n,t)}};i({global:!0,bind:!0,forced:/MSIE .\./.test(o)},{setTimeout:s(r.setTimeout),setInterval:s(r.setInterval)})},function(e,n,t){},function(e,n,t){var i=t(36),r=Date.prototype,o=r.toString,a=r.getTime;new Date(NaN)+""!="Invalid Date"&&i(r,"toString",(function(){var e=a.call(this);return e==e?o.call(this):"Invalid Date"}))},function(e,n,t){e.exports=t(570)},function(e,n,t){"use strict";var i=t(63),r=t(334),o=t(66),a=t(137),s=t(342),l=a.set,c=a.getterFor("Array Iterator");e.exports=s(Array,"Array",(function(e,n){l(this,{type:"Array Iterator",target:i(e),index:0,kind:n})}),(function(){var e=c(this),n=e.target,t=e.kind,i=e.index++;return!n||i>=n.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==t?{value:i,done:!1}:"values"==t?{value:n[i],done:!1}:{value:[i,n[i]],done:!1}}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,n,t){var i=t(15),r=t(130),o=t(52),a=i("unscopables"),s=Array.prototype;null==s[a]&&o.f(s,a,{configurable:!0,value:r(null)}),e.exports=function(e){s[a][e]=!0}},function(e,n,t){var i=t(35),r=t(52),o=t(24),a=t(63),s=t(209);e.exports=i?Object.defineProperties:function(e,n){o(e);for(var t,i=a(n),l=s(n),c=l.length,u=0;c>u;)r.f(e,t=l[u++],i[t]);return e}},function(e,n,t){var i=t(4),r=t(30),o=t(40),a=t(208),s=t(133),l=t(337),c=t(15),u=i.TypeError,d=c("toPrimitive");e.exports=function(e,n){if(!o(e)||a(e))return e;var t,i=s(e,d);if(i){if(void 0===n&&(n="default"),t=r(i,e,n),!o(t)||a(t))return t;throw u("Can't convert object to primitive value")}return void 0===n&&(n="number"),l(e,n)}},function(e,n,t){var i=t(4),r=t(30),o=t(8),a=t(40),s=i.TypeError;e.exports=function(e,n){var t,i;if("string"===n&&o(t=e.toString)&&!a(i=r(t,e)))return i;if(o(t=e.valueOf)&&!a(i=r(t,e)))return i;if("string"!==n&&o(t=e.toString)&&!a(i=r(t,e)))return i;throw s("Can't convert object to primitive value")}},function(e,n,t){var i=t(63),r=t(339),o=t(212),a=function(e){return function(n,t,a){var s,l=i(n),c=o(l),u=r(a,c);if(e&&t!=t){for(;c>u;)if((s=l[u++])!=s)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===t)return e||u||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},function(e,n,t){var i=t(211),r=Math.max,o=Math.min;e.exports=function(e,n){var t=i(e);return t<0?r(t+n,0):o(t,n)}},function(e,n,t){var i=t(211),r=Math.min;e.exports=function(e){return e>0?r(i(e),9007199254740991):0}},function(e,n,t){var i=t(4),r=t(8),o=t(86),a=i.WeakMap;e.exports=r(a)&&/native code/.test(o(a))},function(e,n,t){"use strict";var i=t(88),r=t(30),o=t(64),a=t(215),s=t(8),l=t(346),c=t(219),u=t(220),d=t(140),h=t(87),p=t(53),f=t(15),m=t(66),g=t(218),v=a.PROPER,b=a.CONFIGURABLE,y=g.IteratorPrototype,w=g.BUGGY_SAFARI_ITERATORS,x=f("iterator"),_=function(){return this};e.exports=function(e,n,t,a,f,g,S){l(t,n,a);var k,C,E,T=function(e){if(e===f&&I)return I;if(!w&&e in A)return A[e];switch(e){case"keys":case"values":case"entries":return function(){return new t(this,e)}}return function(){return new t(this)}},P=n+" Iterator",O=!1,A=e.prototype,j=A[x]||A["@@iterator"]||f&&A[f],I=!w&&j||T(f),D="Array"==n&&A.entries||j;if(D&&(k=c(D.call(new e)))!==Object.prototype&&k.next&&(o||c(k)===y||(u?u(k,y):s(k[x])||p(k,x,_)),d(k,P,!0,!0),o&&(m[P]=_)),v&&"values"==f&&j&&"values"!==j.name&&(!o&&b?h(A,"name","values"):(O=!0,I=function(){return r(j,this)})),f)if(C={values:T("values"),keys:g?I:T("keys"),entries:T("entries")},S)for(E in C)(w||O||!(E in A))&&p(A,E,C[E]);else i({target:n,proto:!0,forced:w||O},C);return o&&!S||A[x]===I||p(A,x,I,{name:f}),m[n]=I,C}},function(e,n,t){var i=t(23),r=t(344),o=t(139),a=t(52);e.exports=function(e,n){for(var t=r(n),s=a.f,l=o.f,c=0;c<t.length;c++){var u=t[c];i(e,u)||s(e,u,l(n,u))}}},function(e,n,t){var i=t(34),r=t(13),o=t(345),a=t(216),s=t(24),l=r([].concat);e.exports=i("Reflect","ownKeys")||function(e){var n=o.f(s(e)),t=a.f;return t?l(n,t(e)):n}},function(e,n,t){var i=t(210),r=t(135).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},function(e,n,t){"use strict";var i=t(218).IteratorPrototype,r=t(130),o=t(138),a=t(140),s=t(66),l=function(){return this};e.exports=function(e,n,t,c){var u=n+" Iterator";return e.prototype=r(i,{next:o(+!c,t)}),a(e,u,!1,!0),s[u]=l,e}},function(e,n,t){var i=t(19);e.exports=!i((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},function(e,n,t){var i=t(4),r=t(8),o=i.String,a=i.TypeError;e.exports=function(e){if("object"==typeof e||r(e))return e;throw a("Can't set "+o(e)+" as a prototype")}},function(e,n,t){"use strict";var i,r,o,a,s=t(88),l=t(64),c=t(4),u=t(34),d=t(30),h=t(221),p=t(53),f=t(350),m=t(220),g=t(140),v=t(351),b=t(65),y=t(8),w=t(40),x=t(352),_=t(86),S=t(353),k=t(358),C=t(224),E=t(225).set,T=t(363),P=t(227),O=t(366),A=t(228),j=t(367),I=t(137),D=t(217),M=t(15),L=t(368),N=t(142),$=t(204),F=M("species"),R="Promise",B=I.getterFor(R),V=I.set,z=I.getterFor(R),q=h&&h.prototype,H=h,W=q,U=c.TypeError,J=c.document,Y=c.process,G=A.f,K=G,X=!!(J&&J.createEvent&&c.dispatchEvent),Q=y(c.PromiseRejectionEvent),Z=!1,ee=D(R,(function(){var e=_(H),n=e!==String(H);if(!n&&66===$)return!0;if(l&&!W.finally)return!0;if($>=51&&/native code/.test(e))return!1;var t=new H((function(e){e(1)})),i=function(e){e((function(){}),(function(){}))};return(t.constructor={})[F]=i,!(Z=t.then((function(){}))instanceof i)||!n&&L&&!Q})),ne=ee||!k((function(e){H.all(e).catch((function(){}))})),te=function(e){var n;return!(!w(e)||!y(n=e.then))&&n},ie=function(e,n){if(!e.notified){e.notified=!0;var t=e.reactions;T((function(){for(var i=e.value,r=1==e.state,o=0;t.length>o;){var a,s,l,c=t[o++],u=r?c.ok:c.fail,h=c.resolve,p=c.reject,f=c.domain;try{u?(r||(2===e.rejection&&se(e),e.rejection=1),!0===u?a=i:(f&&f.enter(),a=u(i),f&&(f.exit(),l=!0)),a===c.promise?p(U("Promise-chain cycle")):(s=te(a))?d(s,a,h,p):h(a)):p(i)}catch(e){f&&!l&&f.exit(),p(e)}}e.reactions=[],e.notified=!1,n&&!e.rejection&&oe(e)}))}},re=function(e,n,t){var i,r;X?((i=J.createEvent("Event")).promise=n,i.reason=t,i.initEvent(e,!1,!0),c.dispatchEvent(i)):i={promise:n,reason:t},!Q&&(r=c["on"+e])?r(i):"unhandledrejection"===e&&O("Unhandled promise rejection",t)},oe=function(e){d(E,c,(function(){var n,t=e.facade,i=e.value;if(ae(e)&&(n=j((function(){N?Y.emit("unhandledRejection",i,t):re("unhandledrejection",t,i)})),e.rejection=N||ae(e)?2:1,n.error))throw n.value}))},ae=function(e){return 1!==e.rejection&&!e.parent},se=function(e){d(E,c,(function(){var n=e.facade;N?Y.emit("rejectionHandled",n):re("rejectionhandled",n,e.value)}))},le=function(e,n,t){return function(i){e(n,i,t)}},ce=function(e,n,t){e.done||(e.done=!0,t&&(e=t),e.value=n,e.state=2,ie(e,!0))},ue=function(e,n,t){if(!e.done){e.done=!0,t&&(e=t);try{if(e.facade===n)throw U("Promise can't be resolved itself");var i=te(n);i?T((function(){var t={done:!1};try{d(i,n,le(ue,t,e),le(ce,t,e))}catch(n){ce(t,n,e)}})):(e.value=n,e.state=1,ie(e,!1))}catch(n){ce({done:!1},n,e)}}};if(ee&&(W=(H=function(e){x(this,W),b(e),d(i,this);var n=B(this);try{e(le(ue,n),le(ce,n))}catch(e){ce(n,e)}}).prototype,(i=function(e){V(this,{type:R,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=f(W,{then:function(e,n){var t=z(this),i=t.reactions,r=G(C(this,H));return r.ok=!y(e)||e,r.fail=y(n)&&n,r.domain=N?Y.domain:void 0,t.parent=!0,i[i.length]=r,0!=t.state&&ie(t,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),r=function(){var e=new i,n=B(e);this.promise=e,this.resolve=le(ue,n),this.reject=le(ce,n)},A.f=G=function(e){return e===H||e===o?new r(e):K(e)},!l&&y(h)&&q!==Object.prototype)){a=q.then,Z||(p(q,"then",(function(e,n){var t=this;return new H((function(e,n){d(a,t,e,n)})).then(e,n)}),{unsafe:!0}),p(q,"catch",W.catch,{unsafe:!0}));try{delete q.constructor}catch(e){}m&&m(q,W)}s({global:!0,wrap:!0,forced:ee},{Promise:H}),g(H,R,!1,!0),v(R),o=u(R),s({target:R,stat:!0,forced:ee},{reject:function(e){var n=G(this);return d(n.reject,void 0,e),n.promise}}),s({target:R,stat:!0,forced:l||ee},{resolve:function(e){return P(l&&this===o?H:this,e)}}),s({target:R,stat:!0,forced:ne},{all:function(e){var n=this,t=G(n),i=t.resolve,r=t.reject,o=j((function(){var t=b(n.resolve),o=[],a=0,s=1;S(e,(function(e){var l=a++,c=!1;s++,d(t,n,e).then((function(e){c||(c=!0,o[l]=e,--s||i(o))}),r)})),--s||i(o)}));return o.error&&r(o.value),t.promise},race:function(e){var n=this,t=G(n),i=t.reject,r=j((function(){var r=b(n.resolve);S(e,(function(e){d(r,n,e).then(t.resolve,i)}))}));return r.error&&i(r.value),t.promise}})},function(e,n,t){var i=t(53);e.exports=function(e,n,t){for(var r in n)i(e,r,n[r],t);return e}},function(e,n,t){"use strict";var i=t(34),r=t(52),o=t(15),a=t(35),s=o("species");e.exports=function(e){var n=i(e),t=r.f;a&&n&&!n[s]&&t(n,s,{configurable:!0,get:function(){return this}})}},function(e,n,t){var i=t(4),r=t(132),o=i.TypeError;e.exports=function(e,n){if(r(n,e))return e;throw o("Incorrect invocation")}},function(e,n,t){var i=t(4),r=t(141),o=t(30),a=t(24),s=t(85),l=t(354),c=t(212),u=t(132),d=t(355),h=t(222),p=t(357),f=i.TypeError,m=function(e,n){this.stopped=e,this.result=n},g=m.prototype;e.exports=function(e,n,t){var i,v,b,y,w,x,_,S=t&&t.that,k=!(!t||!t.AS_ENTRIES),C=!(!t||!t.IS_ITERATOR),E=!(!t||!t.INTERRUPTED),T=r(n,S),P=function(e){return i&&p(i,"normal",e),new m(!0,e)},O=function(e){return k?(a(e),E?T(e[0],e[1],P):T(e[0],e[1])):E?T(e,P):T(e)};if(C)i=e;else{if(!(v=h(e)))throw f(s(e)+" is not iterable");if(l(v)){for(b=0,y=c(e);y>b;b++)if((w=O(e[b]))&&u(g,w))return w;return new m(!1)}i=d(e,v)}for(x=i.next;!(_=o(x,i)).done;){try{w=O(_.value)}catch(e){p(i,"throw",e)}if("object"==typeof w&&w&&u(g,w))return w}return new m(!1)}},function(e,n,t){var i=t(15),r=t(66),o=i("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||a[o]===e)}},function(e,n,t){var i=t(4),r=t(30),o=t(65),a=t(24),s=t(85),l=t(222),c=i.TypeError;e.exports=function(e,n){var t=arguments.length<2?l(e):n;if(o(t))return a(r(t,e));throw c(s(e)+" is not iterable")}},function(e,n,t){var i={};i[t(15)("toStringTag")]="z",e.exports="[object z]"===String(i)},function(e,n,t){var i=t(30),r=t(24),o=t(133);e.exports=function(e,n,t){var a,s;r(e);try{if(!(a=o(e,"return"))){if("throw"===n)throw t;return t}a=i(a,e)}catch(e){s=!0,a=e}if("throw"===n)throw t;if(s)throw a;return r(a),t}},function(e,n,t){var i=t(15)("iterator"),r=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){r=!0}};a[i]=function(){return this},Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,n){if(!n&&!r)return!1;var t=!1;try{var o={};o[i]=function(){return{next:function(){return{done:t=!0}}}},e(o)}catch(e){}return t}},function(e,n,t){var i=t(4),r=t(360),o=t(85),a=i.TypeError;e.exports=function(e){if(r(e))return e;throw a(o(e)+" is not a constructor")}},function(e,n,t){var i=t(13),r=t(19),o=t(8),a=t(223),s=t(34),l=t(86),c=function(){},u=[],d=s("Reflect","construct"),h=/^\s*(?:class|function)\b/,p=i(h.exec),f=!h.exec(c),m=function(e){if(!o(e))return!1;try{return d(c,u,e),!0}catch(e){return!1}};e.exports=!d||r((function(){var e;return m(m.call)||!m(Object)||!m((function(){e=!0}))||e}))?function(e){if(!o(e))return!1;switch(a(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return f||!!p(h,l(e))}:m},function(e,n){var t=Function.prototype,i=t.apply,r=t.bind,o=t.call;e.exports="object"==typeof Reflect&&Reflect.apply||(r?o.bind(i):function(){return o.apply(i,arguments)})},function(e,n,t){var i=t(13);e.exports=i([].slice)},function(e,n,t){var i,r,o,a,s,l,c,u,d=t(4),h=t(141),p=t(139).f,f=t(225).set,m=t(226),g=t(364),v=t(365),b=t(142),y=d.MutationObserver||d.WebKitMutationObserver,w=d.document,x=d.process,_=d.Promise,S=p(d,"queueMicrotask"),k=S&&S.value;k||(i=function(){var e,n;for(b&&(e=x.domain)&&e.exit();r;){n=r.fn,r=r.next;try{n()}catch(e){throw r?a():o=void 0,e}}o=void 0,e&&e.enter()},m||b||v||!y||!w?!g&&_&&_.resolve?((c=_.resolve(void 0)).constructor=_,u=h(c.then,c),a=function(){u(i)}):b?a=function(){x.nextTick(i)}:(f=h(f,d),a=function(){f(i)}):(s=!0,l=w.createTextNode(""),new y(i).observe(l,{characterData:!0}),a=function(){l.data=s=!s})),e.exports=k||function(e){var n={fn:e,next:void 0};o&&(o.next=n),r||(r=n,a()),o=n}},function(e,n,t){var i=t(84),r=t(4);e.exports=/ipad|iphone|ipod/i.test(i)&&void 0!==r.Pebble},function(e,n,t){var i=t(84);e.exports=/web0s(?!.*chrome)/i.test(i)},function(e,n,t){var i=t(4);e.exports=function(e,n){var t=i.console;t&&t.error&&(1==arguments.length?t.error(e):t.error(e,n))}},function(e,n){e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},function(e,n){e.exports="object"==typeof window},function(e,n,t){var i=t(88),r=t(370);i({target:"Object",stat:!0,forced:Object.assign!==r},{assign:r})},function(e,n,t){"use strict";var i=t(35),r=t(13),o=t(30),a=t(19),s=t(209),l=t(216),c=t(214),u=t(129),d=t(199),h=Object.assign,p=Object.defineProperty,f=r([].concat);e.exports=!h||a((function(){if(i&&1!==h({b:1},h(p({},"a",{enumerable:!0,get:function(){p(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},n={},t=Symbol();return e[t]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),7!=h({},e)[t]||"abcdefghijklmnopqrst"!=s(h({},n)).join("")}))?function(e,n){for(var t=u(e),r=arguments.length,a=1,h=l.f,p=c.f;r>a;)for(var m,g=d(arguments[a++]),v=h?f(s(g),h(g)):s(g),b=v.length,y=0;b>y;)m=v[y++],i&&!o(p,g,m)||(t[m]=g[m]);return t}:h},function(e,n,t){"use strict";var i=t(88),r=t(64),o=t(221),a=t(19),s=t(34),l=t(8),c=t(224),u=t(227),d=t(53);if(i({target:"Promise",proto:!0,real:!0,forced:!!o&&a((function(){o.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var n=c(this,s("Promise")),t=l(e);return this.then(t?function(t){return u(n,e()).then((function(){return t}))}:e,t?function(t){return u(n,e()).then((function(){throw t}))}:e)}}),!r&&l(o)){var h=s("Promise").prototype.finally;o.prototype.finally!==h&&d(o.prototype,"finally",h,{unsafe:!0})}},function(e,n,t){var i=t(9),r=t(235),o=i.WeakMap;e.exports="function"==typeof o&&/native code/.test(r(o))},function(e,n,t){"use strict";var i=t(143),r=t(236);e.exports=i?{}.toString:function(){return"[object "+r(this)+"]"}},function(e,n,t){"use strict";var i=t(245).IteratorPrototype,r=t(54),o=t(69),a=t(151),s=t(73),l=function(){return this};e.exports=function(e,n,t){var c=n+" Iterator";return e.prototype=r(i,{next:o(1,t)}),a(e,c,!1,!0),s[c]=l,e}},function(e,n,t){var i=t(70);e.exports=i("document","documentElement")},function(e,n,t){var i=t(10);e.exports=function(e){if(!i(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},function(e,n,t){"use strict";var i=t(20),r=t(124),o=t(73),a=t(92),s=t(244),l=a.set,c=a.getterFor("Array Iterator");e.exports=s(Array,"Array",(function(e,n){l(this,{type:"Array Iterator",target:i(e),index:0,kind:n})}),(function(){var e=c(this),n=e.target,t=e.kind,i=e.index++;return!n||i>=n.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==t?{value:i,done:!1}:"values"==t?{value:n[i],done:!1}:{value:[i,n[i]],done:!1}}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,n,t){var i=t(55),r=t(26),o=t(94),a=t(28),s=function(e){return function(n,t,s,l){i(t);var c=r(n),u=o(c),d=a(c.length),h=e?d-1:0,p=e?-1:1;if(s<2)for(;;){if(h in u){l=u[h],h+=p;break}if(h+=p,e?h<0:d<=h)throw TypeError("Reduce of empty array with no initial value")}for(;e?h>=0:d>h;h+=p)h in u&&(l=t(l,u[h],h,c));return l}};e.exports={left:s(!1),right:s(!0)}},function(e,n,t){"use strict";var i,r=t(3),o=t(42).f,a=t(28),s=t(254),l=t(21),c=t(256),u=t(67),d="".startsWith,h=Math.min,p=c("startsWith");r({target:"String",proto:!0,forced:!!(u||p||(i=o(String.prototype,"startsWith"),!i||i.writable))&&!p},{startsWith:function(e){var n=String(l(this));s(e);var t=a(h(arguments.length>1?arguments[1]:void 0,n.length)),i=String(e);return d?d.call(n,i,t):n.slice(t,t+i.length)===i}})},function(e,n,t){var i=t(3),r=t(258),o=t(5),a=t(10),s=t(381).onFreeze,l=Object.freeze;i({target:"Object",stat:!0,forced:o((function(){l(1)})),sham:!r},{freeze:function(e){return l&&a(e)?l(s(e)):e}})},function(e,n,t){var i=t(71),r=t(10),o=t(14),a=t(16).f,s=t(90),l=t(258),c=s("meta"),u=0,d=Object.isExtensible||function(){return!0},h=function(e){a(e,c,{value:{objectID:"O"+ ++u,weakData:{}}})},p=e.exports={REQUIRED:!1,fastKey:function(e,n){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,c)){if(!d(e))return"F";if(!n)return"E";h(e)}return e[c].objectID},getWeakData:function(e,n){if(!o(e,c)){if(!d(e))return!0;if(!n)return!1;h(e)}return e[c].weakData},onFreeze:function(e){return l&&p.REQUIRED&&d(e)&&!o(e,c)&&h(e),e}};i[c]=!0},function(e,n,t){var i=t(20),r=t(95).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?function(e){try{return r(e)}catch(e){return a.slice()}}(e):r(i(e))}},function(e,n,t){"use strict";var i=t(249),r=t(26),o=t(384),a=t(386),s=t(28),l=t(97),c=t(387);e.exports=function(e){var n,t,u,d,h,p,f=r(e),m="function"==typeof this?this:Array,g=arguments.length,v=g>1?arguments[1]:void 0,b=void 0!==v,y=c(f),w=0;if(b&&(v=i(v,g>2?arguments[2]:void 0,2)),null==y||m==Array&&a(y))for(t=new m(n=s(f.length));n>w;w++)p=b?v(f[w],w):f[w],l(t,w,p);else for(h=(d=y.call(f)).next,t=new m;!(u=h.call(d)).done;w++)p=b?o(d,v,[u.value,w],!0):u.value,l(t,w,p);return t.length=w,t}},function(e,n,t){var i=t(11),r=t(385);e.exports=function(e,n,t,o){try{return o?n(i(t)[0],t[1]):n(t)}catch(n){throw r(e),n}}},function(e,n,t){var i=t(11);e.exports=function(e){var n=e.return;if(void 0!==n)return i(n.call(e)).value}},function(e,n,t){var i=t(6),r=t(73),o=i("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||a[o]===e)}},function(e,n,t){var i=t(236),r=t(73),o=t(6)("iterator");e.exports=function(e){if(null!=e)return e[o]||e["@@iterator"]||r[i(e)]}},function(e,n,t){var i=t(6)("iterator"),r=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){r=!0}};a[i]=function(){return this},Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,n){if(!n&&!r)return!1;var t=!1;try{var o={};o[i]=function(){return{next:function(){return{done:t=!0}}}},e(o)}catch(e){}return t}},function(e,n,t){var i=t(26),r=Math.floor,o="".replace,a=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,s=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,n,t,l,c,u){var d=t+e.length,h=l.length,p=s;return void 0!==c&&(c=i(c),p=a),o.call(u,p,(function(i,o){var a;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,t);case"'":return n.slice(d);case"<":a=c[o.slice(1,-1)];break;default:var s=+o;if(0===s)return i;if(s>h){var u=r(s/10);return 0===u?i:u<=h?void 0===l[u-1]?o.charAt(1):l[u-1]+o.charAt(1):i}a=l[s-1]}return void 0===a?"":a}))}},function(e,n,t){var i=t(192),r=t(391);e.exports=function e(n,t,o,a,s){var l=-1,c=n.length;for(o||(o=r),s||(s=[]);++l<c;){var u=n[l];t>0&&o(u)?t>1?e(u,t-1,o,a,s):i(s,u):a||(s[s.length]=u)}return s}},function(e,n,t){var i=t(75),r=t(156),o=t(32),a=i?i.isConcatSpreadable:void 0;e.exports=function(e){return o(e)||r(e)||!!(a&&e&&e[a])}},function(e,n,t){var i=t(76),r=t(57);e.exports=function(e){return r(e)&&"[object Arguments]"==i(e)}},function(e,n,t){var i=t(75),r=Object.prototype,o=r.hasOwnProperty,a=r.toString,s=i?i.toStringTag:void 0;e.exports=function(e){var n=o.call(e,s),t=e[s];try{e[s]=void 0;var i=!0}catch(e){}var r=a.call(e);return i&&(n?e[s]=t:delete e[s]),r}},function(e,n){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},function(e,n,t){var i=t(396),r=t(444),o=t(280);e.exports=function(e){var n=r(e);return 1==n.length&&n[0][2]?o(n[0][0],n[0][1]):function(t){return t===e||i(t,e,n)}}},function(e,n,t){var i=t(267),r=t(270);e.exports=function(e,n,t,o){var a=t.length,s=a,l=!o;if(null==e)return!s;for(e=Object(e);a--;){var c=t[a];if(l&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++a<s;){var u=(c=t[a])[0],d=e[u],h=c[1];if(l&&c[2]){if(void 0===d&&!(u in e))return!1}else{var p=new i;if(o)var f=o(d,h,u,e,n,p);if(!(void 0===f?r(h,d,3,o,p):f))return!1}}return!0}},function(e,n){e.exports=function(){this.__data__=[],this.size=0}},function(e,n,t){var i=t(105),r=Array.prototype.splice;e.exports=function(e){var n=this.__data__,t=i(n,e);return!(t<0)&&(t==n.length-1?n.pop():r.call(n,t,1),--this.size,!0)}},function(e,n,t){var i=t(105);e.exports=function(e){var n=this.__data__,t=i(n,e);return t<0?void 0:n[t][1]}},function(e,n,t){var i=t(105);e.exports=function(e){return i(this.__data__,e)>-1}},function(e,n,t){var i=t(105);e.exports=function(e,n){var t=this.__data__,r=i(t,e);return r<0?(++this.size,t.push([e,n])):t[r][1]=n,this}},function(e,n,t){var i=t(104);e.exports=function(){this.__data__=new i,this.size=0}},function(e,n){e.exports=function(e){var n=this.__data__,t=n.delete(e);return this.size=n.size,t}},function(e,n){e.exports=function(e){return this.__data__.get(e)}},function(e,n){e.exports=function(e){return this.__data__.has(e)}},function(e,n,t){var i=t(104),r=t(157),o=t(158);e.exports=function(e,n){var t=this.__data__;if(t instanceof i){var a=t.__data__;if(!r||a.length<199)return a.push([e,n]),this.size=++t.size,this;t=this.__data__=new o(a)}return t.set(e,n),this.size=t.size,this}},function(e,n,t){var i=t(268),r=t(408),o=t(123),a=t(269),s=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,u=l.toString,d=c.hasOwnProperty,h=RegExp("^"+u.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||r(e))&&(i(e)?h:s).test(a(e))}},function(e,n,t){var i,r=t(409),o=(i=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"";e.exports=function(e){return!!o&&o in e}},function(e,n,t){var i=t(31)["__core-js_shared__"];e.exports=i},function(e,n){e.exports=function(e,n){return null==e?void 0:e[n]}},function(e,n,t){var i=t(412),r=t(104),o=t(157);e.exports=function(){this.size=0,this.__data__={hash:new i,map:new(o||r),string:new i}}},function(e,n,t){var i=t(413),r=t(414),o=t(415),a=t(416),s=t(417);function l(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var i=e[n];this.set(i[0],i[1])}}l.prototype.clear=i,l.prototype.delete=r,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},function(e,n,t){var i=t(106);e.exports=function(){this.__data__=i?i(null):{},this.size=0}},function(e,n){e.exports=function(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}},function(e,n,t){var i=t(106),r=Object.prototype.hasOwnProperty;e.exports=function(e){var n=this.__data__;if(i){var t=n[e];return"__lodash_hash_undefined__"===t?void 0:t}return r.call(n,e)?n[e]:void 0}},function(e,n,t){var i=t(106),r=Object.prototype.hasOwnProperty;e.exports=function(e){var n=this.__data__;return i?void 0!==n[e]:r.call(n,e)}},function(e,n,t){var i=t(106);e.exports=function(e,n){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=i&&void 0===n?"__lodash_hash_undefined__":n,this}},function(e,n,t){var i=t(107);e.exports=function(e){var n=i(this,e).delete(e);return this.size-=n?1:0,n}},function(e,n){e.exports=function(e){var n=typeof e;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==e:null===e}},function(e,n,t){var i=t(107);e.exports=function(e){return i(this,e).get(e)}},function(e,n,t){var i=t(107);e.exports=function(e){return i(this,e).has(e)}},function(e,n,t){var i=t(107);e.exports=function(e,n){var t=i(this,e),r=t.size;return t.set(e,n),this.size+=t.size==r?0:1,this}},function(e,n,t){var i=t(267),r=t(271),o=t(427),a=t(430),s=t(440),l=t(32),c=t(275),u=t(277),d="[object Object]",h=Object.prototype.hasOwnProperty;e.exports=function(e,n,t,p,f,m){var g=l(e),v=l(n),b=g?"[object Array]":s(e),y=v?"[object Array]":s(n),w=(b="[object Arguments]"==b?d:b)==d,x=(y="[object Arguments]"==y?d:y)==d,_=b==y;if(_&&c(e)){if(!c(n))return!1;g=!0,w=!1}if(_&&!w)return m||(m=new i),g||u(e)?r(e,n,t,p,f,m):o(e,n,b,t,p,f,m);if(!(1&t)){var S=w&&h.call(e,"__wrapped__"),k=x&&h.call(n,"__wrapped__");if(S||k){var C=S?e.value():e,E=k?n.value():n;return m||(m=new i),f(C,E,t,p,m)}}return!!_&&(m||(m=new i),a(e,n,t,p,f,m))}},function(e,n){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},function(e,n){e.exports=function(e){return this.__data__.has(e)}},function(e,n){e.exports=function(e,n){for(var t=-1,i=null==e?0:e.length;++t<i;)if(n(e[t],t,e))return!0;return!1}},function(e,n,t){var i=t(75),r=t(428),o=t(193),a=t(271),s=t(429),l=t(159),c=i?i.prototype:void 0,u=c?c.valueOf:void 0;e.exports=function(e,n,t,i,c,d,h){switch(t){case"[object DataView]":if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=n.byteLength||!d(new r(e),new r(n)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+e,+n);case"[object Error]":return e.name==n.name&&e.message==n.message;case"[object RegExp]":case"[object String]":return e==n+"";case"[object Map]":var p=s;case"[object Set]":var f=1&i;if(p||(p=l),e.size!=n.size&&!f)return!1;var m=h.get(e);if(m)return m==n;i|=2,h.set(e,n);var g=a(p(e),p(n),i,c,d,h);return h.delete(e),g;case"[object Symbol]":if(u)return u.call(e)==u.call(n)}return!1}},function(e,n,t){var i=t(31).Uint8Array;e.exports=i},function(e,n){e.exports=function(e){var n=-1,t=Array(e.size);return e.forEach((function(e,i){t[++n]=[i,e]})),t}},function(e,n,t){var i=t(431),r=Object.prototype.hasOwnProperty;e.exports=function(e,n,t,o,a,s){var l=1&t,c=i(e),u=c.length;if(u!=i(n).length&&!l)return!1;for(var d=u;d--;){var h=c[d];if(!(l?h in n:r.call(n,h)))return!1}var p=s.get(e),f=s.get(n);if(p&&f)return p==n&&f==e;var m=!0;s.set(e,n),s.set(n,e);for(var g=l;++d<u;){var v=e[h=c[d]],b=n[h];if(o)var y=l?o(b,v,h,n,e,s):o(v,b,h,e,n,s);if(!(void 0===y?v===b||a(v,b,t,o,s):y)){m=!1;break}g||(g="constructor"==h)}if(m&&!g){var w=e.constructor,x=n.constructor;w==x||!("constructor"in e)||!("constructor"in n)||"function"==typeof w&&w instanceof w&&"function"==typeof x&&x instanceof x||(m=!1)}return s.delete(e),s.delete(n),m}},function(e,n,t){var i=t(320),r=t(321),o=t(274);e.exports=function(e){return i(e,o,r)}},function(e,n){e.exports=function(e,n){for(var t=-1,i=null==e?0:e.length,r=0,o=[];++t<i;){var a=e[t];n(a,t,e)&&(o[r++]=a)}return o}},function(e,n){e.exports=function(e,n){for(var t=-1,i=Array(e);++t<e;)i[t]=n(t);return i}},function(e,n){e.exports=function(){return!1}},function(e,n,t){var i=t(76),r=t(160),o=t(57),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&r(e.length)&&!!a[i(e)]}},function(e,n){e.exports=function(e){return function(n){return e(n)}}},function(e,n,t){(function(e){var i=t(266),r=n&&!n.nodeType&&n,o=r&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===r&&i.process,s=function(){try{var e=o&&o.require&&o.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=s}).call(this,t(276)(e))},function(e,n,t){var i=t(324),r=t(439),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!i(e))return r(e);var n=[];for(var t in Object(e))o.call(e,t)&&"constructor"!=t&&n.push(t);return n}},function(e,n,t){var i=t(325)(Object.keys,Object);e.exports=i},function(e,n,t){var i=t(441),r=t(157),o=t(442),a=t(278),s=t(443),l=t(76),c=t(269),u=c(i),d=c(r),h=c(o),p=c(a),f=c(s),m=l;(i&&"[object DataView]"!=m(new i(new ArrayBuffer(1)))||r&&"[object Map]"!=m(new r)||o&&"[object Promise]"!=m(o.resolve())||a&&"[object Set]"!=m(new a)||s&&"[object WeakMap]"!=m(new s))&&(m=function(e){var n=l(e),t="[object Object]"==n?e.constructor:void 0,i=t?c(t):"";if(i)switch(i){case u:return"[object DataView]";case d:return"[object Map]";case h:return"[object Promise]";case p:return"[object Set]";case f:return"[object WeakMap]"}return n}),e.exports=m},function(e,n,t){var i=t(44)(t(31),"DataView");e.exports=i},function(e,n,t){var i=t(44)(t(31),"Promise");e.exports=i},function(e,n,t){var i=t(44)(t(31),"WeakMap");e.exports=i},function(e,n,t){var i=t(279),r=t(274);e.exports=function(e){for(var n=r(e),t=n.length;t--;){var o=n[t],a=e[o];n[t]=[o,a,i(a)]}return n}},function(e,n,t){var i=t(270),r=t(446),o=t(452),a=t(161),s=t(279),l=t(280),c=t(83);e.exports=function(e,n){return a(e)&&s(n)?l(c(e),n):function(t){var a=r(t,e);return void 0===a&&a===n?o(t,e):i(n,a,3)}}},function(e,n,t){var i=t(196);e.exports=function(e,n,t){var r=null==e?void 0:i(e,n);return void 0===r?t:r}},function(e,n,t){var i=t(448),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=i((function(e){var n=[];return 46===e.charCodeAt(0)&&n.push(""),e.replace(r,(function(e,t,i,r){n.push(i?r.replace(o,"$1"):t||e)})),n}));e.exports=a},function(e,n,t){var i=t(449);e.exports=function(e){var n=i(e,(function(e){return 500===t.size&&t.clear(),e})),t=n.cache;return n}},function(e,n,t){var i=t(158);function r(e,n){if("function"!=typeof e||null!=n&&"function"!=typeof n)throw new TypeError("Expected a function");var t=function(){var i=arguments,r=n?n.apply(this,i):i[0],o=t.cache;if(o.has(r))return o.get(r);var a=e.apply(this,i);return t.cache=o.set(r,a)||o,a};return t.cache=new(r.Cache||i),t}r.Cache=i,e.exports=r},function(e,n,t){var i=t(451);e.exports=function(e){return null==e?"":i(e)}},function(e,n,t){var i=t(75),r=t(326),o=t(32),a=t(162),s=i?i.prototype:void 0,l=s?s.toString:void 0;e.exports=function e(n){if("string"==typeof n)return n;if(o(n))return r(n,e)+"";if(a(n))return l?l.call(n):"";var t=n+"";return"0"==t&&1/n==-1/0?"-0":t}},function(e,n,t){var i=t(453),r=t(454);e.exports=function(e,n){return null!=e&&r(e,n,i)}},function(e,n){e.exports=function(e,n){return null!=e&&n in Object(e)}},function(e,n,t){var i=t(189),r=t(156),o=t(32),a=t(194),s=t(160),l=t(83);e.exports=function(e,n,t){for(var c=-1,u=(n=i(n,e)).length,d=!1;++c<u;){var h=l(n[c]);if(!(d=null!=e&&t(e,h)))break;e=e[h]}return d||++c!=u?d:!!(u=null==e?0:e.length)&&s(u)&&a(h,u)&&(o(e)||r(e))}},function(e,n,t){var i=t(456),r=t(457),o=t(161),a=t(83);e.exports=function(e){return o(e)?i(a(e)):r(e)}},function(e,n){e.exports=function(e){return function(n){return null==n?void 0:n[e]}}},function(e,n,t){var i=t(196);e.exports=function(e){return function(n){return i(n,e)}}},function(e,n,t){var i=t(125),r=t(459),o=t(461);e.exports=function(e,n){return o(r(e,n,i),e+"")}},function(e,n,t){var i=t(460),r=Math.max;e.exports=function(e,n,t){return n=r(void 0===n?e.length-1:n,0),function(){for(var o=arguments,a=-1,s=r(o.length-n,0),l=Array(s);++a<s;)l[a]=o[n+a];a=-1;for(var c=Array(n+1);++a<n;)c[a]=o[a];return c[n]=t(l),i(e,this,c)}}},function(e,n){e.exports=function(e,n,t){switch(t.length){case 0:return e.call(n);case 1:return e.call(n,t[0]);case 2:return e.call(n,t[0],t[1]);case 3:return e.call(n,t[0],t[1],t[2])}return e.apply(n,t)}},function(e,n,t){var i=t(462),r=t(464)(i);e.exports=r},function(e,n,t){var i=t(463),r=t(327),o=t(125),a=r?function(e,n){return r(e,"toString",{configurable:!0,enumerable:!1,value:i(n),writable:!0})}:o;e.exports=a},function(e,n){e.exports=function(e){return function(){return e}}},function(e,n){var t=Date.now;e.exports=function(e){var n=0,i=0;return function(){var r=t(),o=16-(r-i);if(i=r,o>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}},function(e,n,t){var i=t(272),r=t(466),o=t(471),a=t(273),s=t(472),l=t(159);e.exports=function(e,n,t){var c=-1,u=r,d=e.length,h=!0,p=[],f=p;if(t)h=!1,u=o;else if(d>=200){var m=n?null:s(e);if(m)return l(m);h=!1,u=a,f=new i}else f=n?[]:p;e:for(;++c<d;){var g=e[c],v=n?n(g):g;if(g=t||0!==g?g:0,h&&v==v){for(var b=f.length;b--;)if(f[b]===v)continue e;n&&f.push(v),p.push(g)}else u(f,v,t)||(f!==p&&f.push(v),p.push(g))}return p}},function(e,n,t){var i=t(467);e.exports=function(e,n){return!!(null==e?0:e.length)&&i(e,n,0)>-1}},function(e,n,t){var i=t(468),r=t(469),o=t(470);e.exports=function(e,n,t){return n==n?o(e,n,t):i(e,r,t)}},function(e,n){e.exports=function(e,n,t,i){for(var r=e.length,o=t+(i?1:-1);i?o--:++o<r;)if(n(e[o],o,e))return o;return-1}},function(e,n){e.exports=function(e){return e!=e}},function(e,n){e.exports=function(e,n,t){for(var i=t-1,r=e.length;++i<r;)if(e[i]===n)return i;return-1}},function(e,n){e.exports=function(e,n,t){for(var i=-1,r=null==e?0:e.length;++i<r;)if(t(n,e[i]))return!0;return!1}},function(e,n,t){var i=t(278),r=t(473),o=t(159),a=i&&1/o(new i([,-0]))[1]==1/0?function(e){return new i(e)}:r;e.exports=a},function(e,n){e.exports=function(){}},function(e,n,t){var i=t(195),r=t(57);e.exports=function(e){return r(e)&&i(e)}},function(e,n){e.exports=function(e){var n=null==e?0:e.length;return n?e[n-1]:void 0}},function(e,n,t){var i=t(10),r=t(152);e.exports=function(e,n,t){var o,a;return r&&"function"==typeof(o=n.constructor)&&o!==t&&i(a=o.prototype)&&a!==t.prototype&&r(e,a),e}},function(e,n,t){},function(e,n,t){"use strict";t(283)},function(e,n,t){"use strict";var i=t(3),r=t(281).trim;i({target:"String",proto:!0,forced:t(480)("trim")},{trim:function(){return r(this)}})},function(e,n,t){var i=t(5),r=t(282);e.exports=function(e){return i((function(){return!!r[e]()||"​᠎"!="​᠎"[e]()||r[e].name!==e}))}},function(e,n,t){"use strict";var i=t(121),r=t(11),o=t(21),a=t(482),s=t(122);i("search",1,(function(e,n,t){return[function(n){var t=o(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,t):new RegExp(n)[e](String(t))},function(e){var i=t(n,e,this);if(i.done)return i.value;var o=r(e),l=String(this),c=o.lastIndex;a(c,0)||(o.lastIndex=0);var u=s(o,l);return a(o.lastIndex,c)||(o.lastIndex=c),null===u?-1:u.index}]}))},function(e,n){e.exports=Object.is||function(e,n){return e===n?0!==e||1/e==1/n:e!=e&&n!=n}},function(e,n,t){"use strict";var i=t(121),r=t(255),o=t(11),a=t(21),s=t(484),l=t(188),c=t(28),u=t(122),d=t(155),h=t(264).UNSUPPORTED_Y,p=[].push,f=Math.min;i("split",2,(function(e,n,t){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,t){var i=String(a(this)),o=void 0===t?4294967295:t>>>0;if(0===o)return[];if(void 0===e)return[i];if(!r(e))return n.call(i,e,o);for(var s,l,c,u=[],h=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,m=new RegExp(e.source,h+"g");(s=d.call(m,i))&&!((l=m.lastIndex)>f&&(u.push(i.slice(f,s.index)),s.length>1&&s.index<i.length&&p.apply(u,s.slice(1)),c=s[0].length,f=l,u.length>=o));)m.lastIndex===s.index&&m.lastIndex++;return f===i.length?!c&&m.test("")||u.push(""):u.push(i.slice(f)),u.length>o?u.slice(0,o):u}:"0".split(void 0,0).length?function(e,t){return void 0===e&&0===t?[]:n.call(this,e,t)}:n,[function(n,t){var r=a(this),o=null==n?void 0:n[e];return void 0!==o?o.call(n,r,t):i.call(String(r),n,t)},function(e,r){var a=t(i,e,this,r,i!==n);if(a.done)return a.value;var d=o(e),p=String(this),m=s(d,RegExp),g=d.unicode,v=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(h?"g":"y"),b=new m(h?"^(?:"+d.source+")":d,v),y=void 0===r?4294967295:r>>>0;if(0===y)return[];if(0===p.length)return null===u(b,p)?[p]:[];for(var w=0,x=0,_=[];x<p.length;){b.lastIndex=h?0:x;var S,k=u(b,h?p.slice(x):p);if(null===k||(S=f(c(b.lastIndex+(h?x:0)),p.length))===w)x=l(p,x,g);else{if(_.push(p.slice(w,x)),_.length===y)return _;for(var C=1;C<=k.length-1;C++)if(_.push(k[C]),_.length===y)return _;x=w=S}}return _.push(p.slice(w)),_}]}),h)},function(e,n,t){var i=t(11),r=t(55),o=t(6)("species");e.exports=function(e,n){var t,a=i(e).constructor;return void 0===a||null==(t=i(a)[o])?n:r(t)}},function(e,n,t){var i=t(21),r=/"/g;e.exports=function(e,n,t,o){var a=String(i(e)),s="<"+n;return""!==t&&(s+=" "+t+'="'+String(o).replace(r,"&quot;")+'"'),s+">"+a+"</"+n+">"}},function(e,n,t){var i=t(5);e.exports=function(e){return i((function(){var n=""[e]('"');return n!==n.toLowerCase()||n.split('"').length>3}))}},function(e,n,t){"use strict";t(285)},function(e,n,t){"use strict";t(286)},function(e,n,t){"use strict";t(287)},function(e,n,t){"use strict";t(288)},function(e,n,t){"use strict";n.__esModule=!0,n.validateRangeInOneMonth=n.extractTimeFormat=n.extractDateFormat=n.nextYear=n.prevYear=n.nextMonth=n.prevMonth=n.changeYearMonthAndClampDate=n.timeWithinRange=n.limitTimeRange=n.clearMilliseconds=n.clearTime=n.modifyWithTimeString=n.modifyTime=n.modifyDate=n.range=n.getRangeMinutes=n.getMonthDays=n.getPrevMonthLastDays=n.getRangeHours=n.getWeekNumber=n.getStartDateOfMonth=n.nextDate=n.prevDate=n.getFirstDayOfMonth=n.getDayCountOfYear=n.getDayCountOfMonth=n.parseDate=n.formatDate=n.isDateObject=n.isDate=n.toDate=n.getI18nSettings=void 0;var i,r=t(289),o=(i=r)&&i.__esModule?i:{default:i},a=t(164);var s=["sun","mon","tue","wed","thu","fri","sat"],l=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],c=n.getI18nSettings=function(){return{dayNamesShort:s.map((function(e){return(0,a.t)("el.datepicker.weeks."+e)})),dayNames:s.map((function(e){return(0,a.t)("el.datepicker.weeks."+e)})),monthNamesShort:l.map((function(e){return(0,a.t)("el.datepicker.months."+e)})),monthNames:l.map((function(e,n){return(0,a.t)("el.datepicker.month"+(n+1))})),amPm:["am","pm"]}},u=n.toDate=function(e){return d(e)?new Date(e):null},d=n.isDate=function(e){return null!=e&&(!isNaN(new Date(e).getTime())&&!Array.isArray(e))},h=(n.isDateObject=function(e){return e instanceof Date},n.formatDate=function(e,n){return(e=u(e))?o.default.format(e,n||"yyyy-MM-dd",c()):""},n.parseDate=function(e,n){return o.default.parse(e,n||"yyyy-MM-dd",c())}),p=n.getDayCountOfMonth=function(e,n){return 3===n||5===n||8===n||10===n?30:1===n?e%4==0&&e%100!=0||e%400==0?29:28:31},f=(n.getDayCountOfYear=function(e){return e%400==0||e%100!=0&&e%4==0?366:365},n.getFirstDayOfMonth=function(e){var n=new Date(e.getTime());return n.setDate(1),n.getDay()},n.prevDate=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Date(e.getFullYear(),e.getMonth(),e.getDate()-n)});n.nextDate=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Date(e.getFullYear(),e.getMonth(),e.getDate()+n)},n.getStartDateOfMonth=function(e,n){var t=new Date(e,n,1),i=t.getDay();return f(t,0===i?7:i)},n.getWeekNumber=function(e){if(!d(e))return null;var n=new Date(e.getTime());n.setHours(0,0,0,0),n.setDate(n.getDate()+3-(n.getDay()+6)%7);var t=new Date(n.getFullYear(),0,4);return 1+Math.round(((n.getTime()-t.getTime())/864e5-3+(t.getDay()+6)%7)/7)},n.getRangeHours=function(e){var n=[],t=[];if((e||[]).forEach((function(e){var n=e.map((function(e){return e.getHours()}));t=t.concat(function(e,n){for(var t=[],i=e;i<=n;i++)t.push(i);return t}(n[0],n[1]))})),t.length)for(var i=0;i<24;i++)n[i]=-1===t.indexOf(i);else for(var r=0;r<24;r++)n[r]=!1;return n},n.getPrevMonthLastDays=function(e,n){if(n<=0)return[];var t=new Date(e.getTime());t.setDate(0);var i=t.getDate();return g(n).map((function(e,t){return i-(n-t-1)}))},n.getMonthDays=function(e){var n=new Date(e.getFullYear(),e.getMonth()+1,0).getDate();return g(n).map((function(e,n){return n+1}))};function m(e,n,t,i){for(var r=n;r<t;r++)e[r]=i}n.getRangeMinutes=function(e,n){var t=new Array(60);return e.length>0?e.forEach((function(e){var i=e[0],r=e[1],o=i.getHours(),a=i.getMinutes(),s=r.getHours(),l=r.getMinutes();o===n&&s!==n?m(t,a,60,!0):o===n&&s===n?m(t,a,l+1,!0):o!==n&&s===n?m(t,0,l+1,!0):o<n&&s>n&&m(t,0,60,!0)})):m(t,0,60,!0),t};var g=n.range=function(e){return Array.apply(null,{length:e}).map((function(e,n){return n}))},v=n.modifyDate=function(e,n,t,i){return new Date(n,t,i,e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())},b=n.modifyTime=function(e,n,t,i){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),n,t,i,e.getMilliseconds())},y=(n.modifyWithTimeString=function(e,n){return null!=e&&n?(n=h(n,"HH:mm:ss"),b(e,n.getHours(),n.getMinutes(),n.getSeconds())):e},n.clearTime=function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())},n.clearMilliseconds=function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),0)},n.limitTimeRange=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"HH:mm:ss";if(0===n.length)return e;var i=function(e){return o.default.parse(o.default.format(e,t),t)},r=i(e),a=n.map((function(e){return e.map(i)}));if(a.some((function(e){return r>=e[0]&&r<=e[1]})))return e;var s=a[0][0],l=a[0][0];a.forEach((function(e){s=new Date(Math.min(e[0],s)),l=new Date(Math.max(e[1],s))}));var c=r<s?s:l;return v(c,e.getFullYear(),e.getMonth(),e.getDate())}),w=(n.timeWithinRange=function(e,n,t){return y(e,n,t).getTime()===e.getTime()},n.changeYearMonthAndClampDate=function(e,n,t){var i=Math.min(e.getDate(),p(n,t));return v(e,n,t,i)});n.prevMonth=function(e){var n=e.getFullYear(),t=e.getMonth();return 0===t?w(e,n-1,11):w(e,n,t-1)},n.nextMonth=function(e){var n=e.getFullYear(),t=e.getMonth();return 11===t?w(e,n+1,0):w(e,n,t+1)},n.prevYear=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=e.getFullYear(),i=e.getMonth();return w(e,t-n,i)},n.nextYear=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=e.getFullYear(),i=e.getMonth();return w(e,t+n,i)},n.extractDateFormat=function(e){return e.replace(/\W?m{1,2}|\W?ZZ/g,"").replace(/\W?h{1,2}|\W?s{1,3}|\W?a/gi,"").trim()},n.extractTimeFormat=function(e){return e.replace(/\W?D{1,2}|\W?Do|\W?d{1,4}|\W?M{1,4}|\W?y{2,4}/g,"").trim()},n.validateRangeInOneMonth=function(e,n){return e.getMonth()===n.getMonth()&&e.getFullYear()===n.getFullYear()}},function(e,n,t){"use strict";n.__esModule=!0,n.default={el:{colorpicker:{confirm:"确定",clear:"清空"},datepicker:{now:"此刻",today:"今天",cancel:"取消",clear:"清空",confirm:"确定",selectDate:"选择日期",selectTime:"选择时间",startDate:"开始日期",startTime:"开始时间",endDate:"结束日期",endTime:"结束时间",prevYear:"前一年",nextYear:"后一年",prevMonth:"上个月",nextMonth:"下个月",year:"年",month1:"1 月",month2:"2 月",month3:"3 月",month4:"4 月",month5:"5 月",month6:"6 月",month7:"7 月",month8:"8 月",month9:"9 月",month10:"10 月",month11:"11 月",month12:"12 月",weeks:{sun:"日",mon:"一",tue:"二",wed:"三",thu:"四",fri:"五",sat:"六"},months:{jan:"一月",feb:"二月",mar:"三月",apr:"四月",may:"五月",jun:"六月",jul:"七月",aug:"八月",sep:"九月",oct:"十月",nov:"十一月",dec:"十二月"}},select:{loading:"加载中",noMatch:"无匹配数据",noData:"无数据",placeholder:"请选择"},cascader:{noMatch:"无匹配数据",loading:"加载中",placeholder:"请选择",noData:"暂无数据"},pagination:{goto:"前往",pagesize:"条/页",total:"共 {total} 条",pageClassifier:"页"},messagebox:{title:"提示",confirm:"确定",cancel:"取消",error:"输入的数据不合法!"},upload:{deleteTip:"按 delete 键可删除",delete:"删除",preview:"查看图片",continue:"继续上传"},table:{emptyText:"暂无数据",confirmFilter:"筛选",resetFilter:"重置",clearFilter:"全部",sumText:"合计"},tree:{emptyText:"暂无数据"},transfer:{noMatch:"无匹配数据",noData:"无数据",titles:["列表 1","列表 2"],filterPlaceholder:"请输入搜索内容",noCheckedFormat:"共 {total} 项",hasCheckedFormat:"已选 {checked}/{total} 项"},image:{error:"加载失败"},pageHeader:{title:"返回"},popconfirm:{confirmButtonText:"确定",cancelButtonText:"取消"}}}},function(e,n,t){"use strict";var i=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var n=Object.prototype.toString.call(e);return"[object RegExp]"===n||"[object Date]"===n||function(e){return e.$$typeof===r}(e)}(e)};var r="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function o(e,n){var t;return n&&!0===n.clone&&i(e)?s((t=e,Array.isArray(t)?[]:{}),e,n):e}function a(e,n,t){var r=e.slice();return n.forEach((function(n,a){void 0===r[a]?r[a]=o(n,t):i(n)?r[a]=s(e[a],n,t):-1===e.indexOf(n)&&r.push(o(n,t))})),r}function s(e,n,t){var r=Array.isArray(n);return r===Array.isArray(e)?r?((t||{arrayMerge:a}).arrayMerge||a)(e,n,t):function(e,n,t){var r={};return i(e)&&Object.keys(e).forEach((function(n){r[n]=o(e[n],t)})),Object.keys(n).forEach((function(a){i(n[a])&&e[a]?r[a]=s(e[a],n[a],t):r[a]=o(n[a],t)})),r}(e,n,t):o(n,t)}s.all=function(e,n){if(!Array.isArray(e)||e.length<2)throw new Error("first argument should be an array with at least two elements");return e.reduce((function(e,t){return s(e,t,n)}))};var l=s;e.exports=l},function(e,n,t){"use strict";n.__esModule=!0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.default=function(e){return function(e){for(var n=arguments.length,t=Array(n>1?n-1:0),a=1;a<n;a++)t[a-1]=arguments[a];return 1===t.length&&"object"===i(t[0])&&(t=t[0]),t&&t.hasOwnProperty||(t={}),e.replace(o,(function(n,i,o,a){var s=void 0;return"{"===e[a-1]&&"}"===e[a+n.length]?o:null==(s=(0,r.hasOwn)(t,o)?t[o]:null)?"":s}))}};var r=t(27),o=/(%|)\{([0-9a-zA-Z_]+)\}/g},function(e,n,t){"use strict";n.__esModule=!0;var i,r=t(2),o=(i=r)&&i.__esModule?i:{default:i},a=t(33);var s=!1,l=!1,c=void 0,u=function(){if(!o.default.prototype.$isServer){var e=h.modalDom;return e?s=!0:(s=!1,e=document.createElement("div"),h.modalDom=e,e.addEventListener("touchmove",(function(e){e.preventDefault(),e.stopPropagation()})),e.addEventListener("click",(function(){h.doOnModalClick&&h.doOnModalClick()}))),e}},d={},h={modalFade:!0,getInstance:function(e){return d[e]},register:function(e,n){e&&n&&(d[e]=n)},deregister:function(e){e&&(d[e]=null,delete d[e])},nextZIndex:function(){return h.zIndex++},modalStack:[],doOnModalClick:function(){var e=h.modalStack[h.modalStack.length-1];if(e){var n=h.getInstance(e.id);n&&n.closeOnClickModal&&n.close()}},openModal:function(e,n,t,i,r){if(!o.default.prototype.$isServer&&e&&void 0!==n){this.modalFade=r;for(var l=this.modalStack,c=0,d=l.length;c<d;c++){if(l[c].id===e)return}var h=u();if((0,a.addClass)(h,"v-modal"),this.modalFade&&!s&&(0,a.addClass)(h,"v-modal-enter"),i)i.trim().split(/\s+/).forEach((function(e){return(0,a.addClass)(h,e)}));setTimeout((function(){(0,a.removeClass)(h,"v-modal-enter")}),200),t&&t.parentNode&&11!==t.parentNode.nodeType?t.parentNode.appendChild(h):document.body.appendChild(h),n&&(h.style.zIndex=n),h.tabIndex=0,h.style.display="",this.modalStack.push({id:e,zIndex:n,modalClass:i})}},closeModal:function(e){var n=this.modalStack,t=u();if(n.length>0){var i=n[n.length-1];if(i.id===e){if(i.modalClass)i.modalClass.trim().split(/\s+/).forEach((function(e){return(0,a.removeClass)(t,e)}));n.pop(),n.length>0&&(t.style.zIndex=n[n.length-1].zIndex)}else for(var r=n.length-1;r>=0;r--)if(n[r].id===e){n.splice(r,1);break}}0===n.length&&(this.modalFade&&(0,a.addClass)(t,"v-modal-leave"),setTimeout((function(){0===n.length&&(t.parentNode&&t.parentNode.removeChild(t),t.style.display="none",h.modalDom=void 0),(0,a.removeClass)(t,"v-modal-leave")}),200))}};Object.defineProperty(h,"zIndex",{configurable:!0,get:function(){return l||(c=c||(o.default.prototype.$ELEMENT||{}).zIndex||2e3,l=!0),c},set:function(e){c=e}});o.default.prototype.$isServer||window.addEventListener("keydown",(function(e){if(27===e.keyCode){var n=function(){if(!o.default.prototype.$isServer&&h.modalStack.length>0){var e=h.modalStack[h.modalStack.length-1];if(!e)return;return h.getInstance(e.id)}}();n&&n.closeOnPressEscape&&(n.handleClose?n.handleClose():n.handleAction?n.handleAction("cancel"):n.close())}})),n.default=h},function(e,n,t){"use strict";var i,r;"function"==typeof Symbol&&Symbol.iterator;void 0===(r="function"==typeof(i=function(){var e=window,n={placement:"bottom",gpuAcceleration:!0,offset:0,boundariesElement:"viewport",boundariesPadding:5,preventOverflowOrder:["left","right","top","bottom"],flipBehavior:"flip",arrowElement:"[x-arrow]",arrowOffset:0,modifiers:["shift","offset","preventOverflow","keepTogether","arrow","flip","applyStyle"],modifiersIgnored:[],forceAbsolute:!1};function t(e,t,i){this._reference=e.jquery?e[0]:e,this.state={};var r=null==t,o=t&&"[object Object]"===Object.prototype.toString.call(t);return this._popper=r||o?this.parse(o?t:{}):t.jquery?t[0]:t,this._options=Object.assign({},n,i),this._options.modifiers=this._options.modifiers.map(function(e){if(-1===this._options.modifiersIgnored.indexOf(e))return"applyStyle"===e&&this._popper.setAttribute("x-placement",this._options.placement),this.modifiers[e]||e}.bind(this)),this.state.position=this._getPosition(this._popper,this._reference),u(this._popper,{position:this.state.position,top:0}),this.update(),this._setupEventListeners(),this}function i(n){var t=n.style.display,i=n.style.visibility;n.style.display="block",n.style.visibility="hidden",n.offsetWidth;var r=e.getComputedStyle(n),o=parseFloat(r.marginTop)+parseFloat(r.marginBottom),a=parseFloat(r.marginLeft)+parseFloat(r.marginRight),s={width:n.offsetWidth+a,height:n.offsetHeight+o};return n.style.display=t,n.style.visibility=i,s}function r(e){var n={left:"right",right:"left",bottom:"top",top:"bottom"};return e.replace(/left|right|bottom|top/g,(function(e){return n[e]}))}function o(e){var n=Object.assign({},e);return n.right=n.left+n.width,n.bottom=n.top+n.height,n}function a(e,n){var t,i=0;for(t in e){if(e[t]===n)return i;i++}return null}function s(n,t){return e.getComputedStyle(n,null)[t]}function l(n){var t=n.offsetParent;return t!==e.document.body&&t?t:e.document.documentElement}function c(n){var t=n.parentNode;return t?t===e.document?e.document.body.scrollTop||e.document.body.scrollLeft?e.document.body:e.document.documentElement:-1!==["scroll","auto"].indexOf(s(t,"overflow"))||-1!==["scroll","auto"].indexOf(s(t,"overflow-x"))||-1!==["scroll","auto"].indexOf(s(t,"overflow-y"))?t:c(n.parentNode):n}function u(e,n){Object.keys(n).forEach((function(t){var i,r="";-1!==["width","height","top","right","bottom","left"].indexOf(t)&&""!==(i=n[t])&&!isNaN(parseFloat(i))&&isFinite(i)&&(r="px"),e.style[t]=n[t]+r}))}function d(e){var n={width:e.offsetWidth,height:e.offsetHeight,left:e.offsetLeft,top:e.offsetTop};return n.right=n.left+n.width,n.bottom=n.top+n.height,n}function h(e){var n=e.getBoundingClientRect(),t=-1!=navigator.userAgent.indexOf("MSIE")&&"HTML"===e.tagName?-e.scrollTop:n.top;return{left:n.left,top:t,right:n.right,bottom:n.bottom,width:n.right-n.left,height:n.bottom-t}}function p(n){for(var t=["","ms","webkit","moz","o"],i=0;i<t.length;i++){var r=t[i]?t[i]+n.charAt(0).toUpperCase()+n.slice(1):n;if(void 0!==e.document.body.style[r])return r}return null}return t.prototype.destroy=function(){return this._popper.removeAttribute("x-placement"),this._popper.style.left="",this._popper.style.position="",this._popper.style.top="",this._popper.style[p("transform")]="",this._removeEventListeners(),this._options.removeOnDestroy&&this._popper.remove(),this},t.prototype.update=function(){var e={instance:this,styles:{}};e.placement=this._options.placement,e._originalPlacement=this._options.placement,e.offsets=this._getOffsets(this._popper,this._reference,e.placement),e.boundaries=this._getBoundaries(e,this._options.boundariesPadding,this._options.boundariesElement),e=this.runModifiers(e,this._options.modifiers),"function"==typeof this.state.updateCallback&&this.state.updateCallback(e)},t.prototype.onCreate=function(e){return e(this),this},t.prototype.onUpdate=function(e){return this.state.updateCallback=e,this},t.prototype.parse=function(n){var t={tagName:"div",classNames:["popper"],attributes:[],parent:e.document.body,content:"",contentType:"text",arrowTagName:"div",arrowClassNames:["popper__arrow"],arrowAttributes:["x-arrow"]};n=Object.assign({},t,n);var i=e.document,r=i.createElement(n.tagName);if(s(r,n.classNames),l(r,n.attributes),"node"===n.contentType?r.appendChild(n.content.jquery?n.content[0]:n.content):"html"===n.contentType?r.innerHTML=n.content:r.textContent=n.content,n.arrowTagName){var o=i.createElement(n.arrowTagName);s(o,n.arrowClassNames),l(o,n.arrowAttributes),r.appendChild(o)}var a=n.parent.jquery?n.parent[0]:n.parent;if("string"==typeof a){if((a=i.querySelectorAll(n.parent)).length>1&&console.warn("WARNING: the given `parent` query("+n.parent+") matched more than one element, the first one will be used"),0===a.length)throw"ERROR: the given `parent` doesn't exists!";a=a[0]}return a.length>1&&a instanceof Element==0&&(console.warn("WARNING: you have passed as parent a list of elements, the first one will be used"),a=a[0]),a.appendChild(r),r;function s(e,n){n.forEach((function(n){e.classList.add(n)}))}function l(e,n){n.forEach((function(n){e.setAttribute(n.split(":")[0],n.split(":")[1]||"")}))}},t.prototype._getPosition=function(n,t){return l(t),this._options.forceAbsolute?"absolute":function n(t){return t!==e.document.body&&("fixed"===s(t,"position")||(t.parentNode?n(t.parentNode):t))}(t)?"fixed":"absolute"},t.prototype._getOffsets=function(e,n,t){t=t.split("-")[0];var r={};r.position=this.state.position;var o="fixed"===r.position,a=function(e,n,t){var i=h(e),r=h(n);if(t){var o=c(n);r.top+=o.scrollTop,r.bottom+=o.scrollTop,r.left+=o.scrollLeft,r.right+=o.scrollLeft}return{top:i.top-r.top,left:i.left-r.left,bottom:i.top-r.top+i.height,right:i.left-r.left+i.width,width:i.width,height:i.height}}(n,l(e),o),s=i(e);return-1!==["right","left"].indexOf(t)?(r.top=a.top+a.height/2-s.height/2,r.left="left"===t?a.left-s.width:a.right):(r.left=a.left+a.width/2-s.width/2,r.top="top"===t?a.top-s.height:a.bottom),r.width=s.width,r.height=s.height,{popper:r,reference:a}},t.prototype._setupEventListeners=function(){if(this.state.updateBound=this.update.bind(this),e.addEventListener("resize",this.state.updateBound),"window"!==this._options.boundariesElement){var n=c(this._reference);n!==e.document.body&&n!==e.document.documentElement||(n=e),n.addEventListener("scroll",this.state.updateBound),this.state.scrollTarget=n}},t.prototype._removeEventListeners=function(){e.removeEventListener("resize",this.state.updateBound),"window"!==this._options.boundariesElement&&this.state.scrollTarget&&(this.state.scrollTarget.removeEventListener("scroll",this.state.updateBound),this.state.scrollTarget=null),this.state.updateBound=null},t.prototype._getBoundaries=function(n,t,i){var r,o,a={};if("window"===i){var s=e.document.body,u=e.document.documentElement;r=Math.max(s.scrollHeight,s.offsetHeight,u.clientHeight,u.scrollHeight,u.offsetHeight),a={top:0,right:Math.max(s.scrollWidth,s.offsetWidth,u.clientWidth,u.scrollWidth,u.offsetWidth),bottom:r,left:0}}else if("viewport"===i){var h=l(this._popper),p=c(this._popper),f=d(h),m="fixed"===n.offsets.popper.position?0:(o=p)==document.body?Math.max(document.documentElement.scrollTop,document.body.scrollTop):o.scrollTop,g="fixed"===n.offsets.popper.position?0:function(e){return e==document.body?Math.max(document.documentElement.scrollLeft,document.body.scrollLeft):e.scrollLeft}(p);a={top:0-(f.top-m),right:e.document.documentElement.clientWidth-(f.left-g),bottom:e.document.documentElement.clientHeight-(f.top-m),left:0-(f.left-g)}}else a=l(this._popper)===i?{top:0,left:0,right:i.clientWidth,bottom:i.clientHeight}:d(i);return a.left+=t,a.right-=t,a.top=a.top+t,a.bottom=a.bottom-t,a},t.prototype.runModifiers=function(e,n,t){var i=n.slice();return void 0!==t&&(i=this._options.modifiers.slice(0,a(this._options.modifiers,t))),i.forEach(function(n){var t;(t=n)&&"[object Function]"==={}.toString.call(t)&&(e=n.call(this,e))}.bind(this)),e},t.prototype.isModifierRequired=function(e,n){var t=a(this._options.modifiers,e);return!!this._options.modifiers.slice(0,t).filter((function(e){return e===n})).length},t.prototype.modifiers={},t.prototype.modifiers.applyStyle=function(e){var n,t={position:e.offsets.popper.position},i=Math.round(e.offsets.popper.left),r=Math.round(e.offsets.popper.top);return this._options.gpuAcceleration&&(n=p("transform"))?(t[n]="translate3d("+i+"px, "+r+"px, 0)",t.top=0,t.left=0):(t.left=i,t.top=r),Object.assign(t,e.styles),u(this._popper,t),this._popper.setAttribute("x-placement",e.placement),this.isModifierRequired(this.modifiers.applyStyle,this.modifiers.arrow)&&e.offsets.arrow&&u(e.arrowElement,e.offsets.arrow),e},t.prototype.modifiers.shift=function(e){var n=e.placement,t=n.split("-")[0],i=n.split("-")[1];if(i){var r=e.offsets.reference,a=o(e.offsets.popper),s={y:{start:{top:r.top},end:{top:r.top+r.height-a.height}},x:{start:{left:r.left},end:{left:r.left+r.width-a.width}}},l=-1!==["bottom","top"].indexOf(t)?"x":"y";e.offsets.popper=Object.assign(a,s[l][i])}return e},t.prototype.modifiers.preventOverflow=function(e){var n=this._options.preventOverflowOrder,t=o(e.offsets.popper),i={left:function(){var n=t.left;return t.left<e.boundaries.left&&(n=Math.max(t.left,e.boundaries.left)),{left:n}},right:function(){var n=t.left;return t.right>e.boundaries.right&&(n=Math.min(t.left,e.boundaries.right-t.width)),{left:n}},top:function(){var n=t.top;return t.top<e.boundaries.top&&(n=Math.max(t.top,e.boundaries.top)),{top:n}},bottom:function(){var n=t.top;return t.bottom>e.boundaries.bottom&&(n=Math.min(t.top,e.boundaries.bottom-t.height)),{top:n}}};return n.forEach((function(n){e.offsets.popper=Object.assign(t,i[n]())})),e},t.prototype.modifiers.keepTogether=function(e){var n=o(e.offsets.popper),t=e.offsets.reference,i=Math.floor;return n.right<i(t.left)&&(e.offsets.popper.left=i(t.left)-n.width),n.left>i(t.right)&&(e.offsets.popper.left=i(t.right)),n.bottom<i(t.top)&&(e.offsets.popper.top=i(t.top)-n.height),n.top>i(t.bottom)&&(e.offsets.popper.top=i(t.bottom)),e},t.prototype.modifiers.flip=function(e){if(!this.isModifierRequired(this.modifiers.flip,this.modifiers.preventOverflow))return console.warn("WARNING: preventOverflow modifier is required by flip modifier in order to work, be sure to include it before flip!"),e;if(e.flipped&&e.placement===e._originalPlacement)return e;var n=e.placement.split("-")[0],t=r(n),i=e.placement.split("-")[1]||"",a=[];return(a="flip"===this._options.flipBehavior?[n,t]:this._options.flipBehavior).forEach(function(s,l){if(n===s&&a.length!==l+1){n=e.placement.split("-")[0],t=r(n);var c=o(e.offsets.popper),u=-1!==["right","bottom"].indexOf(n);(u&&Math.floor(e.offsets.reference[n])>Math.floor(c[t])||!u&&Math.floor(e.offsets.reference[n])<Math.floor(c[t]))&&(e.flipped=!0,e.placement=a[l+1],i&&(e.placement+="-"+i),e.offsets.popper=this._getOffsets(this._popper,this._reference,e.placement).popper,e=this.runModifiers(e,this._options.modifiers,this._flip))}}.bind(this)),e},t.prototype.modifiers.offset=function(e){var n=this._options.offset,t=e.offsets.popper;return-1!==e.placement.indexOf("left")?t.top-=n:-1!==e.placement.indexOf("right")?t.top+=n:-1!==e.placement.indexOf("top")?t.left-=n:-1!==e.placement.indexOf("bottom")&&(t.left+=n),e},t.prototype.modifiers.arrow=function(e){var n=this._options.arrowElement,t=this._options.arrowOffset;if("string"==typeof n&&(n=this._popper.querySelector(n)),!n)return e;if(!this._popper.contains(n))return console.warn("WARNING: `arrowElement` must be child of its popper element!"),e;if(!this.isModifierRequired(this.modifiers.arrow,this.modifiers.keepTogether))return console.warn("WARNING: keepTogether modifier is required by arrow modifier in order to work, be sure to include it before arrow!"),e;var r={},a=e.placement.split("-")[0],s=o(e.offsets.popper),l=e.offsets.reference,c=-1!==["left","right"].indexOf(a),u=c?"height":"width",d=c?"top":"left",h=c?"left":"top",p=c?"bottom":"right",f=i(n)[u];l[p]-f<s[d]&&(e.offsets.popper[d]-=s[d]-(l[p]-f)),l[d]+f>s[p]&&(e.offsets.popper[d]+=l[d]+f-s[p]);var m=l[d]+(t||l[u]/2-f/2)-s[d];return m=Math.max(Math.min(s[u]-f-8,m),8),r[d]=m,r[h]="",e.offsets.arrow=r,e.arrowElement=n,e},Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var n=Object(e),t=1;t<arguments.length;t++){var i=arguments[t];if(null!=i){i=Object(i);for(var r=Object.keys(i),o=0,a=r.length;o<a;o++){var s=r[o],l=Object.getOwnPropertyDescriptor(i,s);void 0!==l&&l.enumerable&&(n[s]=i[s])}}}return n}}),t})?i.call(n,t,n,e):i)||(e.exports=r)},function(e,n,t){e.exports=function(e){var n={};function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(i,r,function(n){return e[n]}.bind(null,r));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/dist/",t(t.s=97)}({0:function(e,n,t){"use strict";function i(e,n,t,i,r,o,a,s){var l,c="function"==typeof e?e.options:e;if(n&&(c.render=n,c.staticRenderFns=t,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,n){return l.call(n),u(e,n)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:c}}t.d(n,"a",(function(){return i}))},97:function(e,n,t){"use strict";t.r(n);var i=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("button",{staticClass:"el-button",class:[e.type?"el-button--"+e.type:"",e.buttonSize?"el-button--"+e.buttonSize:"",{"is-disabled":e.buttonDisabled,"is-loading":e.loading,"is-plain":e.plain,"is-round":e.round,"is-circle":e.circle}],attrs:{disabled:e.buttonDisabled||e.loading,autofocus:e.autofocus,type:e.nativeType},on:{click:e.handleClick}},[e.loading?t("i",{staticClass:"el-icon-loading"}):e._e(),e.icon&&!e.loading?t("i",{class:e.icon}):e._e(),e.$slots.default?t("span",[e._t("default")],2):e._e()])};i._withStripped=!0;var r={name:"ElButton",inject:{elForm:{default:""},elFormItem:{default:""}},props:{type:{type:String,default:"default"},size:String,icon:{type:String,default:""},nativeType:{type:String,default:"button"},loading:Boolean,disabled:Boolean,plain:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},buttonSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},buttonDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},methods:{handleClick:function(e){this.$emit("click",e)}}},o=t(0),a=Object(o.a)(r,i,[],!1,null,null,null);a.options.__file="packages/button/src/button.vue";var s=a.exports;s.install=function(e){e.component(s.name,s)};n.default=s}})},function(e,n,t){"use strict";t.r(n);var i=function(){if("undefined"!=typeof Map)return Map;function e(e,n){var t=-1;return e.some((function(e,i){return e[0]===n&&(t=i,!0)})),t}return function(){function n(){this.__entries__=[]}return Object.defineProperty(n.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),n.prototype.get=function(n){var t=e(this.__entries__,n),i=this.__entries__[t];return i&&i[1]},n.prototype.set=function(n,t){var i=e(this.__entries__,n);~i?this.__entries__[i][1]=t:this.__entries__.push([n,t])},n.prototype.delete=function(n){var t=this.__entries__,i=e(t,n);~i&&t.splice(i,1)},n.prototype.has=function(n){return!!~e(this.__entries__,n)},n.prototype.clear=function(){this.__entries__.splice(0)},n.prototype.forEach=function(e,n){void 0===n&&(n=null);for(var t=0,i=this.__entries__;t<i.length;t++){var r=i[t];e.call(n,r[1],r[0])}},n}()}(),r="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,o="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),a="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(o):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var s=["top","right","bottom","left","width","height","size","weight"],l="undefined"!=typeof MutationObserver,c=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,n){var t=!1,i=!1,r=0;function o(){t&&(t=!1,e()),i&&l()}function s(){a(o)}function l(){var e=Date.now();if(t){if(e-r<2)return;i=!0}else t=!0,i=!1,setTimeout(s,n);r=e}return l}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var n=this.observers_,t=n.indexOf(e);~t&&n.splice(t,1),!n.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){r&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),l?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){r&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var n=e.propertyName,t=void 0===n?"":n;s.some((function(e){return!!~t.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),u=function(e,n){for(var t=0,i=Object.keys(n);t<i.length;t++){var r=i[t];Object.defineProperty(e,r,{value:n[r],enumerable:!1,writable:!1,configurable:!0})}return e},d=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||o},h=b(0,0,0,0);function p(e){return parseFloat(e)||0}function f(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];return n.reduce((function(n,t){return n+p(e["border-"+t+"-width"])}),0)}function m(e){var n=e.clientWidth,t=e.clientHeight;if(!n&&!t)return h;var i=d(e).getComputedStyle(e),r=function(e){for(var n={},t=0,i=["top","right","bottom","left"];t<i.length;t++){var r=i[t],o=e["padding-"+r];n[r]=p(o)}return n}(i),o=r.left+r.right,a=r.top+r.bottom,s=p(i.width),l=p(i.height);if("border-box"===i.boxSizing&&(Math.round(s+o)!==n&&(s-=f(i,"left","right")+o),Math.round(l+a)!==t&&(l-=f(i,"top","bottom")+a)),!function(e){return e===d(e).document.documentElement}(e)){var c=Math.round(s+o)-n,u=Math.round(l+a)-t;1!==Math.abs(c)&&(s-=c),1!==Math.abs(u)&&(l-=u)}return b(r.left,r.top,s,l)}var g="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof d(e).SVGGraphicsElement}:function(e){return e instanceof d(e).SVGElement&&"function"==typeof e.getBBox};function v(e){return r?g(e)?function(e){var n=e.getBBox();return b(0,0,n.width,n.height)}(e):m(e):h}function b(e,n,t,i){return{x:e,y:n,width:t,height:i}}var y=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=b(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=v(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),w=function(e,n){var t,i,r,o,a,s,l,c=(i=(t=n).x,r=t.y,o=t.width,a=t.height,s="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,l=Object.create(s.prototype),u(l,{x:i,y:r,width:o,height:a,top:r,right:i+o,bottom:a+r,left:i}),l);u(this,{target:e,contentRect:c})},x=function(){function e(e,n,t){if(this.activeObservations_=[],this.observations_=new i,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=n,this.callbackCtx_=t}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof d(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(e)||(n.set(e,new y(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof d(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(e)&&(n.delete(e),n.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(n){n.isActive()&&e.activeObservations_.push(n)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,n=this.activeObservations_.map((function(e){return new w(e.target,e.broadcastRect())}));this.callback_.call(e,n,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),_="undefined"!=typeof WeakMap?new WeakMap:new i,S=function e(n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var t=c.getInstance(),i=new x(n,t,this);_.set(this,i)};["observe","unobserve","disconnect"].forEach((function(e){S.prototype[e]=function(){var n;return(n=_.get(this))[e].apply(n,arguments)}}));var k=void 0!==o.ResizeObserver?o.ResizeObserver:S;n.default=k},function(e,n,t){"use strict";n.__esModule=!0;var i=t(33);var r=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype.beforeEnter=function(e){(0,i.addClass)(e,"collapse-transition"),e.dataset||(e.dataset={}),e.dataset.oldPaddingTop=e.style.paddingTop,e.dataset.oldPaddingBottom=e.style.paddingBottom,e.style.height="0",e.style.paddingTop=0,e.style.paddingBottom=0},e.prototype.enter=function(e){e.dataset.oldOverflow=e.style.overflow,0!==e.scrollHeight?(e.style.height=e.scrollHeight+"px",e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom):(e.style.height="",e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom),e.style.overflow="hidden"},e.prototype.afterEnter=function(e){(0,i.removeClass)(e,"collapse-transition"),e.style.height="",e.style.overflow=e.dataset.oldOverflow},e.prototype.beforeLeave=function(e){e.dataset||(e.dataset={}),e.dataset.oldPaddingTop=e.style.paddingTop,e.dataset.oldPaddingBottom=e.style.paddingBottom,e.dataset.oldOverflow=e.style.overflow,e.style.height=e.scrollHeight+"px",e.style.overflow="hidden"},e.prototype.leave=function(e){0!==e.scrollHeight&&((0,i.addClass)(e,"collapse-transition"),e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0)},e.prototype.afterLeave=function(e){(0,i.removeClass)(e,"collapse-transition"),e.style.height="",e.style.overflow=e.dataset.oldOverflow,e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom},e}();n.default={name:"ElCollapseTransition",functional:!0,render:function(e,n){var t=n.children;return e("transition",{on:new r},t)}}},function(e,n,t){"use strict";n.__esModule=!0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.isVNode=function(e){return null!==e&&"object"===(void 0===e?"undefined":i(e))&&(0,r.hasOwn)(e,"componentOptions")};var r=t(27)},function(e,n,t){e.exports=function(e){var n={};function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(i,r,function(n){return e[n]}.bind(null,r));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/dist/",t(t.s=131)}({131:function(e,n,t){"use strict";t.r(n);var i=t(5),r=t.n(i),o=t(17),a=t.n(o),s=t(2),l=t(3),c=t(7),u=t.n(c),d={name:"ElTooltip",mixins:[r.a],props:{openDelay:{type:Number,default:0},disabled:Boolean,manual:Boolean,effect:{type:String,default:"dark"},arrowOffset:{type:Number,default:0},popperClass:String,content:String,visibleArrow:{default:!0},transition:{type:String,default:"el-fade-in-linear"},popperOptions:{default:function(){return{boundariesPadding:10,gpuAcceleration:!1}}},enterable:{type:Boolean,default:!0},hideAfter:{type:Number,default:0},tabindex:{type:Number,default:0}},data:function(){return{tooltipId:"el-tooltip-"+Object(l.generateId)(),timeoutPending:null,focusing:!1}},beforeCreate:function(){var e=this;this.$isServer||(this.popperVM=new u.a({data:{node:""},render:function(e){return this.node}}).$mount(),this.debounceClose=a()(200,(function(){return e.handleClosePopper()})))},render:function(e){var n=this;this.popperVM&&(this.popperVM.node=e("transition",{attrs:{name:this.transition},on:{afterLeave:this.doDestroy}},[e("div",{on:{mouseleave:function(){n.setExpectedState(!1),n.debounceClose()},mouseenter:function(){n.setExpectedState(!0)}},ref:"popper",attrs:{role:"tooltip",id:this.tooltipId,"aria-hidden":this.disabled||!this.showPopper?"true":"false"},directives:[{name:"show",value:!this.disabled&&this.showPopper}],class:["el-tooltip__popper","is-"+this.effect,this.popperClass]},[this.$slots.content||this.content])]));var t=this.getFirstElement();if(!t)return null;var i=t.data=t.data||{};return i.staticClass=this.addTooltipClass(i.staticClass),t},mounted:function(){var e=this;this.referenceElm=this.$el,1===this.$el.nodeType&&(this.$el.setAttribute("aria-describedby",this.tooltipId),this.$el.setAttribute("tabindex",this.tabindex),Object(s.on)(this.referenceElm,"mouseenter",this.show),Object(s.on)(this.referenceElm,"mouseleave",this.hide),Object(s.on)(this.referenceElm,"focus",(function(){if(e.$slots.default&&e.$slots.default.length){var n=e.$slots.default[0].componentInstance;n&&n.focus?n.focus():e.handleFocus()}else e.handleFocus()})),Object(s.on)(this.referenceElm,"blur",this.handleBlur),Object(s.on)(this.referenceElm,"click",this.removeFocusing)),this.value&&this.popperVM&&this.popperVM.$nextTick((function(){e.value&&e.updatePopper()}))},watch:{focusing:function(e){e?Object(s.addClass)(this.referenceElm,"focusing"):Object(s.removeClass)(this.referenceElm,"focusing")}},methods:{show:function(){this.setExpectedState(!0),this.handleShowPopper()},hide:function(){this.setExpectedState(!1),this.debounceClose()},handleFocus:function(){this.focusing=!0,this.show()},handleBlur:function(){this.focusing=!1,this.hide()},removeFocusing:function(){this.focusing=!1},addTooltipClass:function(e){return e?"el-tooltip "+e.replace("el-tooltip",""):"el-tooltip"},handleShowPopper:function(){var e=this;this.expectedState&&!this.manual&&(clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.showPopper=!0}),this.openDelay),this.hideAfter>0&&(this.timeoutPending=setTimeout((function(){e.showPopper=!1}),this.hideAfter)))},handleClosePopper:function(){this.enterable&&this.expectedState||this.manual||(clearTimeout(this.timeout),this.timeoutPending&&clearTimeout(this.timeoutPending),this.showPopper=!1,this.disabled&&this.doDestroy())},setExpectedState:function(e){!1===e&&clearTimeout(this.timeoutPending),this.expectedState=e},getFirstElement:function(){var e=this.$slots.default;if(!Array.isArray(e))return null;for(var n=null,t=0;t<e.length;t++)e[t]&&e[t].tag&&(n=e[t]);return n}},beforeDestroy:function(){this.popperVM&&this.popperVM.$destroy()},destroyed:function(){var e=this.referenceElm;1===e.nodeType&&(Object(s.off)(e,"mouseenter",this.show),Object(s.off)(e,"mouseleave",this.hide),Object(s.off)(e,"focus",this.handleFocus),Object(s.off)(e,"blur",this.handleBlur),Object(s.off)(e,"click",this.removeFocusing))},install:function(e){e.component(d.name,d)}};n.default=d},17:function(e,n){e.exports=t(111)},2:function(e,n){e.exports=t(33)},3:function(e,n){e.exports=t(27)},5:function(e,n){e.exports=t(108)},7:function(e,n){e.exports=t(2)}})},function(e,n,t){e.exports=function(e){var n={};function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(i,r,function(n){return e[n]}.bind(null,r));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/dist/",t(t.s=99)}({0:function(e,n,t){"use strict";function i(e,n,t,i,r,o,a,s){var l,c="function"==typeof e?e.options:e;if(n&&(c.render=n,c.staticRenderFns=t,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,n){return l.call(n),u(e,n)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:c}}t.d(n,"a",(function(){return i}))},99:function(e,n,t){"use strict";t.r(n);var i=function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"el-button-group"},[this._t("default")],2)};i._withStripped=!0;var r={name:"ElButtonGroup"},o=t(0),a=Object(o.a)(r,i,[],!1,null,null,null);a.options.__file="packages/button/src/button-group.vue";var s=a.exports;s.install=function(e){e.component(s.name,s)};n.default=s}})},function(e,n,t){e.exports=function(e){var n={};function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(i,r,function(n){return e[n]}.bind(null,r));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/dist/",t(t.s=86)}({0:function(e,n,t){"use strict";function i(e,n,t,i,r,o,a,s){var l,c="function"==typeof e?e.options:e;if(n&&(c.render=n,c.staticRenderFns=t,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,n){return l.call(n),u(e,n)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:c}}t.d(n,"a",(function(){return i}))},4:function(e,n){e.exports=t(45)},86:function(e,n,t){"use strict";t.r(n);var i=function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"el-checkbox-group",attrs:{role:"group","aria-label":"checkbox-group"}},[this._t("default")],2)};i._withStripped=!0;var r=t(4),o={name:"ElCheckboxGroup",componentName:"ElCheckboxGroup",mixins:[t.n(r).a],inject:{elFormItem:{default:""}},props:{value:{},disabled:Boolean,min:Number,max:Number,size:String,fill:String,textColor:String},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},checkboxGroupSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size}},watch:{value:function(e){this.dispatch("ElFormItem","el.form.change",[e])}}},a=t(0),s=Object(a.a)(o,i,[],!1,null,null,null);s.options.__file="packages/checkbox/src/checkbox-group.vue";var l=s.exports;l.install=function(e){e.component(l.name,l)};n.default=l}})},function(e,n,t){"use strict";n.__esModule=!0,n.default=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!e||!n)throw new Error("instance & callback is required");var r=!1,o=function(){r||(r=!0,n&&n.apply(null,arguments))};i?e.$once("after-leave",o):e.$on("after-leave",o),setTimeout((function(){o()}),t+100)}},function(e,n,t){e.exports=function(e){var n={};function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(i,r,function(n){return e[n]}.bind(null,r));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/dist/",t(t.s=119)}({0:function(e,n,t){"use strict";function i(e,n,t,i,r,o,a,s){var l,c="function"==typeof e?e.options:e;if(n&&(c.render=n,c.staticRenderFns=t,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,n){return l.call(n),u(e,n)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:c}}t.d(n,"a",(function(){return i}))},119:function(e,n,t){"use strict";t.r(n);var i=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"el-progress",class:["el-progress--"+e.type,e.status?"is-"+e.status:"",{"el-progress--without-text":!e.showText,"el-progress--text-inside":e.textInside}],attrs:{role:"progressbar","aria-valuenow":e.percentage,"aria-valuemin":"0","aria-valuemax":"100"}},["line"===e.type?t("div",{staticClass:"el-progress-bar"},[t("div",{staticClass:"el-progress-bar__outer",style:{height:e.strokeWidth+"px"}},[t("div",{staticClass:"el-progress-bar__inner",style:e.barStyle},[e.showText&&e.textInside?t("div",{staticClass:"el-progress-bar__innerText"},[e._v(e._s(e.content))]):e._e()])])]):t("div",{staticClass:"el-progress-circle",style:{height:e.width+"px",width:e.width+"px"}},[t("svg",{attrs:{viewBox:"0 0 100 100"}},[t("path",{staticClass:"el-progress-circle__track",style:e.trailPathStyle,attrs:{d:e.trackPath,stroke:"#e5e9f2","stroke-width":e.relativeStrokeWidth,fill:"none"}}),t("path",{staticClass:"el-progress-circle__path",style:e.circlePathStyle,attrs:{d:e.trackPath,stroke:e.stroke,fill:"none","stroke-linecap":e.strokeLinecap,"stroke-width":e.percentage?e.relativeStrokeWidth:0}})])]),e.showText&&!e.textInside?t("div",{staticClass:"el-progress__text",style:{fontSize:e.progressTextSize+"px"}},[e.status?t("i",{class:e.iconClass}):[e._v(e._s(e.content))]],2):e._e()])};i._withStripped=!0;var r={name:"ElProgress",props:{type:{type:String,default:"line",validator:function(e){return["line","circle","dashboard"].indexOf(e)>-1}},percentage:{type:Number,default:0,required:!0,validator:function(e){return e>=0&&e<=100}},status:{type:String,validator:function(e){return["success","exception","warning"].indexOf(e)>-1}},strokeWidth:{type:Number,default:6},strokeLinecap:{type:String,default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:[String,Array,Function],default:""},format:Function},computed:{barStyle:function(){var e={};return e.width=this.percentage+"%",e.backgroundColor=this.getCurrentColor(this.percentage),e},relativeStrokeWidth:function(){return(this.strokeWidth/this.width*100).toFixed(1)},radius:function(){return"circle"===this.type||"dashboard"===this.type?parseInt(50-parseFloat(this.relativeStrokeWidth)/2,10):0},trackPath:function(){var e=this.radius,n="dashboard"===this.type;return"\n        M 50 50\n        m 0 "+(n?"":"-")+e+"\n        a "+e+" "+e+" 0 1 1 0 "+(n?"-":"")+2*e+"\n        a "+e+" "+e+" 0 1 1 0 "+(n?"":"-")+2*e+"\n        "},perimeter:function(){return 2*Math.PI*this.radius},rate:function(){return"dashboard"===this.type?.75:1},strokeDashoffset:function(){return-1*this.perimeter*(1-this.rate)/2+"px"},trailPathStyle:function(){return{strokeDasharray:this.perimeter*this.rate+"px, "+this.perimeter+"px",strokeDashoffset:this.strokeDashoffset}},circlePathStyle:function(){return{strokeDasharray:this.perimeter*this.rate*(this.percentage/100)+"px, "+this.perimeter+"px",strokeDashoffset:this.strokeDashoffset,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease"}},stroke:function(){var e=void 0;if(this.color)e=this.getCurrentColor(this.percentage);else switch(this.status){case"success":e="#13ce66";break;case"exception":e="#ff4949";break;case"warning":e="#e6a23c";break;default:e="#20a0ff"}return e},iconClass:function(){return"warning"===this.status?"el-icon-warning":"line"===this.type?"success"===this.status?"el-icon-circle-check":"el-icon-circle-close":"success"===this.status?"el-icon-check":"el-icon-close"},progressTextSize:function(){return"line"===this.type?12+.4*this.strokeWidth:.111111*this.width+2},content:function(){return"function"==typeof this.format?this.format(this.percentage)||"":this.percentage+"%"}},methods:{getCurrentColor:function(e){return"function"==typeof this.color?this.color(e):"string"==typeof this.color?this.color:this.getLevelColor(e)},getLevelColor:function(e){for(var n=this.getColorArray().sort((function(e,n){return e.percentage-n.percentage})),t=0;t<n.length;t++)if(n[t].percentage>e)return n[t].color;return n[n.length-1].color},getColorArray:function(){var e=this.color,n=100/e.length;return e.map((function(e,t){return"string"==typeof e?{color:e,percentage:(t+1)*n}:e}))}}},o=t(0),a=Object(o.a)(r,i,[],!1,null,null,null);a.options.__file="packages/progress/src/progress.vue";var s=a.exports;s.install=function(e){e.component(s.name,s)};n.default=s}})},function(e,n,t){var i=t(169),r=t(111);e.exports={throttle:i,debounce:r}},function(e,n,t){e.exports=function(e){var n={};function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(i,r,function(n){return e[n]}.bind(null,r));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/dist/",t(t.s=61)}({0:function(e,n,t){"use strict";function i(e,n,t,i,r,o,a,s){var l,c="function"==typeof e?e.options:e;if(n&&(c.render=n,c.staticRenderFns=t,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,n){return l.call(n),u(e,n)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:c}}t.d(n,"a",(function(){return i}))},10:function(e,n){e.exports=t(167)},12:function(e,n){e.exports=t(293)},14:function(e,n){e.exports=t(170)},16:function(e,n){e.exports=t(168)},17:function(e,n){e.exports=t(111)},21:function(e,n){e.exports=t(110)},22:function(e,n){e.exports=t(171)},3:function(e,n){e.exports=t(27)},31:function(e,n){e.exports=t(172)},33:function(e,n,t){"use strict";var i=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("li",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-select-dropdown__item",class:{selected:e.itemSelected,"is-disabled":e.disabled||e.groupDisabled||e.limitReached,hover:e.hover},on:{mouseenter:e.hoverItem,click:function(n){return n.stopPropagation(),e.selectOptionClick(n)}}},[e._t("default",[t("span",[e._v(e._s(e.currentLabel))])])],2)};i._withStripped=!0;var r=t(4),o=t.n(r),a=t(3),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l={mixins:[o.a],name:"ElOption",componentName:"ElOption",inject:["select"],props:{value:{required:!0},label:[String,Number],created:Boolean,disabled:{type:Boolean,default:!1}},data:function(){return{index:-1,groupDisabled:!1,visible:!0,hitState:!1,hover:!1}},computed:{isObject:function(){return"[object object]"===Object.prototype.toString.call(this.value).toLowerCase()},currentLabel:function(){return this.label||(this.isObject?"":this.value)},currentValue:function(){return this.value||this.label||""},itemSelected:function(){return this.select.multiple?this.contains(this.select.value,this.value):this.isEqual(this.value,this.select.value)},limitReached:function(){return!!this.select.multiple&&(!this.itemSelected&&(this.select.value||[]).length>=this.select.multipleLimit&&this.select.multipleLimit>0)}},watch:{currentLabel:function(){this.created||this.select.remote||this.dispatch("ElSelect","setSelected")},value:function(e,n){var t=this.select,i=t.remote,r=t.valueKey;if(!this.created&&!i){if(r&&"object"===(void 0===e?"undefined":s(e))&&"object"===(void 0===n?"undefined":s(n))&&e[r]===n[r])return;this.dispatch("ElSelect","setSelected")}}},methods:{isEqual:function(e,n){if(this.isObject){var t=this.select.valueKey;return Object(a.getValueByPath)(e,t)===Object(a.getValueByPath)(n,t)}return e===n},contains:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments[1];if(this.isObject){var t=this.select.valueKey;return e&&e.some((function(e){return Object(a.getValueByPath)(e,t)===Object(a.getValueByPath)(n,t)}))}return e&&e.indexOf(n)>-1},handleGroupDisabled:function(e){this.groupDisabled=e},hoverItem:function(){this.disabled||this.groupDisabled||(this.select.hoverIndex=this.select.options.indexOf(this))},selectOptionClick:function(){!0!==this.disabled&&!0!==this.groupDisabled&&this.dispatch("ElSelect","handleOptionClick",[this,!0])},queryChange:function(e){this.visible=new RegExp(Object(a.escapeRegexpString)(e),"i").test(this.currentLabel)||this.created,this.visible||this.select.filteredOptionsCount--}},created:function(){this.select.options.push(this),this.select.cachedOptions.push(this),this.select.optionsCount++,this.select.filteredOptionsCount++,this.$on("queryChange",this.queryChange),this.$on("handleGroupDisabled",this.handleGroupDisabled)},beforeDestroy:function(){var e=this.select,n=e.selected,t=e.multiple?n:[n],i=this.select.cachedOptions.indexOf(this),r=t.indexOf(this);i>-1&&r<0&&this.select.cachedOptions.splice(i,1),this.select.onOptionDestroy(this.select.options.indexOf(this))}},c=t(0),u=Object(c.a)(l,i,[],!1,null,null,null);u.options.__file="packages/select/src/option.vue";n.a=u.exports},37:function(e,n){e.exports=t(295)},4:function(e,n){e.exports=t(45)},5:function(e,n){e.exports=t(108)},6:function(e,n){e.exports=t(165)},61:function(e,n,t){"use strict";t.r(n);var i=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleClose,expression:"handleClose"}],staticClass:"el-select",class:[e.selectSize?"el-select--"+e.selectSize:""],on:{click:function(n){return n.stopPropagation(),e.toggleMenu(n)}}},[e.multiple?t("div",{ref:"tags",staticClass:"el-select__tags",style:{"max-width":e.inputWidth-32+"px",width:"100%"}},[e.collapseTags&&e.selected.length?t("span",[t("el-tag",{attrs:{closable:!e.selectDisabled,size:e.collapseTagSize,hit:e.selected[0].hitState,type:"info","disable-transitions":""},on:{close:function(n){e.deleteTag(n,e.selected[0])}}},[t("span",{staticClass:"el-select__tags-text"},[e._v(e._s(e.selected[0].currentLabel))])]),e.selected.length>1?t("el-tag",{attrs:{closable:!1,size:e.collapseTagSize,type:"info","disable-transitions":""}},[t("span",{staticClass:"el-select__tags-text"},[e._v("+ "+e._s(e.selected.length-1))])]):e._e()],1):e._e(),e.collapseTags?e._e():t("transition-group",{on:{"after-leave":e.resetInputHeight}},e._l(e.selected,(function(n){return t("el-tag",{key:e.getValueKey(n),attrs:{closable:!e.selectDisabled,size:e.collapseTagSize,hit:n.hitState,type:"info","disable-transitions":""},on:{close:function(t){e.deleteTag(t,n)}}},[t("span",{staticClass:"el-select__tags-text"},[e._v(e._s(n.currentLabel))])])})),1),e.filterable?t("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],ref:"input",staticClass:"el-select__input",class:[e.selectSize?"is-"+e.selectSize:""],style:{"flex-grow":"1",width:e.inputLength/(e.inputWidth-32)+"%","max-width":e.inputWidth-42+"px"},attrs:{type:"text",disabled:e.selectDisabled,autocomplete:e.autoComplete||e.autocomplete},domProps:{value:e.query},on:{focus:e.handleFocus,blur:function(n){e.softFocus=!1},keyup:e.managePlaceholder,keydown:[e.resetInputState,function(n){if(!("button"in n)&&e._k(n.keyCode,"down",40,n.key,["Down","ArrowDown"]))return null;n.preventDefault(),e.navigateOptions("next")},function(n){if(!("button"in n)&&e._k(n.keyCode,"up",38,n.key,["Up","ArrowUp"]))return null;n.preventDefault(),e.navigateOptions("prev")},function(n){return!("button"in n)&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:(n.preventDefault(),e.selectOption(n))},function(n){if(!("button"in n)&&e._k(n.keyCode,"esc",27,n.key,["Esc","Escape"]))return null;n.stopPropagation(),n.preventDefault(),e.visible=!1},function(n){return!("button"in n)&&e._k(n.keyCode,"delete",[8,46],n.key,["Backspace","Delete","Del"])?null:e.deletePrevTag(n)},function(n){if(!("button"in n)&&e._k(n.keyCode,"tab",9,n.key,"Tab"))return null;e.visible=!1}],compositionstart:e.handleComposition,compositionupdate:e.handleComposition,compositionend:e.handleComposition,input:[function(n){n.target.composing||(e.query=n.target.value)},e.debouncedQueryChange]}}):e._e()],1):e._e(),t("el-input",{ref:"reference",class:{"is-focus":e.visible},attrs:{type:"text",placeholder:e.currentPlaceholder,name:e.name,id:e.id,autocomplete:e.autoComplete||e.autocomplete,size:e.selectSize,disabled:e.selectDisabled,readonly:e.readonly,"validate-event":!1,tabindex:e.multiple&&e.filterable?"-1":null},on:{focus:e.handleFocus,blur:e.handleBlur},nativeOn:{keyup:function(n){return e.debouncedOnInputChange(n)},keydown:[function(n){if(!("button"in n)&&e._k(n.keyCode,"down",40,n.key,["Down","ArrowDown"]))return null;n.stopPropagation(),n.preventDefault(),e.navigateOptions("next")},function(n){if(!("button"in n)&&e._k(n.keyCode,"up",38,n.key,["Up","ArrowUp"]))return null;n.stopPropagation(),n.preventDefault(),e.navigateOptions("prev")},function(n){return!("button"in n)&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:(n.preventDefault(),e.selectOption(n))},function(n){if(!("button"in n)&&e._k(n.keyCode,"esc",27,n.key,["Esc","Escape"]))return null;n.stopPropagation(),n.preventDefault(),e.visible=!1},function(n){if(!("button"in n)&&e._k(n.keyCode,"tab",9,n.key,"Tab"))return null;e.visible=!1}],paste:function(n){return e.debouncedOnInputChange(n)},mouseenter:function(n){e.inputHovering=!0},mouseleave:function(n){e.inputHovering=!1}},model:{value:e.selectedLabel,callback:function(n){e.selectedLabel=n},expression:"selectedLabel"}},[e.$slots.prefix?t("template",{slot:"prefix"},[e._t("prefix")],2):e._e(),t("template",{slot:"suffix"},[t("i",{directives:[{name:"show",rawName:"v-show",value:!e.showClose,expression:"!showClose"}],class:["el-select__caret","el-input__icon","el-icon-"+e.iconClass]}),e.showClose?t("i",{staticClass:"el-select__caret el-input__icon el-icon-circle-close",on:{click:e.handleClearClick}}):e._e()])],2),t("transition",{attrs:{name:"el-zoom-in-top"},on:{"before-enter":e.handleMenuEnter,"after-leave":e.doDestroy}},[t("el-select-menu",{directives:[{name:"show",rawName:"v-show",value:e.visible&&!1!==e.emptyText,expression:"visible && emptyText !== false"}],ref:"popper",attrs:{"append-to-body":e.popperAppendToBody}},[t("el-scrollbar",{directives:[{name:"show",rawName:"v-show",value:e.options.length>0&&!e.loading,expression:"options.length > 0 && !loading"}],ref:"scrollbar",class:{"is-empty":!e.allowCreate&&e.query&&0===e.filteredOptionsCount},attrs:{tag:"ul","wrap-class":"el-select-dropdown__wrap","view-class":"el-select-dropdown__list"}},[e.showNewOption?t("el-option",{attrs:{value:e.query,created:""}}):e._e(),e._t("default")],2),e.emptyText&&(!e.allowCreate||e.loading||e.allowCreate&&0===e.options.length)?[e.$slots.empty?e._t("empty"):t("p",{staticClass:"el-select-dropdown__empty"},[e._v("\n          "+e._s(e.emptyText)+"\n        ")])]:e._e()],2)],1)],1)};i._withStripped=!0;var r=t(4),o=t.n(r),a=t(22),s=t.n(a),l=t(6),c=t.n(l),u=t(10),d=t.n(u),h=function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"el-select-dropdown el-popper",class:[{"is-multiple":this.$parent.multiple},this.popperClass],style:{minWidth:this.minWidth}},[this._t("default")],2)};h._withStripped=!0;var p=t(5),f={name:"ElSelectDropdown",componentName:"ElSelectDropdown",mixins:[t.n(p).a],props:{placement:{default:"bottom-start"},boundariesPadding:{default:0},popperOptions:{default:function(){return{gpuAcceleration:!1}}},visibleArrow:{default:!0},appendToBody:{type:Boolean,default:!0}},data:function(){return{minWidth:""}},computed:{popperClass:function(){return this.$parent.popperClass}},watch:{"$parent.inputWidth":function(){this.minWidth=this.$parent.$el.getBoundingClientRect().width+"px"}},mounted:function(){var e=this;this.referenceElm=this.$parent.$refs.reference.$el,this.$parent.popperElm=this.popperElm=this.$el,this.$on("updatePopper",(function(){e.$parent.visible&&e.updatePopper()})),this.$on("destroyPopper",this.destroyPopper)}},m=t(0),g=Object(m.a)(f,h,[],!1,null,null,null);g.options.__file="packages/select/src/select-dropdown.vue";var v=g.exports,b=t(33),y=t(37),w=t.n(y),x=t(14),_=t.n(x),S=t(17),k=t.n(S),C=t(12),E=t.n(C),T=t(16),P=t(31),O=t.n(P),A=t(3),j=t(21),I={mixins:[o.a,c.a,s()("reference"),{data:function(){return{hoverOption:-1}},computed:{optionsAllDisabled:function(){return this.options.filter((function(e){return e.visible})).every((function(e){return e.disabled}))}},watch:{hoverIndex:function(e){var n=this;"number"==typeof e&&e>-1&&(this.hoverOption=this.options[e]||{}),this.options.forEach((function(e){e.hover=n.hoverOption===e}))}},methods:{navigateOptions:function(e){var n=this;if(this.visible){if(0!==this.options.length&&0!==this.filteredOptionsCount&&!this.optionsAllDisabled){"next"===e?(this.hoverIndex++,this.hoverIndex===this.options.length&&(this.hoverIndex=0)):"prev"===e&&(this.hoverIndex--,this.hoverIndex<0&&(this.hoverIndex=this.options.length-1));var t=this.options[this.hoverIndex];!0!==t.disabled&&!0!==t.groupDisabled&&t.visible||this.navigateOptions(e),this.$nextTick((function(){return n.scrollToOption(n.hoverOption)}))}}else this.visible=!0}}}],name:"ElSelect",componentName:"ElSelect",inject:{elForm:{default:""},elFormItem:{default:""}},provide:function(){return{select:this}},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},readonly:function(){return!this.filterable||this.multiple||!Object(A.isIE)()&&!Object(A.isEdge)()&&!this.visible},showClose:function(){var e=this.multiple?Array.isArray(this.value)&&this.value.length>0:void 0!==this.value&&null!==this.value&&""!==this.value;return this.clearable&&!this.selectDisabled&&this.inputHovering&&e},iconClass:function(){return this.remote&&this.filterable?"":this.visible?"arrow-up is-reverse":"arrow-up"},debounce:function(){return this.remote?300:0},emptyText:function(){return this.loading?this.loadingText||this.t("el.select.loading"):(!this.remote||""!==this.query||0!==this.options.length)&&(this.filterable&&this.query&&this.options.length>0&&0===this.filteredOptionsCount?this.noMatchText||this.t("el.select.noMatch"):0===this.options.length?this.noDataText||this.t("el.select.noData"):null)},showNewOption:function(){var e=this,n=this.options.filter((function(e){return!e.created})).some((function(n){return n.currentLabel===e.query}));return this.filterable&&this.allowCreate&&""!==this.query&&!n},selectSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},selectDisabled:function(){return this.disabled||(this.elForm||{}).disabled},collapseTagSize:function(){return["small","mini"].indexOf(this.selectSize)>-1?"mini":"small"},propPlaceholder:function(){return void 0!==this.placeholder?this.placeholder:this.t("el.select.placeholder")}},components:{ElInput:d.a,ElSelectMenu:v,ElOption:b.a,ElTag:w.a,ElScrollbar:_.a},directives:{Clickoutside:E.a},props:{name:String,id:String,value:{required:!0},autocomplete:{type:String,default:"off"},autoComplete:{type:String,validator:function(e){return!0}},automaticDropdown:Boolean,size:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:String,remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String,required:!1},defaultFirstOption:Boolean,reserveKeyword:Boolean,valueKey:{type:String,default:"value"},collapseTags:Boolean,popperAppendToBody:{type:Boolean,default:!0}},data:function(){return{options:[],cachedOptions:[],createdLabel:null,createdSelected:!1,selected:this.multiple?[]:{},inputLength:20,inputWidth:0,initialInputHeight:0,cachedPlaceHolder:"",optionsCount:0,filteredOptionsCount:0,visible:!1,softFocus:!1,selectedLabel:"",hoverIndex:-1,query:"",previousQuery:null,inputHovering:!1,currentPlaceholder:"",menuVisibleOnFocus:!1,isOnComposition:!1,isSilentBlur:!1}},watch:{selectDisabled:function(){var e=this;this.$nextTick((function(){e.resetInputHeight()}))},propPlaceholder:function(e){this.cachedPlaceHolder=this.currentPlaceholder=e},value:function(e,n){this.multiple&&(this.resetInputHeight(),e&&e.length>0||this.$refs.input&&""!==this.query?this.currentPlaceholder="":this.currentPlaceholder=this.cachedPlaceHolder,this.filterable&&!this.reserveKeyword&&(this.query="",this.handleQueryChange(this.query))),this.setSelected(),this.filterable&&!this.multiple&&(this.inputLength=20),Object(A.valueEquals)(e,n)||this.dispatch("ElFormItem","el.form.change",e)},visible:function(e){var n=this;e?(this.broadcast("ElSelectDropdown","updatePopper"),this.filterable&&(this.query=this.remote?"":this.selectedLabel,this.handleQueryChange(this.query),this.multiple?this.$refs.input.focus():(this.remote||(this.broadcast("ElOption","queryChange",""),this.broadcast("ElOptionGroup","queryChange")),this.selectedLabel&&(this.currentPlaceholder=this.selectedLabel,this.selectedLabel="")))):(this.broadcast("ElSelectDropdown","destroyPopper"),this.$refs.input&&this.$refs.input.blur(),this.query="",this.previousQuery=null,this.selectedLabel="",this.inputLength=20,this.menuVisibleOnFocus=!1,this.resetHoverIndex(),this.$nextTick((function(){n.$refs.input&&""===n.$refs.input.value&&0===n.selected.length&&(n.currentPlaceholder=n.cachedPlaceHolder)})),this.multiple||(this.selected&&(this.filterable&&this.allowCreate&&this.createdSelected&&this.createdLabel?this.selectedLabel=this.createdLabel:this.selectedLabel=this.selected.currentLabel,this.filterable&&(this.query=this.selectedLabel)),this.filterable&&(this.currentPlaceholder=this.cachedPlaceHolder))),this.$emit("visible-change",e)},options:function(){var e=this;if(!this.$isServer){this.$nextTick((function(){e.broadcast("ElSelectDropdown","updatePopper")})),this.multiple&&this.resetInputHeight();var n=this.$el.querySelectorAll("input");-1===[].indexOf.call(n,document.activeElement)&&this.setSelected(),this.defaultFirstOption&&(this.filterable||this.remote)&&this.filteredOptionsCount&&this.checkDefaultFirstOption()}}},methods:{handleComposition:function(e){var n=this,t=e.target.value;if("compositionend"===e.type)this.isOnComposition=!1,this.$nextTick((function(e){return n.handleQueryChange(t)}));else{var i=t[t.length-1]||"";this.isOnComposition=!Object(j.isKorean)(i)}},handleQueryChange:function(e){var n=this;this.previousQuery===e||this.isOnComposition||(null!==this.previousQuery||"function"!=typeof this.filterMethod&&"function"!=typeof this.remoteMethod?(this.previousQuery=e,this.$nextTick((function(){n.visible&&n.broadcast("ElSelectDropdown","updatePopper")})),this.hoverIndex=-1,this.multiple&&this.filterable&&this.$nextTick((function(){var e=15*n.$refs.input.value.length+20;n.inputLength=n.collapseTags?Math.min(50,e):e,n.managePlaceholder(),n.resetInputHeight()})),this.remote&&"function"==typeof this.remoteMethod?(this.hoverIndex=-1,this.remoteMethod(e)):"function"==typeof this.filterMethod?(this.filterMethod(e),this.broadcast("ElOptionGroup","queryChange")):(this.filteredOptionsCount=this.optionsCount,this.broadcast("ElOption","queryChange",e),this.broadcast("ElOptionGroup","queryChange")),this.defaultFirstOption&&(this.filterable||this.remote)&&this.filteredOptionsCount&&this.checkDefaultFirstOption()):this.previousQuery=e)},scrollToOption:function(e){var n=Array.isArray(e)&&e[0]?e[0].$el:e.$el;if(this.$refs.popper&&n){var t=this.$refs.popper.$el.querySelector(".el-select-dropdown__wrap");O()(t,n)}this.$refs.scrollbar&&this.$refs.scrollbar.handleScroll()},handleMenuEnter:function(){var e=this;this.$nextTick((function(){return e.scrollToOption(e.selected)}))},emitChange:function(e){Object(A.valueEquals)(this.value,e)||this.$emit("change",e)},getOption:function(e){for(var n=void 0,t="[object object]"===Object.prototype.toString.call(e).toLowerCase(),i="[object null]"===Object.prototype.toString.call(e).toLowerCase(),r="[object undefined]"===Object.prototype.toString.call(e).toLowerCase(),o=this.cachedOptions.length-1;o>=0;o--){var a=this.cachedOptions[o];if(t?Object(A.getValueByPath)(a.value,this.valueKey)===Object(A.getValueByPath)(e,this.valueKey):a.value===e){n=a;break}}if(n)return n;var s={value:e,currentLabel:t||i||r?"":e};return this.multiple&&(s.hitState=!1),s},setSelected:function(){var e=this;if(!this.multiple){var n=this.getOption(this.value);return n.created?(this.createdLabel=n.currentLabel,this.createdSelected=!0):this.createdSelected=!1,this.selectedLabel=n.currentLabel,this.selected=n,void(this.filterable&&(this.query=this.selectedLabel))}var t=[];Array.isArray(this.value)&&this.value.forEach((function(n){t.push(e.getOption(n))})),this.selected=t,this.$nextTick((function(){e.resetInputHeight()}))},handleFocus:function(e){this.softFocus?this.softFocus=!1:((this.automaticDropdown||this.filterable)&&(this.visible=!0,this.filterable&&(this.menuVisibleOnFocus=!0)),this.$emit("focus",e))},blur:function(){this.visible=!1,this.$refs.reference.blur()},handleBlur:function(e){var n=this;setTimeout((function(){n.isSilentBlur?n.isSilentBlur=!1:n.$emit("blur",e)}),50),this.softFocus=!1},handleClearClick:function(e){this.deleteSelected(e)},doDestroy:function(){this.$refs.popper&&this.$refs.popper.doDestroy()},handleClose:function(){this.visible=!1},toggleLastOptionHitState:function(e){if(Array.isArray(this.selected)){var n=this.selected[this.selected.length-1];if(n)return!0===e||!1===e?(n.hitState=e,e):(n.hitState=!n.hitState,n.hitState)}},deletePrevTag:function(e){if(e.target.value.length<=0&&!this.toggleLastOptionHitState()){var n=this.value.slice();n.pop(),this.$emit("input",n),this.emitChange(n)}},managePlaceholder:function(){""!==this.currentPlaceholder&&(this.currentPlaceholder=this.$refs.input.value?"":this.cachedPlaceHolder)},resetInputState:function(e){8!==e.keyCode&&this.toggleLastOptionHitState(!1),this.inputLength=15*this.$refs.input.value.length+20,this.resetInputHeight()},resetInputHeight:function(){var e=this;this.collapseTags&&!this.filterable||this.$nextTick((function(){if(e.$refs.reference){var n=e.$refs.reference.$el.childNodes,t=[].filter.call(n,(function(e){return"INPUT"===e.tagName}))[0],i=e.$refs.tags,r=e.initialInputHeight||40;t.style.height=0===e.selected.length?r+"px":Math.max(i?i.clientHeight+(i.clientHeight>r?6:0):0,r)+"px",e.visible&&!1!==e.emptyText&&e.broadcast("ElSelectDropdown","updatePopper")}}))},resetHoverIndex:function(){var e=this;setTimeout((function(){e.multiple?e.selected.length>0?e.hoverIndex=Math.min.apply(null,e.selected.map((function(n){return e.options.indexOf(n)}))):e.hoverIndex=-1:e.hoverIndex=e.options.indexOf(e.selected)}),300)},handleOptionSelect:function(e,n){var t=this;if(this.multiple){var i=(this.value||[]).slice(),r=this.getValueIndex(i,e.value);r>-1?i.splice(r,1):(this.multipleLimit<=0||i.length<this.multipleLimit)&&i.push(e.value),this.$emit("input",i),this.emitChange(i),e.created&&(this.query="",this.handleQueryChange(""),this.inputLength=20),this.filterable&&this.$refs.input.focus()}else this.$emit("input",e.value),this.emitChange(e.value),this.visible=!1;this.isSilentBlur=n,this.setSoftFocus(),this.visible||this.$nextTick((function(){t.scrollToOption(e)}))},setSoftFocus:function(){this.softFocus=!0;var e=this.$refs.input||this.$refs.reference;e&&e.focus()},getValueIndex:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments[1],t="[object object]"===Object.prototype.toString.call(n).toLowerCase();if(t){var i=this.valueKey,r=-1;return e.some((function(e,t){return Object(A.getValueByPath)(e,i)===Object(A.getValueByPath)(n,i)&&(r=t,!0)})),r}return e.indexOf(n)},toggleMenu:function(){this.selectDisabled||(this.menuVisibleOnFocus?this.menuVisibleOnFocus=!1:this.visible=!this.visible,this.visible&&(this.$refs.input||this.$refs.reference).focus())},selectOption:function(){this.visible?this.options[this.hoverIndex]&&this.handleOptionSelect(this.options[this.hoverIndex]):this.toggleMenu()},deleteSelected:function(e){e.stopPropagation();var n=this.multiple?[]:"";this.$emit("input",n),this.emitChange(n),this.visible=!1,this.$emit("clear")},deleteTag:function(e,n){var t=this.selected.indexOf(n);if(t>-1&&!this.selectDisabled){var i=this.value.slice();i.splice(t,1),this.$emit("input",i),this.emitChange(i),this.$emit("remove-tag",n.value)}e.stopPropagation()},onInputChange:function(){this.filterable&&this.query!==this.selectedLabel&&(this.query=this.selectedLabel,this.handleQueryChange(this.query))},onOptionDestroy:function(e){e>-1&&(this.optionsCount--,this.filteredOptionsCount--,this.options.splice(e,1))},resetInputWidth:function(){this.inputWidth=this.$refs.reference.$el.getBoundingClientRect().width},handleResize:function(){this.resetInputWidth(),this.multiple&&this.resetInputHeight()},checkDefaultFirstOption:function(){this.hoverIndex=-1;for(var e=!1,n=this.options.length-1;n>=0;n--)if(this.options[n].created){e=!0,this.hoverIndex=n;break}if(!e)for(var t=0;t!==this.options.length;++t){var i=this.options[t];if(this.query){if(!i.disabled&&!i.groupDisabled&&i.visible){this.hoverIndex=t;break}}else if(i.itemSelected){this.hoverIndex=t;break}}},getValueKey:function(e){return"[object object]"!==Object.prototype.toString.call(e.value).toLowerCase()?e.value:Object(A.getValueByPath)(e.value,this.valueKey)}},created:function(){var e=this;this.cachedPlaceHolder=this.currentPlaceholder=this.propPlaceholder,this.multiple&&!Array.isArray(this.value)&&this.$emit("input",[]),!this.multiple&&Array.isArray(this.value)&&this.$emit("input",""),this.debouncedOnInputChange=k()(this.debounce,(function(){e.onInputChange()})),this.debouncedQueryChange=k()(this.debounce,(function(n){e.handleQueryChange(n.target.value)})),this.$on("handleOptionClick",this.handleOptionSelect),this.$on("setSelected",this.setSelected)},mounted:function(){var e=this;this.multiple&&Array.isArray(this.value)&&this.value.length>0&&(this.currentPlaceholder=""),Object(T.addResizeListener)(this.$el,this.handleResize);var n=this.$refs.reference;if(n&&n.$el){var t=n.$el.querySelector("input");this.initialInputHeight=t.getBoundingClientRect().height||{medium:36,small:32,mini:28}[this.selectSize]}this.remote&&this.multiple&&this.resetInputHeight(),this.$nextTick((function(){n&&n.$el&&(e.inputWidth=n.$el.getBoundingClientRect().width)})),this.setSelected()},beforeDestroy:function(){this.$el&&this.handleResize&&Object(T.removeResizeListener)(this.$el,this.handleResize)}},D=Object(m.a)(I,i,[],!1,null,null,null);D.options.__file="packages/select/src/select.vue";var M=D.exports;M.install=function(e){e.component(M.name,M)};n.default=M}})},function(e,n,t){e.exports=function(e){var n={};function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(i,r,function(n){return e[n]}.bind(null,r));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/dist/",t(t.s=53)}({0:function(e,n,t){"use strict";function i(e,n,t,i,r,o,a,s){var l,c="function"==typeof e?e.options:e;if(n&&(c.render=n,c.staticRenderFns=t,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,n){return l.call(n),u(e,n)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:c}}t.d(n,"a",(function(){return i}))},3:function(e,n){e.exports=t(27)},33:function(e,n,t){"use strict";var i=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("li",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-select-dropdown__item",class:{selected:e.itemSelected,"is-disabled":e.disabled||e.groupDisabled||e.limitReached,hover:e.hover},on:{mouseenter:e.hoverItem,click:function(n){return n.stopPropagation(),e.selectOptionClick(n)}}},[e._t("default",[t("span",[e._v(e._s(e.currentLabel))])])],2)};i._withStripped=!0;var r=t(4),o=t.n(r),a=t(3),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l={mixins:[o.a],name:"ElOption",componentName:"ElOption",inject:["select"],props:{value:{required:!0},label:[String,Number],created:Boolean,disabled:{type:Boolean,default:!1}},data:function(){return{index:-1,groupDisabled:!1,visible:!0,hitState:!1,hover:!1}},computed:{isObject:function(){return"[object object]"===Object.prototype.toString.call(this.value).toLowerCase()},currentLabel:function(){return this.label||(this.isObject?"":this.value)},currentValue:function(){return this.value||this.label||""},itemSelected:function(){return this.select.multiple?this.contains(this.select.value,this.value):this.isEqual(this.value,this.select.value)},limitReached:function(){return!!this.select.multiple&&(!this.itemSelected&&(this.select.value||[]).length>=this.select.multipleLimit&&this.select.multipleLimit>0)}},watch:{currentLabel:function(){this.created||this.select.remote||this.dispatch("ElSelect","setSelected")},value:function(e,n){var t=this.select,i=t.remote,r=t.valueKey;if(!this.created&&!i){if(r&&"object"===(void 0===e?"undefined":s(e))&&"object"===(void 0===n?"undefined":s(n))&&e[r]===n[r])return;this.dispatch("ElSelect","setSelected")}}},methods:{isEqual:function(e,n){if(this.isObject){var t=this.select.valueKey;return Object(a.getValueByPath)(e,t)===Object(a.getValueByPath)(n,t)}return e===n},contains:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments[1];if(this.isObject){var t=this.select.valueKey;return e&&e.some((function(e){return Object(a.getValueByPath)(e,t)===Object(a.getValueByPath)(n,t)}))}return e&&e.indexOf(n)>-1},handleGroupDisabled:function(e){this.groupDisabled=e},hoverItem:function(){this.disabled||this.groupDisabled||(this.select.hoverIndex=this.select.options.indexOf(this))},selectOptionClick:function(){!0!==this.disabled&&!0!==this.groupDisabled&&this.dispatch("ElSelect","handleOptionClick",[this,!0])},queryChange:function(e){this.visible=new RegExp(Object(a.escapeRegexpString)(e),"i").test(this.currentLabel)||this.created,this.visible||this.select.filteredOptionsCount--}},created:function(){this.select.options.push(this),this.select.cachedOptions.push(this),this.select.optionsCount++,this.select.filteredOptionsCount++,this.$on("queryChange",this.queryChange),this.$on("handleGroupDisabled",this.handleGroupDisabled)},beforeDestroy:function(){var e=this.select,n=e.selected,t=e.multiple?n:[n],i=this.select.cachedOptions.indexOf(this),r=t.indexOf(this);i>-1&&r<0&&this.select.cachedOptions.splice(i,1),this.select.onOptionDestroy(this.select.options.indexOf(this))}},c=t(0),u=Object(c.a)(l,i,[],!1,null,null,null);u.options.__file="packages/select/src/option.vue";n.a=u.exports},4:function(e,n){e.exports=t(45)},53:function(e,n,t){"use strict";t.r(n);var i=t(33);i.a.install=function(e){e.component(i.a.name,i.a)},n.default=i.a}})},function(e,n,t){e.exports=t(510)},function(e,n,t){"use strict";var i=t(511),r=t(512);function o(e){var n=0,t=0,i=0,r=0;return"detail"in e&&(t=e.detail),"wheelDelta"in e&&(t=-e.wheelDelta/120),"wheelDeltaY"in e&&(t=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(n=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(n=t,t=0),i=10*n,r=10*t,"deltaY"in e&&(r=e.deltaY),"deltaX"in e&&(i=e.deltaX),(i||r)&&e.deltaMode&&(1==e.deltaMode?(i*=40,r*=40):(i*=800,r*=800)),i&&!n&&(n=i<1?-1:1),r&&!t&&(t=r<1?-1:1),{spinX:n,spinY:t,pixelX:i,pixelY:r}}o.getEventType=function(){return i.firefox()?"DOMMouseScroll":r("wheel")?"wheel":"mousewheel"},e.exports=o},function(e,n){var t,i,r,o,a,s,l,c,u,d,h,p,f,m,g,v=!1;function b(){if(!v){v=!0;var e=navigator.userAgent,n=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),b=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(p=/\b(iPhone|iP[ao]d)/.exec(e),f=/\b(iP[ao]d)/.exec(e),d=/Android/i.exec(e),m=/FBAN\/\w+;/i.exec(e),g=/Mobile/i.exec(e),h=!!/Win64/.exec(e),n){(t=n[1]?parseFloat(n[1]):n[5]?parseFloat(n[5]):NaN)&&document&&document.documentMode&&(t=document.documentMode);var y=/(?:Trident\/(\d+.\d+))/.exec(e);s=y?parseFloat(y[1])+4:t,i=n[2]?parseFloat(n[2]):NaN,r=n[3]?parseFloat(n[3]):NaN,(o=n[4]?parseFloat(n[4]):NaN)?(n=/(?:Chrome\/(\d+\.\d+))/.exec(e),a=n&&n[1]?parseFloat(n[1]):NaN):a=NaN}else t=i=r=a=o=NaN;if(b){if(b[1]){var w=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);l=!w||parseFloat(w[1].replace("_","."))}else l=!1;c=!!b[2],u=!!b[3]}else l=c=u=!1}}var y={ie:function(){return b()||t},ieCompatibilityMode:function(){return b()||s>t},ie64:function(){return y.ie()&&h},firefox:function(){return b()||i},opera:function(){return b()||r},webkit:function(){return b()||o},safari:function(){return y.webkit()},chrome:function(){return b()||a},windows:function(){return b()||c},osx:function(){return b()||l},linux:function(){return b()||u},iphone:function(){return b()||p},mobile:function(){return b()||p||f||d||g},nativeApp:function(){return b()||m},android:function(){return b()||d},ipad:function(){return b()||f}};e.exports=y},function(e,n,t){"use strict";var i,r=t(513);r.canUseDOM&&(i=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("",""))
/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */,e.exports=function(e,n){if(!r.canUseDOM||n&&!("addEventListener"in document))return!1;var t="on"+e,o=t in document;if(!o){var a=document.createElement("div");a.setAttribute(t,"return;"),o="function"==typeof a[t]}return!o&&i&&"wheel"===e&&(o=document.implementation.hasFeature("Events.wheel","3.0")),o}},function(e,n,t){"use strict";var i=!("undefined"==typeof window||!window.document||!window.document.createElement),r={canUseDOM:i,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:i&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:i&&!!window.screen,isInWorker:!i};e.exports=r},function(e,n,t){"use strict";n.__esModule=!0;var i,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=t(173),a=(i=o)&&i.__esModule?i:{default:i};var s,l=l||{};l.Dialog=function(e,n,t){var i=this;if(this.dialogNode=e,null===this.dialogNode||"dialog"!==this.dialogNode.getAttribute("role"))throw new Error("Dialog() requires a DOM element with ARIA role of dialog.");"string"==typeof n?this.focusAfterClosed=document.getElementById(n):"object"===(void 0===n?"undefined":r(n))?this.focusAfterClosed=n:this.focusAfterClosed=null,"string"==typeof t?this.focusFirst=document.getElementById(t):"object"===(void 0===t?"undefined":r(t))?this.focusFirst=t:this.focusFirst=null,this.focusFirst?this.focusFirst.focus():a.default.focusFirstDescendant(this.dialogNode),this.lastFocus=document.activeElement,s=function(e){i.trapFocus(e)},this.addListeners()},l.Dialog.prototype.addListeners=function(){document.addEventListener("focus",s,!0)},l.Dialog.prototype.removeListeners=function(){document.removeEventListener("focus",s,!0)},l.Dialog.prototype.closeDialog=function(){var e=this;this.removeListeners(),this.focusAfterClosed&&setTimeout((function(){e.focusAfterClosed.focus()}))},l.Dialog.prototype.trapFocus=function(e){a.default.IgnoreUtilFocusChanges||(this.dialogNode.contains(e.target)?this.lastFocus=e.target:(a.default.focusFirstDescendant(this.dialogNode),this.lastFocus===document.activeElement&&a.default.focusLastDescendant(this.dialogNode),this.lastFocus=document.activeElement))},n.default=l.Dialog},function(e,n,t){e.exports={default:t(516),__esModule:!0}},function(e,n,t){t(517),e.exports=t(77).Object.assign},function(e,n,t){var i=t(174);i(i.S+i.F,"Object",{assign:t(520)})},function(e,n,t){var i=t(519);e.exports=function(e,n,t){if(i(e),void 0===n)return e;switch(t){case 1:return function(t){return e.call(n,t)};case 2:return function(t,i){return e.call(n,t,i)};case 3:return function(t,i,r){return e.call(n,t,i,r)}}return function(){return e.apply(n,arguments)}}},function(e,n){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,n,t){"use strict";var i=t(46),r=t(114),o=t(181),a=t(117),s=t(182),l=t(299),c=Object.assign;e.exports=!c||t(79)((function(){var e={},n={},t=Symbol(),i="abcdefghijklmnopqrst";return e[t]=7,i.split("").forEach((function(e){n[e]=e})),7!=c({},e)[t]||Object.keys(c({},n)).join("")!=i}))?function(e,n){for(var t=s(e),c=arguments.length,u=1,d=o.f,h=a.f;c>u;)for(var p,f=l(arguments[u++]),m=d?r(f).concat(d(f)):r(f),g=m.length,v=0;g>v;)p=m[v++],i&&!h.call(f,p)||(t[p]=f[p]);return t}:c},function(e,n,t){var i=t(60),r=t(522),o=t(523);e.exports=function(e){return function(n,t,a){var s,l=i(n),c=r(l.length),u=o(a,c);if(e&&t!=t){for(;c>u;)if((s=l[u++])!=s)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===t)return e||u||0;return!e&&-1}}},function(e,n,t){var i=t(177),r=Math.min;e.exports=function(e){return e>0?r(i(e),9007199254740991):0}},function(e,n,t){var i=t(177),r=Math.max,o=Math.min;e.exports=function(e,n){return(e=i(e))<0?r(e+n,0):o(e,n)}},function(e,n,t){e.exports={default:t(525),__esModule:!0}},function(e,n,t){t(526),t(532),e.exports=t(185).f("iterator")},function(e,n,t){"use strict";var i=t(527)(!0);t(301)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,n=this._t,t=this._i;return t>=n.length?{value:void 0,done:!0}:(e=i(n,t),this._i+=e.length,{value:e,done:!1})}))},function(e,n,t){var i=t(177),r=t(176);e.exports=function(e){return function(n,t){var o,a,s=String(r(n)),l=i(t),c=s.length;return l<0||l>=c?e?"":void 0:(o=s.charCodeAt(l))<55296||o>56319||l+1===c||(a=s.charCodeAt(l+1))<56320||a>57343?e?s.charAt(l):o:e?s.slice(l,l+2):a-56320+(o-55296<<10)+65536}}},function(e,n,t){"use strict";var i=t(303),r=t(113),o=t(184),a={};t(58)(a,t(61)("iterator"),(function(){return this})),e.exports=function(e,n,t){e.prototype=i(a,{next:r(1,t)}),o(e,n+" Iterator")}},function(e,n,t){var i=t(59),r=t(112),o=t(114);e.exports=t(46)?Object.defineProperties:function(e,n){r(e);for(var t,a=o(n),s=a.length,l=0;s>l;)i.f(e,t=a[l++],n[t]);return e}},function(e,n,t){var i=t(37).document;e.exports=i&&i.documentElement},function(e,n,t){var i=t(47),r=t(182),o=t(178)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),i(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,n,t){t(533);for(var i=t(37),r=t(58),o=t(183),a=t(61)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<s.length;l++){var c=s[l],u=i[c],d=u&&u.prototype;d&&!d[a]&&r(d,a,c),o[c]=o.Array}},function(e,n,t){"use strict";var i=t(534),r=t(535),o=t(183),a=t(60);e.exports=t(301)(Array,"Array",(function(e,n){this._t=a(e),this._i=0,this._k=n}),(function(){var e=this._t,n=this._k,t=this._i++;return!e||t>=e.length?(this._t=void 0,r(1)):r(0,"keys"==n?t:"values"==n?e[t]:[t,e[t]])}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(e,n){e.exports=function(){}},function(e,n){e.exports=function(e,n){return{value:n,done:!!e}}},function(e,n,t){e.exports={default:t(537),__esModule:!0}},function(e,n,t){t(538),t(544),t(545),t(546),e.exports=t(77).Symbol},function(e,n,t){"use strict";var i=t(37),r=t(47),o=t(46),a=t(174),s=t(302),l=t(539).KEY,c=t(79),u=t(179),d=t(184),h=t(116),p=t(61),f=t(185),m=t(186),g=t(540),v=t(541),b=t(112),y=t(78),w=t(182),x=t(60),_=t(175),S=t(113),k=t(303),C=t(542),E=t(543),T=t(181),P=t(59),O=t(114),A=E.f,j=P.f,I=C.f,D=i.Symbol,M=i.JSON,L=M&&M.stringify,N=p("_hidden"),$=p("toPrimitive"),F={}.propertyIsEnumerable,R=u("symbol-registry"),B=u("symbols"),V=u("op-symbols"),z=Object.prototype,q="function"==typeof D&&!!T.f,H=i.QObject,W=!H||!H.prototype||!H.prototype.findChild,U=o&&c((function(){return 7!=k(j({},"a",{get:function(){return j(this,"a",{value:7}).a}})).a}))?function(e,n,t){var i=A(z,n);i&&delete z[n],j(e,n,t),i&&e!==z&&j(z,n,i)}:j,J=function(e){var n=B[e]=k(D.prototype);return n._k=e,n},Y=q&&"symbol"==typeof D.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof D},G=function(e,n,t){return e===z&&G(V,n,t),b(e),n=_(n,!0),b(t),r(B,n)?(t.enumerable?(r(e,N)&&e[N][n]&&(e[N][n]=!1),t=k(t,{enumerable:S(0,!1)})):(r(e,N)||j(e,N,S(1,{})),e[N][n]=!0),U(e,n,t)):j(e,n,t)},K=function(e,n){b(e);for(var t,i=g(n=x(n)),r=0,o=i.length;o>r;)G(e,t=i[r++],n[t]);return e},X=function(e){var n=F.call(this,e=_(e,!0));return!(this===z&&r(B,e)&&!r(V,e))&&(!(n||!r(this,e)||!r(B,e)||r(this,N)&&this[N][e])||n)},Q=function(e,n){if(e=x(e),n=_(n,!0),e!==z||!r(B,n)||r(V,n)){var t=A(e,n);return!t||!r(B,n)||r(e,N)&&e[N][n]||(t.enumerable=!0),t}},Z=function(e){for(var n,t=I(x(e)),i=[],o=0;t.length>o;)r(B,n=t[o++])||n==N||n==l||i.push(n);return i},ee=function(e){for(var n,t=e===z,i=I(t?V:x(e)),o=[],a=0;i.length>a;)!r(B,n=i[a++])||t&&!r(z,n)||o.push(B[n]);return o};q||(s((D=function(){if(this instanceof D)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),n=function(t){this===z&&n.call(V,t),r(this,N)&&r(this[N],e)&&(this[N][e]=!1),U(this,e,S(1,t))};return o&&W&&U(z,e,{configurable:!0,set:n}),J(e)}).prototype,"toString",(function(){return this._k})),E.f=Q,P.f=G,t(304).f=C.f=Z,t(117).f=X,T.f=ee,o&&!t(115)&&s(z,"propertyIsEnumerable",X,!0),f.f=function(e){return J(p(e))}),a(a.G+a.W+a.F*!q,{Symbol:D});for(var ne="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),te=0;ne.length>te;)p(ne[te++]);for(var ie=O(p.store),re=0;ie.length>re;)m(ie[re++]);a(a.S+a.F*!q,"Symbol",{for:function(e){return r(R,e+="")?R[e]:R[e]=D(e)},keyFor:function(e){if(!Y(e))throw TypeError(e+" is not a symbol!");for(var n in R)if(R[n]===e)return n},useSetter:function(){W=!0},useSimple:function(){W=!1}}),a(a.S+a.F*!q,"Object",{create:function(e,n){return void 0===n?k(e):K(k(e),n)},defineProperty:G,defineProperties:K,getOwnPropertyDescriptor:Q,getOwnPropertyNames:Z,getOwnPropertySymbols:ee});var oe=c((function(){T.f(1)}));a(a.S+a.F*oe,"Object",{getOwnPropertySymbols:function(e){return T.f(w(e))}}),M&&a(a.S+a.F*(!q||c((function(){var e=D();return"[null]"!=L([e])||"{}"!=L({a:e})||"{}"!=L(Object(e))}))),"JSON",{stringify:function(e){for(var n,t,i=[e],r=1;arguments.length>r;)i.push(arguments[r++]);if(t=n=i[1],(y(n)||void 0!==e)&&!Y(e))return v(n)||(n=function(e,n){if("function"==typeof t&&(n=t.call(this,e,n)),!Y(n))return n}),i[1]=n,L.apply(M,i)}}),D.prototype[$]||t(58)(D.prototype,$,D.prototype.valueOf),d(D,"Symbol"),d(Math,"Math",!0),d(i.JSON,"JSON",!0)},function(e,n,t){var i=t(116)("meta"),r=t(78),o=t(47),a=t(59).f,s=0,l=Object.isExtensible||function(){return!0},c=!t(79)((function(){return l(Object.preventExtensions({}))})),u=function(e){a(e,i,{value:{i:"O"+ ++s,w:{}}})},d=e.exports={KEY:i,NEED:!1,fastKey:function(e,n){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,i)){if(!l(e))return"F";if(!n)return"E";u(e)}return e[i].i},getWeak:function(e,n){if(!o(e,i)){if(!l(e))return!0;if(!n)return!1;u(e)}return e[i].w},onFreeze:function(e){return c&&d.NEED&&l(e)&&!o(e,i)&&u(e),e}}},function(e,n,t){var i=t(114),r=t(181),o=t(117);e.exports=function(e){var n=i(e),t=r.f;if(t)for(var a,s=t(e),l=o.f,c=0;s.length>c;)l.call(e,a=s[c++])&&n.push(a);return n}},function(e,n,t){var i=t(300);e.exports=Array.isArray||function(e){return"Array"==i(e)}},function(e,n,t){var i=t(60),r=t(304).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?function(e){try{return r(e)}catch(e){return a.slice()}}(e):r(i(e))}},function(e,n,t){var i=t(117),r=t(113),o=t(60),a=t(175),s=t(47),l=t(296),c=Object.getOwnPropertyDescriptor;n.f=t(46)?c:function(e,n){if(e=o(e),n=a(n,!0),l)try{return c(e,n)}catch(e){}if(s(e,n))return r(!i.f.call(e,n),e[n])}},function(e,n){},function(e,n,t){t(186)("asyncIterator")},function(e,n,t){t(186)("observable")},function(e,n,t){e.exports=function(e){var n={};function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(i,r,function(n){return e[n]}.bind(null,r));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/dist/",t(t.s=114)}({0:function(e,n,t){"use strict";function i(e,n,t,i,r,o,a,s){var l,c="function"==typeof e?e.options:e;if(n&&(c.render=n,c.staticRenderFns=t,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,n){return l.call(n),u(e,n)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:c}}t.d(n,"a",(function(){return i}))},10:function(e,n){e.exports=t(167)},114:function(e,n,t){"use strict";t.r(n);var i=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{class:["el-input-number",e.inputNumberSize?"el-input-number--"+e.inputNumberSize:"",{"is-disabled":e.inputNumberDisabled},{"is-without-controls":!e.controls},{"is-controls-right":e.controlsAtRight}],on:{dragstart:function(e){e.preventDefault()}}},[e.controls?t("span",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.decrease,expression:"decrease"}],staticClass:"el-input-number__decrease",class:{"is-disabled":e.minDisabled},attrs:{role:"button"},on:{keydown:function(n){return!("button"in n)&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.decrease(n)}}},[t("i",{class:"el-icon-"+(e.controlsAtRight?"arrow-down":"minus")})]):e._e(),e.controls?t("span",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.increase,expression:"increase"}],staticClass:"el-input-number__increase",class:{"is-disabled":e.maxDisabled},attrs:{role:"button"},on:{keydown:function(n){return!("button"in n)&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.increase(n)}}},[t("i",{class:"el-icon-"+(e.controlsAtRight?"arrow-up":"plus")})]):e._e(),t("el-input",{ref:"input",attrs:{value:e.displayValue,placeholder:e.placeholder,disabled:e.inputNumberDisabled,size:e.inputNumberSize,max:e.max,min:e.min,name:e.name,label:e.label},on:{blur:e.handleBlur,focus:e.handleFocus,input:e.handleInput,change:e.handleInputChange},nativeOn:{keydown:[function(n){return!("button"in n)&&e._k(n.keyCode,"up",38,n.key,["Up","ArrowUp"])?null:(n.preventDefault(),e.increase(n))},function(n){return!("button"in n)&&e._k(n.keyCode,"down",40,n.key,["Down","ArrowDown"])?null:(n.preventDefault(),e.decrease(n))}]}})],1)};i._withStripped=!0;var r=t(10),o=t.n(r),a=t(22),s=t.n(a),l=t(30),c={name:"ElInputNumber",mixins:[s()("input")],inject:{elForm:{default:""},elFormItem:{default:""}},directives:{repeatClick:l.a},components:{ElInput:o.a},props:{step:{type:Number,default:1},stepStrictly:{type:Boolean,default:!1},max:{type:Number,default:1/0},min:{type:Number,default:-1/0},value:{},disabled:Boolean,size:String,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:""},name:String,label:String,placeholder:String,precision:{type:Number,validator:function(e){return e>=0&&e===parseInt(e,10)}}},data:function(){return{currentValue:0,userInput:null}},watch:{value:{immediate:!0,handler:function(e){var n=void 0===e?e:Number(e);if(void 0!==n){if(isNaN(n))return;if(this.stepStrictly){var t=this.getPrecision(this.step),i=Math.pow(10,t);n=Math.round(n/this.step)*i*this.step/i}void 0!==this.precision&&(n=this.toPrecision(n,this.precision))}n>=this.max&&(n=this.max),n<=this.min&&(n=this.min),this.currentValue=n,this.userInput=null,this.$emit("input",n)}}},computed:{minDisabled:function(){return this._decrease(this.value,this.step)<this.min},maxDisabled:function(){return this._increase(this.value,this.step)>this.max},numPrecision:function(){var e=this.value,n=this.step,t=this.getPrecision,i=this.precision,r=t(n);return void 0!==i?(r>i&&console.warn("[Element Warn][InputNumber]precision should not be less than the decimal places of step"),i):Math.max(t(e),r)},controlsAtRight:function(){return this.controls&&"right"===this.controlsPosition},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},inputNumberSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},inputNumberDisabled:function(){return this.disabled||!!(this.elForm||{}).disabled},displayValue:function(){if(null!==this.userInput)return this.userInput;var e=this.currentValue;if("number"==typeof e){if(this.stepStrictly){var n=this.getPrecision(this.step),t=Math.pow(10,n);e=Math.round(e/this.step)*t*this.step/t}void 0!==this.precision&&(e=e.toFixed(this.precision))}return e}},methods:{toPrecision:function(e,n){return void 0===n&&(n=this.numPrecision),parseFloat(Math.round(e*Math.pow(10,n))/Math.pow(10,n))},getPrecision:function(e){if(void 0===e)return 0;var n=e.toString(),t=n.indexOf("."),i=0;return-1!==t&&(i=n.length-t-1),i},_increase:function(e,n){if("number"!=typeof e&&void 0!==e)return this.currentValue;var t=Math.pow(10,this.numPrecision);return this.toPrecision((t*e+t*n)/t)},_decrease:function(e,n){if("number"!=typeof e&&void 0!==e)return this.currentValue;var t=Math.pow(10,this.numPrecision);return this.toPrecision((t*e-t*n)/t)},increase:function(){if(!this.inputNumberDisabled&&!this.maxDisabled){var e=this.value||0,n=this._increase(e,this.step);this.setCurrentValue(n)}},decrease:function(){if(!this.inputNumberDisabled&&!this.minDisabled){var e=this.value||0,n=this._decrease(e,this.step);this.setCurrentValue(n)}},handleBlur:function(e){this.$emit("blur",e)},handleFocus:function(e){this.$emit("focus",e)},setCurrentValue:function(e){var n=this.currentValue;"number"==typeof e&&void 0!==this.precision&&(e=this.toPrecision(e,this.precision)),e>=this.max&&(e=this.max),e<=this.min&&(e=this.min),n!==e&&(this.userInput=null,this.$emit("input",e),this.$emit("change",e,n),this.currentValue=e)},handleInput:function(e){this.userInput=e},handleInputChange:function(e){var n=""===e?void 0:Number(e);isNaN(n)&&""!==e||this.setCurrentValue(n),this.userInput=null},select:function(){this.$refs.input.select()}},mounted:function(){var e=this.$refs.input.$refs.input;e.setAttribute("role","spinbutton"),e.setAttribute("aria-valuemax",this.max),e.setAttribute("aria-valuemin",this.min),e.setAttribute("aria-valuenow",this.currentValue),e.setAttribute("aria-disabled",this.inputNumberDisabled)},updated:function(){this.$refs&&this.$refs.input&&this.$refs.input.$refs.input.setAttribute("aria-valuenow",this.currentValue)}},u=t(0),d=Object(u.a)(c,i,[],!1,null,null,null);d.options.__file="packages/input-number/src/input-number.vue";var h=d.exports;h.install=function(e){e.component(h.name,h)};n.default=h},2:function(e,n){e.exports=t(33)},22:function(e,n){e.exports=t(171)},30:function(e,n,t){"use strict";var i=t(2);n.a={bind:function(e,n,t){var r=null,o=void 0,a=function(){return t.context[n.expression].apply()},s=function(){Date.now()-o<100&&a(),clearInterval(r),r=null};Object(i.on)(e,"mousedown",(function(e){0===e.button&&(o=Date.now(),Object(i.once)(document,"mouseup",s),clearInterval(r),r=setInterval(a,100))}))}}}})},function(e,n,t){e.exports=function(e){var n={};function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(i,r,function(n){return e[n]}.bind(null,r));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/dist/",t(t.s=59)}({0:function(e,n,t){"use strict";function i(e,n,t,i,r,o,a,s){var l,c="function"==typeof e?e.options:e;if(n&&(c.render=n,c.staticRenderFns=t,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,n){return l.call(n),u(e,n)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:c}}t.d(n,"a",(function(){return i}))},14:function(e,n){e.exports=t(170)},18:function(e,n){e.exports=t(294)},21:function(e,n){e.exports=t(110)},26:function(e,n){e.exports=t(197)},3:function(e,n){e.exports=t(27)},31:function(e,n){e.exports=t(172)},40:function(e,n){e.exports=t(173)},51:function(e,n){e.exports=t(305)},59:function(e,n,t){"use strict";t.r(n);var i=function(){var e=this.$createElement,n=this._self._c||e;return n("div",{class:["el-cascader-panel",this.border&&"is-bordered"],on:{keydown:this.handleKeyDown}},this._l(this.menus,(function(e,t){return n("cascader-menu",{key:t,ref:"menu",refInFor:!0,attrs:{index:t,nodes:e}})})),1)};i._withStripped=!0;var r=t(26),o=t.n(r),a=t(14),s=t.n(a),l=t(18),c=t.n(l),u=t(51),d=t.n(u),h=t(3),p=function(e){return e.stopPropagation()},f={inject:["panel"],components:{ElCheckbox:c.a,ElRadio:d.a},props:{node:{required:!0},nodeId:String},computed:{config:function(){return this.panel.config},isLeaf:function(){return this.node.isLeaf},isDisabled:function(){return this.node.isDisabled},checkedValue:function(){return this.panel.checkedValue},isChecked:function(){return this.node.isSameNode(this.checkedValue)},inActivePath:function(){return this.isInPath(this.panel.activePath)},inCheckedPath:function(){var e=this;return!!this.config.checkStrictly&&this.panel.checkedNodePaths.some((function(n){return e.isInPath(n)}))},value:function(){return this.node.getValueByOption()}},methods:{handleExpand:function(){var e=this,n=this.panel,t=this.node,i=this.isDisabled,r=this.config,o=r.multiple;!r.checkStrictly&&i||t.loading||(r.lazy&&!t.loaded?n.lazyLoad(t,(function(){var n=e.isLeaf;if(n||e.handleExpand(),o){var i=!!n&&t.checked;e.handleMultiCheckChange(i)}})):n.handleExpand(t))},handleCheckChange:function(){var e=this.panel,n=this.value,t=this.node;e.handleCheckChange(n),e.handleExpand(t)},handleMultiCheckChange:function(e){this.node.doCheck(e),this.panel.calculateMultiCheckedValue()},isInPath:function(e){var n=this.node;return(e[n.level-1]||{}).uid===n.uid},renderPrefix:function(e){var n=this.isLeaf,t=this.isChecked,i=this.config,r=i.checkStrictly;return i.multiple?this.renderCheckbox(e):r?this.renderRadio(e):n&&t?this.renderCheckIcon(e):null},renderPostfix:function(e){var n=this.node,t=this.isLeaf;return n.loading?this.renderLoadingIcon(e):t?null:this.renderExpandIcon(e)},renderCheckbox:function(e){var n=this.node,t=this.config,i=this.isDisabled,r={on:{change:this.handleMultiCheckChange},nativeOn:{}};return t.checkStrictly&&(r.nativeOn.click=p),e("el-checkbox",o()([{attrs:{value:n.checked,indeterminate:n.indeterminate,disabled:i}},r]))},renderRadio:function(e){var n=this.checkedValue,t=this.value,i=this.isDisabled;return Object(h.isEqual)(t,n)&&(t=n),e("el-radio",{attrs:{value:n,label:t,disabled:i},on:{change:this.handleCheckChange},nativeOn:{click:p}},[e("span")])},renderCheckIcon:function(e){return e("i",{class:"el-icon-check el-cascader-node__prefix"})},renderLoadingIcon:function(e){return e("i",{class:"el-icon-loading el-cascader-node__postfix"})},renderExpandIcon:function(e){return e("i",{class:"el-icon-arrow-right el-cascader-node__postfix"})},renderContent:function(e){var n=this.panel,t=this.node,i=n.renderLabelFn;return e("span",{class:"el-cascader-node__label"},[(i?i({node:t,data:t.data}):null)||t.label])}},render:function(e){var n=this,t=this.inActivePath,i=this.inCheckedPath,r=this.isChecked,a=this.isLeaf,s=this.isDisabled,l=this.config,c=this.nodeId,u=l.expandTrigger,d=l.checkStrictly,h=l.multiple,p=!d&&s,f={on:{}};return"click"===u?f.on.click=this.handleExpand:(f.on.mouseenter=function(e){n.handleExpand(),n.$emit("expand",e)},f.on.focus=function(e){n.handleExpand(),n.$emit("expand",e)}),!a||s||d||h||(f.on.click=this.handleCheckChange),e("li",o()([{attrs:{role:"menuitem",id:c,"aria-expanded":t,tabindex:p?null:-1},class:{"el-cascader-node":!0,"is-selectable":d,"in-active-path":t,"in-checked-path":i,"is-active":r,"is-disabled":p}},f]),[this.renderPrefix(e),this.renderContent(e),this.renderPostfix(e)])}},m=t(0),g=Object(m.a)(f,void 0,void 0,!1,null,null,null);g.options.__file="packages/cascader-panel/src/cascader-node.vue";var v=g.exports,b=t(6),y={name:"ElCascaderMenu",mixins:[t.n(b).a],inject:["panel"],components:{ElScrollbar:s.a,CascaderNode:v},props:{nodes:{type:Array,required:!0},index:Number},data:function(){return{activeNode:null,hoverTimer:null,id:Object(h.generateId)()}},computed:{isEmpty:function(){return!this.nodes.length},menuId:function(){return"cascader-menu-"+this.id+"-"+this.index}},methods:{handleExpand:function(e){this.activeNode=e.target},handleMouseMove:function(e){var n=this.activeNode,t=this.hoverTimer,i=this.$refs.hoverZone;if(n&&i)if(n.contains(e.target)){clearTimeout(t);var r=this.$el.getBoundingClientRect().left,o=e.clientX-r,a=this.$el,s=a.offsetWidth,l=a.offsetHeight,c=n.offsetTop,u=c+n.offsetHeight;i.innerHTML='\n          <path style="pointer-events: auto;" fill="transparent" d="M'+o+" "+c+" L"+s+" 0 V"+c+' Z" />\n          <path style="pointer-events: auto;" fill="transparent" d="M'+o+" "+u+" L"+s+" "+l+" V"+u+' Z" />\n        '}else t||(this.hoverTimer=setTimeout(this.clearHoverZone,this.panel.config.hoverThreshold))},clearHoverZone:function(){var e=this.$refs.hoverZone;e&&(e.innerHTML="")},renderEmptyText:function(e){return e("div",{class:"el-cascader-menu__empty-text"},[this.t("el.cascader.noData")])},renderNodeList:function(e){var n=this.menuId,t=this.panel.isHoverMenu,i={on:{}};t&&(i.on.expand=this.handleExpand);var r=this.nodes.map((function(t,r){var a=t.hasChildren;return e("cascader-node",o()([{key:t.uid,attrs:{node:t,"node-id":n+"-"+r,"aria-haspopup":a,"aria-owns":a?n:null}},i]))}));return[].concat(r,[t?e("svg",{ref:"hoverZone",class:"el-cascader-menu__hover-zone"}):null])}},render:function(e){var n=this.isEmpty,t=this.menuId,i={nativeOn:{}};return this.panel.isHoverMenu&&(i.nativeOn.mousemove=this.handleMouseMove),e("el-scrollbar",o()([{attrs:{tag:"ul",role:"menu",id:t,"wrap-class":"el-cascader-menu__wrap","view-class":{"el-cascader-menu__list":!0,"is-empty":n}},class:"el-cascader-menu"},i]),[n?this.renderEmptyText(e):this.renderNodeList(e)])}},w=Object(m.a)(y,void 0,void 0,!1,null,null,null);w.options.__file="packages/cascader-panel/src/cascader-menu.vue";var x=w.exports,_=t(21),S=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}();var k=0,C=function(){function e(n,t,i){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=n,this.config=t,this.parent=i||null,this.level=this.parent?this.parent.level+1:1,this.uid=k++,this.initState(),this.initChildren()}return e.prototype.initState=function(){var e=this.config,n=e.value,t=e.label;this.value=this.data[n],this.label=this.data[t],this.pathNodes=this.calculatePathNodes(),this.path=this.pathNodes.map((function(e){return e.value})),this.pathLabels=this.pathNodes.map((function(e){return e.label})),this.loading=!1,this.loaded=!1},e.prototype.initChildren=function(){var n=this,t=this.config,i=t.children,r=this.data[i];this.hasChildren=Array.isArray(r),this.children=(r||[]).map((function(i){return new e(i,t,n)}))},e.prototype.calculatePathNodes=function(){for(var e=[this],n=this.parent;n;)e.unshift(n),n=n.parent;return e},e.prototype.getPath=function(){return this.path},e.prototype.getValue=function(){return this.value},e.prototype.getValueByOption=function(){return this.config.emitPath?this.getPath():this.getValue()},e.prototype.getText=function(e,n){return e?this.pathLabels.join(n):this.label},e.prototype.isSameNode=function(e){var n=this.getValueByOption();return this.config.multiple&&Array.isArray(e)?e.some((function(e){return Object(h.isEqual)(e,n)})):Object(h.isEqual)(e,n)},e.prototype.broadcast=function(e){for(var n=arguments.length,t=Array(n>1?n-1:0),i=1;i<n;i++)t[i-1]=arguments[i];var r="onParent"+Object(h.capitalize)(e);this.children.forEach((function(n){n&&(n.broadcast.apply(n,[e].concat(t)),n[r]&&n[r].apply(n,t))}))},e.prototype.emit=function(e){var n=this.parent,t="onChild"+Object(h.capitalize)(e);if(n){for(var i=arguments.length,r=Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];n[t]&&n[t].apply(n,r),n.emit.apply(n,[e].concat(r))}},e.prototype.onParentCheck=function(e){this.isDisabled||this.setCheckState(e)},e.prototype.onChildCheck=function(){var e=this.children.filter((function(e){return!e.isDisabled})),n=!!e.length&&e.every((function(e){return e.checked}));this.setCheckState(n)},e.prototype.setCheckState=function(e){var n=this.children.length,t=this.children.reduce((function(e,n){return e+(n.checked?1:n.indeterminate?.5:0)}),0);this.checked=e,this.indeterminate=t!==n&&t>0},e.prototype.syncCheckState=function(e){var n=this.getValueByOption(),t=this.isSameNode(e,n);this.doCheck(t)},e.prototype.doCheck=function(e){this.checked!==e&&(this.config.checkStrictly?this.checked=e:(this.broadcast("check",e),this.setCheckState(e),this.emit("check")))},S(e,[{key:"isDisabled",get:function(){var e=this.data,n=this.parent,t=this.config,i=t.disabled,r=t.checkStrictly;return e[i]||!r&&n&&n.isDisabled}},{key:"isLeaf",get:function(){var e=this.data,n=this.loaded,t=this.hasChildren,i=this.children,r=this.config,o=r.lazy,a=r.leaf;if(o){var s=Object(_.isDef)(e[a])?e[a]:!!n&&!i.length;return this.hasChildren=!s,s}return!t}}]),e}();var E=function e(n,t){return n.reduce((function(n,i){return i.isLeaf?n.push(i):(!t&&n.push(i),n=n.concat(e(i.children,t))),n}),[])},T=function(){function e(n,t){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=t,this.initNodes(n)}return e.prototype.initNodes=function(e){var n=this;e=Object(h.coerceTruthyValueToArray)(e),this.nodes=e.map((function(e){return new C(e,n.config)})),this.flattedNodes=this.getFlattedNodes(!1,!1),this.leafNodes=this.getFlattedNodes(!0,!1)},e.prototype.appendNode=function(e,n){var t=new C(e,this.config,n);(n?n.children:this.nodes).push(t)},e.prototype.appendNodes=function(e,n){var t=this;(e=Object(h.coerceTruthyValueToArray)(e)).forEach((function(e){return t.appendNode(e,n)}))},e.prototype.getNodes=function(){return this.nodes},e.prototype.getFlattedNodes=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=e?this.leafNodes:this.flattedNodes;return n?t:E(this.nodes,e)},e.prototype.getNodeByValue=function(e){if(e){var n=this.getFlattedNodes(!1,!this.config.lazy).filter((function(n){return Object(h.valueEquals)(n.path,e)||n.value===e}));return n&&n.length?n[0]:null}return null},e}(),P=t(9),O=t.n(P),A=t(40),j=t.n(A),I=t(31),D=t.n(I),M=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},L=j.a.keys,N={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:h.noop,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},$=function(e){return!e.getAttribute("aria-owns")},F=function(e,n){var t=e.parentNode;if(t){var i=t.querySelectorAll('.el-cascader-node[tabindex="-1"]');return i[Array.prototype.indexOf.call(i,e)+n]||null}return null},R=function(e,n){if(e){var t=e.id.split("-");return Number(t[t.length-2])}},B=function(e){e&&(e.focus(),!$(e)&&e.click())},V={name:"ElCascaderPanel",components:{CascaderMenu:x},props:{value:{},options:Array,props:Object,border:{type:Boolean,default:!0},renderLabel:Function},provide:function(){return{panel:this}},data:function(){return{checkedValue:null,checkedNodePaths:[],store:[],menus:[],activePath:[],loadCount:0}},computed:{config:function(){return O()(M({},N),this.props||{})},multiple:function(){return this.config.multiple},checkStrictly:function(){return this.config.checkStrictly},leafOnly:function(){return!this.checkStrictly},isHoverMenu:function(){return"hover"===this.config.expandTrigger},renderLabelFn:function(){return this.renderLabel||this.$scopedSlots.default}},watch:{options:{handler:function(){this.initStore()},immediate:!0,deep:!0},value:function(){this.syncCheckedValue(),this.checkStrictly&&this.calculateCheckedNodePaths()},checkedValue:function(e){Object(h.isEqual)(e,this.value)||(this.checkStrictly&&this.calculateCheckedNodePaths(),this.$emit("input",e),this.$emit("change",e))}},mounted:function(){Object(h.isEmpty)(this.value)||this.syncCheckedValue()},methods:{initStore:function(){var e=this.config,n=this.options;e.lazy&&Object(h.isEmpty)(n)?this.lazyLoad():(this.store=new T(n,e),this.menus=[this.store.getNodes()],this.syncMenuState())},syncCheckedValue:function(){var e=this.value,n=this.checkedValue;Object(h.isEqual)(e,n)||(this.activePath=[],this.checkedValue=e,this.syncMenuState())},syncMenuState:function(){var e=this.multiple,n=this.checkStrictly;this.syncActivePath(),e&&this.syncMultiCheckState(),n&&this.calculateCheckedNodePaths(),this.$nextTick(this.scrollIntoView)},syncMultiCheckState:function(){var e=this;this.getFlattedNodes(this.leafOnly).forEach((function(n){n.syncCheckState(e.checkedValue)}))},syncActivePath:function(){var e=this,n=this.store,t=this.multiple,i=this.activePath,r=this.checkedValue;if(Object(h.isEmpty)(i))if(Object(h.isEmpty)(r))this.activePath=[],this.menus=[n.getNodes()];else{var o=t?r[0]:r,a=((this.getNodeByValue(o)||{}).pathNodes||[]).slice(0,-1);this.expandNodes(a)}else{var s=i.map((function(n){return e.getNodeByValue(n.getValue())}));this.expandNodes(s)}},expandNodes:function(e){var n=this;e.forEach((function(e){return n.handleExpand(e,!0)}))},calculateCheckedNodePaths:function(){var e=this,n=this.checkedValue,t=this.multiple?Object(h.coerceTruthyValueToArray)(n):[n];this.checkedNodePaths=t.map((function(n){var t=e.getNodeByValue(n);return t?t.pathNodes:[]}))},handleKeyDown:function(e){var n=e.target;switch(e.keyCode){case L.up:var t=F(n,-1);B(t);break;case L.down:var i=F(n,1);B(i);break;case L.left:var r=this.$refs.menu[R(n)-1];if(r){var o=r.$el.querySelector('.el-cascader-node[aria-expanded="true"]');B(o)}break;case L.right:var a=this.$refs.menu[R(n)+1];if(a){var s=a.$el.querySelector('.el-cascader-node[tabindex="-1"]');B(s)}break;case L.enter:!function(e){if(e){var n=e.querySelector("input");n?n.click():$(e)&&e.click()}}(n);break;case L.esc:case L.tab:this.$emit("close");break;default:return}},handleExpand:function(e,n){var t=this.activePath,i=e.level,r=t.slice(0,i-1),o=this.menus.slice(0,i);if(e.isLeaf||(r.push(e),o.push(e.children)),this.activePath=r,this.menus=o,!n){var a=r.map((function(e){return e.getValue()})),s=t.map((function(e){return e.getValue()}));Object(h.valueEquals)(a,s)||(this.$emit("active-item-change",a),this.$emit("expand-change",a))}},handleCheckChange:function(e){this.checkedValue=e},lazyLoad:function(e,n){var t=this,i=this.config;e||(e=e||{root:!0,level:0},this.store=new T([],i),this.menus=[this.store.getNodes()]),e.loading=!0;i.lazyLoad(e,(function(i){var r=e.root?null:e;if(i&&i.length&&t.store.appendNodes(i,r),e.loading=!1,e.loaded=!0,Array.isArray(t.checkedValue)){var o=t.checkedValue[t.loadCount++],a=t.config.value,s=t.config.leaf;if(Array.isArray(i)&&i.filter((function(e){return e[a]===o})).length>0){var l=t.store.getNodeByValue(o);l.data[s]||t.lazyLoad(l,(function(){t.handleExpand(l)})),t.loadCount===t.checkedValue.length&&t.$parent.computePresentText()}}n&&n(i)}))},calculateMultiCheckedValue:function(){this.checkedValue=this.getCheckedNodes(this.leafOnly).map((function(e){return e.getValueByOption()}))},scrollIntoView:function(){this.$isServer||(this.$refs.menu||[]).forEach((function(e){var n=e.$el;if(n){var t=n.querySelector(".el-scrollbar__wrap"),i=n.querySelector(".el-cascader-node.is-active")||n.querySelector(".el-cascader-node.in-active-path");D()(t,i)}}))},getNodeByValue:function(e){return this.store.getNodeByValue(e)},getFlattedNodes:function(e){var n=!this.config.lazy;return this.store.getFlattedNodes(e,n)},getCheckedNodes:function(e){var n=this.checkedValue;return this.multiple?this.getFlattedNodes(e).filter((function(e){return e.checked})):Object(h.isEmpty)(n)?[]:[this.getNodeByValue(n)]},clearCheckedNodes:function(){var e=this.config,n=this.leafOnly,t=e.multiple,i=e.emitPath;t?(this.getCheckedNodes(n).filter((function(e){return!e.isDisabled})).forEach((function(e){return e.doCheck(!1)})),this.calculateMultiCheckedValue()):this.checkedValue=i?[]:null}}},z=Object(m.a)(V,i,[],!1,null,null,null);z.options.__file="packages/cascader-panel/src/cascader-panel.vue";var q=z.exports;q.install=function(e){e.component(q.name,q)};n.default=q},6:function(e,n){e.exports=t(165)},9:function(e,n){e.exports=t(109)}})},function(e,n,t){e.exports=function(e){var n={};function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(i,r,function(n){return e[n]}.bind(null,r));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/dist/",t(t.s=74)}({0:function(e,n,t){"use strict";function i(e,n,t,i,r,o,a,s){var l,c="function"==typeof e?e.options:e;if(n&&(c.render=n,c.staticRenderFns=t,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,n){return l.call(n),u(e,n)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:c}}t.d(n,"a",(function(){return i}))},2:function(e,n){e.exports=t(33)},3:function(e,n){e.exports=t(27)},5:function(e,n){e.exports=t(108)},7:function(e,n){e.exports=t(2)},74:function(e,n,t){"use strict";t.r(n);var i=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("span",[t("transition",{attrs:{name:e.transition},on:{"after-enter":e.handleAfterEnter,"after-leave":e.handleAfterLeave}},[t("div",{directives:[{name:"show",rawName:"v-show",value:!e.disabled&&e.showPopper,expression:"!disabled && showPopper"}],ref:"popper",staticClass:"el-popover el-popper",class:[e.popperClass,e.content&&"el-popover--plain"],style:{width:e.width+"px"},attrs:{role:"tooltip",id:e.tooltipId,"aria-hidden":e.disabled||!e.showPopper?"true":"false"}},[e.title?t("div",{staticClass:"el-popover__title",domProps:{textContent:e._s(e.title)}}):e._e(),e._t("default",[e._v(e._s(e.content))])],2)]),t("span",{ref:"wrapper",staticClass:"el-popover__reference-wrapper"},[e._t("reference")],2)],1)};i._withStripped=!0;var r=t(5),o=t.n(r),a=t(2),s=t(3),l={name:"ElPopover",mixins:[o.a],props:{trigger:{type:String,default:"click",validator:function(e){return["click","focus","hover","manual"].indexOf(e)>-1}},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:200},title:String,disabled:Boolean,content:String,reference:{},popperClass:String,width:{},visibleArrow:{default:!0},arrowOffset:{type:Number,default:0},transition:{type:String,default:"fade-in-linear"},tabindex:{type:Number,default:0}},computed:{tooltipId:function(){return"el-popover-"+Object(s.generateId)()}},watch:{showPopper:function(e){this.disabled||(e?this.$emit("show"):this.$emit("hide"))}},mounted:function(){var e=this,n=this.referenceElm=this.reference||this.$refs.reference,t=this.popper||this.$refs.popper;!n&&this.$refs.wrapper.children&&(n=this.referenceElm=this.$refs.wrapper.children[0]),n&&(Object(a.addClass)(n,"el-popover__reference"),n.setAttribute("aria-describedby",this.tooltipId),n.setAttribute("tabindex",this.tabindex),t.setAttribute("tabindex",0),"click"!==this.trigger&&(Object(a.on)(n,"focusin",(function(){e.handleFocus();var t=n.__vue__;t&&"function"==typeof t.focus&&t.focus()})),Object(a.on)(t,"focusin",this.handleFocus),Object(a.on)(n,"focusout",this.handleBlur),Object(a.on)(t,"focusout",this.handleBlur)),Object(a.on)(n,"keydown",this.handleKeydown),Object(a.on)(n,"click",this.handleClick)),"click"===this.trigger?(Object(a.on)(n,"click",this.doToggle),Object(a.on)(document,"click",this.handleDocumentClick)):"hover"===this.trigger?(Object(a.on)(n,"mouseenter",this.handleMouseEnter),Object(a.on)(t,"mouseenter",this.handleMouseEnter),Object(a.on)(n,"mouseleave",this.handleMouseLeave),Object(a.on)(t,"mouseleave",this.handleMouseLeave)):"focus"===this.trigger&&(this.tabindex<0&&console.warn("[Element Warn][Popover]a negative taindex means that the element cannot be focused by tab key"),n.querySelector("input, textarea")?(Object(a.on)(n,"focusin",this.doShow),Object(a.on)(n,"focusout",this.doClose)):(Object(a.on)(n,"mousedown",this.doShow),Object(a.on)(n,"mouseup",this.doClose)))},beforeDestroy:function(){this.cleanup()},deactivated:function(){this.cleanup()},methods:{doToggle:function(){this.showPopper=!this.showPopper},doShow:function(){this.showPopper=!0},doClose:function(){this.showPopper=!1},handleFocus:function(){Object(a.addClass)(this.referenceElm,"focusing"),"click"!==this.trigger&&"focus"!==this.trigger||(this.showPopper=!0)},handleClick:function(){Object(a.removeClass)(this.referenceElm,"focusing")},handleBlur:function(){Object(a.removeClass)(this.referenceElm,"focusing"),"click"!==this.trigger&&"focus"!==this.trigger||(this.showPopper=!1)},handleMouseEnter:function(){var e=this;clearTimeout(this._timer),this.openDelay?this._timer=setTimeout((function(){e.showPopper=!0}),this.openDelay):this.showPopper=!0},handleKeydown:function(e){27===e.keyCode&&"manual"!==this.trigger&&this.doClose()},handleMouseLeave:function(){var e=this;clearTimeout(this._timer),this.closeDelay?this._timer=setTimeout((function(){e.showPopper=!1}),this.closeDelay):this.showPopper=!1},handleDocumentClick:function(e){var n=this.reference||this.$refs.reference,t=this.popper||this.$refs.popper;!n&&this.$refs.wrapper.children&&(n=this.referenceElm=this.$refs.wrapper.children[0]),this.$el&&n&&!this.$el.contains(e.target)&&!n.contains(e.target)&&t&&!t.contains(e.target)&&(this.showPopper=!1)},handleAfterEnter:function(){this.$emit("after-enter")},handleAfterLeave:function(){this.$emit("after-leave"),this.doDestroy()},cleanup:function(){(this.openDelay||this.closeDelay)&&clearTimeout(this._timer)}},destroyed:function(){var e=this.reference;Object(a.off)(e,"click",this.doToggle),Object(a.off)(e,"mouseup",this.doClose),Object(a.off)(e,"mousedown",this.doShow),Object(a.off)(e,"focusin",this.doShow),Object(a.off)(e,"focusout",this.doClose),Object(a.off)(e,"mousedown",this.doShow),Object(a.off)(e,"mouseup",this.doClose),Object(a.off)(e,"mouseleave",this.handleMouseLeave),Object(a.off)(e,"mouseenter",this.handleMouseEnter),Object(a.off)(document,"click",this.handleDocumentClick)}},c=t(0),u=Object(c.a)(l,i,[],!1,null,null,null);u.options.__file="packages/popover/src/main.vue";var d=u.exports,h=function(e,n,t){var i=n.expression?n.value:n.arg,r=t.context.$refs[i];r&&(Array.isArray(r)?r[0].$refs.reference=e:r.$refs.reference=e)},p={bind:function(e,n,t){h(e,n,t)},inserted:function(e,n,t){h(e,n,t)}},f=t(7);t.n(f).a.directive("popover",p),d.install=function(e){e.directive("popover",p),e.component(d.name,d)},d.directive=p;n.default=d}})},function(e,n,t){t(3)({target:"Function",proto:!0},{bind:t(306)})},function(e,n,t){var i=t(3),r=t(5),o=t(20),a=t(42).f,s=t(12),l=r((function(){a(1)}));i({target:"Object",stat:!0,forced:!s||l,sham:!s},{getOwnPropertyDescriptor:function(e,n){return a(o(e),n)}})},function(e,n,t){var i=t(3),r=t(12);i({target:"Object",stat:!0,forced:!r,sham:!r},{defineProperties:t(247)})},function(e,n,t){var i=t(3),r=t(554).values;i({target:"Object",stat:!0},{values:function(e){return r(e)}})},function(e,n,t){var i=t(12),r=t(99),o=t(20),a=t(147).f,s=function(e){return function(n){for(var t,s=o(n),l=r(s),c=l.length,u=0,d=[];c>u;)t=l[u++],i&&!a.call(s,t)||d.push(e?[t,s[t]]:s[t]);return d}};e.exports={entries:s(!0),values:s(!1)}},function(e,n){e.exports={read_more:"Read more",read_this_post:"Read this Post",search_placeholder:"Search",search_entire_site:"Search the entire site for ${query}",no_results:"No results! Try something else.",latest_posts:"Latest Posts",leave_comment:"Leave a comment!",time_to_read:"${rounded_time} min read"}},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){"use strict";var i=t(3),r=t(55),o=t(26),a=t(5),s=t(43),l=[],c=l.sort,u=a((function(){l.sort(void 0)})),d=a((function(){l.sort(null)})),h=s("sort");i({target:"Array",proto:!0,forced:u||!d||!h},{sort:function(e){return void 0===e?c.call(o(this)):c.call(o(this),r(e))}})},function(e,n,t){e.exports=function(e){function n(e){let t,r=null;function o(...e){if(!o.enabled)return;const i=o,r=Number(new Date),a=r-(t||r);i.diff=a,i.prev=t,i.curr=r,t=r,e[0]=n.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(t,r)=>{if("%%"===t)return"%";s++;const o=n.formatters[r];if("function"==typeof o){const n=e[s];t=o.call(i,n),e.splice(s,1),s--}return t}),n.formatArgs.call(i,e);(i.log||n.log).apply(i,e)}return o.namespace=e,o.useColors=n.useColors(),o.color=n.selectColor(e),o.extend=i,o.destroy=n.destroy,Object.defineProperty(o,"enabled",{enumerable:!0,configurable:!1,get:()=>null===r?n.enabled(e):r,set:e=>{r=e}}),"function"==typeof n.init&&n.init(o),o}function i(e,t){const i=n(this.namespace+(void 0===t?":":t)+e);return i.log=this.log,i}function r(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return n.debug=n,n.default=n,n.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},n.disable=function(){const e=[...n.names.map(r),...n.skips.map(r).map(e=>"-"+e)].join(",");return n.enable(""),e},n.enable=function(e){let t;n.save(e),n.names=[],n.skips=[];const i=("string"==typeof e?e:"").split(/[\s,]+/),r=i.length;for(t=0;t<r;t++)i[t]&&("-"===(e=i[t].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))},n.enabled=function(e){if("*"===e[e.length-1])return!0;let t,i;for(t=0,i=n.skips.length;t<i;t++)if(n.skips[t].test(e))return!1;for(t=0,i=n.names.length;t<i;t++)if(n.names[t].test(e))return!0;return!1},n.humanize=t(561),n.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(t=>{n[t]=e[t]}),n.names=[],n.skips=[],n.formatters={},n.selectColor=function(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return n.colors[Math.abs(t)%n.colors.length]},n.enable(n.load()),n}},function(e,n){var t=1e3,i=6e4,r=60*i,o=24*r;function a(e,n,t,i){var r=n>=1.5*t;return Math.round(e/t)+" "+i+(r?"s":"")}e.exports=function(e,n){n=n||{};var s=typeof e;if("string"===s&&e.length>0)return function(e){if((e=String(e)).length>100)return;var n=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!n)return;var a=parseFloat(n[1]);switch((n[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return 6048e5*a;case"days":case"day":case"d":return a*o;case"hours":case"hour":case"hrs":case"hr":case"h":return a*r;case"minutes":case"minute":case"mins":case"min":case"m":return a*i;case"seconds":case"second":case"secs":case"sec":case"s":return a*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}(e);if("number"===s&&isFinite(e))return n.long?function(e){var n=Math.abs(e);if(n>=o)return a(e,n,o,"day");if(n>=r)return a(e,n,r,"hour");if(n>=i)return a(e,n,i,"minute");if(n>=t)return a(e,n,t,"second");return e+" ms"}(e):function(e){var n=Math.abs(e);if(n>=o)return Math.round(e/o)+"d";if(n>=r)return Math.round(e/r)+"h";if(n>=i)return Math.round(e/i)+"m";if(n>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,n,t){"use strict";var i=t(3),r=t(39).find,o=t(124),a=!0;"find"in[]&&Array(1).find((function(){a=!1})),i({target:"Array",proto:!0,forced:a},{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),o("find")},function(e,n,t){"use strict";t(308)},function(e,n,t){"use strict";var i=t(3),r=t(39).every;i({target:"Array",proto:!0,forced:!t(43)("every")},{every:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,n,t){"use strict";var i=t(36),r=t(11),o=t(5),a=t(263),s=RegExp.prototype,l=s.toString,c=o((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),u="toString"!=l.name;(c||u)&&i(RegExp.prototype,"toString",(function(){var e=r(this),n=String(e.source),t=e.flags;return"/"+n+"/"+String(void 0===t&&e instanceof RegExp&&!("flags"in s)?a.call(e):t)}),{unsafe:!0})},function(e,n,t){},function(e,n,t){},function(e,n,t){"use strict";t(309)},function(e,n,t){"use strict";t(310)},function(e,n,t){"use strict";t.r(n);t(333),t(349),t(369),t(371);var i=t(118),r=(t(191),t(50),t(17),t(22),t(29),t(51),t(49),t(2));function o(e,n){for(var t in n)e[t]=n[t];return e}var a=/[!'()*]/g,s=function(e){return"%"+e.charCodeAt(0).toString(16)},l=/%2C/g,c=function(e){return encodeURIComponent(e).replace(a,s).replace(l,",")};function u(e){try{return decodeURIComponent(e)}catch(e){0}return e}var d=function(e){return null==e||"object"==typeof e?e:String(e)};function h(e){var n={};return(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach((function(e){var t=e.replace(/\+/g," ").split("="),i=u(t.shift()),r=t.length>0?u(t.join("=")):null;void 0===n[i]?n[i]=r:Array.isArray(n[i])?n[i].push(r):n[i]=[n[i],r]})),n):n}function p(e){var n=e?Object.keys(e).map((function(n){var t=e[n];if(void 0===t)return"";if(null===t)return c(n);if(Array.isArray(t)){var i=[];return t.forEach((function(e){void 0!==e&&(null===e?i.push(c(n)):i.push(c(n)+"="+c(e)))})),i.join("&")}return c(n)+"="+c(t)})).filter((function(e){return e.length>0})).join("&"):null;return n?"?"+n:""}var f=/\/?$/;function m(e,n,t,i){var r=i&&i.options.stringifyQuery,o=n.query||{};try{o=g(o)}catch(e){}var a={name:n.name||e&&e.name,meta:e&&e.meta||{},path:n.path||"/",hash:n.hash||"",query:o,params:n.params||{},fullPath:y(n,r),matched:e?b(e):[]};return t&&(a.redirectedFrom=y(t,r)),Object.freeze(a)}function g(e){if(Array.isArray(e))return e.map(g);if(e&&"object"==typeof e){var n={};for(var t in e)n[t]=g(e[t]);return n}return e}var v=m(null,{path:"/"});function b(e){for(var n=[];e;)n.unshift(e),e=e.parent;return n}function y(e,n){var t=e.path,i=e.query;void 0===i&&(i={});var r=e.hash;return void 0===r&&(r=""),(t||"/")+(n||p)(i)+r}function w(e,n,t){return n===v?e===n:!!n&&(e.path&&n.path?e.path.replace(f,"")===n.path.replace(f,"")&&(t||e.hash===n.hash&&x(e.query,n.query)):!(!e.name||!n.name)&&(e.name===n.name&&(t||e.hash===n.hash&&x(e.query,n.query)&&x(e.params,n.params))))}function x(e,n){if(void 0===e&&(e={}),void 0===n&&(n={}),!e||!n)return e===n;var t=Object.keys(e).sort(),i=Object.keys(n).sort();return t.length===i.length&&t.every((function(t,r){var o=e[t];if(i[r]!==t)return!1;var a=n[t];return null==o||null==a?o===a:"object"==typeof o&&"object"==typeof a?x(o,a):String(o)===String(a)}))}function _(e){for(var n=0;n<e.matched.length;n++){var t=e.matched[n];for(var i in t.instances){var r=t.instances[i],o=t.enteredCbs[i];if(r&&o){delete t.enteredCbs[i];for(var a=0;a<o.length;a++)r._isBeingDestroyed||o[a](r)}}}}var S={name:"RouterView",functional:!0,props:{name:{type:String,default:"default"}},render:function(e,n){var t=n.props,i=n.children,r=n.parent,a=n.data;a.routerView=!0;for(var s=r.$createElement,l=t.name,c=r.$route,u=r._routerViewCache||(r._routerViewCache={}),d=0,h=!1;r&&r._routerRoot!==r;){var p=r.$vnode?r.$vnode.data:{};p.routerView&&d++,p.keepAlive&&r._directInactive&&r._inactive&&(h=!0),r=r.$parent}if(a.routerViewDepth=d,h){var f=u[l],m=f&&f.component;return m?(f.configProps&&k(m,a,f.route,f.configProps),s(m,a,i)):s()}var g=c.matched[d],v=g&&g.components[l];if(!g||!v)return u[l]=null,s();u[l]={component:v},a.registerRouteInstance=function(e,n){var t=g.instances[l];(n&&t!==e||!n&&t===e)&&(g.instances[l]=n)},(a.hook||(a.hook={})).prepatch=function(e,n){g.instances[l]=n.componentInstance},a.hook.init=function(e){e.data.keepAlive&&e.componentInstance&&e.componentInstance!==g.instances[l]&&(g.instances[l]=e.componentInstance),_(c)};var b=g.props&&g.props[l];return b&&(o(u[l],{route:c,configProps:b}),k(v,a,c,b)),s(v,a,i)}};function k(e,n,t,i){var r=n.props=function(e,n){switch(typeof n){case"undefined":return;case"object":return n;case"function":return n(e);case"boolean":return n?e.params:void 0;default:0}}(t,i);if(r){r=n.props=o({},r);var a=n.attrs=n.attrs||{};for(var s in r)e.props&&s in e.props||(a[s]=r[s],delete r[s])}}function C(e,n,t){var i=e.charAt(0);if("/"===i)return e;if("?"===i||"#"===i)return n+e;var r=n.split("/");t&&r[r.length-1]||r.pop();for(var o=e.replace(/^\//,"").split("/"),a=0;a<o.length;a++){var s=o[a];".."===s?r.pop():"."!==s&&r.push(s)}return""!==r[0]&&r.unshift(""),r.join("/")}function E(e){return e.replace(/\/\//g,"/")}var T=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},P=z,O=M,A=function(e,n){return N(M(e,n),n)},j=N,I=V,D=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function M(e,n){for(var t,i=[],r=0,o=0,a="",s=n&&n.delimiter||"/";null!=(t=D.exec(e));){var l=t[0],c=t[1],u=t.index;if(a+=e.slice(o,u),o=u+l.length,c)a+=c[1];else{var d=e[o],h=t[2],p=t[3],f=t[4],m=t[5],g=t[6],v=t[7];a&&(i.push(a),a="");var b=null!=h&&null!=d&&d!==h,y="+"===g||"*"===g,w="?"===g||"*"===g,x=t[2]||s,_=f||m;i.push({name:p||r++,prefix:h||"",delimiter:x,optional:w,repeat:y,partial:b,asterisk:!!v,pattern:_?F(_):v?".*":"[^"+$(x)+"]+?"})}}return o<e.length&&(a+=e.substr(o)),a&&i.push(a),i}function L(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function N(e,n){for(var t=new Array(e.length),i=0;i<e.length;i++)"object"==typeof e[i]&&(t[i]=new RegExp("^(?:"+e[i].pattern+")$",B(n)));return function(n,i){for(var r="",o=n||{},a=(i||{}).pretty?L:encodeURIComponent,s=0;s<e.length;s++){var l=e[s];if("string"!=typeof l){var c,u=o[l.name];if(null==u){if(l.optional){l.partial&&(r+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(T(u)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(u)+"`");if(0===u.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var d=0;d<u.length;d++){if(c=a(u[d]),!t[s].test(c))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(c)+"`");r+=(0===d?l.prefix:l.delimiter)+c}}else{if(c=l.asterisk?encodeURI(u).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):a(u),!t[s].test(c))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+c+'"');r+=l.prefix+c}}else r+=l}return r}}function $(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function F(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function R(e,n){return e.keys=n,e}function B(e){return e&&e.sensitive?"":"i"}function V(e,n,t){T(n)||(t=n||t,n=[]);for(var i=(t=t||{}).strict,r=!1!==t.end,o="",a=0;a<e.length;a++){var s=e[a];if("string"==typeof s)o+=$(s);else{var l=$(s.prefix),c="(?:"+s.pattern+")";n.push(s),s.repeat&&(c+="(?:"+l+c+")*"),o+=c=s.optional?s.partial?l+"("+c+")?":"(?:"+l+"("+c+"))?":l+"("+c+")"}}var u=$(t.delimiter||"/"),d=o.slice(-u.length)===u;return i||(o=(d?o.slice(0,-u.length):o)+"(?:"+u+"(?=$))?"),o+=r?"$":i&&d?"":"(?="+u+"|$)",R(new RegExp("^"+o,B(t)),n)}function z(e,n,t){return T(n)||(t=n||t,n=[]),t=t||{},e instanceof RegExp?function(e,n){var t=e.source.match(/\((?!\?)/g);if(t)for(var i=0;i<t.length;i++)n.push({name:i,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return R(e,n)}(e,n):T(e)?function(e,n,t){for(var i=[],r=0;r<e.length;r++)i.push(z(e[r],n,t).source);return R(new RegExp("(?:"+i.join("|")+")",B(t)),n)}(e,n,t):function(e,n,t){return V(M(e,t),n,t)}(e,n,t)}P.parse=O,P.compile=A,P.tokensToFunction=j,P.tokensToRegExp=I;var q=Object.create(null);function H(e,n,t){n=n||{};try{var i=q[e]||(q[e]=P.compile(e));return"string"==typeof n.pathMatch&&(n[0]=n.pathMatch),i(n,{pretty:!0})}catch(e){return""}finally{delete n[0]}}function W(e,n,t,i){var r="string"==typeof e?{path:e}:e;if(r._normalized)return r;if(r.name){var a=(r=o({},e)).params;return a&&"object"==typeof a&&(r.params=o({},a)),r}if(!r.path&&r.params&&n){(r=o({},r))._normalized=!0;var s=o(o({},n.params),r.params);if(n.name)r.name=n.name,r.params=s;else if(n.matched.length){var l=n.matched[n.matched.length-1].path;r.path=H(l,s,n.path)}else 0;return r}var c=function(e){var n="",t="",i=e.indexOf("#");i>=0&&(n=e.slice(i),e=e.slice(0,i));var r=e.indexOf("?");return r>=0&&(t=e.slice(r+1),e=e.slice(0,r)),{path:e,query:t,hash:n}}(r.path||""),u=n&&n.path||"/",p=c.path?C(c.path,u,t||r.append):u,f=function(e,n,t){void 0===n&&(n={});var i,r=t||h;try{i=r(e||"")}catch(e){i={}}for(var o in n){var a=n[o];i[o]=Array.isArray(a)?a.map(d):d(a)}return i}(c.query,r.query,i&&i.options.parseQuery),m=r.hash||c.hash;return m&&"#"!==m.charAt(0)&&(m="#"+m),{_normalized:!0,path:p,query:f,hash:m}}var U,J=function(){},Y={name:"RouterLink",props:{to:{type:[String,Object],required:!0},tag:{type:String,default:"a"},custom:Boolean,exact:Boolean,exactPath:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,ariaCurrentValue:{type:String,default:"page"},event:{type:[String,Array],default:"click"}},render:function(e){var n=this,t=this.$router,i=this.$route,r=t.resolve(this.to,i,this.append),a=r.location,s=r.route,l=r.href,c={},u=t.options.linkActiveClass,d=t.options.linkExactActiveClass,h=null==u?"router-link-active":u,p=null==d?"router-link-exact-active":d,g=null==this.activeClass?h:this.activeClass,v=null==this.exactActiveClass?p:this.exactActiveClass,b=s.redirectedFrom?m(null,W(s.redirectedFrom),null,t):s;c[v]=w(i,b,this.exactPath),c[g]=this.exact||this.exactPath?c[v]:function(e,n){return 0===e.path.replace(f,"/").indexOf(n.path.replace(f,"/"))&&(!n.hash||e.hash===n.hash)&&function(e,n){for(var t in n)if(!(t in e))return!1;return!0}(e.query,n.query)}(i,b);var y=c[v]?this.ariaCurrentValue:null,x=function(e){G(e)&&(n.replace?t.replace(a,J):t.push(a,J))},_={click:G};Array.isArray(this.event)?this.event.forEach((function(e){_[e]=x})):_[this.event]=x;var S={class:c},k=!this.$scopedSlots.$hasNormal&&this.$scopedSlots.default&&this.$scopedSlots.default({href:l,route:s,navigate:x,isActive:c[g],isExactActive:c[v]});if(k){if(1===k.length)return k[0];if(k.length>1||!k.length)return 0===k.length?e():e("span",{},k)}if("a"===this.tag)S.on=_,S.attrs={href:l,"aria-current":y};else{var C=function e(n){var t;if(n)for(var i=0;i<n.length;i++){if("a"===(t=n[i]).tag)return t;if(t.children&&(t=e(t.children)))return t}}(this.$slots.default);if(C){C.isStatic=!1;var E=C.data=o({},C.data);for(var T in E.on=E.on||{},E.on){var P=E.on[T];T in _&&(E.on[T]=Array.isArray(P)?P:[P])}for(var O in _)O in E.on?E.on[O].push(_[O]):E.on[O]=x;var A=C.data.attrs=o({},C.data.attrs);A.href=l,A["aria-current"]=y}else S.on=_}return e(this.tag,S,this.$slots.default)}};function G(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey||e.defaultPrevented||void 0!==e.button&&0!==e.button)){if(e.currentTarget&&e.currentTarget.getAttribute){var n=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(n))return}return e.preventDefault&&e.preventDefault(),!0}}var K="undefined"!=typeof window;function X(e,n,t,i,r){var o=n||[],a=t||Object.create(null),s=i||Object.create(null);e.forEach((function(e){!function e(n,t,i,r,o,a){var s=r.path,l=r.name;0;var c=r.pathToRegexpOptions||{},u=function(e,n,t){t||(e=e.replace(/\/$/,""));if("/"===e[0])return e;if(null==n)return e;return E(n.path+"/"+e)}(s,o,c.strict);"boolean"==typeof r.caseSensitive&&(c.sensitive=r.caseSensitive);var d={path:u,regex:Q(u,c),components:r.components||{default:r.component},alias:r.alias?"string"==typeof r.alias?[r.alias]:r.alias:[],instances:{},enteredCbs:{},name:l,parent:o,matchAs:a,redirect:r.redirect,beforeEnter:r.beforeEnter,meta:r.meta||{},props:null==r.props?{}:r.components?r.props:{default:r.props}};r.children&&r.children.forEach((function(r){var o=a?E(a+"/"+r.path):void 0;e(n,t,i,r,d,o)}));t[d.path]||(n.push(d.path),t[d.path]=d);if(void 0!==r.alias)for(var h=Array.isArray(r.alias)?r.alias:[r.alias],p=0;p<h.length;++p){0;var f={path:h[p],children:r.children};e(n,t,i,f,o,d.path||"/")}l&&(i[l]||(i[l]=d))}(o,a,s,e,r)}));for(var l=0,c=o.length;l<c;l++)"*"===o[l]&&(o.push(o.splice(l,1)[0]),c--,l--);return{pathList:o,pathMap:a,nameMap:s}}function Q(e,n){return P(e,[],n)}function Z(e,n){var t=X(e),i=t.pathList,r=t.pathMap,o=t.nameMap;function a(e,t,a){var s=W(e,t,!1,n),c=s.name;if(c){var u=o[c];if(!u)return l(null,s);var d=u.regex.keys.filter((function(e){return!e.optional})).map((function(e){return e.name}));if("object"!=typeof s.params&&(s.params={}),t&&"object"==typeof t.params)for(var h in t.params)!(h in s.params)&&d.indexOf(h)>-1&&(s.params[h]=t.params[h]);return s.path=H(u.path,s.params),l(u,s,a)}if(s.path){s.params={};for(var p=0;p<i.length;p++){var f=i[p],m=r[f];if(ee(m.regex,s.path,s.params))return l(m,s,a)}}return l(null,s)}function s(e,t){var i=e.redirect,r="function"==typeof i?i(m(e,t,null,n)):i;if("string"==typeof r&&(r={path:r}),!r||"object"!=typeof r)return l(null,t);var s=r,c=s.name,u=s.path,d=t.query,h=t.hash,p=t.params;if(d=s.hasOwnProperty("query")?s.query:d,h=s.hasOwnProperty("hash")?s.hash:h,p=s.hasOwnProperty("params")?s.params:p,c){o[c];return a({_normalized:!0,name:c,query:d,hash:h,params:p},void 0,t)}if(u){var f=function(e,n){return C(e,n.parent?n.parent.path:"/",!0)}(u,e);return a({_normalized:!0,path:H(f,p),query:d,hash:h},void 0,t)}return l(null,t)}function l(e,t,i){return e&&e.redirect?s(e,i||t):e&&e.matchAs?function(e,n,t){var i=a({_normalized:!0,path:H(t,n.params)});if(i){var r=i.matched,o=r[r.length-1];return n.params=i.params,l(o,n)}return l(null,n)}(0,t,e.matchAs):m(e,t,i,n)}return{match:a,addRoute:function(e,n){var t="object"!=typeof e?o[e]:void 0;X([n||e],i,r,o,t),t&&X(t.alias.map((function(e){return{path:e,children:[n]}})),i,r,o,t)},getRoutes:function(){return i.map((function(e){return r[e]}))},addRoutes:function(e){X(e,i,r,o)}}}function ee(e,n,t){var i=n.match(e);if(!i)return!1;if(!t)return!0;for(var r=1,o=i.length;r<o;++r){var a=e.keys[r-1];a&&(t[a.name||"pathMatch"]="string"==typeof i[r]?u(i[r]):i[r])}return!0}var ne=K&&window.performance&&window.performance.now?window.performance:Date;function te(){return ne.now().toFixed(3)}var ie=te();function re(){return ie}function oe(e){return ie=e}var ae=Object.create(null);function se(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual");var e=window.location.protocol+"//"+window.location.host,n=window.location.href.replace(e,""),t=o({},window.history.state);return t.key=re(),window.history.replaceState(t,"",n),window.addEventListener("popstate",ue),function(){window.removeEventListener("popstate",ue)}}function le(e,n,t,i){if(e.app){var r=e.options.scrollBehavior;r&&e.app.$nextTick((function(){var o=function(){var e=re();if(e)return ae[e]}(),a=r.call(e,n,t,i?o:null);a&&("function"==typeof a.then?a.then((function(e){me(e,o)})).catch((function(e){0})):me(a,o))}))}}function ce(){var e=re();e&&(ae[e]={x:window.pageXOffset,y:window.pageYOffset})}function ue(e){ce(),e.state&&e.state.key&&oe(e.state.key)}function de(e){return pe(e.x)||pe(e.y)}function he(e){return{x:pe(e.x)?e.x:window.pageXOffset,y:pe(e.y)?e.y:window.pageYOffset}}function pe(e){return"number"==typeof e}var fe=/^#\d/;function me(e,n){var t,i="object"==typeof e;if(i&&"string"==typeof e.selector){var r=fe.test(e.selector)?document.getElementById(e.selector.slice(1)):document.querySelector(e.selector);if(r){var o=e.offset&&"object"==typeof e.offset?e.offset:{};n=function(e,n){var t=document.documentElement.getBoundingClientRect(),i=e.getBoundingClientRect();return{x:i.left-t.left-n.x,y:i.top-t.top-n.y}}(r,o={x:pe((t=o).x)?t.x:0,y:pe(t.y)?t.y:0})}else de(e)&&(n=he(e))}else i&&de(e)&&(n=he(e));n&&("scrollBehavior"in document.documentElement.style?window.scrollTo({left:n.x,top:n.y,behavior:e.behavior}):window.scrollTo(n.x,n.y))}var ge,ve=K&&((-1===(ge=window.navigator.userAgent).indexOf("Android 2.")&&-1===ge.indexOf("Android 4.0")||-1===ge.indexOf("Mobile Safari")||-1!==ge.indexOf("Chrome")||-1!==ge.indexOf("Windows Phone"))&&window.history&&"function"==typeof window.history.pushState);function be(e,n){ce();var t=window.history;try{if(n){var i=o({},t.state);i.key=re(),t.replaceState(i,"",e)}else t.pushState({key:oe(te())},"",e)}catch(t){window.location[n?"replace":"assign"](e)}}function ye(e){be(e,!0)}function we(e,n,t){var i=function(r){r>=e.length?t():e[r]?n(e[r],(function(){i(r+1)})):i(r+1)};i(0)}var xe={redirected:2,aborted:4,cancelled:8,duplicated:16};function _e(e,n){return ke(e,n,xe.redirected,'Redirected when going from "'+e.fullPath+'" to "'+function(e){if("string"==typeof e)return e;if("path"in e)return e.path;var n={};return Ce.forEach((function(t){t in e&&(n[t]=e[t])})),JSON.stringify(n,null,2)}(n)+'" via a navigation guard.')}function Se(e,n){return ke(e,n,xe.cancelled,'Navigation cancelled from "'+e.fullPath+'" to "'+n.fullPath+'" with a new navigation.')}function ke(e,n,t,i){var r=new Error(i);return r._isRouter=!0,r.from=e,r.to=n,r.type=t,r}var Ce=["params","query","hash"];function Ee(e){return Object.prototype.toString.call(e).indexOf("Error")>-1}function Te(e,n){return Ee(e)&&e._isRouter&&(null==n||e.type===n)}function Pe(e){return function(n,t,i){var r=!1,o=0,a=null;Oe(e,(function(e,n,t,s){if("function"==typeof e&&void 0===e.cid){r=!0,o++;var l,c=Ie((function(n){var r;((r=n).__esModule||je&&"Module"===r[Symbol.toStringTag])&&(n=n.default),e.resolved="function"==typeof n?n:U.extend(n),t.components[s]=n,--o<=0&&i()})),u=Ie((function(e){var n="Failed to resolve async component "+s+": "+e;a||(a=Ee(e)?e:new Error(n),i(a))}));try{l=e(c,u)}catch(e){u(e)}if(l)if("function"==typeof l.then)l.then(c,u);else{var d=l.component;d&&"function"==typeof d.then&&d.then(c,u)}}})),r||i()}}function Oe(e,n){return Ae(e.map((function(e){return Object.keys(e.components).map((function(t){return n(e.components[t],e.instances[t],e,t)}))})))}function Ae(e){return Array.prototype.concat.apply([],e)}var je="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;function Ie(e){var n=!1;return function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];if(!n)return n=!0,e.apply(this,t)}}var De=function(e,n){this.router=e,this.base=function(e){if(!e)if(K){var n=document.querySelector("base");e=(e=n&&n.getAttribute("href")||"/").replace(/^https?:\/\/[^\/]+/,"")}else e="/";"/"!==e.charAt(0)&&(e="/"+e);return e.replace(/\/$/,"")}(n),this.current=v,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[],this.listeners=[]};function Me(e,n,t,i){var r=Oe(e,(function(e,i,r,o){var a=function(e,n){"function"!=typeof e&&(e=U.extend(e));return e.options[n]}(e,n);if(a)return Array.isArray(a)?a.map((function(e){return t(e,i,r,o)})):t(a,i,r,o)}));return Ae(i?r.reverse():r)}function Le(e,n){if(n)return function(){return e.apply(n,arguments)}}De.prototype.listen=function(e){this.cb=e},De.prototype.onReady=function(e,n){this.ready?e():(this.readyCbs.push(e),n&&this.readyErrorCbs.push(n))},De.prototype.onError=function(e){this.errorCbs.push(e)},De.prototype.transitionTo=function(e,n,t){var i,r=this;try{i=this.router.match(e,this.current)}catch(e){throw this.errorCbs.forEach((function(n){n(e)})),e}var o=this.current;this.confirmTransition(i,(function(){r.updateRoute(i),n&&n(i),r.ensureURL(),r.router.afterHooks.forEach((function(e){e&&e(i,o)})),r.ready||(r.ready=!0,r.readyCbs.forEach((function(e){e(i)})))}),(function(e){t&&t(e),e&&!r.ready&&(Te(e,xe.redirected)&&o===v||(r.ready=!0,r.readyErrorCbs.forEach((function(n){n(e)}))))}))},De.prototype.confirmTransition=function(e,n,t){var i=this,r=this.current;this.pending=e;var o,a,s=function(e){!Te(e)&&Ee(e)&&(i.errorCbs.length?i.errorCbs.forEach((function(n){n(e)})):console.error(e)),t&&t(e)},l=e.matched.length-1,c=r.matched.length-1;if(w(e,r)&&l===c&&e.matched[l]===r.matched[c])return this.ensureURL(),s(((a=ke(o=r,e,xe.duplicated,'Avoided redundant navigation to current location: "'+o.fullPath+'".')).name="NavigationDuplicated",a));var u=function(e,n){var t,i=Math.max(e.length,n.length);for(t=0;t<i&&e[t]===n[t];t++);return{updated:n.slice(0,t),activated:n.slice(t),deactivated:e.slice(t)}}(this.current.matched,e.matched),d=u.updated,h=u.deactivated,p=u.activated,f=[].concat(function(e){return Me(e,"beforeRouteLeave",Le,!0)}(h),this.router.beforeHooks,function(e){return Me(e,"beforeRouteUpdate",Le)}(d),p.map((function(e){return e.beforeEnter})),Pe(p)),m=function(n,t){if(i.pending!==e)return s(Se(r,e));try{n(e,r,(function(n){!1===n?(i.ensureURL(!0),s(function(e,n){return ke(e,n,xe.aborted,'Navigation aborted from "'+e.fullPath+'" to "'+n.fullPath+'" via a navigation guard.')}(r,e))):Ee(n)?(i.ensureURL(!0),s(n)):"string"==typeof n||"object"==typeof n&&("string"==typeof n.path||"string"==typeof n.name)?(s(_e(r,e)),"object"==typeof n&&n.replace?i.replace(n):i.push(n)):t(n)}))}catch(e){s(e)}};we(f,m,(function(){we(function(e){return Me(e,"beforeRouteEnter",(function(e,n,t,i){return function(e,n,t){return function(i,r,o){return e(i,r,(function(e){"function"==typeof e&&(n.enteredCbs[t]||(n.enteredCbs[t]=[]),n.enteredCbs[t].push(e)),o(e)}))}}(e,t,i)}))}(p).concat(i.router.resolveHooks),m,(function(){if(i.pending!==e)return s(Se(r,e));i.pending=null,n(e),i.router.app&&i.router.app.$nextTick((function(){_(e)}))}))}))},De.prototype.updateRoute=function(e){this.current=e,this.cb&&this.cb(e)},De.prototype.setupListeners=function(){},De.prototype.teardown=function(){this.listeners.forEach((function(e){e()})),this.listeners=[],this.current=v,this.pending=null};var Ne=function(e){function n(n,t){e.call(this,n,t),this._startLocation=$e(this.base)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.setupListeners=function(){var e=this;if(!(this.listeners.length>0)){var n=this.router,t=n.options.scrollBehavior,i=ve&&t;i&&this.listeners.push(se());var r=function(){var t=e.current,r=$e(e.base);e.current===v&&r===e._startLocation||e.transitionTo(r,(function(e){i&&le(n,e,t,!0)}))};window.addEventListener("popstate",r),this.listeners.push((function(){window.removeEventListener("popstate",r)}))}},n.prototype.go=function(e){window.history.go(e)},n.prototype.push=function(e,n,t){var i=this,r=this.current;this.transitionTo(e,(function(e){be(E(i.base+e.fullPath)),le(i.router,e,r,!1),n&&n(e)}),t)},n.prototype.replace=function(e,n,t){var i=this,r=this.current;this.transitionTo(e,(function(e){ye(E(i.base+e.fullPath)),le(i.router,e,r,!1),n&&n(e)}),t)},n.prototype.ensureURL=function(e){if($e(this.base)!==this.current.fullPath){var n=E(this.base+this.current.fullPath);e?be(n):ye(n)}},n.prototype.getCurrentLocation=function(){return $e(this.base)},n}(De);function $e(e){var n=window.location.pathname;return e&&0===n.toLowerCase().indexOf(e.toLowerCase())&&(n=n.slice(e.length)),(n||"/")+window.location.search+window.location.hash}var Fe=function(e){function n(n,t,i){e.call(this,n,t),i&&function(e){var n=$e(e);if(!/^\/#/.test(n))return window.location.replace(E(e+"/#"+n)),!0}(this.base)||Re()}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.setupListeners=function(){var e=this;if(!(this.listeners.length>0)){var n=this.router.options.scrollBehavior,t=ve&&n;t&&this.listeners.push(se());var i=function(){var n=e.current;Re()&&e.transitionTo(Be(),(function(i){t&&le(e.router,i,n,!0),ve||qe(i.fullPath)}))},r=ve?"popstate":"hashchange";window.addEventListener(r,i),this.listeners.push((function(){window.removeEventListener(r,i)}))}},n.prototype.push=function(e,n,t){var i=this,r=this.current;this.transitionTo(e,(function(e){ze(e.fullPath),le(i.router,e,r,!1),n&&n(e)}),t)},n.prototype.replace=function(e,n,t){var i=this,r=this.current;this.transitionTo(e,(function(e){qe(e.fullPath),le(i.router,e,r,!1),n&&n(e)}),t)},n.prototype.go=function(e){window.history.go(e)},n.prototype.ensureURL=function(e){var n=this.current.fullPath;Be()!==n&&(e?ze(n):qe(n))},n.prototype.getCurrentLocation=function(){return Be()},n}(De);function Re(){var e=Be();return"/"===e.charAt(0)||(qe("/"+e),!1)}function Be(){var e=window.location.href,n=e.indexOf("#");return n<0?"":e=e.slice(n+1)}function Ve(e){var n=window.location.href,t=n.indexOf("#");return(t>=0?n.slice(0,t):n)+"#"+e}function ze(e){ve?be(Ve(e)):window.location.hash=e}function qe(e){ve?ye(Ve(e)):window.location.replace(Ve(e))}var He=function(e){function n(n,t){e.call(this,n,t),this.stack=[],this.index=-1}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.push=function(e,n,t){var i=this;this.transitionTo(e,(function(e){i.stack=i.stack.slice(0,i.index+1).concat(e),i.index++,n&&n(e)}),t)},n.prototype.replace=function(e,n,t){var i=this;this.transitionTo(e,(function(e){i.stack=i.stack.slice(0,i.index).concat(e),n&&n(e)}),t)},n.prototype.go=function(e){var n=this,t=this.index+e;if(!(t<0||t>=this.stack.length)){var i=this.stack[t];this.confirmTransition(i,(function(){var e=n.current;n.index=t,n.updateRoute(i),n.router.afterHooks.forEach((function(n){n&&n(i,e)}))}),(function(e){Te(e,xe.duplicated)&&(n.index=t)}))}},n.prototype.getCurrentLocation=function(){var e=this.stack[this.stack.length-1];return e?e.fullPath:"/"},n.prototype.ensureURL=function(){},n}(De),We=function(e){void 0===e&&(e={}),this.app=null,this.apps=[],this.options=e,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=Z(e.routes||[],this);var n=e.mode||"hash";switch(this.fallback="history"===n&&!ve&&!1!==e.fallback,this.fallback&&(n="hash"),K||(n="abstract"),this.mode=n,n){case"history":this.history=new Ne(this,e.base);break;case"hash":this.history=new Fe(this,e.base,this.fallback);break;case"abstract":this.history=new He(this,e.base);break;default:0}},Ue={currentRoute:{configurable:!0}};function Je(e,n){return e.push(n),function(){var t=e.indexOf(n);t>-1&&e.splice(t,1)}}We.prototype.match=function(e,n,t){return this.matcher.match(e,n,t)},Ue.currentRoute.get=function(){return this.history&&this.history.current},We.prototype.init=function(e){var n=this;if(this.apps.push(e),e.$once("hook:destroyed",(function(){var t=n.apps.indexOf(e);t>-1&&n.apps.splice(t,1),n.app===e&&(n.app=n.apps[0]||null),n.app||n.history.teardown()})),!this.app){this.app=e;var t=this.history;if(t instanceof Ne||t instanceof Fe){var i=function(e){t.setupListeners(),function(e){var i=t.current,r=n.options.scrollBehavior;ve&&r&&"fullPath"in e&&le(n,e,i,!1)}(e)};t.transitionTo(t.getCurrentLocation(),i,i)}t.listen((function(e){n.apps.forEach((function(n){n._route=e}))}))}},We.prototype.beforeEach=function(e){return Je(this.beforeHooks,e)},We.prototype.beforeResolve=function(e){return Je(this.resolveHooks,e)},We.prototype.afterEach=function(e){return Je(this.afterHooks,e)},We.prototype.onReady=function(e,n){this.history.onReady(e,n)},We.prototype.onError=function(e){this.history.onError(e)},We.prototype.push=function(e,n,t){var i=this;if(!n&&!t&&"undefined"!=typeof Promise)return new Promise((function(n,t){i.history.push(e,n,t)}));this.history.push(e,n,t)},We.prototype.replace=function(e,n,t){var i=this;if(!n&&!t&&"undefined"!=typeof Promise)return new Promise((function(n,t){i.history.replace(e,n,t)}));this.history.replace(e,n,t)},We.prototype.go=function(e){this.history.go(e)},We.prototype.back=function(){this.go(-1)},We.prototype.forward=function(){this.go(1)},We.prototype.getMatchedComponents=function(e){var n=e?e.matched?e:this.resolve(e).route:this.currentRoute;return n?[].concat.apply([],n.matched.map((function(e){return Object.keys(e.components).map((function(n){return e.components[n]}))}))):[]},We.prototype.resolve=function(e,n,t){var i=W(e,n=n||this.history.current,t,this),r=this.match(i,n),o=r.redirectedFrom||r.fullPath;return{location:i,route:r,href:function(e,n,t){var i="hash"===t?"#"+n:n;return e?E(e+"/"+i):i}(this.history.base,o,this.mode),normalizedTo:i,resolved:r}},We.prototype.getRoutes=function(){return this.matcher.getRoutes()},We.prototype.addRoute=function(e,n){this.matcher.addRoute(e,n),this.history.current!==v&&this.history.transitionTo(this.history.getCurrentLocation())},We.prototype.addRoutes=function(e){this.matcher.addRoutes(e),this.history.current!==v&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(We.prototype,Ue),We.install=function e(n){if(!e.installed||U!==n){e.installed=!0,U=n;var t=function(e){return void 0!==e},i=function(e,n){var i=e.$options._parentVnode;t(i)&&t(i=i.data)&&t(i=i.registerRouteInstance)&&i(e,n)};n.mixin({beforeCreate:function(){t(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),n.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,i(this,this)},destroyed:function(){i(this)}}),Object.defineProperty(n.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(n.prototype,"$route",{get:function(){return this._routerRoot._route}}),n.component("RouterView",S),n.component("RouterLink",Y);var r=n.config.optionMergeStrategies;r.beforeRouteEnter=r.beforeRouteLeave=r.beforeRouteUpdate=r.created}},We.version="3.5.1",We.isNavigationFailure=Te,We.NavigationFailureType=xe,We.START_LOCATION=v,K&&window.Vue&&window.Vue.use(We);var Ye=We;t(251),t(252),t(253),t(62),t(379),t(100),t(101),t(380);function Ge(e){e.locales&&Object.keys(e.locales).forEach((function(n){e.locales[n].path=n})),Object.freeze(e)}var Ke=t(0),Xe=t(38);t(153);t(56),t(74),t(102);var Qe=t(119);function Ze(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var t=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(t.push(a.value),!n||t.length!==n);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return t}}(e,n)||Object(Qe.a)(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}t(265),t(103);var en=t(311),nn=t.n(en),tn={created:function(){if(this.siteMeta=this.$site.headTags.filter((function(e){return"meta"===Ze(e,1)[0]})).map((function(e){var n=Ze(e,2);n[0];return n[1]})),this.$ssrContext){var e=this.getMergedMetaTags();this.$ssrContext.title=this.$title,this.$ssrContext.lang=this.$lang,this.$ssrContext.pageMeta=(n=e)?n.map((function(e){var n="<meta";return Object.keys(e).forEach((function(t){n+=" ".concat(t,'="').concat(e[t],'"')})),n+">"})).join("\n    "):"",this.$ssrContext.canonicalLink=on(this.$canonicalUrl)}var n},mounted:function(){this.currentMetaTags=Object(Xe.a)(document.querySelectorAll("meta")),this.updateMeta(),this.updateCanonicalLink()},methods:{updateMeta:function(){document.title=this.$title,document.documentElement.lang=this.$lang;var e=this.getMergedMetaTags();this.currentMetaTags=an(e,this.currentMetaTags)},getMergedMetaTags:function(){var e=this.$page.frontmatter.meta||[];return nn()([{name:"description",content:this.$description}],e,this.siteMeta,sn)},updateCanonicalLink:function(){rn(),this.$canonicalUrl&&document.head.insertAdjacentHTML("beforeend",on(this.$canonicalUrl))}},watch:{$page:function(){this.updateMeta(),this.updateCanonicalLink()}},beforeDestroy:function(){an(null,this.currentMetaTags),rn()}};function rn(){var e=document.querySelector("link[rel='canonical']");e&&e.remove()}function on(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e?'<link href="'.concat(e,'" rel="canonical" />'):""}function an(e,n){if(n&&Object(Xe.a)(n).filter((function(e){return e.parentNode===document.head})).forEach((function(e){return document.head.removeChild(e)})),e)return e.map((function(e){var n=document.createElement("meta");return Object.keys(e).forEach((function(t){n.setAttribute(t,e[t])})),document.head.appendChild(n),n}))}function sn(e){for(var n=0,t=["name","property","itemprop"];n<t.length;n++){var i=t[n];if(e.hasOwnProperty(i))return e[i]+i}return JSON.stringify(e)}function ln(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}t(163);function cn(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function un(e,n,t){return n&&cn(e.prototype,n),t&&cn(e,t),e}t(328),t(329);var dn=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},hn=function(e){return"IMG"===e.tagName},pn=function(e){return e&&1===e.nodeType},fn=function(e){return".svg"===(e.currentSrc||e.src).substr(-4).toLowerCase()},mn=function(e){try{return Array.isArray(e)?e.filter(hn):function(e){return NodeList.prototype.isPrototypeOf(e)}(e)?[].slice.call(e).filter(hn):pn(e)?[e].filter(hn):"string"==typeof e?[].slice.call(document.querySelectorAll(e)).filter(hn):[]}catch(e){throw new TypeError("The provided selector is invalid.\nExpects a CSS selector, a Node element, a NodeList or an array.\nSee: https://github.com/francoischalifour/medium-zoom")}},gn=function(e){var n=document.createElement("div");return n.classList.add("medium-zoom-overlay"),n.style.background=e,n},vn=function(e){var n=e.getBoundingClientRect(),t=n.top,i=n.left,r=n.width,o=n.height,a=e.cloneNode(),s=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,l=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;return a.removeAttribute("id"),a.style.position="absolute",a.style.top=t+s+"px",a.style.left=i+l+"px",a.style.width=r+"px",a.style.height=o+"px",a.style.transform="",a},bn=function(e,n){var t=dn({bubbles:!1,cancelable:!1,detail:void 0},n);if("function"==typeof window.CustomEvent)return new CustomEvent(e,t);var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i};!function(e,n){void 0===n&&(n={});var t=n.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===t&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}(".medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)!important}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}");var yn=function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=window.Promise||function(e){function n(){}e(n,n)},r=function(e){var n=e.target;n!==C?-1!==y.indexOf(n)&&m({target:n}):f()},o=function(){if(!x&&k.original){var e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;Math.abs(_-e)>S.scrollOffset&&setTimeout(f,150)}},a=function(e){var n=e.key||e.keyCode;"Escape"!==n&&"Esc"!==n&&27!==n||f()},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e;if(e.background&&(C.style.background=e.background),e.container&&e.container instanceof Object&&(n.container=dn({},S.container,e.container)),e.template){var t=pn(e.template)?e.template:document.querySelector(e.template);n.template=t}return S=dn({},S,n),y.forEach((function(e){e.dispatchEvent(bn("medium-zoom:update",{detail:{zoom:E}}))})),E},l=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e(dn({},S,n))},c=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];var i=n.reduce((function(e,n){return[].concat(e,mn(n))}),[]);return i.filter((function(e){return-1===y.indexOf(e)})).forEach((function(e){y.push(e),e.classList.add("medium-zoom-image")})),w.forEach((function(e){var n=e.type,t=e.listener,r=e.options;i.forEach((function(e){e.addEventListener(n,t,r)}))})),E},u=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];k.zoomed&&f();var i=n.length>0?n.reduce((function(e,n){return[].concat(e,mn(n))}),[]):y;return i.forEach((function(e){e.classList.remove("medium-zoom-image"),e.dispatchEvent(bn("medium-zoom:detach",{detail:{zoom:E}}))})),y=y.filter((function(e){return-1===i.indexOf(e)})),E},d=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return y.forEach((function(i){i.addEventListener("medium-zoom:"+e,n,t)})),w.push({type:"medium-zoom:"+e,listener:n,options:t}),E},h=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return y.forEach((function(i){i.removeEventListener("medium-zoom:"+e,n,t)})),w=w.filter((function(t){return!(t.type==="medium-zoom:"+e&&t.listener.toString()===n.toString())})),E},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.target,t=function(){var e={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,left:0,top:0,right:0,bottom:0},n=void 0,t=void 0;if(S.container)if(S.container instanceof Object)n=(e=dn({},e,S.container)).width-e.left-e.right-2*S.margin,t=e.height-e.top-e.bottom-2*S.margin;else{var i=(pn(S.container)?S.container:document.querySelector(S.container)).getBoundingClientRect(),r=i.width,o=i.height,a=i.left,s=i.top;e=dn({},e,{width:r,height:o,left:a,top:s})}n=n||e.width-2*S.margin,t=t||e.height-2*S.margin;var l=k.zoomedHd||k.original,c=fn(l)?n:l.naturalWidth||n,u=fn(l)?t:l.naturalHeight||t,d=l.getBoundingClientRect(),h=d.top,p=d.left,f=d.width,m=d.height,g=Math.min(c,n)/f,v=Math.min(u,t)/m,b=Math.min(g,v),y="scale("+b+") translate3d("+((n-f)/2-p+S.margin+e.left)/b+"px, "+((t-m)/2-h+S.margin+e.top)/b+"px, 0)";k.zoomed.style.transform=y,k.zoomedHd&&(k.zoomedHd.style.transform=y)};return new i((function(e){if(n&&-1===y.indexOf(n))e(E);else{if(k.zoomed)e(E);else{if(n)k.original=n;else{if(!(y.length>0))return void e(E);var i=y;k.original=i[0]}if(k.original.dispatchEvent(bn("medium-zoom:open",{detail:{zoom:E}})),_=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,x=!0,k.zoomed=vn(k.original),document.body.appendChild(C),S.template){var r=pn(S.template)?S.template:document.querySelector(S.template);k.template=document.createElement("div"),k.template.appendChild(r.content.cloneNode(!0)),document.body.appendChild(k.template)}if(document.body.appendChild(k.zoomed),window.requestAnimationFrame((function(){document.body.classList.add("medium-zoom--opened")})),k.original.classList.add("medium-zoom-image--hidden"),k.zoomed.classList.add("medium-zoom-image--opened"),k.zoomed.addEventListener("click",f),k.zoomed.addEventListener("transitionend",(function n(){x=!1,k.zoomed.removeEventListener("transitionend",n),k.original.dispatchEvent(bn("medium-zoom:opened",{detail:{zoom:E}})),e(E)})),k.original.getAttribute("data-zoom-src")){k.zoomedHd=k.zoomed.cloneNode(),k.zoomedHd.removeAttribute("srcset"),k.zoomedHd.removeAttribute("sizes"),k.zoomedHd.src=k.zoomed.getAttribute("data-zoom-src"),k.zoomedHd.onerror=function(){clearInterval(o),console.warn("Unable to reach the zoom image target "+k.zoomedHd.src),k.zoomedHd=null,t()};var o=setInterval((function(){k.zoomedHd.complete&&(clearInterval(o),k.zoomedHd.classList.add("medium-zoom-image--opened"),k.zoomedHd.addEventListener("click",f),document.body.appendChild(k.zoomedHd),t())}),10)}else if(k.original.hasAttribute("srcset")){k.zoomedHd=k.zoomed.cloneNode(),k.zoomedHd.removeAttribute("sizes"),k.zoomedHd.removeAttribute("loading");var a=k.zoomedHd.addEventListener("load",(function(){k.zoomedHd.removeEventListener("load",a),k.zoomedHd.classList.add("medium-zoom-image--opened"),k.zoomedHd.addEventListener("click",f),document.body.appendChild(k.zoomedHd),t()}))}else t()}}}))},f=function(){return new i((function(e){if(!x&&k.original){x=!0,document.body.classList.remove("medium-zoom--opened"),k.zoomed.style.transform="",k.zoomedHd&&(k.zoomedHd.style.transform=""),k.template&&(k.template.style.transition="opacity 150ms",k.template.style.opacity=0),k.original.dispatchEvent(bn("medium-zoom:close",{detail:{zoom:E}})),k.zoomed.addEventListener("transitionend",(function n(){k.original.classList.remove("medium-zoom-image--hidden"),document.body.removeChild(k.zoomed),k.zoomedHd&&document.body.removeChild(k.zoomedHd),document.body.removeChild(C),k.zoomed.classList.remove("medium-zoom-image--opened"),k.template&&document.body.removeChild(k.template),x=!1,k.zoomed.removeEventListener("transitionend",n),k.original.dispatchEvent(bn("medium-zoom:closed",{detail:{zoom:E}})),k.original=null,k.zoomed=null,k.zoomedHd=null,k.template=null,e(E)}))}else e(E)}))},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.target;return k.original?f():p({target:n})},g=function(){return S},v=function(){return y},b=function(){return k.original},y=[],w=[],x=!1,_=0,S=t,k={original:null,zoomed:null,zoomedHd:null,template:null};"[object Object]"===Object.prototype.toString.call(n)?S=n:(n||"string"==typeof n)&&c(n),S=dn({margin:0,background:"#fff",scrollOffset:40,container:null,template:null},S);var C=gn(S.background);document.addEventListener("click",r),document.addEventListener("keyup",a),document.addEventListener("scroll",o),window.addEventListener("resize",f);var E={open:p,close:f,toggle:m,update:s,clone:l,attach:c,detach:u,on:d,off:h,getOptions:g,getImages:v,getZoomedImage:b};return E},wn=".content__default img",xn=JSON.parse('{"margin":24,"background":"#fff","scrollOffset":0}'),_n=Number("1000"),Sn=function(){function e(){ln(this,e),this.instance=null}return un(e,[{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wn;"undefined"!=typeof window&&(null===this.instance?this.instance=yn(e,xn):(this.instance.detach(),this.instance.attach(e)))}},{key:"updateDelay",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wn,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_n;setTimeout((function(){return e.update(n)}),t)}}]),e}(),kn=(t(477),[tn,{watch:{"$page.path":function(){void 0!==this.$vuepress.mediumZoom&&this.$vuepress.mediumZoom.updateDelay()}},mounted:function(){this.$vuepress.mediumZoom=new Sn,this.$vuepress.mediumZoom.updateDelay()}}]),Cn=t(1);Object(Ke.g)(Cn.default,"mixins",kn);var En=[{name:"v-b2754d56",path:"/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Layout","v-b2754d56").then(t)},meta:{pid:"post",id:"post"}},{path:"/index.html",redirect:"/"},{name:"v-6d5fd584",path:"/CHANGELOG.html",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Layout","v-6d5fd584").then(t)}},{name:"v-2267428e",path:"/handbooks/babel-plugin/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Life","v-2267428e").then(t)}},{path:"/handbooks/babel-plugin/index.html",redirect:"/handbooks/babel-plugin/"},{path:"/_handbook/babel-plugin.html",redirect:"/handbooks/babel-plugin/"},{name:"v-340858fc",path:"/handbooks/computer-network/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Life","v-340858fc").then(t)}},{path:"/handbooks/computer-network/index.html",redirect:"/handbooks/computer-network/"},{path:"/_handbook/computer-network.html",redirect:"/handbooks/computer-network/"},{name:"v-79326b20",path:"/handbooks/mysql-hb/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Life","v-79326b20").then(t)}},{path:"/handbooks/mysql-hb/index.html",redirect:"/handbooks/mysql-hb/"},{path:"/_handbook/mysql-hb.html",redirect:"/handbooks/mysql-hb/"},{name:"v-4e3e81c4",path:"/handbooks/python-hb/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Life","v-4e3e81c4").then(t)}},{path:"/handbooks/python-hb/index.html",redirect:"/handbooks/python-hb/"},{path:"/_handbook/python-hb.html",redirect:"/handbooks/python-hb/"},{name:"v-7cd52984",path:"/lifes/summerplace/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Life","v-7cd52984").then(t)}},{path:"/lifes/summerplace/index.html",redirect:"/lifes/summerplace/"},{path:"/_life/summerPlace.html",redirect:"/lifes/summerplace/"},{name:"v-c9654e38",path:"/lifes/promisetomarry/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Life","v-c9654e38").then(t)}},{path:"/lifes/promisetomarry/index.html",redirect:"/lifes/promisetomarry/"},{path:"/_life/promiseToMarry.html",redirect:"/lifes/promisetomarry/"},{name:"v-62c73d44",path:"/lifes/yunnanbiu/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Life","v-62c73d44").then(t)}},{path:"/lifes/yunnanbiu/index.html",redirect:"/lifes/yunnanbiu/"},{path:"/_life/yunnanBiu.html",redirect:"/lifes/yunnanbiu/"},{name:"v-c616719c",path:"/2018/04/13/linux-bash/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-c616719c").then(t)}},{path:"/2018/04/13/linux-bash/index.html",redirect:"/2018/04/13/linux-bash/"},{path:"/_posts/2018-04-13-linux-bash.html",redirect:"/2018/04/13/linux-bash/"},{name:"v-40342a7c",path:"/2018/04/29/ubuntu-setting/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-40342a7c").then(t)}},{path:"/2018/04/29/ubuntu-setting/index.html",redirect:"/2018/04/29/ubuntu-setting/"},{path:"/_posts/2018-04-29-Ubuntu-setting.html",redirect:"/2018/04/29/ubuntu-setting/"},{name:"v-8bc15644",path:"/2018/04/30/ubuntu-apt-dpkg/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-8bc15644").then(t)}},{path:"/2018/04/30/ubuntu-apt-dpkg/index.html",redirect:"/2018/04/30/ubuntu-apt-dpkg/"},{path:"/_posts/2018-04-30-Ubuntu-apt&dpkg.html",redirect:"/2018/04/30/ubuntu-apt-dpkg/"},{name:"v-02428510",path:"/2018/08/28/custom-event/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-02428510").then(t)}},{path:"/2018/08/28/custom-event/index.html",redirect:"/2018/08/28/custom-event/"},{path:"/_posts/2018-08-28-custom-event.html",redirect:"/2018/08/28/custom-event/"},{name:"v-b80300f0",path:"/2018/10/10/cookie/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-b80300f0").then(t)}},{path:"/2018/10/10/cookie/index.html",redirect:"/2018/10/10/cookie/"},{path:"/_posts/2018-10-10-Cookie.html",redirect:"/2018/10/10/cookie/"},{name:"v-44fe3bc0",path:"/2018/10/21/xshell/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-44fe3bc0").then(t)}},{path:"/2018/10/21/xshell/index.html",redirect:"/2018/10/21/xshell/"},{path:"/_posts/2018-10-21-Xshell.html",redirect:"/2018/10/21/xshell/"},{name:"v-6f6493d2",path:"/2018/12/09/shell-value-too-great-for-base/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-6f6493d2").then(t)}},{path:"/2018/12/09/shell-value-too-great-for-base/index.html",redirect:"/2018/12/09/shell-value-too-great-for-base/"},{path:"/_posts/2018-12-09-Shell-value-too-great-for-base.html",redirect:"/2018/12/09/shell-value-too-great-for-base/"},{name:"v-1108103e",path:"/2020/04/20/node-path/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-1108103e").then(t)}},{path:"/2020/04/20/node-path/index.html",redirect:"/2020/04/20/node-path/"},{path:"/_posts/2020-04-20-node-path.html",redirect:"/2020/04/20/node-path/"},{name:"v-93e4a8c4",path:"/2020/05/08/node-fs/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-93e4a8c4").then(t)}},{path:"/2020/05/08/node-fs/index.html",redirect:"/2020/05/08/node-fs/"},{path:"/_posts/2020-05-08-node-fs.html",redirect:"/2020/05/08/node-fs/"},{name:"v-6d7c83aa",path:"/2020/05/17/gitlab-jenkins/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-6d7c83aa").then(t)}},{path:"/2020/05/17/gitlab-jenkins/index.html",redirect:"/2020/05/17/gitlab-jenkins/"},{path:"/_posts/2020-05-17-gitlab&jenkins.html",redirect:"/2020/05/17/gitlab-jenkins/"},{name:"v-1acf2b1e",path:"/2020/05/27/node-os/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-1acf2b1e").then(t)}},{path:"/2020/05/27/node-os/index.html",redirect:"/2020/05/27/node-os/"},{path:"/_posts/2020-05-27-node-os.html",redirect:"/2020/05/27/node-os/"},{name:"v-b6ceae04",path:"/2020/06/01/leetcode-ispalindrome-09/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-b6ceae04").then(t)}},{path:"/2020/06/01/leetcode-ispalindrome-09/index.html",redirect:"/2020/06/01/leetcode-ispalindrome-09/"},{path:"/_posts/2020-06-01-leetcode-isPalindrome-09.html",redirect:"/2020/06/01/leetcode-ispalindrome-09/"},{name:"v-9e470ed8",path:"/2020/06/02/leetcode-pow-x-n-50/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-9e470ed8").then(t)}},{path:"/2020/06/02/leetcode-pow-x-n-50/index.html",redirect:"/2020/06/02/leetcode-pow-x-n-50/"},{path:"/_posts/2020-06-02-leetcode-pow(x,n)-50.html",redirect:"/2020/06/02/leetcode-pow-x-n-50/"},{name:"v-3f15e68a",path:"/2020/06/03/leetcode-pluse-one-66/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-3f15e68a").then(t)}},{path:"/2020/06/03/leetcode-pluse-one-66/index.html",redirect:"/2020/06/03/leetcode-pluse-one-66/"},{path:"/_posts/2020-06-03-leetcode-pluse one-66.html",redirect:"/2020/06/03/leetcode-pluse-one-66/"},{name:"v-4dc56a1e",path:"/2020/06/04/leetcode-set-matrix-zeroes-73/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-4dc56a1e").then(t)}},{path:"/2020/06/04/leetcode-set-matrix-zeroes-73/index.html",redirect:"/2020/06/04/leetcode-set-matrix-zeroes-73/"},{path:"/_posts/2020-06-04-leetcode-Set Matrix Zeroes-73.html",redirect:"/2020/06/04/leetcode-set-matrix-zeroes-73/"},{name:"v-3f87a953",path:"/2020/06/05/leetcode-pascal-s-triangle-118/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-3f87a953").then(t)}},{path:"/2020/06/05/leetcode-pascal-s-triangle-118/index.html",redirect:"/2020/06/05/leetcode-pascal-s-triangle-118/"},{path:"/_posts/2020-06-05-leetcode-Pascal's Triangle-118.html",redirect:"/2020/06/05/leetcode-pascal-s-triangle-118/"},{name:"v-680deed2",path:"/2020/06/06/leetcode-majorityelement-169/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-680deed2").then(t)}},{path:"/2020/06/06/leetcode-majorityelement-169/index.html",redirect:"/2020/06/06/leetcode-majorityelement-169/"},{path:"/_posts/2020-06-06-leetcode-majorityElement-169.html",redirect:"/2020/06/06/leetcode-majorityelement-169/"},{name:"v-0f230c8e",path:"/2020/06/07/leetcode-intersectionoftwoarrays-349/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-0f230c8e").then(t)}},{path:"/2020/06/07/leetcode-intersectionoftwoarrays-349/index.html",redirect:"/2020/06/07/leetcode-intersectionoftwoarrays-349/"},{path:"/_posts/2020-06-07-leetcode-IntersectionOfTwoArrays-349.html",redirect:"/2020/06/07/leetcode-intersectionoftwoarrays-349/"},{name:"v-1701c584",path:"/2020/06/08/leetcode-detectcapitaluse-520/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-1701c584").then(t)}},{path:"/2020/06/08/leetcode-detectcapitaluse-520/index.html",redirect:"/2020/06/08/leetcode-detectcapitaluse-520/"},{path:"/_posts/2020-06-08-leetcode-detectCapitalUse-520.html",redirect:"/2020/06/08/leetcode-detectcapitaluse-520/"},{name:"v-58b09fac",path:"/2020/06/09/leetcode-designhashset-705/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-58b09fac").then(t)}},{path:"/2020/06/09/leetcode-designhashset-705/index.html",redirect:"/2020/06/09/leetcode-designhashset-705/"},{path:"/_posts/2020-06-09-leetcode-designHashSet-705.html",redirect:"/2020/06/09/leetcode-designhashset-705/"},{name:"v-72d7c378",path:"/2020/06/10/continuousassignment/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-72d7c378").then(t)}},{path:"/2020/06/10/continuousassignment/index.html",redirect:"/2020/06/10/continuousassignment/"},{path:"/_posts/2020-06-10-continuousAssignment.html",redirect:"/2020/06/10/continuousassignment/"},{name:"v-7ae50946",path:"/2020/06/10/leetcode-numjewelsinstones-771/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-7ae50946").then(t)}},{path:"/2020/06/10/leetcode-numjewelsinstones-771/index.html",redirect:"/2020/06/10/leetcode-numjewelsinstones-771/"},{path:"/_posts/2020-06-10-leetcode-numJewelsInStones-771.html",redirect:"/2020/06/10/leetcode-numjewelsinstones-771/"},{name:"v-3f5c41e0",path:"/2020/06/11/leetcode-sequentialdigits-1291/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-3f5c41e0").then(t)}},{path:"/2020/06/11/leetcode-sequentialdigits-1291/index.html",redirect:"/2020/06/11/leetcode-sequentialdigits-1291/"},{path:"/_posts/2020-06-11-leetcode-sequentialDigits-1291.html",redirect:"/2020/06/11/leetcode-sequentialdigits-1291/"},{name:"v-7694cd9a",path:"/2020/06/12/leetcode-missingnumber-interview-53-ii/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-7694cd9a").then(t)}},{path:"/2020/06/12/leetcode-missingnumber-interview-53-ii/index.html",redirect:"/2020/06/12/leetcode-missingnumber-interview-53-ii/"},{path:"/_posts/2020-06-12-leetcode-missingNumber-interview-53-ii.html",redirect:"/2020/06/12/leetcode-missingnumber-interview-53-ii/"},{name:"v-0db4363e",path:"/2020/06/13/leetcode-distributecandies-1103/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-0db4363e").then(t)}},{path:"/2020/06/13/leetcode-distributecandies-1103/index.html",redirect:"/2020/06/13/leetcode-distributecandies-1103/"},{path:"/_posts/2020-06-13-leetcode-distributeCandies-1103.html",redirect:"/2020/06/13/leetcode-distributecandies-1103/"},{name:"v-0c7d089e",path:"/2020/06/15/apply-call-bind/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-0c7d089e").then(t)}},{path:"/2020/06/15/apply-call-bind/index.html",redirect:"/2020/06/15/apply-call-bind/"},{path:"/_posts/2020-06-15-apply-call-bind.html",redirect:"/2020/06/15/apply-call-bind/"},{name:"v-7b88550e",path:"/2020/06/16/map-reduce/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-7b88550e").then(t)}},{path:"/2020/06/16/map-reduce/index.html",redirect:"/2020/06/16/map-reduce/"},{path:"/_posts/2020-06-16-map-reduce.html",redirect:"/2020/06/16/map-reduce/"},{name:"v-91bb9904",path:"/2020/06/16/leetcode-maxslidingwindow-239/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-91bb9904").then(t)}},{path:"/2020/06/16/leetcode-maxslidingwindow-239/index.html",redirect:"/2020/06/16/leetcode-maxslidingwindow-239/"},{path:"/_posts/2020-06-16-leetcode-maxSlidingWindow-239.html",redirect:"/2020/06/16/leetcode-maxslidingwindow-239/"},{name:"v-5650b51e",path:"/2020/06/17/center-middle/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-5650b51e").then(t)}},{path:"/2020/06/17/center-middle/index.html",redirect:"/2020/06/17/center-middle/"},{path:"/_posts/2020-06-17-center-middle.html",redirect:"/2020/06/17/center-middle/"},{name:"v-03a57176",path:"/2020/06/18/es5-es6-extend/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-03a57176").then(t)}},{path:"/2020/06/18/es5-es6-extend/index.html",redirect:"/2020/06/18/es5-es6-extend/"},{path:"/_posts/2020-06-18-es5-es6-extend.html",redirect:"/2020/06/18/es5-es6-extend/"},{name:"v-7fbc829e",path:"/2020/06/19/cjs-esm-import-diff/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-7fbc829e").then(t)}},{path:"/2020/06/19/cjs-esm-import-diff/index.html",redirect:"/2020/06/19/cjs-esm-import-diff/"},{path:"/_posts/2020-06-19-cjs&esm-import-diff.html",redirect:"/2020/06/19/cjs-esm-import-diff/"},{name:"v-e2b8eb88",path:"/2020/06/20/new-instanceof/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-e2b8eb88").then(t)}},{path:"/2020/06/20/new-instanceof/index.html",redirect:"/2020/06/20/new-instanceof/"},{path:"/_posts/2020-06-20-new-instanceof.html",redirect:"/2020/06/20/new-instanceof/"},{name:"v-07b67c04",path:"/2020/06/22/debounce-throttle/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-07b67c04").then(t)}},{path:"/2020/06/22/debounce-throttle/index.html",redirect:"/2020/06/22/debounce-throttle/"},{path:"/_posts/2020-06-22-debounce-throttle.html",redirect:"/2020/06/22/debounce-throttle/"},{name:"v-0ef6168c",path:"/2020/06/23/eventemitter/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-0ef6168c").then(t)}},{path:"/2020/06/23/eventemitter/index.html",redirect:"/2020/06/23/eventemitter/"},{path:"/_posts/2020-06-23-EventEmitter.html",redirect:"/2020/06/23/eventemitter/"},{name:"v-64dbd57e",path:"/2020/06/28/less-function/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-64dbd57e").then(t)}},{path:"/2020/06/28/less-function/index.html",redirect:"/2020/06/28/less-function/"},{path:"/_posts/2020-06-28-less-function.html",redirect:"/2020/06/28/less-function/"},{name:"v-0e58d244",path:"/2020/07/02/backtrack/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-0e58d244").then(t)}},{path:"/2020/07/02/backtrack/index.html",redirect:"/2020/07/02/backtrack/"},{path:"/_posts/2020-07-02-backtrack.html",redirect:"/2020/07/02/backtrack/"},{name:"v-bb5c619e",path:"/2020/07/28/principles-of-computer-organization-02/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-bb5c619e").then(t)}},{path:"/2020/07/28/principles-of-computer-organization-02/index.html",redirect:"/2020/07/28/principles-of-computer-organization-02/"},{path:"/_posts/2020-07-28-Principles of Computer Organization-02.html",redirect:"/2020/07/28/principles-of-computer-organization-02/"},{name:"v-64936a7a",path:"/2020/08/01/foogetname/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-64936a7a").then(t)}},{path:"/2020/08/01/foogetname/index.html",redirect:"/2020/08/01/foogetname/"},{path:"/_posts/2020-08-01-foogetname.html",redirect:"/2020/08/01/foogetname/"},{name:"v-2caf8e7e",path:"/2020/08/12/https/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-2caf8e7e").then(t)}},{path:"/2020/08/12/https/index.html",redirect:"/2020/08/12/https/"},{path:"/_posts/2020-08-12-https.html",redirect:"/2020/08/12/https/"},{name:"v-6880295d",path:"/2020/08/20/principles-of-computer-organization-03/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-6880295d").then(t)}},{path:"/2020/08/20/principles-of-computer-organization-03/index.html",redirect:"/2020/08/20/principles-of-computer-organization-03/"},{path:"/_posts/2020-08-20-Principles of Computer Organization-03.html",redirect:"/2020/08/20/principles-of-computer-organization-03/"},{name:"v-320be4a6",path:"/2020/07/25/principles-of-computer-organization-01/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-320be4a6").then(t)}},{path:"/2020/07/25/principles-of-computer-organization-01/index.html",redirect:"/2020/07/25/principles-of-computer-organization-01/"},{path:"/_posts/2020-07-25-Principles of Computer Organization-01.html",redirect:"/2020/07/25/principles-of-computer-organization-01/"},{name:"v-45a6d390",path:"/2020/08/28/load-execute/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-45a6d390").then(t)}},{path:"/2020/08/28/load-execute/index.html",redirect:"/2020/08/28/load-execute/"},{path:"/_posts/2020-08-28-load&execute.html",redirect:"/2020/08/28/load-execute/"},{name:"v-48bd62e5",path:"/2020/08/25/principles-of-computer-organization-04/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-48bd62e5").then(t)}},{path:"/2020/08/25/principles-of-computer-organization-04/index.html",redirect:"/2020/08/25/principles-of-computer-organization-04/"},{path:"/_posts/2020-08-25-Principles of Computer Organization-04.html",redirect:"/2020/08/25/principles-of-computer-organization-04/"},{name:"v-e21cc276",path:"/2020/08/31/css-unit/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-e21cc276").then(t)}},{path:"/2020/08/31/css-unit/index.html",redirect:"/2020/08/31/css-unit/"},{path:"/_posts/2020-08-31-css unit.html",redirect:"/2020/08/31/css-unit/"},{name:"v-4e31b43e",path:"/2020/09/04/console/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-4e31b43e").then(t)}},{path:"/2020/09/04/console/index.html",redirect:"/2020/09/04/console/"},{path:"/_posts/2020-09-04-console.html",redirect:"/2020/09/04/console/"},{name:"v-7e4e1a04",path:"/2020/09/08/cjs-esm-require-context/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-7e4e1a04").then(t)}},{path:"/2020/09/08/cjs-esm-require-context/index.html",redirect:"/2020/09/08/cjs-esm-require-context/"},{path:"/_posts/2020-09-08-cjs&esm&require.context.html",redirect:"/2020/09/08/cjs-esm-require-context/"},{name:"v-6c5a453c",path:"/2020/09/13/domain-dns/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-6c5a453c").then(t)}},{path:"/2020/09/13/domain-dns/index.html",redirect:"/2020/09/13/domain-dns/"},{path:"/_posts/2020-09-13-domain&DNS.html",redirect:"/2020/09/13/domain-dns/"},{name:"v-1368c2d0",path:"/2020/09/22/dataaccess/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-1368c2d0").then(t)}},{path:"/2020/09/22/dataaccess/index.html",redirect:"/2020/09/22/dataaccess/"},{path:"/_posts/2020-09-22-dataAccess.html",redirect:"/2020/09/22/dataaccess/"},{name:"v-7fadf5fe",path:"/2020/10/01/dom/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-7fadf5fe").then(t)}},{path:"/2020/10/01/dom/index.html",redirect:"/2020/10/01/dom/"},{path:"/_posts/2020-10-01-DOM.html",redirect:"/2020/10/01/dom/"},{name:"v-b16522c4",path:"/2020/10/12/chromestructure/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-b16522c4").then(t)}},{path:"/2020/10/12/chromestructure/index.html",redirect:"/2020/10/12/chromestructure/"},{path:"/_posts/2020-10-12-ChromeStructure.html",redirect:"/2020/10/12/chromestructure/"},{name:"v-fb2d2604",path:"/2020/10/20/deepclone/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-fb2d2604").then(t)}},{path:"/2020/10/20/deepclone/index.html",redirect:"/2020/10/20/deepclone/"},{path:"/_posts/2020-10-20-deepclone.html",redirect:"/2020/10/20/deepclone/"},{name:"v-5192725e",path:"/2020/11/01/alo-flowcontrol/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-5192725e").then(t)}},{path:"/2020/11/01/alo-flowcontrol/index.html",redirect:"/2020/11/01/alo-flowcontrol/"},{path:"/_posts/2020-11-01-alo_flowControl.html",redirect:"/2020/11/01/alo-flowcontrol/"},{name:"v-b53aa774",path:"/2020/11/12/how-javascript-work1/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-b53aa774").then(t)}},{path:"/2020/11/12/how-javascript-work1/index.html",redirect:"/2020/11/12/how-javascript-work1/"},{path:"/_posts/2020-11-12-how-javascript-work1.html",redirect:"/2020/11/12/how-javascript-work1/"},{name:"v-5137b8a8",path:"/2020/12/01/regexp/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-5137b8a8").then(t)}},{path:"/2020/12/01/regexp/index.html",redirect:"/2020/12/01/regexp/"},{path:"/_posts/2020-12-01-regexp.html",redirect:"/2020/12/01/regexp/"},{name:"v-715cea78",path:"/2020/12/09/regexp-nfa/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-715cea78").then(t)}},{path:"/2020/12/09/regexp-nfa/index.html",redirect:"/2020/12/09/regexp-nfa/"},{path:"/_posts/2020-12-09-regexp-NFA.html",redirect:"/2020/12/09/regexp-nfa/"},{name:"v-3789f57e",path:"/2020/12/16/svg/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-3789f57e").then(t)}},{path:"/2020/12/16/svg/index.html",redirect:"/2020/12/16/svg/"},{path:"/_posts/2020-12-16-svg.html",redirect:"/2020/12/16/svg/"},{name:"v-3b0c6bd4",path:"/2020/12/20/ellipsis/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-3b0c6bd4").then(t)}},{path:"/2020/12/20/ellipsis/index.html",redirect:"/2020/12/20/ellipsis/"},{path:"/_posts/2020-12-20-ellipsis.html",redirect:"/2020/12/20/ellipsis/"},{name:"v-6e403dbe",path:"/2020/12/31/arraybuffer/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-6e403dbe").then(t)}},{path:"/2020/12/31/arraybuffer/index.html",redirect:"/2020/12/31/arraybuffer/"},{path:"/_posts/2020-12-31-arraybuffer.html",redirect:"/2020/12/31/arraybuffer/"},{name:"v-3a7aa7b2",path:"/2021/01/07/vue3/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-3a7aa7b2").then(t)}},{path:"/2021/01/07/vue3/index.html",redirect:"/2021/01/07/vue3/"},{path:"/_posts/2021-01-07-vue3.html",redirect:"/2021/01/07/vue3/"},{name:"v-59749606",path:"/2021/01/09/typescript/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-59749606").then(t)}},{path:"/2021/01/09/typescript/index.html",redirect:"/2021/01/09/typescript/"},{path:"/_posts/2021-01-09-typescript.html",redirect:"/2021/01/09/typescript/"},{name:"v-e1b886c4",path:"/2021/01/26/thread-safety/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-e1b886c4").then(t)}},{path:"/2021/01/26/thread-safety/index.html",redirect:"/2021/01/26/thread-safety/"},{path:"/_posts/2021-01-26-thread-safety.html",redirect:"/2021/01/26/thread-safety/"},{name:"v-74cf55b0",path:"/2021/03/05/sass/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-74cf55b0").then(t)}},{path:"/2021/03/05/sass/index.html",redirect:"/2021/03/05/sass/"},{path:"/_posts/2021-03-05-sass.html",redirect:"/2021/03/05/sass/"},{name:"v-2251fb10",path:"/2021/03/24/baidu-swan/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-2251fb10").then(t)}},{path:"/2021/03/24/baidu-swan/index.html",redirect:"/2021/03/24/baidu-swan/"},{path:"/_posts/2021-03-24-baidu-swan.html",redirect:"/2021/03/24/baidu-swan/"},{name:"v-112d3ec4",path:"/2021/03/29/float-double/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-112d3ec4").then(t)}},{path:"/2021/03/29/float-double/index.html",redirect:"/2021/03/29/float-double/"},{path:"/_posts/2021-03-29-float-double.html",redirect:"/2021/03/29/float-double/"},{name:"v-11d81cbe",path:"/2021/04/10/ast/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-11d81cbe").then(t)}},{path:"/2021/04/10/ast/index.html",redirect:"/2021/04/10/ast/"},{path:"/_posts/2021-04-10-AST.html",redirect:"/2021/04/10/ast/"},{name:"v-69fc2000",path:"/2021/04/13/how-javascript-work2/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-69fc2000").then(t)}},{path:"/2021/04/13/how-javascript-work2/index.html",redirect:"/2021/04/13/how-javascript-work2/"},{path:"/_posts/2021-04-13-how-javascript-work2.html",redirect:"/2021/04/13/how-javascript-work2/"},{name:"v-e621ca34",path:"/2021/04/21/blog-opt/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-e621ca34").then(t)}},{path:"/2021/04/21/blog-opt/index.html",redirect:"/2021/04/21/blog-opt/"},{path:"/_posts/2021-04-21-blog-opt.html",redirect:"/2021/04/21/blog-opt/"},{name:"v-0ea3989e",path:"/2021/05/05/concurrency-parallelism/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-0ea3989e").then(t)}},{path:"/2021/05/05/concurrency-parallelism/index.html",redirect:"/2021/05/05/concurrency-parallelism/"},{path:"/_posts/2021-05-05-Concurrency-Parallelism.html",redirect:"/2021/05/05/concurrency-parallelism/"},{name:"v-760ad9c8",path:"/2021/05/13/eat-what/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-760ad9c8").then(t)}},{path:"/2021/05/13/eat-what/index.html",redirect:"/2021/05/13/eat-what/"},{path:"/_posts/2021-05-13-eat-what.html",redirect:"/2021/05/13/eat-what/"},{name:"v-4be3ab3e",path:"/2021/05/20/router-switch/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-4be3ab3e").then(t)}},{path:"/2021/05/20/router-switch/index.html",redirect:"/2021/05/20/router-switch/"},{path:"/_posts/2021-05-20-router-switch.html",redirect:"/2021/05/20/router-switch/"},{name:"v-2c73b2f8",path:"/2021/06/01/how-javascript-work3/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-2c73b2f8").then(t)}},{path:"/2021/06/01/how-javascript-work3/index.html",redirect:"/2021/06/01/how-javascript-work3/"},{path:"/_posts/2021-06-01-how-javascript-work3.html",redirect:"/2021/06/01/how-javascript-work3/"},{name:"v-db94b744",path:"/2021/06/09/stack-heap-diff/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-db94b744").then(t)}},{path:"/2021/06/09/stack-heap-diff/index.html",redirect:"/2021/06/09/stack-heap-diff/"},{path:"/_posts/2021-06-09-stack-heap-diff.html",redirect:"/2021/06/09/stack-heap-diff/"},{name:"v-340ec498",path:"/2021/06/22/how-javascript-work4/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-340ec498").then(t)}},{path:"/2021/06/22/how-javascript-work4/index.html",redirect:"/2021/06/22/how-javascript-work4/"},{path:"/_posts/2021-06-22-how-javascript-work4.html",redirect:"/2021/06/22/how-javascript-work4/"},{name:"v-02122350",path:"/2021/06/28/image-compress/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-02122350").then(t)}},{path:"/2021/06/28/image-compress/index.html",redirect:"/2021/06/28/image-compress/"},{path:"/_posts/2021-06-28-image-compress.html",redirect:"/2021/06/28/image-compress/"},{name:"v-03466e5e",path:"/2021/07/01/es-next/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-03466e5e").then(t)}},{path:"/2021/07/01/es-next/index.html",redirect:"/2021/07/01/es-next/"},{path:"/_posts/2021-07-01-es-next.html",redirect:"/2021/07/01/es-next/"},{name:"v-023be828",path:"/2021/07/23/sci-note/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-023be828").then(t)}},{path:"/2021/07/23/sci-note/index.html",redirect:"/2021/07/23/sci-note/"},{path:"/_posts/2021-07-23-sci-note.html",redirect:"/2021/07/23/sci-note/"},{name:"v-c6398944",path:"/2021/07/30/sci-note2/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-c6398944").then(t)}},{path:"/2021/07/30/sci-note2/index.html",redirect:"/2021/07/30/sci-note2/"},{path:"/_posts/2021-07-30-sci-note2.html",redirect:"/2021/07/30/sci-note2/"},{name:"v-338a8c9e",path:"/2021/08/07/sci-note3/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-338a8c9e").then(t)}},{path:"/2021/08/07/sci-note3/index.html",redirect:"/2021/08/07/sci-note3/"},{path:"/_posts/2021-08-07-sci-note3.html",redirect:"/2021/08/07/sci-note3/"},{name:"v-7ae2d4e4",path:"/2021/08/12/device-spoof/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-7ae2d4e4").then(t)}},{path:"/2021/08/12/device-spoof/index.html",redirect:"/2021/08/12/device-spoof/"},{path:"/_posts/2021-08-12-device-spoof.html",redirect:"/2021/08/12/device-spoof/"},{name:"v-772ba81e",path:"/2021/08/13/sci-note4/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-772ba81e").then(t)}},{path:"/2021/08/13/sci-note4/index.html",redirect:"/2021/08/13/sci-note4/"},{path:"/_posts/2021-08-13-sci-note4.html",redirect:"/2021/08/13/sci-note4/"},{name:"v-4d0b8f92",path:"/2021/08/15/get-image-data/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-4d0b8f92").then(t)}},{path:"/2021/08/15/get-image-data/index.html",redirect:"/2021/08/15/get-image-data/"},{path:"/_posts/2021-08-15-get-image-data.html",redirect:"/2021/08/15/get-image-data/"},{name:"v-04f59a88",path:"/2021/08/18/how-javascript-work5/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-04f59a88").then(t)}},{path:"/2021/08/18/how-javascript-work5/index.html",redirect:"/2021/08/18/how-javascript-work5/"},{path:"/_posts/2021-08-18-how-javascript-work5.html",redirect:"/2021/08/18/how-javascript-work5/"},{name:"v-11d8c7be",path:"/2021/08/20/sci-note5/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-11d8c7be").then(t)}},{path:"/2021/08/20/sci-note5/index.html",redirect:"/2021/08/20/sci-note5/"},{path:"/_posts/2021-08-20-sci-note5.html",redirect:"/2021/08/20/sci-note5/"},{name:"v-40d4d644",path:"/2021/08/28/sci-note6/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-40d4d644").then(t)}},{path:"/2021/08/28/sci-note6/index.html",redirect:"/2021/08/28/sci-note6/"},{path:"/_posts/2021-08-28-sci-note6.html",redirect:"/2021/08/28/sci-note6/"},{name:"v-1571973e",path:"/2021/09/02/eventloop-raf-rid/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-1571973e").then(t)}},{path:"/2021/09/02/eventloop-raf-rid/index.html",redirect:"/2021/09/02/eventloop-raf-rid/"},{path:"/_posts/2021-09-02-eventloop-rAF-rID.html",redirect:"/2021/09/02/eventloop-raf-rid/"},{name:"v-27bd9704",path:"/2021/09/03/sci-note7/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-27bd9704").then(t)}},{path:"/2021/09/03/sci-note7/index.html",redirect:"/2021/09/03/sci-note7/"},{path:"/_posts/2021-09-03-sci-note7.html",redirect:"/2021/09/03/sci-note7/"},{name:"v-444b4f84",path:"/2021/09/11/sci-note8/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-444b4f84").then(t)}},{path:"/2021/09/11/sci-note8/index.html",redirect:"/2021/09/11/sci-note8/"},{path:"/_posts/2021-09-11-sci-note8.html",redirect:"/2021/09/11/sci-note8/"},{name:"v-01b345d4",path:"/2021/09/28/sci-note9-10/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-01b345d4").then(t)}},{path:"/2021/09/28/sci-note9-10/index.html",redirect:"/2021/09/28/sci-note9-10/"},{path:"/_posts/2021-09-28-sci-note9&10.html",redirect:"/2021/09/28/sci-note9-10/"},{name:"v-75403e1e",path:"/2021/09/29/sir/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-75403e1e").then(t)}},{path:"/2021/09/29/sir/index.html",redirect:"/2021/09/29/sir/"},{path:"/_posts/2021-09-29-SIR.html",redirect:"/2021/09/29/sir/"},{name:"v-51c9f104",path:"/2021/10/19/sql/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-51c9f104").then(t)}},{path:"/2021/10/19/sql/index.html",redirect:"/2021/10/19/sql/"},{path:"/_posts/2021-10-19-sql.html",redirect:"/2021/10/19/sql/"},{name:"v-a2944974",path:"/2021/10/26/node-color-console/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-a2944974").then(t)}},{path:"/2021/10/26/node-color-console/index.html",redirect:"/2021/10/26/node-color-console/"},{path:"/_posts/2021-10-26-node-color-console.html",redirect:"/2021/10/26/node-color-console/"},{name:"v-3ee7d4ba",path:"/2021/11/11/encryption/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-3ee7d4ba").then(t)}},{path:"/2021/11/11/encryption/index.html",redirect:"/2021/11/11/encryption/"},{path:"/_posts/2021-11-11-encryption.html",redirect:"/2021/11/11/encryption/"},{name:"v-ca70ce04",path:"/2021/11/14/rsa-1/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-ca70ce04").then(t)}},{path:"/2021/11/14/rsa-1/index.html",redirect:"/2021/11/14/rsa-1/"},{path:"/_posts/2021-11-14-RSA-1.html",redirect:"/2021/11/14/rsa-1/"},{name:"v-e727f904",path:"/2021/11/17/rsa-2/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-e727f904").then(t)}},{path:"/2021/11/17/rsa-2/index.html",redirect:"/2021/11/17/rsa-2/"},{path:"/_posts/2021-11-17-RSA-2.html",redirect:"/2021/11/17/rsa-2/"},{name:"v-0783d65e",path:"/2021/11/23/exgcd/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-0783d65e").then(t)}},{path:"/2021/11/23/exgcd/index.html",redirect:"/2021/11/23/exgcd/"},{path:"/_posts/2021-11-23-exgcd.html",redirect:"/2021/11/23/exgcd/"},{name:"v-63a42998",path:"/2021/11/24/web-speech-api/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-63a42998").then(t)}},{path:"/2021/11/24/web-speech-api/index.html",redirect:"/2021/11/24/web-speech-api/"},{path:"/_posts/2021-11-24-web-speech-api.html",redirect:"/2021/11/24/web-speech-api/"},{name:"v-c2b18304",path:"/2020/07/17/subject-this/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-c2b18304").then(t)}},{path:"/2020/07/17/subject-this/index.html",redirect:"/2020/07/17/subject-this/"},{path:"/_posts/2020-07-17-subject-this.html",redirect:"/2020/07/17/subject-this/"},{name:"v-7db2b71a",path:"/2020/07/12/heap/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Post","v-7db2b71a").then(t)}},{path:"/2020/07/12/heap/index.html",redirect:"/2020/07/12/heap/"},{path:"/_posts/2020-07-12-heap.html",redirect:"/2020/07/12/heap/"},{name:"v-185333ad",path:"/lifes/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Lifes","v-185333ad").then(t)},meta:{pid:"life",id:"life"}},{path:"/lifes/index.html",redirect:"/lifes/"},{name:"v-0c991709",path:"/handbooks/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("HandBooks","v-0c991709").then(t)},meta:{pid:"handbook",id:"handbook"}},{path:"/handbooks/index.html",redirect:"/handbooks/"},{name:"v-0c9dce3e",path:"/emoji/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Emoji","v-0c9dce3e").then(t)},meta:{pid:"emoji",id:"emoji"}},{path:"/emoji/index.html",redirect:"/emoji/"},{name:"v-b1564aac",path:"/tag/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("FrontmatterKey","v-b1564aac").then(t)},meta:{pid:"tag",id:"tag"}},{path:"/tag/index.html",redirect:"/tag/"},{name:"v-e14f25f6",path:"/tag/Linux/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("FrontmatterPagination","v-e14f25f6").then(t)},meta:{pid:"tag",id:"Linux"}},{path:"/tag/Linux/index.html",redirect:"/tag/Linux/"},{name:"v-2c3acc1e",path:"/tag/Ubuntu/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("FrontmatterPagination","v-2c3acc1e").then(t)},meta:{pid:"tag",id:"Ubuntu"}},{path:"/tag/Ubuntu/index.html",redirect:"/tag/Ubuntu/"},{name:"v-67fe8817",path:"/tag/前端开发/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("FrontmatterPagination","v-67fe8817").then(t)},meta:{pid:"tag",id:"前端开发"}},{path:"/tag/前端开发/index.html",redirect:"/tag/前端开发/"},{name:"v-7a5f6990",path:"/tag/JavaScript/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("FrontmatterPagination","v-7a5f6990").then(t)},meta:{pid:"tag",id:"JavaScript"}},{path:"/tag/JavaScript/index.html",redirect:"/tag/JavaScript/"},{name:"v-31970f26",path:"/tag/Xshell/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("FrontmatterPagination","v-31970f26").then(t)},meta:{pid:"tag",id:"Xshell"}},{path:"/tag/Xshell/index.html",redirect:"/tag/Xshell/"},{name:"v-5c59c9ae",path:"/tag/shell/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("FrontmatterPagination","v-5c59c9ae").then(t)},meta:{pid:"tag",id:"shell"}},{path:"/tag/shell/index.html",redirect:"/tag/shell/"},{name:"v-14055bfa",path:"/tag/node/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("FrontmatterPagination","v-14055bfa").then(t)},meta:{pid:"tag",id:"node"}},{path:"/tag/node/index.html",redirect:"/tag/node/"},{name:"v-e8d99cc2",path:"/tag/CI/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("FrontmatterPagination","v-e8d99cc2").then(t)},meta:{pid:"tag",id:"CI"}},{path:"/tag/CI/index.html",redirect:"/tag/CI/"},{name:"v-1f64cdac",path:"/tag/gitlab/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("FrontmatterPagination","v-1f64cdac").then(t)},meta:{pid:"tag",id:"gitlab"}},{path:"/tag/gitlab/index.html",redirect:"/tag/gitlab/"},{name:"v-7328d2e3",path:"/tag/jenkins/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("FrontmatterPagination","v-7328d2e3").then(t)},meta:{pid:"tag",id:"jenkins"}},{path:"/tag/jenkins/index.html",redirect:"/tag/jenkins/"},{name:"v-76487520",path:"/tag/Leetcode/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("FrontmatterPagination","v-76487520").then(t)},meta:{pid:"tag",id:"Leetcode"}},{path:"/tag/Leetcode/index.html",redirect:"/tag/Leetcode/"},{name:"v-3259a754",path:"/tag/CSS/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("FrontmatterPagination","v-3259a754").then(t)},meta:{pid:"tag",id:"CSS"}},{path:"/tag/CSS/index.html",redirect:"/tag/CSS/"},{name:"v-17cc3da8",path:"/tag/Less/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("FrontmatterPagination","v-17cc3da8").then(t)},meta:{pid:"tag",id:"Less"}},{path:"/tag/Less/index.html",redirect:"/tag/Less/"},{name:"v-89abd2d6",path:"/tag/算法/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("FrontmatterPagination","v-89abd2d6").then(t)},meta:{pid:"tag",id:"算法"}},{path:"/tag/算法/index.html",redirect:"/tag/算法/"},{name:"v-4cb5e150",path:"/tag/计算机组成原理/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("FrontmatterPagination","v-4cb5e150").then(t)},meta:{pid:"tag",id:"计算机组成原理"}},{path:"/tag/计算机组成原理/index.html",redirect:"/tag/计算机组成原理/"},{name:"v-c517f1f0",path:"/tag/计算机知识/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("FrontmatterPagination","v-c517f1f0").then(t)},meta:{pid:"tag",id:"计算机知识"}},{path:"/tag/计算机知识/index.html",redirect:"/tag/计算机知识/"},{name:"v-e66da3b6",path:"/tag/转载/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("FrontmatterPagination","v-e66da3b6").then(t)},meta:{pid:"tag",id:"转载"}},{path:"/tag/转载/index.html",redirect:"/tag/转载/"},{name:"v-71f849b4",path:"/tag/读书笔记/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("FrontmatterPagination","v-71f849b4").then(t)},meta:{pid:"tag",id:"读书笔记"}},{path:"/tag/读书笔记/index.html",redirect:"/tag/读书笔记/"},{name:"v-5f97b358",path:"/tag/Javascript/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("FrontmatterPagination","v-5f97b358").then(t)},meta:{pid:"tag",id:"Javascript"}},{path:"/tag/Javascript/index.html",redirect:"/tag/Javascript/"},{name:"v-49a56e2a",path:"/tag/前端/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("FrontmatterPagination","v-49a56e2a").then(t)},meta:{pid:"tag",id:"前端"}},{path:"/tag/前端/index.html",redirect:"/tag/前端/"},{name:"v-710f084d",path:"/tag/翻译/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("FrontmatterPagination","v-710f084d").then(t)},meta:{pid:"tag",id:"翻译"}},{path:"/tag/翻译/index.html",redirect:"/tag/翻译/"},{name:"v-a4358e00",path:"/tag/正则表达式/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("FrontmatterPagination","v-a4358e00").then(t)},meta:{pid:"tag",id:"正则表达式"}},{path:"/tag/正则表达式/index.html",redirect:"/tag/正则表达式/"},{name:"v-324b07d6",path:"/tag/SVG/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("FrontmatterPagination","v-324b07d6").then(t)},meta:{pid:"tag",id:"SVG"}},{path:"/tag/SVG/index.html",redirect:"/tag/SVG/"},{name:"v-54ff1ad0",path:"/tag/工作相关/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("FrontmatterPagination","v-54ff1ad0").then(t)},meta:{pid:"tag",id:"工作相关"}},{path:"/tag/工作相关/index.html",redirect:"/tag/工作相关/"},{name:"v-32475d9a",path:"/tag/Vue/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("FrontmatterPagination","v-32475d9a").then(t)},meta:{pid:"tag",id:"Vue"}},{path:"/tag/Vue/index.html",redirect:"/tag/Vue/"},{name:"v-bee809c0",path:"/tag/TypeScript/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("FrontmatterPagination","v-bee809c0").then(t)},meta:{pid:"tag",id:"TypeScript"}},{path:"/tag/TypeScript/index.html",redirect:"/tag/TypeScript/"},{name:"v-1ab328d2",path:"/tag/线程/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("FrontmatterPagination","v-1ab328d2").then(t)},meta:{pid:"tag",id:"线程"}},{path:"/tag/线程/index.html",redirect:"/tag/线程/"},{name:"v-170a9792",path:"/tag/Sass/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("FrontmatterPagination","v-170a9792").then(t)},meta:{pid:"tag",id:"Sass"}},{path:"/tag/Sass/index.html",redirect:"/tag/Sass/"},{name:"v-7f359a8a",path:"/tag/百度小程序/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("FrontmatterPagination","v-7f359a8a").then(t)},meta:{pid:"tag",id:"百度小程序"}},{path:"/tag/百度小程序/index.html",redirect:"/tag/百度小程序/"},{name:"v-325b7892",path:"/tag/AST/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("FrontmatterPagination","v-325b7892").then(t)},meta:{pid:"tag",id:"AST"}},{path:"/tag/AST/index.html",redirect:"/tag/AST/"},{name:"v-9726c6a2",path:"/tag/babel/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("FrontmatterPagination","v-9726c6a2").then(t)},meta:{pid:"tag",id:"babel"}},{path:"/tag/babel/index.html",redirect:"/tag/babel/"},{name:"v-118bbe28",path:"/tag/Travis/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("FrontmatterPagination","v-118bbe28").then(t)},meta:{pid:"tag",id:"Travis"}},{path:"/tag/Travis/index.html",redirect:"/tag/Travis/"},{name:"v-149c40a4",path:"/tag/idea/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("FrontmatterPagination","v-149c40a4").then(t)},meta:{pid:"tag",id:"idea"}},{path:"/tag/idea/index.html",redirect:"/tag/idea/"},{name:"v-397a035e",path:"/tag/趣谈/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("FrontmatterPagination","v-397a035e").then(t)},meta:{pid:"tag",id:"趣谈"}},{path:"/tag/趣谈/index.html",redirect:"/tag/趣谈/"},{name:"v-324b2c2a",path:"/tag/SQL/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("FrontmatterPagination","v-324b2c2a").then(t)},meta:{pid:"tag",id:"SQL"}},{path:"/tag/SQL/index.html",redirect:"/tag/SQL/"},{name:"v-96a3ae40",path:"/tag/其他/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("FrontmatterPagination","v-96a3ae40").then(t)},meta:{pid:"tag",id:"其他"}},{path:"/tag/其他/index.html",redirect:"/tag/其他/"},{name:"v-00149736",path:"/tag/密码学/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("FrontmatterPagination","v-00149736").then(t)},meta:{pid:"tag",id:"密码学"}},{path:"/tag/密码学/index.html",redirect:"/tag/密码学/"},{name:"v-7fd1851a",path:"/tag/数论/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("FrontmatterPagination","v-7fd1851a").then(t)},meta:{pid:"tag",id:"数论"}},{path:"/tag/数论/index.html",redirect:"/tag/数论/"},{name:"v-8fdafa70",path:"/page/2/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Layout","v-8fdafa70").then(t)},meta:{pid:"post",id:"post"}},{path:"/page/2/index.html",redirect:"/page/2/"},{name:"v-8fdafa32",path:"/page/3/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Layout","v-8fdafa32").then(t)},meta:{pid:"post",id:"post"}},{path:"/page/3/index.html",redirect:"/page/3/"},{name:"v-8fdaf9f4",path:"/page/4/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Layout","v-8fdaf9f4").then(t)},meta:{pid:"post",id:"post"}},{path:"/page/4/index.html",redirect:"/page/4/"},{name:"v-8fdaf9b6",path:"/page/5/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Layout","v-8fdaf9b6").then(t)},meta:{pid:"post",id:"post"}},{path:"/page/5/index.html",redirect:"/page/5/"},{name:"v-8fdaf978",path:"/page/6/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Layout","v-8fdaf978").then(t)},meta:{pid:"post",id:"post"}},{path:"/page/6/index.html",redirect:"/page/6/"},{name:"v-8fdaf93a",path:"/page/7/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Layout","v-8fdaf93a").then(t)},meta:{pid:"post",id:"post"}},{path:"/page/7/index.html",redirect:"/page/7/"},{name:"v-8fdaf8fc",path:"/page/8/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Layout","v-8fdaf8fc").then(t)},meta:{pid:"post",id:"post"}},{path:"/page/8/index.html",redirect:"/page/8/"},{name:"v-8fdaf8be",path:"/page/9/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Layout","v-8fdaf8be").then(t)},meta:{pid:"post",id:"post"}},{path:"/page/9/index.html",redirect:"/page/9/"},{name:"v-4a3dd2c5",path:"/page/10/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Layout","v-4a3dd2c5").then(t)},meta:{pid:"post",id:"post"}},{path:"/page/10/index.html",redirect:"/page/10/"},{name:"v-036d95c6",path:"/tag/前端开发/page/2/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Layout","v-036d95c6").then(t)},meta:{pid:"tag",id:"前端开发"}},{path:"/tag/前端开发/page/2/index.html",redirect:"/tag/前端开发/page/2/"},{name:"v-036d95e5",path:"/tag/前端开发/page/3/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Layout","v-036d95e5").then(t)},meta:{pid:"tag",id:"前端开发"}},{path:"/tag/前端开发/page/3/index.html",redirect:"/tag/前端开发/page/3/"},{name:"v-036d9604",path:"/tag/前端开发/page/4/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Layout","v-036d9604").then(t)},meta:{pid:"tag",id:"前端开发"}},{path:"/tag/前端开发/page/4/index.html",redirect:"/tag/前端开发/page/4/"},{name:"v-169d88f6",path:"/tag/JavaScript/page/2/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Layout","v-169d88f6").then(t)},meta:{pid:"tag",id:"JavaScript"}},{path:"/tag/JavaScript/page/2/index.html",redirect:"/tag/JavaScript/page/2/"},{name:"v-169d88b8",path:"/tag/JavaScript/page/3/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Layout","v-169d88b8").then(t)},meta:{pid:"tag",id:"JavaScript"}},{path:"/tag/JavaScript/page/3/index.html",redirect:"/tag/JavaScript/page/3/"},{name:"v-169d887a",path:"/tag/JavaScript/page/4/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Layout","v-169d887a").then(t)},meta:{pid:"tag",id:"JavaScript"}},{path:"/tag/JavaScript/page/4/index.html",redirect:"/tag/JavaScript/page/4/"},{name:"v-169d883c",path:"/tag/JavaScript/page/5/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Layout","v-169d883c").then(t)},meta:{pid:"tag",id:"JavaScript"}},{path:"/tag/JavaScript/page/5/index.html",redirect:"/tag/JavaScript/page/5/"},{name:"v-169d87fe",path:"/tag/JavaScript/page/6/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Layout","v-169d87fe").then(t)},meta:{pid:"tag",id:"JavaScript"}},{path:"/tag/JavaScript/page/6/index.html",redirect:"/tag/JavaScript/page/6/"},{name:"v-169d87c0",path:"/tag/JavaScript/page/7/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Layout","v-169d87c0").then(t)},meta:{pid:"tag",id:"JavaScript"}},{path:"/tag/JavaScript/page/7/index.html",redirect:"/tag/JavaScript/page/7/"},{name:"v-ae2b5b66",path:"/tag/Leetcode/page/2/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Layout","v-ae2b5b66").then(t)},meta:{pid:"tag",id:"Leetcode"}},{path:"/tag/Leetcode/page/2/index.html",redirect:"/tag/Leetcode/page/2/"},{name:"v-ae2b5b28",path:"/tag/Leetcode/page/3/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Layout","v-ae2b5b28").then(t)},meta:{pid:"tag",id:"Leetcode"}},{path:"/tag/Leetcode/page/3/index.html",redirect:"/tag/Leetcode/page/3/"},{name:"v-ae2b5aea",path:"/tag/Leetcode/page/4/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Layout","v-ae2b5aea").then(t)},meta:{pid:"tag",id:"Leetcode"}},{path:"/tag/Leetcode/page/4/index.html",redirect:"/tag/Leetcode/page/4/"},{name:"v-4f6995b5",path:"/tag/计算机知识/page/2/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Layout","v-4f6995b5").then(t)},meta:{pid:"tag",id:"计算机知识"}},{path:"/tag/计算机知识/page/2/index.html",redirect:"/tag/计算机知识/page/2/"},{name:"v-78cca3f8",path:"/tag/转载/page/2/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Layout","v-78cca3f8").then(t)},meta:{pid:"tag",id:"转载"}},{path:"/tag/转载/page/2/index.html",redirect:"/tag/转载/page/2/"},{name:"v-78cca417",path:"/tag/转载/page/3/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Layout","v-78cca417").then(t)},meta:{pid:"tag",id:"转载"}},{path:"/tag/转载/page/3/index.html",redirect:"/tag/转载/page/3/"},{name:"v-78cca436",path:"/tag/转载/page/4/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Layout","v-78cca436").then(t)},meta:{pid:"tag",id:"转载"}},{path:"/tag/转载/page/4/index.html",redirect:"/tag/转载/page/4/"},{name:"v-78cca455",path:"/tag/转载/page/5/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Layout","v-78cca455").then(t)},meta:{pid:"tag",id:"转载"}},{path:"/tag/转载/page/5/index.html",redirect:"/tag/转载/page/5/"},{name:"v-78cca474",path:"/tag/转载/page/6/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Layout","v-78cca474").then(t)},meta:{pid:"tag",id:"转载"}},{path:"/tag/转载/page/6/index.html",redirect:"/tag/转载/page/6/"},{name:"v-284c8cd0",path:"/tag/翻译/page/2/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Layout","v-284c8cd0").then(t)},meta:{pid:"tag",id:"翻译"}},{path:"/tag/翻译/page/2/index.html",redirect:"/tag/翻译/page/2/"},{name:"v-675c8a4c",path:"/tag/趣谈/page/2/",component:Cn.default,beforeEnter:function(e,n,t){Object(Ke.a)("Layout","v-675c8a4c").then(t)},meta:{pid:"tag",id:"趣谈"}},{path:"/tag/趣谈/page/2/index.html",redirect:"/tag/趣谈/page/2/"},{path:"*",component:Cn.default}],Tn={title:"Yoha's Blog",description:"道虽迩，不行不至；事虽小，不为不成",base:"/blog/",headTags:[["link",{rel:"icon",href:"/blog/favicon.ico"}]],pages:[{frontmatter:{layout:"Layout",title:"Home",readingShow:"top"},regularPath:"/",key:"v-b2754d56",path:"/",content:""},{title:"(2021-12-13)",frontmatter:{readingShow:"top"},regularPath:"/CHANGELOG.html",relativePath:"CHANGELOG.md",key:"v-6d5fd584",path:"/CHANGELOG.html",headers:[{level:3,title:"Bug Fixes",slug:"bug-fixes"},{level:3,title:"Features",slug:"features"}],lastUpdated:"12/13/2021, 3:35:07 PM",content:" (2021-12-13) \n Bug Fixes \n \n _handbook/python-hb.md:  fix typo error 🐛 ( 5ca5c39 ) \n 2021-09-02-eventloop-raf-rid:  替换封面图 ( d826a3f ) \n 升级npm包 timetoread 时间修复🐛:  fix time to read unexcept number ( f3345af ) \n babel-hb ( 304d7d6 ) \n busuanzi overlap 🐛:  add media search ⚡️ ( 20d0fc4 ) \n config.js & less-function.md & baidu-swan.md:  fix error change markdown language mark ⚡️ ( 1466b49 ) \n exgcd.md:  fix: correct bkg image url 🐛 ( c5004d8 ) \n first sci-note format error ⚡️ ( 2570663 ) \n fix date error ( e02ee7e ) \n fix emoji display error ( c2e62bc ) \n fix error url of sci-note3 🐛 ( d33f1c6 ) \n fix error word in sci-note#6 🐛:  支出 -> 指出 ⚡️ ( ce3d292 ), closes  sci-note#6 \n paper image compress 错别字 ( 08bb98a ) \n py-hb.md:  fix typo: change 'sun' to 'sum' 🐛 ( 5e561e5 ) \n py-hb:  fix error: change 'list' to 'list_1' ( ee2826c ) \n sci-note2 原文跳转链接错误 ( 4b06acf ) \n sci-note2 原文跳转链接错误 ( 2beaf54 ) \n sql.md:  fix: fix typo error 🐛 ( c52845d ) \n update new kwy words ( cdb5fb5 ) \n Features \n \n _post/2021-09-29-sir.md:  add new paper about SIR 🎉 ( 8547b5e ) \n _post/sci-note9&10.md:  add sci-note #9 #10  by ruanyf 🎨 ( 86e2ffa ) \n 2021-09-03-sci-note7.md:  add paper sci-note #7  by ruanyf 🎨 ( ad06e63 ) \n 2021-09-11-sci-note8:  add new paper 2021-09-11-sci-note8 🎨 🎉 ( cf5bdba ) \n 添加随机一句 🎉:  add random sentence support by hitokoto ( bad8fdd ) \n add paper eventloop raf-ric 🎨:  add paper eventloop raf-ric 🎨 ( b41120e ) \n add paper sci-note#six 🔥:  update paper sci-note#six bu ruanyf 🎨 ( 7918eb0 ) \n enceyption.md:  add new post called encryption.md ⚡️ ( 924dc47 ) \n exgcd.md:  add new post exgcd.md ⚡️ ( f6cf45a ) \n life/promisetomarry.md:  promiseToMarry 🎉 🎉 🎉 ( 4b6fb4e ) \n mysql-hb.md:  add new poster: mysql-hb.md ( 7c316c7 ) \n node-color-console.md:  add new paper node-color-console.md ⚡️ ( e7c11e0 ) \n py-hb ⚡️:  py-hb change ( c94fd90 ) \n rsa-2.md:  add new poster:RSA-2.md 🎨 ( fbcf5cb ) \n rsa1.md:  add new poster RSA_1.md ⚡️ ( 0ef1f46 ) \n sci-note5#172 💯:  update paper sci-note #172  by ruanyf 🚀 ( 4188b13 ) \n sql.md 🎨:  add new paper about SQL 🔥 ( bb1d07c ) \n web-speech-api.md:  add new post web-speech-api.md ⚡️ ( 72557a9 ) \n \n",summary:"\nBug Fixes\n\n_handbook/python-hb.md: fix typo error :bug: (5ca5c39)\n2021-09-02-eventloop-raf-rid: 替换封面图 (d826a3f)\n升级npm包 timetoread 时间修复:bug:: fix time to read unexcept number (f3345af)\nbabel-hb (304d7d6)\nbusuanzi overlap :bug:: add media search :zap: (20d0fc4)\nconfig.js & less-function.md & baidu-sw ...",readingTime:{text:"2 min read",minutes:1.54,time:92400,words:308}},{title:"Babel 插件手册",frontmatter:{title:"Babel 插件手册",description:"文档涵盖了如何创建 Babel 插件等方面的内容",link:"https://babeljs.io/",github:"https://github.com/babel/babel",languages:["AST","Babel"],layout:"Life",permalink:"/handbooks/:slug",readingShow:"top"},regularPath:"/_handbook/babel-plugin.html",relativePath:"_handbook/babel-plugin.md",key:"v-2267428e",path:"/handbooks/babel-plugin/",headers:[{level:2,title:"抽象语法树（ASTs）",slug:"抽象语法树-asts"},{level:2,title:"Babel 的处理步骤",slug:"babel-的处理步骤"},{level:3,title:"解析",slug:"解析"},{level:3,title:"转换",slug:"转换"},{level:3,title:"生成",slug:"生成"},{level:2,title:"遍历",slug:"遍历"},{level:3,title:"Visitors（访问者）",slug:"visitors-访问者"},{level:3,title:"Paths（路径）",slug:"paths-路径"},{level:3,title:"State（状态）",slug:"state-状态"},{level:3,title:"Scopes（作用域）",slug:"scopes-作用域"},{level:2,title:"babylon",slug:"babylon"},{level:2,title:"babel-traverse",slug:"babel-traverse"},{level:2,title:"babel-types",slug:"babel-types"},{level:3,title:"Definitions（定义）",slug:"definitions-定义"},{level:3,title:"Builders（构建器）",slug:"builders-构建器"},{level:3,title:"Validators（验证器）",slug:"validators-验证器"},{level:3,title:"Converters（变换器）",slug:"converters-变换器"},{level:2,title:"babel-generator",slug:"babel-generator"},{level:2,title:"babel-template",slug:"babel-template"},{level:2,title:"访问",slug:"访问"},{level:3,title:"获取子节点的Path",slug:"获取子节点的path"},{level:3,title:"检查节点的类型",slug:"检查节点的类型"},{level:3,title:"检查路径（Path）类型",slug:"检查路径-path-类型"},{level:3,title:"检查标识符（Identifier）是否被引用",slug:"检查标识符-identifier-是否被引用"},{level:3,title:"找到特定的父路径",slug:"找到特定的父路径"},{level:3,title:"获取同级路径",slug:"获取同级路径"},{level:3,title:"停止遍历",slug:"停止遍历"},{level:2,title:"处理",slug:"处理"},{level:3,title:"替换一个节点",slug:"替换一个节点"},{level:3,title:"用多节点替换单节点",slug:"用多节点替换单节点"},{level:3,title:"用字符串源码替换节点",slug:"用字符串源码替换节点"},{level:3,title:"插入兄弟节点",slug:"插入兄弟节点"},{level:3,title:"插入到容器（container）中",slug:"插入到容器-container-中"},{level:3,title:"删除一个节点",slug:"删除一个节点"},{level:3,title:"替换父节点",slug:"替换父节点"},{level:3,title:"删除父节点",slug:"删除父节点"},{level:2,title:"Scope（作用域）",slug:"scope-作用域"},{level:3,title:"检查本地变量是否被绑定",slug:"检查本地变量是否被绑定"},{level:3,title:"生成一个 UID",slug:"生成一个-uid"},{level:3,title:"提升变量声明至父级作用域",slug:"提升变量声明至父级作用域"},{level:3,title:"重命名绑定及其引用",slug:"重命名绑定及其引用"},{level:2,title:"插件的准备和收尾工作",slug:"插件的准备和收尾工作"},{level:2,title:"在插件中启用其他语法",slug:"在插件中启用其他语法"},{level:2,title:"抛出一个语法错误",slug:"抛出一个语法错误"},{level:2,title:"创建构建器和检查器的帮助函数",slug:"创建构建器和检查器的帮助函数"},{level:2,title:"尽量避免遍历抽象语法树（AST）",slug:"尽量避免遍历抽象语法树-ast"},{level:3,title:"及时合并访问者对象",slug:"及时合并访问者对象"},{level:3,title:"可以手动查找就不要遍历",slug:"可以手动查找就不要遍历"},{level:2,title:"优化嵌套的访问者对象",slug:"优化嵌套的访问者对象"},{level:2,title:"留意嵌套结构",slug:"留意嵌套结构"},{level:2,title:"单元测试",slug:"单元测试"},{level:3,title:"快照测试",slug:"快照测试"},{level:3,title:"AST 测试",slug:"ast-测试"},{level:3,title:"Exec Tests(执行测试)",slug:"exec-tests-执行测试"},{level:3,title:"babel-plugin-tester",slug:"babel-plugin-tester"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:' Babel 插件手册 \n 这篇文档涵盖了如何创建  Babel   插件 等方面的内容。. \n 目录 \n \n 介绍 \n 基础 \n \n 抽象语法树（ASTs） \n Babel 的处理步骤 \n 解析 \n \n 词法分析 \n 语法分析 \n \n \n 转换 \n 生成 \n 遍历 \n Visitors（访问者） \n Paths（路径） \n \n Paths in Visitors（存在于访问者中的路径） \n \n \n State（状态） \n Scopes（作用域） \n \n Bindings（绑定） \n \n \n \n \n API \n \n babylon \n babel-traverse \n babel-types \n Definitions（定义） \n Builders（构建器） \n Validators（验证器） \n Converters（变换器） \n babel-generator \n babel-template \n \n \n 编写你的第一个 Babel 插件 \n 转换操作 \n \n 访问 \n 获取子节点的Path \n 检查节点（Node）类型 \n 检查路径（Path）类型 \n 检查标识符（Identifier）是否被引用 \n 找到特定的父路径 \n 获取同级路径 \n 停止遍历 \n 处理 \n 替换一个节点 \n 用多节点替换单节点 \n 用字符串源码替换节点 \n 插入兄弟节点 \n 插入到容器（container）中 \n 删除节点 \n 替换父节点 \n 删除父节点 \n Scope（作用域） \n 检查本地变量是否被绑定 \n 生成UID \n 提升变量声明至父级作用域 \n 重命名绑定及其引用 \n \n \n 插件选项 \n \n 插件的准备和收尾工作 \n 在插件中启用其他语法 \n \n \n 构建节点 \n 最佳实践 \n \n 尽量避免遍历抽象语法树（AST） \n 及时合并访问者对象 \n 可以手动查找就不要遍历 \n 优化嵌套的访问者对象 \n 留意嵌套结构 \n 单元测试 \n  介绍 \n Babel 是一个通用的多功能的 JavaScript 编译器。此外它还拥有众多模块可用于不同形式的静态分析。 \n \n 静态分析是在不需要执行代码的前提下对代码进行分析的处理过程 （执行代码的同时进行代码分析即是动态分析）。 静态分析的目的是多种多样的， 它可用于语法检查，编译，代码高亮，代码转换，优化，压缩等等场景。 \n \n 你可以使用 Babel 创建多种类型的工具来帮助你更有效率并且写出更好的程序。 \n \n 在 Twitter 上关注  @thejameskyle ，第一时间获取更新。 \n  基础 \n Babel 是 JavaScript 编译器，更确切地说是源码到源码的编译器，通常也叫做“转换编译器（transpiler）”。 意思是说你为 Babel 提供一些 JavaScript 代码，Babel 更改这些代码，然后返回给你新生成的代码。 \n  抽象语法树（ASTs） \n 这个处理过程中的每一步都涉及到创建或是操作 抽象语法树 ，亦称 AST。 \n \n Babel 使用一个基于  ESTree  并修改过的 AST，它的内核说明文档可以在 这里 找到。 \n \n function   square ( n )   { \n   return  n  *  n ; \n } \n \n 1 2 3 \n AST Explorer  可以让你对 AST 节点有一个更好的感性认识。  这里 是上述代码的一个示例链接。 \n \n 这个程序可以被表示成如下的一棵树： \n -  FunctionDeclaration:\n   -  id:\n     -  Identifier:\n       -  name: square\n   -  params [1]\n     -  Identifier\n       -  name: n\n   -  body:\n     -  BlockStatement\n       -  body [1]\n         -  ReturnStatement\n           -  argument\n             -  BinaryExpression\n               -  operator: *\n               -  left\n                 -  Identifier\n                   -  name: n\n               -  right\n                 -  Identifier\n                   -  name: n\n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 或是如下所示的 JavaScript Object（对象）： \n { \n  type :   "FunctionDeclaration" , \n  id :   { \n    type :   "Identifier" , \n    name :   "square" \n   } , \n  params :   [ { \n    type :   "Identifier" , \n    name :   "n" \n   } ] , \n  body :   { \n    type :   "BlockStatement" , \n    body :   [ { \n      type :   "ReturnStatement" , \n      argument :   { \n        type :   "BinaryExpression" , \n        operator :   "*" , \n        left :   { \n          type :   "Identifier" , \n          name :   "n" \n         } , \n        right :   { \n          type :   "Identifier" , \n          name :   "n" \n         } \n       } \n     } ] \n   } \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 你会留意到 AST 的每一层都拥有相同的结构： \n { \n  type :   "FunctionDeclaration" , \n  id :   { ... } , \n  params :   [ ... ] , \n  body :   { ... } \n } \n \n 1 2 3 4 5 6 { \n  type :   "Identifier" , \n  name :   ... \n } \n \n 1 2 3 4 { \n  type :   "BinaryExpression" , \n  operator :   ... , \n  left :   { ... } , \n  right :   { ... } \n } \n \n 1 2 3 4 5 6 \n 注意：出于简化的目的移除了某些属性 \n \n 这样的每一层结构也被叫做  节点（Node） 。 一个 AST 可以由单一的节点或是成百上千个节点构成。 它们组合在一起可以描述用于静态分析的程序语法。 \n 每一个节点都有如下所示的接口（Interface）： \n interface   Node   { \n   type :   string ; \n } \n \n 1 2 3 字符串形式的  type  字段表示节点的类型（如：  "FunctionDeclaration" ， "Identifier" ，或  "BinaryExpression" ）。 每一种类型的节点定义了一些附加属性用来进一步描述该节点类型。 \n Babel 还为每个节点额外生成了一些属性， 用于描述该节点在原始代码中的位置 。 \n { \n  type :   ... , \n  start :   0 , \n  end :   38 , \n  loc :   { \n    start :   { \n      line :   1 , \n      column :   0 \n     } , \n    end :   { \n      line :   3 , \n      column :   1 \n     } \n   } , \n   ... \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 每一个节点都会有  start ， end ， loc  这几个属性。 \n  Babel 的处理步骤 \n Babel 的三个主要处理步骤分别是：  解析（parse） ， 转换（transform） ， 生成（generate） 。 \n  解析 \n 解析 步骤接收代码并输出 AST。 这个步骤分为两个阶段： 词法分析（Lexical Analysis） 和  语法分析（Syntactic Analysis） 。 \n  词法分析 \n 词法分析阶段把字符串形式的代码转换为  令牌（tokens）  流。 \n 你可以把令牌看作是一个扁平的语法片段数组： \n n  *  n ; \n \n 1 [ \n   {  type :   {   ...   } ,  value :   "n" ,  start :   0 ,  end :   1 ,  loc :   {   ...   }   } , \n   {  type :   {   ...   } ,  value :   "*" ,  start :   2 ,  end :   3 ,  loc :   {   ...   }   } , \n   {  type :   {   ...   } ,  value :   "n" ,  start :   4 ,  end :   5 ,  loc :   {   ...   }   } , \n   ... \n ] \n \n 1 2 3 4 5 6 每一个  type  有一组属性来描述该令牌： \n { \n  type :   { \n    label :   \'name\' , \n    keyword :   undefined , \n    beforeExpr :   false , \n    startsExpr :   true , \n    rightAssociative :   false , \n    isLoop :   false , \n    isAssign :   false , \n    prefix :   false , \n    postfix :   false , \n    binop :   null , \n    updateContext :   null \n   } , \n   ... \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 和 AST 节点一样它们也有  start ， end ， loc  属性。. \n  语法分析 \n 语法分析阶段会把一个令牌流转换成 AST 的形式。 这个阶段会使用令牌中的信息把它们转换成一个 AST 的表述结构，这样更易于后续的操作。 \n  转换 \n 转换 步骤接收 AST 并对其进行 遍历 ，在此过程中对节点进行添加、更新及移除等操作。 这是 Babel 或是其他编译器中最复杂的过程，同时也是插件将要介入工作的部分，这将是本手册的主要内容， 因此让我们慢慢来。 \n  生成 \n 代码生成 步骤把最终（经过一系列转换之后）的 AST 转换成字符串形式的代码，同时还会创建 源码映射（source maps） 。 \n 代码生成其实很简单：深度优先遍历整个 AST，然后构建可以表示转换后代码的字符串。 \n  遍历 \n 想要转换 AST 你需要进行递归的 树形遍历 。 \n 比方说我们有一个  FunctionDeclaration  类型。它有几个属性： id ， params ，和  body ，每一个都有一些内嵌节点。 \n { \n  type :   "FunctionDeclaration" , \n  id :   { \n    type :   "Identifier" , \n    name :   "square" \n   } , \n  params :   [ { \n    type :   "Identifier" , \n    name :   "n" \n   } ] , \n  body :   { \n    type :   "BlockStatement" , \n    body :   [ { \n      type :   "ReturnStatement" , \n      argument :   { \n        type :   "BinaryExpression" , \n        operator :   "*" , \n        left :   { \n          type :   "Identifier" , \n          name :   "n" \n         } , \n        right :   { \n          type :   "Identifier" , \n          name :   "n" \n         } \n       } \n     } ] \n   } \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 于是我们从  FunctionDeclaration  开始并且我们知道它的内部属性（即： id ， params ， body ），所以我们依次访问每一个属性及它们的子节点。 \n 接着我们来到  id ，它是一个  Identifier 。 Identifier  没有任何子节点属性，所以我们继续。 \n 之后是  params ，由于它是一个数组节点所以我们访问其中的每一个，它们都是  Identifier  类型的单一节点，然后我们继续。 \n 此时我们来到了  body ，这是一个  BlockStatement  并且也有一个  body 节点，而且也是一个数组节点，我们继续访问其中的每一个。 \n 这里唯一的一个属性是  ReturnStatement  节点，它有一个  argument ，我们访问  argument  就找到了  BinaryExpression 。 \n BinaryExpression  有一个  operator ，一个  left ，和一个  right 。 Operator 不是一个节点，它只是一个值因此我们不用继续向内遍历，我们只需要访问  left  和  right 。 \n Babel 的转换步骤全都是这样的遍历过程。 \n  Visitors（访问者） \n 当我们谈及“进入”一个节点，实际上是说我们在 访问 它们，之所以使用这样的术语是因为有一个 访问者模式（visitor） 的概念。 \n 访问者是一个用于 AST 遍历的跨语言的模式。简单的说它们就是一个对象，定义了用于在一个树状结构中获取具体节点的方法。 这么说有些抽象所以让我们来看一个例子。 \n const  MyVisitor  =   { \n   Identifier ( )   { \n    console . log ( "Called!" ) ; \n   } \n } ; \n\n // 你也可以先创建一个访问者对象，并在稍后给它添加方法。 \n let  visitor  =   { } ; \nvisitor . MemberExpression   =   function ( )   { } ; \nvisitor . FunctionDeclaration   =   function ( )   { } ; \n \n 1 2 3 4 5 6 7 8 9 10 \n 注意 ：  Identifier() { ... }  是  Identifier: { enter() { ... } }  的简写形式。 \n \n 这是一个简单的访问者，把它用于遍历中时，每当在树中遇见一个  Identifier  的时候会调用  Identifier()  方法。 \n 所以在下面的代码中  Identifier()  方法会被调用四次(包括  square  在内，总共有四个  Identifier ) \n function   square ( n )   { \n   return  n  *  n ; \n } \n \n 1 2 3 path . traverse ( MyVisitor ) ; \nCalled ! \nCalled ! \nCalled ! \nCalled ! \n \n 1 2 3 4 5 这些调用都发生在 进入 节点时，不过有时候我们也可以在 退出 时调用访问者方法。. \n 假设我们有一个树状结构： \n -  FunctionDeclaration\n   -   Identifier   ( id ) \n   -   Identifier   ( params [ 0 ] ) \n   -   BlockStatement   ( body ) \n     -   ReturnStatement   ( body ) \n       -   BinaryExpression   ( argument ) \n         -   Identifier   ( left ) \n         -   Identifier   ( right ) \n \n 1 2 3 4 5 6 7 8 当我们向下遍历这颗树的每一个分支时我们最终会走到尽头，于是我们需要往上遍历回去从而获取到下一个节点。 向下遍历这棵树我们 进入 每个节点，向上遍历回去时我们 退出 每个节点。 \n 让我们以上面那棵树为例子走一遍这个过程。 \n \n 进入  FunctionDeclaration \n \n 进入  Identifier (id) \n 走到尽头 \n 退出  Identifier (id) \n 进入  Identifier (params[0]) \n 走到尽头 \n 退出  Identifier (params[0]) \n 进入  BlockStatement (body) \n 进入  ReturnStatement (body) \n \n 进入  BinaryExpression (argument) \n 进入  Identifier (left) \n \n 走到尽头 \n \n \n 退出  Identifier (left) \n 进入  Identifier (right) \n \n 走到尽头 \n \n \n 退出  Identifier (right) \n 退出  BinaryExpression (argument) \n \n \n 退出  ReturnStatement (body) \n 退出  BlockStatement (body) \n \n \n 退出  FunctionDeclaration \n \n 所以当创建访问者时你实际上有两次机会来访问一个节点。 \n const  MyVisitor  =   { \n  Identifier :   { \n     enter ( )   { \n      console . log ( "Entered!" ) ; \n     } , \n     exit ( )   { \n      console . log ( "Exited!" ) ; \n     } \n   } \n } ; \n \n 1 2 3 4 5 6 7 8 9 10 如有必要，你还可以把方法名用 | 分割成 Idenfifier | MemberExpression 形式的字符串，把同一个函数应用到多种访问节点。. \n 在 flow-comments  插件中的例子如下： \n const  MyVisitor  =   { \n   "ExportNamedDeclaration|Flow" ( path )   { } \n } ; \n \n 1 2 3 你也可以在访问者中使用别名(如 babel-types 定义). \n 例如， \n Function  is an alias for  FunctionDeclaration ,  FunctionExpression ,  ArrowFunctionExpression ,  ObjectMethod  and  ClassMethod . \n const  MyVisitor  =   { \n   Function ( path )   { } \n } ; \n \n 1 2 3 #   Paths（路径） \n AST 通常会有许多节点，那么节点之间如何相互关联呢？ 我们可以使用一个可操作和可访问的巨大可变对象表示节点之间的关联关系，或者也可以用 Paths （路径）来简化这件事情。 \n Path  是表示两个节点之间连接的对象。 \n 例如，如果有下面这样一个节点及其子节点︰ \n { \n  type :   "FunctionDeclaration" , \n  id :   { \n    type :   "Identifier" , \n    name :   "square" \n   } , \n   ... \n } \n \n 1 2 3 4 5 6 7 8 将子节点  Identifier  表示为一个路径（Path）的话，看起来是这样的： \n { \n   "parent" :   { \n     "type" :   "FunctionDeclaration" , \n     "id" :   { ... } , \n     ... . \n   } , \n   "node" :   { \n     "type" :   "Identifier" , \n     "name" :   "square" \n   } \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 同时它还包含关于该路径的其他元数据： \n { \n   "parent" :   { ... } , \n   "node" :   { ... } , \n   "hub" :   { ... } , \n   "contexts" :   [ ] , \n   "data" :   { } , \n   "shouldSkip" :   false , \n   "shouldStop" :   false , \n   "removed" :   false , \n   "state" :   null , \n   "opts" :   null , \n   "skipKeys" :   null , \n   "parentPath" :   null , \n   "context" :   null , \n   "container" :   null , \n   "listKey" :   null , \n   "inList" :   false , \n   "parentKey" :   null , \n   "key" :   null , \n   "scope" :   null , \n   "type" :   null , \n   "typeAnnotation" :   null \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 当然路径对象还包含添加、更新、移动和删除节点有关的其他很多方法，稍后我们再来看这些方法。 \n 在某种意义上，路径是一个节点在树中的位置以及关于该节点各种信息的响应式 ( Reactive ) 表示。 当你调用一个修改树的方法后，路径信息也会被更新。 Babel 帮你管理这一切，从而使得节点操作简单，尽可能做到无状态。 \n  Paths in Visitors（存在于访问者中的路径） \n 当你有一个  Identifier()  成员方法的访问者时，你实际上是在访问路径而非节点。 通过这种方式，你操作的就是节点的响应式表示（译注：即路径）而非节点本身。 \n const  MyVisitor  =   { \n   Identifier ( path )   { \n    console . log ( "Visiting: "   +  path . node . name ) ; \n   } \n } ; \n \n 1 2 3 4 5 a  +  b  +  c ; \n \n 1 path . traverse ( MyVisitor ) ; \nVisiting :  a\nVisiting :  b\nVisiting :  c\n \n 1 2 3 4 #   State（状态） \n 状态是抽象语法树AST转换的敌人，状态管理会不断牵扯你的精力，而且几乎所有你对状态的假设，总是会有一些未考虑到的语法最终证明你的假设是错误的。 \n 考虑下列代码： \n function   square ( n )   { \n   return  n  *  n ; \n } \n \n 1 2 3 让我们写一个把  n  重命名为  x  的访问者的快速实现. \n let  paramName ; \n\n const  MyVisitor  =   { \n   FunctionDeclaration ( path )   { \n     const  param  =  path . node . params [ 0 ] ; \n    paramName  =  param . name ; \n    param . name  =   "x" ; \n   } , \n\n   Identifier ( path )   { \n     if   ( path . node . name  ===  paramName )   { \n      path . node . name  =   "x" ; \n     } \n   } \n } ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 对于上面的例子代码而言，这段访问者代码也许能工作，但它很容易被打破： \n function   square ( n )   { \n   return  n  *  n ; \n } \nn ; \n \n 1 2 3 4 更好的处理方式是使用递归，下面让我们来像克里斯托佛·诺兰的电影盗梦空间那样来把一个访问者放进另外一个访问者里面。 \n const  updateParamNameVisitor  =   { \n   Identifier ( path )   { \n     if   ( path . node . name  ===   this . paramName )   { \n      path . node . name  =   "x" ; \n     } \n   } \n } ; \n\n const  MyVisitor  =   { \n   FunctionDeclaration ( path )   { \n     const  param  =  path . node . params [ 0 ] ; \n     const  paramName  =  param . name ; \n    param . name  =   "x" ; \n\n    path . traverse ( updateParamNameVisitor ,   {  paramName  } ) ; \n   } \n } ; \n\npath . traverse ( MyVisitor ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 当然，这只是一个刻意编写的例子，不过它演示了如何从访问者中消除全局状态。 \n  Scopes（作用域） \n 接下来让我们介绍 作用域(scope) 的概念。 JavaScript 支持 词法作用域 ，其是一种树状嵌套结构，代码块在树状嵌套结构创建出新的作用域。 \n // global scope \n\n function   scopeOne ( )   { \n   // scope 1 \n\n   function   scopeTwo ( )   { \n     // scope 2 \n   } \n } \n \n 1 2 3 4 5 6 7 8 9 在 JavaScript 中，每当你创建了一个引用，不管是通过变量（variable）、函数（function）、类型（class）、参数（params）、模块导入（import）还是标签（label）等，它都属于当前作用域。 \n var  global  =   "I am in the global scope" ; \n\n function   scopeOne ( )   { \n   var  one  =   "I am in the scope created by `scopeOne()`" ; \n\n   function   scopeTwo ( )   { \n     var  two  =   "I am in the scope created by `scopeTwo()`" ; \n   } \n } \n \n 1 2 3 4 5 6 7 8 9 更深的内部作用域代码可以使用外层作用域中的引用。 \n function   scopeOne ( )   { \n   var  one  =   "I am in the scope created by `scopeOne()`" ; \n\n   function   scopeTwo ( )   { \n    one  =   "I am updating the reference in `scopeOne` inside `scopeTwo`" ; \n   } \n } \n \n 1 2 3 4 5 6 7 内层作用域也可以创建和外层作用域同名的引用。 \n function   scopeOne ( )   { \n   var  one  =   "I am in the scope created by `scopeOne()`" ; \n\n   function   scopeTwo ( )   { \n     var  one  =   "I am creating a new `one` but leaving reference in `scopeOne()` alone." ; \n   } \n } \n \n 1 2 3 4 5 6 7 当编写一个转换时，必须小心作用域。我们得确保在改变代码的各个部分时不会破坏已经存在的代码。 \n 我们在添加一个新的引用时需要确保新增加的引用名字和已有的所有引用不冲突。 或者我们仅仅想找出使用一个变量的所有引用， 我们只想在给定的作用域（Scope）中找出这些引用。 \n 作用域可以被表示为如下形式： \n { \n  path :  path , \n  block :  path . node , \n  parentBlock :  path . parent , \n  parent :  parentScope , \n  bindings :   [ ... ] \n } \n \n 1 2 3 4 5 6 7 当你创建一个新的作用域时，需要给出它的路径和父作用域，之后在遍历过程中它会在该作用域内收集所有的引用(“绑定”)。 \n 一旦引用收集完毕，你就可以在作用域（Scopes）上使用各种方法，稍后我们会了解这些方法。 \n  Bindings（绑定） \n 所有引用属于特定的作用域，引用和作用域的这种关系被称作： 绑定（binding） 。. \n function   scopeOnce ( )   { \n   var  ref  =   "This is a binding" ; \n\n  ref ;   // This is a reference to a binding \n\n   function   scopeTwo ( )   { \n    ref ;   // This is a reference to a binding from a lower scope \n   } \n } \n \n 1 2 3 4 5 6 7 8 9 单个绑定看起来像这样︰ \n { \n  identifier :  node , \n  scope :  scope , \n  path :  path , \n  kind :   \'var\' , \n\n  referenced :   true , \n  references :   3 , \n  referencePaths :   [ path ,  path ,  path ] , \n\n  constant :   false , \n  constantViolations :   [ path ] \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 有了这些信息你就可以查找一个绑定的所有引用，并且知道这是什么类型的绑定(参数，定义等等)，查找它所属的作用域，或者拷贝它的标识符。 你甚至可以知道它是不是常量，如果不是，那么是哪个路径修改了它。 \n 在很多情况下，知道一个绑定是否是常量非常有用，最有用的一种情形就是代码压缩时。 \n function   scopeOne ( )   { \n   var  ref1  =   "This is a constant binding" ; \n\n   becauseNothingEverChangesTheValueOf ( ref1 ) ; \n\n   function   scopeTwo ( )   { \n     var  ref2  =   "This is *not* a constant binding" ; \n    ref2  =   "Because this changes the value" ; \n   } \n } \n \n 1 2 3 4 5 6 7 8 9 10 \n  API \n Babel 实际上是一组模块的集合。本节我们将探索一些主要的模块，解释它们是做什么的以及如何使用它们。 \n \n 注意：本节内容不是详细的 API 文档的替代品，正式的 API 文档将很快提供出来。 \n  babylon \n Babylon 是 Babel 的解析器。最初是 从Acorn项目fork出来的。Acorn非常快，易于使用，并且针对非标准特性(以及那些未来的标准特性) 设计了一个基于插件的架构。 \n 首先，让我们安装它。 \n $  npm   install  --save babylon\n \n 1 先从解析一个代码字符串开始： \n import   *   as  babylon  from   "babylon" ; \n\n const  code  =   ` function square(n) {\n  return n * n;\n} ` ; \n\nbabylon . parse ( code ) ; \n // Node { \n //   type: "File", \n //   start: 0, \n //   end: 38, \n //   loc: SourceLocation {...}, \n //   program: Node {...}, \n //   comments: [], \n //   tokens: [...] \n // } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 我们还能像下面这样传递选项给  parse() 方法： \n babylon . parse ( code ,   { \n  sourceType :   "module" ,   // default: "script" \n  plugins :   [ "jsx" ]   // default: [] \n } ) ; \n \n 1 2 3 4 sourceType  可以是  "module"  或者  "script" ，它表示 Babylon 应该用哪种模式来解析。  "module"  将会在严格模式下解析并且允许模块定义， "script"  则不会。 \n \n 注意：   sourceType  的默认值是  "script"  并且在发现  import  或  export  时产生错误。 使用  scourceType: "module"  来避免这些错误。 \n \n 由于 Babylon 使用了基于插件的架构，因此有一个  plugins  选项可以开关内置的插件。 注意 Babylon 尚未对外部插件开放此 API 接口，不排除未来会开放此API。 \n 要查看完整的插件列表，请参见  Babylon README 文件。. \n  babel-traverse \n Babel Traverse（遍历）模块维护了整棵树的状态，并且负责替换、移除和添加节点。 \n 运行以下命令安装： \n $  npm   install  --save @babel/traverse\n \n 1 我们可以和 Babylon 一起使用来遍历和更新节点： \n import   *   as  babylon  from   "babylon" ; \n import  traverse  from   "babel-traverse" ; \n\n const  code  =   ` function square(n) {\n  return n * n;\n} ` ; \n\n const  ast  =  babylon . parse ( code ) ; \n\n traverse ( ast ,   { \n   enter ( path )   { \n     if   ( \n      path . node . type  ===   "Identifier"   && \n      path . node . name  ===   "n" \n     )   { \n      path . node . name  =   "x" ; \n     } \n   } \n } ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 #   babel-types \n Babel Types模块是一个用于 AST 节点的 Lodash 式工具库（译注：Lodash 是一个 JavaScript 函数工具库，提供了基于函数式编程风格的众多工具函数）， 它包含了 构造、验证以及变换  AST 节点的方法。 该工具库包含考虑周到的工具方法，对编写处理AST逻辑非常有用。 \n 可以运行以下命令来安装它： \n $  npm   install  --save @babel/types\n \n 1 然后按如下所示来使用： \n import  traverse  from   "babel-traverse" ; \n import   *   as  t  from   "babel-types" ; \n\n traverse ( ast ,   { \n   enter ( path )   { \n     if   ( t . isIdentifier ( path . node ,   {  name :   "n"   } ) )   { \n      path . node . name  =   "x" ; \n     } \n   } \n } ) ; \n \n 1 2 3 4 5 6 7 8 9 10 #   Definitions（定义） \n Babel Types模块拥有每一个单一类型节点的定义，包括节点包含哪些属性，什么是合法值，如何构建节点、遍历节点，以及节点的别名等信息。 \n 单一节点类型的定义形式如下： \n defineType ( "BinaryExpression" ,   { \n  builder :   [ "operator" ,   "left" ,   "right" ] , \n  fields :   { \n    operator :   { \n      validate :   assertValueType ( "string" ) \n     } , \n    left :   { \n      validate :   assertNodeType ( "Expression" ) \n     } , \n    right :   { \n      validate :   assertNodeType ( "Expression" ) \n     } \n   } , \n  visitor :   [ "left" ,   "right" ] , \n  aliases :   [ "Binary" ,   "Expression" ] \n } ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 #   Builders（构建器） \n 你会注意到上面的  BinaryExpression  定义有一个  builder  字段。. \n builder :   [ "operator" ,   "left" ,   "right" ] \n \n 1 这是由于每一个节点类型都有构造器方法builder，按类似下面的方式使用： \n t . binaryExpression ( "*" ,  t . identifier ( "a" ) ,  t . identifier ( "b" ) ) ; \n \n 1 可以创建如下所示的 AST： \n { \n  type :   "BinaryExpression" , \n  operator :   "*" , \n  left :   { \n    type :   "Identifier" , \n    name :   "a" \n   } , \n  right :   { \n    type :   "Identifier" , \n    name :   "b" \n   } \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 当打印出来之后是这样的： \n a  *  b\n \n 1 构造器还会验证自身创建的节点，并在错误使用的情形下会抛出描述性错误，这就引出了下一个方法类型。 \n  Validators（验证器） \n BinaryExpression  的定义还包含了节点的字段  fields  信息，以及如何验证这些字段。 \n fields :   { \n  operator :   { \n    validate :   assertValueType ( "string" ) \n   } , \n  left :   { \n    validate :   assertNodeType ( "Expression" ) \n   } , \n  right :   { \n    validate :   assertNodeType ( "Expression" ) \n   } \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 可以创建两种验证方法。第一种是  isX 。. \n t . isBinaryExpression ( maybeBinaryExpressionNode ) ; \n \n 1 这个测试用来确保节点是一个二进制表达式， 另外你也可以传入第二个参数来确保节点包含特定的属性和值 。 \n t . isBinaryExpression ( maybeBinaryExpressionNode ,   {  operator :   "*"   } ) ; \n \n 1 这些方法还有一种断言式的版本，会抛出异常而不是返回  true  或  false 。. \n t . assertBinaryExpression ( maybeBinaryExpressionNode ) ; \nt . assertBinaryExpression ( maybeBinaryExpressionNode ,   {  operator :   "*"   } ) ; \n // Error: Expected type "BinaryExpression" with option { "operator": "*" } \n \n 1 2 3 #   Converters（变换器） \n \n [WIP] \n  babel-generator \n Babel Generator模块是 Babel 的代码生成器，它读取AST并将其转换为代码和源码映射（sourcemaps）。 \n 运行以下命令来安装它： \n $  npm   install  --save @babel/generator\n \n 1 然后按如下方式使用： \n import   *   as  babylon  from   "babylon" ; \n import  generate  from   "babel-generator" ; \n\n const  code  =   ` function square(n) {\n  return n * n;\n} ` ; \n\n const  ast  =  babylon . parse ( code ) ; \n\n generate ( ast ,   { } ,  code ) ; \n // { \n //   code: "...", \n //   map: "..." \n // } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 你也可以给  generate()  方法传递选项。. \n generate ( ast ,   { \n  retainLines :   false , \n  compact :   "auto" , \n  concise :   false , \n  quotes :   "double" , \n   // ... \n } ,  code ) ; \n \n 1 2 3 4 5 6 7 #   babel-template \n babel-template 是另一个虽然很小但却非常有用的模块。 它能让你编写字符串形式且带有占位符的代码来代替手动编码， 尤其是生成的大规模 AST的时候。 在计算机科学中，这种能力被称为 准引用 （quasiquotes）。 \n 当调用 template 函数并传入字符串作为参数时，你可以提供占位符，当使用模板时，占位符会被替换。 \n 你可以使用两种不同的占位符：句法占位符(比如： %%name%% ) 或者 标识符占位符 (比如：NAME)。默认情况下，@babel/template对这两种占位符都支持，但是不能混合使用。如果需要明确使用的是哪一种占位符，可以使用 syntacticPlaceholders 选项标明。 \n \n syntacticPlaceholders，布尔值，如果是 %%name%% 这种形式，那么syntacticPlaceholders应为 true ,否则为 false 。 \n \n 注意：句法标识符在 Babel 7.4.0 版本引入。如果你没有控制 @babel/template 的版本(for example, when importing it from a @babel/core@^7.0.0 peer dependency)，你必须使用标识符占位符。另一方面，句法标识符也具有一些优势：它们可以用于标识符可能是语法错误的地方（例如，代替函数体，或在导出声明中），并且它们不与大写变量冲突（例如，new URL（））。 \n $  npm   install  --save @babel/template\n \n 1 import  template  from   "babel-template" ; \n import  generate  from   "babel-generator" ; \n import   *   as  t  from   "babel-types" ; \n\n //标识符占位符 \n const  buildRequire  =   template ( ` \n  var IMPORT_NAME = require(SOURCE);\n ` ) ; \n\n const  ast  =   buildRequire ( { \n   IMPORT_NAME :  t . identifier ( "myModule" ) , \n   SOURCE :  t . stringLiteral ( "my-module" ) \n } ) ; \n\n /*\n//句法占位符\nconst buildRequire = template(`\n  var %%importName%% = require(%%source%%);\n`);\n\nconst ast = buildRequire({\n  importName: t.identifier("myModule"),\n  source: t.stringLiteral("my-module"),\n});\n*/ \n\nconsole . log ( generate ( ast ) . code ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 输出： \n var  myModule  =   require ( "my-module" ) ; \n \n 1 #   编写你的第一个 Babel 插件 \n 现在你已经熟悉了 Babel 的所有基础知识了，让我们把这些知识和插件的 API融合在一起来编写第一个 Babel 插件吧。 \n 先从一个接收了当前 babel 对象作为参数的  function  开始。 \n export   default   function ( babel )   { \n   // plugin contents \n } \n \n 1 2 3 由于你将会经常这样使用，所以直接取出  babel.types  会更方便：（译注：这是 ES2015 语法中的对象解构，即 Destructuring） \n export   default   function ( {  types :  t  } )   { \n   // plugin contents \n } \n \n 1 2 3 接着返回一个对象，其  visitor  属性是这个插件的主要访问者。 \n export   default   function ( {  types :  t  } )   { \n   return   { \n    visitor :   { \n       // visitor contents \n     } \n   } ; \n } ; \n \n 1 2 3 4 5 6 7 Visitor 中的每个函数接收2个参数： path  和  state \n export   default   function ( {  types :  t  } )   { \n   return   { \n    visitor :   { \n       Identifier ( path ,  state )   { } , \n       ASTNodeTypeHere ( path ,  state )   { } \n     } \n   } ; \n } ; \n \n 1 2 3 4 5 6 7 8 让我们快速编写一个可用的插件来展示一下它是如何工作的。下面是我们的源代码： \n foo  ===  bar ; \n \n 1 其 AST 形式如下： \n { \n  type :   "BinaryExpression" , \n  operator :   "===" , \n  left :   { \n    type :   "Identifier" , \n    name :   "foo" \n   } , \n  right :   { \n    type :   "Identifier" , \n    name :   "bar" \n   } \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 我们从添加  BinaryExpression  访问者方法开始： \n export   default   function ( {  types :  t  } )   { \n   return   { \n    visitor :   { \n       BinaryExpression ( path )   { \n         // ... \n       } \n     } \n   } ; \n } \n \n 1 2 3 4 5 6 7 8 9 然后我们更确切一些，只关注哪些使用了  ===  的  BinaryExpression 。 \n visitor :   { \n   BinaryExpression ( path )   { \n     if   ( path . node . operator  !==   "===" )   { \n       return ; \n     } \n\n     // ... \n   } \n } \n \n 1 2 3 4 5 6 7 8 9 现在我们用新的标识符来替换  left  属性： \n BinaryExpression ( path )   { \n   if   ( path . node . operator  !==   "===" )   { \n     return ; \n   } \n\n  path . node . left  =  t . identifier ( "sebmck" ) ; \n   // ... \n } \n \n 1 2 3 4 5 6 7 8 于是如果我们运行这个插件我们会得到： \n sebmck  ===  bar ; \n \n 1 现在只需要替换  right  属性了。 \n BinaryExpression ( path )   { \n   if   ( path . node . operator  !==   "===" )   { \n     return ; \n   } \n\n  path . node . left  =  t . identifier ( "sebmck" ) ; \n  path . node . right  =  t . identifier ( "dork" ) ; \n } \n \n 1 2 3 4 5 6 7 8 这就是我们的最终结果了： \n sebmck  ===  dork ; \n \n 1 完美！我们的第一个 Babel 插件。 \n  转换操作 \n  访问 \n  获取子节点的Path \n 为了得到一个AST节点的属性值，我们一般先访问到该节点，然后利用  path.node.property  方法即可。 \n // the BinaryExpression AST node has properties: `left`, `right`, `operator` \n BinaryExpression ( path )   { \n  path . node . left ; \n  path . node . right ; \n  path . node . operator ; \n } \n \n 1 2 3 4 5 6 如果你想访问到该属性的 path ，使用path对象的 get 方法，传递该属性的字符串形式作为参数。 \n BinaryExpression ( path )   { \n  path . get ( \'left\' ) ; \n } \n Program ( path )   { \n  path . get ( \'body.0\' ) ; \n } \n \n 1 2 3 4 5 6 #   检查节点的类型 \n 如果你想检查节点的类型，最好的方式是： \n BinaryExpression ( path )   { \n   if   ( t . isIdentifier ( path . node . left ) )   { \n     // ... \n   } \n } \n \n 1 2 3 4 5 你同样可以对节点的属性们做浅层检查： \n BinaryExpression ( path )   { \n   if   ( t . isIdentifier ( path . node . left ,   {  name :   "n"   } ) )   { \n     // ... \n   } \n } \n \n 1 2 3 4 5 功能上等价于： \n BinaryExpression ( path )   { \n   if   ( \n    path . node . left  !=   null   && \n    path . node . left . type  ===   "Identifier"   && \n    path . node . left . name  ===   "n" \n   )   { \n     // ... \n   } \n } \n \n 1 2 3 4 5 6 7 8 9 #   检查路径（Path）类型 \n 一个路径具有相同的方法检查节点的类型： \n BinaryExpression ( path )   { \n   if   ( path . get ( \'left\' ) . isIdentifier ( {  name :   "n"   } ) )   { \n     // ... \n   } \n } \n \n 1 2 3 4 5 就相当于： \n BinaryExpression ( path )   { \n   if   ( t . isIdentifier ( path . node . left ,   {  name :   "n"   } ) )   { \n     // ... \n   } \n } \n \n 1 2 3 4 5 #   检查标识符（Identifier）是否被引用 \n Identifier ( path )   { \n   if   ( path . isReferencedIdentifier ( ) )   { \n     // ... \n   } \n } \n \n 1 2 3 4 5 或者： \n Identifier ( path )   { \n   if   ( t . isReferenced ( path . node ,  path . parent ) )   { \n     // ... \n   } \n } \n \n 1 2 3 4 5 #   找到特定的父路径 \n 有时你需要从一个路径向上遍历语法树，直到满足相应的条件。 \n 对于每一个父路径调用 callback 并将其 NodePath 当作参数，当 callback 返回真值时，则将其 NodePath 返回。. \n path . findParent ( ( path )   =>  path . isObjectExpression ( ) ) ; \n \n 1 如果也需要遍历当前节点： \n path . find ( ( path )   =>  path . isObjectExpression ( ) ) ; \n \n 1 查找最接近的父函数或程序： \n path . getFunctionParent ( ) ; \n \n 1 向上遍历语法树，直到找到在列表中的父节点路径 \n path . getStatementParent ( ) ; \n \n 1 #   获取同级路径 \n 如果一个路径是在一个  Function ／ Program 中的列表里面，它就有同级节点。 \n \n 使用 path.inList 来判断路径是否有同级节点， \n 使用 path.getSibling(index) 来获得同级路径, \n 使用  path.key 获取路径所在容器的索引, \n 使用  path.container 获取路径的容器（包含所有同级节点的数组） \n 使用  path.listKey 获取容器的key \n \n \n 这些API用于  babel-minify  中使用的  transform-merge-sibling-variables  插件。 \n \n var  a  =   1 ;   // pathA, path.key = 0 \n var  b  =   2 ;   // pathB, path.key = 1 \n var  c  =   3 ;   // pathC, path.key = 2 \n \n 1 2 3 export   default   function ( {  types :  t  } )   { \n   return   { \n    visitor :   { \n       VariableDeclaration ( path )   { \n         // if the current path is pathA \n        path . inList  // true \n        path . listKey  // "body" \n        path . key  // 0 \n        path . getSibling ( 0 )   // pathA \n        path . getSibling ( path . key  +   1 )   // pathB \n        path . container  // [pathA, pathB, pathC] \n        path . getPrevSibling ( )   // path(undefined) * \n        path . getNextSibling ( )   // pathB \n        path . getAllPrevSiblings ( )   // [] \n        path . getAllNextSiblings ( )   // [pathB, pathC] \n       } \n     } \n   } ; \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 \n path(undefined) 是 path.node === undefined  的的一个节点路径 \n  停止遍历 \n 如果你的插件需要在某种情况下不运行，最简单的做法是尽早写回。 \n BinaryExpression ( path )   { \n   if   ( path . node . operator  !==   \'**\' )   return ; \n } \n \n 1 2 3 如果您在顶级路径中进行子遍历，则可以使用2个提供的API方法： \n \n path.skip()  skips traversing the children of the current path. \n path.stop()  stops traversal entirely. \n \n outerPath . traverse ( { \n   Function ( innerPath )   { \n    innerPath . skip ( ) ;   // if checking the children is irrelevant \n   } , \n   ReferencedIdentifier ( innerPath ,  state )   { \n    state . iife  =   true ; \n    innerPath . stop ( ) ;   // if you want to save some state and then stop traversal, or deopt \n   } \n } ) ; \n \n 1 2 3 4 5 6 7 8 9 #   处理 \n  替换一个节点 \n BinaryExpression ( path )   { \n  path . replaceWith ( \n    t . binaryExpression ( "**" ,  path . node . left ,  t . numberLiteral ( 2 ) ) \n   ) ; \n } \n \n 1 2 3 4 5    function square(n) {\n -    return n * n;\n +    return n ** 2;\n    }\n \n 1 2 3 4 #   用多节点替换单节点 \n ReturnStatement ( path )   { \n  path . replaceWithMultiple ( [ \n    t . expressionStatement ( t . stringLiteral ( "Is this the real life?" ) ) , \n    t . expressionStatement ( t . stringLiteral ( "Is this just fantasy?" ) ) , \n    t . expressionStatement ( t . stringLiteral ( "(Enjoy singing the rest of the song in your head)" ) ) , \n   ] ) ; \n } \n \n 1 2 3 4 5 6 7    function square(n) {\n -    return n * n;\n +    "Is this the real life?";\n +    "Is this just fantasy?";\n +    "(Enjoy singing the rest of the song in your head)";\n    }\n \n 1 2 3 4 5 6 \n 注意 ：当用多个节点替换一个表达式时，它们必须都是声明。这是因为Babel在更换节点时广泛使用启发式算法，这意味着您可以做一些非常疯狂的转换，否则将会非常冗长。 \n  用字符串源码替换节点 \n FunctionDeclaration ( path )   { \n  path . replaceWithSourceString ( ` function add(a, b) {\n    return a + b;\n  } ` ) ; \n } \n \n 1 2 3 4 5 -  function square(n) {\n -    return n * n;\n +  function add(a, b) {\n +    return a + b;\n    }\n \n 1 2 3 4 5 \n 注意 ：不建议使用这个API，除非您正在处理动态的源码字符串，否则在访问者外部解析代码更有效率。 \n  插入兄弟节点 \n FunctionDeclaration ( path )   { \n  path . insertBefore ( t . expressionStatement ( t . stringLiteral ( "Because I\'m easy come, easy go." ) ) ) ; \n  path . insertAfter ( t . expressionStatement ( t . stringLiteral ( "A little high, little low." ) ) ) ; \n } \n \n 1 2 3 4 +  "Because I\'m easy come, easy go.";\n    function square(n) {\n      return n * n;\n    }\n +  "A little high, little low.";\n \n 1 2 3 4 5 \n 注意：这里同样应该使用声明或者一个声明数组。这里使用了在用多个节点替换一个节点中提到的相同的启发式算法。 \n  插入到容器（container）中 \n 如果您想要在AST节点属性中插入一个像  body  那样的数组。\n它与  insertBefore  /  insertAfter  类似, 但您必须指定  listKey  (通常是  body )。 \n ClassMethod ( path )   { \n  path . get ( \'body\' ) . unshiftContainer ( \'body\' ,  t . expressionStatement ( t . stringLiteral ( \'before\' ) ) ) ; \n  path . get ( \'body\' ) . pushContainer ( \'body\' ,  t . expressionStatement ( t . stringLiteral ( \'after\' ) ) ) ; \n } \n \n 1 2 3 4   class A {\n    constructor() {\n +    "before"\n      var a = \'middle\';\n +    "after"\n    }\n   }\n \n 1 2 3 4 5 6 7 #   删除一个节点 \n FunctionDeclaration ( path )   { \n  path . remove ( ) ; \n } \n \n 1 2 3 -  function square(n) {\n -    return n * n;\n -  }\n \n 1 2 3 #   替换父节点 \n 只需使用 parentPath ( path.parentPath ) 调用 replaceWith 即可: \n BinaryExpression ( path )   { \n  path . parentPath . replaceWith ( \n    t . expressionStatement ( t . stringLiteral ( "Anyway the wind blows, doesn\'t really matter to me, to me." ) ) \n   ) ; \n } \n \n 1 2 3 4 5    function square(n) {\n -    return n * n;\n +    "Anyway the wind blows, doesn\'t really matter to me, to me.";\n    }\n \n 1 2 3 4 #   删除父节点 \n BinaryExpression ( path )   { \n  path . parentPath . remove ( ) ; \n } \n \n 1 2 3    function square(n) {\n -    return n * n;\n    }\n \n 1 2 3 #   Scope（作用域） \n  检查本地变量是否被绑定 \n FunctionDeclaration ( path )   { \n   if   ( path . scope . hasBinding ( "n" ) )   { \n     // ... \n   } \n } \n \n 1 2 3 4 5 这将遍历作用域树并检查特定的绑定。 \n 您也可以检查一个作用域是否有 自己 的绑定： \n FunctionDeclaration ( path )   { \n   if   ( path . scope . hasOwnBinding ( "n" ) )   { \n     // ... \n   } \n } \n \n 1 2 3 4 5 #   生成一个 UID \n 这将生成一个标识符，不会与任何本地定义的变量相冲突。 \n FunctionDeclaration ( path )   { \n  path . scope . generateUidIdentifier ( "uid" ) ; \n   // Node { type: "Identifier", name: "_uid" } \n  path . scope . generateUidIdentifier ( "uid" ) ; \n   // Node { type: "Identifier", name: "_uid2" } \n } \n \n 1 2 3 4 5 6 #   提升变量声明至父级作用域 \n 有时你可能想要提升一个  VariableDeclaration  ，以便为其赋值。 \n FunctionDeclaration ( path )   { \n   const  id  =  path . scope . generateUidIdentifierBasedOnNode ( path . node . id ) ; \n  path . remove ( ) ; \n  path . scope . parent . push ( {  id ,  init :  path . node  } ) ; \n } \n \n 1 2 3 4 5 -  function square(n) {\n +  var _square = function square(n) {\n      return n * n;\n -  }\n +  };\n \n 1 2 3 4 5 #   重命名绑定及其引用 \n FunctionDeclaration ( path )   { \n  path . scope . rename ( "n" ,   "x" ) ; \n } \n \n 1 2 3 -  function square(n) {\n -    return n * n;\n +  function square(x) {\n +    return x * x;\n    }\n \n 1 2 3 4 5 或者，您可以将绑定重命名为生成的唯一标识符： \n FunctionDeclaration ( path )   { \n  path . scope . rename ( "n" ) ; \n } \n \n 1 2 3 -  function square(n) {\n -    return n * n;\n +  function square(_n) {\n +    return _n * _n;\n    }\n \n 1 2 3 4 5 \n  插件选项 \n 如果您想让您的用户自定义您的Babel插件的行为您可以接受用户可以指定的插件特定选项，如下所示： \n { \n  plugins :   [ \n     [ "my-plugin" ,   { \n       "option1" :   true , \n       "option2" :   false \n     } ] \n   ] \n } \n \n 1 2 3 4 5 6 7 8 这些选项会通过  state  对象传递给插件访问者： \n export   default   function ( {  types :  t  } )   { \n   return   { \n    visitor :   { \n       FunctionDeclaration ( path ,  state )   { \n        console . log ( state . opts ) ; \n         // { option1: true, option2: false } \n       } \n     } \n   } \n } \n \n 1 2 3 4 5 6 7 8 9 10 这些选项是特定于插件的，您不能访问其他插件中的选项。 \n   插件的准备和收尾工作 \n 插件具有在插件之前或之后运行的函数。它们可用于设置或清理/分析。 \n export   default   function ( {  types :  t  } )   { \n   return   { \n     pre ( state )   { \n       this . cache  =   new   Map ( ) ; \n     } , \n    visitor :   { \n       StringLiteral ( path )   { \n         this . cache . set ( path . node . value ,   1 ) ; \n       } \n     } , \n     post ( state )   { \n      console . log ( this . cache ) ; \n     } \n   } ; \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 #    在插件中启用其他语法 \n 插件可以启用babylon plugins，因此用户不需要安装/启用它们。这可以防止解析错误，而不会继承语法插件。 \n export   default   function ( {  types :  t  } )   { \n   return   { \n    inherits :   require ( "babel-plugin-syntax-jsx" ) \n   } ; \n } \n \n 1 2 3 4 5 #    抛出一个语法错误 \n 如果您想用babel-code-frame和一个消息抛出一个错误： \n export   default   function ( {  types :  t  } )   { \n   return   { \n    visitor :   { \n       StringLiteral ( path )   { \n         throw  path . buildCodeFrameError ( "Error message here" ) ; \n       } \n     } \n   } ; \n } \n \n 1 2 3 4 5 6 7 8 9 该错误看起来像： \n file.js: Error message here\n   7 |\n   8 | let tips = [\n>  9 |   "Click on any AST node with a \'+\' to expand it",\n     |   ^\n  10 |\n  11 |   "Hovering over a node highlights the \\\n  12 |    corresponding part in the source code",\n  构建节点 \n 编写转换时，通常需要构建一些要插入的节点进入AST。 如前所述，您可以使用  babel-types  包中的 builder 方法。 \n 构建器的方法名称就是您想要的节点类型的名称，除了第一个字母小写。例如，如果您想建立一个  MemberExpression  您可以使用 t.memberExpression(...) 。 \n 这些构建器的参数由节点定义决定。有一些正在做的工作，以生成易于阅读的文档定义，但现在他们都可以在 此处 找到。 \n 节点定义如下所示： \n defineType ( "MemberExpression" ,   { \n  builder :   [ "object" ,   "property" ,   "computed" ] , \n  visitor :   [ "object" ,   "property" ] , \n  aliases :   [ "Expression" ,   "LVal" ] , \n  fields :   { \n    object :   { \n      validate :   assertNodeType ( "Expression" ) \n     } , \n    property :   { \n       validate ( node ,  key ,  val )   { \n         let  expectedType  =  node . computed  ?   "Expression"   :   "Identifier" ; \n         assertNodeType ( expectedType ) ( node ,  key ,  val ) ; \n       } \n     } , \n    computed :   { \n       default :   false \n     } \n   } \n } ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 在这里你可以看到关于这个特定节点类型的所有信息，包括如何构建它，遍历它，并验证它。 \n 通过查看  builder  属性, 可以看到调用生成器方法( t. MemberExpression )所需的3个参数。 \n builder :   [ "object" ,   "property" ,   "computed" ] , \n \n 1 \n 请注意，有时在节点上可以定制的属性比 builder数组 包含的属性更多。 这是为了防止生成器有太多的参数。在这些情况下，您需要手动设置属性。 一个例子就是 ClassMethod 。 \n \n // Example \n // because the builder doesn\'t contain `async` as a property \n var  node  =  t . classMethod ( \n   "constructor" , \n  t . identifier ( "constructor" ) , \n  params , \n  body\n ) \n // set it manually after creation \nnode . async  =   true ; \n \n 1 2 3 4 5 6 7 8 9 10 您可以通过  fields  对象查看生成器参数的验证。 \n fields :   { \n  object :   { \n    validate :   assertNodeType ( "Expression" ) \n   } , \n  property :   { \n     validate ( node ,  key ,  val )   { \n       let  expectedType  =  node . computed  ?   "Expression"   :   "Identifier" ; \n       assertNodeType ( expectedType ) ( node ,  key ,  val ) ; \n     } \n   } , \n  computed :   { \n     default :   false \n   } \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 可以看到 object 需要是一个 Expression ,  property 应该是 Expression 或者 Identifier , （具体是哪个）这取决于成员表达式是否是可计算的( computed ),并且 computed 是一个布尔值，默认为false。 \n 因此，我们可以像下面这样构建  MemberExpression  ： \n t . memberExpression ( \n  t . identifier ( \'object\' ) , \n  t . identifier ( \'property\' ) \n   // `computed` is optional \n ) ; \n \n 1 2 3 4 5 构建结果为： \n object . property\n \n 1 但是，我们说过  object  需要是一个表达式(Expression)，那么为什么标识符(Identifier)有效呢？ \n 如果我们看一下  Identifier  的定义，我们会发现它有一个  aliases  属性，表示它也是一个表达式。 \n aliases :   [ "Expression" ,   "LVal" ] , \n \n 1 So since  MemberExpression  is a type of  Expression , we could set it as the  object  of another  MemberExpression : \n 因此，由于  MemberExpression  是表达式(Expression)的一种类型，所以我们可以将其设置为另一个  MemberExpression  的  object ： \n t . memberExpression ( \n  t . memberExpression ( \n    t . identifier ( \'member\' ) , \n    t . identifier ( \'expression\' ) \n   ) , \n  t . identifier ( \'property\' ) \n ) \n \n 1 2 3 4 5 6 7 构建结果为： \n member . expression . property\n \n 1 你几乎不太可能记住每一种节点类型的 builder 方法的标识，因此，你需要花更多的时间去理解它们是如何从节点定义中生成的。 \n  最佳实践 \n   创建构建器和检查器的帮助函数 \n 将某些检查（如果节点是特定类型）提取到它们自己的帮助函数中以及提取特定节点类型的帮助函数是非常简单的。 \n function   isAssignment ( node )   { \n   return  node  &&  node . operator  ===  opts . operator  +   "=" ; \n } \n\n function   buildAssignment ( left ,  right )   { \n   return  t . assignmentExpression ( "=" ,  left ,  right ) ; \n } \n \n 1 2 3 4 5 6 7 #   尽量避免遍历抽象语法树（AST） \n 遍历AST是昂贵的，而且很容易意外地遍历AST超过必要的次数。这将产生很多额外的操作。 \n Babel optimizes this as much as possible, merging visitors together if it can in order to do everything in a single traversal. \n Babel尽可能地优化这一点，将访问者合并到一起（如果可以合并的话），以便在一次遍历中完成所有操作。 \n  及时合并访问者对象 \n 在写访问者时，可能会在逻辑上需要的多个地方调用“path.traverse”。 \n path . traverse ( { \n   Identifier ( path )   { \n     // ... \n   } \n } ) ; \n\npath . traverse ( { \n   BinaryExpression ( path )   { \n     // ... \n   } \n } ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 但是，最好将它们编写为只运行一次的单个访问者。否则将无缘无故地多次遍历同一棵语法树。 \n path . traverse ( { \n   Identifier ( path )   { \n     // ... \n   } , \n   BinaryExpression ( path )   { \n     // ... \n   } \n } ) ; \n \n 1 2 3 4 5 6 7 8 #   可以手动查找就不要遍历 \n 当寻找特定的节点类型时，可能会很想调用 path.traverse 。 \n const  nestedVisitor  =   { \n   Identifier ( path )   { \n     // ... \n   } \n } ; \n\n const  MyVisitor  =   { \n   FunctionDeclaration ( path )   { \n    path . get ( \'params\' ) . traverse ( nestedVisitor ) ; \n   } \n } ; \n \n 1 2 3 4 5 6 7 8 9 10 11 但是，如果您正在寻找特定的、浅显的内容，那么建议手动查找所需的节点，而无需执行代价高昂的遍历。 \n const  MyVisitor  =   { \n   FunctionDeclaration ( path )   { \n    path . node . params . forEach ( function ( )   { \n       // ... \n     } ) ; \n   } \n } ; \n \n 1 2 3 4 5 6 7 #   优化嵌套的访问者对象 \n 当您嵌套访问者（visitor）时，把它们嵌套在您的代码中可能是有意义的。 \n const  MyVisitor  =   { \n   FunctionDeclaration ( path )   { \n    path . traverse ( { \n       Identifier ( path )   { \n         // ... \n       } \n     } ) ; \n   } \n } ; \n \n 1 2 3 4 5 6 7 8 9 但是，每当调用 FunctionDeclaration() 时都会创建一个新的访问者对象。其代价是昂贵的，因为每次传入新的 visitor 对象时，Babel都会进行一些处理（例如分解包含多个类型的键、执行验证和调整对象结构）。之所以要进行这些处理是因为Babel在visitor对象上存储标志，表明它已经执行了该处理，所以最好将visitor存储在一个变量中，每次都传递相同的对象。 \n const  nestedVisitor  =   { \n   Identifier ( path )   { \n     // ... \n   } \n } ; \n\n const  MyVisitor  =   { \n   FunctionDeclaration ( path )   { \n    path . traverse ( nestedVisitor ) ; \n   } \n } ; \n \n 1 2 3 4 5 6 7 8 9 10 11 如果您在嵌套的访问者中需要一些状态，像这样： \n const  MyVisitor  =   { \n   FunctionDeclaration ( path )   { \n     var  exampleState  =  path . node . params [ 0 ] . name ; \n\n    path . traverse ( { \n       Identifier ( path )   { \n         if   ( path . node . name  ===  exampleState )   { \n           // ... \n         } \n       } \n     } ) ; \n   } \n } ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 你可以将其作为状态传递给 traverse() 方法，并可以在访问者的 this 上对其进行访问。 \n const  nestedVisitor  =   { \n   Identifier ( path )   { \n     if   ( path . node . name  ===   this . exampleState )   { \n       // ... \n     } \n   } \n } ; \n\n const  MyVisitor  =   { \n   FunctionDeclaration ( path )   { \n     var  exampleState  =  path . node . params [ 0 ] . name ; \n    path . traverse ( nestedVisitor ,   {  exampleState  } ) ; \n   } \n } ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 #   留意嵌套结构 \n 有时候在思考给定结构的转换时，可能会忘记给定的转换结构可以是嵌套的。 \n 例如，假设我们想从  Foo ClassDeclaration  中查找  constructor ClassMethod 。 \n class   Foo   { \n   constructor ( )   { \n     // ... \n   } \n } \n \n 1 2 3 4 5 const  constructorVisitor  =   { \n   ClassMethod ( path )   { \n     if   ( path . node . name  ===   \'constructor\' )   { \n       // ... \n     } \n   } \n } \n\n const  MyVisitor  =   { \n   ClassDeclaration ( path )   { \n     if   ( path . node . id . name  ===   \'Foo\' )   { \n      path . traverse ( constructorVisitor ) ; \n     } \n   } \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 我们忽略了类可以嵌套的事实，使用遍历的话，上面我们也会得到一个嵌套的 构造函数(constructor) ： \n class   Foo   { \n   constructor ( )   { \n     class   Bar   { \n       constructor ( )   { \n         // ... \n       } \n     } \n   } \n } \n \n 1 2 3 4 5 6 7 8 9 #   单元测试 \n 有几种主要的方法来测试babel插件：快照测试，AST测试和执行测试。对于这个例子，我们将使用 jest  ，因为它支持盒外快照测试。我们在这里创建的示例是托管在这个 repo 。 \n 首先我们需要一个babel插件，我们将把它放在 src/index.js 中。 \n module . exports   =   function   testPlugin ( babel )   { \n   return   { \n    visitor :   { \n       Identifier ( path )   { \n         if   ( path . node . name  ===   \'foo\' )   { \n          path . node . name  =   \'bar\' ; \n         } \n       } \n     } \n   } ; \n } ; \n \n 1 2 3 4 5 6 7 8 9 10 11 #  快照测试 \n 接下来，用  npm install --save-dev babel-core jest  安装我们的依赖， 然后我们可以开始写我们的第一个测试：快照测试。 快照测试允许我们直观地检查babel插件的输出。 我们给它一个输入，告诉它一个快照，并将其保存到一个文件。 我们可以在git中检查快照。 这使我们能够看到何时影响了测试用例的输出。 在拉请求的时候，它也给出了使用差异。 当然，你可以用任何测试框架来做到这一点，但是使用jest更新快照就像  jest -u  一样简单。 \n // src/__tests__/index-test.js \n const  babel  =   require ( \'babel-core\' ) ; \n const  plugin  =   require ( \'../\' ) ; \n\n var  example  =   ` \n    var foo = 1;\n    if (foo) console.log(foo);\n ` ; \n\n it ( \'works\' ,   ( )   =>   { \n   const   { code }   =  babel . transform ( example ,   { plugins :   [ plugin ] } ) ; \n   expect ( code ) . toMatchSnapshot ( ) ; \n } ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 这给了我们一个快照文件在  src/__tests__/__snapshots__/index-test.js.snap 。 \n exports [ ` test works 1 ` ]   =   ` \n    "var bar = 1;\n    if (bar) console.log(bar);"\n ` ; \n \n 1 2 3 4 如果我们在插件中将“bar”更改为“baz”并再次运行，则可以得到以下结果： \n 接收到的值与存储的快照1不匹配。\n\n      - Snapshot\n      + Received\n \n      @@ -1,3 +1,3 @@\n       "\n      -var bar = 1;\n      -if (bar) console.log(bar);"\n      +var baz = 1;\n      +if (baz) console.log(baz);"\n \n 1 2 3 4 5 6 7 8 9 10 11 我们可以看到对插件代码的更改是如何影响插件的输出的，如果输出看起来不错，我们可以运行jest-u来更新快照。 \n AST 测试 \n 除了快照测试之外，我们还可以手动检查AST。这是一个简单的例子。对于更复杂的情况，你可能希望利用 babel traverse 。它允许你使用 visitor 键指定一个对象，就像您用于插件本身一样。 \n it ( \'contains baz\' ,   ( )   =>   { \n   const   { ast }   =  babel . transform ( example ,   { plugins :   [ plugin ] } ) ; \n   const  program  =  ast . program ; \n   const  declaration  =  program . body [ 0 ] . declarations [ 0 ] ; \n  assert . equal ( declaration . id . name ,   \'baz\' ) ; \n   // or babelTraverse(program, {visitor: ...}) \n } ) ; \n \n 1 2 3 4 5 6 7 #  Exec Tests(执行测试) \n 在这里，我们将转换代码，然后评估它的行为是否正确。 请注意，我们在测试中没有使用 assert 。 这确保了如果我们的插件做了一些奇怪的事情，比如意外删除断言，测试仍然会失败。 \n it ( \'foo is an alias to baz\' ,   ( )   =>   { \n   var  input  =   ` \n    var foo = 1;\n    // test that foo was renamed to baz\n    var res = baz;\n   ` ; \n   var   { code }   =  babel . transform ( input ,   { plugins :   [ plugin ] } ) ; \n   var  f  =   new   Function ( ` \n     ${ code } ;\n    return res;\n   ` ) ; \n   var  res  =   f ( ) ; \n   assert ( res  ===   1 ,   \'res is 1\' ) ; \n } ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 Babel core 使用类似的方法进行快照和执行测试。 \n  babel-plugin-tester \n 这个包使测试插件更容易。 如果您熟悉ESLint的  RuleTester ，那么应该对此比较熟悉。 您可以看看 文档 去充分了解可能的情况，但这里有一个简单的例子： \n import  pluginTester  from   \'babel-plugin-tester\' ; \n import  identifierReversePlugin  from   \'../identifier-reverse-plugin\' ; \n\n pluginTester ( { \n  plugin :  identifierReversePlugin , \n  fixtures :  path . join ( __dirname ,   \'__fixtures__\' ) , \n  tests :   { \n     \'does not change code with no identifiers\' :   \'"hello";\' , \n     \'changes this code\' :   { \n      code :   \'var hello = "hi";\' , \n      output :   \'var olleh = "hi";\' , \n     } , \n     \'using fixtures files\' :   { \n      fixture :   \'changed.js\' , \n      outputFixture :   \'changed-output.js\' , \n     } , \n     \'using jest snapshots\' :   { \n      code :   ` \n        function sayHi(person) {\n          return \'Hello \' + person + \'!\'\n        }\n       ` , \n      snapshot :   true , \n     } , \n   } , \n } ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 \n \n 对于将来的更新，请跟随 @thejameskyle 和 @babeljs 的Twitter。 \n \n',summary:"\n\n这篇文档涵盖了如何创建 Babel 插件等方面的内容。.\n\ncc-by-4.0\n\n目录\n\n  介绍\n  基础\n      抽象语法树（ASTs）\n      Babel 的处理步骤\n      解析\n          词法分析\n          语法分析\n      转换\n      生成\n      遍历\n      Visitors（访问者）\n      Paths（路径）\n          Paths in Visitors（存在于访问者中的路径）\n      State（状态）\n      Scopes（作用域）\n          Bindings（绑定）\n  API\n   ...",id:"handbook",pid:"handbook",readingTime:{text:"21 min read",minutes:20.39,time:1223400,words:4078}},{title:"计算机网络小册",frontmatter:{title:"计算机网络小册",description:"本文主要记录在学习计算机网络一书过程中的一些知识,持续更新。",languages:["计算机网络"],layout:"Life",permalink:"/handbooks/:slug",readingShow:"top"},regularPath:"/_handbook/computer-network.html",relativePath:"_handbook/computer-network.md",key:"v-340858fc",path:"/handbooks/computer-network/",headers:[{level:2,title:"背景",slug:"背景"},{level:2,title:"第一章 计算机概述",slug:"第一章-计算机概述"},{level:3,title:"因特网概述",slug:"因特网概述"},{level:3,title:"因特网的组成",slug:"因特网的组成"},{level:3,title:"计算机网络的类别",slug:"计算机网络的类别"},{level:3,title:"计算机网络的性能",slug:"计算机网络的性能"},{level:3,title:"计算机网络的体系结构",slug:"计算机网络的体系结构"},{level:2,title:"第二章 物理层",slug:"第二章-物理层"},{level:3,title:"物理层下面的传输媒体",slug:"物理层下面的传输媒体"},{level:3,title:"信道复用技术",slug:"信道复用技术"},{level:2,title:"第三章 数据链路层",slug:"第三章-数据链路层"},{level:3,title:"数据链路层基本概念",slug:"数据链路层基本概念"},{level:3,title:"三个基本问题",slug:"三个基本问题"},{level:3,title:"点对点协议PPP",slug:"点对点协议ppp"},{level:3,title:"使用广播信道的数据链路层",slug:"使用广播信道的数据链路层"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" 计算机网络学习笔记 \n 背景 \n 得来空闲时间，可以看一些自己比较欠缺的计算机知识，本文主要记录在学习计算机网络一书过程中的一些知识。 \n \n 参考书籍：计算机网络（第五版） 谢希仁 编著 \n 参考视频： 韩立刚讲解《计算机网络》 \n \n 所有章节尽可能的集中在一篇文章中，不再为每一章单独写知识点。 \n \n 不会进行学术性的记录，更加侧重与一些工作中可能会用到的知识。 \n 第一章 计算机概述 \n 因特网概述 \n 网络、互联网、因特网的概念： \n \n 网络：许多计算机连接在一起（通过交换机） \n 互联网：许多网络连接在一起（通过路由器） \n 因特网：全球最大的一个互联网（使用的Tcp/Ip协议） \n \n ISP：因特网服务提供者（分层） \n NAP：网络接入点 \n 因特网的组成 \n \n 因特网根据其工作方式可以划分为 边缘部分 和 核心部分 。边缘部分由所有连接在因特网上的主机组成，主要用来进行通信（传送数据、音频或视频）和资源共享。核心部分由大量的网络和连接这些网络的路由器组成。这部分是为边缘部分提供服务的（提供连通性和交换）。 \n 边缘部分的主机之间的通信方式可分为两大类： 客户服务器方式（C/S方式） 和 对等方式（P2P方式） 。 \n 数据交换方式： 电路交换、报文交换、分组交换 。 \n 计算机网络就是通过分组交换这种方式实现数据交换的。路由器是实现分组交换的关键部件，其任务是 存储转发 分组。路由器收到一个分组，先暂时存储下来，再检查起首部，查找 转发表 ，按照首部中的目的地址，找到合适的接口转发出去，把分组交付到最终的目的主机。各路由器之间必·须经常交换彼此掌握的路由信息，以便创建和维持在路由器中的转发表，使得转发表能够在整个网络拓扑发生变化时及时更新。 \n 三种交换方式的比较： \n 计算机网络的类别 \n 按照作用范围分类： \n \n 广域网(WAN) \n 城域网(MAN) \n 局域网(LAN) \n 个人区域网(PAN) \n \n 按照使用者分类： \n \n 公用网 \n 专用网 \n \n 按照拓扑结构： \n \n 总线型结构 \n 环型结构 \n 星型结构 \n 树型结构 \n 网状结构 \n \n 按照交换方式： \n \n 电路交换网 \n 报文交换网 \n 分组交换网 \n \n 按照工作方式： \n \n 资源子网 \n 通信子网 \n 接入网 \n 计算机网络的性能 \n 七个常用的性能指标：速率、带宽、吞吐量、时延、时延带宽积、往返时间、利用率。 \n \n 速率 \n \n 速率是指连接在计算机网络上的主机在数字信道上 传送数据位数 的速率，也称为 data rate 或 bit rate，单位是b/s, kb/s, Mb/s, Gb/s. \n \n 带宽 \n \n 在计算机网络中，带宽用来表示网络的 通信线路 所能传送数据的能力，因此网络带宽表示在单位时间内从网络中的某一点到另一点所能通过的“ 最高数据率 ”。单位是b/s、Mb/s等。 \n \n 吞吐量 \n \n 在单位时间内通过某个网络的数据量；单位是b/s、Mb/s \n \n 时延 \n \n \n \n \n 总时延 = 发送时延 + 传播时延 + 处理时延 + 排队时延 \n \n 时延带宽积 \n \n 时延带宽积 = 传播时延 x 带宽 \n 时延带宽积表示这样的链路可容纳多少个比特。例如，设某段链路的传播时延为20ms，带宽为10Mb/s。算出时延带宽积 = 20 * 10^-3 * 10 * 10^6 = 2 * 10^5 bit。 这就表示，若发送端连续发送数据，则在发送的第一个比特即将到达终点时，发送端就已经发送了20万个比特 。 \n \n 往返时间 \n \n RTT（Round-Trip Time）:从发送方发送数据开始到发送方收到接收方确认总共经历的时间。 \n \n 利用率 \n \n \n 信道利用率并非越高越好。这是因为根据排队理论， 当某信道的利用率增加时，该信道引起的时延也就迅速增加 。 \n 计算机网络的体系结构 \n OSI七层协议 \n \n 七层模型概述： \n \n 开放系统信息交换涉及的几个概念： \n \n 实体：交换信息的硬件或软件进程 \n 协议：控制两个对等实体通信的规则 \n 服务：下层向上层提供服务，上层需要使用下层提供的服务来实现本层的功能 \n 服务访问点(SAP)：相邻两层实体间交换信息的地方 \n 五层协议对应的数据单元 \n 数据在各层之间的传递过程： \n 第二章 物理层 \n 物理层解决如何在连接各种计算机的传输媒体上 传输数据比特流 ，而不是指具体的传输媒体。 \n 物理层下面的传输媒体 \n 传输媒体是数据传输系统中在发送器和接收器之间的物理通路，可分为两大类： 导向传输媒体 和 非导向传输媒体 。 \n \n 导向传输媒体 \n \n 导向传输媒体中，电磁波沿着固体媒体传输，如双绞线、同轴电缆、光纤。 \n \n 非导向传输媒体 \n \n 非导向传输媒体就是指自由空间，其中的电磁波传输被称为无线传输。 \n 信道复用技术 \n 信道复用技术包括 频分复用（FDM） 、 时分复用（TDM） 、 波分复用（WDM） 、 码分复用（CDM） 。 \n 第三章 数据链路层 \n 数据链路层基本概念 \n 数据发送模型 \n 主机H1向主机H2发送数据 \n \n 主机H1和主机H2都有完整的五层协议栈，但路由器在转发分组时使用的协议栈只有下面三层。数据进入路由器后要先从物理层上到网络层，在转发表中找到下一调的地址后，再下到物理层转发出去。 \n 数据链路层的信道类型 \n 数据链路层使用的信道主要有一下两种类型： \n \n 点对点信道。这种信道使用一对一的点对点通信方式 \n 广播信道。这种信道使用一对多的广播通信方式，因此过程比较复杂。广播信道上连接的主机很多，因此必须要使用专用的共享信道协议来协调这些主机的数据发送。 \n 链路与数据链路 \n 链路是一条点到点的物理线段，中间没有任何其他的交换节点。 \n 数据链路：除了物理线路外，还必须有通信协议来控制这些数据的传输。若把实现这些协议的硬件和软件加到链路上，就构成了数据链路。 \n 帧 \n 数据链路层的协议数据单元——帧。 \n 数据链路层把网络层交下来的数据构成帧发送到链路上，以及把接收到的帧中的数据取出并上交给网络层。在因特网中，网络层协议数据单元就是IP数据报（或简称数据报、分组或包）。 \n 三个基本问题 \n \n 封装成帧 \n \n 封装成帧就是在一段数据的前后分别添加首部和尾部，然后就构成了一个帧。首部和尾部的一个重要作用就是进行帧定界。 \n \n MTU：最大传送单元（一般为1500字节） \n 控制字符 SOH 放在一帧的最前面，表示帧的首部开始。另一个控制字符 EOT 表示帧的结束。 \n \n SOH 和 EOT 都是控制字符的名称，它们的16进制编码分别事01和04。 SOH (或 EOT )并不是S，O，H (或E, O, T)三个字符。 \n \n \n \n 透明传输 \n \n 透明传输是指不管所传数据是什么样的比特组合，都应当能够在链路上传送。当所传数据中的比特组合恰巧与某一个控制信息（ SOH 或 EOT ）一样时，数据链路层就会错误的找到帧的边界。 \n \n 解决办法：用字节填充解决透明传输的问题。 \n \n \n 转义字符 ESC 的16进制编码为 1B。 \n \n \n 差错检测 \n \n 为了保证数据传输的可靠性，在计算机网络传输数据时，必须采用各种差错检测措施。目前在数据链路层广泛使用了 循环冗余检测CRC 的检错技术。 \n CRC的原理： \n 在发送端，先把数据划分为组,假定每组  k  个比特。现假定待传输的数据  M  = 101001 ( k  = 6)。CRC运算就是在数据  M  的后面添加供差错检测用的  n  为冗余码，然后构成一帧发送出去，一共发送 ( k + n ) 位。 \n 这  n  位冗余码可用以下方法获得：用二进制的 模2运算 进行  乘  M  的运算，这相当于在  M  后面添加  n  个0。得到( K + n )位的数除以收发双方事先商定的长度为( n + 1 )的除数 P ，得出商是 Q 而余数是 R  ( n 位，比 P 少一位)。 \n \n 除数 P 的约定是由数据链路层的协议来实现的。 \n \n 这个余数  R  就作为冗余码拼接在  M  的后面发送出去。 \n 这种为了检错而添加的冗余码被称为 帧检验序列FCS 。 \n \n CRC和FCS并不是一个概念。CRC是一种检错方法，而FCS是添加在数据后面的冗余码。 \n \n 如果在传输过程中无差错，那么经过CRC检验后得出的余数  R  肯定是 0 。如果余数不为0，则判定这个帧有差错，则丢弃。 \n 仅使用CRC差错检测技术只能做到 无差错接受 ，也就是说：接收端数据链路层接受的帧都没有传输差错，因为有传输差错的帧都被丢弃。 \n 要做到 可靠传输 （即发送什么就收到什么）就必须加上 确认 和 重传 机制。 \n 改正差错的任务由上层协议来完成(例如，运输层的TCP协议)。 \n 点对点协议PPP \n PPP协议应该满足的要求： \n \n 简单 \n 封装成帧 \n 透明性 \n 多种网络层协议 \n 多种类型链路 \n 差错检测 \n 检测连接状态 \n 最大传输单元 \n 网络层地址协商 \n 数据压缩协商 \n \n PPP协议不需要满足的要求： \n \n 纠错 \n 流量控制 \n 序号 \n 多点线路 \n 半双工或单工链路 \n \n PPP协议有3个组成部分： \n \n 一个将IP数据报封装到串行链路的方法。 \n 一个用来建立、配置和测试数据链路连接的 链路控制协议 LCP 。通信双方可以协商一些选项。在RFC 1661 中定义了11种LCP分组。 \n 一套 网络控制协议 NCP ，其中的每一个协议都支持不同的网络层协议，如IP、OSI的网络层等。 \n PPP协议的帧格式 \n \n 首部中的地址字段 A 规定为 0xFF (即 11111111)，控制字段 C 规定为 0x03 (即 00000011)。这两个字段并未携带PPP帧的信息。PPP首部的第四个字段时2个字节的协议字段。协议字段主要用来标识信息部分的数据类型。 \n 解决透明传输引起的问题：字节填充 和 零比特填充。 \n PPP协议之所以不使用序号和确认机制是出于以下的考虑： \n \n 在数据链路层出现差错的概率不大时使用比较简单的PPP协议比较合理 \n 在因特网环境下，PPP的信息字段放入的数据时IP数据报。数据链路层的可靠传输不能保证网络层的传输也是可靠的。 \n 帧检验序列 FCS 字段可以保证无差错接受 \n \n PPP协议的工作状态： \n 使用广播信道的数据链路层 \n 局域网的数据链路层 \n 局域网的主要特点：网络为一个单位所拥有，且地理范围和站点数目均局限。 \n 局域网具有如下的一些主要优点： \n \n 具有广播功能，从一个站点可以很方便的访问全网。局域网上的主机可共享连接在局域网上的各种硬件和软件资源。 \n 便于系统的扩展和逐渐地演变，各设备的位置可灵活地调整和改变 \n 提高了系统的可靠性、可用性和生存性 \n \n",summary:"\n背景\n\n得来空闲时间，可以看一些自己比较欠缺的计算机知识，本文主要记录在学习计算机网络一书过程中的一些知识。\n\n参考书籍：计算机网络（第五版） 谢希仁 编著\n参考视频：韩立刚讲解《计算机网络》\n\n所有章节尽可能的集中在一篇文章中，不再为每一章单独写知识点。\n\n>不会进行学术性的记录，更加侧重与一些工作中可能会用到的知识。\n\n第一章 计算机概述\n\n因特网概述\n\n网络、互联网、因特网的概念：\n\n网络：许多计算机连接在一起（通过交换机）\n\n互联网：许多网络连接在一起（通过路由器）\n\n因特网：全球最大的一个互联网（使用的Tcp/Ip协议）\n\nISP：因特网服务提供者（分层）\n\nNAP：网络接入点\n\n ...",id:"handbook",pid:"handbook",readingTime:{text:"2 min read",minutes:1.785,time:107100,words:357}},{title:"MySQL必知必会读书笔记",frontmatter:{title:"MySQL必知必会读书笔记",description:"本文主要记录在阅读《MySQL必知必会》时的笔记，持续更新。",languages:["SQL"],layout:"Life",permalink:"/handbooks/:slug",readingShow:"top"},regularPath:"/_handbook/mysql-hb.html",relativePath:"_handbook/mysql-hb.md",key:"v-79326b20",path:"/handbooks/mysql-hb/",headers:[{level:2,title:"第一章 了解SQL",slug:"第一章-了解sql"},{level:3,title:"概念",slug:"概念"},{level:2,title:"第二章 MySQL简介",slug:"第二章-mysql简介"},{level:2,title:"第三章 使用MySQL",slug:"第三章-使用mysql"},{level:3,title:"连接",slug:"连接"},{level:3,title:"选择数据库",slug:"选择数据库"},{level:3,title:"其他SHOW语句",slug:"其他show语句"},{level:2,title:"第四章 检索数据",slug:"第四章-检索数据"},{level:3,title:"检索单个列",slug:"检索单个列"},{level:3,title:"检索多个列",slug:"检索多个列"},{level:3,title:"检索所有列",slug:"检索所有列"},{level:3,title:"检索不同行",slug:"检索不同行"},{level:3,title:"限制结果",slug:"限制结果"},{level:3,title:"使用完全限定的表名",slug:"使用完全限定的表名"},{level:2,title:"第五章 排序检索数据",slug:"第五章-排序检索数据"},{level:3,title:"排序数据",slug:"排序数据"},{level:3,title:"按多个列排序",slug:"按多个列排序"},{level:3,title:"指定排序方向",slug:"指定排序方向"},{level:2,title:"第六章 过滤数据",slug:"第六章-过滤数据"},{level:3,title:"使用WHERE子句",slug:"使用where子句"},{level:3,title:"WHERE子句操作符",slug:"where子句操作符"},{level:2,title:"第七章 数据过滤",slug:"第七章-数据过滤"},{level:3,title:"AND操作符",slug:"and操作符"},{level:3,title:"OR操作符",slug:"or操作符"},{level:3,title:"计算次序",slug:"计算次序"},{level:3,title:"IN操作符",slug:"in操作符"},{level:3,title:"NOT操作符",slug:"not操作符"},{level:2,title:"第八章 用通配符进行过滤",slug:"第八章-用通配符进行过滤"},{level:3,title:"LIKE操作符",slug:"like操作符"},{level:3,title:"使用通配符的技巧",slug:"使用通配符的技巧"},{level:2,title:"第九章 用正则表达式进行搜索",slug:"第九章-用正则表达式进行搜索"},{level:3,title:"基本字符匹配",slug:"基本字符匹配"},{level:3,title:"LIKE和正则表达式区别",slug:"like和正则表达式区别"},{level:3,title:"进行OR匹配",slug:"进行or匹配"},{level:3,title:"匹配几个字符之一",slug:"匹配几个字符之一"},{level:3,title:"匹配范围",slug:"匹配范围"},{level:3,title:"匹配特殊字符",slug:"匹配特殊字符"},{level:3,title:"匹配字符类",slug:"匹配字符类"},{level:3,title:"匹配多个实例",slug:"匹配多个实例"},{level:3,title:"定位符",slug:"定位符"},{level:2,title:"第十章 创建计算字段",slug:"第十章-创建计算字段"},{level:3,title:"拼接字段",slug:"拼接字段"},{level:3,title:"执行算术计算",slug:"执行算术计算"},{level:3,title:"如何测试计算",slug:"如何测试计算"},{level:2,title:"第十一章 使用数据处理函数",slug:"第十一章-使用数据处理函数"},{level:3,title:"常用的文本处理函数",slug:"常用的文本处理函数"}],lastUpdated:"12/13/2021, 3:35:07 PM",content:" MySQL必知必会读书笔记 \n 之前根据SQLBolt网站了解了SQL语句，整理了文章 SQL入门学习 。 \n 本次通过《MySQL必知必会》一书来更加深入且系统的学习下SQL语言。 \n 第一章 了解SQL \n 概念 \n \n 数据库(database) ：保存有组织的数据的容器。 \n 表(table) ：某种特定类型数据的结构化清单。 \n 模式(scheme) ：关于数据库和表的布局及特性信息。 \n 列(column) ：表由列组成。所有表都是由一个或多个列组成的。 \n 数据类型(datatype) ：所容许的数据的类型。每个表列都有相应的数据类型，它限制改列中存储的数据。 \n 行(row) ：表中的一个记录。 \n 主键(primary key) ：一列（或 一组列 ），其值能够唯一区分表中每个行。表中的任何列都可以作为主键，只要它满足一下条件\n \n 任意两行都不具有相同的主键值 \n 每个行都必须具有一个主键值（主键列不允许NULL值） \n \n \n \n \n 主键的好习惯： \n \n 不更新主键列中的值 \n 不重用主键列的值 \n 不在主键列中使用可能会更改的值。 \n \n \n \n SQL ：结构化查询语言（Structured Query Language） \n 第二章 MySQL简介 \n 本章主要介绍了什么是MySQL，并引入了几个客户机实用程序。 \n \n 个人还是推荐Navicat premium \n 第三章 使用MySQL \n 连接 \n 为了连接到MySQL，需要以下信息： \n \n 主机名：如果连接到本地MySQL服务器，为 localhost \n 端口：默认是3306 \n 一个合法的用户名 \n 用户密码 \n 选择数据库 \n 关键字 USE 、 SHOW ; \n 显示可用的数据库列表： \n show databases;\n \n 1 mysql> show databases;\n+--------------------+\n| Database           |\n+--------------------+\n| customers          |\n| information_schema |\n| mysql              |\n| performance_schema |\n| sql_learn          |\n| sys                |\n+--------------------+\n6 rows in set (0.01 sec)\n \n 1 2 3 4 5 6 7 8 9 10 11 12 使用 USE 关键字选择一个数据库,并且用 SHOW 获取数据库内表的列表： \n use customers;\nshow tables;\n \n 1 2 mysql> use customers;\nReading table information for completion of table and column names\nYou can turn off this feature to get a quicker startup with -A\n\nDatabase changed\nmysql> show tables;\n+---------------------+\n| Tables_in_customers |\n+---------------------+\n| customers           |\n| orderitems          |\n| orders              |\n| productnotes        |\n| products            |\n| vendors             |\n+---------------------+\n6 rows in set (0.00 sec)\n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 SHOW 也可以用来显示表列： \n show columns from customers;\n//或\ndescribe customers;\n \n 1 2 3 mysql> show columns from customers;\n+--------------+-----------+------+-----+---------+----------------+\n| Field        | Type      | Null | Key | Default | Extra          |\n+--------------+-----------+------+-----+---------+----------------+\n| cust_id      | int       | NO   | PRI | NULL    | auto_increment |\n| cust_name    | char(50)  | NO   |     | NULL    |                |\n| cust_address | char(50)  | YES  |     | NULL    |                |\n| cust_city    | char(50)  | YES  |     | NULL    |                |\n| cust_state   | char(5)   | YES  |     | NULL    |                |\n| cust_zip     | char(10)  | YES  |     | NULL    |                |\n| cust_country | char(50)  | YES  |     | NULL    |                |\n| cust_contact | char(50)  | YES  |     | NULL    |                |\n| cust_email   | char(255) | YES  |     | NULL    |                |\n+--------------+-----------+------+-----+---------+----------------+\n9 rows in set (0.00 sec)\n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 \n 什么是自动增量？ \n 某些表列需要唯一值。例如订单编号、雇员ID等。在每个行添加到表中时，MySQL可以自动地为每个行分配下一个可用编号，不用在添加一行时手动分配唯一值。这个功能就是所谓的自动增量。 \n 其他SHOW语句 \n \n SHOW STATUS; ，用于显示广泛的服务器状态信息； \n SHOW CREATE DATABASE <base_name> 和 SHOW CREATE TABLE <table_name> ，分别用来显示创建特定数据库或表的MySQL语句。 \n \n \n 执行 HELP SHOW; 显示运行的 SHOW 语句。 \n 第四章 检索数据 \n 检索单个列 \n select prod_name from products;\n \n 1 利用 SELECT 语句从 products 表中检索一个名为 prod_name 的列。 \n mysql> select prod_name from products;\n+----------------+\n| prod_name      |\n+----------------+\n| .5 ton anvil   |\n| 1 ton anvil    |\n| 2 ton anvil    |\n| Detonator      |\n| Bird seed      |\n| Carrots        |\n| Fuses          |\n| JetPack 1000   |\n| JetPack 2000   |\n| Oil can        |\n| Safe           |\n| Sling          |\n| TNT (1 stick)  |\n| TNT (5 sticks) |\n+----------------+\n14 rows in set (0.00 sec)\n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 \n 注意：SQL语句不区分大小写。 \n 检索多个列 \n select prod_id, prod_name, prod_price from products;\n \n 1 mysql> select prod_id, prod_name, prod_price from products;\n+---------+----------------+------------+\n| prod_id | prod_name      | prod_price |\n+---------+----------------+------------+\n| ANV01   | .5 ton anvil   |       5.99 |\n| ANV02   | 1 ton anvil    |       9.99 |\n| ANV03   | 2 ton anvil    |      14.99 |\n| DTNTR   | Detonator      |      13.00 |\n| FB      | Bird seed      |      10.00 |\n| FC      | Carrots        |       2.50 |\n| FU1     | Fuses          |       3.42 |\n| JP1000  | JetPack 1000   |      35.00 |\n| JP2000  | JetPack 2000   |      55.00 |\n| OL1     | Oil can        |       8.99 |\n| SAFE    | Safe           |      50.00 |\n| SLING   | Sling          |       4.49 |\n| TNT1    | TNT (1 stick)  |       2.50 |\n| TNT2    | TNT (5 sticks) |      10.00 |\n+---------+----------------+------------+\n14 rows in set (0.00 sec)\n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 #  检索所有列 \n select * from products;\n \n 1 \n \n 注意：一般，除非你真的需要表中的每个列，否则最好别使用*通配符。因为检索不需要的的列通常会降低检索和应用程序的性能。 \n 检索不同行 \n 关键字 DISTINCT ;顾名思义，此关键字指示MySQL只返回不同的值。 \n 正如所见， SELECT 返回所有匹配的行。但是，如果你不想要每个值每次都出现，怎么办？例如，你想要的出products表中产品的所有供应商ID： \n select vend_id from products;\n \n 1 SELECT 语句返回14行（即使表中只有4个供货商）。那么，如何检索出有不同值的列表呢？ \n 解决办法时使用 DISTINCT 关键字。 \n select distinct vend_id from products;\n \n 1 mysql> select distinct vend_id from products;\n+---------+\n| vend_id |\n+---------+\n|    1001 |\n|    1002 |\n|    1003 |\n|    1005 |\n+---------+\n4 rows in set (0.00 sec)\n \n 1 2 3 4 5 6 7 8 9 10 \n 不能部分使用DISTINCT。 DISTINCT 关键字应用于所有列而不仅是前置它的列。如果给出 SELECT DISTINCT vend_id, prod_price from products ，除非指定的两个列都相同，否则所有行都将被检索出来。 \n 限制结果 \n 为了返回第一行或前几行，可使用 LIMIT 子句。 \n select prod_name from products limit 5;\n \n 1 mysql> select prod_name from products limit 5;\n+--------------+\n| prod_name    |\n+--------------+\n| .5 ton anvil |\n| 1 ton anvil  |\n| 2 ton anvil  |\n| Detonator    |\n| Bird seed    |\n+--------------+\n5 rows in set (0.00 sec)\n \n 1 2 3 4 5 6 7 8 9 10 11 select prod_name from products limit 5, 5;\n \n 1 LIMIT 5, 5 表示返回从行5开始的5行。 第一个数为开始的位置，第二个数为要检索的行数。 \n \n 由于这种写法很容易把人搞糊涂，建议使用 LIMIT 5 OFFSET 5 ; \n \n mysql> select prod_name from products limit 5, 5;\n+--------------+\n| prod_name    |\n+--------------+\n| Carrots      |\n| Fuses        |\n| JetPack 1000 |\n| JetPack 2000 |\n| Oil can      |\n+--------------+\n5 rows in set (0.00 sec)\n \n 1 2 3 4 5 6 7 8 9 10 11 \n 行0：检索出来的第一行为行0而不是行1. \n \n \n MySQL 5支持另外一种替代语法： \n LIMIT 3, 4 等价于 LIMIT 4 OFFSET 3 \n 使用完全限定的表名 \n 迄今为止使用的SQL例子只通过列明引用列。也可能使用完全限制的名字来引用列（同时使用表名和列名），比如： \n select products.prod_name from customers.products;\n \n 1 #  第五章 排序检索数据 \n 关系数据库设计理论认为，如果不明确规定顺序排序，则不应该假定检索出的数据的顺序有意义。 \n 排序数据 \n \n 子句 ：SQL语句由子句构成，有些子句是必须的，而有些是可选的。子句的例子有 SELECT 语句的 FROM 子句。 \n \n 为了明确地排序用 SELECT 语句检索出的数据，可使用 ORDER BY 子句。 \n select prod_name from products order by prod_name;\n \n 1 mysql> select prod_name from products order by prod_name;\n+----------------+\n| prod_name      |\n+----------------+\n| .5 ton anvil   |\n| 1 ton anvil    |\n| 2 ton anvil    |\n| Bird seed      |\n| Carrots        |\n| Detonator      |\n| Fuses          |\n| JetPack 1000   |\n| JetPack 2000   |\n| Oil can        |\n| Safe           |\n| Sling          |\n| TNT (1 stick)  |\n| TNT (5 sticks) |\n+----------------+\n14 rows in set (0.00 sec)\n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 \n 用非检索的列排序数据是完全合法的。 \n 按多个列排序 \n 下面检索3个列，并按其中两个列对结果进行排序——首先按价格，然后再按名称排序。 \n select prod_id, prod_price, prod_name from products order by prod_price, prod_name;\n \n 1 mysql> select prod_id, prod_price, prod_name from products order by prod_price, prod_name;\n+---------+------------+----------------+\n| prod_id | prod_price | prod_name      |\n+---------+------------+----------------+\n| FC      |       2.50 | Carrots        |\n| TNT1    |       2.50 | TNT (1 stick)  |\n| FU1     |       3.42 | Fuses          |\n| SLING   |       4.49 | Sling          |\n| ANV01   |       5.99 | .5 ton anvil   |\n| OL1     |       8.99 | Oil can        |\n| ANV02   |       9.99 | 1 ton anvil    |\n| FB      |      10.00 | Bird seed      |\n| TNT2    |      10.00 | TNT (5 sticks) |\n| DTNTR   |      13.00 | Detonator      |\n| ANV03   |      14.99 | 2 ton anvil    |\n| JP1000  |      35.00 | JetPack 1000   |\n| SAFE    |      50.00 | Safe           |\n| JP2000  |      55.00 | JetPack 2000   |\n+---------+------------+----------------+\n14 rows in set (0.00 sec)\n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 重要的是理解在按多个列排序时，排序完全按照所规定的顺序进行。 \n 对于上述例子的输出，仅在多个行具有相同的prod_price值时才对产品的prod_name进行排序。如果prod_price列中所有的值都是唯一的，则不会按prod_name排序。 \n 指定排序方向 \n 默认是升序排序，我们还可以使用 ORDER BY 子句降序排序，此时需要指定关键字 DESC ; \n \n DESC ：降序 \n ASC ：升序，默认 \n \n select prod_id, prod_price, prod_name from products order by prod_price desc;\n \n 1 mysql> select prod_id, prod_price, prod_name from products order by prod_price desc;\n+---------+------------+----------------+\n| prod_id | prod_price | prod_name      |\n+---------+------------+----------------+\n| JP2000  |      55.00 | JetPack 2000   |\n| SAFE    |      50.00 | Safe           |\n| JP1000  |      35.00 | JetPack 1000   |\n| ANV03   |      14.99 | 2 ton anvil    |\n| DTNTR   |      13.00 | Detonator      |\n| FB      |      10.00 | Bird seed      |\n| TNT2    |      10.00 | TNT (5 sticks) |\n| ANV02   |       9.99 | 1 ton anvil    |\n| OL1     |       8.99 | Oil can        |\n| ANV01   |       5.99 | .5 ton anvil   |\n| SLING   |       4.49 | Sling          |\n| FU1     |       3.42 | Fuses          |\n| FC      |       2.50 | Carrots        |\n| TNT1    |       2.50 | TNT (1 stick)  |\n+---------+------------+----------------+\n14 rows in set (0.00 sec)\n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 如果打算对多个列排序： \n select prod_id, prod_price, prod_name from products order by prod_price desc, prod_name;\n \n 1 DESC 关键字只应用到直接位于其前面的列名。如果想在多个列上进行降序排序，必须对每个列指定 DESC 关键字。 \n mysql> select prod_id, prod_price, prod_name from products order by prod_price desc, prod_name;\n+---------+------------+----------------+\n| prod_id | prod_price | prod_name      |\n+---------+------------+----------------+\n| JP2000  |      55.00 | JetPack 2000   |\n| SAFE    |      50.00 | Safe           |\n| JP1000  |      35.00 | JetPack 1000   |\n| ANV03   |      14.99 | 2 ton anvil    |\n| DTNTR   |      13.00 | Detonator      |\n| FB      |      10.00 | Bird seed      |\n| TNT2    |      10.00 | TNT (5 sticks) |\n| ANV02   |       9.99 | 1 ton anvil    |\n| OL1     |       8.99 | Oil can        |\n| ANV01   |       5.99 | .5 ton anvil   |\n| SLING   |       4.49 | Sling          |\n| FU1     |       3.42 | Fuses          |\n| FC      |       2.50 | Carrots        |\n| TNT1    |       2.50 | TNT (1 stick)  |\n+---------+------------+----------------+\n14 rows in set (0.01 sec)\n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 #  注意⚠️ \n ORDER BY 子句的位置，在给出 ORDER BY 子句时，应该保证它位于 FROM 子句之后，如果要使用 LIMIT ，它必须位于 ORDER BY 之后。使用子句的次序不对将产生错误消息。 \n SELECT <column>, <another_column>, …\nFROM <mytable>\nORDER BY <column> ASC/DESC\nLIMIT <num_limit> OFFSET <num_offset>;\n \n 1 2 3 4 #  第六章 过滤数据 \n 使用WHERE子句 \n select prod_name, prod_price from products where prod_price=2.50;\n \n 1 mysql> select prod_name, prod_price from products where prod_price=2.50;\n+---------------+------------+\n| prod_name     | prod_price |\n+---------------+------------+\n| Carrots       |       2.50 |\n| TNT (1 stick) |       2.50 |\n+---------------+------------+\n2 rows in set (0.00 sec)\n \n 1 2 3 4 5 6 7 8 \n WHERE 子句的位置：在同时使用 WHERE 子句和 ORDER BY 子句时，应该让 ORDER BY 位于 WHERE 之后，否则将会产生错误。 \n WHERE子句操作符 \n WHERE 子句操作符： \n \n \n \n 操作符 \n 说明 \n \n \n \n \n = \n 等于 \n \n \n <> \n 不等于 \n \n \n != \n 不等于 \n \n \n < \n 小于 \n \n \n <= \n 小于等于 \n \n \n > \n 大于 \n \n \n >= \n 大于等于 \n \n \n BETWEEN...AND... \n 在指定的两个值之间 \n 范围值检查 \n select prod_name, prod_price from products where prod_price between 10 and 30 order by prod_price asc;\n \n 1 mysql> select prod_name, prod_price from products where prod_price between 10 and 30 order by prod_price asc;\n+----------------+------------+\n| prod_name      | prod_price |\n+----------------+------------+\n| Bird seed      |      10.00 |\n| TNT (5 sticks) |      10.00 |\n| Detonator      |      13.00 |\n| 2 ton anvil    |      14.99 |\n+----------------+------------+\n4 rows in set (0.00 sec)\n \n 1 2 3 4 5 6 7 8 9 10 #  不匹配检查 \n select vend_id, prod_name from products where vend_id!=1003;\n \n 1 mysql> select vend_id, prod_name from products where vend_id!=1003;\n+---------+--------------+\n| vend_id | prod_name    |\n+---------+--------------+\n|    1001 | .5 ton anvil |\n|    1001 | 1 ton anvil  |\n|    1001 | 2 ton anvil  |\n|    1002 | Fuses        |\n|    1002 | Oil can      |\n|    1005 | JetPack 1000 |\n|    1005 | JetPack 2000 |\n+---------+--------------+\n7 rows in set (0.00 sec)\n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 #  单个值检查 \n select prod_name, prod_price from products where prod_name = 'fuses';\n \n 1 mysql> select prod_name, prod_price from products where prod_name = 'fuses';\n+-----------+------------+\n| prod_name | prod_price |\n+-----------+------------+\n| Fuses     |       3.42 |\n+-----------+------------+\n1 row in set (0.00 sec)\n \n 1 2 3 4 5 6 7 \n 何时使用引号？单引号用来限定字符串。如果将值与串类型的列进行比较，则需要限定引号。用来与数值列进行比较的值不用引号。 \n 空值检查 \n 在创建表时，表设计人员可以指定其中的列是否可以不包含值。在一个列不包含值时，称其为包含空值 NULL 。 \n \n NULL ,无值（no value），它与字段包含0、空字符串或仅仅包含空格不同。 \n \n select cust_id from customers where cust_email is null;\n \n 1 mysql> select cust_id from customers where cust_email is null;\n+---------+\n| cust_id |\n+---------+\n|   10002 |\n|   10005 |\n+---------+\n2 rows in set (0.01 sec)\n \n 1 2 3 4 5 6 7 8 #  第七章 数据过滤 \n 在第六章介绍的所有 WHERE 子句在过滤时使用的都是单一的条件。 \n 为了进行更强的过滤控制，MySQL允许给出多个 WHERE 子句。这些子句可以两种方式使用：以 AND 子句的方式活以 OR 子句的方式。 \n AND操作符 \n AND 用于检索满足所有给定条件的行； \n select prod_id, prod_price, prod_name from products where vend_id = 1003 and prod_price <= 10;\n \n 1 mysql> select prod_id, prod_price, prod_name from products where vend_id = 1003 and prod_price <= 10;\n+---------+------------+----------------+\n| prod_id | prod_price | prod_name      |\n+---------+------------+----------------+\n| FB      |      10.00 | Bird seed      |\n| FC      |       2.50 | Carrots        |\n| SLING   |       4.49 | Sling          |\n| TNT1    |       2.50 | TNT (1 stick)  |\n| TNT2    |      10.00 | TNT (5 sticks) |\n+---------+------------+----------------+\n5 rows in set (0.00 sec)\n \n 1 2 3 4 5 6 7 8 9 10 11 上述例子中使用了只包含一个关键字 AND 的语句，把两个过滤条件组合在一起。还可以添加多个过滤条件，每添加一条就要使用一个 AND 。 \n OR操作符 \n OR 用于检索匹配任一给定条件的行。 \n select prod_name, prod_price, vend_id from products where vend_id = 1002 or vend_id = 1003;\n \n 1 mysql> select prod_name, prod_price, vend_id from products where vend_id = 1002 or vend_id = 1003;\n+----------------+------------+---------+\n| prod_name      | prod_price | vend_id |\n+----------------+------------+---------+\n| Fuses          |       3.42 |    1002 |\n| Oil can        |       8.99 |    1002 |\n| Detonator      |      13.00 |    1003 |\n| Bird seed      |      10.00 |    1003 |\n| Carrots        |       2.50 |    1003 |\n| Safe           |      50.00 |    1003 |\n| Sling          |       4.49 |    1003 |\n| TNT (1 stick)  |       2.50 |    1003 |\n| TNT (5 sticks) |      10.00 |    1003 |\n+----------------+------------+---------+\n9 rows in set (0.00 sec)\n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 #  计算次序 \n WHERE 可包含任意数目的 AND 和 OR 操作符。允许两者结合以进行复杂和高级的过滤。 \n 但是这样会带来一个问题，请看下面的SQL语句： \n select prod_name, prod_price from products where vend_id = 1002 or vend_id = 1003 and prod_price >= 10;\n \n 1 mysql> select prod_name, prod_price from products where vend_id = 1002 or vend_id = 1003 and prod_price >= 10;\n+----------------+------------+\n| prod_name      | prod_price |\n+----------------+------------+\n| Fuses          |       3.42 |\n| Oil can        |       8.99 |\n| Detonator      |      13.00 |\n| Bird seed      |      10.00 |\n| Safe           |      50.00 |\n| TNT (5 sticks) |      10.00 |\n+----------------+------------+\n6 rows in set (0.00 sec)\n \n 1 2 3 4 5 6 7 8 9 10 11 12 我们的预期是 列出价格为10美元（含）以上且由1002或1003制造的所有产品 。 \n 请看上面的结果。返回的行中有两行价格小于10美元，显然不符合预期。这样的原因在于 计算的次序 。 \n SQL在处理 OR 操作前，优先处理 AND 操作符 。因此上述SQL语句可以理解为： 由供应商1003制造且价格为10美元（含）以上的产品，或者由供应商1002制造的任何产品，而不管其价格 。 \n 此类问题的解决办法是 使用圆括号明确地分组相应的操作 。修改后如下： \n select prod_name, prod_price from products where (vend_id = 1002 or vend_id = 1003) and prod_price >= 10;\n \n 1 mysql> select prod_name, prod_price from products where (vend_id = 1002 or vend_id = 1003) and prod_price >= 10;\n+----------------+------------+\n| prod_name      | prod_price |\n+----------------+------------+\n| Detonator      |      13.00 |\n| Bird seed      |      10.00 |\n| Safe           |      50.00 |\n| TNT (5 sticks) |      10.00 |\n+----------------+------------+\n4 rows in set (0.00 sec)\n \n 1 2 3 4 5 6 7 8 9 10 \n 不要过分的依赖默认计算次序。使用圆括号没什么坏处，它能消除歧义。 \n IN操作符 \n 圆括号在 WHERE 子句中还有一种用法。 IN 操作符用来指定条件范围。 \n select prod_name, prod_price from products where vend_id in (1002, 1003) order by prod_name;\n \n 1 mysql> select prod_name, prod_price from products where vend_id in (1002, 1003) order by prod_name;\n+----------------+------------+\n| prod_name      | prod_price |\n+----------------+------------+\n| Bird seed      |      10.00 |\n| Carrots        |       2.50 |\n| Detonator      |      13.00 |\n| Fuses          |       3.42 |\n| Oil can        |       8.99 |\n| Safe           |      50.00 |\n| Sling          |       4.49 |\n| TNT (1 stick)  |       2.50 |\n| TNT (5 sticks) |      10.00 |\n+----------------+------------+\n9 rows in set (0.00 sec)\n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 IN 操作符完成与 OR 相同的功能。 \n IN 操作符的优点如下： \n \n 在使用长的合法选项清单时， IN 操作符的语法更加清洗且更直观。 \n 在使用 IN 操作符时，计算的次序更容易管理。 \n IN 操作符一般比 OR 操作符清单执行的更快。 \n IN 操作符最大优点是可以包含其他 SELECT 语句（子查询），使得能够更加动态地建立 WHERE 子句。 \n NOT操作符 \n WHERE子句中NOT操作符有且只有一个功能，那就是否定它之后所跟的任何条件。 \n select prod_name, prod_price from products where vend_id not in (1002, 1003) order by prod_name;\n \n 1 mysql> select prod_name, prod_price from products where vend_id not in (1002, 1003) order by prod_name;\n+--------------+------------+\n| prod_name    | prod_price |\n+--------------+------------+\n| .5 ton anvil |       5.99 |\n| 1 ton anvil  |       9.99 |\n| 2 ton anvil  |      14.99 |\n| JetPack 1000 |      35.00 |\n| JetPack 2000 |      55.00 |\n+--------------+------------+\n5 rows in set (0.01 sec)\n \n 1 2 3 4 5 6 7 8 9 10 11 #  第八章 用通配符进行过滤 \n LIKE操作符 \n \n 通配符：用来匹配值的一部分的特殊字符。实际是SQL的 WHERE 子句中有特殊含义的字符。 \n 搜索模式：由字面值、通配符或两者组合构成的搜索条件。 \n \n 为了在搜索子句中使用通配符，必须使用LIKE操作符。LIKE指示MYSQL后跟的是搜索模式利用通配符匹配而不是直接相等匹配进行比较。 \n \n \n \n Operator \n Condition \n Example \n \n \n \n \n = \n Case sensitive exact string comparison ( notice the single equals ) \n col_name  =  \"abc\" \n \n \n != or <> \n Case sensitive exact string inequality comparison \n col_name  !=  \"abcd\" \n \n \n LIKE \n Case insensitive exact string comparison \n col_name  LIKE  \"ABC\" \n \n \n NOT LIKE \n Case insensitive exact string inequality comparison \n col_name  NOT LIKE  \"ABCD\" \n \n \n % \n Used anywhere in a string to match a sequence of zero or more characters ( only with LIKE or NOT LIKE ) \n col_name  LIKE  \"%AT%\" (matches \"AT\", \"ATTIC\", \"CAT\" or even \"BATS\") \n \n \n _ \n Used anywhere in a string to match a single character ( only with LIKE or NOT LIKE ) \n col_name  LIKE  \"AN_\" (matches \"AND\", but not \"AN\") \n \n \n IN (…) \n String exists in a list \n col_name  IN  (\"A\", \"B\", \"C\") \n \n \n NOT IN (…) \n String does not exist in a list \n col_name  NOT IN  (\"D\", \"E\", \"F\") \n 百分号（&）通配符 \n 在搜索串中， % 表示 任何字符出现任意次数 。 \n select prod_id, prod_name from products where prod_name like 'jet%';\n \n 1 mysql> select prod_id, prod_name from products where prod_name like 'jet%';\n+---------+--------------+\n| prod_id | prod_name    |\n+---------+--------------+\n| JP1000  | JetPack 1000 |\n| JP2000  | JetPack 2000 |\n+---------+--------------+\n2 rows in set (0.00 sec)\n \n 1 2 3 4 5 6 7 8 \n 区分大小写：根据MySQL的配置方式，搜索可以是区分大小写的。如果区分大小写，'jet%'就不匹配 JetPack 1000。 \n select prod_id, prod_name from products where prod_name like binary 'Jet%'; 使用binary关键字设定where子句区分大小写。 \n \n 通配符可在搜索模式中任意位置使用，并且可以使用多个通配符。例如： \n select prod_id, prod_name from products where prod_name like '%anvil%';\n \n 1 \n 注意尾空格：尾空格可能会干扰通配符匹配。例如在保存anvil时，如果它后面有一个或多个空格，则搜索模式『LIKE '%anvil'』不会匹配他们。解决这个问题的一个简单的办法是在搜索模式最后附加一个%。一个更好的方法是利用函数去掉首尾的空格。 \n \n \n 注意NULL：虽然似乎通配符%可以匹配任何东西，但有一个例外，即NULL。即使『LIKE '%'』搜索模式也不能匹配NULL。 \n \n 重要的是要注意到，除了一个和多个字符外， % 还能匹配0个字符。 \n 下面的例子是找出所有以s开头以e结尾的结尾的所有产品： \n select prod_name from products where prod_name like 's%e';\n \n 1 #  下划线（_）通配符 \n 下划线的用途与%一样，但是下划线子匹配单个字符而不是多个字符。 \n select prod_name, prod_id from products where prod_name like '_ ton anvil';\n \n 1 mysql> select prod_name, prod_id from products where prod_name like '_ ton anvil';\n+-------------+---------+\n| prod_name   | prod_id |\n+-------------+---------+\n| 1 ton anvil | ANV02   |\n| 2 ton anvil | ANV03   |\n+-------------+---------+\n2 rows in set (0.00 sec)\n \n 1 2 3 4 5 6 7 8 与 % 能匹配0个字符不一样， _ 总是匹配1个字符 ，不能多也不能少。 \n 使用通配符的技巧 \n MySQL的通配符很有用，但是这种功能是有代价的：通配符搜索的处理一般要比前面讨论的其他搜索所花时间更长。因此： \n \n 不要过度使用通配符。 \n 在使用通配符时，除非有必要，否则不要把它们用在搜索模式的开始处。把通配符放在搜索模式的开始处，搜索起来是最慢的。 \n 注意通配符的位置。 \n 第九章 用正则表达式进行搜索 \n 基本字符匹配 \n 下面语句检索列prod_name保含文本1000的所有行： \n select prod_name from products where prod_name regexp '1000' order by prod_name;\n \n 1 mysql> select prod_name from products where prod_name regexp '1000' order by prod_name;\n+--------------+\n| prod_name    |\n+--------------+\n| JetPack 1000 |\n+--------------+\n1 row in set (0.00 sec)\n \n 1 2 3 4 5 6 7 关键字 REGEXP 告诉MySQL：其后面跟着的东西作为正则表达式处理。 \n LIKE和正则表达式区别 \n 在LIKE和REGEXP质检有一个重要的差别。请看一下两条语句： \n select prod_name from products where prod_name like '1000' order by prod_name;\n\nselect prod_name from products where prod_name regexp '1000' order by prod_name;\n \n 1 2 3 如果执行上述两条语句，会发现第一条语句不返回数据，而第二条返回一条数据。 \n 这是因为 LIKE 匹配整个列。如果被匹配的文本在列值中出现， LIKE 不会找到它，相应的行也不会被返回（除非使用通配符）。 \n 而 REGEXP 在列值内进行匹配，如果被匹配的文本在列值中出现， REGEXP 会找到它，相应的行会被返回。 \n 那REGEXP能不能用来匹配整个列，答案是肯定的，使用 ^ 和 $ 定位符即可。 \n 进行OR匹配 \n select prod_name from products where prod_name regexp '1000|2000' order by prod_name;\n \n 1 mysql> select prod_name from products where prod_name regexp '1000|2000' order by prod_name;\n+--------------+\n| prod_name    |\n+--------------+\n| JetPack 1000 |\n| JetPack 2000 |\n+--------------+\n2 rows in set (0.00 sec)\n \n 1 2 3 4 5 6 7 8 #  匹配几个字符之一 \n 如果你想匹配特定的字符，你可以指定一组用 [ 和 ] 括起来的字符来完成。 \n select prod_name from products where prod_name regexp '[123] Ton' order by prod_name;\n \n 1 mysql> select prod_name from products where prod_name regexp '[123] Ton' order by prod_name;\n+-------------+\n| prod_name   |\n+-------------+\n| 1 ton anvil |\n| 2 ton anvil |\n+-------------+\n2 rows in set (0.01 sec)\n \n 1 2 3 4 5 6 7 8 事实上，正则表达式[123] Ton 为 [1|2|3] Ton 的缩写，也可以使用后者。 \n \n '1 | 2 | 3 ton' 会被理解为1 或 2  或 3 ton。因此需要[]包裹。 \n \n 字符集合也可以被否定，[123] 匹配字符1、2或3，但是[^123]却匹配除这些字符之外的任何东西。 \n 匹配范围 \n 下面的集合将匹配数字0到9：[0123456789]，为了简化这种写法，可用 - 来定义范围：[0-9]; \n 范围不限于完整的集合，[1-3]和[6-9]也是合法的。范围也不一定只是数值的，[a-z]匹配任意字母字符。 \n select prod_name from products where prod_name regexp '[1-5] Ton' order by prod_name;\n \n 1 mysql> select prod_name from products where prod_name regexp '[1-5] Ton' order by prod_name;\n+--------------+\n| prod_name    |\n+--------------+\n| .5 ton anvil |\n| 1 ton anvil  |\n| 2 ton anvil  |\n+--------------+\n3 rows in set (0.00 sec)\n \n 1 2 3 4 5 6 7 8 9 #  匹配特殊字符 \n 如何找出保含 . 字符的值？为了匹配特殊字符，必须用 \\\\ 为前导。 \\\\- 表示查找 - ， \\\\. 表示查找 . 。 \n select vend_name from vendors where vend_name regexp '\\\\.' order by vend_name;\n \n 1 mysql> select vend_name from vendors where vend_name regexp '\\\\.' order by vend_name;\n+--------------+\n| vend_name    |\n+--------------+\n| Furball Inc. |\n+--------------+\n1 row in set (0.00 sec)\n \n 1 2 3 4 5 6 7 \n 匹配 \\ 字符本身：需要使用 \\\\\\ \n \n 多数正则表达式实现使用单个反斜杠转义特殊字符，以便能使用这些字符本身。但是MySQL要求两个反斜杠（MySQL自己解释一个，正则表达式库解释另一个）。 \n 匹配字符类 \n \n select vend_name from vendors where vend_name regexp '[[:upper:]]';\n//等价于\nselect vend_name from vendors where vend_name regexp '[A-Z]';\n \n 1 2 3 #  匹配多个实例 \n \n \n \n 元字符 \n 说明 \n \n \n \n \n * \n 0个或多个匹配 \n \n \n + \n 一个或多个匹配（等于{1,}） \n \n \n ? \n 0个或1个匹配（等于{0, 1}） \n \n \n {n} \n 指定数目的匹配 \n \n \n {n, } \n 不少于指定数目的匹配 \n \n \n {n, m} \n 匹配数目的范围（m不超过255） \n \n \n \n select prod_name from products where prod_name regexp '\\\\([0-9] sticks?\\\\)' order by prod_name;\n \n 1 mysql> select prod_name from products where prod_name regexp '\\\\([0-9] sticks?\\\\)' order by prod_name;\n+----------------+\n| prod_name      |\n+----------------+\n| TNT (1 stick)  |\n| TNT (5 sticks) |\n+----------------+\n2 rows in set (0.00 sec)\n \n 1 2 3 4 5 6 7 8 另外一个例子： \n select prod_name from products where prod_name regexp '[[:digit:]]{4}' order by prod_name;\n \n 1 mysql> select prod_name from products where prod_name regexp '[[:digit:]]{4}' order by prod_name;\n+--------------+\n| prod_name    |\n+--------------+\n| JetPack 1000 |\n| JetPack 2000 |\n+--------------+\n2 rows in set (0.00 sec)\n \n 1 2 3 4 5 6 7 8 上面的例子也可如此编写： \n select prod_name from products where prod_name regexp '[0-9][0-9][0-9][0-9]' order by prod_name;\n \n 1 #  定位符 \n 为了匹配特定位置的文本，可以使用下列定位符： \n \n \n \n 元字符 \n 说明 \n \n \n \n \n ^ \n 文本的开始 \n \n \n $ \n 文本的结尾 \n \n \n [[:<:]] \n 词的开始 \n \n \n [[:>:]] \n 词的结尾 \n \n \n \n 例如找出以一个数（包括小数点开始的数）开始的所有产品： \n select prod_name from products where prod_name regexp '^[[0-9]\\\\.]' order by prod_name;\n// 或\nselect prod_name from products where prod_name regexp '^[[:digit:]\\\\.]' order by prod_name;\n \n 1 2 3 mysql> select prod_name from products where prod_name regexp '^[[0-9]\\\\.]' order by prod_name;\n+--------------+\n| prod_name    |\n+--------------+\n| .5 ton anvil |\n| 1 ton anvil  |\n| 2 ton anvil  |\n+--------------+\n3 rows in set (0.00 sec)\n \n 1 2 3 4 5 6 7 8 9 \n ^ 的双重用途，在集合（用 [ 和 ] 定义）中，用它来否定该集合，否则，用来指串的开始处。 \n 简单的正则表达式测试 \n 可以在不实用数据库表的情况下用 select 来测试正则表达式。 REGEXP 检查总是返回0（没有匹配）或者1（匹配）。 \n 语法如下： \n select 'hello' regexp '[0-9]';\nselect 'hello' regexp '[a-z]{2,}';\n \n 1 2 mysql> select 'hello' regexp '[a-z]{2,}';\n+----------------------------+\n| 'hello' regexp '[a-z]{2,}' |\n+----------------------------+\n|                          1 |\n+----------------------------+\n1 row in set (0.00 sec)\n \n 1 2 3 4 5 6 7 #  第十章 创建计算字段 \n 拼接字段 \n \n 拼接：将值联结到一起构成单个值。 \n \n 可使用拼接函数 concat() 函数来拼接两个列。 \n select concat(vend_name, '(', vend_country ,')') from vendors order by vend_name;\n \n 1 mysql> select concat(vend_name, '(', vend_country ,')') from vendors order by vend_name;\n+-------------------------------------------+\n| concat(vend_name, '(', vend_country ,')') |\n+-------------------------------------------+\n| ACME(USA)                                 |\n| Anvils R Us(USA)                          |\n| Furball Inc.(USA)                         |\n| Jet Set(England)                          |\n| Jouets Et Ours(France)                    |\n| LT Supplies(USA)                          |\n+-------------------------------------------+\n6 rows in set (0.00 sec)\n \n 1 2 3 4 5 6 7 8 9 10 11 12 concat() 拼接串，即把多个串连接起来行成一个较长的串。 \n \n Trim函数： \n \n RTrim() 去掉串右边的空格 \n LTrim() 去掉串左边的空格 \n Trim() 去掉串左右两边的空格 \n 使用别名 \n 别名是一个字段或值的替换名，有时也称为导出列。别名用 AS 关键字赋予。 \n select concat(vend_name, '(', vend_country ,')') as vend_title from vendors order by vend_name;\n \n 1 mysql> select concat(vend_name, '(', vend_country ,')') as vend_title from vendors order by vend_name;\n+------------------------+\n| vend_title             |\n+------------------------+\n| ACME(USA)              |\n| Anvils R Us(USA)       |\n| Furball Inc.(USA)      |\n| Jet Set(England)       |\n| Jouets Et Ours(France) |\n| LT Supplies(USA)       |\n+------------------------+\n6 rows in set (0.00 sec)\n \n 1 2 3 4 5 6 7 8 9 10 11 12 #  执行算术计算 \n \n \n \n 操作符 \n 说明 \n \n \n \n \n + \n 加 \n \n \n - \n 减 \n \n \n * \n 乘 \n \n \n / \n 除 \n \n \n \n select prod_id,\n\t\t\t quantity,\n\t\t\t item_price,\n\t\t\t quantity * item_price as expanded_price\nfrom orderitems where order_num = 20005;\n \n 1 2 3 4 5 mysql> select prod_id, quantity, item_price, quantity * item_price as expanded_price from orderitems where order_num = 20005;\n+---------+----------+------------+----------------+\n| prod_id | quantity | item_price | expanded_price |\n+---------+----------+------------+----------------+\n| ANV01   |       10 |       5.99 |          59.90 |\n| ANV02   |        3 |       9.99 |          29.97 |\n| TNT2    |        5 |      10.00 |          50.00 |\n| FB      |        1 |      10.00 |          10.00 |\n+---------+----------+------------+----------------+\n4 rows in set (0.00 sec)\n \n 1 2 3 4 5 6 7 8 9 10 #  如何测试计算 \n SELECT 提供了测试和试验函数与计算的一个很好的办法。虽然 SELECT 通常用来从表中检索数据，但可以省略 FROM 子句以便简单的访问和处理表达式。 \n 例如: \n mysql> select 3*3;\n+-----+\n| 3*3 |\n+-----+\n|   9 |\n+-----+\n1 row in set (0.00 sec)\n\nmysql> select now();\n+---------------------+\n| now()               |\n+---------------------+\n| 2021-12-13 23:06:40 |\n+---------------------+\n1 row in set (0.00 sec)\n\nmysql> select trim(' 345 ');\n+---------------+\n| trim(' 345 ') |\n+---------------+\n| 345           |\n+---------------+\n1 row in set (0.00 sec)\n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 #  第十一章 使用数据处理函数 \n 常用的文本处理函数 \n \n \n \n 函数 \n 说明 \n \n \n \n \n left(str, num) \n 返回串左边num位字符 \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n",summary:"\n\n之前根据SQLBolt网站了解了SQL语句，整理了文章SQL入门学习。\n\n本次通过《MySQL必知必会》一书来更加深入且系统的学习下SQL语言。\n\n第一章 了解SQL\n\n概念\n\n数据库(database)：保存有组织的数据的容器。\n表(table)：某种特定类型数据的结构化清单。\n模式(scheme)：关于数据库和表的布局及特性信息。\n列(column)：表由列组成。所有表都是由一个或多个列组成的。\n数据类型(datatype)：所容许的数据的类型。每个表列都有相应的数据类型，它限制改列中存储的数据。\n行(row)：表中的一个记录。\n主键(primary key)：一列（或一组列），其值能 ...",id:"handbook",pid:"handbook",readingTime:{text:"19 min read",minutes:18.455,time:1107300,words:3691}},{title:"python学习手册",frontmatter:{title:"python学习手册",description:"本文主要记录在学习python时的笔记，阅读书籍为《Python编程从入门到实践》，持续更新。",languages:["python"],layout:"Life",permalink:"/handbooks/:slug",readingShow:"top"},regularPath:"/_handbook/python-hb.html",relativePath:"_handbook/python-hb.md",key:"v-4e3e81c4",path:"/handbooks/python-hb/",headers:[{level:2,title:"第二章 变量和简单数据类型",slug:"第二章-变量和简单数据类型"},{level:3,title:"变量",slug:"变量"},{level:3,title:"字符串",slug:"字符串"},{level:3,title:"使用方法修改字符串的大小写",slug:"使用方法修改字符串的大小写"},{level:3,title:"数",slug:"数"},{level:2,title:"第三章 列表简介",slug:"第三章-列表简介"},{level:3,title:"列表是什么",slug:"列表是什么"},{level:3,title:"组织列表",slug:"组织列表"},{level:2,title:"第四章 操作列表",slug:"第四章-操作列表"},{level:3,title:"遍历列表",slug:"遍历列表"},{level:3,title:"创建数字列表",slug:"创建数字列表"},{level:3,title:"切片",slug:"切片"},{level:3,title:"元组",slug:"元组"},{level:2,title:"第五章 if语句",slug:"第五章-if语句"},{level:3,title:"检查多个条件",slug:"检查多个条件"},{level:3,title:"if语句/if-else语句/if-elif-else语句",slug:"if语句-if-else语句-if-elif-else语句"},{level:3,title:"使用多个elif代码块",slug:"使用多个elif代码块"},{level:3,title:"省略else代码块",slug:"省略else代码块"},{level:3,title:"测试多个条件",slug:"测试多个条件"},{level:3,title:"if语句处理列表",slug:"if语句处理列表"},{level:3,title:"使用多个列表",slug:"使用多个列表"},{level:2,title:"第六章 字典",slug:"第六章-字典"},{level:3,title:"使用字典",slug:"使用字典"},{level:3,title:"使用get()方法来访问值",slug:"使用get-方法来访问值"},{level:3,title:"遍历字典",slug:"遍历字典"},{level:3,title:"嵌套",slug:"嵌套"},{level:3,title:"字典中存储列表",slug:"字典中存储列表"},{level:3,title:"字典中存储字典",slug:"字典中存储字典"},{level:2,title:"第七章 用户输入和while循环",slug:"第七章-用户输入和while循环"},{level:3,title:"函数input()的工作原理",slug:"函数input-的工作原理"},{level:3,title:"使用int()来获取数值输入",slug:"使用int-来获取数值输入"},{level:3,title:"while 循环",slug:"while-循环"},{level:3,title:"使用while循环处理列表和字典",slug:"使用while循环处理列表和字典"},{level:2,title:"第八章 函数",slug:"第八章-函数"},{level:3,title:"定义函数",slug:"定义函数"},{level:3,title:"传递参数",slug:"传递参数"},{level:3,title:"默认值",slug:"默认值"},{level:3,title:"返回值",slug:"返回值"},{level:3,title:"传递列表",slug:"传递列表"},{level:3,title:"传递任意数量的实参",slug:"传递任意数量的实参"},{level:3,title:"结合使用位置实参和任意数量实参",slug:"结合使用位置实参和任意数量实参"},{level:3,title:"使用任意数量的关键字实参",slug:"使用任意数量的关键字实参"},{level:3,title:"将函数存储在模块中",slug:"将函数存储在模块中"},{level:2,title:"第九章 类",slug:"第九章-类"},{level:3,title:"创建和使用类",slug:"创建和使用类"},{level:3,title:"使用类和实例",slug:"使用类和实例"},{level:3,title:"继承",slug:"继承"},{level:3,title:"导入类",slug:"导入类"},{level:2,title:"第十章 文件和异常",slug:"第十章-文件和异常"},{level:3,title:"从文件中读取数据",slug:"从文件中读取数据"},{level:3,title:"写入文件",slug:"写入文件"},{level:3,title:"异常",slug:"异常"},{level:3,title:"存储数据",slug:"存储数据"},{level:2,title:"第十一章 测试代码",slug:"第十一章-测试代码"},{level:3,title:"单元测试和测试用例",slug:"单元测试和测试用例"},{level:3,title:"测试类",slug:"测试类"},{level:2,title:"最后",slug:"最后"}],lastUpdated:"11/9/2021, 3:29:33 PM",content:" 第二章 变量和简单数据类型 \n 变量 \n 变量命名规则： \n \n 变量名只能包含字母、数字和下划线。变量名能以字母或下划线打头，但不能以数字打头。 \n 变量名 不 能包含空格，但可以使用下划线分割其中的单词。如 greeting_message 。 \n 不要将python关键字和函数名用作变量，如 print 。 \n \n \n 就目前而言，应该使用小写的python变量名。虽然大写字母不会导致错误，但是大写字母在变量名中有特殊含义，后面会提及。 \n \n message  =   'hello world' \n print ( message ) \n \n 1 2 #  字符串 \n 字符串就是一系列字符。在python中，用引号引起来的都是字符串，其中引号可以是单引号，也可以是双引号。 \n 使用方法修改字符串的大小写 \n \n String.title(): 以首字母大写的方式显示每个单词 \n String.upper(): 将字符串改为全部大写 \n String.lower(): 将字符串改为全部小写 \n 在字符串中使用变量 \n 要在字符串中插入变量的值，可在首引号前加上字母f，再将要插入的变量放在花括号内。这种字符串为 f字符串 。f是format的简写，因为python通过把花括号内的变量替换为其值来设置字符串的格式。 \n first_name  =   'ada' \nlast_name  =   'lovelace' \nfull_name  =   f' {  first_name  }   {  last_name  } ' \n print ( f'Hello,  {  full_name . title ( )   } ' ) \n \n 1 2 3 4 \n 注意, f字符串是python3.6引入的。在之前的版本中，需要使用 format() 方法。比如： full_name = '{} {}'.format(first_name, last_name) \n 增加空白 \n 在编程中，空白泛指任何任何非打印字符，比如空格，制表符和换行符。( \\t ,  \\n ) \n print ( 'Language: \\n\\tPython\\n\\tC\\n\\tJavaScript' ) \n \n 1 #  删除空白 \n \n String.rstrip() : 删除字符串末尾空白 \n String.lstrip() : 删除字符串开头的空白 \n String.srtip() : 删除字符串两边的空白 \n \n \n 补充： \n \n String.decode(encoding='UTF-8',errors='strict') 以 encoding 指定的编码格式解码 string，如果出错默认报一个 ValueError 的 异 常 ， 除非 errors 指 定 的 是 'ignore' 或 者'replace' \n String.encode(encoding='UTF-8',errors='strict') 以 encoding 指定的编码格式编码 string，如果出错默认报一个ValueError 的异常，除非 errors 指定的是'ignore'或者'replace' \n String.center(width) 返回一个原字符串居中,并使用空格填充至长度 width 的新字符串 \n 数 \n 在Python中，可对整数执行加( + )减( - )乘( * )除( / )运算。使用两个乘号表示乘方运算。 \n 将任意两个数相除时，结果总是浮点数，即便这两个数都是整数且能整除。 \n 在其他运算中，如果一个操作数是整数，另一个操作数时浮点数，结果也总是浮点数。 \n print ( 4   /   2 )   # 2.0 \n print ( 1   +   2.0 )   # 3.0 \n print ( 2   *   3 , 0 )   # 6.0 \n print ( 3.0   **   2 )   # 9.0 \n \n 1 2 3 4 书写很大的数时，可使用下划线将其中的数字分组，使其更加清晰易读： \n big_number  =  14_000_00000_0\n print ( big_number )   # 14000000000 \n \n 1 2 这是因为在存储这种数时，python会忽略其中的下划线。 \n 同时给多个变量赋值: \n x ,  y ,  z  =   0 ,   0 ,   0 \n \n 1 Python没有内置的常量类型，但python程序员会使用全大写来指出应将某个变量视为常量，其值应始终不变： \n MAX_CONNECTION  =   5000 \n \n 1 #  第三章 列表简介 \n 列表是什么 \n 列表 由一系列特定顺序排列的元素组成，元素之间可以没有任何关系。在Python中，用方括号( [] )表示列表，并用逗号分割其中的元素。 \n letters  =   [ 'a' ,   'b' ,   'c' ] \n print ( letters )   # ['a', 'b', 'c'] \n \n 1 2 #  访问/使用列表中的元素 \n 列表是有序集合，因此要访问列表中的任何元素，只要将该元素的位置（索引）告诉python即可。 \n letters  =   [ 'a' ,   'b' ,   'c' ] \n print ( letters [ 0 ] )   # a \n print ( letters [ 0 ] . upper ( ) )   # A \n print ( letters [ - 1 ] )   # c \n print ( letters [ - 2 ] )   # b \nmessage  =   f'The first letter is  {  letters [ 0 ]   } ' \n print ( message )   # The first letter is a \n \n 1 2 3 4 5 6 7 #  修改、添加和删除元素 \n students  =   [ 'Tom' ,   'jack' ,   'kevin' ,   'Eric' ] \n print ( students )   # ['Tom', 'jack', 'kevin', 'Eric'] \n修改 \nstudents [ 1 ]   =   'Eva' \n print ( students )   # ['Tom', 'Eva', 'kevin', 'Eric'] \n末尾添加元素 \nstudents . append ( 'Cat' ) \n print ( students )   # ['Tom', 'Eva', 'kevin', 'Eric', 'Cat'] \n插入元素 \nstudents . insert ( 1 ,   'snake' ) \n print ( students )   # ['Tom', 'snake', 'Eva', 'kevin', 'Eric', 'Cat'] \n删除元素：del语句删除 \n del  students [ 0 ] \n print ( students )   # ['snake', 'Eva', 'kevin', 'Eric', 'Cat'] \n删除元素：pop()方法删除末尾元素 \npopped_student  =  students . pop ( ) \n print ( popped_student )   # Cat \n print ( students )   # ['snake', 'Eva', 'kevin', 'Eric'] \npop弹出列表中任何位置的元素 \nsecond_student  =  students . pop ( 1 ) \n print ( f'The second student is  {  second_student  } ' ) \n print ( students )   # ['snake', 'kevin', 'Eric'] \n根据值删除元素 \nstudents . remove ( 'kevin' ) \n print ( students )   # ['snake', Eric'] \n\nfake_student  =   'snake' \nstudents . remove ( fake_student ) \n print ( f\" {  fake_student  }  isn't a student\" )   # snake isn't a student \n print ( students )   # ['Eric'] \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 \n 方法 remove() 只删除第一个指定的值。如果要删除的值可能在列表中出现多次，就需要循环来确保每个值都删除。 \n 组织列表 \n 列表排序 \n使用sort()方法对列表永久排序 \ncars  =   [ 'bmw' ,   'audi' ,   'toyota' ,   'subaru' ] \ncars . sort ( ) \n print ( cars )   #  ['audi', 'bmw', 'subaru', 'toyota'] \n相反的顺序排序 \ncars  =   [ 'bmw' ,   'audi' ,   'toyota' ,   'subaru' ] \ncars . sort ( reverse = True ) \n print ( cars )   #  ['toyota', 'subaru', 'bmw', 'audi'] \n使用函数sorted()对列表临时排序 \ncars  =   [ 'bmw' ,   'audi' ,   'toyota' ,   'subaru' ] \n print ( cars )   #  ['bmw', 'audi', 'toyota', 'subaru'] \n print ( sorted ( cars ) )   #  ['audi', 'bmw', 'subaru', 'toyota'] \n print ( cars )   # ['bmw', 'audi', 'toyota', 'subaru'] \n print ( sorted ( cars ,  reverse = True ) )   #  ['toyota', 'subaru', 'bmw', 'audi'] \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 #  反转列表元素 \n 反转列表排列顺序，可使用方法 reverse() \n cars  =   [ 'bmw' ,   'audi' ,   'toyota' ,   'subaru' ] \n print ( cars )   #  ['bmw', 'audi', 'toyota', 'subaru'] \n print ( cars . reverse ( ) )   #  ['subaru', 'toyota', 'audi', 'bmw'] \n \n 1 2 3 方法 reverse() 也是永久性修改列表元素的排列顺序，但可随时恢复到原来的排列顺序，只需要对列表再次调用 reverse() 方法即可。 \n 确定列表长度 \n len() 函数可获得列表长度。 \n cars  =   [ 'bmw' ,   'audi' ,   'toyota' ,   'subaru' ] \n print ( len ( cars ) )   #  4 \n \n 1 2 #  第四章 操作列表 \n 遍历列表 \n magicians  =   [ 'alice' ,   'david' ,   'carolina' ] \n for  magician  in  magicians : \n     print ( magician ) \n print ( 'That was a great magic show' ) \n输出为 \nalice\ndavid\ncarolina\nThat was a great magic show\n \n 1 2 3 4 5 6 7 8 9 10 \n 注意缩进& 不要遗忘冒号 \n 创建数字列表 \n range()函数 \n Python函数 range() 可以生成一系列数。比如： \n for  value  in   range ( 1 ,   5 ) : \n     print ( value ) \n输出结果为： \n 1 \n 2 \n 3 \n 4 \n \n 1 2 3 4 5 6 7 8 \n 左闭右开，很多语言都是这个样子。 \n 使用range()函数创建数字列表 \n 要创建数字列表，可使用函数 list() 将 range() 的结果直接转换为列表。 \n numbers  =   list ( range ( 1 ,   6 ) ) \n print ( numbers )   #  [1, 2, 3, 4, 5] \nrange() 指定一个参数 \nnumbers  =   list ( range ( 6 ) ) \n print ( numbers )   #  [0， 1, 2, 3, 4, 5] \nrange() 第三个参数指定步长 \nnumbers  =   list ( range ( 0 ,   6 ,   2 ) ) \n print ( numbers )   #  [0，2, 4] \n\n print ( list ( range ( 6 ,   2 ) ) )   #  [] \n \n 1 2 3 4 5 6 7 8 9 10 11 12 有几个专门用于处理数字列表的python函数： \n \n min(list)  找出数字列表中最小值 \n max(list)  找出数字列表中最大值 \n sum(list)  数字列表总和 \n 列表解析 \n 列表解析将for循环和创建新元素的代码合并到一行，并自动附加新元素。 \n列表解析 \nsquares  =   [ value  **   2   for  value  in   range ( 1 ,   11 ) ] \n print ( squares )   #  [1, 4, 9, 16, 25, 36, 49, 64, 81, 100] \n等价于 \nsquares  =   [ ] \n for  value  in   range ( 1 ,   11 ) : \n    squares . append ( value  **   2 ) \n print ( squares )   # [1, 4, 9, 16, 25, 36, 49, 64, 81, 100] \n \n 1 2 3 4 5 6 7 8 9 #  切片 \n 我们已经知道如何访问单个列表元素，以及处理列表的所有元素。除此之外，我们还可以处理列表部分，python称之为 切片 。 \n 要创建切片，可指定要使用的第一个元素和最后一个元素的索引。 \n players  =   [ 'charles' ,   'martina' ,   'michnel' ,   'florance' ,   'eli' ] \n\n print ( players [ 0 : 3 ] )    # ['charles', 'martina', 'michnel'] \n\n print ( players [ : 4 ] )    #  ['charles', 'martina', 'michnel', 'florance'] \n\n print ( players [ : 4 : 2 ] )    # ['charles', 'michnel'] \n\n print ( players [ 2 : ] )    # ['michnel', 'florance', 'eli'] \n\n print ( players [ - 3 : ] )    # ['michnel', 'florance', 'eli'] \n\n print ( players [ :   - 3 ] )    # ['charles', 'martina'] \n\n print ( players [ : ] )    # ['charles', 'martina', 'michnel', 'florance', 'eli'] \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 如果没有指定起始索引，python从列表开头开始提取；如果省略终止索引,切片终止于列表末尾。 \n 可在切片的方括号内指定第三个值，来告诉python在指定范围内每隔多少元素提取一个。 \n 遍历切片 & 复制列表 \n players  =   [ 'charles' ,   'martina' ,   'michnel' ,   'florance' ,   'eli' ] \n\n for  play  in  players [ : 3 ] : \n     print ( play . title ( ) ) \n输出： \nCharles\nMartina\nMichnel\n \n 1 2 3 4 5 6 7 8 9 复制列表 \n my_foods  =   [ 'pizza' ,   'falafel' ,   'carrot cake' ] \n\nfrineds_foods  =  my_foods [ : ]   #  深拷贝 \nother_friend  =  my_foods  #  浅拷贝 \n\n print ( 'my_foods:' ,  my_foods ) \n print ( 'frineds_foods:' ,  frineds_foods ) \n print ( 'other_friend:' ,  other_friend ) \n\nmy_foods . append ( 'ice cream' ) \nfrineds_foods . append ( 'cannoli' ) \nother_friend . append ( 'dumpling' ) \n\n print ( '-'   *   40 ) \n\n print ( 'my_foods:' ,  my_foods ) \n print ( 'frineds_foods:' ,  frineds_foods ) \n print ( 'other_friend:' ,  other_friend ) \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 输出为： \n my_foods :   [ 'pizza' ,   'falafel' ,   'carrot cake' ] \nfrineds_foods :   [ 'pizza' ,   'falafel' ,   'carrot cake' ] \nother_friend :   [ 'pizza' ,   'falafel' ,   'carrot cake' ] \n - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - \nmy_foods :   [ 'pizza' ,   'falafel' ,   'carrot cake' ,   'ice cream' ,   'dumpling' ] \nfrineds_foods :   [ 'pizza' ,   'falafel' ,   'carrot cake' ,   'cannoli' ] \nother_friend :   [ 'pizza' ,   'falafel' ,   'carrot cake' ,   'ice cream' ,   'dumpling' ] \n \n 1 2 3 4 5 6 7 #  元组 \n 列表非常适合用于存储在程序运行期间可能变化的数据集。列表是可以修该的。然而，有时候你需要创建一系列不可修改的元素， 元组 可以满足这种需求。 \n 定义元组 & 遍历元组 \n 元组看起来很像列表，但使用圆括号而非中括号来标识。定义元组后，就可以使用索引来访问其元素，就像访问列表一样。 \n dimensions  =   ( 200 ,   50 ) \n print ( dimensions [ 0 ] )    # 200 \n print ( dimensions [ 1 ] )    # 50 \ndimensions[0] = 300 #  会导致python报错 TypeError: 'tuple' object does not support item assignment \n \n 1 2 3 4 5 \n 严格来说，元组是由逗号标识的，圆括号只是让元组看起来更加整洁、更清晰。如果要定义只包含一个元素的元组，必须在这个元素的后面加上逗号：\n mt_t = (3,) \n \n 遍历元组： \n dimensions  =   ( 200 ,   50 ) \n\n for  dimension  in  dimensions : \n     print ( dimension ) \n \n 1 2 3 4 和遍历列表一样。 \n 修改元组变量 \n 虽然不能修改元组的元素，但是可以给存储元组的变量赋值。 \n dimensions  =   ( 100 ,   200 ) \n\ndimensions  =   ( 200 ,   400 ) \n \n 1 2 3 #  第五章 if语句 \n 检查多个条件 \n使用and检查多个条件 \nage_0  =   22 \nage_1  =   18 \n\nage_0  >=   21   and  age_1  >=   21   #  False \n\nage_1  =   22 \nage_0  >=   21   and  age_1  >=   21   #  True \n使用or检查多个条件 \nage_0  =   22 \nage_1  =   18 \n\nage_0  >=   21   or  age_1  >=   21   #  True \n\nage_0  =   18 \nage_0  >=   21   or  age_1  >=   21   #  False \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 检查特定值是否包含在列表中: \n list_1  =   [ 'mushroom' ,   'onions' ,   'pineapple' ] \n 'mushroom'   in  list_1  # True \n 'pepperoni'   in  list_1  # False  \n \n 1 2 3 检查特定值是否不包含在列表中: \n ban_users  =   [ 'andrew' ,   'carlion' ,   'david' ] \nuser  =   'marie' \n\n if  user  not   in  ban_users : \n     print ( f' { user . title ( ) } , you can post a response if you wash' ) \n \n 1 2 3 4 5 #  if语句/if-else语句/if-elif-else语句 \nif语句 \n\nage  =   19 \n if  age  >   18 : \n     print ( 'You are old enough to vote' ) \nif-else语句 \n\nage  =   19 \n if  age  >   18 : \n     print ( 'You are old enough to vote' ) \n else : \n     print ( 'Sorry, you are too young to vote' ) \nif-elif-else语句 \nage  =   12 \n if  age  <   4 : \n    price  =   0 \n elif  age  <   18 : \n    price  =   25 \n else : \n    price  =   40 \n\n print ( f'Your admission cost is $ { price } ' ) \nYour admission cost is $25 \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 #  使用多个elif代码块 \n age  =   68 \n if  age  <   4 : \n    price  =   0 \n elif  age  <   18 : \n    price  =   25 \n elif  age  <   65 : \n    price  =   40 \n else : \n    price  =   20 \n\n print ( f'Your admission cost is $ { price } ' ) \n \n 1 2 3 4 5 6 7 8 9 10 11 #  省略else代码块 \n python并不要求if-elif结构后面必须游else代码块。 \n age  =   68 \n if  age  <   4 : \n    price  =   0 \n elif  age  <   18 : \n    price  =   25 \n elif  age  <   65 : \n    price  =   40 \n elif  age  >=   65 : \n    price  =   20 \n\n print ( f'Your admission cost is $ { price } ' ) \n \n 1 2 3 4 5 6 7 8 9 10 11 #  测试多个条件 \n if-elif-else 结构功能强大，但是仅适合用于只有一个条件满足的情况：遇到通过了的测试后，python就跳过余下的测试。 \n 然而，有时候必须检查你关心的所有条件，在这种情况下，应使用一系列不包含elif和else代码块的简单if语句。在存在多个条件为True且需要在每个条件为True时都采取相应措施时，适合用这种方法。 \n request_topping  =   [ 'mushrooms' ,   'extra cheese' ] \n\n if   'mushrooms'   in  request_topping : \n     print ( 'Adding mushrooms' ) \n if   'pepperoni'   in  request_topping : \n     print ( 'Adding pepperoni' ) \n if   'extra cheese'   in  request_topping : \n     print ( 'Adding extra cheese' ) \n    \n print ( 'Finished !' ) \n \n 1 2 3 4 5 6 7 8 9 10 #  if语句处理列表 \n 检查特殊元素 \n request_topping  =   [ 'mushrooms' ,    'green peppers' ,   'extra cheese' ] \n\n for  value  in  request_topping : \n     if  value  ==   'green peppers' : \n         print ( 'Sorry, we are out of green peppers right now' ) \n     else : \n         print ( f'Adding  { value } ' ) \n\n print ( 'Finished !' ) \n \n 1 2 3 4 5 6 7 8 9 #  确定列表不是空的 \n request_topping  =   [ ] \n\n if  request_topping : \n     for  value  in  request_topping : \n         print ( f'Adding  { value } ' ) \n     print ( 'Finished !' ) \n else : \n     print ( 'Are you sure you want a plain pizza' ) \n \n 1 2 3 4 5 6 7 8 #  使用多个列表 \n avaliable_toppings  =   [ 'mushrooms' ,   'olives' ,   'green peppers' ,   'pepperoni' ,   'pineapple' ,   'extra cheese' ] \n\nrequest_toppings  =   [ 'mushrooms' ,   'french fries' ,   'extra cheese' ] \n\n for  request_topping  in  request_toppings : \n     if  request_topping  in  avaliable_toppings : \n         print ( f'Adding  { request_topping } ' ) \n     else : \n         print ( f\"Sorry, we don't have  { request_topping } \" ) \n\n print ( 'Finished !' ) \n \n 1 2 3 4 5 6 7 8 9 10 11 输出为： \n Adding mushrooms\nSorry, we don't have french fries\nAdding extra cheese\nFinished !\n \n 1 2 3 4 #  第六章 字典 \n 在python中， 字典 是一系列 键值对 。每个键都与一个值相关联,可以使用键来访问相关联的值。与键相关联的值可以是数、字符串、列表乃至字典。 \n 使用字典 \n获取字典中的值 \nalien_0  =   { \n     'color' :   'yellow' \n } \n print ( alien_0 [ 'color' ] )   # yellow \n添加键值对 \n\nalien_1  =   { } \n\nalien_1 [ 'x_pos' ]   =   20 \nalien_1 [ 'y_pos' ]   =   30 \n\n print ( alien_1 )   # {'x_pos': 20, 'y_pos': 30} \n修改字典中的值 \n\nalien_1 [ 'x_pos' ]   =   50 \n\n print ( alien_1 )   # {'x_pos': 50, 'y_pos': 30} \n删除键值对 \n使用del语句时，必须要指定字典明和要删除的键 \n del  alien_1 [ 'x_pos' ] \n\n print ( alien_1 )   # {'y_pos': 30} \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 #  使用get()方法来访问值 \n 使用放在方括号内的键从字典中获取相关联的值时，如果指定的键不存在就会出错。 \n favorite_language  =   { \n     'Tom' :   'c' \n } \n\n print ( favorite_language [ 'John' ] ) \n报错 \nTraceback (most recent call last): \n  File \"simple_message.py\", line 188, in <module> \n    print(favorite_language['John']) \nKeyError: 'John' \n\n \n 1 2 3 4 5 6 7 8 9 10 11 12 可以使用get()方法在指定的键不存在时返回一个默认值，从而避免这样的错误。 \n get()方法的第一个参数用于指定键，是必不可少的，第二个参数为指定的键不存在时要返回的值，是可选的。 \n favorite_language  =   { \n     'Tom' :   'c' \n } \n\nlanguage  =  favorite_language . get ( 'Tom' ,   'Python' ) \n print ( f'favorite language:  { language } ' )   #  favorite language: c \n\nlanguage  =  favorite_language . get ( 'John' ,   'Python' ) \n print ( f'favorite language:  { language } ' )   #  favorite language: Python \n \n 1 2 3 4 5 6 7 8 9 \n 调用get()方法时，如果没有指定第二个参数且指定的键不存在时，Python将返回 None 。 \n 遍历字典 \n favorite_language  =   { \n     'Tom' :   'c' , \n     'Eric' :   'Java' \n } \n\n print ( favorite_language . items ( ) ) \n print ( favorite_language . keys ( ) ) \n print ( favorite_language . values ( ) ) \n \n 1 2 3 4 5 6 7 8 输出为： \n dict_items([('Tom', 'c'), ('Eric', 'Java')])\ndict_keys(['Tom', 'Eric'])\ndict_values(['c', 'Java'])\n \n 1 2 3 因此我们可以遍历字典的所有键值对、所有键、所有值。 \n 首先是遍历 键值对 ： \n favorite_language  =   { \n     'Tom' :   'c' , \n     'Eric' :   'Java' \n } \n\n for  k ,  v  in  favorite_language . items ( ) : \n     print ( f'Key:  { k } ' ,  end = '\\t' ) \n     print ( f'Value:  { v } ' ) \n \n 1 2 3 4 5 6 7 8 然后时遍历字典中的 键 ： \n favorite_language  =   { \n     'Tom' :   'c' , \n     'Eric' :   'Java' \n } \n\n for  k  in  favorite_language . keys ( ) : \n     print ( f'Key:  { k } ' ) \n \n 1 2 3 4 5 6 7 遍历字典时，会默认遍历所有的键。因此上述代码中的： \n for  k  in  favorite_language . keys ( ) : \n \n 1 替换为： \n for  k  in  favorite_language : \n \n 1 输出将不变。 \n 按照特定顺序遍历字典中的所有键： \n \n 从 python3.7 起，遍历字典时将按照插入的顺序返回其中的元素。 \n \n 要以特定顺序返回元素，可以使用 sorted() 来获得按特定顺序排列的键列表的副本： \n favorite_language  =   { \n     'Tom' :   'c' , \n     'Eric' :   'Java' , \n     'Alice' :   'ruby' \n } \n\n for  name  in   sorted ( favorite_language . keys ( ) ) : \n     print ( name ,  favorite_language [ name ] ) \n\n print ( '*'   *   40 ) \n\n for  name  in   sorted ( favorite_language . keys ( ) ,  reverse = True ) : \n     print ( name ,  favorite_language [ name ] ) \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 输出为： \n Alice ruby\nEric Java\nTom c\n ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** \nTom c\nEric Java\nAlice ruby\n \n 1 2 3 4 5 6 7 然后时遍历字典中所有 值 ： \n favorite_language  =   { \n     'Tom' :   'c' , \n     'Eric' :   'Java' , \n     'Alice' :   'ruby' , \n     'phil' :   'ruby' \n } \n\n for  v  in  favorite_language . values ( ) : \n     print ( f'Value:  { v } ' ) \n \n 1 2 3 4 5 6 7 8 9 输出为： \n Value: c\nValue: Java\nValue: ruby\nValue: ruby\n \n 1 2 3 4 这种做法时提取字典中所有的值，没有考虑重复项。为了剔除重复项，可以使用 集合(set) 。集合中的每个元素都必须时独一无二的。 \n favorite_language  =   { \n     'Tom' :   'c' , \n     'Eric' :   'Java' , \n     'Alice' :   'ruby' , \n     'phil' :   'ruby' \n } \n\n for  v  in   set ( favorite_language . values ( ) ) : \n     print ( f'Value:  { v } ' ) \n \n 1 2 3 4 5 6 7 8 9 输出为： \n Value: Java\nValue: ruby\nValue: c\n \n 1 2 3 注意： \n 可以使用一对花括号直接创建 集合 ，并在其中用逗号分隔元素： \n languages  =   { 'c' ,   'java' ,   'ruby' ,   'java' } \n print ( languages )   #  {'c', 'ruby', 'java'} \n \n 1 2 集合和字典很容易混淆，因为它们都是用一对花括号定义的。当花括号内没有键值对时。定义的很可能是集合。 不同于列表和字典，集合不会以特定的顺序存储元素。 \n 嵌套 \n 字典列表 \n alien_0  =   { 'color' :   'green' ,   'point' :   5 } \nalien_1  =   { 'color' :   'green' ,   'point' :   6 } \nalien_2  =   { 'color' :   'green' ,   'point' :   7 } \n\naliens  =   [ alien_0 ,  alien_1 ,  alien_2 ] \n\n for  alien  in  aliens : \n     if  alien [ 'point' ]   ==   5 : \n        alien [ 'color' ]   =   'red' \n        alien [ 'point' ]   =   10 \n\n print ( aliens ) \n \n 1 2 3 4 5 6 7 8 9 10 11 12 #  字典中存储列表 \n pizza  =   { \n     'crust' :   'thick' , \n     'toppings' :   [ 'mushrooms' ,   'extra cheese' ] \n } \n\n for  topping  in  pizza [ 'toppings' ] : \n     print ( '\\t'   +  topping ) \n \n 1 2 3 4 5 6 7 #  字典中存储字典 \n users  =   { \n     'Tom' :   { \n         'first' :   'tom' , \n         'second' :   'twice' , \n         'location' :   'beijing' \n     } , \n     'john' :   { \n         'first' :   'john' , \n         'second' :   'eric' , \n         'location' :   'shandong' \n     } \n } \n\n for  username ,  user_info  in  users . items ( ) : \n     print ( f'\\nUsername:  { username } ' ) \n    full_name  =   f' { user_info [ \"first\" ] }   { user_info [ \"second\" ] } ' \n    location  =  user_info [ 'location' ] \n\n     print ( f'\\tFull name:  { full_name . title ( ) } ' ) \n     print ( f'\\tLocation:  { location . title ( ) } ' ) \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 #  第七章 用户输入和while循环 \n 函数input()的工作原理 \n 函数  input()  让程序暂停运行，等待用户输入一下文本，获取用户输入后，Python将其赋给一个变量，以方便使用。 \n message  =   input ( \"Tell me something, and I will repeat it back to you: \" ) \n print ( message ) \n \n 1 2 #  使用int()来获取数值输入 \n 使用函数  input()  时，Python将用户输入解读为字符串。 \n message  =   input ( \"Tell me something, and I will repeat it back to you: \" ) \n print ( message  >   18 ) \n \n 1 2 假如输入为数字20，但  input()  函数返回的是'21'，因此这样比较与数字18的大小就会报错： \n TypeError: '>' not supported between instances of 'str' and 'int'\n \n 1 为了解决这个问题，可以使用  int()  函数，将数的字符串表示转换为数值表示。 \n message  =   int ( input ( \"Tell me something, and I will repeat it back to you: \" ) ) \n print ( message  >   18 )   #  True \n \n 1 2 求模运算符（ % ）,它将两个数想除并返回余数。 \n 4   %   3   # 1 \n 5   %   3   # 2 \n 6   %   3   # 0 \n 7   %   3   # 1  \n \n 1 2 3 4 #  while 循环 \n for循环用于针对集合中的每个元素都执行一个代码块。而while循环则不断执行，直到指定的条件不满足为止。 \n current_num  =   0 \n while  current_num  <=   5 : \n     print ( current_num ) \n    current_num  +=   1 \n \n 1 2 3 4 让用户选择何时退出, 可以使用  while  循环让程序在用户愿意时不断执行： \n prompt  =   \"\\nTell me something, and I will repeat it back to you:\" \nprompt  +=   \"\\nEnter 'quit' to end the program.\" \nmessage  =   \"\" \n\n while  message  !=   \"quit\" : \n    message  =   input ( prompt ) \n     if  message  !=   \"quit\" : \n         print ( message ) \n \n 1 2 3 4 5 6 7 8 或者可以使用 标志(flag) : \n prompt  =   \"\\nTell me something, and I will repeat it back to you:\" \nprompt  +=   \"\\nEnter 'quit' to end the program.\" \n\nactive  =   True \n\n while  active : \n    message  =   input ( prompt ) \n     if  message  ==   \"quit\" : \n        active  =   False \n     else : \n         print ( message ) \n \n 1 2 3 4 5 6 7 8 9 10 11 #  break & continue \n 要立即退出while循环，不再运行循环中余下的代码，也不管条件测试的结果如何，可使用  break  语句。 \n prompt  =   \"\\nTell me something, and I will repeat it back to you:\" \nprompt  +=   \"\\nEnter 'quit' to end the program.\" \n\nactive  =   True \n\n while  active : \n    message  =   input ( prompt ) \n     if  message  ==   \"quit\" : \n         break \n     else : \n         print ( message ) \n \n 1 2 3 4 5 6 7 8 9 10 11 要返回循环开头，并根据条件测试结果决定是否继续执行循环，可使用  continue  语句，它不像  break  语句那样不再执行余下的代码并退出整个循环。 \n current  =   0 \n\n while  current  <=   10 : \n    current  +=   1 \n     if  current  %   2   !=   0 : \n         continue \n\n     print ( current ) \n \n 1 2 3 4 5 6 7 8 #  使用while循环处理列表和字典 \n for循环是一种遍历列表的有效方式，但不应该在for循环中修改列表，否则将导致Python难以跟踪其中的元素。要在遍历列表的同时对其进行修改，可以使用while循环。 \n在列表之间移动元素 \n\nunconfirmed_user  =   [ 'alice' ,   'brain' ,   'candace' ] \nconfirmed_user  =   [ ] \n\n while  unconfirmed_user : \n    current_user  =  unconfirmed_user . pop ( ) \n\n     print ( f'Verifying user:  { current_user . title ( ) } ' ) \n    confirmed_user . append ( current_user ) \n\n print ( '\\nThe following users have been confirmed:' ) \n for  user  in   reversed ( confirmed_user ) : \n     print ( user . title ( ) ) \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 输出为： \n Verifying user: Candace\nVerifying user: Brain\nVerifying user: Alice\n\nThe following users have been confirmed:\nAlice\nBrain\nCandace\n \n 1 2 3 4 5 6 7 8 # 删除为特定值的所有列表元素 \n\npets  =   [ 'dog' ,   'cat' ,   'dog' ,   'goldfish' ,   'cat' ,   'rabbit' ,   'cat' ] \n print ( pets ) \n\n while   'cat'   in  pets : \n    pets . remove ( 'cat' ) \n\n print ( pets ) \n \n 1 2 3 4 5 6 7 8 9 输出为： \n ['dog', 'cat', 'dog', 'goldfish', 'cat', 'rabbit', 'cat']\n['dog', 'dog', 'goldfish', 'rabbit']\n \n 1 2 # 使用用户输入填充字典 \n\nresponses  =   { } \n\npolling  =   True \n\n while  polling : \n    name  =   input ( \"\\nWhat is your name? \" ) \n    response  =   input ( \"Which mountain would you like to climb someday? \" ) \n\n    responses [ name ]   =  response\n\n    repeat  =   input ( \"Would you like to let another person respond? (yes/no) \" ) \n     if  repeat  ==   'no' : \n        polling  =   False \n\n print ( \"\\n--- Poll Results ---\" ) \n for  name ,  response  in  responses . items ( ) : \n     print ( f\" { name }  would like to climb  { response } .\" ) \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 输出为： \n What is your name? Tom\nWhich mountain would you like to climb someday? 泰山\nWould you like to let another person respond? (yes/no) yes\n\nWhat is your name? Jack\nWhich mountain would you like to climb someday? 华山\nWould you like to let another person respond? (yes/no) no\n\n--- Poll Results ---\nTom would like to climb 泰山.\nJack would like to climb 华山.\n \n 1 2 3 4 5 6 7 8 9 10 11 #  第八章 函数 \n 定义函数 \n def   greet ( user_name ) : \n     print ( f'hello,  { user_name . title ( ) } ' ) \n\n\ngreet ( 'jesse' ) \n \n 1 2 3 4 5 关键字  def  来定义函数，向Python指出了函数名，还会在圆括号内指出函数为完成任务需要什么样的信息，即使不需要信息也不可以省略，最后定义以冒号结尾。紧跟在  def greet():  后面的所有缩进行构成了函数体。 \n 函数定义中的变量称为 形参 ，函数调用中的变量称为 实参 。 \n 传递参数 \n 向函数传递实参的方式有很多：可使用 位置实参 ，这要求实参的顺序和形参的顺序相同；也可以使用 关键字实参 ，其中每个实参都由变量名和值组成；还可以使用列表和字典。 \n \n 位置实参 \n \n def   des_pet ( animal_type ,  pet_name ) : \n     print ( f'\\nI have a  { animal_type } ' ) \n     print ( f\"My  { animal_type } 's name is  { pet_name } \" ) \n\n\ndes_pet ( 'dog' ,   'Tom' ) \n \n 1 2 3 4 5 6 \n 关键字实参 \n \n def   des_pet ( animal_type ,  pet_name ) : \n     print ( f'\\nI have a  { animal_type } ' ) \n     print ( f\"My  { animal_type } 's name is  { pet_name } \" ) \n\n\ndes_pet ( pet_name = 'Tom' ,  animal_type = 'dog' ) \n \n 1 2 3 4 5 6 #  默认值 \n def   des_pet ( pet_name ,  animal_type = 'dog' ) : \n     print ( f'\\nI have a  { animal_type } ' ) \n     print ( f\"My  { animal_type } 's name is  { pet_name } \" ) \n\n\ndes_pet ( 'Tom' ) \ndes_pet ( pet_name = 'Tom' ,  animal_type = 'Cat' ) \ndes_pet ( 'Tom' ,   'Cat' ) \ndes_pet ( animal_type = 'CCC' ,  pet_name = 'Toom' ) \ndes_pet ( 'CCC' ,  animal_type = 'Toom' ) \n \n 1 2 3 4 5 6 7 8 9 10 #  返回值 \n 在函数中，可使用 return 语句将值返回调用函数的代码行。返回值能让程序将大部分繁重的工作移到函数中去完成，从而简化主程序。 \n \n 返回简单值 \n \n def   format_name ( first_name ,  last_name ,  middle_name = '' ) : \n     \"\"\"返回整洁的姓名\"\"\" \n     if  middle_name : \n        full_name  =   f' { first_name }   { middle_name }   { last_name } ' \n     else : \n        full_name  =   f' { first_name }   { last_name } ' \n     return  full_name . title ( ) \n\n\n print ( format_name ( 'john' ,   'tom' ) ) \n print ( format_name ( 'john' ,   'tom' ,   'Selina' ) ) \n print ( format_name . __doc__ ) \n \n 1 2 3 4 5 6 7 8 9 10 11 12 \n 返回字典 \n \n def   build_person ( first_name ,  last_name ,  age = None ) : \n     \"\"\"可将None视为占位值。在条件测试中。None相当于False\"\"\" \n    person  =   { 'first' :  first_name ,   'last' :  last_name } \n     if  age : \n        person [ 'age' ]   =  age\n     return  person\n\n\n print ( build_person ( \"tom\" ,   \"john\" ) ) \n print ( build_person ( \"tom\" ,   \"john\" ,   27 ) ) \n \n 1 2 3 4 5 6 7 8 9 10 #  传递列表 \n 向函数传递列表很有用，其中包括的可能是名字、数或更复杂的对象（如字典）。 \n def   print_model ( unprintdesign ,  printeddesign = [ ] ) : \n     \"\"\"\n    模拟打印每个设计，直到没有未打印的设计为止\n    :param unprintdesign:\n    :param printeddesign:\n    :return:\n    \"\"\" \n     while  unprintdesign : \n        current_design  =  unprintdesign . pop ( ) \n         print ( f'Printing Model is:  { current_design } ' ) \n        printeddesign . append ( current_design ) \n\n\n def   show_printed_model ( printeddesign ) : \n     \"\"\"\n    显示打印好的所有模型\n    :param printeddesign:\n    :return:\n    \"\"\" \n     print ( f'\\nThe following model have been printed:\\n' ) \n     for  design  in  printeddesign : \n         print ( design ) \n\n\nun_print_design  =   [ 'phone case' ,   'robot case' ,   'other case' ] \nprinted_design  =   [ ] \n\nprint_model ( un_print_design ,  printed_design ) \nshow_printed_model ( printed_design ) \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 #  传递任意数量的实参 \n 有时候，预先不知道函数需要接受多少个实参，好在Python允许函数从调用语句中收集任意数量的实参。 \n def   pizza ( * toppings ) : \n     print ( toppings ) \n    \n    \npizza ( 'a' ,   'b' ,   'c' )   # ('a', 'b', 'c') \n \n 1 2 3 4 5 形参名 *toppings 中的星号让Python创建一个名为 toppings 的空元组，并将收到的所有值都封装到这个元组中。 \n 结合使用位置实参和任意数量实参 \n 如果要让函数接受不同类型的实参，必须在函数定义中接纳任意数量实参的形参放在最后。Python先匹配位置实参和关键字实参，再将剩余的实参都收集到最后一个形参中。 \n def   pizza ( size ,   * toppings ) : \n     print ( f\"\\nMaking a  { size } -inch pizza with the following toppings:\" ) \n     for  topping  in  toppings : \n         print ( f\"-  { topping } \" ) \n\n\npizza ( 16 ,   'a' ,   'b' ,   'c' ) \n \n 1 2 3 4 5 6 7 #  使用任意数量的关键字实参 \n def   build_profile ( first ,  last ,   ** user_info ) : \n    user_info [ 'first_name' ]   =  first\n    user_info [ 'last_name' ]   =  last\n     return  user_info\n\n\nuser_profile  =  build_profile ( 'albert' ,   'einstein' ,  location = 'princton' ,  field = 'physics' ) \n print ( user_profile ) \n \n 1 2 3 4 5 6 7 8 形参名 **user_info 中的两个星号让Python创建一个名为 user_info 的空字典，并将收到的所有键值对都放到这个字典中。 \n 将函数存储在模块中 \n 我们可以将函数存储在称为 模块 的独立文件中，再将模块导入到主程序中。 \n \n 导入整个模块 \n \n 语法如下： \n \n import  module_name \n module_name.function_name() \n \n 创建 pizza.py 文件： \n def   make_pizza ( size ,   * toppings ) : \n     print ( f\"\\nMaking a  { size } -inch pizza with the following toppings:\" ) \n     for  topping  in  toppings : \n         print ( f\"-  { topping } \" ) \n \n 1 2 3 4 然后在同一目录创建一个名为 making_pizza.py 的文件。这个文件导入刚创建的模块，再调用make_pizza()两次： \n import  pizza\n\npizza . make_pizza ( 16 ,   'a' ,   'b' ,   'c' ) \npizza . make_pizza ( 12 ,   'a' ,   'b' ) \n \n 1 2 3 4 \n 导入特定的函数 \n \n 语法如下： \n \n from  module_name  import  function_name1, function_name2 \n \n 上面的例子可重写为： \n from  pizza  import  make_pizza\n\nmake_pizza ( 16 ,   'a' ,   'b' ,   'c' ) \nmake_pizza ( 12 ,   'a' ,   'b' ) \n \n 1 2 3 4 \n 使用as给函数指定别名 \n \n 语法如下： \n \n from  module_name  import  function_name  as  fn \n \n from  pizza  import  make_pizza  as  mp\n\nmp ( 16 ,   'a' ,   'b' ,   'c' ) \nmp ( 12 ,   'a' ,   'b' ) \n \n 1 2 3 4 \n 使用as给模块指定别名 \n \n 语法如下： \n \n import  module_name  as  mn \n \n import  pizza  as  p\n\np . make_pizza ( 16 ,   'a' ,   'b' ,   'c' ) \np . make_pizza ( 12 ,   'a' ,   'b' ) \n \n 1 2 3 4 \n 导入模块中所有函数 \n \n 语法如下： \n \n from  module_name  import * \n \n from  pizza  import   * \n\nmake_pizza ( 16 ,   'a' ,   'b' ,   'c' ) \nmake_pizza ( 12 ,   'a' ,   'b' ) \n \n 1 2 3 4 #  第九章 类 \n 创建和使用类 \n class   Dog : \n     def   __init__ ( self ,  name ,  age ) : \n        self . name  =  name\n        self . age  =  age\n\n     def   sit ( self ) : \n         print ( f\" { self . name }  is now sitting\" ) \n\n     def   roll_over ( self ) : \n         print ( f\" { self . name }  rolled over\" ) \n\n\nmy_dog  =  Dog ( \"Willine\" ,   3 ) \nyour_dog  =  Dog ( \"Frag\" ,   4 ) \nmy_dog . roll_over ( ) \nmy_dog . sit ( ) \n print ( f\"My dog's name is  { my_dog . name } ,  { my_dog . age }  years old\" ) \n print ( f\"Your dog's name is  { your_dog . name } ,  { your_dog . age }  years old\" ) \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 类中的函数称为 方法 。 __init__ 是一个特殊的方法，每当你根据 Dog 类创建新实例时，Python都会自动运行它。以 self 为前缀的变量可供类中的所有方法使用，可以供类的任何实例来访问。像这种可以通过实例来访问的变量称为 属性 。 \n \n __init__ 方法类似与JS类中 constructor 方法， self 相当于 this . \n 使用类和实例 \n 我们首先写一个表示汽车的类： \n class   Car : \n     def   __init__ ( self ,  make ,  model ,  year ) : \n        self . make  =  make\n        self . model  =  model\n        self . year  =  year\n\n     def   get_descriptive_name ( self ) : \n        long_name  =   f\" { self . year }   { self . make }   { self . model } \" \n         return  long_name\n \n 1 2 3 4 5 6 7 8 9 在创建实例时，有些属性无需通过形参来定义，可在 __init__ 方法中为其指定默认值。下面我们创建一个属性，并且其初始值为0；再创建一个方法来读取这个属性的值。 \n class Car:\n      def __init__(self, make, model, year):\n          self.make = make\n          self.model = model\n          self.year = year\n +        self.meter = 0\n \n      def get_descriptive_name(self):\n          long_name = f\"{self.year} {self.make} {self.model}\"\n          return long_name\n      \n +    def get_meter(self):\n +        print(f\"This car has {self.meter} miles on it\")\n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 #  修改属性值 \n \n 直接修改属性的值 \n \n 要修改属性的值最简单的方式是通过 实例 直接访问它。 \n my_new_car  =  Car ( 'audi' ,   'a4' ,   2019 ) \nmy_new_car . get_meter ( ) \nmy_new_car . meter  =   50 \nmy_new_car . get_meter ( ) \n \n 1 2 3 4 \n 通过方法修改属性的值 \n \n class   Car : \n   - - snip - - \n   def   update_meter ( self ,  meter ) : \n       if  meter  >  self . meter : \n          self . meter  =  meter\n       else : \n           print ( \"You can't roll back an meter\" ) \n          \n\nmy_new_car  =  Car ( 'audi' ,   'a4' ,   2019 ) \nlong_name  =  my_new_car . get_descriptive_name ( ) \n print ( long_name ) \nmy_new_car . get_meter ( ) \nmy_new_car . meter  =   50 \nmy_new_car . get_meter ( ) \n\n print ( '*'   *   40 ) \n\nmy_new_car . update_meter ( 80 ) \nmy_new_car . update_meter ( 30 ) \nmy_new_car . get_meter ( ) \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 输出为： \n 2019 audi a4\nThis car has 0 miles on it\nThis car has 50 miles on it\n****************************************\nYou can't roll back an meter\nThis car has 80 miles on it\n \n 1 2 3 4 5 6 \n 通过方法对属性的值进行递增 \n \n class Car:\n      def __init__(self, make, model, year):\n          self.make = make\n          self.model = model\n          self.year = year\n          self.meter = 0\n \n      def get_descriptive_name(self):\n          long_name = f\"{self.year} {self.make} {self.model}\"\n          return long_name\n \n      def get_meter(self):\n          print(f\"This car has {self.meter} miles on it\")\n \n      def update_meter(self, meter):\n          if meter > self.meter:\n              self.meter = meter\n          else:\n              print(\"You can't roll back an meter\")\n \n +    def increment_meter(self, miles):\n +        self.meter += miles\n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 #  继承 \n 编写类时，并非总要从空白开始，如果要编写的类是另一个现成类的特殊版本，可以使用 继承 。一个类 继承 另一个类时，将自动获得另一个类的所有属性和方法。原有的类称为 父类 ，而新类称为 子类 。 \n 在既有类的基础上编写新类时，通常要调用父类的方法 __init__() 。这将初始化在父类 __init__() 方法中定义的所有属性，从而让子类包含这些属性。 \n class   E_car ( Car ) : \n     def   __init__ ( self ,  make ,  model ,  year ) : \n         super ( ) . __init__ ( make ,  model ,  year ) \n\n\nmy_e_car  =  E_car ( 'tesla' ,   'model S' ,   2019 ) \nlong_name_e  =  my_e_car . get_descriptive_name ( ) \n print ( long_name_e )   # 2019 tesla model S \n \n 1 2 3 4 5 6 7 8 #  给子类定义属性和方法 \n class   E_car ( Car ) : \n     def   __init__ ( self ,  make ,  model ,  year ) : \n         super ( ) . __init__ ( make ,  model ,  year ) \n        self . battery  =   75 \n\n     def   get_bettery ( self ) : \n         print ( f\"This car has a  { self . battery } -kwh battery\" ) \n\n\nmy_e_car  =  E_car ( 'tesla' ,   'model S' ,   2019 ) \nlong_name_e  =  my_e_car . get_descriptive_name ( ) \n print ( long_name_e ) \nmy_e_car . get_bettery ( ) \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 输出为： \n 2019 tesla model S\nThis car has a 75-kwh battery\n \n 1 2 #  重写父类的方法 \n 可在子类中定义一个与要重写的父类方法同名的方法。这样Python将不会考虑这个父类方法，而只关注在子类中定义的相关方法。 \n class   E_car ( Car ) : \n     def   __init__ ( self ,  make ,  model ,  year ) : \n         super ( ) . __init__ ( make ,  model ,  year ) \n        self . battery  =   75 \n\n     def   get_bettery ( self ) : \n         print ( f\"This car has a  { self . battery } -kwh battery\" ) \n\n     def   get_descriptive_name ( self ) : \n        long_name  =   f\"e_car info:  { self . year }   { self . make }   { self . model } \" \n         return  long_name\n\n\nmy_e_car  =  E_car ( 'tesla' ,   'model S' ,   2019 ) \nlong_name_e  =  my_e_car . get_descriptive_name ( ) \n print ( long_name_e ) \nmy_e_car . get_bettery ( ) \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 输出为： \n e_car info: 2019 tesla model S\nThis car has a 75-kwh battery\n \n 1 2 #  将实例用作属性 \n 当给类添加的细节越多时，属性和方法清单及文件都越来越长。在这种情况下，可能需要将类的一部分提取出来，作为一个独立的类。可以将大型类拆分为多个协同工作的小型类。 \n class   E_car ( Car ) : \n     def   __init__ ( self ,  make ,  model ,  year ) : \n         super ( ) . __init__ ( make ,  model ,  year ) \n        self . battery  =  Battery ( ) \n\n     def   get_descriptive_name ( self ) : \n        long_name  =   f\"e_car info:  { self . year }   { self . make }   { self . model } \" \n         return  long_name\n\n\n class   Battery : \n     def   __init__ ( self ,  battery_size = 75 ) : \n        self . battery_size  =  battery_size\n\n     def   get_bettery ( self ) : \n         print ( f\"This car has a  { self . battery_size } -kwh battery\" ) \n\n\nmy_e_car  =  E_car ( 'tesla' ,   'model S' ,   2019 ) \nlong_name_e  =  my_e_car . get_descriptive_name ( ) \n print ( long_name_e ) \nmy_e_car . battery . get_bettery ( ) \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 输出为： \n e_car info: 2019 tesla model S\nThis car has a 75-kwh battery\n \n 1 2 #  导入类 \n 随着不断给类添加功能，文件可能会变的很长，即便稳妥的使用了继承亦是如此。为遵循Python的总体理念，应该让文件尽可能整洁。Python在这方面提供了帮助，允许将类储存在模块中，然后在主程序中导入所需的模块。 \n 导入单个类 \n 将Car类单独放在一个文件 car.py 模块中 \ncar.py \n class   Car : \n     def   __init__ ( self ,  make ,  model ,  year ) : \n        self . make  =  make\n        self . model  =  model\n        self . year  =  year\n        self . meter  =   0 \n\n     def   get_descriptive_name ( self ) : \n        long_name  =   f\" { self . year }   { self . make }   { self . model } \" \n         return  long_name\n\n     def   get_meter ( self ) : \n         print ( f\"This car has  { self . meter }  miles on it\" ) \n\n     def   update_meter ( self ,  meter ) : \n         if  meter  >  self . meter : \n            self . meter  =  meter\n         else : \n             print ( \"You can't roll back an meter\" ) \n\n     def   increment_meter ( self ,  miles ) : \n        self . meter  +=  miles\n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 然后在另外一个文件 my_car.py 中，在其中导入 Car 类并创建其实例： \nmy_car.py \n from  car  import  Car\n\nmy_new_car  =  Car ( 'audi' ,   'a4' ,   2019 ) \nlong_name  =  my_new_car . get_descriptive_name ( ) \n print ( long_name ) \nmy_new_car . get_meter ( ) \nmy_new_car . meter  =   50 \nmy_new_car . get_meter ( ) \n \n 1 2 3 4 5 6 7 8 9 输出为： \n 2019 audi a4\nThis car has 0 miles on it\nThis car has 50 miles on it\n \n 1 2 3 #  在一个模块中存储多个类、从一个模块中导入多个类 \n 把 E_car 类和 Battery 类都放到 car.py 中,然后在 my_car.py 中把这些类导入： \nmy_car.py \n from  car  import  Car ,  E_car\n\nmy_new_car  =  Car ( 'audi' ,   'a4' ,   2019 ) \nlong_name  =  my_new_car . get_descriptive_name ( ) \n print ( long_name ) \nmy_new_car . get_meter ( ) \nmy_new_car . meter  =   50 \nmy_new_car . get_meter ( ) \n\n print ( '*'   *   40 ) \n\nmy_new_car . update_meter ( 80 ) \nmy_new_car . update_meter ( 30 ) \nmy_new_car . get_meter ( ) \nmy_new_car . increment_meter ( 20 ) \nmy_new_car . get_meter ( ) \n\n print ( '+'   *   40 ) \n\nmy_e_car  =  E_car ( 'tesla' ,   'model S' ,   2019 ) \nlong_name_e  =  my_e_car . get_descriptive_name ( ) \n print ( long_name_e ) \nmy_e_car . battery . get_bettery ( ) \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 输出为： \n 2019 audi a4\nThis car has 0 miles on it\nThis car has 50 miles on it\n****************************************\nYou can't roll back an meter\nThis car has 80 miles on it\nThis car has 100 miles on it\n++++++++++++++++++++++++++++++++++++++++\ne_car info: 2019 tesla model S\nThis car has a 100-kwh battery\n \n 1 2 3 4 5 6 7 8 9 10 #  导入整个模块 \n import  car\n\nmy_new_car  =  car . Car ( 'audi' ,   'a4' ,   2019 ) \n\nmy_e_car  =  car . E_car ( 'tesla' ,   'model S' ,   2019 ) \n \n 1 2 3 4 5 #  导入模块中所有的类 \n 语法：from  module_name  import * \n \n 不推荐这种写法。 \n 在一个模块中导入另一个模块 \n 把 Battery 类单独放到 battery.py 文件，然后在 car.py 中引入（因为E_car类的battery属性是Battery类的实例）： \ncar.py \n from  battery  import  Battery\n\n class   Car : \n.... \n\n class   E_car ( Car ) : \n     def   __init__ ( self ,  make ,  model ,  year ) : \n         super ( ) . __init__ ( make ,  model ,  year ) \n        self . battery  =  Battery ( 100 ) \n\n     def   get_descriptive_name ( self ) : \n        long_name  =   f\"e_car info:  { self . year }   { self . make }   { self . model } \" \n         return  long_name\n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 #  使用别名 \n from  car  import  E_car  as  EC ,  Car\n \n 1 #  第十章 文件和异常 \n 从文件中读取数据 \n 新建一个文件 pi_digits.txt ,他包含精确到小数点后30位的圆周率值，且在小数点后10位处换行： \n 3.1415926535\n  8979323846\n  2463383297\n \n 1 2 3 下面的程序打开并读取这个文件，再将其显示在屏幕上： \n with   open ( 'pi_digits.txt' )   as  file_object : \n    contents  =  file_object . read ( ) \n\n print ( contents ) \n \n 1 2 3 4 函数 open() 返回一个表示文件的对象。在本例中， open('pi_digits.txt') 返回一个表示文件 pi_digits.txt 的对象，Python将该对象赋给 file_object 供以后使用。 \n 关键字 with 在不需要访问文件后将其关闭。在这程序中调用了 open() 方法，但是没有调用 close() 方法。也可以调用 open() 和 close() 方法，但这样做时，如果程序存在bug导致方法 close() 未执行，文件将不会关闭。未妥善关闭的文件可能会导致数据丢失。如果在程序执行过程中过早的调用 clsoe() 方法，会发现在需要使用文件时它已关闭，这会导致更多的错误。但是使用 with 可以让Python去确定：你只管打开文件，并在需要时使用它，Python自会在合适的时候自动将其关闭。 \n 然后使用 read() 方法读取这个文件的全部内容，并将其作为一个长长的字符串赋给变量 contents 。 \n 逐行读取 \n file_name  =   \"pi_digits.txt\" \n\n with   open ( file_name )   as  file_object_line : \n     for  line  in  file_object_line : \n         print ( line . rstrip ( ) ) \n \n 1 2 3 4 5 #  创建一个包含文件各行内容的列表 \n file_name  =   \"pi_digits.txt\" \n\n with   open ( file_name )   as  file_object_rline : \n    lines  =  file_object_rline . readlines ( ) \n\n print ( lines )   # ['3.1415926535\\n', '  8979323846\\n', '  2463383297'] \n\n for  line  in  lines : \n     print ( line . rstrip ( ) ) \n \n 1 2 3 4 5 6 7 8 9 #  使用文件内容 \n file_name  =   \"pi_digits.txt\" \n\n with   open ( file_name )   as  file_object_rline : \n    lines  =  file_object_rline . readlines ( ) \n\npi_string  =   '' \n\n for  line  in  lines : \n    pi_string  +=  line . strip ( ) \n\n print ( pi_string )   # 3.141592653589793238462463383297 \n print ( len ( pi_string ) )   # 32 \n \n 1 2 3 4 5 6 7 8 9 10 11 12 注意：读取文本文件时，Python将其中的所有文本都解读为字符串。如果读取的时数，并要将其作为数字使用，就必须使用函数 int() 将其转换为整数或使用函数 float() 将其转换为浮点数。 \n 写入文件 \n 写入空文件 \n 要将文本写入文件，在调用 open() 时需要提供另一个实参，告诉Python你要写入打开的文件。 \n file_name_w  =   'pi.txt' \n\n with   open ( file_name_w ,   'w' )   as  file_object_w : \n    file_object_w . write ( 'I love programming' ) \n \n 1 2 3 4 在本例中，调用 open() 时提供了两个实参。第一个仍然是要打开的文件名称。第二个实参('w')告诉Python，要以 写入模式 打开这个文件。如果要写入的文件不存在，函数 open() 会自动创建它。 \n \n 打开文件时，可指定读取模式('r')、写入模式('w')、附加模式('a')或读写模式('r+')。如果省略模式实参，Python将以默认的只读模式打开文件 \n \n \n Python只能将字符串写入文本文件，要将数值数据存储到文本文件中，必须先试用 str() 将其转换为字符串格式。 \n 写入多行&附加到文件 \n写入多行 \nfile_name_w  =   'pi.txt' \n\n with   open ( file_name_w ,   'w' )   as  file_object_w : \n    file_object_w . write ( 'I love programming\\n' ) \n    file_object_w . write ( 'I love programming too\\n' ) \n附加到文件 \n    \n with   open ( file_name_w ,   'a' )   as  file_object_a : \n    file_object_a . write ( 'I also love finding meaning in large dataset.\\n' ) \n    file_object_a . write ( 'I also love finding meaning in large dataset too.\\n' ) \n \n 1 2 3 4 5 6 7 8 9 10 11 12 此时 pi.txt 的内容为： \n I love programming\nI love programming too\nI also love finding meaning in large dataset.\nI also love finding meaning in large dataset too.\n\n \n 1 2 3 4 5 \n \n 使用python删除一个文件或文件夹 \n \n 使用python删除一个文件或文件夹，需要使用os模块。 \n import  os\nos . remove ( path )    # path是文件的路径，如果这个路径是一个文件夹，则会抛出OSError的错误，这时需用用rmdir()来删除 \nos . rmdir ( path )    # path是文件夹路径，注意文件夹需要时空的才能被删除 \nos . unlink ( 'F:\\新建文本文档.txt' )    # unlink的功能和remove一样是删除一个文件，但是删除一个删除一个正在使用的文件会报错。 \n \n 1 2 3 4 \n Python判断文件/目录是否存在 \n \n Python 操作文件时，我们一般要先判断指定的文件或目录是否存在，不然容易产生异常。 \n 例如我们可以使用  os  模块的  os.path.exists()  方法来检测文件是否存在： \n import  os . path\nos . path . isfile ( fname ) \n \n 1 2 如果你要确定他是文件还是目录，从 Python 3.4 开始可以使用 pathlib 模块提供的面向对象的方法 (Python 2.7 为 pathlib2 模块): \n from  pathlib  import  Path\n\nmy_file  =  Path ( \"/path/to/file\" ) \n if  my_file . is_file ( ) : \n指定的文件存在 \n \n 1 2 3 4 5 检测是否是一个目录 \n if  my_file . is_dir ( ) : \n指定的目录存在 \n \n 1 2 如果要检测路径是一个文件或目录可以使用 exists() 方法： \n if  my_file . exists ( ) : \n指定的文件或目录存在 \n \n 1 2 在 try 语句块中你可以使用 resolve() 方法来判断： \n try : \n    my_abs_path  =  my_file . resolve ( ) \n except  FileNotFoundError : \n不存在 \n else : \n存在 \n \n 1 2 3 4 5 6 \n 异常 \n Python使用称为 异常 的特殊对象来管理程序执行期间发生的错误。异常时使用 try-except 代码块处理的，即便出现异常，程序也将继续运行：显示你编写的友好的提示信息。 \n 例如： \n try : \n     print ( 5 / 0 ) \n except  ZeroDivisionError : \n     print ( 'You can not divide by zero' ) \n \n 1 2 3 4 \n 5/0 Python会抛出 ZeroDivisionError 错误对象。 \n \n 如果 try 代码块运行起来没有问题，Python将会跳过 except 代码块。 \n else代码块 \n 依赖 try 代码块成功执行的代码都应该放到else代码块中。 \n print ( 'Give me two number, and I will divede them' ) \n print ( 'Enter q to quit' ) \n\n while   True : \n    first_num  =   input ( '\\nFirst num: ' ) \n     if  first_num  ==   'q' : \n         break \n\n    second_num  =   input ( 'Second num: ' ) \n     if  second_num  ==   'q' : \n         break \n\n     try : \n        answer  =   int ( first_num )   /   int ( second_num ) \n     except  ZeroDivisionError : \n         print ( 'You can not divide by zero' ) \n     else : \n         print ( answer ) \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 #  处理FileNotFoundError异常 \n file_name  =   'alice.txt' \n try : \n     with   open ( file_name ,  encoding = 'utf-8' )   as  f : \n        content  =  f . read ( ) \n except  FileNotFoundError : \n     print ( 'File Not Found' ) \n \n 1 2 3 4 5 6 #  分析文本 \n 方法 split() 默认以空格为分隔符将字符串分拆为对个部分，并将这些部分存储到一个列表中。 \n 假如我们想分析一篇文章包含多少个单词，我们可以这么做： \n file_name  =   'pi.txt' \n try : \n     with   open ( file_name ,  encoding = 'utf-8' )   as  f : \n        content  =  f . read ( ) \n except  FileNotFoundError : \n     print ( 'File Not Found' ) \n else : \n     print ( f\"The file has about  { len ( content . split ( ) ) }  words\" ) \n \n 1 2 3 4 5 6 7 8 #  静默失败 \n Python有一个 pass 语句，可用于让Python在代码块中什么也不要做；此外 pass 语句还充当占位符，提醒你在程序中的某个地方什么都没做，并且以后也许要在这个地方做些什么。 \n file_name  =   'pi3.txt' \n try : \n     with   open ( file_name ,  encoding = 'utf-8' )   as  f : \n        content  =  f . read ( ) \n except  FileNotFoundError : \n     pass \n else : \n     print ( f\"The file has about  { len ( content . split ( ) ) }  words\" ) \n \n 1 2 3 4 5 6 7 8 #  存储数据 \n 模块 json 让你可以能够将简单的Python数据结构转储到文件中，并在程序再次运行时加载这些文件中的数据。 \n 使用 json.dump() 和 json.load() \n 我们来编写一个存储一组数的简单的程序，在编写一个将这些数读取到内存的程序。第一个程序将使用 json.dump() 来存储数据，而第二个程序将使 json.load() 。 \n import  json\nnumber  =   [ 1 ,   2 ,   3 ,   4 ,   5 ] \n\nfile_name  =   'number.json' \n\n with   open ( file_name ,   'w' ,  encoding = 'utf-8' )   as  f : \n    json . dump ( number ,  f ) \n\n with   open ( file_name ,  encoding = 'utf-8' )   as  f_r : \n    r_number  =  json . load ( f_r ) \n\n print ( r_number ) \n \n 1 2 3 4 5 6 7 8 9 10 11 12 #  保存和读取用户生成的数据 \n file_name  =   'username.json' \n\n try : \n     with   open ( file_name )   as  f : \n        username  =  json . load ( f ) \n except  FileNotFoundError : \n    username  =   input ( 'Input your name: ' ) \n     with   open ( file_name ,   'w' )   as  f_w : \n        json . dump ( username ,  f_w ) \n         print ( f'we will remember you when you basck,  { username } ' ) \n else : \n     print ( f'welcom back,  { username } ' ) \n \n 1 2 3 4 5 6 7 8 9 10 11 12 \n Python3中的json.dumps()出现\\uXXXX：json.dumps()将中文转换为unicode编码 \n 原因： \n \n Python 3 已经将unicode作为默认编码 \n Python 3中的json在做dumps()操作时，会将中文转换成unicode编码，并以16进制方式存储，再做loads()逆向操作时，会将unicode编码转换回中文，因此json.dumps操作后，得到的字符串是\\uXXXX \n \n 解决： \n \n json.dumps() 有一个ensure_ascii参数，当它为True的时候，所有非ASCII码字符显示为\\uXXXX序列。在dump时将ensure_ascii设置为False，此时存入json的中文可正常显示。 \n \n json . dumps ( dic ,  ensure_ascii = False ) \n \n 1 Python字典的json格式化处理（换行与不换行） \n Prefer  =   { \"jim\" :   { \"War\" :   1.9 ,   \"the big bang\" :   1.0 ,   \"The lord of wings\" :   4.0 ,   \"Beautiful America\" :   4.7 } ,   \"lily\" :   { \"War\" :   2.0 ,   \"Kongfu\" :   4.1 ,   \"The lord of wings\" :   3.6 } ,   \"tommy\" :   { \"War\" :   2.3 ,   \"Kongfu\" :   5.0 ,   \"The lord of wings\" :   3.0 } ,   \"jack\" :   { \"War\" :   2.8 ,   \"Kongfu\" :   5.5 ,   \"The lord of wings\" :   3.5 } } \n print ( '将字典一行显示不换行' ) \n print ( json . dumps ( Prefer ) ) \n\n print ( '将字典按照json样式可视化显示' ) \n print ( json . dumps ( Prefer , indent = 4 ) ) \n \n 1 2 3 4 5 6 \n 第十一章 测试代码 \n 在本章中将会学习如何使用Python模块  unittest 中的工具来测试代码。 \n 单元测试和测试用例 \n 单元测试 用于合核实函数的某个方面没有问题。 测试用例 是一组单元测试，他们一道核实函数在各种情况下的行为都符合要求。 \n 测试函数： \n //  get_format_name . py\n def   get_format_name ( first ,  last ) : \n    full_name  =   f\" { first }   { last } \" \n     return  full_name . title ( ) \n \n 1 2 3 4 测试用例： \n //  test_format_name . py\n import  unittest\n from  get_format_name  import  get_format_name\n\n\n class   NameTestCase ( unittest . TestCase ) : \n     def   test_first_last_name ( self ) : \n        format_name  =  get_format_name ( 'john' ,   'hans' ) \n        self . assertEqual ( format_name ,   'John Hans' ) \n\n\n if  __name__  ==   '__main__' : \n    unittest . main ( ) \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 首先导入模块 unittest 和要测试的函数  get_format_name 。然后创建了一个名为 NameTest 的类，用于包含一系列针对  get_format_name 的单元测试。这个类名可以随意命名，但这个类必须继承  unittest.TestCase 类，这样Python才知道如何运行你编写的测试。 \n NameTestCase 只包含一个方法，用于测试 get_fomat_name 的一个方面。将该方法命名为  test_first_last_name() 。运行 test_format_name.py 时， 所有以test开头的方法都会自动运行 。 \n assertEqual 是 unittest 类最有用的功能之一： 断言 方法。 \n 测试类 \n 前面是针对单个函数的测试，下面编写针对类的测试。 \n 常用的断言方法 \n \n \n \n 方法 \n 用途 \n \n \n \n \n assertEqual(a, b) \n 核实a == b \n \n \n assertNotEqual(a, b) \n 核实a != b \n \n \n assertTrue(x) \n 核实x为True \n \n \n assertFalse(x) \n 核实x为False \n \n \n assertIn(item, list) \n 核实item在list中 \n \n \n assertNotIn(item, list) \n 核实item不在list中 \n \n \n \n 一个要测试的类： \n class   AnonymousSurvey : \n     def   __init__ ( self ,  question ) : \n        self . question  =  question\n        self . response  =   [ ] \n\n     def   show_question ( self ) : \n         print ( self . question ) \n\n     def   store_response ( self ,  new_response ) : \n        self . response . append ( new_response ) \n\n     def   show_result ( self ) : \n         print ( \"Survey result:\" ) \n         for  response  in  self . response : \n             print ( f\"-  { response } \" ) \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 测试用例： \n import  unittest\n from  get_format_name  import  get_format_name ,  AnonymousSurvey\n\n\n class   NameTestCase ( unittest . TestCase ) : \n     def   test_first_last_name ( self ) : \n        format_name  =  get_format_name ( 'john' ,   'hans' ) \n        self . assertEqual ( format_name ,   'John Hans' ) \n\n     def   test_store_single_response ( self ) : \n        question  =   'How old are you?' \n        my_survey  =  AnonymousSurvey ( question ) \n        my_survey . store_response ( '20' ) \n        self . assertIn ( '20' ,  my_survey . response ) \n\n     def   test_store_three_response ( self ) : \n        question  =   'what language did you first learn to sprak?' \n        my_survey  =  AnonymousSurvey ( question ) \n        responses  =   [ 'English' ,   'Spanish' ,   'Mandarin' ] \n         for  response  in  responses : \n            my_survey . store_response ( response ) \n         for  response  in  responses : \n            self . assertIn ( response ,  my_survey . response ) \n\n\n if  __name__  ==   '__main__' : \n    unittest . main ( ) \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 #  setUp() \n 在前面的测试用例中，我们在每个测试方法中都创建了AnonymousSurvey实例，并且在每个方法中都创建了答案。unittest.TestCase类包含的方法 setUp() 让我们只需创建这些对象一次，就能在各个测试方法中使用。 \n 如果在TestCase类中包含 setUp() 方法，Python将先运行它，再运行各个以test_开头的方法。这样在你编写的每个测试方法中，都可以使用在方法 setUp() 中创建的对象。 \n import  unittest\n from  get_format_name  import  AnonymousSurvey\n\n\n class   NameTestCase ( unittest . TestCase ) : \n     def   setUp ( self )   - >   None : \n        question  =   'what language did you first learn to sprak?' \n        self . my_survey  =  AnonymousSurvey ( question ) \n        self . responses  =   [ 'English' ,   'Spanish' ,   'Mandarin' ] \n\n     def   test_store_single_response ( self ) : \n        self . my_survey . store_response ( self . responses [ 0 ] ) \n        self . assertIn ( self . responses [ 0 ] ,  self . my_survey . response ) \n\n     def   test_store_three_response ( self ) : \n         for  response  in  self . responses : \n            self . my_survey . store_response ( response ) \n\n         for  response  in  self . responses : \n            self . assertIn ( response ,  self . my_survey . response ) \n\n\n if  __name__  ==   '__main__' : \n    unittest . main ( ) \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 #  最后 \n Python基础的学习就先记录到这，下一步更多会用Python来写爬虫，并在此过程中发现问题，解决问题。 \n 发现的问题也会持续更新到这篇文章。 \n 关于爬虫的记录文章不会在此处记录。 \n",summary:"\n变量\n\n变量命名规则：\n变量名只能包含字母、数字和下划线。变量名能以字母或下划线打头，但不能以数字打头。\n变量名不能包含空格，但可以使用下划线分割其中的单词。如greeting_message。\n不要将python关键字和函数名用作变量，如print。\n\n>就目前而言，应该使用小写的python变量名。虽然大写字母不会导致错误，但是大写字母在变量名中有特殊含义，后面会提及。\n\nmessage = 'hello world'\nprint(message)\n\n字符串\n\n字符串就是一系列字符。在python中，用引号引起来的都是字符串，其中引号可以是单引号，也可以是双引号。\n\n使用方法修改字符串的 ...",id:"handbook",pid:"handbook",readingTime:{text:"22 min read",minutes:21.265,time:1275900,words:4253}},{title:"清明节于颐和园",frontmatter:{title:"清明节于颐和园",description:"清明节假期偷得半日闲，与孙二狗游颐和园。",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210516222419.jpeg",languages:["颐和园"],layout:"Life",permalink:"/lifes/:slug",readingShow:"top"},regularPath:"/_life/summerPlace.html",relativePath:"_life/summerPlace.md",key:"v-7cd52984",path:"/lifes/summerplace/",lastUpdated:"8/17/2021, 2:49:02 PM",content:" 清明节于颐和园 \n \n 一只小蜜蜂呀 飞在花丛中呀 左飞飞 右飞飞 🤔 \n 这日益精进的拍照技术 棒（我拍的） 😘 \n \n 石舫，取自海晏河清之意，北京颐和园石舫，又名清晏舫，位于昆明湖的西北部，万寿山的西麓岸边。在园林中建石舫不仅是为证明水是活的、可坐舟，为的正是在“舟自横”中，突出“野渡无人”的境界。 \n 我要说这是我本来就知道的... 嗯～～ 估计没人信 😂 \n \n 发现人上了年纪 就开始喜欢这些花花草草的 🤺 \n \n 远观佛香阁，佛香阁是北京市颐和园的主体建筑，建筑在万寿山前山高20米的方形台基上，南面昆明湖，背靠智慧海，以它为中心的各建筑群严整而对称地向两翼展开，形成众星拱月之势，气派相当宏伟。佛香阁高41米，8面3层4重檐，阁内有8根巨大铁梨木擎天柱，结构相当复杂，为古典建筑精品。 \n 划重点了啊：结构相当复杂，建筑精品。 💯 💯 \n \n 这个就是著名的 十七孔桥，我和孙二狗特无聊的数了好几遍 😆 \n 据说上面游544只形态各异的石狮子，这个也进行抽样验证。 😉 \n 桥额北面书“灵鼍偃月”，南面书“修蝀凌波”，蕴涵着深厚的文化底蕴。（对，这个是我查的） \n \n 呐 这个就是铜牛啦， 牛背上刻有乾隆手书《金牛铭》 \n 坐落在廓如亭北面的堤岸上，当年乾隆皇帝将其点缀于此是希望它能“永镇悠水”，长久地降服洪水，给园林及附近百姓带来无尽的祥福。 \n love & peace 🐶 \n",summary:"\n\n一只小蜜蜂呀 飞在花丛中呀 左飞飞 右飞飞 :thinking:\n\n这日益精进的拍照技术 棒（我拍的） :kissing_heart:\n\n石舫，取自海晏河清之意，北京颐和园石舫，又名清晏舫，位于昆明湖的西北部，万寿山的西麓岸边。在园林中建石舫不仅是为证明水是活的、可坐舟，为的正是在“舟自横”中，突出“野渡无人”的境界。\n\n我要说这是我本来就知道的... 嗯～～ 估计没人信 :joy:\n\n发现人上了年纪 就开始喜欢这些花花草草的 :person_fencing:\n\n远观佛香阁，佛香阁是北京市颐和园的主体建筑，建筑在万寿山前山高20米的方形台基上，南面昆明湖，背靠智慧海，以它为中心的各建筑群严 ...",id:"life",pid:"life",readingTime:{text:"1 min read",minutes:.21,time:12600,words:42}},{title:"官宣-我和孙二狗订婚啦",frontmatter:{title:"官宣-我和孙二狗订婚啦",description:"我们订婚了",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210922230720.jpeg",languages:["订婚"],layout:"Life",permalink:"/lifes/:slug",readingShow:"top"},regularPath:"/_life/promiseToMarry.html",relativePath:"_life/promiseToMarry.md",key:"v-c9654e38",path:"/lifes/promisetomarry/",lastUpdated:"9/22/2021, 3:18:24 PM",content:" 官宣 \n 在和孙二狗同志在一起四年零7天，也就是1468天后，我们在家人们的祝福下举办了订婚仪式。 \n \n 真的很开心 \n 后来看订婚仪式的视频，发现我确实挺呆的 \n 不管之后的路怎么样 我一定会和二狗子同学携手走下去 \n 努力生活 认真生活 积极生活 \n \n 此文为证 \n",summary:"\n\n在和孙二狗同志在一起四年零7天，也就是1468天后，我们在家人们的祝福下举办了订婚仪式。\n\n真的很开心\n\n后来看订婚仪式的视频，发现我确实挺呆的\n\n不管之后的路怎么样 我一定会和二狗子同学携手走下去\n\n努力生活 认真生活 积极生活\n\n此文为证 ...",id:"life",pid:"life",readingTime:{text:"1 min read",minutes:.065,time:3900.0000000000005,words:13}},{title:"云南团建之行",frontmatter:{title:"云南团建之行",description:"云南团建之行,用时3天（2021年4月16-2021年4月18），15日下午出发，16日凌晨到达昆明，休息一晚，坐大巴到大理，吃饭（菌汤火锅），然后欣赏洱海；17日到苍山、喜洲古镇、自驾游；18日下午回京。总结：充实、开心、哇咔咔～",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210420225036.jpeg",languages:["云南","大理-洱海","苍山"],layout:"Life",permalink:"/lifes/:slug",readingShow:"top"},regularPath:"/_life/yunnanBiu.html",relativePath:"_life/yunnanBiu.md",key:"v-62c73d44",path:"/lifes/yunnanbiu/",headers:[{level:2,title:"洱海",slug:"洱海"},{level:2,title:"喜州古镇",slug:"喜州古镇"},{level:2,title:"苍山",slug:"苍山"},{level:2,title:"自驾游",slug:"自驾游"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" 云南团建之行 \n 洱海 \n \n \n \n \n 拾来洱海月，上有乌云玷。 \n 黑白两分明，月云不相染。 \n 喜州古镇 \n 在这个地方买了鲜花饼、小狮子（学力up）、手工香薰 \n 苍山 \n \n 三塔矜高古，回思贞观年。 \n 苍山韵风月，奇石吐云烟。 \n 相在心胸外，凉生肘腋间。 \n 天功人力代，海外竞珍传。 \n 自驾游 \n \n \n",summary:"\n洱海\n\n拾来洱海月，上有乌云玷。\n\n黑白两分明，月云不相染。\n\n喜州古镇\n\n在这个地方买了鲜花饼、小狮子（学力up）、手工香薰\n\n苍山\n\n三塔矜高古，回思贞观年。\n\n苍山韵风月，奇石吐云烟。\n\n相在心胸外，凉生肘腋间。\n\n天功人力代，海外竞珍传。\n\n自驾游\n ...",id:"life",pid:"life",readingTime:{text:"1 min read",minutes:.125,time:7500,words:25}},{title:"关于linux丢失/root文件夹导致的-bash-4.1#(不显示路径)的解决办法",frontmatter:{title:"关于linux丢失/root文件夹导致的-bash-4.1#(不显示路径)的解决办法",date:"2018-04-13",author:"Yoha",tags:["Linux"],location:"Qingdao",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210420224048.jpeg",meta:[{name:"title",content:"关于linux丢失/root文件夹导致的-bash-4.1#(不显示路径)的解决办法"},{name:"description",content:"关于linux丢失/root文件夹导致的-bash-4.1#(不显示路径)的解决办法"},{name:"keywords",content:"linux, /root文件夹, -bash-4.1#"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2018-04-13-linux-bash.html",relativePath:"_posts/2018-04-13-linux-bash.md",key:"v-c616719c",path:"/2018/04/13/linux-bash/",headers:[{level:2,title:"参考文章",slug:"参考文章"}],lastUpdated:"8/26/2021, 12:52:26 PM",content:" 关于linux丢失/root文件夹导致的-bash-4.1#(不显示路径)的解决办法 \n \n 新建root目录 \n \n mkdir  /root\n \n 1 \n 重新从主默认文件拷贝配置信息到/root目录下 \n \n cp  /etc/skel/.bash_profile /root/\n cp  /etc/skel/.bashrc /root/\n \n 1 2 \n 注销后重新登录 \n \n logout \n su  - root\n \n 1 2 重新登录后应该就可以正常显示啦！ \n 参考文章 \n \n https://www.cnblogs.com/2lianzhang/p/8052312.html \n \n ",summary:"\n\n新建root目录\n\nmkdir /root\n重新从主默认文件拷贝配置信息到/root目录下\n\ncp /etc/skel/.bash_profile /root/\ncp /etc/skel/.bashrc /root/\n注销后重新登录\n\nlogout\nsu - root\n重新登录后应该就可以正常显示啦！\n\n参考文章\n\nhttps://www.cnblogs.com/2lianzhang/p/8052312.html\n ...",id:"post",pid:"post",readingTime:{text:"1 min read",minutes:.165,time:9900,words:33}},{title:"Ubuntu 18.04LTS系统设置窗口打不开或者消失解决办法",frontmatter:{title:"Ubuntu 18.04LTS系统设置窗口打不开或者消失解决办法",date:"2018-04-29",author:"Yoha",tags:["Ubuntu","Linux"],location:"Qingdao",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017234336.png",meta:[{name:"title",content:"Ubuntu 18.04LTS系统设置窗口打不开或者消失解决办法"},{name:"description",content:"Ubuntu 18.04LTS系统设置窗口打不开或者消失解决办法"},{name:"keywords",content:"Ubuntu, 系统设置"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2018-04-29-Ubuntu-setting.html",relativePath:"_posts/2018-04-29-Ubuntu-setting.md",key:"v-40342a7c",path:"/2018/04/29/ubuntu-setting/",headers:[{level:2,title:"系统设置打不开，请重新安装gnome-control-center",slug:"系统设置打不开-请重新安装gnome-control-center"},{level:2,title:"系統设置里只有很少的几个图标请重新安装unity-control-center",slug:"系統设置里只有很少的几个图标请重新安装unity-control-center"}],lastUpdated:"8/26/2021, 12:52:26 PM",content:" Ubuntu 18.04LTS系统设置窗口打不开或者消失解决办法 \n 系统设置打不开，请重新安装gnome-control-center \n 命令： sudo apt-get install gnome-control-center \n 系統设置里只有很少的几个图标请重新安装unity-control-center \n 命令： sudo apt-get install unity-control-center \n ",summary:"\n系统设置打不开，请重新安装gnome-control-center\n\n命令：sudo apt-get install gnome-control-center\n\n系統设置里只有很少的几个图标请重新安装unity-control-center\n\n命令：sudo apt-get install unity-control-center\n ...",id:"post",pid:"post",readingTime:{text:"1 min read",minutes:.085,time:5100.000000000001,words:17}},{title:"apt-get命令、dpkg命令、rpm命令和yum命令",frontmatter:{title:"apt-get命令、dpkg命令、rpm命令和yum命令",date:"2018-04-30",author:"Yoha",tags:["Ubuntu","Linux"],location:"Qingdao",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017234336.png",meta:[{name:"title",content:"apt-get命令、dpkg命令、rpm命令和yum命令"},{name:"description",content:"apt-get命令、dpkg命令、rpm命令和yum命令"},{name:"keywords",content:"apt-get, dpkg, rpm, yum"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2018-04-30-Ubuntu-apt&dpkg.html",relativePath:"_posts/2018-04-30-Ubuntu-apt&dpkg.md",key:"v-8bc15644",path:"/2018/04/30/ubuntu-apt-dpkg/",headers:[{level:2,title:"Debian系列",slug:"debian系列"},{level:3,title:"1. apt-get常用的命令",slug:"_1-apt-get常用的命令"},{level:3,title:"2. dpkg常用的命令",slug:"_2-dpkg常用的命令"},{level:2,title:"RedHat系列",slug:"redhat系列"},{level:3,title:"1. yum常用的命令",slug:"_1-yum常用的命令"},{level:3,title:"2. rpm常用的命令",slug:"_2-rpm常用的命令"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" apt-get命令、dpkg命令、rpm命令和yum命令 \n 一般来说著名的 Linux 系统基本上分两大类： \n \n RedHat 系列：Redhat、Centos、Fedora 等 \n Debian 系列：Debian、Ubuntu 等 \n Debian系列 \n 1. apt-get常用的命令 \n \n sudo apt-get update   更新源 \n sudo apt-get install  packageName   安装包 \n sudo apt-get remove  packageName    删除包 \n sudo apt-get remove  packageName  --pure    删除包,包括其配置信息 \n sudo apt-get install  packageName  --reinstall  重新安装包 \n sudo apt-get -f install   修复安装 \n sudo apt-get build-dep  packageName     安装相关编译环境 \n sudo apt-get upgrade  更新已安装的包 \n sudo apt-get source  ckageName  下载该包的源代码 \n sudo apt-cache show  packageName    获取包的相关信息，如说明、大小、版本等 \n sudo apt-cache search  packageName  搜索软件包 \n apt-cache depends  packageName  了解使用依赖 \n apt-cache rdepends  packageName     查看该包被哪些包依赖 \n sudo apt-get clean && sudo apt-get autoclean  清理无用的包(可以定期执行) \n 2. dpkg常用的命令 \n \n dpkg -i  xxx.deb    安装软件 \n dpkg -R   安装一个目录下的所有软件包 \n dpkg -r  xxx    删除软件包，但保留其配置 \n dpkg -P  xxx    删除软件包，包括其配置信息 \n dpkg -l   显示已经安装的软件列表（经常与管道符和grep一起用） \n dpkg -L  xxx    显示一个包安装到系统里面的文件目录信息 \n dpkg --help   显示帮助信息 \n dpkg --version    显示dpkg的版本号 \n RedHat系列 \n 1. yum常用的命令 \n \n yum list | grep  packageName  查询yum服务器是否有需要安装的软件 \n yum install  packageName  安装软件 \n yum update  packageName  升级软件包 \n yum check-update  packageName  检查是否有可用的更新rpm软件包 \n yum remove  packageName     删除指定的rpm软件包 \n yum search  packageName     查询rpm软件包 \n yum info  packageName  显示指定的rpm包的描述和概要信息 \n yum clean  option  清楚yum过期的缓存 \n yum shell 进入yum的shell提示符 \n yum resolvedep  packageName     显示rpm软件包的依赖关系 \n yum deplist  packageName    显示认rpm软件包的所有依赖关系 \n 2. rpm常用的命令 \n \n rpm -qa   查询以安装的rpm列表 \n rpm -qi  packageName   查询软件包的信息 \n rpm -ql  packageName  查询软件包中的所有文件 \n rpm -qf  文件全路径名   查询文件属于哪个软件包 \n rpm -e  packageName  卸载rpm包 \n rpm -e --nodeps  packageName    卸载rpm包，不管是否被依赖 \n rpm -ivh  packageName  安装rpm包 \n \n ",summary:"\n\n一般来说著名的 Linux 系统基本上分两大类：\n\nRedHat 系列：Redhat、Centos、Fedora 等\nDebian 系列：Debian、Ubuntu 等\n\nDebian系列\n\n1. apt-get常用的命令\n\nsudo apt-get update   更新源\nsudo apt-get install packageName  安装包\nsudo apt-get remove packageName   删除包\nsudo apt-get remove packageName --pure    删除包,包括其配置信息\nsudo apt-get install packageN ...",id:"post",pid:"post",readingTime:{text:"2 min read",minutes:1.215,time:72900,words:243}},{title:"Creating and triggering events",frontmatter:{title:"Creating and triggering events",date:"2018-08-28",author:"Yoha",tags:["前端开发","JavaScript"],location:"Qingdao",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210507211010.jpeg",meta:[{name:"title",content:"Creating and triggering events"},{name:"description",content:"Creating and triggering events"},{name:"keywords",content:"Creating and triggering events"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2018-08-28-custom-event.html",relativePath:"_posts/2018-08-28-custom-event.md",key:"v-02428510",path:"/2018/08/28/custom-event/",headers:[{level:2,title:"Creating custom events",slug:"creating-custom-events"},{level:2,title:"Adding custom data – CustomEvent()",slug:"adding-custom-data-customevent"},{level:2,title:"The old-fashioned way",slug:"the-old-fashioned-way"},{level:2,title:"Event bubbling",slug:"event-bubbling"},{level:2,title:"Creating and dispatching events dynamically",slug:"creating-and-dispatching-events-dynamically"},{level:2,title:"Triggering built-in events",slug:"triggering-built-in-events"},{level:2,title:"See also",slug:"see-also"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" Creating and triggering events \n This article demonstrates how to create and dispatch DOM events. Such events are commonly called  synthetic events , as opposed to the events fired by the browser itself. \n Creating custom events \n Events can be created with the  Event  constructor as follows: \n const  event  =   new   Event ( 'build' ) ; \n\n // Listen for the event. \nelem . addEventListener ( 'build' ,   function   ( e )   {   /* ... */   } ,   false ) ; \n\n // Dispatch the event. \nelem . dispatchEvent ( event ) ; \n \n 1 2 3 4 5 6 7 The above code example uses the  EventTarget.dispatchEvent()  method. \n This constructor is supported in most modern browsers (with Internet Explorer being the exception). For a more verbose approach (which works with Internet Explorer), see  the old-fashioned way  below. \n Adding custom data – CustomEvent() \n To add more data to the event object, the  CustomEvent  interface exists and the  detail  property can be used to pass custom data. \n For example, the event could be created as follows: \n const  event  =   new   CustomEvent ( 'build' ,   {  detail :  elem . dataset . time  } ) ; \n \n 1 This will then allow you to access the additional data in the event listener: \n function   eventHandler ( e )   { \n  console . log ( 'The time is: '   +  e . detail ) ; \n } \n \n 1 2 3 #  The old-fashioned way \n The older approach to creating events uses APIs inspired by Java. The following shows an example with  document.createEvent() : \n // Create the event. \n const  event  =  document . createEvent ( 'Event' ) ; \n\n // Define that the event name is 'build'. \nevent . initEvent ( 'build' ,   true ,   true ) ; \n\n // Listen for the event. \nelem . addEventListener ( 'build' ,   function   ( e )   { \n   // e.target matches elem \n } ,   false ) ; \n\n // target can be any Element or other EventTarget. \nelem . dispatchEvent ( event ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 #  Event bubbling \n It is often desirable to trigger an event from a child element, and have an ancestor catch it; optionally, with data: \n < form > \n   < textarea > </ textarea > \n </ form > \n \n 1 2 3 const  form  =  document . querySelector ( 'form' ) ; \n const  textarea  =  document . querySelector ( 'textarea' ) ; \n\n // Create a new event, allow bubbling, and provide any data you want to pass to the \"detail\" property \n const  eventAwesome  =   new   CustomEvent ( 'awesome' ,   { \n  bubbles :   true , \n  detail :   {   text :   ( )   =>  textarea . value  } \n } ) ; \n\n // The form element listens for the custom \"awesome\" event and then consoles the output of the passed text() method \nform . addEventListener ( 'awesome' ,   e   =>  console . log ( e . detail . text ( ) ) ) ; \n\n // As the user types, the textarea inside the form dispatches/triggers the event to fire, and uses itself as the starting point \ntextarea . addEventListener ( 'input' ,   e   =>  e . target . dispatchEvent ( eventAwesome ) ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 #  Creating and dispatching events dynamically \n Elements can listen for events that haven't been created yet: \n < form > \n   < textarea > </ textarea > \n </ form > \n \n 1 2 3 const  form  =  document . querySelector ( 'form' ) ; \n const  textarea  =  document . querySelector ( 'textarea' ) ; \n\nform . addEventListener ( 'awesome' ,   e   =>  console . log ( e . detail . text ( ) ) ) ; \n\ntextarea . addEventListener ( 'input' ,   function ( )   { \n   // Create and dispatch/trigger an event on the fly \n   // Note: Optionally, we've also leveraged the \"function expression\" (instead of the \"arrow function expression\") so \"this\" will represent the element \n   this . dispatchEvent ( new   CustomEvent ( 'awesome' ,   {  bubbles :   true ,  detail :   {   text :   ( )   =>  textarea . value  }   } ) ) \n } ) ; \n \n 1 2 3 4 5 6 7 8 9 10 #  Triggering built-in events \n This example demonstrates simulating a click (that is programmatically generating a click event) on a checkbox using DOM methods.  View the example in action . \n function   simulateClick ( )   { \n   var  evt  =  document . createEvent ( \"MouseEvents\" ) ; \n  evt . initMouseEvent ( \"click\" ,   true ,   true ,  window , \n     0 ,   0 ,   0 ,   0 ,   0 ,   false ,   false ,   false ,   false ,   0 ,   null ) ; \n   var  cb  =  document . getElementById ( \"checkbox\" ) ;  \n   var  canceled  =   ! cb . dispatchEvent ( evt ) ; \n   if ( canceled )   { \n     // A handler called preventDefault \n     alert ( \"canceled\" ) ; \n   }   else   { \n     // None of the handlers called preventDefault \n     alert ( \"not canceled\" ) ; \n   } \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 \n EventTarget.dispatchEvent(event)返回值：当该事件是可取消的(cancelable为true)并且至少一个该事件的事件处理方法调用了Event.preventDefault()，则返回值为false；否则返回true。 \n See also \n \n CustomEvent() \n document.createEvent() \n Event.initEvent() \n EventTarget.dispatchEvent() \n EventTarget.addEventListener() \n \n ",summary:"\n\nThis article demonstrates how to create and dispatch DOM events. Such events are commonly called synthetic events, as opposed to the events fired by the browser itself.\n\nCreating custom events\n\nEvents can be created with the Event constructor as follows:\n\nconst event = new Event('build');\n\n// List ...",id:"post",pid:"post",readingTime:{text:"3 min read",minutes:2.78,time:166799.99999999997,words:556}},{title:"Cookie、Session、WebStorage",frontmatter:{title:"Cookie、Session、WebStorage",date:"2018-10-10",author:"Yoha",tags:["前端开发","JavaScript"],location:"Qingdao",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210420223609.png",meta:[{name:"title",content:"Cookie、Session、WebStorage"},{name:"description",content:"Cookie、Session、WebStorage"},{name:"keywords",content:"Cookie, Session, WebStorage"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2018-10-10-Cookie.html",relativePath:"_posts/2018-10-10-Cookie.md",key:"v-b80300f0",path:"/2018/10/10/cookie/",headers:[{level:2,title:"Cookie",slug:"cookie"},{level:2,title:"Session",slug:"session"},{level:2,title:"LocalStorage",slug:"localstorage"},{level:2,title:"SessionStorage",slug:"sessionstorage"},{level:2,title:"总结",slug:"总结"},{level:2,title:"参考文章",slug:"参考文章"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" Cookie、Session、WebStorage \n Cookie \n \n cookie是一段由服务器发送给浏览器并保存到本地的一段数据（缓存），大小一般为4KB. \n cookie存储着用户的一些信息，在浏览器再次访问同一个URL时会将这段Cookie附加到HTTP请求中发送给服务端。因此，这会增加流量消耗。 \n Cookie一般在浏览器关闭（会话结束）时就被删除，但也可以通过Expire或Max-Age来设置过期时间。 \n 浏览器可以通过document.cookie读写Cookie,若要阻止此行为，可以在Set-Cookie头中添加HttpOnly标记。 \n Session \n Session的实质是存储在服务器里的一小块内存，一般来说是基于Cookie实现的。实现过程如下： \n /*\n服务器端\n1.当第一次使用Session时，服务器要创建一个sessionID来作为session中存放用户信息的唯一标识\n*/ \n let  session  =   { } ; \n let  sessionID  =  Math . random ( ) . toString ( ) . slice ( 2 ) ; / 假设为  '1234567890' \nsession [ sessionID ]   =  userInfo ; \n /*2.服务器端通过Cookie给用户返回一个sessionID*/ \nresponse . setHeader ( 'Set-Cookie' , sessionID ) ; \n \n 1 2 3 4 5 6 7 8 9 /* 客户端发送的请求 */ \n /* 3. 当用户访问同一个 URL 时，向服务器发送这个内容为其 SessionID 的 Cookie 头 */ \nRequest Header\n HTTP / 1.1   200   OK \nContent - Type : text / html\nContent - Length : 580 \nCookie : 1234567890 \n ... \n \n 1 2 3 4 5 6 7 8 /* 服务器端 */ \n /* 4. 服务器读取 Cookie 中的 SessionID ，\n *    然后去 Session 中读取对应的内存，最终得到用户信息。\n */ \n if ( request . headers . cookie ) \n { \n let  sessionID  =  request . headers . cookie\n let  userInfo  =  session [ sessionID ] \n // 读取用户信息 \n } \n \n 1 2 3 4 5 6 7 8 9 10 值得一提的是， SessionID 是随机生成的。 \n LocalStorage \n window.localStorage 是HTML5新增的一个API，它遵循同源政策，属于本地存储。它有以下特点： \n \n 大小一般为 5MB ，永久有效； \n 本地存储和读取，不会被附加到 HTTP 请求中。 \n \n window.localStorage的使用如下例所示： \n // 保存数据到 LocalStorage \nlocalStorage . setItem ( 'key' ,   'value' )             // {\"key\": \"value\"} \n // 从 LocalStorage 获取数据 \n let  key  =  localStorage . getItem ( 'key' )            // \"value\" \n // 从 LocalStorage 删除保存的数据 \nlocalStorage . removeItem ( 'key' )                   // {} \n // 从 LocalStorage 删除所有保存的数据 \nsessionStorage . clear ( ) ; \n \n 1 2 3 4 5 6 7 8 #  SessionStorage \n window.sessionStorage同样也遵循同源政策，它与 window.localStorage不同的是，它在页面或浏览器关闭（会话结束）时就会被清除。 window.sessionStorage的使用如下例所示： \n // 保存数据到 SessionStorage \nsessionStorage . setItem ( 'key' ,   'value' ) \n // 从 SessionStorage 获取数据 \n var  data  =  sessionStorage . getItem ( 'key' ) \n // 从 SessionStorage 删除保存的数据 \nsessionStorage . removeItem ( 'key' ) \n // 从 SessionStorage 删除所有保存的数据 \nsessionStorage . clear ( ) \n \n 1 2 3 4 5 6 7 8 #  总结 \n 四者之间的比较如下： \n \n \n Cookie & Session \n Cookie 保存在客户端的硬盘里，是浏览器缓存之一；而 Session 是保存在服务端的内存里，是一块内存。 \n Cookie 每次都随着 HTTP 请求发送给服务器；而 Session 只需要通过发送保存在 Cookie 头中的 SessionID 即可从服务器中读取对应内存。 \n Cookie 以明文的形式存储，内容可以被用户查看或篡改；而 Session 因为只提供一个随机的 SessionID ，所以无法被用户直接查看。 \n \n \n Cookie & LocalStorage \n Cookie 的大小一般为 4KB ；而 LocalStorage 一般为 5MB 。 \n Cookie 一般在浏览器关闭（会话结束）时就失效，后端可以设置 Expires 或 Max-Age 来改变 Cookie 的过期时间；而 LocalStorage 是永久有效，除非用户手动清除。 \n Cookie 会被附加到 HTTP 请求中；而 LocalStorage 不会。 \n \n \n LocalStorage & SessionStorage \n 前者永久有效，除非用户删除；后者在浏览器关闭（会话结束）后就被清空。 \n 参考文章 \n \n Cookie, Session 和 WebStorage \n HTTP 牌的 Cookie \n \n ",summary:"\nCookie\n\ncookie是一段由服务器发送给浏览器并保存到本地的一段数据（缓存），大小一般为4KB.\ncookie存储着用户的一些信息，在浏览器再次访问同一个URL时会将这段Cookie附加到HTTP请求中发送给服务端。因此，这会增加流量消耗。\nCookie一般在浏览器关闭（会话结束）时就被删除，但也可以通过Expire或Max-Age来设置过期时间。\n浏览器可以通过document.cookie读写Cookie,若要阻止此行为，可以在Set-Cookie头中添加HttpOnly标记。\n\nSession\nSession的实质是存储在服务器里的一小块内存，一般来说是基于Cookie实现的。 ...",id:"post",pid:"post",readingTime:{text:"2 min read",minutes:1.285,time:77100,words:257}},{title:"Xshell无法连接到Linux虚拟机",frontmatter:{title:"Xshell无法连接到Linux虚拟机",date:"2018-10-21",author:"Yoha",tags:["Linux","Xshell"],location:"Qingdao",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210420224048.jpeg",meta:[{name:"title",content:"Xshell无法连接到Linux虚拟机"},{name:"description",content:"Xshell无法连接到Linux虚拟机"},{name:"keywords",content:"Xshell, Linux虚拟机"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2018-10-21-Xshell.html",relativePath:"_posts/2018-10-21-Xshell.md",key:"v-44fe3bc0",path:"/2018/10/21/xshell/",headers:[{level:2,title:"虚拟机网络连接方式选择NAT",slug:"虚拟机网络连接方式选择nat"},{level:2,title:"关闭liunx防火墙",slug:"关闭liunx防火墙"},{level:2,title:"关闭windows防火墙",slug:"关闭windows防火墙"},{level:2,title:"查看虚拟机IP",slug:"查看虚拟机ip"},{level:2,title:"参考文章",slug:"参考文章"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" Xshell无法连接到Linux虚拟机 \n 今天用Xshell连接Linux虚拟机时，连接失败（检测了sshd服务是打开的）。不知道为啥。于是就用虚拟机ping了主机，没问题，可以ping通，但是呢，用主机ping虚拟机，不好使。于是在网上找了找，找到了答案。 \n 原文地址： linux虚拟机能ping通windows主机，windows主机ping不通linux虚拟机的解决办法 \n 下面的我根据个人情况有一点修改。 \n 虚拟机网络连接方式选择NAT \n 关闭liunx防火墙 \n 关闭防火墙的命令： \n service  iptables stop\n \n 1 确定是否关闭： service iptables status \n 关闭windows防火墙 \n \n 可自行百度 \n 查看虚拟机IP \n 在linux使用ifconfig查看ip，如图可看出ip是192.168.19.130 \n \n 在windows主机的网络设置中选择VMNet8 \n \n ——>右键——>属性——>TCP/Ipv4——>IP地址输入192.168.19.1（这个是根据虚拟机192.168.19.130来的），子网掩码输入255.255.255.0，其他空 \n \n 再互相ping试试，应该就可以了 \n 主机ping虚拟机： \n \n 虚拟机ping主机 \n \n 然后连接Xshell，ok啦。 \n 参考文章 \n \n linux虚拟机能ping通windows主机，windows主机ping不通linux虚拟机的解决办法 \n \n ",summary:"\n\n今天用Xshell连接Linux虚拟机时，连接失败（检测了sshd服务是打开的）。不知道为啥。于是就用虚拟机ping了主机，没问题，可以ping通，但是呢，用主机ping虚拟机，不好使。于是在网上找了找，找到了答案。\n\n原文地址：linux虚拟机能ping通windows主机，windows主机ping不通linux虚拟机的解决办法\n\n下面的我根据个人情况有一点修改。\n\n虚拟机网络连接方式选择NAT\n\n关闭liunx防火墙\n\n关闭防火墙的命令：\n\nservice iptables stop\n\n确定是否关闭：service iptables status\n\n关闭windows防火墙\n\n>可自 ...",id:"post",pid:"post",readingTime:{text:"1 min read",minutes:.215,time:12900,words:43}},{title:"Shell value too great for base",frontmatter:{title:"Shell value too great for base",date:"2018-12-09",author:"Yoha",tags:["shell","Linux"],location:"Qingdao",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017234007.jpg",meta:[{name:"title",content:"Shell value too great for base"},{name:"description",content:"Shell value too great for base"},{name:"keywords",content:"shell, value too great for base"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2018-12-09-Shell-value-too-great-for-base.html",relativePath:"_posts/2018-12-09-Shell-value-too-great-for-base.md",key:"v-6f6493d2",path:"/2018/12/09/shell-value-too-great-for-base/",lastUpdated:"8/26/2021, 12:52:26 PM",content:' Shell: value too great for base \n 记录一下《鸟叔的linux私房菜(第三版)》第13章P399“编写一个shell脚本计算还有几天过生日”遇到的问题。 \n #!/bin/bash \n echo   "I will caculate..." \n read  -p  "Please input you birthday(YYYYMMDD, ex>19940910):"  birthday\ndate2  =   ` echo  $birthday  |   grep   "[0-9\\{8\\}]" ` \n if   [ "date2"   ==   "" ] ;   then \n     echo   "please input correct date format"   &&   exit   0 \n fi \n declare  -i date_birth_md  =   10 #`date --date="$date2" +%m%d` \n #上面这一句最开始是没有 ‘10#’ 的, 但是在输入为19940910时就报错了， \n #因为date --date="$date2" +%m%d变成了0910, 而0x对于shell来说会被解析为8进制，09超过了8进制的表示范围，所以报错Shell: value too great for base。 \n declare  -i date_now_year  =   ` date  +%Y ` \n declare  -i date_m  =   10 #`date -- date="$date2" +%m` \n if   [ " $date_m "  -ge  "10" ] ;   then \n     declare  -i date_birth_now  =   ${date_now_year} ${date_birth_md} \n else \n     declare  -i date_birth_now  =   ${date_now_year} "0" ${date_birth_md} \n fi \n declare  -i date_now_second  =   ` date  +%s ` \n declare  -i date_birth_now_second  =   ` date  --date = " $date_birth_now "  +%s ` \n declare  -i date_cal_second  =  $ [ $date_birth_now_second  -  $date_now_second ] \n declare  -i date_cal_day  =  $ [ $date_cal_second /60/60/24 ] \n if   [ " $date_cal_day "  -le  "0" ] ;   then \n     echo   "Your bithday has over brfore " $ [ -1* $date_cal_day ] " days" \n else \n     declare  -i date_cal_hours  =  $ [ $ [ $date_cal_second  -  $date_cal_day *60*60*24 ] /60/60 ] \n     echo   "Your birthday after  $date_cal_day  days and  $date_cal_hours  hours" \n fi \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 \n 解决办法:指定其为10进制即可，在结果前加上10#。  如：declare -i date_birth_md =  10 # date --date="$date2" +%m%d \n \n ',summary:'\n\n记录一下《鸟叔的linux私房菜(第三版)》第13章P399“编写一个shell脚本计算还有几天过生日”遇到的问题。\n\n#!/bin/bash\necho "I will caculate..."\nread -p "Please input you birthday(YYYYMMDD, ex>19940910):" birthday\ndate2 = echo $birthday | grep "[0-9\\{8\\}]"\nif ["date2" == ""]; then\n    echo "please input correct date format" && exit 0\nfi\ndeclar ...',id:"post",pid:"post",readingTime:{text:"1 min read",minutes:.81,time:48600,words:162}},{title:"node核心模块——path",frontmatter:{title:"node核心模块——path",date:"2020-04-20",author:"Yoha",tags:["前端开发","JavaScript","node"],location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017192245.jpg",meta:[{name:"title",content:"node核心模块path"},{name:"description",content:"node核心模块path"},{name:"keywords",content:"node, path"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-04-20-node-path.html",relativePath:"_posts/2020-04-20-node-path.md",key:"v-1108103e",path:"/2020/04/20/node-path/",lastUpdated:"8/17/2021, 2:49:02 PM",content:" node module:  path \n \n path.basename(path [,ext]) 方法返回 path 的最后一部分 \n \n path . basename ( '/foo/bar/baz/asdf/quux.html' ) ; \n // 返回: 'quux.html' \n\npath . basename ( '/foo/bar/baz/asdf/quux.html' ,   '.html' ) ; \n // 返回: 'quux' \n \n 1 2 3 4 5 \n \n path.delimiter 提供平台特定的路径定界符 \n \n console . log ( process . env . PATH ) ; \n // 打印: 'C:\\Windows\\system32;C:\\Windows;C:\\Program Files\\node\\' \n\nprocess . env . PATH . split ( path . delimiter ) ; \n // 返回: ['C:\\\\Windows\\\\system32', 'C:\\\\Windows', 'C:\\\\Program Files\\\\node\\\\'] \n \n 1 2 3 4 5 \n \n path.dirname(path) 返回 path 的目录名 \n \n path . dirname ( 'D:\\\\YanProject\\\\JS\\\\AbortController.js' ) \n //返回: D:\\YanProject\\JS \n \n 1 2 \n \n path.extname(path) 返回 path 的扩展名 \n \n ps: path.extname() 方法返回 path 的扩展名，从最后一次出现 .（句点）字符到 path 最后一部分的字符串结束。 如果在 path 的最后一部分中没有 . ，或者如果 path 的基本名称（参阅 path.basename()）除了第一个字符以外没有 .，则返回空字符串。 \n path . extname ( 'index.html' ) ; \n // 返回: '.html' \n\npath . extname ( 'index.coffee.md' ) ; \n // 返回: '.md' \n\npath . extname ( 'index.' ) ; \n // 返回: '.' \n\npath . extname ( 'index' ) ; \n // 返回: '' \n\npath . extname ( '.index' ) ; \n // 返回: '' \n\npath . extname ( '.index.md' ) ; \n // 返回: '.md' \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 \n \n \n path.format(pathObject) 从对象返回路径字符串 \n \n \n pathObject: \n \n dir \n root \n base \n name \n ext \n \n \n \n 如果提供了 pathObject.dir，则忽略 pathObject.root。 \n \n \n 如果 pathObject.base 存在，则忽略 pathObject.ext 和 pathObject.name。 \n \n \n \n \n POSIX \n \n \n // 如果提供了 `dir`、 `root` 和 `base`， \n // 则返回 `${dir}${path.sep}${base}`。 \n // `root` 会被忽略。 \npath . format ( { \n  root :   '/ignored' , \n  dir :   '/home/user/dir' , \n  base :   'file.txt' \n } ) ; \n // 返回: '/home/user/dir/file.txt' \n\n // 如果未指定 `dir`，则使用 `root`。  \n // 如果只提供 `root`，或 'dir` 等于 `root`，则将不包括平台分隔符。  \n // `ext` 将被忽略。 \npath . format ( { \n  root :   '/' , \n  base :   'file.txt' , \n  ext :   'ignored' \n } ) ; \n // 返回: '/file.txt' \n\n // 如果未指定 `base`，则使用 `name` + `ext`。 \npath . format ( { \n  root :   '/' , \n  name :   'file' , \n  ext :   '.txt' \n } ) ; \n // 返回: '/file.txt' \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 \n windows \n \n path . format ( { \n  dir :   'C:\\\\path\\\\dir' , \n  base :   'file.txt' \n } ) ; \n // 返回: 'C:\\\\path\\\\dir\\\\file.txt' \n \n 1 2 3 4 5 \n \n \n path.isAbsolute(path) 方法检测 path 是否为绝对路径 \n \n POSIX \n \n path . isAbsolute ( '/foo/bar' ) ;   // true \npath . isAbsolute ( '/baz/..' ) ;    // true \npath . isAbsolute ( 'qux/' ) ;       // false \npath . isAbsolute ( '.' ) ;          // false \n \n 1 2 3 4 \n window \n \n path . isAbsolute ( '//server' ) ;      // true \npath . isAbsolute ( '\\\\\\\\server' ) ;    // true \npath . isAbsolute ( 'C:/foo/..' ) ;     // true \npath . isAbsolute ( 'C:\\\\foo\\\\..' ) ;   // true \npath . isAbsolute ( 'bar\\\\baz' ) ;      // false \npath . isAbsolute ( 'bar/baz' ) ;       // false \npath . isAbsolute ( '.' ) ;             // false \n \n 1 2 3 4 5 6 7 \n \n \n \n path.join([...paths]) 使用平台特定的分隔符作为定界符将所有给定的 path 片段连接在一起，然后规范化生成的路径 \n \n path . join ( '/foo' ,   'bar' ,   'baz/asdf' ,   'quux' ,   '..' ) ; \n // 返回: '/foo/bar/baz/asdf' \n\npath . join ( 'foo' ,   { } ,   'bar' ) ; \n // 抛出 'TypeError: Path must be a string. Received {}' \n \n 1 2 3 4 5 \n \n path.normalize(path) 规范化给定的 path，解析 '..' 和 '.' 片段 \n \n path . normalize ( '/foo/bar//baz/asdf/quux/..' ) ; \n // 返回: '/foo/bar/baz/asdf' \n\npath . normalize ( 'C:\\\\temp\\\\\\\\foo\\\\bar\\\\..\\\\' ) ; \n // 返回: 'C:\\\\temp\\\\foo\\\\' \n \n 1 2 3 4 5 \n \n \n path.parse(path) 返回一个对象，其属性表示 path 的重要元素 \n ps: 返回的对象将具有以下属性: \n \n dir \n root \n base \n name \n ext \n \n \n \n windows \n \n \n path . parse ( 'C:\\\\path\\\\dir\\\\file.txt' ) ; \n // 返回: \n // { root: 'C:\\\\', \n //   dir: 'C:\\\\path\\\\dir', \n //   base: 'file.txt', \n //   ext: '.txt', \n //   name: 'file' } \n \n 1 2 3 4 5 6 7 \n POSIX \n \n path . parse ( '/home/user/dir/file.txt' ) ; \n // 返回: \n // { root: '/', \n //   dir: '/home/user/dir', \n //   base: 'file.txt', \n //   ext: '.txt', \n //   name: 'file' } \n \n 1 2 3 4 5 6 7 \n \n \n path.relative(from, to) 方法根据当前工作目录返回 from 到 to 的相对路径 \n ps:如果将零长度的字符串传入 from 或 to，则使用当前工作目录代替该零长度的字符串 \n \n \n windows \n \n \n path . relative ( 'C:\\\\orandea\\\\test\\\\aaa' ,   'C:\\\\orandea\\\\impl\\\\bbb' ) ; \n // 返回: '..\\\\..\\\\impl\\\\bbb' \n \n 1 2 \n POSIX \n \n path . relative ( '/data/orandea/test/aaa' ,   '/data/orandea/impl/bbb' ) ; \n // 返回: '../../impl/bbb' \n \n 1 2 \n \n \n path.resolve([...paths])方法将路径或路径片段的序列解析为绝对路径 \n ps:给定的路径序列从右到左进行处理，每个后续的 path 前置，直到构造出一个绝对路径。 例如，给定的路径片段序列：/foo、 /bar、 baz，调用 path.resolve('/foo', '/bar', 'baz') 将返回 /bar/baz。如果在处理完所有给定的 path 片段之后还未生成绝对路径，则再加上当前工作目录。生成的路径已规范化，并且除非将路径解析为根目录，否则将删除尾部斜杠。零长度的 path 片段会被忽略。如果没有传入 path 片段，则 path.resolve() 将返回当前工作目录的绝对路径。 \n \n \n console . log ( path . resolve ( 'D:\\\\www' ,   'eee' ,   'ttt' ) ) ; \n //返回 D:\\www\\eee\\ttt \nconsole . log ( path . resolve ( 'www' ,   'eee' ,   'ttt' ) ) ; \n //返回 D:\\node_learn\\path\\www\\eee\\ttt \nconsole . log ( path . resolve ( ) ) ; \n //返回 D:\\node_learn\\path \n \n 1 2 3 4 5 6 \n \n path.sep (这个是属性)提供平台特定的路径片段分隔符 \n \n console . log ( path . sep ) ; \n //返回 \\ \n \n 1 2 ",summary:"\n\npath.basename(path [,ext]) 方法返回 path 的最后一部分\n\npath.basename('/foo/bar/baz/asdf/quux.html');\n// 返回: 'quux.html'\n\npath.basename('/foo/bar/baz/asdf/quux.html', '.html');\n// 返回: 'quux'\n\npath.delimiter 提供平台特定的路径定界符\n\nconsole.log(process.env.PATH);\n// 打印: 'C:\\Windows\\system32;C:\\Windows;C:\\Program Files\\n ...",id:"post",pid:"post",readingTime:{text:"3 min read",minutes:2.245,time:134700.00000000003,words:449}},{title:"node核心模块——fs",frontmatter:{title:"node核心模块——fs",date:"2020-05-08",author:"Yoha",tags:["前端开发","JavaScript","node"],location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017192245.jpg",meta:[{name:"title",content:"node核心模块fs"},{name:"description",content:"node核心模块fs"},{name:"keywords",content:"node, FS, fs"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-05-08-node-fs.html",relativePath:"_posts/2020-05-08-node-fs.md",key:"v-93e4a8c4",path:"/2020/05/08/node-fs/",headers:[{level:2,title:"fs的Promise API",slug:"fs的promise-api"},{level:3,title:"filehandler类",slug:"filehandler类"},{level:2,title:"关于符号链接一些知识之间有何区别和联系？')",slug:"关于符号链接一些知识"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" node module  fs \n \n 注：斜体加粗的api是有疑问的。 \n \n \n \n 所有文件系统操作都具有同步和异步的形式 \n \n \n 大多数 fs 操作接受的文件路径可以指定为字符串、Buffer、或使用 file:协议的 URL对象 \n \n \n 文件描述符 : 在 POSIX 系统上，对于每个进程，内核都维护着一张当前打开着的文件和资源的表格。 每个打开的文件都分配了一个称为文件描述符的简单的数字标识符。 在系统层，所有文件系统操作都使用这些文件描述符来标识和跟踪每个特定的文件。 Windows 系统使用了一个虽然不同但概念上类似的机制来跟踪资源。 为了简化用户的工作，Node.js 抽象出操作系统之间的特定差异，并为所有打开的文件分配一个数字型的文件描述符。 \n \n \n \n \n \n fs.Dir代表目录流的类 \n \n \n 由 fs.opendir()、fs.opendirSync() 或 fsPromises.opendir() 创建。 \n \n \n dir.close() 返回promise，将会在关闭资源之后被resolve。这个方法的作用时异步地关闭目录底层资源句柄。随后的读取将会导致错误。 \n \n \n dir.close(callback) 这个方法的作用同上，关闭资源句柄后将会调用callback。 \n \n callback(err) \n \n \n \n //个人理解 \n const  dir  =  fs . opendir ( path ) ; \n\ndir . close ( ( err )   =>   { \n   //doSomething \n } ) \n \n 1 2 3 4 5 6 \n \n dir.closeSync() 同步地关闭底层资源句柄。 \n \n \n dir.path <属性>，此目录的只读路径，与提供给 fs.opendir()、fs.opendirSync() 或 fsPromises.opendir() 的一样。 \n \n \n dir.read() 返回: Promise 包含 fs.Dirent或null。异步地读取下一个目录项作为 fs.Dirent。读取完成之后，将会返回一个 Promise，它被解决时将会返回 fs.Dirent 或 null（如果没有更多的目录项要读取）。此函数返回的目录项不遵循操作系统的底层目录机制所提供的特定顺序。 遍历目录时添加或删除的目录项可能会也可能不会包含在遍历的结果中。 \n \n \n dir.read(callback) 异步地读取下一个目录项作为 fs.Dirent。读取完成之后，将会调用 callback 并传入 fs.Dirent 或 null（如果没有更多的目录项要读取）。callback((err, fs.dirent) => {}); \n \n \n dir.readSync() 返回: Promise 包含 fs.Dirent或null。同步地读取下一个目录项作为 fs.Dirent。 \n \n \n \n \n \n \n \n fs.Dirent类 目录项的表示形式，通过从 fs.Dir 中读取得到 \n \n \n dirent.isBlockDevice() \n \n 返回布尔值 (如果 fs.Dirent 对象描述块设备，则返回true) \n \n \n \n dirent.isCharacterDevice() \n \n 返回布尔值 (如果 fs.Dirent 对象描述字符设备，则返回true) \n \n \n \n dirent.isDirectory() \n \n 返回布尔值 (如果 fs.Dirent 对象描述文件系统目录，则返回true) \n \n \n \n dirent.isFIFO() \n \n 返回布尔值(如果 fs.Dirent 对象描述先进先出（FIFO）管道，则返回true) \n \n \n \n dirent.isFile() \n \n 返回布尔值(如果 fs.Dirent 对象描述常规文件，则返回 true) \n \n \n \n dirent.isSymbolicLink() \n \n 返回布尔值(如果 fs.Dirent 对象描述符号链接，则返回 true) \n \n \n \n dirent.name \n \n 属性，fs.Dirent 对象指向的文件名。 此值的类型取决于传递给 fs.readdir() 或 fs.readdirSync() 的 options.encoding \n \n \n \n //假设当前目录下有以下结构 \n // - file(文件夹) \n // - fs.js \n // - fs.md \n async   function   print ( path )   { \n const  dir  =   await  fs . promises . opendir ( path ) ; \n for   await   ( const  dirent  of  dir )   { \n    console . log ( dirent ) ; \n     // Dirent { name: 'file', [Symbol(type)]: 2 } \n     // Dirent { name: 'file_test.lnk', [Symbol(type)]: 1 } \n     // Dirent { name: 'fs.js', [Symbol(type)]: 1 } \n     // Dirent { name: 'fs.md', [Symbol(type)]: 1 } \n\n    console . log ( dirent . isDirectory ( ) ) ; \n     //true false false \n\n    console . log ( dirent . isFile ( ) ) ; \n     // false true true \n\n    console . log ( dirent . name ) ; \n     //file fs.js fs.md \n   } \n } \n print ( './' ) . catch ( console . error ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 \n \n \n \n \n fs.Stats类 \n \n fs.Stats对象提供了关于文件的信息。从 fs.stat()、fs.lstat()、fs.fstat()、以及它们的同步方法返回的对象都是此类型。 \n \n \n \n stats.isBlockDevice() \n \n 如果 fs.Stats 对象描述块设备，则返回 true。 \n \n \n \n stats.isCharacterDevice() \n \n 如果 fs.Stats 对象描述字符设备，则返回 true。 \n \n \n \n stats.isDirectory() \n \n 如果 fs.Stats 对象描述文件系统目录，则返回 true。 \n \n \n \n stats.isFIFO() \n \n 如果 fs.Stats 对象描述先进先出（FIFO）管道，则返回 true。 \n \n \n \n stats.isFile() \n \n 如果 fs.Stats 对象描述普通的文件，则返回 true。 \n \n \n \n stats.isSocket() \n \n 如果 fs.Stats 对象描述套接字，则返回 true。 \n \n \n \n stats.isSymbolicKink() \n \n 如果 fs.Stats 对象描述符号链接，则返回 true。 \n \n \n \n //windows平台下 \nfs . rename ( './file/hello.txt' ,   './file/hello_bak.txt' ,   ( err )   =>   { \n   if ( err )   throw  err ; \n  fs . stat ( './file/hello_bak.txt' ,   ( err ,  stats )   =>   { \n     if ( err )   throw  err ; \n    console . log ( ` 文件属性 ${ JSON . stringify ( stats ) } ` ) ; \n    console . log ( stats . isFile ( ) ) ;   //true \n   } ) \n } ) \n \n 1 2 3 4 5 6 7 8 9 //上面代码中的console.log(`文件属性${JSON.stringify(stats)}`); \n { \n       \"dev\" : 3935059853 ,   //包含该文件的设备数字标识符 \n\n       \"mode\" : 33206 ,   //描述文件类型和模式的位字段 \n\n       \"nlink\" : 1 ,   //文件存在的硬链接数 \n\n       \"uid\" : 0 ,   //拥有该文件（POSIX）的用户的数字型群组标识符 \n\n       \"gid\" : 0 ,   //拥有该文件（POSIX）的群组的数字型群组标识符 \n\n       \"rdev\" : 0 ,   //如果文件被视为特殊文件，则此值为数字型设备标识符 \n\n       \"ino\" : 562949953422602 ,   //文件系统特定的文件索引节点编号 \n\n       \"size\" : 5 ,   //文件的大小（以字节为单位） \n\n       \"atimeMs\" : 1588206862385.9998 ,   //表明上次访问(access)此文件的时间戳，以POSIX 纪元以来的毫秒数表示 \n\n       \"mtimeMs\" : 1588836481684.9998 ,   //表明上次修改(modify)此文件的时戳，以POSIX 纪元以来的毫秒数表示 \n\n       \"ctimeMs\" : 1588837275795.1448 ,   //表明上次更改(change)文件状态的时间戳，以POSIX 纪元以来的毫秒数表示 \n\n       \"birthtimeMs\" : 1588206862386.4824 ,   //表明此文件的创建时间的时间戳，以POSIX 纪元以来的毫秒数表示。 \n\n       \"atime\" : \"2020-04-30T00:34:22.386Z\" , \n\n       \"mtime\" : \"2020-05-07T07:28:01.685Z\" , \n\n       \"ctime\" : \"2020-05-07T07:41:15.795Z\" , \n\n       \"birthtime\" : \"2020-04-30T00:34:22.386Z\" \n     } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 \n \n \n 名称 \n 全名 \n 中文名称 \n 含义 \n \n \n \n \n atime \n access time \n 访问时间 \n 文件中的数据被最后访问的时间 \n \n \n mtime \n modify time \n 修改时间 \n 文件内容被最后修改的时间 \n \n \n ctime \n change time \n 变化时间 \n 文件的元数据发生变化的时间。如权限、所有者等 \n \n \n \n \n \n \n \n \n fs.watch(filename[, options][, listener]) \n \n filename <string> | <Buffer> | <URL> \n options <object> | <string>\n \n persistent <boolean> 指示如果文件已正被监视，进程是否应继续运行。默认值: true \n recursive <boolean> 指示应该监视所有子目录，还是仅监视当前目录。这适用于监视目录时，并且仅适用于受支持的平台。默认值：false \n encoding <string> 指定用于传给监听器的文件名的字符编码。默认值: 'utf8' \n \n \n listener <Function> | <undefined>\n \n eventType <string> \n filename <string> | <Buffer> \n \n \n \n \n 返回fs.FSWatch类。监视 filename 的更改，其中 filename 是  文件或目录 。第二个参数是可选的。如果 options 传入字符串，则它指定 encoding。否则，options 应传入对象。监听器回调有两个参数 (eventType, filename)。eventType是'rename'或'change'，filename是触发事件的文件的名称。 \n \n \n 监听器回调绑定在由 fs.FSWatcher 触发的 'change' 事件上，但它与 eventType 的 'change' 值不是一回事。 \n \n fs . watch ( './file' ,   { recursive :   true ,  encoding :   'utf8' } ,   ( eventType ,  filename )   =>   { \n  console . log ( eventType ,  filename ) ; \n } ) \n \n 1 2 3 \n \n \n \n \n \n fs.watchFile(filename[, options], listener) \n \n filename <string> | <Buffer> | <URL> \n options <Object>\n \n bigint <boolean> 默认值: false \n persistent <boolean> 默认值: true \n interval <integer> 默认值: 5007 \n \n \n listener\n \n current /<fs.Stats> \n previous /<fs.Stats> \n \n \n \n \n 返回fs.StatWatcher。监视filename的更改。每当访问文件时都会调用 listener 回调。options 参数可以省略。如果提供，则它应该是一个对象。 options 对象可以包含一个名为 persistent 的布尔值，指示当文件正在被监视时，进程是否应该继续运行。 options 对象可以指定 interval 属性，指示轮询目标的频率（以毫秒为单位）。如果 bigint 选项为 true，则fs.Stats中的数值会被指定为 BigInts 类型。 \n \n \n 使用 fs.watch() 比 fs.watchFile 和 fs.unwatchFile 更高效。 \n \n fs . watchFile ( './file/hello.txt' ,   {  persistent :   true ,  interval :   5007   } ,   ( cur ,  prev )   =>   { \n  console . log ( new   Date ( cur . mtime ) . toLocaleString ( ) ) ; \n  console . log ( new   Date ( cur . ctime ) . toLocaleString ( ) ) ; \n  console . log ( new   Date ( prev . mtime ) . toLocaleString ( ) ) ; \n  console . log ( new   Date ( prev . ctime ) . toLocaleString ( ) ) ; \n } ) \n \n 1 2 3 4 5 6 \n \n \n \n \n \n fs.unwatchFile(filename[, listener]) \n \n filename <string> | <Buffer> | <URL> \n listener <Function> \n \n \n 停止对filename的监视。如果指定了listener，则移除此特定监视器，否则移除所有监视器，从而停止监视filename。对未被监视的文件名调用 fs.unwatchFile() 将是空操作，而不是错误。 \n \n \n \n \n \n \n fs.FSWatcher类 \n \n 成功调用 fs.watch() 方法将会返回一个新的 fs.FSWatcher 对象。每当指定监视的文件被修改时，所有的 fs.FSWatcher 对象都会触发 'change' 事件。 \n \n \n 'change'事件\n \n eventType <string> 已发生的更改事件的类型。 \n filename <string> | <Buffer> 更改的文件名（如果相关或可用）。 \n \n \n \n // eventType是'rename'或'change', filename 是触发事件的文件的名称。 \nfs . watch ( './fs.md' ,   ( eventType ,  filename )   =>   { \n   if ( filename )   { \n    console . log ( eventType ,  filename ) ; \n   } \n } ) \n \n 1 2 3 4 5 6 \n \n 'close' 事件\n \n 当监视器停止监视更改时触发 \n \n \n \n let  fsWatch  =  fs . watch ( './fs.md' ,   ( eventType ,  filename )   =>   { \n   if ( filename )   { \n    console . log ( eventType ,  filename ) ; \n   } \n } ) ; \n setTimeout ( ( )   =>   {  fsWatch . close ( )   } ,   5000 ) ; \nfsWatch . on ( 'close' ,   ( )   =>   { \n  console . log ( 'close' ) ; \n } ) \n \n 1 2 3 4 5 6 7 8 9 \n \n \n 'error' 事件 \n \n 当监视文件时发生错误时触发。 \n \n \n \n watcher.close() \n \n 给定的 fs.FSWatcher 停止监视更改。 \n \n //上面一段代码中的 \n setTimeout ( ( )   =>   {  fsWatch . close ( )   } ,   5000 ) ; \n \n 1 2 \n \n \n \n \n \n \n fs.createReadStream(path[, options]) \n \n path <string> | <Buffer> | <URL> \n options <string> | <Object>\n \n flags <string> 参见文件系统 flag 的支持。 默认值: 'r' \n encoding <string> 默认值: null \n fd <integer> 默认值: null \n mode <integer> 默认值: 0o666 \n autoClose <boolean> 默认值: true \n emitClose <boolean> 默认值: false \n start <integer> \n end <integer> 默认值: Infinity \n highWaterMark <integer> 默认值: 64 * 1024 \n fs  <Object> | <null> 默认值: null \n \n \n \n \n 返回fs.ReadStream 类。如果options指定了 fd，则 ReadStream 会忽略 path 参数，并且会使用指定的文件描述符。 \n \n \n highWaterMark内部缓冲区最多能容纳的字节数，如果超过这个大小，就停止读取资源文件，默认值是64KB。比如有一个100KB的文件，设置highWaterMark为10KB,那么系统会先从资源文件中读取出10KB的数据，再触发data事件;然后再读取10KB的数据，触发data事件，不断执行，直到读出了所有的数据，触发end事件。highWaterMark不能设置的过小，过小就会频繁的操作文件，影响性能。 \n \n \n \n \n \n \n fs.ReadStream 类 \n \n \n How to use fs.createReadStream? \n \n \n Node.js文件系统模块fs创建可读流与可写流 \n \n \n \n 成功调用fs.createReadStream()会返回新建的 fs.ReadStream 对象。 \n fs模块提供了创建文件可读流与创建文件可写读的方法：fs.createReadStream()和fs.createWriteStream()，这两个方法分别分返回一个Readable Stream对象和Writable Stream对象。通过这两个对象，我们可以基于流的文件处理，在读写大文件及基于流的转接、暂停、读取等操作方面有很大的作用。 \n \n \n \n close事件 \n \n 当fs.ReadStream的底层文件描述符已关闭时触发。 \n \n \n \n open事件 \n \n 当fs.ReadStream的文件描述符打开时触发。 \n \n \n \n ready事件 \n \n 当fs.ReadStream准备好使用时触发。'open'事件之后立即触发。 \n \n \n \n end事件 \n \n \n error事件 \n \n \n pause事件 \n \n \n resume事件 \n \n \n data事件 \n \n \n readStream.bytesRead \n \n 到目前为止已读取的字节数。 \n \n \n \n readStream.path \n \n 流正在读取的文件的路径，由 fs.createReadStream() 的第一个参数指定。如果 path 传入字符串，则 readStream.path 将是字符串。如果 path 传入 Buffer，则 readStream.path将是Buffer。 \n \n \n \n readStream.pending \n \n 如果底层的文件还未被打开（即在触发 'ready' 事件之前），则此属性为 true。 \n \n \n \n //hello.txt的内容为 hello \n let  readStream  =  fs . createReadStream ( './file/hello.txt' ) ; \n\nconsole . log ( readStream . pending ) ; // true \n\nreadStream . on ( 'open' ,   ( )   =>   { \n  console . log ( readStream . bytesRead ) ; // 0 \n  console . log ( readStream . path ) ; // './file/hello.txt' \n  console . log ( readStream . pending ) ; // false \n } ) \n\nreadStream . on ( 'data' ,   ( data )   =>   { \n  console . log ( readStream . bytesRead ) ; // 5 \n  console . log ( data . toString ( ) ) ;   // hello \n } ) \n\nreadStream . on ( 'error' ,   ( err )   =>   { \n  console . log ( err ) ; \n } ) \n\nreadStream . on ( 'end' ,   ( )   =>   { \n  console . log ( 'end' ) ; \n } ) \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 \n \n \n \n \n fs.createWriteStream(path[, options]) \n \n path <string> | <Buffer> | <URL> \n options <string> | <Object>\n \n flags <string> 参见文件系统 flag 的支持。 默认值: 'w' \n encoding <string> 默认值: null \n fd <integer> 默认值: null \n mode <integer> 默认值: 0o666 \n autoClose <boolean> 默认值: true \n emitClose <boolean> 默认值: false \n start <integer> \n end <integer> 默认值: Infinity \n highWaterMark <integer> 默认值: 16 * 1024。如果超过这个值，write方法就会返回false \n fs  <Object> | <null> 默认值: null \n \n \n \n \n 返回fs.WriteStream 类。与 ReadStream 一样，如果指定了 fd，则 WriteStream 会忽略 path 参数，并且会使用指定的文件描述符。 这意味着不会触发 'open' 事件。 \n \n \n \n \n \n \n fs.WriteStream类 \n \n 成功调用fs.createWriteStream()会返回新建的 fs.WriteStream对象。 \n \n \n \n clsoe事件 \n \n 当 WriteStream 的底层文件描述符已关闭时触发 \n \n \n \n open事件 \n \n 当 WriteStream 的文件打开时触发 \n \n \n \n ready事件 \n \n 'open' 事件之后立即触发 \n \n \n \n finish事件 \n \n \n error事件 \n \n \n drain事件 \n \n 在缓冲区数据写入完毕后触发 \n \n \n \n writeStream.bytesWritten \n \n 到目前为止写入的字节数。 不包括仍在排队等待写入的数据 \n \n \n \n writeStream.path \n \n 流正在写入的文件的路径，由 fs.createWriteStream() 的第一个参数指定。 如果 path 传入字符串，则 writeStream.path 将是字符串。 如果 path 传入 Buffer，则 writeStream.path 将是 Buffer。 \n \n \n \n writeStream.pending \n \n 如果底层的文件还未被打开（即在触发 'ready' 事件之前），则此属性为 true。 \n \n \n \n let  writeStream  =  fs . createWriteStream ( './file/test.txt' ) ; \n\nconsole . log ( writeStream . path ) ;   // ./file/test.txt \n\nwriteStream . write ( 'wswswsws'   +   new   Date ( ) ,   'UTF-8' ) ; \n //写入内容格式为：wswswswsThu May 07 2020 18:22:06 GMT+0800 (GMT+08:00) \n\nconsole . log ( writeStream . bytesWritten ) ;   // 0 \n\nwriteStream . end ( ) ;   //标记文件末尾, 结束写入流, 释放资源 \n\nwriteStream . on (   'finish' ,    function ( )   { \n  console . log ( writeStream . bytesWritten )   // 53 \n  console . log ( \"写入完成\" ) ; \n } ) ; \n\nwriteStream . on (   'error' ,    function ( error ) { \n  console . log ( error ) ; \n } ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 //一个文件拷贝的例子 \n let  rs  =  fs . createReadStream ( \"/img/in-post/post-node-fs/timg.jpg\" ) ; //默认64KB \n let  ws  =  fs . createWriteStream ( \"/img/in-post/post-node-fs/Copy.jpg\" ) ; //默认16KB，写入速度小于读取速度 \nrs . on ( \"data\" ,   function   ( data )   { \n   let  flag  =  ws . write ( data ) ; \n   if   ( ! flag )   {   //缓冲区已满 \n    rs . pause ( ) ; //停止触发data事件 \n   } \n } ) ; \nws . on ( \"drain\" ,   function   ( )   { \n  rs . resume ( ) ; //如果当前的缓冲区写入完毕，就重新触发data事件 \n } ) ; \nrs . on ( \"end\" ,   function   ( )   { \n  ws . end ( ) ; //将剩下的数据全部写入，并且关闭写入的文件 \n } ) \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 \n \n \n \n fs.access(path[, mode], callback) \n \n path 路径 \n mode  默认值:  fs.constants.F_OK (为0) \n callback 回调函数\n \n err \n \n \n \n \n \n \n 测试用户对 path 指定的文件或目录的权限。 mode 参数是一个可选的整数，指定要执行的可访问性检查。最后一个参数 callback 是回调函数，调用时会传入可能的错误参数。 \n \n \n \n 文件可访问性的常量(以下常量适用于 fs.access()) \n \n \n \n 常量 \n 说明 \n \n \n \n \n F_OK \n 表明文件对调用进程可见。 这对于判断文件是否存在很有用，但对 rwx 权限没有任何说明。 如果未指定模式，则默认值为该值。 \n \n \n R_OK \n 表明调用进程可以读取文件 \n \n \n W_OK \n 表明调用进程可以写入文件 \n \n \n X_OK \n 表明调用进程可以执行文件。 在 Windows 上无效(表现得像 fs.constants.F_OK) \n \n \n \n const  file  =   './file/test.txt' ; \n\n // 检查文件是否存在于当前目录中。 \nfs . access ( file ,  fs . constants . F_OK ,   ( err )   =>   { \n  console . log ( ` ${ file }   ${ err  ?   '不存在'   :   '存在' } ` ) ; \n } ) ; \n\n // 检查文件是否可读。 \nfs . access ( file ,  fs . constants . R_OK ,   ( err )   =>   { \n  console . log ( ` ${ file }   ${ err  ?   '不可读'   :   '可读' } ` ) ; \n } ) ; \n\n // 检查文件是否可写。 \nfs . access ( file ,  fs . constants . W_OK ,   ( err )   =>   { \n  console . log ( ` ${ file }   ${ err  ?   '不可写'   :   '可写' } ` ) ; \n } ) ; \n\n // 检查文件是否存在于当前目录中、以及是否可写。 \nfs . access ( file ,  fs . constants . F_OK   |  fs . constants . W_OK ,   ( err )   =>   { \n   if   ( err )   { \n    console . error ( \n       ` ${ file }   ${ err . code  ===   'ENOENT'   ?   '不存在'   :   '只可读' } ` ) ; \n   }   else   { \n    console . log ( ` ${ file }  存在，且可写 ` ) ; \n   } \n } ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 // fs.constants \n { \n   UV_FS_SYMLINK_DIR :   1 , \n   UV_FS_SYMLINK_JUNCTION :   2 , \n   O_RDONLY :   0 , \n   O_WRONLY :   1 , \n   O_RDWR :   2 , \n   UV_DIRENT_UNKNOWN :   0 , \n   UV_DIRENT_FILE :   1 , \n   UV_DIRENT_DIR :   2 , \n   UV_DIRENT_LINK :   3 , \n   UV_DIRENT_FIFO :   4 , \n   UV_DIRENT_SOCKET :   5 , \n   UV_DIRENT_CHAR :   6 , \n   UV_DIRENT_BLOCK :   7 , \n   S_IFMT :   61440 , \n   S_IFREG :   32768 , \n   S_IFDIR :   16384 , \n   S_IFCHR :   8192 , \n   S_IFLNK :   40960 , \n   O_CREAT :   256 , \n   O_EXCL :   1024 , \n   UV_FS_O_FILEMAP :   536870912 , \n   O_TRUNC :   512 , \n   O_APPEND :   8 , \n   F_OK :   0 , \n   R_OK :   4 , \n   W_OK :   2 , \n   X_OK :   1 , \n   UV_FS_COPYFILE_EXCL :   1 , \n   COPYFILE_EXCL :   1 , \n   UV_FS_COPYFILE_FICLONE :   2 , \n   COPYFILE_FICLONE :   2 , \n   UV_FS_COPYFILE_FICLONE_FORCE :   4 , \n   COPYFILE_FICLONE_FORCE :   4 \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 \n \n \n \n fs.accessSync(path[, mode]) \n \n path \n mode  默认值:  fs.constants.F_OK。 \n \n \n \n \n 同步地测试用户对 path 指定的文件或目录的权限。 mode 参数是一个可选的整数，指定要执行的可访问性检查。 \n \n try   { \n  fs . accessSync ( file ,  fs . constants . R_OK   |  fs . constants . W_OK ) ; \n  console . log ( ` ${ file } 可读写 ` ) ; \n }   catch   ( err )   { \n  console . log ( ` ${ file } 无权限访问 ` ) ; \n } \n \n 1 2 3 4 5 6 \n \n fs.appendFile(path, data[, options], callback) \n \n path <string> | <Buffer> | <URL> | <number> 文件名或文件描述符。 \n data <string> | <Buffer> \n options <object> | <string>\n \n encoding <string> | <null> 默认值: 'utf8' \n mode <integer> 默认值: 0o666 \n flag <string> 参见文件系统 flag 的支持。默认值: 'a'。 \n \n \n callback <Function>\n \n err <Error> \n \n \n \n \n \n \n 异步地追加数据到文件，如果文件尚不存在则创建文件。 data 可以是字符串或 Buffer。 \n \n fs . appendFile ( './file/test.txt' ,   '\\nappend data==' ,   'utf8' ,   ( err )   =>   { \n   if ( err )   throw  err ; \n    console . log ( 'data has been appended' ) ; \n } ) \n\n //path可以指定为已打开用于追加(使用fs.open()或fs.openSync())的数字型文件描述符。文件描述符不会自动关闭 \nfs . open ( './file/test.txt' ,   'a' ,   ( err ,  fd )   =>   { \n   if ( err )   throw  err ; \n  fs . appendFile ( fd ,   'append data by fd' ,   'utf8' ,   ( err )   =>   { \n    fs . close ( fd ,   ( err )   =>   { \n       if ( err )   throw  err ; \n     } ) ; \n     if ( err )   throw  err ; \n   } ) \n } ) \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 \n \n \n \n fs.appendFileSync(path, data[, options]) \n \n path <string> | <Buffer> | <URL> | <number> 文件名或文件描述符。 \n data <string> | <Buffer> \n options <object> | <string>\n \n encoding <string> | <null> 默认值: 'utf8' \n mode <integer> 默认值: 0o666 \n flag <string> 参见文件系统 flag 的支持。默认值: 'a'。 \n \n \n \n \n \n \n 同步地将数据追加到文件，如果文件尚不存在则创建该文件。 data 可以是字符串或 Buffer \n \n //如果options是字符串，则它指定字符编码 \n try   { \n  fs . appendFileSync ( './file/test.txt' ,   '\\nappend data sync' ,   'utf8' ) ; \n  console . log ( 'data has append file Sync' ) \n }   catch   ( err )   { \n  console . log ( err ) ; \n } \n\n //path可以指定为已打开用于追加(使用fs.open()或fs.openSync())的数字型文件描述符。文件描述符不会自动关闭 \n\n let  fd ; \n\n try   { \n  fd  =  fs . openSync ( '文件.txt' ,   'a' ) ; \n  fs . appendFileSync ( fd ,   '追加的数据' ,   'utf8' ) ; \n }   catch   ( err )   { \n   /* 处理错误 */ \n }   finally   { \n   if   ( fd  !==   undefined ) \n    fs . closeSync ( fd ) ; \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 \n \n \n fs.chmod(path, mode, callback) \n \n path <string> | <Buffer> | <URL> \n mode <string> | <integer> \n callback <Function>\n \n err \n \n \n \n \n 异步地更改文件的权限 \n \n //r、w、x ==> 4、2、1 \n //user(rwx) group(r-x) other(r--) \n //在windows下权限修改没有成功，但是不会报错(在gitBash环境下验证的) \nfs . chmod ( './file/test.txt' ,   0o666 ,   ( err )   =>   { \n   if ( err )   throw  err ; \n  console . log ( '文件test.txt权限已更改' ) ; \n } ) \n \n 1 2 3 4 5 6 7 \n \n \n \n \n fs.chmodSync(path, mode) \n \n path <string> | <Buffer> | <URL> \n mode <string> | <integer> \n \n \n 同步地更改文件的权限 \n \n \n \n \n \n \n fs.fchmod(fd, mode, callback) \n \n fd <integer> \n mode <string> | <integer> \n callback <Function>\n \n err \n \n \n \n \n 这个也是异步地修改文件的权限，但是它和fs.chmod(path, mode, callback)不同的是，fs.fchmod(fd, mode, callback)传入的第一个参数是文件描述符，而fs.chmod(path, mode, callback)传入的第一个参数是文件路径 \n \n \n \n \n \n \n fs.fchmodSync(fd, mode) \n \n fd <integer> \n mode <string> | <integer> \n \n \n 同步地修改文件的权限(传入文件描述符) \n \n \n \n \n \n \n fs.lchmode(path, mode, callback) \n \n path <string> | <Buffer> | <URL> \n mode <integer> \n callback <Function>\n \n err <Error> \n \n \n \n \n 异步地更改文件权限（不解析符号链接），即如果 path 是符号链接，则查看的是链接自身，而不是它指向的文件。 \n \n \n The lchmod() system call is similar to chmod() but does not follow symbolic links.(???)仅适用于 macOS。 \n \n \n \n \n \n \n fs.chown(path, uid, gid, callback) \n \n path <string> | <Buffer> | <URL> \n uid <integer> \n gid <integer> \n callback <Function>\n \n err \n \n \n \n \n 异步地更改文件的所有者(user)和群组(group) \n \n \n \n \n \n \n fs.chownSync(path, uid, gid) \n \n path <string> | <Buffer> | <URL> \n uid <integer> \n gid <integer> \n \n \n 同步地更改文件的所有者和群组。返回 undefined。这是 fs.chown()的同步版本 \n \n \n \n \n \n \n fs.fchown(fd, uid, gid, callback) \n \n fd <integer> \n uid <integer> \n gid <integer> \n callback <Function>\n \n err \n \n \n \n \n 异步地更改文件(传入文件描述符)的所有者(user)和群组(group) \n \n \n \n \n \n \n fs.fchownSync(fd, uid, gid) \n \n fd <integer> \n uid <integer> \n gid <integer> \n \n \n 同步地更改文件(传入文件按描述符)的所有者和群组。返回 undefined。这是 fs.fchown()的同步版本 \n \n \n \n \n \n \n fs.lchown(path, uid, gid, callback) \n \n path <string> | <Buffer> | <URL> \n uid <integer> \n gid <integer> \n callback <Function>\n \n err \n \n \n \n \n 异步地更改文件的所有者(user)和群组(group)，不解析符号链接，即如果 path 是符号链接，则查看的是链接自身，而不是它指向的文件。 \n \n \n lchown() is like chown(), but does not dereference symbolic links. \n \n \n \n \n \n \n fs.lchownSync(path, uid, gid) \n \n path <string> | <Buffer> | <URL> \n uid <integer> \n gid <integer> \n \n \n 同步地更改文件(传入文件按描述符)的所有者和群组，不解析符号链接，即如果 path 是符号链接，则查看的是链接自身，而不是它指向的文件。返回 undefined \n \n \n \n \n \n \n fs.close(fd, callback) \n \n fd <integer> \n callback <Function>\n \n err \n \n \n \n \n 异步地关闭文件描述符 \n \n \n \n \n \n \n fs.closeSync(fd) \n \n fd <integer> \n \n \n 同步地关闭文件描述符 \n \n \n \n \n \n \n fs.copyFile(src, dest[, mode], callback) \n \n src <string> | <Buffer> | <URL> 要拷贝的源文件名 \n dest <string> | <Buffer> | <URL> 拷贝操作的目标文件名 \n mode <integer> 用于拷贝操作的修饰符。默认值: 0 \n callback <Function>\n \n err \n \n \n \n \n 异步地将 src 拷贝到 dest。 默认情况下，如果 dest 已经存在，则覆盖它。 除了可能的异常，回调函数没有其他参数。mode 是一个可选的整数，指定拷贝操作的行为。可以创建由两个或更多个值按位或组成的掩码（比如 fs.constants.COPYFILE_EXCL | fs.constants.COPYFILE_FICLONE） \n \n \n \n fs.constants.COPYFILE_EXCL - 如果 dest 已存在，则拷贝操作将失败 \n fs.constants.COPYFILE_FICLONE - 拷贝操作将尝试创建写时拷贝（copy-on-write）链接。如果平台不支持写时拷贝，则使用后备的拷贝机制 \n fs.constants.COPYFILE_FICLONE_FORCE - 拷贝操作将尝试创建写时拷贝链接。如果平台不支持写时拷贝，则拷贝操作将失败 \n \n \n function   copyFile ( mkdir  =   '' )   { \n   // 通过使用 COPYFILE_EXCL，如果目标文件存在，则操作将失败。 \n   // fs.copyFile('源文件.txt', '目标文件.txt', fs.constants.COPYFILE_EXCL, callback); \n  fs . copyFile ( './file/test.txt' ,   './file_bak/test.txt' ,   ( err )   =>   { \n     if ( err )   throw  err ; \n    console . log ( 'copy successfully' ,  mkdir  ==   'mkdir'   ?   'mkdir'   :   '' ) ; \n   } ) ; \n } \n\n //先判断文件夹是否存在 \n if ( ! fs . existsSync ( './file_bak' ) )   { \n  fs . mkdir ( './file_bak' ,   ( err )   =>   { \n     if ( err )   throw  err ; \n     copyFile ( 'mkdir' ) ; \n   } ) \n }   else   { \n   copyFile ( ) ; \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 \n \n \n \n \n fs.copyFileSync(src, dest[, mode]) \n \n src <string> | <Buffer> | <URL> 要拷贝的源文件名 \n dest <string> | <Buffer> | <URL> 拷贝操作的目标文件名 \n mode <integer> 用于拷贝操作的修饰符。默认值: 0 \n \n \n 同步地将src拷贝到dest。默认情况下，如果dest已经存在，则覆盖它。返回undefined。如果在打开目标文件用于写入后发生错误，则 Node.js 将尝试删除目标文件。mode 是一个可选的整数，指定拷贝操作的行为。 可以创建由两个或更多个值按位或组成的掩码（比如 fs.constants.COPYFILE_EXCL | fs.constants.COPYFILE_FICLONE）。 \n \n \n \n \n \n \n fs.existsSync(path) \n \n path <string> | <Buffer> | <URL> \n 返回布尔值 \n \n //判断路径(文件夹/文件)是否存在 \n if ( ! fs . existsSync ( './file_bak' ) )   { \n   //doSomething \n }   else   { \n   //doSomething \n } \n \n 1 2 3 4 5 6 \n \n \n \n \n fs.fdatasync(fd, callback) \n \n fd <integer> \n callback <Function>\n \n err \n \n \n \n \n 异步地刷新数据到磁盘 \n \n // Open the file \nfs . open ( filename ,   \"a+\" ,   ( err ,  fd )   =>   { \n   // Write our data \n  fs . writeFile ( fd ,  data ,   ( err )   =>   { \n       // Force the file to be flushed \n      fs . fdatasync ( fd  /*, optional callback here */ ) ; \n   } ) ; \n } ) ; \n \n 1 2 3 4 5 6 7 8 \n \n \n \n \n fs.fdatasyncSync(fd) \n \n fd <integer> \n \n \n fs.fdatasync(fd, callback)的同步版本。同步地刷新数据到磁盘。 \n \n \n \n \n \n \n fs.stat(path[, options], callback) \n \n path  <string> | <Buffer> | <URL> \n options <Object>\n \n bigint <boolean>返回的fs.Stats对象中的数值是否为bigint型。默认值: false。 \n \n \n callback <Function>\n \n err <Error> \n stats <fs.Stats> \n \n \n \n \n 异步地查看文件的属性信息。如果文件不存在，回调函数中stats为undefined,若要只检查文件是否存在，但没有更多的操作，则建议使用 fs.access() \n \n fs . stat ( './file/test.txt' ,   ( err ,  stats )   =>   { \n  console . log ( stats  ?   '文件存在'   :   '文件不存在' ) ; \n  console . log ( JSON . stringify ( stats ) ) ; \n   //文件存在：{\"dev\":3935059853,\"mode\":33206,...} \n   //文件不存在: undefined \n } ) \n\n\n const  file  =   './file/test.txt' ; \n // 检查文件是否存在于当前目录中。 \nfs . access ( file ,  fs . constants . F_OK ,   ( err )   =>   { \n  console . log ( ` ${ file }   ${ err  ?   '不存在'   :   '存在' } ` ) ; \n } ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 \n \n \n \n \n fs.statSync(path[, options]) \n \n path  <string> | <Buffer> | <URL> \n options <Object>\n \n bigint <boolean>返回的fs.Stats对象中的数值是否为bigint型。默认值: false。 \n \n \n 返回<fs.Stats> \n \n \n 同步地查看文件的属性信息。 \n \n try   { \n   let  stat  =  fs . statSync ( './file/test.txt' ) ; \n  console . log ( stat ) ; \n }   catch   ( err )   { \n  console . log ( err . code ) ; \n   throw  err ; \n } \n \n 1 2 3 4 5 6 7 \n \n \n \n \n fs.fstat(fd[, options], callback) \n \n fd <integer> \n options <Object>\n \n bigint <boolean>返回的fs.Stats对象中的数值是否为bigint型。默认值: false。 \n \n \n callback <Function>\n \n err <Error> \n stats <fs.Stats> \n \n \n \n \n 异步地查看文件的属性信息。与fs.stat(path[, options], callback)不同的是，fs.fstat(fd[, options], callback)传入文件描述符。 \n \n fs . open ( './file/test.txt' ,   'r' ,   ( err ,  fd )   =>   { \n   if ( err  &&  err . code  ==   'ENOENT' )   { \n    console . log ( '文件不存在' ) ; \n     return ; \n   } ; \n  fs . fstat ( fd ,   ( err ,  stats )   =>   { \n     if ( err )   throw  err ; \n    console . log ( stats ) ; \n   } ) \n } ) \n \n 1 2 3 4 5 6 7 8 9 10 \n \n \n \n \n fs.fstatSync(fd[, options]) \n \n fd <integer> \n options <Object>\n \n bigint <boolean>返回的fs.Stats对象中的数值是否为bigint型。默认值: false。 \n \n \n \n \n 同步地查看文件的属性信息，传入文件描述符 \n \n \n \n \n \n \n fs.lstat(path[, options], callback) \n \n path <string> | <Buffer> | <URL> \n options <Object>\n \n bigint <boolean> \n \n \n callback <Function>\n \n err \n stats \n \n \n \n \n 回调会传入两个参数 (err, stats)，其中stats是fs.Stats对象。lstat()与stat()相同， 只是如果path是符号链接，则查看的是链接自身，而不是它指向的文件。 (这个难道就是传说中的不解析符号链接吗？？) \n \n \n \n \n \n \n fs.lstatSync(path[, options]) \n \n path <string> | <Buffer> | <URL> \n options <Object>\n \n bigint <boolean> \n \n \n \n \n 返回fs.Stats \n \n \n \n \n \n \n fs.fsync(fd, callback) \n \n fd <integer> \n callback <Function>\n \n err <Error> \n \n \n \n \n 异步地刷新数据到磁盘 \n \n \n fsync() transfers (\"flushes\") all modified in-core data of (i.e., modified buffer cache pages for) the file referred to by the file descriptor fd to the disk device (or other permanent storage device) \n \n fs.fsync(fd, callback)和fs.fdatasync(fd, callback)的区别 \n \n fdatasync() is similar to fsync(), but does not flush modified metadata unless that metadata is needed in order to allow a subsequent data retrieval to be correctly handled. For example, changes to st_atime or st_mtime (respectively, time of last access and time of last modification; see stat(2)) do not require flushing because they are not necessary for a subsequent data read to be handled correctly. On the other hand, a change to the file size (st_size, as made by say ftruncate(2)), would require a metadata flush. \n \n \n \n \n \n \n fs.fsyncSync(fd) \n \n fd <integer> \n \n \n 同步地刷新数据到磁盘。返回undefined \n \n \n \n \n \n \n fs.ftruncate(fd[, len], callback) \n \n fd <integer> \n len <integer>  默认值:  0 \n callback <Function>\n \n err <Error> \n \n \n \n \n 如果文件描述符指向的文件大于 len 个字节，则只有前面 len 个字节会保留在文件中。如果文件小于 len 个字节，则会对其进行扩展，并且扩展部分将填充空字节（'\\0'） \n \n console . log ( fs . readFileSync ( './file/hello.txt' ,   'utf8' ) ) ; \n const  fd  =  fs . openSync ( './file/hello.txt' ,   'r+' ) ; \nfs . ftruncate ( fd ,   4 ,   ( err )   =>   { \n   if ( err )   throw  err ; \n  console . log ( fs . readFileSync ( './file/hello.txt' ,   'utf8' ) ) ; \n } ) \n \n 1 2 3 4 5 6 \n \n \n \n \n \n \n fs.ftruncateSync(fd[, len]) \n \n fd <integer> \n len <integer>  默认值:  0 \n \n \n 返回undefined。fs.ftruncate(fd[, len], callback)的同步版本 \n \n \n \n \n \n \n fs.truncate(path[, len], callback) \n \n path <string> | <Buffer> | <URL> \n len <integer>  默认值:  0 \n callback <Function>\n \n err <Error> \n \n \n \n \n 如果文件描述符指向的文件大于 len 个字节，则只有前面 len 个字节会保留在文件中。如果文件小于 len 个字节，则会对其进行扩展，并且扩展部分将填充空字节（'\\0'） \n \n \n \n \n \n \n fs.truncateSync(path[, len]) \n \n path <string> | <Buffer> | <URL> \n len <integer>  默认值:  0 \n \n \n 返回undefined。fs.truncate(path[, len], callback)的同步版本 \n \n \n \n \n \n \n fs.futimes(fd, atime, mtime, callback) \n \n fd <integer> \n atime <number> | <string> | <Date> 访问时间 \n mtime <number> | <string> | <Date> 修改时间 \n callback <Function>\n \n err <Error> \n \n \n \n \n 更改文件描述符指向对象的文件系统时间戳 \n \n \n \n \n \n \n fs.futimesSync(fd, atime, mtime) \n \n fd <integer> \n atime <number> | <string> | <Date> \n mtime <number> | <string> | <Date> \n \n \n fs.futimes(fd, atime, mtime, callback)的同步版本。返回undefined \n \n \n \n \n \n \n fs.utimes(path, atime, mtime, callback) \n \n path <string> | <Buffer> | <URL> \n atime <number> | <string> | <Date> 访问时间 \n mtime <number> | <string> | <Date> 修改时间 \n callback <Function>\n \n err <Error> \n \n \n \n \n 更改path指向对象的文件系统时间戳 \n \n \n \n \n \n \n fs.utimesSync(path, atime, mtime) \n \n path <string> | <Buffer> | <URL> \n atime <number> | <string> | <Date> 访问时间 \n mtime <number> | <string> | <Date> 修改时间 \n \n \n fs.utimes(path, atime, mtime, callback)的同步版本。返回undefined \n \n \n \n \n \n \n fs.link(existingPath, newPath, callback) \n \n existingPath <string> | <Buffer> | <URL> 指定需要被创建硬链接的文件的完整路径及文件名 \n newPath <string> | <Buffer> | <URL> 指定被创建的硬链接的完整路径及文件名 \n callback <Function>\n \n err <Error> \n \n \n \n \n 异步地创建硬连接。硬链接实际上是文件的一个或多个文件名。在操作系统中，一个文件被创建之后就拥有了个文件名，因此该文件的硬链接数量为1。但是我们可以通过某种特殊的操作为该文件在指定一个文件名，而这中特殊的操作称为对该文件创建硬链接。在对该文件创建一个硬链接之后，虽然表面上看起来拥有了两个不同的文件，但是在硬盘中这两个只不过是同一个文件的多个硬链接， 如果修改了一个文件中的内容，再打开另外一个文件，就会看见另一个文件中的内容也被修改了 。 \n \n fs . link ( './file/hello.txt' ,   './file/hello_hard.txt' ,   ( err )   =>   { \n   if ( err )   throw  err ; \n  fs . stat ( './file/hello.txt' ,   ( err ,  stat )   =>   { \n     if ( err )   throw  err ; \n    console . log ( stat ) ; \n   } ) \n } ) \n \n 1 2 3 4 5 6 7 \n \n \n \n \n \n \n fs.unlink(path, callback) \n \n path <string> | <Buffer> | <URL> \n callback <Function>\n \n err <Error> \n \n \n \n \n 异步地删除文件或符号链接。 除了可能的异常，完成回调没有其他参数。fs.unlink() 对空或非空的目录均不起作用。 若要删除目录，则使用 fs.rmdir()。 \n \n fs . unlink ( './file/hello_hard.txt' ,   ( err )   =>   { \n   if ( err )   throw  err ; \n  console . log ( 'delete file successfully' ) ; \n } ) \n \n 1 2 3 4 \n \n \n \n \n fs.linkSync(existingPath, newPath) \n \n existingPath <string> | <Buffer> | <URL> 指定需要被创建硬链接的文件的完整路径及文件名 \n newPath <string> | <Buffer> | <URL> 指定被创建的硬链接的完整路径及文件名 \n \n \n 同步地创键硬连接。返回undefined \n \n \n \n \n \n \n fs.unlinkSync(path) \n \n path <string> | <Buffer> | <URL> \n \n \n 同步地删除文件或符号链接。返回undefined \n \n \n \n \n \n \n fs.mkdir(path[, options], callback) \n \n path <string> | <Buffer> | <URL> \n options <Object> | <integer>\n \n recursive <boolean> \n mode <integer> \n \n \n callback <Function>\n \n err <Error> \n \n \n \n \n 异步地创建目录。 \n \n \n 回调会传入可能的异常、以及创建的第一个目录的路径（如果 recursive 为 true）,(err, [path])。可选的options参数可以是整数（指定 mode（权限和粘滞位））、或对象（具有 mode 属性和 recursive 属性（指示是否要创建父目录））。当path是已存在的目录时，调用 fs.mkdir()仅在 recursive 为 false 时才会导致错误。 \n \n \n \n \n \n \n fs.mkdirSync(path[, options]) \n \n path <string> | <Buffer> | <URL> \n options <Object> | <integer>\n \n recursive <boolean> \n mode <integer> \n \n \n \n \n 同步地创建目录。返回undefined，或者创建的第一个目录路径(如果recursive为true)。是fs.mkdir()的同步版本 \n \n \n \n \n \n \n fs.rmdir(path[, options], callback) \n \n path <string> | <Buffer> | <URL> \n options <Object>\n \n maxRetries <integer> 如果遇到EBUSY、EMFILE、ENFILE、ENOTEMPTY 或 EPERM 错误，则 Node.js 会重试该操作(每次尝试时使用 retryDelay 毫秒时长的线性回退等待)。此选项表示重试的次数。如果 recursive 选项不为 true，则此选项会被忽略。默认值: 0。 \n recursive <boolean> 如果为 true，则执行递归的目录删除。默认值: false。 \n retryDelay <integer> 重试之间等待的时间(以毫秒为单位)。如果 recursive 选项不为 true，则此选项会被忽略。 默认值: 100。 \n \n \n callback <Function>\n \n err <Error> \n \n \n \n \n 异步地删除目录。对文件（而不是目录）使用 fs.rmdir() 会导致 ENOENT 错误（在 Windows 上）或 ENOTDIR 错误（在 POSIX 上）。 \n \n \n \n \n \n \n fs.rmdirSync(path[, options]) \n \n path <string> | <Buffer> | <URL> \n options <Object>\n \n maxRetries <integer> 如果遇到EBUSY、EMFILE、ENFILE、ENOTEMPTY 或 EPERM 错误，则 Node.js 会重试该操作(每次尝试时使用 retryDelay 毫秒时长的线性回退等待)。此选项表示重试的次数。如果 recursive 选项不为 true，则此选项会被忽略。默认值: 0。 \n recursive <boolean> 如果为 true，则执行递归的目录删除。默认值: false。 \n retryDelay <integer> 重试之间等待的时间(以毫秒为单位)。如果 recursive 选项不为 true，则此选项会被忽略。 默认值: 100。 \n \n \n \n \n 同步地删除目录，返回undefined。对文件（而不是目录）使用 fs.rmdir() 会导致 ENOENT 错误（在 Windows 上）或 ENOTDIR 错误（在 POSIX 上）。 \n \n \n \n \n \n \n fs.mkdtemp(prefix[, options], callback) \n \n prefix <string> \n options <string> | <Object>\n \n encoding <string>  默认值:  'utf8' \n \n \n callback <Function>\n \n err <Error> \n directory <string> \n \n \n \n \n 异步地创建一个唯一的临时目录.  生成  要附加在必需的prefix后面的六位随机字符，以创建唯一的临时目录.(就是生成六位随机字符，将这六位随机字符添加到prefix后面，以创建唯一的临时目录) \n \n console . log ( path . join ( os . tmpdir ( ) ,   'dir-' ) ) \n //C:\\Users\\YANCHO~1\\AppData\\Local\\Temp\\dir- \nfs . mkdtemp ( path . join ( os . tmpdir ( ) ,   'dir-' ) ,   ( err ,  directory )   =>   { \n   if ( err )   throw  err ; \n  console . log ( directory ) ; \n   //C:\\Users\\YANCHO~1\\AppData\\Local\\Temp\\dir-aX2EdU(这个就是创建的目录) \n } ) ; \n\n //如果要在指定的目录下创建临时目录 \n const  tmpDir  =  path . resolve ( __dirname ,   './file' ) ; \nfs . mkdtemp ( ` ${ tmpDir } ${ path . sep } ` ,   ( err ,  directory )   =>   { \n   if ( err )   throw  err ; \n  console . log ( directory ) ; \n   //G:\\node_learn\\fs\\file\\CjOt1G \n } ) \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 \n \n \n \n \n \n fs.mkdtempSync(prefix[, options]) \n \n prefix <string> \n options <string> | <Object>\n \n encoding <string>  默认值:  'utf8' \n \n \n \n \n 同步地创建一个唯一的临时目录.返回创建的目录路径 \n \n \n \n \n \n \n fs.open(path[, flag[, mode]], callback) \n \n path <string> | <Buffer> | <URL> \n flag <string> | <number>  默认值:  'r' \n mode <string> | <number>  默认值:  0o666(可读写) [rw-rw-rw-] \n callback <Function>\n \n err <Error> \n fd <number> \n \n \n \n \n 异步地打开文件 \n \n \n \n \n \n \n fs.openSync(path[, flags, mode]) \n \n path <string> | <Buffer> | <URL> \n flags <string> | <number>  默认值:  'r' \n mode <string> | <number>  默认值:  0o666(可读写) [rw-rw-rw-] \n \n \n 同步地打开文件夹，返回number,表示文件描述符 \n \n \n \n \n \n \n fs.opendir(path[, options], callback) \n \n path <string> | <Buffer> | <URL> \n options <Object>\n \n encoding <string> | <null>  默认值:  'utf8' \n bufferSize <number> 当从目录读取时在内部缓冲的目录项的数量。值越高，则性能越好，但内存占用更高。 默认值:  32 \n \n \n callback <Function>\n \n err <Error> \n dir <fs.Dir> \n \n \n \n \n 异步地打开目录。创建一个fs.Dir类，其中包含所有用于更进一步读取和清理目录的的函数 \n \n fs . opendir ( './file' ,   ( err ,  dir )   =>   { \n if ( err )   throw  err ; \nconsole . log ( dir ) ; \ndir . read ( ) . then ( ( data )   =>   { \n    console . log ( data ) ; \n   } ) \n } ) ; \n /*\nDir {\n[Symbol(kDirHandle)]: DirHandle {},\n[Symbol(kDirBufferedEntries)]: [],\n[Symbol(kDirPath)]: './file',\n[Symbol(kDirClosed)]: false,\n[Symbol(kDirOptions)]: { bufferSize: 32, encoding: 'utf8' },\n[Symbol(kDirReadPromisified)]: [Function: bound [kDirReadImpl]],\n[Symbol(kDirClosePromisified)]: [Function: bound close]\n}\nDirent { name: 'CjOt1G', [Symbol(type)]: 2 }\n*/ \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 \n \n \n \n \n fs.opendirSync(path[, options]) \n \n path <string> | <Buffer> | <URL> \n options <Object>\n \n encoding <string> | <null>  默认值:  'utf8' \n bufferSize <number> 当从目录读取时在内部缓冲的目录项的数量。值越高，则性能越好，但内存占用更高。 默认值:  32 \n \n \n \n \n 同步地打开目录。创建一个fs.Dir类，其中包含所有用于更进一步读取和清理目录的的函数 \n \n \n \n \n \n \n fs.read(fd, buffer, offset, length, position, callback) \n \n fd <integer> \n buffer <Buffer> | <TypedArray> | <DataView> \n offset <integer> \n length <integer> \n position <integer> \n callback <Function>\n \n err <Error> \n bytesRead <integer> \n buffer <Buffer> \n \n \n \n \n \n 从 fd 指定的文件中读取数据 。 \n buffer 是数据（从fd读取）要被写入的 buffer 。 \n offset 是buffer中开始写入的偏移量。 \n length  是整数，指定要读取的字节数 \n position  参数指定从文件中开始读取的位置，如果 position 为 null，则从当前文件位置读取数据，并更新文件位置。 如果 position 是整数，则文件位置会保持不变 \n 回调有三个参数 (err, bytesRead, buffer)。 \n \n \n \n \n \n \n \n fs.readSync(fd, buffer, offset, length, position) \n \n fd <integer> \n buffer <Buffer> | <TypedArray> | <DataView> \n offset <integer> \n length <integer> \n position <integer> \n \n \n 返回bytesRead的数量。fs.read的同步版本。 \n \n \n \n \n \n \n fs.read(fd, [options,] callback) \n \n fd <integer> \n options <Object>\n \n buffer <Buffer> | <TypedArray> | <DataView> 默认值: Buffer.alloc(16384) \n offset <integer> 默认值: 0 \n length <integer> 默认值: buffer.length \n position <integer> 默认值: null \n \n \n callback <Function>\n \n err <Error> \n bytesRead <integer> \n buffer <Buffer> \n \n \n \n \n 与上述fs.read函数类似，此版本带有一个可选的options对象。 如果未指定options对象，则使用上述默认值。 \n \n fs . open ( './file/test.txt' ,   ( err ,  fd )   =>   { \n   if ( err )   throw  err ; \n  fs . read ( fd ,   ( err ,  bytesRead ,  buffer )   =>   { \n     if ( err )   throw  err ; \n    console . log ( bytesRead ,  buffer . toString ( ) ) ; \n   } ) \n } ) \n \n 1 2 3 4 5 6 7 \n \n \n \n \n \n fs.readSync(fd, buffer, [options]) \n \n fd <integer> \n buffer <Buffer> | <TypedArray> | <DataView> \n options <Object>\n \n offset <integer> 默认值: 0 \n length <integer> 默认值: buffer.length \n position <integer> 默认值: null \n \n \n \n \n 返回bytesRead，即读取的字节数 \n \n \n \n \n \n \n fs.readv(fd, buffers[, position], callback) \n \n fd <integer> \n buffers <ArrayBufferView[]> \n position <integer> \n callback <Function>\n \n err <Error> \n bytesRead <integer> \n buffers <ArrayBufferView[]> \n \n \n \n \n 从fd指定的文件中读取，并使用readv()写入ArrayBufferViews数组。position是从文件开头应读取数据的偏移量。 如果typeof position !== 'number'，将从当前位置读取数据。回调函数提供三个参数：err，bytesRead和buffers。 bytesRead是从文件读取的字节数。 \n \n \n \n \n \n \n fs.readvSync(fd, buffers[, position]) \n \n fd <integer> \n buffers <ArrayBufferView[]> \n position <integer> \n \n \n 返回bytesRead，读取的字节数 \n \n \n \n \n \n \n fs.readdir(path[, options], callback) \n \n path <string> | <Buffer> | <URL> \n options <string> | <Object>\n \n encoding <string> 默认值：'utf8' \n withFileTypes <boolean> 默认值：false \n \n \n callback <Function>\n \n err <Error> \n files <string[]> | <Buffer[]> | <fs.Dirent[]> \n \n \n \n \n 回调有两个参数 (err, files)，其中 files 是目录中文件的名称的数组（不包括 '.' 和 '..'）。如果 encoding 被设置为 'buffer'，则返回的文件名会作为 Buffer 对象传入。如果 options.withFileTypes 被设置为 true，则 files 数组会包含 fs.Dirent 对象。 \n \n fs . readdir ( './file' ,   { encoding :   'utf8' , withFileTypes : true } ,   ( err ,  files )   =>   { \n   if ( err )   throw  err ; \n  console . log ( files ) ; \n   //withFileTypes:false时[ 'CjOt1G', 'hello.txt', 'hello_hard.txt', 'test.txt' ] \n   //withFileTypes:true时 \n   //[ \n   //  Dirent { name: 'CjOt1G', [Symbol(type)]: 2 }, \n   //  Dirent { name: 'hello.txt', [Symbol(type)]: 1 }, \n   //  Dirent { name: 'hello_hard.txt', [Symbol(type)]: 1 }, \n   //  Dirent { name: 'test.txt', [Symbol(type)]: 1 } \n   //] \n } ) \n \n 1 2 3 4 5 6 7 8 9 10 11 12 \n \n \n \n \n fs.readdirSync(path[, options]) \n \n path <string> | <Buffer> | <URL> \n options <string> | <Object>\n \n encoding <string> 默认值：'utf8' \n withFileTypes <boolean> 默认值：false \n \n \n \n \n fs.readdir的同步版本 \n \n \n \n \n \n \n fs.readFile(path[, options], callback) \n \n path <string> | <Buffer> | <URL> | <integer> 文件名或文件描述符 \n options <Object> | <string>\n \n encoding <string> | <null> 默认值：null \n flag <string> 默认值：'r' \n \n \n callback <Function>\n \n err <Error> \n data <Buffer> | <string> \n \n \n \n \n 异步地读取文件内容。如果 options 是字符串，则它指定字符编码。当路径是目录时，则 fs.readFile() 和 fs.readFileSync() 的行为是特定于平台的。 在 macOS、Linux 和 Windows 上，会返回错误。 在 FreeBSD 上，会返回目录内容的表示。 \n \n fs . readFile ( './file/test.txt' ,   ( err ,  data )   =>   { \n   if ( err )   throw  err ; \n  console . log ( data . toString ( ) ) ; \n } ) \n \n 1 2 3 4 \n \n \n \n \n fs.readFileSync(path[, options]) \n \n path <string> | <Buffer> | <URL> | <integer> 文件名或文件描述符 \n options <Object> | <string>\n \n encoding <string> | <null> 默认值：null \n flag <string> 默认值：'r' \n \n \n \n \n 返回path的内容。fs.readFile的同步版本 \n \n \n \n \n \n \n fs.symlink(target, path[, type], callback) \n \n target  <string> | <Buffer> | <URL> \n path  <string> | <Buffer> | <URL> \n type  <string> \n callback <Function>\n \n err <Error> \n \n \n \n \n 异步地创建符号链接。创建名为path的链接，该链接指向 target。(path -> target)。除了可能的异常，完成回调没有其他参数。type 参数仅在Windows上可用，在其他平台上则会被忽略。它可以被设置为 'dir'、 'file' 或 'junction'。如果未设置 type 参数，则 Node.js 将会自动检测 target 的类型并使用 'file' 或 'dir'。 如果 target 不存在，则将会使用 'file'。 Windows上的junction points要求target路径是绝对路径。 当使用 'junction' 时，target 参数将会自动地标准化为绝对路径。 \n \n fs . symlink ( './file/' ,   './file_symlink' ,   'dir' ,   ( err )   =>   { \n   if ( err )   throw  err ; \n } ) \n \n 1 2 3 \n ps:这个在window 10上并没有创建成功。会报错：operation not permitted, symlink '.\\file' -> 'G:\\node_learn\\fs\\file_symlink'。下面的同步版本也是一样。看样子是操作系统不允许。我想想... \n \n \n \n \n \n \n fs.symlinkSync(target, path[, type]) \n \n target  <string> | <Buffer> | <URL> \n path  <string> | <Buffer> | <URL> \n type  <string> \n \n \n 返回undefined。同步地创建符号链接 \n \n \n \n \n \n \n fs.readlink(path[, options], callback) \n \n path <string> | <Buffer> | <URL> \n options <string> | <Object>\n \n encoding <string> 默认值：'utf8' \n \n \n callback <Function>\n \n err <Errro> \n linkstring <string> | <Buffer> \n \n \n \n \n 可选的 options 参数可以是字符串（指定字符编码）、或具有 encoding 属性（指定用于传给回调的链接路径的字符编码）的对象。 如果 encoding 被设置为 'buffer'，则返回的链接路径会作为 Buffer 对象传入。 \n \n //应该这么写，上面的创建符号链接失败，这个就是demo吧，不是实操 \nfs . symlink ( './file' ,   './file_symlink' ,   'dir' ,   ( err )   =>   { \n   if ( err )   throw  err ; \n  fs . readlink ( './file_symlink' ,   ( err ,  linkstring )   =>   { \n     if ( err )   throw  err ; \n    console . log ( linkstring ) ; //  ./file \n   } ) \n } ) \n \n 1 2 3 4 5 6 7 8 \n 链接路径linkstring应该是指 符号链接 所指向 的路径。 \n \n \n \n \n \n \n fs.readlinkSync(path[, options]) \n \n path <string> | <Buffer> | <URL> \n options <string> | <Object>\n \n encoding <string> 默认值：'utf8' \n \n \n \n \n 返回string或buffer \n \n \n \n \n \n \n fs.realpath(path[, options], callback) \n \n path <string> | <Buffer> | <URL> \n options <string> | <Object>\n \n encoding <string> 默认值：'utf8' \n \n \n callback <Function>\n \n err <Error> \n resolvedPath <string> | <buffer> \n \n \n \n \n 通过解析 .、 .. 和符号链接异步地计算规范路径名。仅支持可转换为 UTF8 字符串的路径。可选的 options 参数可以是字符串（指定字符编码）、或具有 encoding 属性（指定用于传给回调的路径的字符编码）的对象。 如果 encoding 被设置为 'buffer'，则返回的路径会作为 Buffer 对象传入。 \n \n fs . realpath ( './file' ,   ( err ,  resolvedPath )   =>   { \n   if ( err )   throw  err ; \n  console . log ( resolvedPath ) ; //G:\\node_learn\\fs\\file \n } ) \n \n 1 2 3 4 \n 此函数的行为类似于 realpath(3)，但有一些例外: \n \n 在不区分大小写的文件系统上不执行大小写转换。 \n \n \n \n \n 符号链接的最大数量与平台无关, 并且通常高于本地 realpath(3) 实现支持的数量。 \n \n \n \n \n \n \n \n fs.realpath.native(path[, options], callback) \n \n path <string> | <Buffer> | <URL> \n options <string> | <Object>\n \n encoding <string> 默认值：'utf8' \n \n \n callback <Function>\n \n err <Error> \n resolvedPath <string> | <buffer> \n \n \n \n \n 异步的  realpath(3) 。 \n \n \n \n \n \n \n fs.realpathSync(path[, options]) \n \n path <string> | <Buffer> | <URL> \n options <string> | <Object>\n \n encoding <string> 默认值：'utf8' \n \n \n \n \n 返回已解析的路径名。fs.realpath(path[, options], callback)的同步版本 \n \n \n \n \n \n \n fs.realpathSync.native(path[, options]) \n \n path <string> | <Buffer> | <URL> \n options <string> | <Object>\n \n encoding <string> 默认值：'utf8' \n \n \n \n \n 同步地 realpath(3) \n \n \n \n \n \n \n fs.rename(oldPath, newPath, callback) \n \n oldpath <string> | <Buffer> | <URL> \n newpath <string> | <Buffer> | <URL> \n callback <Function>\n \n err <Error> \n \n \n \n \n 异步地把 oldPath 文件重命名为 newPath 提供的路径名。 如果 newPath 已存在，则覆盖它。 除了可能的异常，完成回调没有其他参数。 \n \n fs . rename ( './file/hello.txt' ,   './file/hello_bak.txt' ,   ( err )   =>   { \n   if ( err )   throw  err ; \n  console . log ( 'rename successfully' ) ; \n } ) \n \n 1 2 3 4 \n \n \n \n \n fs.renameSync(oldPath, newPath) \n \n oldpath <string> | <Buffer> | <URL> \n newpath <string> | <Buffer> | <URL> \n \n \n 返回undefined \n \n \n \n \n \n \n fs.write(fd, buffer[, offset[, length[, position]]], callback) \n \n fd <integer> \n buffer <Buffer> | <TypedArray> | <DataView> \n offset <integer> \n length <integer> \n position <integer> \n callback <Function>\n \n err <Error> \n bytesWritten <integer> \n buffer <Buffer> | <TypedArray> | <DataView> \n \n \n \n \n 写入buffer到fd指定的文件。 offset 决定buffer中要被写入的部位，  length 是整数，指定要写入的字节数。position 指定文件开头的偏移量（数据要被写入的位置）。 如果 typeof position !== 'number'，则数据会被写入当前的位置。 \n \n let  data  =  Buffer . from ( 'yangugu' ) ; \nfs . open ( './file/new.txt' ,   'w' ,   ( err ,  fd )   =>   { \n   if ( err )   throw  err ; \n  fs . write ( fd ,  Buffer . from ( 'yangugu' ) ,   0 ,  data . length  -   2 ,   ( err ,  bytesWritten ,  buffer )   =>   { \n     if ( err )   throw  err ; \n    console . log ( bytesWritten ,  buffer ) ; \n   } ) \n } ) \n \n 1 2 3 4 5 6 7 8 \n \n \n \n \n \n \n fs.writeSync(fd, buffer[, offset[, length[, position]]]) \n \n fd <integer> \n buffer <Buffer> | <TypedArray> | <DataView> \n offset <integer> \n length <integer> \n position <integer> \n \n \n 返回写入的字节数。fs.write(fd, buffer[, offset[, length[, position]]], callback)的同步版本。 \n \n \n \n \n \n \n fs.write(fd, string[, position[, encoding]], callback) \n \n fd <integer> \n string <string> \n position <integer> \n encoding <string> 默认值：'utf8' \n callback <Function>\n \n err <Error> \n written <integer> \n string <string> \n \n \n \n \n 将 string 写入到 fd 指定的文件。 如果 string 不是一个字符串，则会抛出异常。position 指定文件开头的偏移量（数据要被写入的位置）。 如果 typeof position !== 'number'，则数据会被写入当前的位置。encoding 是期望的字符串编码。回调会接收到参数 (err, written, string)，其中 written 指定传入的字符串中被要求写入的字节数。 被写入的字节数不一定与被写入的字符串字符数相同。 \n \n let  data  =  fs . readFileSync ( './file/hello.txt' ) ; \nconsole . log ( data ) ; \n\nfs . open ( './file/hello.txt' ,   'w' ,   ( err ,  fd )   =>   { \n   if ( err )   throw  err ; \n  fs . write ( fd ,   'look' ,   2 ,   'utf8' ,   ( err ,  written ,  string )   =>   { \n     if ( err )   throw  err ; \n     let  data1  =  fs . readFileSync ( './file/hello.txt' ) ; \n    console . log ( data1 ) ; \n   } ) \n } ) \n \n 1 2 3 4 5 6 7 8 9 10 11 \n \n \n \n \n \n fs.writeSync(fd, string[, position[, encoding]]) \n \n fd <integer> \n string <string> \n position <integer> \n encoding <string> 默认值：'utf8' \n \n \n 返回写入的字节数。fs.write(fd, string[, position[, encoding]], callback)的同步版本。 \n \n \n \n \n \n \n fs.writev(fd, buffers[, position], callback) \n \n fd <integer> \n buffers <ArrayBufferView[]> \n position <integer> \n callback <Function>\n \n err <Error> \n bufferWritten <integer> \n buffers <ArrayBufferView[]> \n \n \n \n \n 使用 writev() 将一个 ArrayBufferView 数组写入 fd 指定的文件。其他字段含义参考fs.readv()。 \n \n \n \n \n \n \n fs.writevSync(fd, buffers[, position]) \n \n fd <integer> \n buffers <ArrayBufferView[]> \n position <integer> \n \n \n 返回写入的字节数。fs.writev(fd, buffers[, position], callback)的同步版本。 \n \n \n \n \n \n \n fs.writeFile(file, data[, options], callback) \n \n file <string> | <Buffer> | <URL> | <integer> 文件名或文件描述符 \n data <string> | <Buffer> | <TypedArray> | <DataView> \n options <Object> | <string>\n \n encoding <string> | <null> 默认值：'utf8' \n mode <integer> 默认值：0o666 \n flag <string> 默认值：'w' \n \n \n callback <Function>\n \n err <Error> \n \n \n \n \n 当file是文件名时，则异步地写入数据到文件(如果文件已存在，则覆盖文件。如果文件按不存在，则创建)。 data可以是字符串或buffer。 \n \n \n 当 file 是文件描述符时，则其行为类似于直接调用 fs.write()。如果 options 是字符串，则它指定字符编码。 \n \n //如果 data 是 buffer，则 encoding 选项会被忽略。 \n const  data  =   new   Uint8Array ( Buffer . from ( 'Node.js 666' ) ) ; \nfs . writeFile ( './file/new.txt' ,  data ,   ( err )   =>   { \n   if ( err )   throw  err ; \n  console . log ( '文件已保存' ) ; \n } ) \n \n 1 2 3 4 5 6 \n \n \n \n \n fs.writeFileSync(file, data[, options]) \n \n file <string> | <Buffer> | <URL> | <integer> 文件名或文件描述符 \n data <string> | <Buffer> | <TypedArray> | <DataView> \n options <Object> | <string>\n \n encoding <string> | <null> 默认值：'utf8' \n mode <integer> 默认值：0o666 \n flag <string> 默认值：'w' \n \n \n \n \n 返回undefined。fs.writeFile(file, data[, options], callback)的异步版本。 \n fs的Promise API \n fs.promises API 提供了一组备用的异步文件系统的方法，它们返回 Promise 对象而不是使用回调。 API 可通过 require('fs').promises 或 require('fs/promises') 访问。 \n filehandler类 \n \n 这一块的api和上面的提到的异步形式的api很像。如需要可以访问 fs的promise API \n  关于符号链接一些知识 \n \n 其实只有两种：硬链接和符号链接。硬链接就是：一面墙上有一个洞，洞里放着一个苹果。从墙的这一面看是这个苹果，从墙的另一面看还是同一个苹果。硬链接就是同一块数据但有两个不同的名字，读写的时候本质上都是修改的同一块数据。硬链接在删除的时候只是删除了一个名字。只有一块数据的所有名字都删除了的时候，数据才会被删除。（删除的时候相当于把墙的这一面糊上，但苹果本身不动，只有两面都糊上了，你才会看不到）符号链接就是：我声称我有一个苹果，但是当你找我要的时候，我对你说，到某个建筑物的仓库就可以拿到那个苹果了。可见我并不真正拥有一个苹果，我只是拥有“某个地方有一个苹果”这个信息。但对于外部的观察者来说，这跟我实际上拥有一个苹果并无差异。符号链接的删除：假设我死了，不会影响到原始数据。假设原始数据没了，那我这个符号链接就变成了一张空头支票，也就是悬空的符号链接。快捷方式：本质上就是符号链接，只不过 Windows 的资源管理器可以直接管理这种文件。junction points：可能跟符号链接的区别仅仅是能否使用相对路径。复制：把一个苹果变成两个苹果。链接都是为文件起别名（alias）的方式，跟复制有本质区别的。 \n \n ",summary:"注：斜体加粗的api是有疑问的。\n\n所有文件系统操作都具有同步和异步的形式\n\n大多数 fs 操作接受的文件路径可以指定为字符串、Buffer、或使用 file:协议的 URL对象\n\n文件描述符: 在 POSIX 系统上，对于每个进程，内核都维护着一张当前打开着的文件和资源的表格。 每个打开的文件都分配了一个称为文件描述符的简单的数字标识符。 在系统层，所有文件系统操作都使用这些文件描述符来标识和跟踪每个特定的文件。 Windows 系统使用了一个虽然不同但概念上类似的机制来跟踪资源。 为了简化用户的工作，Node.js 抽象出操作系统之间的特定差异，并为所有打开的文件分配一个数字型的文件描述符 ...",id:"post",pid:"post",readingTime:{text:"23 min read",minutes:22.705,time:1362300,words:4541}},{title:"centos7安装jenkins和gitlab踩坑记",frontmatter:{title:"centos7安装jenkins和gitlab踩坑记",date:"2020-05-17",author:"Yoha",tags:["CI","gitlab","jenkins"],location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017230306.jpeg",meta:[{name:"title",content:"centos7安装jenkins和gitlab踩坑记"},{name:"description",content:"centos7安装jenkins和gitlab踩坑记"},{name:"keywords",content:"centos7, jenkins, gitlab, CI"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-05-17-gitlab&jenkins.html",relativePath:"_posts/2020-05-17-gitlab&jenkins.md",key:"v-6d7c83aa",path:"/2020/05/17/gitlab-jenkins/",headers:[{level:2,title:"一、背景",slug:"一、背景"},{level:2,title:"二、安装gitlab",slug:"二、安装gitlab"},{level:3,title:"安装ssh协议",slug:"安装ssh协议"},{level:3,title:"设置ssh服务开机自启动",slug:"设置ssh服务开机自启动"},{level:3,title:"启动ssh服务",slug:"启动ssh服务"},{level:3,title:"安装防火墙",slug:"安装防火墙"},{level:3,title:"开启防火墙",slug:"开启防火墙"},{level:3,title:"添加http服务到firewalld",slug:"添加http服务到firewalld"},{level:3,title:"重启防火墙",slug:"重启防火墙"},{level:3,title:"安装Postfix以发送邮件",slug:"安装postfix以发送邮件"},{level:3,title:"将postfix服务设置成开机自启动",slug:"将postfix服务设置成开机自启动"},{level:3,title:"启动postfix",slug:"启动postfix"},{level:3,title:"安装wget，用于从外网上下载插件",slug:"安装wget-用于从外网上下载插件"},{level:3,title:"下载gitlab",slug:"下载gitlab"},{level:3,title:"安装Gitlab",slug:"安装gitlab"},{level:3,title:"修改gitlab配置文件指定服务器ip和自定义端口",slug:"修改gitlab配置文件指定服务器ip和自定义端口"},{level:3,title:"将9000端口添加到防火墙中",slug:"将9000端口添加到防火墙中"},{level:3,title:"重启防火墙",slug:"重启防火墙-2"},{level:3,title:"重置gitlab",slug:"重置gitlab"},{level:3,title:"启动gitlab",slug:"启动gitlab"},{level:3,title:"访问gitlab页面",slug:"访问gitlab页面"},{level:3,title:"新建项目(建一个readme,写点东西)",slug:"新建项目-建一个readme-写点东西"},{level:3,title:"生成ssh key(这又出事啦)",slug:"生成ssh-key-这又出事啦"},{level:2,title:"三、安装jenkins",slug:"三、安装jenkins"},{level:3,title:"首先要先安装java环境",slug:"首先要先安装java环境"},{level:3,title:"下载jenkins",slug:"下载jenkins"},{level:3,title:"安装jenkins",slug:"安装jenkins"},{level:3,title:"配置端口及权限",slug:"配置端口及权限"},{level:3,title:"启动",slug:"启动"},{level:3,title:"访问",slug:"访问"},{level:3,title:"安装需要的插件",slug:"安装需要的插件"},{level:3,title:"系统配置",slug:"系统配置"},{level:3,title:"新建任务",slug:"新建任务"},{level:2,title:"四、配置gitlab webhook",slug:"四、配置gitlab-webhook"},{level:2,title:"五、参考文章",slug:"五、参考文章"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" centos7安装jenkins和gitlab踩坑记 \n 一、背景 \n \n 主机:win10 \n 虚拟机:centos7 \n 目标：成功安装gitlab&jenkins，并且可以正常利用gitlab的push event webhook触发jenkins的自动构建任务。 \n 二、安装gitlab \n 首先要在CentOS系统上面安装所需的依赖：ssh、防火墙、postfix(用于邮件通知)、wegt，以下这些命令也会打开系统防火墙中的HTTP和SSH端口访问。 \n 安装ssh协议 \n \n 安装命令: yum install -y curl policycoreutils-python openssh-server \n 设置ssh服务开机自启动 \n \n 安装命令: ystemctl enable sshd \n 启动ssh服务 \n \n 启动命令: systemctl start sshd \n 安装防火墙 \n \n 安装命令: yum install firewalld systemd -y \n 开启防火墙 \n \n 开启命令: service firewalld  start \n 添加http服务到firewalld \n \n 命令: firewall-cmd --permanent --add-service=http, pemmanent表示永久生效，若不加--permanent系统下次启动后就会失效。 \n 重启防火墙 \n \n 重启命令: systemctl reload firewalld \n 安装Postfix以发送邮件 \n \n 安装命令: yum install postfix \n 将postfix服务设置成开机自启动 \n \n 命令: systemctl enable postfix \n 启动postfix \n \n 启动命令: systemctl start postfix \n 安装wget，用于从外网上下载插件 \n \n 安装命令: yum -y install wget \n 下载gitlab \n \n 命令: wget https://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/el7/gitlab-ce-10.0.0-ce.0.el7.x86_64.rpm \n 安装Gitlab \n \n 命令: rpm -ivh gitlab-ce-10.5.7-ce.0.el7.x86_64.rpm \n 修改gitlab配置文件指定服务器ip和自定义端口 \n \n vim  /etc/gitlab/gitlab.rb,修改默认端口到9000 \n \n \n \n 配置时区: gitlab_rails['time_zone'] = 'Asia/Shanghai' \n 将9000端口添加到防火墙中 \n \n 命令: firewall-cmd --zone=public --add-port=9000/tcp --permanent \n 重启防火墙 \n \n 重启命令: systemctl reload firewalld \n 重置gitlab \n \n 命令: gitlab-ctl reconfigure \n 启动gitlab \n \n 命令：gitlab-ctl restart \n 访问gitlab页面 \n \n 在浏览器里面直接输入服务器IP和指定的端口号就可以进行访问，第一次登陆的时候会默认进入修改密码界面。默认用户是root。 \n \n \n 到这gitlab就算安装成功啦，接下来就是 \n 新建项目(建一个readme,写点东西) \n 生成ssh key(这又出事啦) \n (主机和虚拟机要互相ping的通才可以下面的操作) \n 本来正常的生成ssh key：ssh-keygen -t rsa -C \"admin@example.com\" \n \n 注意：新建了gitlab的账户,默认的邮箱就是admin@example.com，可以添加自己的邮箱，然后gitlab会发送一封确认邮件，确认一下就可以啦。 \n \n 接着说，上面生成ssh key的命令我是在windows上执行的，但是之前生成过一次ssh key(绑定的是公司的邮箱，也默认放在.ssh下面)。遇到的第一个问题就是:以前都是enter几下就完事，但是这次失败啦，最后会问一句是否覆盖.ssh下面的公钥和私钥，默认是no。所以，enter之后，并没有生成新的公钥和私钥。然后在.ssh同级目录下新建.ssh_test目录，在目录中新建2个文件id_rsa以及id_rsa.pub。然后再生成ssh key的时候把.ssh_test的路径填写在 \n \n Enter file in which to save the key (/c/Users/xxxx/.ssh/id_rsa): \n \n 即可。 \n 终于ssh key生成成功啦，到gitlab的settings -> SSH Keys 添加公钥。 \n 然后试着克隆一下吧(又出问题啦0.0) \n \n 一直要求输入密码。在网上查了一下原因：ssh-agent服务没把新产生的id_rsa包含进去。解决办法： \n \n \n eval \"$(ssh-agent -s)\" \n ssh-add 新id_rsa的路径 如:ssh-add /c/Users/xxxx/.ssh_test/id_rsa \n \n \n 这个时候git clone git@192.168.198.129:root/test_jenkins.git ./test_jenkins就ok啦！！ \n 这样gitlab就安装成功并且可以正常使用的。 \n 三、安装jenkins \n 首先要先安装java环境 \n 下载jdk \n \n 我在主机上下载的，然后用xftp传到虚拟机。 \n 创建安装目录 \n \n mkdir /usr/local/java \n 解压至安装目录 \n \n tar -zxvf jdk-8u251-linux-x64.tar.gz -C /usr/local/java \n 设置环境变量 \n \n vim /etc/profile \n \n 在末尾添加 \n \n export   JAVA_HOME = /usr/local/java/jdk1.8.0_251\n export   JRE_HOME = ${JAVA_HOME} /jre\n export   CLASSPATH = .: ${JAVA_HOME} /lib: ${JRE_HOME} /lib\n export   PATH = ${JAVA_HOME} /bin: $PATH \n \n 1 2 3 4 使环境变量生效： \n \n source /etc/profile \n \n 添加软连接 \n \n ln -s /usr/local/java/jdk1.8.0_251/bin/java /usr/bin/java \n \n 检查一下: \n \n java -version \n \n \n 这样就ok啦。 \n 下载jenkins \n 各个版本的jenkins \n 建议下载最新的，我也是在主机上下载的然后xftp传到虚拟机上的。jenkins-2.222.3-1.1.noarch.rpm,我下载的这个版本。 \n 安装jenkins \n \n rpm -ivh jenkins-2.222.3-1.1.noarch.rpm \n 配置端口及权限 \n \n vim /etc/sysconfig/jenkins \n \n \n 然后 \n #修改目录权限 \n chown  -R root:root /var/lib/jenkins\n chown  -R root:root /var/cache/jenkins\n chown  -R root:root /var/log/jenkins\n \n 1 2 3 4 重启一下： \n \n service jenkins restart \n 启动 \n \n systemctl start jenkins \n \n 遇到的问题: \n \n 启动之后，查看状态systemctl status jenkins，发现不是正常的active (running), 而是active(exited)。  解决办法：  将8000端口添加到防火墙firewall-cmd --zone=public --add-port=8000/tcp --permanent \n 访问 \n 访问jenkins地址 http:<ip或者域名>:8000 \n \n 执行命令  cat /var/lib/jenkins/secrets/initialAdminPassword  查看密码，然后插件安装选择推荐插件 \n \n 在这可能等的时间会比较久，如果有安装失败的也可以选择continue,去创建一个用户。 \n 安装需要的插件 \n 首先要更新插件源，因为官方的插件源安装起来很慢 还容易失败。 \n 升级的源:https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/2.222/update-center.json \n \n \n \n \n jenkins系统管理下的插件管理，在线安装Gitlab Hook Plugin和Gitlab Plugin这两个插件，然后叫重启jenkins。 \n 系统配置 \n 在manager jenkins中选择configure System,找到gitlab,设置好Gitlab的参数，并测试时候能连接上Gitlab \n \n \n API token可以在gitlab中的用户的设置中找到 \n 新建任务 \n \n \n \n 这个priviate Key就是一开始生成id_rsa私钥。 \n \n 在这选的触发条件按是push后触发。 \n \n 这个是构建时要执行的脚本，主要看看是否成功。 \n 复制一下GitLab webhook URL,在这还有一个高级选项，点开然后去生成一个Secret token，这两个在gitlab中要用到。 \n 四、配置gitlab webhook \n 进去项目的settings-integrations \n \n \n 然后点击add webhook。 \n \n 测试一下：选择test下面的push event。 \n 按道理来说应该是触发成功然后再jenkins中也可以看到构建,但是gitlab直接500啦。(0.0) \n 了解了一下，gitlab默认是不允许来自钩子的本地网络的请求的。 \n 解决办法参考这两篇文章： \n Integrations Webhooks not working - Error 500 \n Webhook does not work for me when i update to date! \n 我直接把办法也说了吧，就是： \n \n 然后测试一下，ok啦 \n \n 去jenkins看看 \n \n over!!!!! \n 稍等，下一步计划——pipeline and jenkinsfile \n 五、参考文章 \n \n centos7安装gitlab并配置汉化 \n ssh链接git服务器，解决push pull要求输入密码问题 \n CentOS 7 安装 Jenkins \n 利用gitlab的webhook触发jenkins \n \n ",summary:"\n一、背景\n\n主机:win10\n虚拟机:centos7\n目标：成功安装gitlab&jenkins，并且可以正常利用gitlab的push event webhook触发jenkins的自动构建任务。\n\n二、安装gitlab\n\n首先要在CentOS系统上面安装所需的依赖：ssh、防火墙、postfix(用于邮件通知)、wegt，以下这些命令也会打开系统防火墙中的HTTP和SSH端口访问。\n\n安装ssh协议\n\n>安装命令: yum install -y curl policycoreutils-python openssh-server\n\n设置ssh服务开机自启动\n\n>安装命令: ystemct ...",id:"post",pid:"post",readingTime:{text:"3 min read",minutes:2.045,time:122699.99999999999,words:409}},{title:"node核心模块——os",frontmatter:{title:"node核心模块——os",date:"2020-05-27",author:"Yoha",tags:["前端开发","JavaScript","node"],location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017192245.jpg",meta:[{name:"title",content:"node核心模块os"},{name:"description",content:"node核心模块os"},{name:"keywords",content:"node, OS"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-05-27-node-os.html",relativePath:"_posts/2020-05-27-node-os.md",key:"v-1acf2b1e",path:"/2020/05/27/node-os/",lastUpdated:"8/17/2021, 2:49:02 PM",content:" node module:  os \n \n os.EOL \n \n \n string类型 \n \n 操作系统特定的行末标志。 \n \n 在POSIX上是   \\n \n 在Windows上是  \\r\\n \n \n \n console . log ( 'hello'   +  os . EOL   +   'world' ) ; \n \n 1 \n \n PS: \\r: 回到当前行的最左边；\\n: 向下移动一行，并不左右移动 \n \n \n \n \n \n \n \n \n os.arch() \n \n 返回<string> \n \n \n 返回为其编译 Node.js 二进制文件的操作系统的 CPU 架构。 可能的值有：'arm'、 'arm64'、 'ia32'、 'mips'、 'mipsel'、 'ppc'、 'ppc64'、 's390'、 's390x'、 'x32' 和 'x64'。返回的值等价于 process.arch。 \n \n console . log ( os . arch ( ) ) ; // x64 \n \n 1 \n \n \n \n \n os.constants \n \n Object类型 \n \n \n 包含错误码、进程信号等常用的操作系统特定的常量。 \n \n \n \n \n \n \n os.cpus() \n \n 返回<Object[]> \n \n \n 返回一个对象数组，其中包含有关每个逻辑 CPU 内核的信息。 \n \n console . log ( os . cpus ( ) ) ; \n [ \n   { \n    model :   'Intel(R) Core(TM) i7-8700 CPU @ 3.20GHz' , \n    speed :   3192 ,   //以兆赫兹为单位 \n    times :   { \n      user :   18772359 ,   //CPU 在用户模式下花费的毫秒数 \n      nice :   0 ,   //CPU 在良好模式下花费的毫秒数 \n      sys :   16848062 ,   //CPU 在系统模式下花费的毫秒数 \n      idle :   565596921 ,   //CPU 在空闲模式下花费的毫秒数 \n      irq :   5211390   //CPU 在中断请求模式下花费的毫秒数 \n     } \n   } , \n   ... \n ] \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 \n \n \n \n \n os.endianness() \n \n 返回<string> \n \n \n 返回一个字符串，该字符串标识为其编译 Node.js 二进制文件的 CPU 的字节序。可能的值有， 'BE' 用于大端字节序， 'LE' 用于小端字节序。 \n \n console . log ( os . endianness ( ) ) ;   //LE \n \n 1 \n \n \n \n \n os.totalmem() \n \n 返回<integer> \n \n \n 以整数的形式返回系统的内存总量（以字节为单位）。 \n \n \n \n \n \n \n os.freemem() \n \n 返回<integer> \n \n \n 以整数的形式返回空闲的系统内存量（以字节为单位） \n \n \n \n \n \n \n os.getPriority([pid]) \n \n pid <integer>要为其获取调度优先级的进程 ID。默认值0。 \n 返回<integer> \n \n \n 返回由 pid 指定的进程的调度优先级。 如果未提供 pid 或者为 0，则返回当前进程的优先级. \n \n \n \n \n \n \n os.homedir() \n \n 返回<string> \n \n \n 返回当前用户的主目录的字符串路径。 \n \n 在 POSIX 上，使用 $HOME 环境变量（如果有定义）。 否则，使用有效的 UID 来查找用户的主目录。 \n 在 Windows 上，使用 USERPROFILE 环境变量（如果有定义）。 否则，使用当前用户的配置文件目录的路径。 \n \n \n \n \n \n \n \n os.hostname() \n \n 返回<string> \n \n \n 以字符串的形式返回操作系统的主机名 \n \n \n \n \n \n \n os.loadavg() \n \n 返回<number[]> \n \n \n 返回一个数组，包含1、5和15分钟的平均负载。平均负载是系统活动性的测量，由操作系统计算得出，并表现为一个分数。平均负载是 UNIX 特定的概念。 在 Windows 上，其返回值始终为 [0, 0, 0]。 \n \n \n \n \n \n \n os.networkInterfaces() \n \n 返回<object> \n \n \n 返回一个对象，该对象包含已分配了网络地址的网络接口。 \n \n 分配的网络地址的对象是上可用的属性包括： \n \n address 分配的 IPv4 或 IPv6 地址 \n netmask IPv4 或 IPv6 的子网掩码 \n family  IPv4 或 IPv6 \n mac 网络接口的 MAC 地址 \n internal  如果网络接口是不可远程访问的环回接口或类似接口，则为 true，否则为 false \n scopeid 数值型的 IPv6 作用域 ID（仅当 family 为 IPv6 时指定） \n cidr  以 CIDR 表示法分配的带有路由前缀的 IPv4 或 IPv6 地址。如果 netmask 无效，则此属性会被设为 null \n \n console . log ( os . networkInterfaces ( ) ) ; \n { \n   ... \n   'VMware Network Adapter VMnet1' :   [ \n     { \n      address :   'fe80::9045:f2d4:5312:cd9a' , \n      netmask :   'ffff:ffff:ffff:ffff::' , \n      family :   'IPv6' , \n      mac :   '00:50:56:c0:00:01' , \n      internal :   false , \n      cidr :   'fe80::9045:f2d4:5312:cd9a/64' , \n      scopeid :   86 \n     } , \n     { \n      address :   '169.254.205.154' , \n      netmask :   '255.255.0.0' , \n      family :   'IPv4' , \n      mac :   '00:50:56:c0:00:01' , \n      internal :   false , \n      cidr :   '169.254.205.154/16' \n     } \n   ] , \n   ... . \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 \n \n \n \n \n os.platform() \n \n 返回<string> \n \n \n 返回标识操作系统平台的字符串。 该值在编译时设置。 可能的值有 'aix'、 'darwin'、 'freebsd'、 'linux'、 'openbsd'、 'sunos' 和 'win32'。返回的值等价于process.platform \n \n \n \n \n \n \n os.release() \n \n 返回 <string> \n \n \n 以字符串的形式返回操作系统发行版本 \n \n console . log ( os . release ( ) ) ;   //6.1.7601 \n \n 1 \n \n \n \n \n os.setPriority([pid, ]priority) \n \n pid <integer> 为其设置调度优先级的进程 ID。默认值 0 \n priority <integer> 分配给进程的调度优先级 \n \n \n 尝试为 pid 指定的进程设置调度优先级。 如果未提供 pid 或者为 0，则使用当前进程的进程 ID。 \n \n \n priority 输入必须是 -20（高优先级）到 19（低优先级）之间的整数。 由于 Unix 优先级和 Windows 优先级之间的差异， priority 会被映射到 os.constants.priority 中的六个优先级常量之一。 当检索进程的优先级时，此范围的映射可能导致 Windows 上的返回值略有不同。 为避免混淆，应将 priority 设置为优先级常量之一。 \n \n //os.constants.priority \npriority :   [ Object :   null  prototype ]   { \n     PRIORITY_LOW :   19 , \n     PRIORITY_BELOW_NORMAL :   10 , \n     PRIORITY_NORMAL :   0 , \n     PRIORITY_ABOVE_NORMAL :   - 7 , \n     PRIORITY_HIGH :   - 14 , \n     PRIORITY_HIGHEST :   - 20 \n   } \n \n 1 2 3 4 5 6 7 8 9 \n \n \n \n \n os.tmpdir() \n \n 返回<string> \n \n \n 以字符串的形式返回操作系统的默认临时文件目录。这个在fs.mkdtemp(prefix[, options], callback)创建临时目录时曾有用到。 \n \n \n \n \n \n \n os.type() \n \n 返回 <string> \n \n \n 返回操作系统的名字。 例如，在 Linux 上返回 'Linux'，在 macOS 上返回 'Darwin'，在 Windows 上返回 'Windows_NT'。 \n \n \n \n \n \n \n os.uptime() \n \n 返回 <integer> \n \n \n 返回系统正常与运行的时间(以秒为单位) \n \n \n \n \n \n \n os.userInfo([options]) \n \n options <onject>\n \n encoding <string> 用于解释结果字符串的字符编码。如果将 encoding 设置为 'buffer'，则 username、 shell 和 homedir 的值将会是 Buffer 实例。默认值: 'utf8'。 \n \n \n \n \n 返回关于当前有效用户的信息。在POSIX平台上，这通常是密码文件的子集。返回的对象包含username、uid、gid、shell和homedir。在Windows上，则uid和 gid字段为-1，且shell为null。 \n \n console . log ( os . userInfo ( ) ) ; \n { \n  uid :   - 1 , \n  gid :   - 1 , \n  username :   'Ycq' , \n  homedir :   'C:\\\\Users\\\\Ycq' , \n  shell :   null \n } \n \n 1 2 3 4 5 6 7 8 \n \n ",summary:"\n\nos.EOL\n  string类型\n\n    >操作系统特定的行末标志。\n    >- 在POSIX上是  \\n\n    >- 在Windows上是 \\r\\n\n\n        console.log('hello' + os.EOL + 'world');\n\n    >PS: \\r: 回到当前行的最左边；\\n: 向下移动一行，并不左右移动\n\nos.arch()\n\n  返回\\\n\n  >返回为其编译 Node.js 二进制文件的操作系统的 CPU 架构。 可能的值有：'arm'、 'arm64'、 'ia32'、 'mips'、 'mipsel'、 'ppc'、 'ppc64'、 's390 ...",id:"post",pid:"post",readingTime:{text:"3 min read",minutes:2.295,time:137700,words:459}},{title:"回文数",frontmatter:{title:"回文数",date:"2020-06-01",author:"Yoha",tags:["Leetcode"],location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017191711.gif",meta:[{name:"title",content:"回文数"},{name:"description",content:"回文数"},{name:"keywords",content:"回文数, leetcode, Leetcode"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-06-01-leetcode-isPalindrome-09.html",relativePath:"_posts/2020-06-01-leetcode-isPalindrome-09.md",key:"v-b6ceae04",path:"/2020/06/01/leetcode-ispalindrome-09/",headers:[{level:2,title:"描述",slug:"描述"},{level:2,title:"示例",slug:"示例"},{level:2,title:"题解及分析思路",slug:"题解及分析思路"},{level:3,title:"思路",slug:"思路"},{level:3,title:"代码",slug:"代码"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" leetcode-9.回文数 \n 描述 \n 判断一个整数是否是回文数。回文数是指正序（从左向右）和倒序（从右向左）读都是一样的整数。 \n 示例 \n \n \n 示例1 \n 输入：121 \n 输出： true \n \n \n 示例2 \n 输入: -121 \n 输出: false \n 解释: 从左向右读, 为 -121 。 从右向左读, 为 121- 。因此它不是一个回文数。 \n \n \n 示例 3: \n 输入: 10 \n 输出: false \n 解释: 从右向左读, 为 01 。因此它不是一个回文数。 \n 题解及分析思路 \n \n 分析思路 也许 （肯定）不是最优，只是想法。 \n 思路 \n 输入是一个整数,如果这个整数小于0，那么可定不是回文数。返回false。 \n 如果这个正是整数大于0，可以把这个整数转为字符串数组：(num+'').split(\"\"),例如12321 => ['1', '2', '3', '2', '1'],然后利用两个变量left和right，不断去判断第n个和倒数第n个是否相等即可。 \n 代码 \n /**\n  * @param {number} x\n  * @return {boolean}\n  */ \n var   isPalindrome   =   function ( x )   { \n     if ( typeof  x  !==   \"number\" ) return   false ; \n         let  arr  =   ( x + \"\" ) . split ( \"\" ) ; \n         let  length  =  arr . length ; \n         let  left  =   0 ; \n         let  right  =  length  - 1 ; \n         while ( left  <  right ) { \n             if ( arr [ left ]   ===  arr [ right ] ) { \n                left ++ ; \n                right -- ; \n             } else { \n                 return   false ; \n             } \n         } \n         return   true ; \n } ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 ",summary:"\n描述\n\n判断一个整数是否是回文数。回文数是指正序（从左向右）和倒序（从右向左）读都是一样的整数。\n\n示例\n\n示例1\n\n  输入：121\n\n  输出： true\n\n示例2\n\n  输入: -121\n\n  输出: false\n\n  解释: 从左向右读, 为 -121 。 从右向左读, 为 121- 。因此它不是一个回文数。\n\n示例 3:\n\n  输入: 10\n\n  输出: false\n\n  解释: 从右向左读, 为 01 。因此它不是一个回文数。\n\n题解及分析思路\n\n>分析思路也许（肯定）不是最优，只是想法。\n\n思路\n\n输入是一个整数,如果这个整数小于0，那么可定不是回文数。返回false。\n\n如果 ...",id:"post",pid:"post",readingTime:{text:"1 min read",minutes:.55,time:33e3,words:110}},{title:"pow(x,n)",frontmatter:{title:"pow(x,n)",date:"2020-06-02",author:"Yoha",tags:["Leetcode"],location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017190350.jpg",meta:[{name:"title",content:"pow(x,n)"},{name:"description",content:"pow(x,n)"},{name:"keywords",content:"pow(x,n), leetcode, Leetcode"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-06-02-leetcode-pow(x,n)-50.html",relativePath:"_posts/2020-06-02-leetcode-pow(x,n)-50.md",key:"v-9e470ed8",path:"/2020/06/02/leetcode-pow-x-n-50/",headers:[{level:2,title:"描述",slug:"描述"},{level:2,title:"示例",slug:"示例"},{level:2,title:"题解及思路",slug:"题解及思路"},{level:3,title:"思路",slug:"思路"},{level:3,title:"代码",slug:"代码"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" pow(x,n) \n 描述 \n 实现 pow(x, n) ，即计算 x 的 n 次幂函数 \n 示例 \n \n \n 示例 1: \n 输入: 2.00000, 10 \n 输出: 1024.00000 \n \n \n 示例2 \n 输入: 2.10000, 3 \n 输出: 9.26100 \n \n \n 示例 3: \n 输入: 2.00000, -2 \n 输出: 0.25000 \n 题解及思路 \n 思路 \n 其实第一反应是这个Math.pow(x,n),的确可以，但是.... \n 另一个思路写个循环不断的相乘，理论上可以，但是超出时间限制 \n 另一个想法：pow(x,n),如果n为偶数，那么pow(x,n) = pow(x, n/2)*pow(x, n/2),这个时候无论n是否为正数，这么算都是可以的。比如pow(2,4)和pow(2,-4);如果n为奇数,且n为正数 pow(x,n) = pow(x, parseInt(n/2))*pow(x, parseInt(n/2))*x,如果n为负数pow(x,n) = pow(x, parseInt(n/2))*pow(x, parseInt(n/2))/x;这个就是递归,递归的停止条件是当n等于0的时候返回1. \n 代码 \n /**\n * @param {number} x\n * @param {number} n\n * @return {number}\n */ \n let   myPow   =   function ( x ,  n )   { \n     if ( typeof  x  !==   'number'   ||   typeof  n  !==   'number' )   return   NaN ; \n     if ( n  ===   0 )   return   1 ; \n     let  res ; \n     let  half  =   myPow ( x ,   parseInt ( n / 2 ) ) ; \n     if ( n  %   2   ==   0 )   { \n         //偶数 \n         // res = myPow(x, n/2) * myPow(x, n/2);由于这两个相乘的数是相等的，没必要调用两次函数。 \n        res  =  half  *  half ; \n     }   else   if ( n  >   0 )   { \n         // res = myPow(x, n/2) * myPow(x, n/2) * x; \n        res  =  half  *  half  *  x ; \n     }   else   { \n         // res = myPow(x, n/2) * myPow(x, n/2) / x; \n        res  =  half  *  half  /  x ; \n     } \n     return  res ; \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 \n ",summary:"\n描述\n\n实现 pow(x, n) ，即计算 x 的 n 次幂函数\n\n示例\n\n示例 1:\n\n    输入: 2.00000, 10\n\n    输出: 1024.00000\n\n示例2\n\n    输入: 2.10000, 3\n\n    输出: 9.26100\n\n示例 3:\n\n    输入: 2.00000, -2\n\n    输出: 0.25000\n\n题解及思路\n\n思路\n\n其实第一反应是这个Math.pow(x,n),的确可以，但是....\n\n另一个思路写个循环不断的相乘，理论上可以，但是超出时间限制\n\n另一个想法：pow(x,n),如果n为偶数，那么pow(x,n) = pow(x, n/2)\\p ...",id:"post",pid:"post",readingTime:{text:"1 min read",minutes:.865,time:51900,words:173}},{title:"加一",frontmatter:{title:"加一",date:"2020-06-03",author:"Yoha",tags:["Leetcode"],location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017151542.jpeg",meta:[{name:"title",content:"加一"},{name:"description",content:"加一"},{name:"keywords",content:"加一, leetcode, Leetcode"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-06-03-leetcode-pluse%20one-66.html",relativePath:"_posts/2020-06-03-leetcode-pluse one-66.md",key:"v-3f15e68a",path:"/2020/06/03/leetcode-pluse-one-66/",headers:[{level:2,title:"描述",slug:"描述"},{level:2,title:"示例",slug:"示例"},{level:2,title:"代码及其思路",slug:"代码及其思路"},{level:3,title:"思路",slug:"思路"},{level:3,title:"代码",slug:"代码"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" 66.加一 \n 描述 \n 给定一个由整数组成的非空数组所表示的非负整数，在该数的基础上加一。 \n 最高位数字存放在数组的首位， 数组中每个元素只存储单个数字。 \n 你可以假设除了整数 0 之外，这个整数不会以零开头。 \n 示例 \n \n \n 示例1 \n 输入：[1,2,3] \n 输出：[1,2,4] \n \n \n 示例2 \n 输入：[4,3,2,1] \n 输出：[4,3,2,2] \n 代码及其思路 \n 思路 \n 看到这个题目，第一反应思路：把数组转为数字，然后加1，然后再转为数组。所以有了以下代码： \n /**\n * @param {number[]} digits\n * @return {number[]}\n */ \n var   plusOne   =   function ( digits )   { \n     let  sum  =   0 ; \n     for ( let  i  =   0 ;  i  <  digits . length ;  i ++ ) { \n        sum  +=  digits [ i ]   *  Math . pow ( 10 ,  digits . length  -  i  -   1 ) ; \n     } \n     let  res  =  sum  +   1 ; \n     let  result  =   ( res  +   '' ) . split ( '' ) . map ( item   =>   + item ) ; \n     return  result ; \n } ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 但是，没有通过，因为在这个数组[6,1,4,5,3,9,0,1,9,5,1,8,6,7,0,5,5,4,3]下报错啦。0.0这个数组转为数字肯定超出js最大数字的范围。 \n 于是，要想着操作数组中的数字。比如[1,2] => [1,3];[9] => [1, 0];[1,9] => [2,0];写个循环，由后向前循环，如果最后一位小于9，直接加1，返回结果，结束循环。如果最后一位为9，则把这一位置为0，它的前一位加1，如果循环完毕，其中每一位都是9，则把它们全部置为0，手动在第一位加个1。 \n 代码 \n /**\n     * @param {number[]} digits\n     * @return {number[]}\n     */ \n     let   plusOne   =   function ( digits )   { \n         let  len  =  digits . length ; \n         for ( let  i  =  len  -   1 ;  i  >=   0 ;  i -- )   { \n           if ( digits [ i ]   <   9 )   { \n            digits [ i ] ++ ; \n             return  digits ; \n           } \n          digits [ i ]   =   0 ; \n         } \n         return   [ 1 ,   ... digits ] ; \n     } ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 ",summary:"\n描述\n\n给定一个由整数组成的非空数组所表示的非负整数，在该数的基础上加一。\n\n最高位数字存放在数组的首位， 数组中每个元素只存储单个数字。\n\n你可以假设除了整数 0 之外，这个整数不会以零开头。\n\n示例\n\n示例1\n\n  输入：[1,2,3]\n\n  输出：[1,2,4]\n\n示例2\n\n  输入：[4,3,2,1]\n\n  输出：[4,3,2,2]\n\n代码及其思路\n\n思路\n\n看到这个题目，第一反应思路：把数组转为数字，然后加1，然后再转为数组。所以有了以下代码：\n\n/**\n @param {number[]} digits\n @return {number[]}\n */\nvar plusOne =  ...",id:"post",pid:"post",readingTime:{text:"1 min read",minutes:.705,time:42300,words:141}},{title:"矩阵置零",frontmatter:{title:"矩阵置零",date:"2020-06-04",author:"Yoha",tags:["Leetcode"],location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017151542.jpeg",meta:[{name:"title",content:"矩阵置零"},{name:"description",content:"矩阵置零"},{name:"keywords",content:"矩阵置零, leetcode, Leetcode"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-06-04-leetcode-Set%20Matrix%20Zeroes-73.html",relativePath:"_posts/2020-06-04-leetcode-Set Matrix Zeroes-73.md",key:"v-4dc56a1e",path:"/2020/06/04/leetcode-set-matrix-zeroes-73/",headers:[{level:2,title:"描述",slug:"描述"},{level:2,title:"示例",slug:"示例"},{level:2,title:"思路及代码",slug:"思路及代码"},{level:3,title:"思路",slug:"思路"},{level:3,title:"代码",slug:"代码"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" 73.矩阵置零 \n 描述 \n 给定一个 m x n 的矩阵，如果一个元素为 0，则将其所在行和列的所有元素都设为 0。请使用原地算法。 \n 示例 \n \n 示例1 \n \n 输入: \n [ \n [1,1,1], \n [1,0,1], \n [1,1,1] \n ] \n 输出: \n [ \n [1,0,1], \n [0,0,0], \n [1,0,1] \n ] \n \n 示例2 \n \n 输入: \n [ \n [0,1,2,0], \n [3,4,5,2], \n [1,3,1,5] \n ] \n 输出: \n [ \n [0,0,0,0], \n [0,4,5,0], \n [0,3,1,0] \n ] \n 思路及代码 \n 思路 \n 暂且不管题目中要求原地算法。不管白猫还是黑猫。能抓住老鼠就是好猫。于是我就大胆的开始想方法啦。 \n 既然要把0所在的行和列都要置为0，首先要把出现0的位置记录下来。然后就有下面的代码： \n /**\n * @param {number[][]} matrix\n * @return {void} Do not return anything, modify matrix in-place instead.\n */ \n let   setZeroes   =   function ( matrix )   { \n         let  rec  =   [ ] ; \n         for ( let  i  =   0 ; i < matrix . length ; i ++ ) { \n             for ( let  j  =   0 ; j < matrix [ i ] . length ; j ++ ) { \n                 if ( matrix [ i ] [ j ]   ===   0 ) { \n                    rec . push ( i , j ) ; \n                 } \n             } \n         } \n         //这个函数是去执行置0操作的。rec数组存放出现0的位置 \n         zero ( matrix , rec ) \n     } ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 记录了0出现的位置，比如rec = [1,1,2,2],就要把第一行和第一列置为0，把第二行和第二列置为0.对rec进行循环时间隔为2. \n function   zero ( matrix , rec ) { \n         let  len  =  rec . length ; \n         for ( let  i  =   0 ; i < len - 1 ; i += 2 ) { \n             let  m  =  rec [ i ] , n = rec [ i + 1 ] ; \n             for ( let  j  =   0 ; j < matrix [ 0 ] . length ; j ++ ) { \n                matrix [ m ] [ j ]   =   0 ; \n             } \n             for ( let  k  =   0 ; k < matrix . length ; k ++ ) { \n                matrix [ k ] [ n ]   =   0 ; \n             } \n         } \n     } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 #  代码 \n /**\n  * @param {number[][]} matrix\n  * @return {void} Do not return anything, modify matrix in-place instead.\n  */ \n     function   zero ( matrix , rec ) { \n         let  len  =  rec . length ; \n         for ( let  i  =   0 ; i < len - 1 ; i += 2 ) { \n             let  m  =  rec [ i ] , n = rec [ i + 1 ] ; \n             for ( let  j  =   0 ; j < matrix [ 0 ] . length ; j ++ ) { \n                matrix [ m ] [ j ]   =   0 ; \n             } \n             for ( let  k  =   0 ; k < matrix . length ; k ++ ) { \n                matrix [ k ] [ n ]   =   0 ; \n             } \n         } \n     } \n     let   setZeroes   =   function ( matrix )   { \n         let  rec  =   [ ] ; \n         for ( let  i  =   0 ; i < matrix . length ; i ++ ) { \n             for ( let  j  =   0 ; j < matrix [ i ] . length ; j ++ ) { \n                 if ( matrix [ i ] [ j ]   ===   0 ) { \n                    rec . push ( i , j ) ; \n                 } \n             } \n         } \n         zero ( matrix , rec ) \n     } ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 ",summary:"\n描述\n\n给定一个 m x n 的矩阵，如果一个元素为 0，则将其所在行和列的所有元素都设为 0。请使用原地算法。\n\n示例\n\n示例1\n\n输入:\n\n[\n\n  [1,1,1],\n\n  [1,0,1],\n\n  [1,1,1]\n\n]\n\n输出:\n\n[\n\n  [1,0,1],\n\n  [0,0,0],\n\n  [1,0,1]\n\n]\n\n示例2\n\n输入:\n\n[\n\n  [0,1,2,0],\n\n  [3,4,5,2],\n\n  [1,3,1,5]\n\n]\n\n输出:\n\n[\n\n  [0,0,0,0],\n\n  [0,4,5,0],\n\n  [0,3,1,0]\n\n]\n\n思路及代码\n\n思路\n\n暂且不管题目中要求原地算法。不管白猫还是 ...",id:"post",pid:"post",readingTime:{text:"2 min read",minutes:1.115,time:66900,words:223}},{title:"杨辉三角",frontmatter:{title:"杨辉三角",date:"2020-06-05",author:"Yoha",tags:["Leetcode"],location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017151542.jpeg",meta:[{name:"title",content:"杨辉三角"},{name:"description",content:"杨辉三角"},{name:"keywords",content:"杨辉三角, leetcode, Leetcode"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-06-05-leetcode-Pascal's%20Triangle-118.html",relativePath:"_posts/2020-06-05-leetcode-Pascal's Triangle-118.md",key:"v-3f87a953",path:"/2020/06/05/leetcode-pascal-s-triangle-118/",headers:[{level:2,title:"描述",slug:"描述"},{level:2,title:"示例",slug:"示例"},{level:2,title:"代码及思路",slug:"代码及思路"},{level:3,title:"思路",slug:"思路"},{level:3,title:"代码",slug:"代码"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" 118.杨辉三角 \n 描述 \n 给定一个非负整数 numRows，生成杨辉三角的前 numRows 行。 \n \n 在杨辉三角中，每个数是它左上方和右上方的数的和。 \n 示例 \n \n \n 示例1 \n 代码及思路 \n 思路 \n 仔细观察一下，可以看出来每个数组的第一位和最后一位都为1，并且大数组的第n个元素数组长度为n。所以假设大数组为arr, i 为第i个元素数组，会有arr[i][0] = 1 和 arr[i][i] = 1;这样第i个元素数组的首元素和最后一个元素就都值啦。中间元素的值可以写一个循环arr[i][j] = arr[i-1][j-1] + arr[i-1][j]. \n 代码 \n /**\n * @param {number} numRows\n * @return {number[][]}\n */ \n let   generate   =   function ( numRows )   { \n   let  res  =   [ ] ; \n   for ( let  i  =   0 ;  i  <  numRows ;  i ++ )   { \n    res [ i ]   =   [ ] ; \n    res [ i ] [ 0 ]   =   1 ; \n    res [ i ] [ i ]   =   1 ; \n     for ( let  j  =   1 ;  j  <  i ;  j ++ )   { \n      res [ i ] [ j ]   =  res [ i - 1 ] [ j - 1 ]   +  res [ i - 1 ] [ j ] ; \n     } \n   } \n   return  res ; \n } ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 ",summary:"\n描述\n\n给定一个非负整数 numRows，生成杨辉三角的前 numRows 行。\n\n在杨辉三角中，每个数是它左上方和右上方的数的和。\n\n示例\n\n示例1\n\n代码及思路\n\n思路\n\n仔细观察一下，可以看出来每个数组的第一位和最后一位都为1，并且大数组的第n个元素数组长度为n。所以假设大数组为arr, i 为第i个元素数组，会有arri = 1 和 arri = 1;这样第i个元素数组的首元素和最后一个元素就都值啦。中间元素的值可以写一个循环arri = arri-1 + arri-1.\n\n代码\n\n/**\n @param {number} numRows\n @return {number}\n */\n ...",id:"post",pid:"post",readingTime:{text:"1 min read",minutes:.465,time:27900.000000000004,words:93}},{title:"多数元素",frontmatter:{title:"多数元素",date:"2020-06-06",author:"Yoha",tags:["Leetcode"],location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017151542.jpeg",meta:[{name:"title",content:"多数元素"},{name:"description",content:"多数元素"},{name:"keywords",content:"多数元素, leetcode, Leetcode"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-06-06-leetcode-majorityElement-169.html",relativePath:"_posts/2020-06-06-leetcode-majorityElement-169.md",key:"v-680deed2",path:"/2020/06/06/leetcode-majorityelement-169/",headers:[{level:2,title:"描述",slug:"描述"},{level:2,title:"代码及思路",slug:"代码及思路"},{level:3,title:"思路",slug:"思路"},{level:3,title:"代码",slug:"代码"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" 169.多数元素 \n 描述 \n 给定一个大小为 n 的数组，找到其中的多数元素。多数元素是指在数组中出现次数大于 ⌊ n/2 ⌋ 的元素。 \n 你可以假设数组是非空的，并且给定的数组总是存在多数元素。 \n ##　示例 \n \n \n 示例1 \n 输入: [3,2,3] \n 输出: 3 \n \n \n 示例2 \n 输入: [2,2,1,1,1,2,2] \n 输出: 2 \n 代码及思路 \n 思路 \n 遍历数组，利用map，记录相同数字出现的次数。如果某一个元素出现的次数大于n/2,则直接返回这个元素。 \n 代码 \n /**\n * @param {number[]} nums\n * @return {number}\n */ \n let   majorityElement   =   function ( nums )   { \n   let  map  =   new   Map ( ) ; \n   for ( let  item  of  nums )   { \n     if ( map . has ( item ) )   { \n      map . set ( item ,  map . get ( item )   +   1 ) ; \n     }   else   { \n      map . set ( item ,   1 ) ; \n     } \n     if ( map . get ( item )   >  nums . length  /   2 )   { \n       return  item ; \n     } \n   } \n } ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 另外，还看到一个投票求解(专业术语叫摩尔投票法)： \n var   majorityElement   =   function ( nums )   { \n         let  count  =   0 ; \n         let  candidate  =   null ; \n\n       nums . forEach ( function ( num ) { \n             if   ( count  ==   0 )   { \n                candidate  =  num ; \n             } \n            count  +=   ( num  ==  candidate )   ?   1   :   - 1 ; \n         } ) ; \n\n         return  candidate ; \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 ",summary:"\n描述\n\n给定一个大小为 n 的数组，找到其中的多数元素。多数元素是指在数组中出现次数大于 ⌊ n/2 ⌋ 的元素。\n\n你可以假设数组是非空的，并且给定的数组总是存在多数元素。\n\n示例\n\n  示例1\n\n    输入: [3,2,3]\n\n    输出: 3\n\n  示例2\n\n    输入: [2,2,1,1,1,2,2]\n\n    输出: 2\n\n代码及思路\n\n思路\n\n遍历数组，利用map，记录相同数字出现的次数。如果某一个元素出现的次数大于n/2,则直接返回这个元素。\n\n代码\n\n/**\n @param {number[]} nums\n @return {number}\n */\nlet majori ...",id:"post",pid:"post",readingTime:{text:"1 min read",minutes:.6,time:36e3,words:120}},{title:"两个数组的交集",frontmatter:{title:"两个数组的交集",date:"2020-06-07",author:"Yoha",tags:["Leetcode"],location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017151542.jpeg",meta:[{name:"title",content:"两个数组的交集"},{name:"description",content:"两个数组的交集"},{name:"keywords",content:"两个数组的交集, leetcode, Leetcode"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-06-07-leetcode-IntersectionOfTwoArrays-349.html",relativePath:"_posts/2020-06-07-leetcode-IntersectionOfTwoArrays-349.md",key:"v-0f230c8e",path:"/2020/06/07/leetcode-intersectionoftwoarrays-349/",headers:[{level:2,title:"描述",slug:"描述"},{level:2,title:"示例",slug:"示例"},{level:2,title:"代码及思路",slug:"代码及思路"},{level:3,title:"思路",slug:"思路"},{level:3,title:"代码",slug:"代码"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" 349.两个数组的交集 \n 描述 \n 给定两个数组，编写一个函数来计算它们的交集。 \n 示例 \n \n \n 示例1 \n 输入：nums1 = [1,2,2,1], nums2 = [2,2] \n 输出：[2] \n \n \n 示例2 \n 输入：nums1 = [4,9,5], nums2 = [9,4,9,8,4] \n 输出：[9,4] \n 代码及思路 \n 思路 \n 对这两个数组中的任意一个数组进行遍历，然后判断另一个数组中是有这个值，如果有就把这个值添加到到结果集合中(主要考虑到集合的元素不重复)。遍历结束后，将集合转为数组返回即可。 \n 代码 \n /**\n * @param {number[]} nums1\n * @param {number[]} nums2\n * @return {number[]}\n */ \n let   intersection   =   function ( nums1 ,  nums2 )   { \n   let  res  =   new   Set ( ) ; \n   for ( let  item  of  nums1 )   { \n     if ( nums2 . includes ( item ) )   { \n      res . add ( item ) ; \n     } \n   } \n   return  Array . from ( res ) ; \n } ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 ",summary:"\n描述\n\n给定两个数组，编写一个函数来计算它们的交集。\n\n示例\n\n示例1\n\n  输入：nums1 = [1,2,2,1], nums2 = [2,2]\n\n  输出：[2]\n\n示例2\n\n  输入：nums1 = [4,9,5], nums2 = [9,4,9,8,4]\n\n  输出：[9,4]\n\n代码及思路\n\n思路\n\n对这两个数组中的任意一个数组进行遍历，然后判断另一个数组中是有这个值，如果有就把这个值添加到到结果集合中(主要考虑到集合的元素不重复)。遍历结束后，将集合转为数组返回即可。\n\n代码\n\n/**\n @param {number[]} nums1\n @param {number[]} nu ...",id:"post",pid:"post",readingTime:{text:"1 min read",minutes:.365,time:21900,words:73}},{title:"检测大写字母",frontmatter:{title:"检测大写字母",date:"2020-06-08",author:"Yoha",tags:["Leetcode"],location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017151542.jpeg",meta:[{name:"title",content:"检测大写字母"},{name:"description",content:"检测大写字母"},{name:"keywords",content:"检测大写字母, leetcode, Leetcode"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-06-08-leetcode-detectCapitalUse-520.html",relativePath:"_posts/2020-06-08-leetcode-detectCapitalUse-520.md",key:"v-1701c584",path:"/2020/06/08/leetcode-detectcapitaluse-520/",headers:[{level:2,title:"描述",slug:"描述"},{level:2,title:"示例",slug:"示例"},{level:2,title:"代码及思路",slug:"代码及思路"},{level:3,title:"思路",slug:"思路"},{level:3,title:"代码",slug:"代码"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:' 520. 检测大写字母 \n 描述 \n 给定一个单词，你需要判断单词的大写使用是否正确。 \n 我们定义，在以下情况时，单词的大写用法是正确的： \n \n 全部字母都是大写，比如"USA"。 \n 单词中所有字母都不是大写，比如"leetcode"。 \n 如果单词不只含有一个字母，只有首字母大写， 比如 "Google"。 \n \n 否则，我们定义这个单词没有正确使用大写字母。 \n 输入是由大写和小写拉丁字母组成的非空单词 \n 示例 \n \n \n 示例1 \n 输入: "USA" \n 输出: True \n \n \n 示例2 \n 输入: "FlaG" \n 输出: False \n 代码及思路 \n 思路 \n 如果是全部大写那么 str.toUpperCase() === str; \n 如果是全部小写那么 str.toLowerCase() === str; \n 如果str[0].toUpperCase() + str.slice(1).toLowerCase() === str,说明首字母大写，其他小写。 \n 否则 返回false。 \n 代码 \n /**\n * @param {string} word\n * @return {boolean}\n */ \n let   detectCapitalUse   =   function ( word )   { \n   if ( word . toUpperCase ( )   ===  word )   return   true ; \n   if ( word . toLowerCase ( )   ===  word )   return   true ; \n   if ( word [ 0 ] . toUpperCase ( )   +  word . slice ( 1 ) . toLowerCase ( )   ===  word )   return   true ; \n   return   false ; \n } ; \n \n 1 2 3 4 5 6 7 8 9 10 再附一个大佬的正则匹配方法： \n let   detectCapitalUse   =   function ( word )   { \n   let  reg1  =   / ^[A-Z]*$ / ; \n   let  reg2  =   / ^[A-Z][a-z]*$ / ; \n   let  reg3  =   / ^[a-z]*$ / ; \n   return  reg1 . test ( word )   ||  reg2 . test ( word )   ||  reg3 . test ( word ) ; \n } ; \n \n 1 2 3 4 5 6 ',summary:'\n描述\n\n给定一个单词，你需要判断单词的大写使用是否正确。\n\n我们定义，在以下情况时，单词的大写用法是正确的：\n\n  全部字母都是大写，比如"USA"。\n  单词中所有字母都不是大写，比如"leetcode"。\n  如果单词不只含有一个字母，只有首字母大写， 比如 "Google"。\n\n否则，我们定义这个单词没有正确使用大写字母。\n\n输入是由大写和小写拉丁字母组成的非空单词\n\n示例\n\n示例1\n\n  输入: "USA"\n\n  输出: True\n\n示例2\n\n  输入: "FlaG"\n\n  输出: False\n\n代码及思路\n\n思路\n\n如果是全部大写那么 str.toUpperCase() === s ...',id:"post",pid:"post",readingTime:{text:"1 min read",minutes:.575,time:34500,words:115}},{title:"设计哈希集合",frontmatter:{title:"设计哈希集合",date:"2020-06-09",author:"Yoha",tags:["Leetcode"],location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017151542.jpeg",meta:[{name:"title",content:"设计哈希集合"},{name:"description",content:"设计哈希集合"},{name:"keywords",content:"设计哈希集合, leetcode, Leetcode"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-06-09-leetcode-designHashSet-705.html",relativePath:"_posts/2020-06-09-leetcode-designHashSet-705.md",key:"v-58b09fac",path:"/2020/06/09/leetcode-designhashset-705/",headers:[{level:2,title:"描述",slug:"描述"},{level:2,title:"示例",slug:"示例"},{level:2,title:"代码及思路",slug:"代码及思路"},{level:3,title:"思路",slug:"思路"},{level:3,title:"代码",slug:"代码"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" 705.设计哈希集合 \n 描述 \n 不使用任何内建的哈希表库设计一个哈希集合 \n 具体地说，你的设计应该包含以下的功能 \n \n add(value)：向哈希集合中插入一个值。 \n contains(value) ：返回哈希集合中是否存在这个值。 \n remove(value)：将给定值从哈希集合中删除。如果哈希集合中没有这个值，什么也不做。 \n \n 注意： \n \n 所有的值都在 [0, 1000000]的范围内。 \n 操作的总数目在[1, 10000]范围内。 \n 不要使用内建的哈希集合库。 \n 示例 \n MyHashSet hashSet  =   new   MyHashSet ( ) ; \nhashSet . add ( 1 ) ; \nhashSet . add ( 2 ) ; \nhashSet . contains ( 1 ) ; // 返回 true \nhashSet . contains ( 3 ) ; // 返回 false (未找到) \nhashSet . add ( 2 ) ; \nhashSet . contains ( 2 ) ; // 返回 true \nhashSet . remove ( 2 ) ; \nhashSet . contains ( 2 ) ; // 返回  false (已经被删除) \n \n 1 2 3 4 5 6 7 8 9 #  代码及思路 \n 思路 \n 利用数组的push,includes,splice(index, 1)来实现。 \n 代码 \n class   hashSet   { \n     constructor ( )   { \n         this . set  =   [ ] ; \n     } \n     add ( item )   { \n         this . set . push ( item ) ; \n     } \n     contains ( item )   { \n         return   this . set . includes ( item ) ; \n     } \n     remove ( item )   { \n         let  index  =   this . set . findIndex ( num   =>  num  ===  item ) ; \n         if ( index  !==   - 1 )   this . set . splice ( index ,   1 ) ; \n     } \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 ",summary:"\n描述\n\n不使用任何内建的哈希表库设计一个哈希集合\n\n具体地说，你的设计应该包含以下的功能\n\nadd(value)：向哈希集合中插入一个值。\ncontains(value) ：返回哈希集合中是否存在这个值。\nremove(value)：将给定值从哈希集合中删除。如果哈希集合中没有这个值，什么也不做。\n\n注意：\n\n所有的值都在 [0, 1000000]的范围内。\n操作的总数目在[1, 10000]范围内。\n不要使用内建的哈希集合库。\n\n示例\n\nMyHashSet hashSet = new MyHashSet();\nhashSet.add(1);\nhashSet.add(2);\nhashSet. ...",id:"post",pid:"post",readingTime:{text:"1 min read",minutes:.485,time:29099.999999999996,words:97}},{title:"连续赋值",frontmatter:{title:"连续赋值",date:"2020-06-10",author:"Yoha",location:"Beijing",tags:["前端开发","JavaScript"],image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017175905.png",meta:[{name:"title",content:"连续赋值"},{name:"description",content:"连续赋值"},{name:"keywords",content:"连续赋值"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-06-10-continuousAssignment.html",relativePath:"_posts/2020-06-10-continuousAssignment.md",key:"v-72d7c378",path:"/2020/06/10/continuousassignment/",headers:[{level:2,title:"题目",slug:"题目"},{level:2,title:"参考文章",slug:"参考文章"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" 关于连续赋值的问题 \n 题目 \n let  a  =   {  n :   1   } ; \n let  b  =  a ; \na . x  =  a  =   {  n :   2   } ; \nconsole . log ( a . x ) ; \nconsole . log ( b . x ) ; \n \n 1 2 3 4 5 \n 具体的文字描述引用知乎大佬的解释，说的比较到位: \n let  a  =   {  n :   1   } ; \n let  b  =  a ; \n \n 1 2 这两行比较好理解。在栈内存中，a与b是不同的，是两个变量，但是他们的指针是相同的，指向同一个堆。 \n 关键点来啦： \n a . x  =  a  =   {  n :   2   } ; \n \n 1 JS成员访问的优先级要比赋值运算高。先获取等号左侧的a.x，但a.x并不存在，于是JS为（堆内存中的）对象创建一个新成员x，这个成员的初始值为undefined. \n (这也是为什么直接引用一个未定义的变量会报错，但是直接引用一个对象的不存在的成员时，会返回undefined.) \n 创建完成后， 目标指针已经指向了这个新成员x ，并会先挂起，单等等号右侧的内容有结果了，便完成赋值。 \n 接着执行赋值语句的右侧，发现a={n:2}是个简单的赋值操作，于是a的新值等于了{n:2}。 \n 这里特别注意，这个a已经不是开头的那个a，而是一个全新的a,这个新a指针已经不是指向原来的值的那个堆内存，而是分配了一个新的堆内存。但是原来旧的堆内存因为还有b在占用，所以并未被回收。然后，将这个新的对象a的堆内存指针，赋值给了刚才挂起的新成员x,此时，对象成员x便等于了新的对象a。 \n 所以现在： \n a  =   {  n :   2   } \nb  =   {  n :   1 ,  x :   {  n :   2   }   } \nconsole . log ( a  ===  b . x )   //true。不是因为值的相等，而是因为对象引用的地址相同。也是是说，这个地方的相等表示指针指向同一个堆内存。 \n \n 1 2 3 #  参考文章 \n \n 知乎大佬的解释 \n 运算符优先级 \n \n ",summary:"\n题目\n\nlet a = { n: 1 };\nlet b = a;\na.x = a = { n: 2 };\nconsole.log(a.x);\nconsole.log(b.x);\n\n具体的文字描述引用知乎大佬的解释，说的比较到位:\n\nlet a = { n: 1 };\nlet b = a;\n\n这两行比较好理解。在栈内存中，a与b是不同的，是两个变量，但是他们的指针是相同的，指向同一个堆。\n\n关键点来啦：\n\na.x = a = { n: 2 };\n\nJS成员访问的优先级要比赋值运算高。先获取等号左侧的a.x，但a.x并不存在，于是JS为（堆内存中的）对象创建一个新成员x，这个成员的初始值为und ...",id:"post",pid:"post",readingTime:{text:"1 min read",minutes:.455,time:27300,words:91}},{title:"宝石与石头",frontmatter:{title:"宝石与石头",date:"2020-06-10",author:"Yoha",tags:["Leetcode"],location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017151542.jpeg",meta:[{name:"title",content:"宝石与石头"},{name:"description",content:"宝石与石头"},{name:"keywords",content:"宝石与石头, leetcode, Leetcode"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-06-10-leetcode-numJewelsInStones-771.html",relativePath:"_posts/2020-06-10-leetcode-numJewelsInStones-771.md",key:"v-7ae50946",path:"/2020/06/10/leetcode-numjewelsinstones-771/",headers:[{level:2,title:"描述",slug:"描述"},{level:2,title:"示例",slug:"示例"},{level:2,title:"代码及思路",slug:"代码及思路"},{level:3,title:"思路",slug:"思路"},{level:3,title:"代码",slug:"代码"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:' 771. 宝石与石头 \n 描述 \n 给定字符串J代表石头中宝石的类型，和字符串S代表你拥有的石头。 S中每个字符代表了一种你拥有的石头的类型，你想知道你拥有的石头中有多少是宝石。 \n J中的字母不重复，J和S中的所有字符都是字母。字母区分大小写，因此"a"和"A"是不同类型的石头。 \n 示例 \n \n \n 示例 1: \n 输入: J = "aA", S = "aAAbbbb" \n 输出: 3 \n \n \n 示例 2: \n 输入: J = "z", S = "ZZ" \n 输出: 0 \n \n \n 注意: \n \n S 和 J 最多含有50个字母。 \n J 中的字符不重复。 \n 代码及思路 \n 思路 \n 想着是把宝石J和石头S字符串转为数组。然后利用filter方法过滤出石头数组中包含的宝石，取其长度。 \n 代码 \n /**\n * @param {string} J\n * @param {string} S\n * @return {number}\n */ \n var   numJewelsInStones   =   function ( J ,   S )   { \n     let  jArr  =   J . split ( \'\' ) ; \n     let  sArr  =   S . split ( \'\' ) ; \n     let  res  =   0 ; \n     for ( let  i  =   0 ;  i  <  jArr . length ;  i ++ )   { \n        res  +=  sArr . filter ( item   =>  item  ==  jArr [ i ] ) . length\n     } \n     return  res ; \n } ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 ',summary:'\n描述\n\n给定字符串J代表石头中宝石的类型，和字符串S代表你拥有的石头。 S中每个字符代表了一种你拥有的石头的类型，你想知道你拥有的石头中有多少是宝石。\n\nJ中的字母不重复，J和S中的所有字符都是字母。字母区分大小写，因此"a"和"A"是不同类型的石头。\n\n示例\n\n示例 1:\n\n    输入: J = "aA", S = "aAAbbbb"\n\n    输出: 3\n\n示例 2:\n\n    输入: J = "z", S = "ZZ"\n\n    输出: 0\n\n注意:\n    S 和 J 最多含有50个字母。\n    J 中的字符不重复。\n\n代码及思路\n\n思路\n\n想着是把宝石J和石头S字符串转为数组。 ...',id:"post",pid:"post",readingTime:{text:"1 min read",minutes:.505,time:30300,words:101}},{title:"顺次数",frontmatter:{title:"顺次数",date:"2020-06-11",author:"Yoha",tags:["Leetcode"],location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017151542.jpeg",meta:[{name:"title",content:"顺次数"},{name:"description",content:"顺次数"},{name:"keywords",content:"顺次数, leetcode, Leetcode"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-06-11-leetcode-sequentialDigits-1291.html",relativePath:"_posts/2020-06-11-leetcode-sequentialDigits-1291.md",key:"v-3f5c41e0",path:"/2020/06/11/leetcode-sequentialdigits-1291/",headers:[{level:2,title:"描述",slug:"描述"},{level:2,title:"示例",slug:"示例"},{level:2,title:"代码及思路",slug:"代码及思路"},{level:3,title:"思路",slug:"思路"},{level:3,title:"代码",slug:"代码"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" 1291.顺次数 \n 描述 \n 我们定义「顺次数」为：每一位上的数字都比前一位上的数字大 1 的整数。 \n 请你返回由 [low, high] 范围内所有顺次数组成的 有序 列表（从小到大排序）。 \n 示例 \n \n \n 示例 1： \n 输出：low = 100, high = 300 \n 输出：[123,234] \n \n \n 示例 2： \n 输出：low = 1000, high = 13000 \n 输出：[1234,2345,3456,4567,5678,6789,12345] \n \n \n 提示： \n \n 10 <= low <= high <= 10^9 \n 代码及思路 \n 思路 \n 我的这个思路比较暴力，不是很好。首先想的是把这两个数字转为字符串，然后可以知道是几位数。小数的最高位加上其「长度减一」，如果大于或等于10，说明在这个长度下不会存在连续数。所以长度应该加一，最高为置为1。如果小于10，那么就循环从最高位加到最低位，即为一个结果。 \n 举个栗子：low=100, high=1000\n那么low_len = 3, high_len = 4; 100的最高位是1， 1 + low_len = 4 < 10, 所以存在连续数。1 * Math.pow(10, low_len - 1 - i) + (1 + i) * Math.pow(10, low_len - 1 - i) + (1 + i) * Math.pow(10, low_len - 1 - i) = 123.然后最高为加1，循环继续。 \n 如果到了某个数加1大于10，首先first置为1，然后判断low_len 是不是小于 high_len，如果是low_len加1。 \n 跳出循环的条件是low_len 不再小于 high_len \n 代码 \n /**\n * @param {number} low\n * @param {number} high\n * @return {number[]}\n */ \n var   sequentialDigits   =   function ( low ,  high )   { \n     let  low_len  =   ( low  +   '' ) . length ; \n     let  high_len  =   ( high  +   '' ) . length ; \n     let  first  =   parseInt ( low  /  Math . pow ( 10 ,  low_len  -   1 ) ) ; \n     let  res  =   [ ] ; \n     let  num  =   0 ; \n     while ( true )   { \n         if ( first  +  low_len  -   1   <   10 )   { \n            num  =   0 ; \n             for ( let  i  =   0 ;  i  <  low_len ;  i ++ )   { \n                num  +=   ( first  +  i )   *  Math . pow ( 10 ,  low_len  -   1   - i ) ; \n             } \n             if ( num  >=  low  &&  num  <=  high )   { \n                res . push ( num ) ; \n             } \n            first ++ ; \n         }   else   { \n            first  =   1 ; \n             if ( low_len  <  high_len )   { \n                low_len ++ ; \n             }   else   { \n                 break ; \n             } \n         } \n     } \n     return  res ; \n } ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 ",summary:"\n描述\n\n我们定义「顺次数」为：每一位上的数字都比前一位上的数字大 1 的整数。\n\n请你返回由 [low, high] 范围内所有顺次数组成的 有序 列表（从小到大排序）。\n\n示例\n\n示例 1：\n\n    输出：low = 100, high = 300\n\n    输出：[123,234]\n\n示例 2：\n\n    输出：low = 1000, high = 13000\n\n    输出：[1234,2345,3456,4567,5678,6789,12345]\n\n提示：\n\n    10 = low && num ...",id:"post",pid:"post",readingTime:{text:"2 min read",minutes:1.11,time:66600.00000000001,words:222}},{title:"0～n-1中缺失的数字",frontmatter:{title:"0～n-1中缺失的数字",date:"2020-06-12",author:"Yoha",tags:["Leetcode"],location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017151542.jpeg",meta:[{name:"title",content:"0～n-1中缺失的数字"},{name:"description",content:"0～n-1中缺失的数字"},{name:"keywords",content:"0～n-1中缺失的数字, leetcode, Leetcode"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-06-12-leetcode-missingNumber-interview-53-ii.html",relativePath:"_posts/2020-06-12-leetcode-missingNumber-interview-53-ii.md",key:"v-7694cd9a",path:"/2020/06/12/leetcode-missingnumber-interview-53-ii/",headers:[{level:2,title:"描述",slug:"描述"},{level:2,title:"示例",slug:"示例"},{level:2,title:"代码及思路",slug:"代码及思路"},{level:3,title:"思路",slug:"思路"},{level:3,title:"代码",slug:"代码"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" 0～n-1中缺失的数字 \n 描述 \n 一个长度为n-1的递增排序数组中的所有数字都是唯一的，并且每个数字都在范围0～n-1之内。在范围0～n-1内的n个数字中有且只有一个数字不在该数组中，请找出这个数字。 \n 示例 \n \n \n 示例 1: \n 输入: [0,1,3] \n 输出: 2 \n \n \n 示例 2: \n 输入: [0,1,2,3,4,5,6,7,9] \n 输出: 8 \n 代码及思路 \n 思路 \n 题目中的关键信息：长度为n-1， 但有n个数字(0~n-1), 数字递增， 有且只有一个数字不在该数组中。 \n 通过这几个关键信息我们可以得出的结论是:只能按照间隔为1进行递增，如果后一个数字减去前一个数字大于1，那说明这两个数字之间的数即为缺失的数字。 \n 但这个是一般情况，考虑特殊情况: [1,2,3]和[0,1,2],缺少的数字分别是是0和3，但是后一个数字减去前一个数字都为1。这种情况要单独处理一下。 \n 还有一种情况(最开始未考虑导致未通过): 如果数组的长度为1.[0] 或者 [1],也要单独考虑。 \n 代码 \n /**\n * @param {number[]} nums\n * @return {number}\n */ \n var   missingNumber   =   function ( nums )   { \n     let  arr  =   [ ] ; \n     if ( nums . length  ==   1 )   return  nums [ 0 ]   ==   0   ?   1   :   0 ; \n     for ( let  i  =   1 ;  i < nums . length ;  i ++ )   { \n        arr . push ( nums [ i ]   -  nums [ i  -   1 ] ) ; \n     } \n     let  index  =  arr . findIndex ( item   =>  item  >   1 ) ; \n     if ( index  ==   - 1 ) { \n         return  nums . includes ( nums . length )   ?   0   :  nums . length ; \n     } \n     return  nums [ index ]   +   1 ; \n } ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 ",summary:"\n描述\n\n一个长度为n-1的递增排序数组中的所有数字都是唯一的，并且每个数字都在范围0～n-1之内。在范围0～n-1内的n个数字中有且只有一个数字不在该数组中，请找出这个数字。\n\n示例\n\n示例 1:\n\n    输入: [0,1,3]\n\n    输出: 2\n\n示例 2:\n\n    输入: [0,1,2,3,4,5,6,7,9]\n\n    输出: 8\n\n代码及思路\n\n思路\n\n题目中的关键信息：长度为n-1， 但有n个数字(0~n-1), 数字递增， 有且只有一个数字不在该数组中。\n\n通过这几个关键信息我们可以得出的结论是:只能按照间隔为1进行递增，如果后一个数字减去前一个数字大于1，那说明这两个数 ...",id:"post",pid:"post",readingTime:{text:"1 min read",minutes:.535,time:32100,words:107}},{title:"1103.分糖果II",frontmatter:{title:"1103.分糖果II",date:"2020-06-13",author:"Yoha",tags:["Leetcode"],location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017151542.jpeg",meta:[{name:"title",content:"分糖果II"},{name:"description",content:"分糖果II"},{name:"keywords",content:"分糖果, leetcode, Leetcode"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-06-13-leetcode-distributeCandies-1103.html",relativePath:"_posts/2020-06-13-leetcode-distributeCandies-1103.md",key:"v-0db4363e",path:"/2020/06/13/leetcode-distributecandies-1103/",headers:[{level:2,title:"描述",slug:"描述"},{level:2,title:"示例",slug:"示例"},{level:2,title:"代码及思路",slug:"代码及思路"},{level:3,title:"思路",slug:"思路"},{level:3,title:"代码",slug:"代码"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" 1103.分糖果II \n 描述 \n 排排坐，分糖果。 \n 我们买了一些糖果 candies，打算把它们分给排好队的 n = num_people 个小朋友。 \n 给第一个小朋友 1 颗糖果，第二个小朋友 2 颗，依此类推，直到给最后一个小朋友 n 颗糖果。 \n 然后，我们再回到队伍的起点，给第一个小朋友 n + 1 颗糖果，第二个小朋友 n + 2 颗，依此类推，直到给最后一个小朋友 2 * n 颗糖果。 \n 重复上述过程（每次都比上一次多给出一颗糖果，当到达队伍终点后再次从队伍起点开始），直到我们分完所有的糖果。注意，就算我们手中的剩下糖果数不够（不比前一次发出的糖果多），这些糖果也会全部发给当前的小朋友。 \n 返回一个长度为 num_people、元素之和为 candies 的数组，以表示糖果的最终分发情况（即 ans[i] 表示第 i 个小朋友分到的糖果数）。 \n 示例 \n \n \n 示例 1： \n 输入：candies = 7, num_people = 4 \n 输出：[1,2,3,1] \n \n \n 解释： \n 第一次，ans[0] += 1，数组变为 [1,0,0,0]。 \n 第二次，ans[1] += 2，数组变为 [1,2,0,0]。 \n 第三次，ans[2] += 3，数组变为 [1,2,3,0]。 \n 第四次，ans[3] += 1（因为此时只剩下 1 颗糖果），最终数组变为 [1,2,3,1]。 \n \n \n \n \n 示例 2： \n 输入：candies = 10, num_people = 3 \n 输出：[5,2,3] \n \n \n 解释： \n 第一次，ans[0] += 1，数组变为 [1,0,0]。 \n 第二次，ans[1] += 2，数组变为 [1,2,0]。 \n 第三次，ans[2] += 3，数组变为 [1,2,3]。 \n 第四次，ans[0] += 4，最终数组变为 [5,2,3]。 \n 代码及思路 \n 思路 \n 分给小朋友的糖果数量是以1递增的，并且是不断循环的，直到糖果分完。每次分的糖果可以通过一个全局变量j来控制，并且每次循环要判断剩余的糖果是否大于0，大于0则进行分配糖果。如果分发玩一轮后还有剩余的糖果，则再次分发剩余的糖果。 \n 代码 \n let  j  =   0 ; \n let  arr  =   [ ] ; \n var   distributeCandies   =   function   ( candies ,  num_people )   { \n   while   ( candies  >   0 )   { \n     for   ( let  i  =   0 ;  i  <  num_people ;  i ++ )   { \n      arr [ i ]   =  arr [ i ]   ?  arr [ i ]   :   0 \n       if   ( candies  >   0 )   { \n        j ++ ; \n        arr [ i ]   =  candies  -  j  >   0   ?  arr [ i ]   +  j  :  arr [ i ]   +  candies\n        candies  -=  j ; \n       } \n     } \n   } \n   return  arr ; \n } ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 借鉴一个大佬的代码： \n /**\n * @param {number} candies\n * @param {number} num_people\n * @return {number[]}\n */ \n let   distributeCandies   =   function ( candies ,  num_people )   { \n     let  result  =   new   Array ( num_people ) . fill ( 0 ) ; \n     let  i  =   1 ; \n     while ( candies  >   0 ) { \n         var  temp  =   ( i  -   1   +  num_people )   %  num_people ; \n        result [ temp ]   =   result [ temp ]   +   ( candies  >  i  ?  i  :  candies ) \n        candies  -=  i ++ ; \n     } \n     return  result ; \n } ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 在这里说明一个规律: 一个连续变化的值对n取余，其值会在0~n-1范围内周期性的变化。 \n 举个栗子： \n 11 % 3 =   2 \n 10 % 3 =   1 \n 9 % 3 =   0 \n 8 % 3 =   2 \n 7 % 3 =   1 \n 6 % 3 =   0 \n 5 % 3 =   2 \n 4 % 3 =   1 \n 3 % 3 =   0 \n 2 % 3 =   2 \n 1 % 3 =   1 \n 0 % 3 =   0 \n \n 1 2 3 4 5 6 7 8 9 10 11 12 ",summary:"\n描述\n\n排排坐，分糖果。\n\n我们买了一些糖果 candies，打算把它们分给排好队的 n = num_people 个小朋友。\n\n给第一个小朋友 1 颗糖果，第二个小朋友 2 颗，依此类推，直到给最后一个小朋友 n 颗糖果。\n\n然后，我们再回到队伍的起点，给第一个小朋友 n + 1 颗糖果，第二个小朋友 n + 2 颗，依此类推，直到给最后一个小朋友 2 * n 颗糖果。\n\n重复上述过程（每次都比上一次多给出一颗糖果，当到达队伍终点后再次从队伍起点开始），直到我们分完所有的糖果。注意，就算我们手中的剩下糖果数不够（不比前一次发出的糖果多），这些糖果也会全部发给当前的小朋友。\n\n返回一个长度为 ...",id:"post",pid:"post",readingTime:{text:"2 min read",minutes:1.325,time:79500,words:265}},{title:"JS原生函数实现之call、apply、bind",frontmatter:{title:"JS原生函数实现之call、apply、bind",date:"2020-06-15",author:"Yoha",tags:["前端开发","JavaScript"],location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017105512.jpeg",meta:[{name:"title",content:"JS原生函数实现之call/apply/bind"},{name:"description",content:"JS原生函数实现之call/apply/bind"},{name:"keywords",content:"call, apply, bind, 模拟实现"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-06-15-apply-call-bind.html",relativePath:"_posts/2020-06-15-apply-call-bind.md",key:"v-0c7d089e",path:"/2020/06/15/apply-call-bind/",headers:[{level:2,title:"参考文章",slug:"参考文章"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" JS原生函数实现之call/apply/bind \n      let  foo  =   { \n      a :   10 \n     } \n\n     function   bar ( name ,  age )   { \n      console . log ( name ,  age ) ; \n      console . log ( this . a ) ; \n     } \n\n\n     /*\n    let foo = {\n      a: 10,\n      bar: function(name,age) {\n        console.log(name, age);\n        console.log(this.a);\n      }\n    }\n    foo.bar();//10\n    */ \n\n\n     Function . prototype . call2   =   function   ( context )   { \n       let  _context  =  context  ||  window ; \n      _context . fn  =   this ; \n       let  arg  =   [ ] ; \n       for   ( let  i  =   1 ;  i  <  arguments . length ;  i ++ )   { \n        arg . push ( arguments [ i ] ) \n       } \n       let  res  =  _context . fn ( ... arg ) ; \n       delete  _context . fn ; \n       return  res ; \n     } \n\n     Function . prototype . apply2   =   function   ( context )   { \n       let  _context  =  context  ||  window ; \n      _context . fn  =   this ; \n       if   ( Array . isArray ( arguments [ 1 ] ) )   { \n         let  res  =  _context . fn ( ... arguments [ 1 ] ) ; \n         delete  _context . fn ; \n         return  res ; \n       }   else   if   ( arguments [ 1 ] )   { \n         throw   new   Error ( 'need array' ) ; \n       }   else   { \n         let  res  =  _context . fn ( ) ; \n         delete  _context . fn ; \n         return  res ; \n       } \n     } \n\n     Function . prototype . bind2   =   function   ( context )   { \n       let  self  =   this ;   //self === bar \n       let  arg  =   Array . prototype . slice . call ( arguments ,   1 ) ; \n       let   fbound   =   function   ( )   { \n         let  bindArg  =   Array . prototype . slice . call ( arguments ) ; \n         //当作为构造函数时，this 指向实例，self 指向绑定函数(bar)， \n         //因为下面一句 `fbound.prototype = this.prototype;`，已经修改了 fbound.prototype 为 绑定函数(bar)的 prototype， \n         //此时结果为 true，当结果为 true 的时候，this 指向实例。 \n\n         //当作为普通函数时，this 指向 window，self 指向绑定函数，此时结果为 false，当结果为 false 的时候，this 指向绑定的 context。 \n         // console.log(this instanceof self); \n         // console.log(this); \n         // console.log(self); \n        self . call2 ( this   instanceof   self   ?   this   :  context ,   ... arg . concat ( bindArg ) ) ; \n       } \n      fbound . prototype  =   this . prototype ; \n       return  fbound ; \n     } \n\n     // bar.call2(foo, 'kenvin', 18); \n     // bar.apply2(foo, ['jack', 1888]); \n\n     let  b  =  bar . bind2 ( foo ,   'kkk' ) \n     b ( 15 ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 #  参考文章 \n JavaScript深入之call和apply的模拟实现 \n ",summary:"\n\n    let foo = {\n      a: 10\n    }\n\n    function bar(name, age) {\n      console.log(name, age);\n      console.log(this.a);\n    }\n\n    /*\n    let foo = {\n      a: 10,\n      bar: function(name,age) {\n        console.log(name, age);\n        console.log(this.a);\n      }\n    }\n    foo.bar();//10\n    */\n ...",id:"post",pid:"post",readingTime:{text:"2 min read",minutes:1.08,time:64800.000000000015,words:216}},{title:"JS原生函数实现之数组实例方法map/reduce",frontmatter:{title:"JS原生函数实现之数组实例方法map/reduce",date:"2020-06-16",author:"Yoha",tags:["前端开发","JavaScript"],location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017150634.png",meta:[{name:"title",content:"JS原生函数实现之数组实例方法map/reduce"},{name:"description",content:"JS原生函数实现之数组实例方法map/reduce"},{name:"keywords",content:"map, reduce"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-06-16-map-reduce.html",relativePath:"_posts/2020-06-16-map-reduce.md",key:"v-7b88550e",path:"/2020/06/16/map-reduce/",lastUpdated:"8/17/2021, 2:49:02 PM",content:" JS原生函数实现之数组实例方法map/reduce \n \n Array . prototype . map2   =   function   ( fn ,  thisVal )   { \n   if   ( typeof  fn  !=   'function' )   { \n     throw   new   Error ( fn  +   'should be function' ) ; \n   } \n   if   ( this . length  ==   0 )   { \n     return   [ ] ; \n   } \n   return   this . reduce ( ( arr ,  curVal ,  curIndex )   =>   { \n    arr . push ( fn . call ( thisVal ,  curVal ,  curIndex ,   this ) ) ; \n     return  arr ; \n   } ,   [ ] ) \n } ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 \n Array . prototype . reduce2   =   function   ( callback ,  initData )   { \n   let  initVal  =  initData  ?  initData  :  initData  ==   0   ?  initData  :   this [ 0 ] ; \n   for   ( let  i  =  initData  ?   0   :  initData  ==   0   ?   0   :   1 ;  i  <   this . length ;  i ++ )   { \n    initVal  =   callback ( initVal ,   this [ i ] ,  i ,   this ) \n   } \n   return  initVal ; \n } \n \n 1 2 3 4 5 6 7 ",summary:"\n\nArray.prototype.map2 = function (fn, thisVal) {\n  if (typeof fn != 'function') {\n    throw new Error(fn + 'should be function');\n  }\n  if (this.length == 0) {\n    return [];\n  }\n  return this.reduce((arr, curVal, curIndex) => {\n    arr.push(fn.call(thisVal, curVal, curIndex, this));\n    return arr ...",id:"post",pid:"post",readingTime:{text:"1 min read",minutes:.515,time:30900.000000000004,words:103}},{title:"239.滑动窗口最大值",frontmatter:{title:"239.滑动窗口最大值",date:"2020-06-16",author:"Yoha",tags:["Leetcode"],location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017151542.jpeg",meta:[{name:"title",content:"滑动窗口最大值"},{name:"description",content:"滑动窗口最大值"},{name:"keywords",content:"滑动窗口最大值"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-06-16-leetcode-maxSlidingWindow-239.html",relativePath:"_posts/2020-06-16-leetcode-maxSlidingWindow-239.md",key:"v-91bb9904",path:"/2020/06/16/leetcode-maxslidingwindow-239/",headers:[{level:2,title:"描述",slug:"描述"},{level:2,title:"示例",slug:"示例"},{level:2,title:"代码及思路",slug:"代码及思路"},{level:3,title:"思路",slug:"思路"},{level:3,title:"代码",slug:"代码"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" 239.滑动窗口最大值 \n 描述 \n 给定一个数组 nums，有一个大小为 k 的滑动窗口从数组的最左侧移动到数组的最右侧。你只可以看到在滑动窗口内的 k 个数字。滑动窗口每次只向右移动一位。 \n 返回滑动窗口中的最大值。 \n 示例 \n \n \n 示例: \n 输入: nums = [1,3,-1,-3,5,3,6,7], 和 k = 3 \n 输出: [3,3,5,5,6,7] \n \n \n 解释: \n \n \n 滑动窗口的位置                 最大值 \n ---------------              ---------- \n [1  3  -1] -3  5  3  6  7    =>   3 \n 1 [3  -1  -3] 5  3  6  7    =>   3 \n 1  3 [-1  -3  5] 3  6  7    =>   5 \n 1  3  -1 [-3  5  3] 6  7    =>   5 \n 1  3  -1  -3 [5  3  6] 7    =>   6 \n 1  3  -1  -3  5 [3  6  7]   =>   7 \n 代码及思路 \n 思路 \n 其实开始感觉这个题目没啥难度，不知道为啥是困难。(年轻啊0.0)。 \n 说一下最开始的思路：主要利用数组的slice函数来不断获取窗口内的数组，然后利用Math.max.apply(null, windowArr)获取窗口数组的最大值。然后考率一下窗口宽度大于数组长度的情况，即获取整个数组的最大值。 \n 然后就有了下面的代码： \n /**\n * @param {number[]} nums\n * @param {number} k\n * @return {number[]}\n */ \n var   maxSlidingWindow   =   function   ( nums ,  k )   { \n     let  len  =  nums . length ; \n     let  res  =   [ ] ; \n     if   ( k  >=  len )   return   [ Math . max . apply ( null ,  nums ) ] ; \n     for   ( let  i  =   0 ;  i  <=  len  -  k ;  i ++ )   { \n        res . push ( Math . max . apply ( null ,  nums . slice ( i ,  i  +  k ) ) ) ; \n     } \n     return  res ; \n } ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 可悲的是：超时啦。(是因为一个巨长的数组引起的) \n 然后改进了一下，想着既然是因为数组的长度引起的问题，那么就不维护一个那么长的数组啦，只要维护窗口宽度k长度的数组。毕竟是要取窗口宽度内的数组最大值。 \n /**\n * @param {number[]} nums\n * @param {number} k\n * @return {number[]}\n */ \n var   maxSlidingWindow   =   function ( nums ,  k )   { \n     if ( nums . length  ===   1 )   return  nums ; \n     let  arr  =   [ ] ,  res  =   [ ] ; \n     for ( let  i  =   0 ;  i  <  nums . length ;  i ++ )   { \n        arr . push ( nums [ i ] ) ; \n         if ( i  >=  k  -   1 )   { \n            res . push ( Math . max ( ... arr ) ) ; \n            arr . shift ( ) ; \n         } \n     } \n     return  res ; \n } ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 这次确实通过啦，但是那个时间 7036ms 。 \n 遂去研究了一下大佬们的代码(如下) \n 代码 \n 参考代码链接 \n 自己写一个由大到小的有序队列queue，队列里0的位置一直是最大的元素，里面有3个方法: \n \n push(val)：先将队列里面小于val的数都删掉，然后将val插入到队列; \n pop(val)：用于删除窗口外的最大值(比如你在找3,4,5三个位置的最大值,但是2位置的最大值还在队列里面,而且比它们都大,但是它已经过时了,要把它删掉,不能影响后续的比较),如果最大值还在窗口内那么它不会删除任何值 \n max()：返回队列的第一个元素，也就是最大值 \n \n 双端队列： \n /**\n * @param {number[]} nums\n * @param {number} k\n * @return {number[]}\n */ \n var   maxSlidingWindow   =   function ( nums ,  k )   { \n     class   Queue   { \n         constructor ( )   { \n             this . queue  =   [ ] ; \n         } \n         push ( val )   { \n             while ( this . queue . length  &&   this . queue [ this . queue . length  -   1 ]   <  val )   { \n                 this . queue . pop ( ) ; \n             } \n             this . queue . push ( val ) ; \n         } \n         pop ( val )   { \n             if ( this . queue [ 0 ]   ===  val )   this . queue . shift ( ) ; \n         } \n         max ( )   { \n             return   this . queue [ 0 ] ; \n         } \n     } \n\n     let  len  =  nums . length ; \n     let  queue  =   new   Queue ( ) ; \n     let  res  =   [ ] ; \n     if ( k  ===   0 )   return   [ ] ; \n     for ( let  i  =   0 ;  i  <  k  -   1 ;  i  ++ )   { \n        queue . push ( nums [ i ] ) ; \n     } \n     for ( let  i  =  k  -   1 ;  i  <  len ;  i  ++ )   { \n        queue . push ( nums [ i ] ) ; \n        res . push ( queue . max ( ) ) ; \n        queue . pop ( nums [ i  -  k  +   1 ] ) ; \n     } \n     return  res ; \n } ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 ",summary:"\n描述\n\n给定一个数组 nums，有一个大小为 k 的滑动窗口从数组的最左侧移动到数组的最右侧。你只可以看到在滑动窗口内的 k 个数字。滑动窗口每次只向右移动一位。\n\n返回滑动窗口中的最大值。\n\n示例\n\n示例:\n\n    输入: nums = [1,3,-1,-3,5,3,6,7], 和 k = 3\n\n    输出: [3,3,5,5,6,7]\n\n解释:\n\n滑动窗口的位置                 最大值\n\n\\---------------              ----------\n\n[1  3  -1] -3  5  3  6  7    =>   3\n\n 1 [3  -1  - ...",id:"post",pid:"post",readingTime:{text:"2 min read",minutes:1.695,time:101700,words:339}},{title:"元素垂直水平居中的几种方法",frontmatter:{title:"元素垂直水平居中的几种方法",date:"2020-06-17",author:"Yoha",tags:["前端开发","CSS"],location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017145747.jpeg",meta:[{name:"title",content:"元素垂直水平居中的几种方法"},{name:"description",content:"元素垂直水平居中的几种方法"},{name:"keywords",content:"元素垂直水平居中"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-06-17-center-middle.html",relativePath:"_posts/2020-06-17-center-middle.md",key:"v-5650b51e",path:"/2020/06/17/center-middle/",headers:[{level:2,title:"方法1：",slug:"方法1"},{level:2,title:"方法2：",slug:"方法2"},{level:2,title:"方法3：",slug:"方法3"},{level:2,title:"方法4：",slug:"方法4"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" 元素垂直水平居中的几种方法 \n HTML: \n < body > \n   < div > </ div > \n </ body > \n \n 1 2 3 #  方法1： \n body   { \n   width :  100% ; \n   height :  100vh ; \n   border :  1px solid blue ; \n } \n body div   { \n   height :  100px ; \n   width :  100px ; \n   background-color :  red ; \n   position :  absolute ; \n   top :  0 ; \n   bottom :  0 ; \n   left :  0 ; \n   right :  0 ; \n   margin :  auto ; \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 #  方法2： \n body   { \n   width :  100% ; \n   height :  100vh ; \n   border :  1px solid blue ; \n   display :  flex ; \n } \n body div   { \n   height :  100px ; \n   width :  100px ; \n   background-color :  red ; \n   margin :  auto ; \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 #  方法3： \n body   { \n   width :  100% ; \n   height :  100vh ; \n   border :  1px solid blue ; \n   display :  flex ; \n   justify-content :  center ; \n   align-items :  center ; \n } \n body div   { \n   height :  100px ; \n   width :  100px ; \n   background-color :  red ; \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 #  方法4： \n body   { \n   width :  100% ; \n   height :  100vh ; \n   border :  1px solid blue ; \n } \n body div   { \n   height :  100px ; \n   width :  100px ; \n   background-color :  red ; \n   position :  absolute ; \n   left :  50% ; \n   top :  50% ; \n   transform :   translate ( -50% ,  -50% ) ; \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 ",summary:"\n\nHTML:\n\n方法1：\n\nbody {\n  width: 100%;\n  height: 100vh;\n  border: 1px solid blue;\n}\nbody div {\n  height: 100px;\n  width: 100px;\n  background-color: red;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: auto;\n}\n\n方法2：\n\nbody {\n  width: 100%;\n  height: 100vh;\n  border: 1px sol ...",id:"post",pid:"post",readingTime:{text:"1 min read",minutes:.705,time:42300,words:141}},{title:"ES5/6对象的继承及区别",frontmatter:{title:"ES5/6对象的继承及区别",date:"2020-06-18",author:"Yoha",tags:["前端开发","JavaScript"],location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017105512.jpeg",meta:[{name:"title",content:"ES5/6对象的继承及区别"},{name:"description",content:"ES5/6对象的继承及区别"},{name:"keywords",content:"ES5, ES6, 继承"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-06-18-es5-es6-extend.html",relativePath:"_posts/2020-06-18-es5-es6-extend.md",key:"v-03a57176",path:"/2020/06/18/es5-es6-extend/",headers:[{level:2,title:"ES5的对象继承(组合继承)",slug:"es5的对象继承-组合继承"},{level:2,title:"ES6的对象继承",slug:"es6的对象继承"},{level:2,title:"区别以及要注意的点",slug:"区别以及要注意的点"},{level:3,title:"区别1：属性的枚举性",slug:"区别1-属性的枚举性"},{level:3,title:"区别2：类必须使用new来调用",slug:"区别2-类必须使用new来调用"},{level:3,title:"区别3：类不存在变量提升",slug:"区别3-类不存在变量提升"},{level:3,title:"区别4：继承机制区别",slug:"区别4-继承机制区别"},{level:2,title:"属性的遍历(外加补充)",slug:"属性的遍历-外加补充"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:' ES5/6对象的继承 \n ES5的对象继承(组合继承) \n   function   user ( name ,  age )   { \n     this . name  =  name ; \n     this . age  =  age ; \n   } \n\n  user . prototype . sayName   =   function   ( )   { \n    console . log ( this . name ) ; \n   } \n\n   function   vipuser ( name ,  age ,  level )   { \n     user . call ( this ,  name ,  age ) ; \n     this . level  =  level ; \n   } \n\n  vipuser . prototype  =   new   user ( ) ; \n  vipuser . prototype . constructor  =  vipuser ; \n\n  vipuser . prototype . saylevel   =   function   ( )   { \n    console . log ( this . level ) ; \n   } \n\n  console . log ( Reflect . ownKeys ( vipuser . prototype ) ) \n  console . log ( Object . keys ( vipuser . prototype ) ) \n\n\n   let  vip  =   new   vipuser ( \'tom\' ,   12 ,   6 ) ; \n  vip . saylevel ( ) ;   //6 \n  vip . sayName ( ) ;   //tom \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 #  ES6的对象继承 \n class   user   { \n     constructor ( name ,  age )   { \n       this . name  =  name ; \n       this . age  =  age ; \n     } \n\n     sayName ( )   { \n      console . log ( this . name ) ; \n     } \n   } \n\n   class   vipuser   extends   user   { \n     constructor ( name ,  age ,  level )   { \n       super ( name ,  age ) ;   //调用父类的constructor(name, age) \n       this . level  =  level ; \n     } \n\n     saylevel ( )   { \n      console . log ( this . level ) ; \n     } \n   } \n\n  console . log ( Reflect . ownKeys ( vipuser . prototype ) ) \n  console . log ( Object . keys ( vipuser . prototype ) ) \n\n   let  vip  =   new   vipuser ( \'tom\' ,   12 ,   6 ) ; \n  vip . saylevel ( ) ;   //6 \n  vip . sayName ( ) ;   //tom \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 构造函数的prototype属性在ES6的“类”上依然存在。事实上，类的所有方法都定义在类的prototype属性上。 \n 区别以及要注意的点 \n 区别1：属性的枚举性 \n 类内部定义的所有方法都是不可枚举的。 \n //ES5 \nconsole . log ( Object . keys ( vipuser . prototype ) ) \n //["name", "age", "constructor", "saylevel"] \nconsole . log ( Reflect . ownKeys ( vipuser . prototype ) ; \n //["name", "age", "constructor", "saylevel"] \n \n 1 2 3 4 5 //ES6 \nconsole . log ( Reflect . ownKeys ( vipuser . prototype ) ) ; \n //["constructor", "saylevel"] \nconsole . log ( Object . keys ( vipuser . prototype ) ) ; \n //[] \n \n 1 2 3 4 5 #  区别2：类必须使用new来调用 \n 那如果要把ES5的构造函数也必须使用new，应该如何改造？ \n function   F ( )   { \n   if ( ! ( this   instanceof   F ) )   throw   new   Error ( \'need new keyword\' ) ; \n   ... \n } \n\n //或者 \n\n function   F ( ) { \n   if ( ! new . target )   throw   new   Error ( "need new keyword" ) ; \n  console . log ( new . target ) ; \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 #  区别3：类不存在变量提升 \n 类不存在变量提升，这一点与ES5完全不一样。 \n new   Foo ( ) ;   //ReferenceError \n class   Foo   { } \n \n 1 2 这种规定的原因与继承有关，必须要保证子类在父类之后定义。 \n { \n   let  Foo  =   class   { } ; \n   class   Bar   extends   Foo   { } \n } \n \n 1 2 3 4 这段代码不会报错，因为Bar继承Foo的时候，Foo已经定义了。但是如果存在变量提升，上面的代码就会报错。因为class会被提升到顶部，而let命令是不提升的，所以导致Bar继承Foo的时候，Foo还没有定义。 \n 区别4：继承机制区别 \n ES5的继承实质是先创造子类的实例对象，然后再将父类的方法添加到this上面(Parent.apply(this))。ES6的继承机制完全不同，实质是先创造父类的实例对象this(所以必须先调通super方法)，然后再用子类的构造函数去修改this。 \n \n \n 注意点 \n 子类必须在constructor中调用super方法，否则新建实例时会报错。在子类的构造函数中，只有调用super之后才可以使用this关键字，否则报错。 \n 属性的遍历(外加补充) \n \n \n for...in.. \n for...in...循环遍历对象 自身的 和 继承的 可枚举 属性(不含Symbol属性) \n \n \n Object.keys(obj) \n Object.keys(obj)返回一个数组，包含对象 自身的 (不含继承)所有  可枚举  的属性(不含Symbol属性) \n \n \n Object.getOwnPropertyNames(obj) \n Object.getOwnPropertyNames(obj)返回一个数组，包含对象自身的 所有 属性(不含Symbol属性，但是包含不可枚举属性) \n \n \n Object.getOwnPropertySymbols(obj) \n Object.getOwnPropertySymbols(obj)返回一个数组，包含对象自身的 所有 Symbol属性。 \n \n \n Reflect.ownKeys(obj) \n Reflect.ownKeys(obj)返回一个数组，包含对象 自身 的所有属性，不管属性名是Symbol还是字符串，也不管是否可枚举。 \n 以上5种遍历对象属性的方法都遵守同样的遍历顺序： \n \n 首先遍历所有属性名为数值的属性，按照数字排序. \n 其次遍历所有属性名为字符串的属性，按照生成时间排序. \n 最后遍历所有属性名为Symbol的属性，按照生成时间排序. \n \n Reflect . ownKeys ( { \n   [ Symbol ( ) ] :   0 , \n  b :   0 , \n   10 :   0 , \n   2 :   0 , \n  a :   0 \n } ) \n //[\'2\', \'10\', \'b\', \'a\', Symbol()] \n \n 1 2 3 4 5 6 7 8 \n \n ',summary:"\nES5的对象继承(组合继承)\n\n function user(name, age) {\n    this.name = name;\n    this.age = age;\n  }\n\n  user.prototype.sayName = function () {\n    console.log(this.name);\n  }\n\n  function vipuser(name, age, level) {\n    user.call(this, name, age);\n    this.level = level;\n  }\n\n  vipuser.prototype = new user();\n ...",id:"post",pid:"post",readingTime:{text:"2 min read",minutes:1.28,time:76800,words:256}},{title:"CommonJS 与 ES6 Module的区别",frontmatter:{title:"CommonJS 与 ES6 Module的区别",date:"2020-06-19",author:"Yoha",tags:["前端开发","JavaScript"],location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017105512.jpeg",meta:[{name:"title",content:"CommonJS 与 ES6 Module的区别"},{name:"description",content:"CommonJS 与 ES6 Module的区别"},{name:"keywords",content:"CommonJS, ES6 Module, 区别"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-06-19-cjs&esm-import-diff.html",relativePath:"_posts/2020-06-19-cjs&esm-import-diff.md",key:"v-7fbc829e",path:"/2020/06/19/cjs-esm-import-diff/",headers:[{level:2,title:"静态和动态",slug:"静态和动态"},{level:2,title:"值拷贝和动态映射",slug:"值拷贝和动态映射"},{level:3,title:"cjs",slug:"cjs"},{level:3,title:"esm",slug:"esm"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" CommonJS 与 ES6 Module的区别 \n \n 主要参考书籍：《webpack实战：入门、进阶与调优》(微信读书) \n 静态和动态 \n cjs与esm最本质的区别在于前者对模块依赖的解决是“动态的”。而后者是“静态的”。在这里“动态”的含义是，模块依赖关系的建立发生在代码运行阶段；而“静态”则是模块依赖关系的建立发生在代码编译阶段。 \n 先看一个cjs的例子 \n //calculator.js \nmodule . exports  =   { \n  name :   'calculator' \n } ; \n\n //index.js \n const  name  =   require ( './calculator.js' ) . name\n \n 1 2 3 4 5 6 7 当index.js加载calculator.js时，会执行calculator.js中的代码，并将其module.exports对象作为require函数的返回值进行返回。并且require的模块路径可以动态指定，支传入一个表达式，我们甚至可以通过if语句判断是否加载某个模块。因此，在cjs模块被执行前，并没有办法确定明确的依赖关系，模块的导入、导出发生在代码的运行阶段。 \n 同样的例子，我们对比一下esm的写法： \n //calculator.js \n export   const  name  =   'calculator' ; \n\n //index.js \n import   {  name  }   from   './calculator.js' \n \n 1 2 3 4 5 esm的导入、导出语句都是声明式的，它不支持导入的路径是一个表达式，并且导入导出的语句必须位于模块的顶层作用域(比如不能放在if语句中)。因此，我们说esm是一种静态的模块结构，在ES6代码的编译阶段就可以分析出模块的依赖关系。 \n 他相比于cjs来说具备以下几点优势： \n \n 死代码检测和排除 \n 模块变量类型检查 \n 编译器优化。在cjs等动态模块系统中，无论采用哪种方式，本质上导入的都是一个对象，而esm支持直接导入变量，减少了引用层级，程序效率更高。 \n 值拷贝和动态映射 \n 在导入一个模块时，对于cjs来说获取的是一份导出值的拷贝；而在esm中则是值的动态映射，并且这个映射是只读的。 \n cjs \n //calculator.js \n var  count  =   0 ; \nmodule . exports  =   { \n  count :  count , \n   add :   function ( a , b )   { \n    count  +=   1 ; \n     return  a  +  b ; \n   } \n } \n\n //index.js \n var  count  =   require ( './calculator.js' ) . count ; \n var  add  =   require ( './calculator.js' ) . add ; \n\nconsole . log ( count ) ; //0  (这里是对calculator.js中count值的拷贝) \n add ( 2 , 3 ) ; \nconsole . log ( count ) ; //0  (calculator.js中变量值得改变不会对这个拷贝值造成影响) \ncount  +=   1 ; \nconsole . log ( count ) ; //1  (拷贝的值可以改变) \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 #  esm \n //calculator.js \n let  count  =   0 ; \n const   add   =   function ( a , b )   { \n  count  +=   1 ; \n   return  a  +  b ; \n } \n export   {  count ,  add  } \n\n //index.js \n import   {  count ,  add  }   from   './calculator.js' \n\nconsole . log ( count ) ; //0  (对calculator.js中count值的映射) \n add ( 2 , 3 ) ; \nconsole . log ( count ) ; //1  (实时反映calculator.js中count值的变化) \n //count += 1; //不可更改，会抛出SyntaxError: \"count\" is read-only \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 我们不可以对esm导入的变量进行更改，可以将这种映射关系理解为一面镜子，从镜子中可以实时观察到原有的事物，但是并不可以操纵镜子中的镜像。 \n ",summary:"主要参考书籍：《webpack实战：入门、进阶与调优》(微信读书)\n\n静态和动态\n\ncjs与esm最本质的区别在于前者对模块依赖的解决是“动态的”。而后者是“静态的”。在这里“动态”的含义是，模块依赖关系的建立发生在代码运行阶段；而“静态”则是模块依赖关系的建立发生在代码编译阶段。\n\n先看一个cjs的例子\n\n//calculator.js\nmodule.exports = {\n  name: 'calculator'\n};\n\n//index.js\nconst name = require('./calculator.js').name\n\n当index.js加载calculator.js时，会执 ...",id:"post",pid:"post",readingTime:{text:"1 min read",minutes:.735,time:44100,words:147}},{title:"JS原生函数模拟实现new和instanceof及函数柯里化",frontmatter:{title:"JS原生函数模拟实现new和instanceof及函数柯里化",date:"2020-06-20",author:"Yoha",tags:["前端开发","JavaScript"],location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017105512.jpeg",meta:[{name:"title",content:"JS原生函数模拟实现new和instanceof及函数柯里化"},{name:"description",content:"JS原生函数模拟实现new和instanceof及函数柯里化"},{name:"keywords",content:"new, instanceof, 函数柯里化, Object.assign"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-06-20-new-instanceof.html",relativePath:"_posts/2020-06-20-new-instanceof.md",key:"v-e2b8eb88",path:"/2020/06/20/new-instanceof/",headers:[{level:2,title:"new的模拟实现",slug:"new的模拟实现"},{level:2,title:"instanceof模拟实现",slug:"instanceof模拟实现"},{level:2,title:"函数柯里化",slug:"函数柯里化"},{level:2,title:"Object.assign()实现",slug:"object-assign-实现"}],lastUpdated:"8/26/2021, 12:52:26 PM",content:" JS原生函数模拟实现new和instanceof \n new的模拟实现 \n 首先要知道new操作符，在new 一个构造函数时，发生了什么： \n \n 创建一个新对象 \n 将这个新对象的隐式原型(__proto__)指向构造函数的原型(prototype) \n 将构造函数的属性和方法添加到这个新对象中 \n 返回这个新对象 \n \n \n ps:如果构造函数返回的是对象或者是函数则在new运算符调用这个构造函数时返回的是对象或者函数。 \n \n 代码实现如下： \n function   _new ( ... args )   { \n   let  constructor  =  args [ 0 ] ; \n   let  obj  =  Object . create ( constructor . prototype ) ; //把前两步完成啦 \n   let  res  =   constructor . call ( obj ,   ... args . slcie ( 1 ) ) ; //完成第三步 \n   if ( ( typeof  res  ===   'object'   ||   typeof  res  ===   'function' )   && 　res  !==   null )   { \n     return  res ; //第四步 \n   }   else   { \n     return  obj ; //第四步 \n   } \n } \n \n 1 2 3 4 5 6 7 8 9 10 #  instanceof模拟实现 \n L instanceof R \n 原理: L的__proto__是不是等于R的prototype，如果不等于就再向上L.__proto__.__proto__,一直找到要么等于R.prototype,要么__proto__指向null。 \n 代码实现如下： \n function   _instanceof   ( L ,   R )   { \n   let   O   =   R . prototype ; \n   L   =   L . __proto__ ; \n   while ( true )   { \n     if ( L   ===   null )   { \n       return   false ; \n     } \n     if ( O   ===   L )   { \n       return   true ; \n     } \n\n     L   =   L . __proto__ ; \n   } \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 #  函数柯里化 \n \n 在计算机科学中，柯里化（Currying）是把接受多个参数的函数变换成接受一个单一参数(最初函数的第一个参数)的函数，并且返回接受余下的参数且返回结果的新函数的技术. \n \n function   curry ( fn )   { \n   let  len  =  fn . length ; \n   return   function   curryfn ( )   { \n     let  arg  =  Array . from ( aruments ) ; \n     if ( arg . length  <  len )   { \n       return   function ( )   { \n         return   curryfn . apply ( this ,  arg . concat ( ... aruments ) ) ) ; \n       } \n     }   else   { \n       fn . apply ( this ,  arg ) ; \n     } \n   } \n } \n function   sum ( a ,  b ,  c ,  d )   { \n  console . log ( a  +  b  +  c  +  d ) ; \n } \n let  currySum  =   curry ( sum ) ; \n currySum ( 1 , 2 ) ( 3 ) ( 4 ) //应该打印 10 \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 #  Object.assign()实现 \n 参考 MDN ployfill \n if   ( typeof  Object . assign  !==   'function' )   { \n   // Must be writable: true, enumerable: false, configurable: true \n  Object . defineProperty ( Object ,   \"assign\" ,   { \n     value :   function   assign ( target ,  varArgs )   {   // .length of function is 2 \n       'use strict' ; \n       if   ( target  ===   null   ||  target  ===   undefined )   { \n         throw   new   TypeError ( 'Cannot convert undefined or null to object' ) ; \n       } \n\n       var  to  =   Object ( target ) ; \n\n       for   ( var  index  =   1 ;  index  <  arguments . length ;  index ++ )   { \n         var  nextSource  =  arguments [ index ] ; \n\n         if   ( nextSource  !==   null   &&  nextSource  !==   undefined )   { \n           for   ( var  nextKey  in  nextSource )   { \n             // Avoid bugs when hasOwnProperty is shadowed \n             if   ( Object . prototype . hasOwnProperty . call ( nextSource ,  nextKey ) )   { \n              to [ nextKey ]   =  nextSource [ nextKey ] ; \n             } \n           } \n         } \n       } \n       return  to ; \n     } , \n    writable :   true , \n    configurable :   true \n   } ) ; \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 ",summary:"\nnew的模拟实现\n\n首先要知道new操作符，在new 一个构造函数时，发生了什么：\n\n创建一个新对象\n将这个新对象的隐式原型(\\\\proto\\\\)指向构造函数的原型(prototype)\n将构造函数的属性和方法添加到这个新对象中\n返回这个新对象\n\n> ps:如果构造函数返回的是对象或者是函数则在new运算符调用这个构造函数时返回的是对象或者函数。\n\n代码实现如下：\n\nfunction _new(...args) {\n  let constructor = args[0];\n  let obj = Object.create(constructor.prototype);//把前两步完成啦\n  ...",id:"post",pid:"post",readingTime:{text:"2 min read",minutes:1.385,time:83100,words:277}},{title:"函数防抖和节流、以及Promise.all实现",frontmatter:{title:"函数防抖和节流、以及Promise.all实现",date:"2020-06-22",author:"Yoha",tags:["前端开发","JavaScript"],location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017105512.jpeg",meta:[{name:"title",content:"函数防抖和节流、以及Promise.all实现"},{name:"description",content:"函数防抖和节流、以及Promise.all实现"},{name:"keywords",content:"防抖, 节流, Promise.all"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-06-22-debounce-throttle.html",relativePath:"_posts/2020-06-22-debounce-throttle.md",key:"v-07b67c04",path:"/2020/06/22/debounce-throttle/",headers:[{level:2,title:"防抖",slug:"防抖"},{level:2,title:"节流",slug:"节流"},{level:2,title:"Promise.all、Promise.race模拟实现",slug:"promise-all、promise-race模拟实现"},{level:3,title:"Promise.all",slug:"promise-all"},{level:3,title:"Promise.race",slug:"promise-race"}],lastUpdated:"8/26/2021, 12:52:26 PM",content:" 函数防抖和节流、以及Promise.all实现 \n 防抖 \n \n 所谓防抖，就是指触发事件后在 n 秒内函数只能执行一次，如果在 n 秒内又触发了事件，则会重新计算函数执行时间。 \n \n function   debounce ( fn ,  time )   { \n   let  _t ; \n   return   function   ( )   { \n     clearTimeout ( _t ) ; \n    _t  =   setTimeout ( ( )   =>   { \n       fn ( ) ; \n     } ,  time ) \n   } \n } \n function   handleresize ( )   { \n  console . log ( 1 ) ; \n } \n\nwindow . onresize  =   debounce ( handleresize ,   5000 ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 #  节流 \n \n 所谓节流，就是指连续触发事件但是在 n 秒中只执行一次函数。节流会稀释函数的执行频率。 \n \n function   throttle ( fn ,  delay )   { \n   let  currentTime  =   new   Date ( ) . getTime ( ) ; \n   return   function   ( )   { \n     if   ( new   Date ( ) . getTime ( )   -  currentTime  >  delay )   { \n       fn ( ) ; \n      currentTime  =   new   Date ( ) . getTime ( ) ; \n     } \n   } \n } \n function   handleresize ( )   { \n  console . log ( 1 ) ; \n } \nwindow . onresize  =   throttle ( handleresize ,   5000 ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 #  Promise.all、Promise.race模拟实现 \n Promise.all \n function   PromiseAll ( promiseArr )   { \n   if ( ! Array . isArray ( promiseArr ) )   throw   new   Error ( 'The arguments must be a Array' ) ; \n   let  len  =  promiseArr . length ,  value_arr  =   [ ] ,  count  =   0 ; \n   return   new   Promise ( ( resolve ,  reject )   =>   { \n     for ( let  i  =   0 ;  i  <  len ;  i ++ )   { \n      Promise . resolve ( promiseArr [ i ] ) . then ( value   =>   { \n        value_arr [ i ]   =  value ; \n        count ++ ; \n         if ( count  ==  len )   { \n           resolve ( value_arr ) ; \n         } \n       } ) . catch ( reason   =>   { \n         reject ( reason ) ; \n       } ) \n     } \n   } ) \n } \n\n let  p1  =   new   Promise ( 1 ) ; \n let  p2  =   new   Promise ( 2 ) ; \n let  p3  =   new   Promise ( 3 ) ; \n\n PromiseAll ( [ p1 , p2 , p3 ] ) . then ( valArr   =>   { \n  console . log ( valArr ) ; \n } ) . catch ( reason   =>   { \n  console . log ( reason ) ; \n } ) \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 #  Promise.race \n function   PromiseRace ( promiseArr )   { \n   if ( ! Array . isArray ( promiseArr ) )   throw   new   Error ( \"The arguments must be a Array\" ) ; \n   let  len  =  promiseArr . length ; \n   return   new   Promise ( ( resolve ,  reject )   =>   { \n     for ( let  i  =   0 ;  i  <  len ;  i ++ )   { \n      Promise . resolve ( promiseArr [ i ] ) . then ( value   =>   { \n         resolve ( value ) ; \n       } ) . catch ( reason   =>   { \n         reject ( reason ) ; \n       } ) \n     } \n   } ) \n } \n\n let  p1  =   new   Promise ( ( resolve ,  reject )   =>   { \n   setTimeout ( ( )   =>   { \n     resolve ( '5秒' ) ; \n   } ,   5000 ) ; \n } ) \n\n let  p2  =   new   Promise ( ( resolve ,  reject )   =>   { \n   setTimeout ( ( )   =>   { \n     resolve ( '3秒' ) ; \n   } ,   3000 ) ; \n } ) \n\n PromiseRace ( [ p1 , p2 ] ) . then ( value   =>   { \n  console . log ( value ) ; \n } ) . catch ( reason   =>   { \n  console . log ( reason ) ; \n } ) \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 ",summary:"\n防抖\n\n>所谓防抖，就是指触发事件后在 n 秒内函数只能执行一次，如果在 n 秒内又触发了事件，则会重新计算函数执行时间。\n\nfunction debounce(fn, time) {\n  let _t;\n  return function () {\n    clearTimeout(_t);\n    _t = setTimeout(() => {\n      fn();\n    }, time)\n  }\n}\nfunction handleresize() {\n  console.log(1);\n}\n\nwindow.onresize = debounce(handleresize, 5000 ...",id:"post",pid:"post",readingTime:{text:"2 min read",minutes:1.31,time:78600.00000000001,words:262}},{title:"事件触发器EventEmitter",frontmatter:{title:"事件触发器EventEmitter",date:"2020-06-23",author:"Yoha",tags:["前端开发","JavaScript"],location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017114430.jpg",meta:[{name:"title",content:"事件触发器EventEmitter"},{name:"description",content:"事件触发器EventEmitter"},{name:"keywords",content:"事件触发器, EventEmitter"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-06-23-EventEmitter.html",relativePath:"_posts/2020-06-23-EventEmitter.md",key:"v-0ef6168c",path:"/2020/06/23/eventemitter/",headers:[{level:2,title:"发布订阅模式：",slug:"发布订阅模式"},{level:2,title:"观察者模式（有待考证）：",slug:"观察者模式-有待考证"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" 事件触发器EventEmitter \n 发布订阅模式： \n class   EventEmitter   { \n   constructor ( )   { \n     this . _event  =   [ ] \n   } \n\n   on ( eventName ,  fn )   { \n     let  callback  =   this . _event [ eventName ]   ||   [ ] ; \n    callback . push ( fn ) ; \n     this . _event [ eventName ]   =  callback ; \n     return   this ; \n   } \n\n   emit ( ... args )   { \n     let  eventName  =  args [ 0 ] ; \n     let  params  =  args . slice ( 1 ) ; \n     let  event  =   this . _event [ eventName ] ; \n    event . forEach ( fn   =>   fn . apply ( this ,  params ) ) ; \n     return   this ; \n   } \n\n   off ( eventName ,  fn )   { \n     let  callback  =   this . _event [ eventName ] ; \n     this . _event [ eventName ]   =  callback  &&  callback . filter ( _fn   =>  _fn  !==  fn ) ; \n     return   this ; \n   } \n\n   once ( eventName ,  fn )   { \n     let   wrapFun   =   function ( ... args )   { \n       fn . apply ( this ,  args ) ; \n       this . off ( eventName ,  fn ) ; \n     } \n     this . on ( eventName ,  wrapFun ) ; \n     return   this ; \n   } \n } \n\n let  event  =   new   EventEmitter ( ) ; \n function   handleClick ( num )   { \n  console . log ( '--click--' ,  num ) ; \n } \n function   handleClick1 ( num )   { \n  console . log ( '--click1--' ,  num ) ; \n } \nevent . on ( 'click' ,  handleClick ) ; //订阅（监听） \nevent . on ( 'click' ,  handleClick1 ) ; //订阅（监听） \n /*执行其他代码，在某个时间触发（发布）click信号*/ \n ... \nevent . emit ( 'click' ,   10 ) ; //发布（触发） \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 上面的eventEmitter类的实现就是基于发布订阅模式。在阮一峰老师的《Javascript异步编程的4种方法》中提到： \n \n 我们假定，存在一个\"信号中心\"，某个任务执行完成，就向信号中心\"发布\"（publish）一个信号，其他任务可以向信号中心\"订阅\"（subscribe）这个信号，从而知道什么时候自己可以开始执行。这就叫做\"发布/订阅模式\"（publish-subscribe pattern），又称\"观察者模式\"（observer pattern）。 \n \n 发布订阅模式可以理解为是观察者模式的一种变形，两者的区别是：发布/订阅模式在观察者模式的基础上，在目标和观察者之间增加一个调度中心。 \n 观察者模式（有待考证）： \n \n 应该用Object.defineProperty() 或者用 Proxy 来实现。下面代码有点问题。待修改 \n \n class   Observe   { \n     constructor ( )   { \n       this . dep  =   [ ] ; \n     } \n\n     watcher ( propertyName ,  fn )   { \n       let  handle  =   this . dep [ propertyName ]   ||   [ ] ; \n      handle . push ( fn ) ; \n       this . dep [ propertyName ]   =  handle ; \n       return   this ; \n     } \n\n     unwatch ( propertyName )   { \n       let  depen  =   this . dep [ propertyName ] ; \n      depen  =  depen  &&   [ ] ; \n       this . dep [ propertyName ]   =  depen ; \n       return   this ; \n     } \n\n     notify ( propertyName ,   ... args )   { \n       let  handle  =   this . dep [ propertyName ] ; \n       if   ( handle  &&  handle . length  >   0 )   { \n        handle . forEach ( fn   =>   fn . apply ( this ,  args ) ) ; \n       } \n       return   this ; \n     } \n   } \n\n   let  observe  =   new   Observe ( ) ; \n\n   let  obj  =   { \n    a :   'first' , \n    b :   'second' \n   } \n\n   let  handle  =   { \n     get ( target ,  property )   { \n       return  Reflect . get ( target ,  property ) ; \n     } , \n     set ( target ,  key ,  value )   { \n      observe . notify ( key ) ; \n      Reflect . set ( target ,  key ,  value ) ; \n     } \n   } \n\n   function   watcher1 ( )   { \n    console . log ( 'watchee1: a have chage' ) ; \n   } \n\n   function   watcher2 ( )   { \n    console . log ( 'watchee2: a have chage' ) ; \n   } \n\n  observe . watcher ( 'a' ,  watcher1 ) ; \n  observe . watcher ( 'a' ,  watcher2 ) ; \n\n   let  proxy  =   new   Proxy ( obj ,  handle ) ; \n\n  proxy . a  =   10 ; \n  proxy . a  =   130 ; \n\n  observe . unwatch ( 'a' ) ; \n\n  proxy . a  =   100 ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 ",summary:"\n发布订阅模式：\n\nclass EventEmitter {\n  constructor() {\n    this._event = []\n  }\n\n  on(eventName, fn) {\n    let callback = this._event[eventName] || [];\n    callback.push(fn);\n    this._event[eventName] = callback;\n    return this;\n  }\n\n  emit(...args) {\n    let eventName = args[0];\n    let params = args.s ...",id:"post",pid:"post",readingTime:{text:"2 min read",minutes:1.335,time:80100,words:267}},{title:"less内置函数",frontmatter:{title:"less内置函数",date:"2020-06-28",author:"Yoha",tags:["CSS","Less"],location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017113243.jpeg",meta:[{name:"title",content:"less内置函数"},{name:"description",content:"less内置函数"},{name:"keywords",content:"less function, less"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-06-28-less-function.html",relativePath:"_posts/2020-06-28-less-function.md",key:"v-64dbd57e",path:"/2020/06/28/less-function/",headers:[{level:2,title:"Logical Functions",slug:"logical-functions"},{level:2,title:"String Function",slug:"string-function"},{level:2,title:"List Function(重点)",slug:"list-function-重点"},{level:2,title:"Math Function",slug:"math-function"},{level:2,title:"Type Function",slug:"type-function"},{level:2,title:"Misc Function",slug:"misc-function"},{level:2,title:"最后",slug:"最后"}],lastUpdated:"10/25/2021, 4:20:02 PM",content:' Less内置函数 \n Logical Functions \n \n \n if \n Examples: \n @some :  foo ; \n div   { \n   margin :   if ( ( 2>1 ) ,  0 ,  3px ) ; \n   color :   if ( ( iscolor ( @some ) ) ,   @some ,  black ) ; \n } \n \n 1 2 3 4 5 Result: \n div   { \n   margin :  0 ; \n   color :  black ; \n } \n \n 1 2 3 4 布尔表达式也是支持的： \n if ( not  ( true ) ,  foo ,  bar ) ; \n if ( ( true )  and  ( 2 > 1 ) ,  foo ,  bar ) ; \n if ( ( false )  or  ( isstring ( "boo!" ) ) ,  foo ,  bar ) ; \n \n 1 2 3 \n \n boolean \n Example: \n @bg :  black ; \n @bg-light :   boolean ( luma ( @bg )  > 50% ) ; \n\n div   { \n   background :   @bg ; \n   color :   if ( @bg-light ,  black ,  white ) ; \n } \n \n 1 2 3 4 5 6 7 Result: \n div   { \n   background :  black ; \n   color :  white ; \n } \n \n 1 2 3 4 \n String Function \n \n \n escape \n \n 不转义编码的字符: ,、/、?、@、 &、 +、 \'、 ~、 !、 $ \n 最常见的转义编码字符: \\<space\\>、 #、 ^、 (、 )、 {、 }、 |、 :、 >、 <、 ;、 ]、 [ 和 =. \n \n Example: \n escape ( \'a=1\' ) ; \n \n 1 Resule: \n a%3D1\n \n 1 \n \n e \n 字符串将作为参数并按原样返回其内容，但不带引号。它可用于输出无效的CSS语法的CSS值，或使用Less不能识别的专有语法. \n Example: \n @mscode :   "ms:alwaysHasItsOwnSyntax.For.Stuff()"  \n filter :   e ( @mscode ) ; \n \n 1 2 Result: \n filter :   ms : alwaysHasItsOwnSyntax.For. Stuff ( ) ; \n \n 1 \n \n %format \n \n 函数 %(string, arguments...) 格式化一个字符串 \n \n 第一个参数是带占位符的字符串. 所有占位符始于百分号%后跟字母s,S,d,D,a, 和 A. 剩下的参数是替换占位符的表达式. 如果你需要输出百分号, 用双百分号转义%%. \n 如果你需要把特殊字符转义成 utf-8转义码请使用大写字母占位符，该占位符会转义所有的特殊字符除了( ) \' ~ !。空格会被转义成%20。小写字母占位符会保留特殊字符的原样。 \n 占位符: \n \n d, D, a, A - 能被任何类型参数替换(颜色值, 数字, 转义值, 表达式, ...).如果你在字符串中结合使用,整个字符串参数都会替换进去——包括它的引号. 然后, 然后引号会被替换到字符串参数的原有位置, 也许会被转义或者还是不变的，取决于占位符是大写字母还是小写字母。 \n s, S - 能被除了颜色值以为任何类型参数替换. 如果你在字符串中结合使用, 只会替换成字符串参数的值，-而字符串参数引号都被忽略。 \n \n Example: \n format-a-d :  % ( "repetitions: %a file: %d" ,  1  +  2 ,   "directory/file.less" ) ; \n format-a-d-upper :  % ( \'repetitions: %A file: %D\' ,  1  +  2 ,   "directory/file.less" ) ; \n format-s :  % ( "repetitions: %s file: %s" ,  1  +  2 ,   "directory/file.less" ) ; \n format-s-upper :  % ( \'repetitions: %S file: %S\' ,  1  +  2 ,   "directory/file.less" ) ; \n \n 1 2 3 4 Result: \n format-a-d :   "repetitions: 3 file: " directory/file.less "" ; \n format-a-d-upper :   "repetitions: 3 file: %22directory%2Ffile.less%22" ; \n format-s :   "repetitions: 3 file: directory/file.less" ; \n format-s-upper :   "repetitions: 3 file: directory%2Ffile.less" ; \n \n 1 2 3 4 \n \n replace \n \n 用另一个字符串替换文本 \n \n 参数： \n \n string 搜索和替换用的字符串 \n pattern 一个字符串或者能搜索的正则表达式 \n replacement 匹配模式成功的替换字符串 \n flags (可选的) 正则表达式匹配标识（全匹配还是...） \n \n Example: \n replace ( "Hello, Mars?" ,   "Mars\\?" ,   "Earth!" ) ; \n replace ( "One + one = 4" ,   "one" ,   "2" ,   "gi" ) ; \n replace ( \'This is a string.\' ,   "(string)\\.$" ,   "new $1." ) ; \n replace ( ~ "bar-1" ,   \'1\' ,   \'2\' ) ; \n \n 1 2 3 4 Result: \n "Hello, Earth!" ; \n "2 + 2 = 4" ; \n \'This is a new string.\' ; \nbar-2 ; \n \n 1 2 3 4 \n List Function(重点) \n \n \n length \n 参数： list - 逗号或者空格隔开的值集合。 返回： 集合的值个数. \n \n 返回集合中的值的数目 \n \n 示例：length(1px solid red); 输出：3 \n Example: \n @list :   \'banana\' ,   \'tomato\' ,   \'potato\' ,   \'peach\' ; \n n :   length ( @list ) ; \n \n 1 2 Result: n:4; \n \n \n extract \n 参数： list - 逗号或者空格隔开的值集合。 index - 用于返回集合中指定位置值的整型数字。 返回： 集合指定位置处的值。 \n 示例： extract(8px dotted red, 2); 输出： dotted \n Example: \n @list :  apple ,  pear ,  coconut ,  orange ; \n value :   extract ( @list ,  3 ) ; \n \n 1 2 Result: \n value :  coconut ; \n \n 1 \n \n range \n 参数： \n \n start:可选的，起始值，比如1或者1px \n end: 终止值 \n step: 步长 \n \n Example: \n value :   range ( 4 ) ; \n value1 :   range ( 10px ,  30px ,  10 ) ; \n \n 1 2 Result: \n value :  1 2 3 4 ; \n value1 :  10px 20px 30px ; \n \n 1 2 \n \n each \n 参数： \n \n list:用逗号或空格分隔的值列表。 \n rules:规则集 \n \n Example: \n @selectors :  blue ,  green ,  red ; \n each ( @selectors,   { \n   .sel-@{value}   { \n     a :  b ; \n   } \n } ) \n \n 1 2 3 4 5 6 Result: \n .sel-blue   { \n   a :  b ; \n } \n .sel-green   { \n   a :  b ; \n } \n .sel-red   { \n   a :  b ; \n } \n \n 1 2 3 4 5 6 7 8 9 默认情况下，每个列表集的每个规则集都绑定到@value, @key和@index变量。 对于大多数列表，将为@key和@index分配相同的值(数字位置，从1开始)。 但是, 也可以将规则集本身用作结构化列表。 如： \n @set :   { \n   one :  blue ; \n   two :  green ; \n   three :  red ; \n } \n .set   { \n   each ( @set,   { \n     @{key}-@{index} :   @value ; \n   } ) \n } \n \n 1 2 3 4 5 6 7 8 9 10 这将输出： \n .set   { \n   one-1 :  blue ; \n   two-2 :  green ; \n   three-3 :  red ; \n } \n \n 1 2 3 4 5 在each()函数中并不是一定要使用@value, @key和@index。在Less 3.7中, Less通过each()函数引入了匿名混合的概念，该概念可能会在以后扩展到语法的其他部分。匿名混合以#()或.()的形式使用，就像常规的mixin一样以.或者#开头。 在each()中，可以像这样使用它： \n .set-2()   { \n   one :  blue ; \n   two :  green ; \n   three :  red ; \n } \n .set-2   { \n   // Call mixin and iterate each rule \n  each (.set-2(), .( @v ,  @k ,  @i )   { \n     @{k}-@{i} :   @v ; \n   } ) ; \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 输出结果为： \n .set-2   { \n   one-1 :  blue ; \n   two-2 :  green ; \n   three-3 :  red ; \n } \n \n 1 2 3 4 5 each()函数将采用匿名混入中定义的变量名,并按照他们的顺序依次绑定到@value，@key和@index。如果只写each(@list, .(@value){}),则@key和@index都不会被定义。 \n 通过range和each来模拟for循环： \n each (range(4),   { \n   .col-@{value}   { \n     height :   ( @value   *  50px ) ; \n   } \n } ) \n \n 1 2 3 4 5 输出为: \n .col-1   { \n   height :  50px ; \n } \n .col-2   { \n   height :  100px ; \n } \n .col-3   { \n   height :  150px ; \n } \n .col-4   { \n   height :  200px ; \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 \n Math Function \n \n \n ceil \n \n 向上取整 \n \n ceil(2.1px) => 3px \n \n \n floor \n \n 向下取整 \n \n floor(2.6px) => 2px \n \n \n percent \n \n 将一个浮点数转为百分比 \n \n percent(0.5) => 50% \n \n \n round \n 参数： \n \n number:一个浮点数 \n decimalPlaces,可选, 四舍五入到的小数位数. 默认为0 \n \n \n 四舍五入 \n \n round(1.67) => 2 \n round(1.67, 1) => 1.7 \n \n \n sqrt \n \n 求平方根 \n \n sqrt(25cm) => 5cm \n sqrt(18.6%) => 4.312771730569565%; \n \n \n abs \n \n 取绝对值 \n \n abs(-18%) => 18% \n \n \n sin、asin、cos、acos、tan、atan \n \n 三角函数 \n \n sin(1) \n sin(1deg) \n sin(grad) \n \n \n pi \n pi() => 3.141592653589793 \n \n \n pow \n \n 求幂 \n \n pow ( 0cm ,  0px ) \n pow ( 25 ,   - 2 ) \n pow ( 25 ,  0.5 ) \n pow ( - 25 ,  0.5 ) \n pow ( - 25% ,   - 0.5 ) \n \n 1 2 3 4 5 输出为： \n 1cm\n0.0016\n5\nNaN\nNaN%\n \n 1 2 3 4 5 \n \n mod \n \n 求模 \n \n mod(0cm, 0px) => NaNcm \n mod(11cm, 6px) => 5cm \n mod(-26%, -5) => -1% \n \n \n min、max \n 接受一个或多个参数。 \n \n 求最小值和最大值 \n Type Function \n \n isnumber \n isstring \n iscolor \n iskeyword \n isurl \n ispixel \n isem \n ispercentage \n isunit \n isruleset \n \n Example: \n isunit ( 11px ,  px ) ;    // true \n isunit ( 33px ,  rem ) ;   // false \n isunit ( 4rem ,  rem ) ;   // true \n isunit ( 56px ,   "%" ) ;   // false \n isunit ( 7.8% ,   \'%\' ) ;   // true \n\n @rules :   { \n     color :  red ; \n } \n\n isruleset ( @rules ) ;     // true \n isruleset ( #ff0 ) ;       // false \n isruleset ( blue ) ;       // false \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 #  Misc Function \n \n \n color \n 解析颜色，将代表颜色的字符串输出为为一种颜色。 \n color ( "#ccc" ) \n //输出为：#ccc \n \n 1 2 \n \n image-size \n 从文件获取图像尺寸 \n image-size ( "file.jpg" ) \n //输出为：10px 20px \n \n 1 2 \n \n image-width、image-height \n 返回文件获取图像尺寸的宽度和高度 \n image-width ( "file.png" ) ;   //输出为 10px \n image-height ( "file.png" ) ;   //输出为 20px \n \n 1 2 \n \n convert \n 将数字从一个单位转换为另一个单位。 \n 第一个参数包含一个带单位的数字，第二个参数包含一个单位。 如果单位兼容，则将转换数字。 如果它们不兼容，则第一个参数将原样返回。 \n 兼容单位组： \n \n lengths:  m, cm, mm, in, pt, pc \n time:  s, ms \n angle:  rad, deg, grad, turn \n \n convert ( 9s ,   "ms" ) \n convert ( 14cm ,  mm ) \n convert ( 8 ,  mm )   // 不兼容单位类型 \n \n 1 2 3 输出为： \n 9000ms\n140mm\n8\n \n 1 2 3 \n \n data-uri \n 参数: \n \n mimetype:(可选)MIME类型字符串 \n url:内联文件的URL \n \n 如果没有mimetype，data-uri函数将根据文件名后缀进行推测。 文本和svg文件编码为utf-8，其他所有文件编码为base64。 \n Example: \n data-uri ( \'../data/image.jpg\' ) ; \n //output:url(\'data:image/jpeg;base64,bm90IGFjdHVhbGx5IGEganBlZyBmaWxlCg...\'); \n //output in browser:url(\'../data/image.jpg\'); \n\n data-uri ( \'image/jpeg;base64\' ,   \'../data/image.jpg\' ) ; \n //output:url(\'data:image/jpeg;base64,bm90IGFjdHVhbGx5IGEganBlZyBmaWxlCg...\'); \n\n data-uri ( \'image/svg+xml;charset=UTF-8\' ,   \'image.svg\' ) ; \n //url("data:image/svg+xml;charset=UTF-8,%3Csvg%3E%3Ccircle%20r%3D%229%22%2F%3E%3C%2Fsvg%3E"); \n \n 1 2 3 4 5 6 7 8 9 \n \n default \n 仅在守卫条件(guard conditions,就是当...,when())内可用，并且仅在没有其他混合(minxin)匹配时返回true, 否则但会false. \n Example: \n .mixin(1)                     { x :  11 } \n .mixin(2)                     { y :  22 } \n .mixin( @x ) when (default())   { z :   @x } \n\n div   { \n   .mixin ( 3 ) ; \n } \n\n div.special   { \n   .mixin ( 1 ) ; \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 输出为: \n div   { \n   z :  3 ; \n } \n div.special   { \n   x :  11 ; \n } \n \n 1 2 3 4 5 6 Example2: \n .mixin( @value ) when (ispixel( @value ))   { width :   @value } \n .mixin( @value ) when not(default())    { padding :   ( @value   /  5 ) } \n\n div-1   { \n   .mixin ( 100px ) ; \n } \n\n div-2   { \n   color : color ( \'#ccc\' ) ; \n   .mixin ( 100% ) ; \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 Output: \n div-1   { \n   width :  100px ; \n   padding :  20px ; \n } \n div-2   { \n   color :  #ccc ; \n } \n \n 1 2 3 4 5 6 7 \n 个人理解是:对div-1来说,.mixin(100px),满足了守卫条件when (ispixel(@value)),就有了第一个mixin,进而就满足了when not(default()). div-2由于不满足第一个守卫条件,导致第二个mixin中的default()返回true,使得第二个mixin中的when not(default())不成立. \n \n 因此有了下面的例子验证: \n Example2: \n .mixin( @value ) when (ispixel( @value ))   { width :   @value } \n .mixin( @value ) when (default())    { padding :   ( @value   /  5 ) } \n\n div-1   { \n   .mixin ( 100px ) ; \n } \n\n div-2   { \n   color : color ( \'#ccc\' ) ; \n   .mixin ( 100% ) ; \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 Output: \n div-1   { \n   width :  100px ; \n } \n div-2   { \n   color :  #ccc ; \n   padding :  20% ; \n } \n \n 1 2 3 4 5 6 7 \n \n unit \n 删除或更改尺寸单位 \n 参数: \n \n dimension 一个数字,带不带单位均可 \n unit(可选) 要更改的单位，如果省略，将删除该单位。 \n \n Example: \n unit ( 5 ,  px ) //输出为: 5px \n unit ( 5em ) //输出为: 5 \n \n 1 2 \n \n get-unit \n 返回一个数字的单位 \n 参数: \n \n number: 一个数字,带不带参数均可 \n \n get-unit ( 5px )   //输出为: px \n get-unit ( 5 )   //输出为\'\',就是啥都没有 \n \n 1 2 \n 最后 \n 其实还有一些颜色相关的函数,比较简单,可以用到的时候查一下. \n ',summary:"\nLogical Functions\n\nif\n\n  Examples:\n\n    @some: foo;\n  div {\n    margin: if((2>1), 0, 3px);\n    color: if((iscolor(@some)), @some, black);\n  }\n\n  Result:\n\n    div {\n    margin: 0;\n    color: black;\n  }\n\n  布尔表达式也是支持的：\n\n    if(not (true), foo, bar);\n  if((true) and (2 > 1), foo, bar);\n  if((false) or  ...",id:"post",pid:"post",readingTime:{text:"5 min read",minutes:4.865,time:291900.00000000006,words:973}},{title:"回溯算法",frontmatter:{title:"回溯算法",date:"2020-07-02",author:"Yoha",tags:["算法","Leetcode"],location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017111554.jpg",meta:[{name:"title",content:"回溯算法"},{name:"description",content:"回溯算法"},{name:"keywords",content:"回溯算法"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-07-02-backtrack.html",relativePath:"_posts/2020-07-02-backtrack.md",key:"v-0e58d244",path:"/2020/07/02/backtrack/",headers:[{level:2,title:"回溯算法的框架",slug:"回溯算法的框架"},{level:3,title:"全排列",slug:"全排列"},{level:3,title:"46、全排列代码：",slug:"_46、全排列代码"},{level:3,title:"39、组合总和",slug:"_39、组合总和"},{level:3,title:"40、组合总和II",slug:"_40、组合总和ii"},{level:3,title:"51、N皇后",slug:"_51、n皇后"},{level:2,title:"最后",slug:"最后"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" 回溯算法及题目 \n \n \n \n 题号 \n 题目 \n Tag \n \n \n \n \n 39 \n 组合总和 \n 数组、回溯算法 \n \n \n 40 \n 组合总和II \n 数组、回溯算法 \n \n \n 46 \n 全排列 \n 数组、回溯算法 \n \n \n 51 \n N皇后 \n 数组、回溯算法 \n \n \n \n 墙裂推荐这篇文章: 回溯算法解题套路框架 \n 下面内容大多参考上面这篇文章，对其作者 labuladong 表示感谢。 \n 回溯算法的框架 \n 解决一个回溯问题，实际上就是一个决策树的遍历过程。  只需要思考3个问题： \n \n 路径：也就是已经做出的选择 \n 选择列表：也就是当前可以做的选择 \n 结束条件：也就是到达决策树底层，无法再做选择的条件。 \n \n 在后面的题目中会对这个三个词语再进行解释。 \n 代码方面，回溯算法的框架： \n let  res  =   [ ] ; \n function   backtrack ( 路径 ,  选择列表 )   { \n\t if ( 满足结束条件 )   { \n\t\tres . add ( 路径 ) ; \n\t\t return ; \n\t } \n\t //for循环 \n\t for   ( let  选择  in  选择列表 )   { \n\t\t做选择\n\t\t backtrack ( 路径 ,  选择列表 ) \n\t\t撤销选择\n\t } \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 其核心就是for循环里面的递归，在递归之前「做选择」,在递归之后「撤销选择」 . 关于做选择和撤销选择，先通过 全排列 这个问题来了解一下。 \n 全排列 \n 我们知道n个不重复的数，全排列共有n!个。 \n \n 为了简单清晰起见，这次只考虑全排列问题不包含重复的数字。 \n \n 那么我们当时是怎么穷举全排列的呢？比方说给三个数 [1,2,3]，你肯定不会无规律地乱穷举，一般是这样： \n 先固定第一位为 1，然后第二位可以是 2，那么第三位只能是 3；然后可以把第二位变成 3，第三位就只能是 2 了；然后就只能变化第一位，变成 2，然后再穷举后两位…… \n 其实这就是回溯算法，我们高中无师自通就会用，或者有的同学直接画出如下这棵回溯树： \n \n 只要从根遍历这棵树，记录路径上的数字，其实就是所有的全排列。 我们不妨把这棵树称为回溯算法的「决策树」。 \n 为啥说这是决策树呢，因为你在每个节点上其实都在做决策。  比如你站在下图的红色节点上： \n \n 你现在就在做决策，可以选择 1 那条树枝，也可以选择 3 那条树枝。为啥只能在 1 和 3 之中选择呢？因为 2 这个树枝在你身后，这个选择你之前做过了，而全排列是不允许重复使用数字的。 \n 现在就可以解答开头的几个名词：[2]就是「路径」，[1,3]就是「选择列表」，表示你当前可以做出的选择；「结束条件」就是遍历到树的底层，在这里就是选择列表为空的时候。 \n \n 我们定义的backtrack函数其实就像一个指针，在这棵树上游走，同时要正确维护每个节点的属性，每当走到树的底层，其「路径」就是一个全排列。 \n \n 所以说for循环里面的递归就是回溯算法的关键： \n for  选择  in  选择列表\n\t //做选择 \n\t路径 . push ( 选择 ) \n\t backtrack ( 路径 , 选择列表 ) \n\t //撤销选择 \n\t路径 . pop ( 选择 ) \n \n 1 2 3 4 5 6 我们只要在递归之前做出选择，在递归之后撤销刚才的选择，就可以正确地得到每个节点的选择列表和路径。 \n 46、全排列代码： \n //给定一个 没有重复 数字的序列，返回其所有可能的全排列。 \n // \n // 示例: \n // \n // 输入: [1,2,3] \n //输出: \n //[ \n //  [1,2,3], \n //  [1,3,2], \n //  [2,1,3], \n //  [2,3,1], \n //  [3,1,2], \n //  [3,2,1] \n //] \n\n /**\n * @param {number[]} nums\n * @return {number[][]}\n */ \n var   permute   =   function   ( nums )   { \n\t //res记录结果 track记录路径 \n   let  res  =   [ ] ,  track  =   [ ] ; \n   if   ( nums . length  ==   0 )   return   [ ] ; \n   backtrack ( track ) ; \n\n   function   backtrack ( track )   { \n\t\t //触发递归结束条件 \n     if   ( track . length  ==  nums . length )   { \n      res . push ( track . slice ( ) ) ; \n       return ; \n     } \n     for   ( let  i  =   0 ;  i  <  nums . length ;  i ++ )   { \n\t\t\t //每个数字只能用一次，排除不合法选择，剪枝 \n       if   ( track . includes ( nums [ i ] ) )   continue ; \n\t\t\t //做选择 \n      track . push ( nums [ i ] ) ; \n\t\t\t //进入下一层决策树 \n       backtrack ( track ) ; \n\t\t\t //撤销选择 \n      track . pop ( ) ; \n     } \n   } \n\n   return  res ; \n } ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 我们这里稍微做了些变通，没有显式记录「选择列表」，而是通过 nums 和 track 推导出当前的选择列表：判断track.includes(nums[i])。 \n 39、组合总和 \n //给定一个无重复元素的数组 candidates 和一个目标数 target ，找出 candidates 中所有可以使数字和为 target 的组合。 \n // \n // candidates 中的数字可以无限制重复被选取。 \n // \n // 说明： \n // \n // \n // 所有数字（包括 target）都是正整数。 \n // 解集不能包含重复的组合。 \n // \n // \n // 示例 1: \n // \n // 输入: candidates = [2,3,6,7], target = 7, \n //所求解集为: \n //[ \n //  [7], \n //  [2,2,3] \n //] \n // \n // \n // 示例 2: \n // \n // 输入: candidates = [2,3,5], target = 8, \n //所求解集为: \n //[ \n //  [2,2,2,2], \n //  [2,3,3], \n //  [3,5] \n //] \n /**\n * @param {number[]} candidates\n * @param {number} target\n * @return {number[][]}\n */ \n\n  var   combinationSum   =   function   ( candidates ,  target )   { \n\t  let  res  =   [ ] ,  track  =   [ ] ; \n\t candidates . sort ( ( a ,  b )   =>  a  -  b ) ; \n\n\t  function   backtrack ( target ,  track ,  start )   { \n\t\t  //递归终止条件 \n\t\t  if ( target  ==   0 )   { \n\t\t\t res . push ( track . slice ( ) ) ; \n\t\t\t  return ; \n\t\t  } \n\t\t  for ( let  i  =  start ;  i  <  candidates . length ;  i ++ )   { \n\t\t\t  //对数组排序后，剪枝优化 \n\t\t\t  if ( target  <  candidates [ i ] )   break ; \n\t\t\t  //做选择 \n\t\t\t track . push ( candidates [ i ] ) ; \n\t\t\t  //进入下一层决策树，candidates为选择列表，track为路径 \n\t\t\t  backtrack ( target  -  candidates [ i ] ,  track ,  i ) ; \n\t\t\t  //取消选择，返回上一层决策树 \n\t\t\t track . pop ( ) ; \n\t\t  } \n\t  } \n\n\t  //解集不能包含重复的组合,通过改变遍历选择列表的起始位置实现,已经遍历过的元素不再考虑。 \n\t  backtrack ( target ,  track ,   0 ) ; \n\n\t  return  res ; \n  } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 #  40、组合总和II \n 这个和第39题的不同之处在于，数组中的元素可以重复, 并且每个数字在每个组合中只能使用一次。 \n //给定一个数组 candidates 和一个目标数 target ，找出 candidates 中所有可以使数字和为 target 的组合。 \n // \n // candidates 中的每个数字在每个组合中只能使用一次。 \n // \n // 说明： \n // \n // \n // 所有数字（包括目标数）都是正整数。 \n // 解集不能包含重复的组合。 \n // \n // \n // 示例 1: \n // \n // 输入: candidates = [10,1,2,7,6,1,5], target = 8, \n //所求解集为: \n //[ \n //  [1, 7], \n //  [1, 2, 5], \n //  [2, 6], \n //  [1, 1, 6] \n //] \n // \n // \n // 示例 2: \n // \n // 输入: candidates = [2,5,2,1,2], target = 5, \n //所求解集为: \n //[ \n //  [1,2,2], \n //  [5] \n //] \n /**\n * @param {number[]} candidates\n * @param {number} target\n * @return {number[][]}\n */ \n var   combinationSum2   =   function   ( candidates ,  target )   { \n\t let  res  =   [ ] ,  track  =   [ ] ; \n\tcandidates . sort ( ( a ,  b )   =>  a  -  b ) ; \n\n\t function   backtrack ( target ,  track ,  start )   { \n\t\t if ( target  ==   0 )   { \n\t\t\tres . push ( track . slice ( ) ) ; \n\t\t\t return ; \n\t\t } \n\t\t for ( let  i  =  start ;  i  <  candidates . length ;  i ++ )   { \n\t\t\t //对于重复的元素，只让第一个进入循环 \n\t\t\t if ( i  -  start  >   0   &&  candidates [ i  -   1 ]   ==  candidates [ i ] )   continue ; \n\t\t\t if ( target  <  candidates [ i ] )   break ; \n\t\t\ttrack . push ( candidates [ i ] ) ; \n\t\t\t // 因为元素不可以重复使用，这里递归传递下去的是 i + 1 而不是 i \n\t\t\t backtrack ( target  -  candidates [ i ] ,  track ,  i  +   1 ) ; \n\t\t\ttrack . pop ( ) ; \n\t\t } \n\t } \n\n\t backtrack ( target ,  track ,   0 ) ; \n\t return  res ; \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 #  51、N皇后 \n \n \n ps:皇后，是国际象棋中的棋子，意味着国王的妻子。皇后只做一件事，那就是“吃子”。当她遇见可以吃的棋子时，就迅速冲上去吃掉棋子。当然，她横、竖、斜都可走一到七步,可进可退。 \n \n /**\n * @param {number} n\n * @return {string[][]}\n */ \n var   solveNQueens   =   function   ( n )   { \n\t let  res  =   [ ] ,  board  =   [ ] ; \n\t //初始化棋盘 \n\t for ( let  i  =   0 ;  i  <  n ;  i ++ )   { \n\t\tboard [ i ]   =   new   Array ( n ) . fill ( '.' ) ; \n\t } \n\n\t function   backtrack ( board ,  row )   { \n\t\t //递归终止条件 \n\t\t if ( row  ==  board . length )   { \n\t\t\t //对符合条件的棋盘进行深拷贝 \n\t\t\tres . push ( JSON . parse ( JSON . stringify ( board ) ) ) ; \n\t\t\t return ; \n\t\t } \n\t\t for ( let  column  =   0 ;  column  <  board . length ;  column ++ )   { \n\t\t\t if ( ! isValid ( board ,  row ,  column ) )   continue ; \n\t\t\t // 做选择 \n\t\t\tboard [ row ] [ column ]   =   'Q' ; \n\t\t\t // 进入下一行 \n\t\t\t backtrack ( board ,  row  +   1 ) ; \n\t\t\t // 撤销选择 \n\t\t\tboard [ row ] [ column ]   =   '.' ; \n\t\t } \n\t } \n\n\t function   isValid ( board ,  row ,  column )   { \n\t\t //检查列 \n\t\t for ( let  m  =   0 ;  m  <  board . length ;  m ++ )   { \n\t\t\t if ( board [ m ] [ column ]   ==   'Q' )   return   false ; \n\t\t } \n\t\t //检查/ 右上角 \n\t\t for ( let  m  =  row  -   1 ,  n  =  column  +   1 ;  m  >=   0   &&  n  <  board . length ;  m -- ,  n ++ )   { \n\t\t\t if ( board [ m ] [ n ]   ==   'Q' )   return   false ; \n\t\t } \n\t\t //检查\\ 左上角 \n\t\t for ( let  m  =  row  -   1 ,  n  =  column  -   1 ;  m  >=   0   &&  n  >=   0 ;  m -- ,  n -- )   { \n\t\t\t if ( board [ m ] [ n ]   ==   'Q' )   return   false ; \n\t\t } \n\t\t return   true ; \n\t } \n\n\t backtrack ( board ,   0 ) ; \n\t return  res . map ( item   =>   { \n         return  item . map ( subitem   =>  subitem . join ( '' ) ) ; \n   } ) ; ; \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 #  最后 \n 回溯算法就是个多叉树的遍历问题，关键就是在前序遍历和后序遍历的位置做一些操作，算法框架如下： \n \t //for循环 \n\t for   ( let  选择  in  选择列表 )   { \n\t\t做选择\n\t\t backtrack ( 路径 ,  选择列表 ) \n\t\t撤销选择\n\t } \n \n 1 2 3 4 5 6 写backtrack函数时，需要维护走过的「路径」和当前可以做的「选择列表」，当触发「结束条件」时，将「路径」记入结果集。 \n ",summary:"\n\n|题号|题目|Tag|\n|:--:|:--:|:--:|\n|39|组合总和|数组、回溯算法|\n|40|组合总和II|数组、回溯算法|\n|46|全排列|数组、回溯算法|\n|51|N皇后|数组、回溯算法|\n\n墙裂推荐这篇文章:回溯算法解题套路框架\n\n下面内容大多参考上面这篇文章，对其作者labuladong表示感谢。\n\n回溯算法的框架\n\n解决一个回溯问题，实际上就是一个决策树的遍历过程。 只需要思考3个问题：\n\n路径：也就是已经做出的选择\n选择列表：也就是当前可以做的选择\n结束条件：也就是到达决策树底层，无法再做选择的条件。\n\n在后面的题目中会对这个三个词语再进行解释。\n\n代码方面，回溯算法的 ...",id:"post",pid:"post",readingTime:{text:"4 min read",minutes:3.62,time:217200.00000000003,words:724}},{title:"计算机组成原理——第二章",frontmatter:{title:"计算机组成原理——第二章",tags:["计算机组成原理","计算机知识"],date:"2020-07-28",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017103330.jpeg",meta:[{name:"title",content:"计算机组成原理第二章"},{name:"description",content:"计算机组成原理第二章"},{name:"keywords",content:"计算机组成原理, 计算机的发展及应用"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-07-28-Principles%20of%20Computer%20Organization-02.html",relativePath:"_posts/2020-07-28-Principles of Computer Organization-02.md",key:"v-bb5c619e",path:"/2020/07/28/principles-of-computer-organization-02/",headers:[{level:2,title:"2.1 计算机发展史",slug:"_2-1-计算机发展史"},{level:2,title:"2.2 计算机的应用",slug:"_2-2-计算机的应用"},{level:2,title:"2.3 计算机展望",slug:"_2-3-计算机展望"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" 第二章 计算机的发展及应用 \n 2.1 计算机发展史 \n \n \n 一、计算机的产生和发展 \n 世界第一台电子计算机ENIAC(1946年) \n 值得记住的机器：IBM System / 360 \n \n \n 二、微型计算机的出现和发展 \n 微处理器芯片1971年 intel公司 \n 存储器芯片 1970年 \n \n \n 三、软件技术的兴起和发展 \n \n \n 各种语言 \n 机器语言 面向机器 \n 汇编语言 面向机器 \n 高级语言 面向问题 \n \n \n 系统软件 \n \n \n 软件发展的特点 \n 2.2 计算机的应用 \n \n \n 一、科学计算和数据处理 \n \n \n 二、工业控制和实时控制 \n \n \n 三、网络技术 \n \n 电子商务 \n 网络教育 \n 敏捷制造 \n \n \n \n 四、虚拟现实 \n \n \n 五、办公自动化和管理信息系统 \n \n \n 六、CAD(计算机辅助技术)/CAM(计算机辅助制造)/CIMS(计算机/现代集成制造系统) \n \n \n 七、多媒体技术 \n \n \n 八、人工智能 \n 2.3 计算机展望 \n 芯片集成度的提高收一下三方面的限制： \n \n 芯片集成度受物理极限的制约 \n 按几何级数递增的制作成本 \n 芯片的功耗、散热、线延迟 \n \n ",summary:"\n2.1 计算机发展史\n\n  一、计算机的产生和发展\n\n    世界第一台电子计算机ENIAC(1946年)\n\n    值得记住的机器：IBM System / 360\n\n  二、微型计算机的出现和发展\n\n    微处理器芯片1971年 intel公司\n\n    存储器芯片 1970年\n\n  三、软件技术的兴起和发展\n\n    各种语言\n\n        机器语言 面向机器\n\n        汇编语言 面向机器\n\n        高级语言 面向问题\n\n    系统软件\n\n    软件发展的特点\n\n2.2 计算机的应用\n\n  一、科学计算和数据处理\n\n  二、工业控制和实时控制\n\n  三、网络技 ...",id:"post",pid:"post",readingTime:{text:"1 min read",minutes:.35,time:21e3,words:70}},{title:"题目:经典的FOO.getName问题",frontmatter:{title:"题目:经典的FOO.getName问题",tags:["前端开发","JavaScript"],date:"2020-08-01",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017101258.png",meta:[{name:"title",content:"题目:经典的FOO.getName问题"},{name:"description",content:"题目:经典的FOO.getName问题"},{name:"keywords",content:"运算符优先级"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-08-01-foogetname.html",relativePath:"_posts/2020-08-01-foogetname.md",key:"v-64936a7a",path:"/2020/08/01/foogetname/",lastUpdated:"8/17/2021, 2:49:02 PM",content:" 题目:经典的FOO.getName问题 \n 代码如下: \n function   Foo ( )   { \n   getName   =   function   ( )   { \n    console . log ( 1 ) ; \n   } \n   return   this ; \n } \nFoo . getName   =   function   ( )   { \n  console . log ( 2 ) ; \n } \n Foo . prototype . getName   =   function   ( )   { \n  console . log ( 3 ) ; \n } \n var   getName   =   function   ( )   { \n  console . log ( 4 ) ; \n } \n function   getName ( )   { \n  console . log ( 5 ) ; \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 问题是: 下面的代码输出什么？ \n Foo . getName ( ) ; \n getName ( ) ; \n Foo ( ) . getName ( ) ; \n getName ( ) ; \n new   Foo . getName ( ) ; \n new   Foo ( ) . getName ( ) ; \n new   new   Foo ( ) . getName ( ) ; \n \n 1 2 3 4 5 6 7 解析： \n \n \n 首先是Foo.getName(),调用Foo的静态方法getName，对应着： \n Foo . getName   =   function   ( )   { \n  console . log ( 2 ) ; \n } \n \n 1 2 3 因此输出为2； \n \n \n 其次是getName()，由于函数提升是优先于变量提升，因此getName()会被覆盖： \n function   getName ( )   { \n  console . log ( 5 ) ; \n } \n var  getName ; \n getName   =   function   ( )   { \n  console . log ( 4 ) ; \n } \n \n 1 2 3 4 5 6 7 所以输出为4； \n \n \n 其次是Foo().getName()，这句代码，首先是执行了Foo(), \n function   Foo ( )   { \n   getName   =   function   ( )   { \n    console . log ( 1 ) ; \n   } \n   return   this ; \n } \n \n 1 2 3 4 5 6 执行Foo(),修改了全局变量getName的值，并且返回了this，此时this指向的是 window，因此Foo().getName()输出的是1； \n \n \n 其次是getName()，这个时候getName的值已经被上一句Foo().getName()执行时修改了，因此输出还是1； \n \n \n 其次是new Foo.getName();这个地方涉及到运算符的优先级问题 \n 参考 MDN运算符优先级 \n \n Foo.getName()属于成员访问，优先级为19；new Foo属于new(无参数列表)优先级为18，因此new Foo.getName()相当于：new (Foo.getName())。先执行Foo.getName()，输出为 2，再创建Foo.getName()方法的实例。 \n \n \n 其次是new Foo().getName(); \n new Foo()属于new(带参数列表)优先级为19；成员访问的优先级也是19。按照运算符规则，同一优先级按照从左至右的顺序执行。因此new Foo().getName()相当于(new Foo()).getName()。也就是先执行new Foo()，先创建Foo的实例，然后调用实例的getName()方法。由于实例自身并没有这个方法，因此会顺着实例的原型：实例.__proto__去找这个方法，实例.__proto__指向Foo.prototype。因此最终调用的是Foo.prototype.getName()。输出为3。 \n \n \n 最后是new new Foo().getName(); \n \n 第一个new 属于 new(无参数列表) 优先级为18；之后的new属于带参数列表的，优先级为19，成员访问优先级也为19. \n \n 相当于：new ((new Foo()).getName())，先执行new Foo().getName()，输出3，然后再创建Foo.prototype.getName()这个函数的实例。 \n \n \n ",summary:"\n\n代码如下:\n\nfunction Foo() {\n  getName = function () {\n    console.log(1);\n  }\n  return this;\n}\nFoo.getName = function () {\n  console.log(2);\n}\nFoo.prototype.getName = function () {\n  console.log(3);\n}\nvar getName = function () {\n  console.log(4);\n}\nfunction getName() {\n  console.log(5);\n}\n\n问题是: 下面的代码输 ...",id:"post",pid:"post",readingTime:{text:"1 min read",minutes:.725,time:43500,words:145}},{title:"彻底搞懂HTTPS的加密机制",frontmatter:{title:"彻底搞懂HTTPS的加密机制",tags:["前端开发","转载"],date:"2020-08-12",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqs/blogImage/raw/master/blogImage/v2-a0d10af45e785fe8d3f5cd12f8c309f5_r.jpg",meta:[{name:"title",content:"彻底搞懂HTTPS的加密机制"},{name:"description",content:"彻底搞懂HTTPS的加密机制"},{name:"keywords",content:"https, 加密"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-08-12-https.html",relativePath:"_posts/2020-08-12-https.md",key:"v-2caf8e7e",path:"/2020/08/12/https/",headers:[{level:2,title:"为什么需要加密？",slug:"为什么需要加密"},{level:2,title:"什么是对称加密？",slug:"什么是对称加密"},{level:2,title:"用对称加密可行吗？",slug:"用对称加密可行吗"},{level:2,title:"什么是非对称加密？",slug:"什么是非对称加密"},{level:2,title:"用非对称加密可行吗？",slug:"用非对称加密可行吗"},{level:2,title:"非对称加密+对称加密？",slug:"非对称加密-对称加密"},{level:2,title:"总结",slug:"总结"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" 彻底搞懂HTTPS的加密机制 \n \n 本文转载自知乎 彻底搞懂HTTPS的加密机制 。作者说的很清晰，故转载到博客。对作者表示感谢！ \n \n HTTPS(SSL/TLS)的加密机制虽然是个前后端开发都应了解的基本问题，但是网上的很多HTTPS的相关文章也总会忽略一些内容，我学习它的时候也费了挺大功夫。 \n 对称加密、非对称加密、数字签名、数字证书等等，在学习过程中，除了了解“它是什么”，你是否想过“为什么是它”？我认为了解了后者才真正理解了HTTPS的加密机制。 \n 本文以问题的形式逐渐展开，一步步解开HTTPS的面纱，希望能够帮助你彻底搞懂HTTPS。特别是对于了解过HTTPS却在有些地方卡壳的人，希望本文能帮助你理清思路。 \n 为什么需要加密？ \n 因为http的内容是明文传输的，明文数据会经过中间代理服务器、路由器、wifi热点、通信服务运营商等多个物理节点，如果信息在传输过程中被劫持，传输的内容就完全暴露了，并且劫持者还可以篡改传输的信息且不被双方发觉，这就是 中间人攻击 。所以我们才需要对信息进行加密。最直接的加密方式就是 对称加密 。 \n 什么是对称加密？ \n 就是一个密钥，它可以对一段内容加密，加密后只能用它才能解密看到原本的内容，和我们日常用的钥匙的作用差不多。 \n 用对称加密可行吗？ \n 如果通信双方都各自持有同一个密钥，且没有别人知道，这两方的通信安全当然是可以保证的（除非密钥被破解） \n 然而最大的问题就是 这个密钥怎么让传输双方知道，同时不让别人知道 。如果由服务器生成一个密钥并传输给浏览器，那这个传输过程中密钥被别人劫持弄到手了怎么办？之后他就能用密钥解开双方传输的任何内容了，所以这么做当然不行。 \n 换种思路？试想一下，如果浏览器内部就预存了网站A的密钥，且可以确保除了浏览器和网站A,不会有任何外人知道该密钥，那理论上用对称加密是可以的，这样浏览器要预存世界上所有HTTPS网站的密钥，这样显然是不现实的。 \n 怎么办？所以我们就需要神奇的***非对称加密***。 \n 什么是非对称加密？ \n 有两把钥匙，通常一把叫做公钥，一把叫做私钥，用公钥加密的内容必须用私钥才能解开，同样，私钥加密的内容只能公钥能解开。 \n 用非对称加密可行吗？ \n 鉴于非对称加密的机制，我们可能会有这种思路：服务器先把公钥直接明文传输给浏览器，之后浏览器向服务器传数据前都先用这个公钥加密好再传，这条数据的安全似乎可以保障了。 因为只有服务器有相应的私钥能解开这条数据 。然而 由服务器到浏览器的这条路怎么保障安全 ？如果服务器用它的的私钥加密数据传给浏览器，那么浏览器用公钥可以解密它，而这个公钥是一开始通过明文传输给浏览器的，这个公钥被谁劫持到的话，他也能用该公钥解密服务器传来的信息了。所以目前似乎只能保证由浏览器向服务器传输数据时的安全性（其实仍有漏洞，下文会说），那利用这点你能想到什么解决方案吗？ \n 改良的非对称加密方案，似乎可以？ \n 我们已经理解通过一组公钥私钥，已经可以保证单个方向传输的安全性，那用两组公钥私钥，是不是就能保证双向传输都安全了？请看下面的过程： \n \n 某网站拥有用于非对称加密的公钥A、私钥A’；浏览器拥有用于非对称加密的公钥B、私钥B’。 \n 浏览器像网站服务器请求，服务器把公钥A明文给传输浏览器。 \n 浏览器把公钥B明文传输给服务器。 \n 之后浏览器向服务器传输的所有东西都用公钥A加密，服务器收到后用私钥A’解密。由于只有服务器拥有这个私钥A’可以解密，所以能保证这条数据的安全。 \n 服务器向浏览器传输的所有东西都用公钥B加密，浏览器收到后用私钥B’解密。同上也可以保证这条数据的安全。 \n \n 的确可以！抛开这里面仍有的漏洞不谈（下文会讲），HTTPS的加密却没使用这种方案，为什么？最主要的原因是非对称加密算法非常耗时，特别是加密解密一些较大数据的时候有些力不从心，而对称加密快很多，看来必须得用对称加密，那我们能不能运用非对称加密的特性解决前面提到的对称加密的问题？ \n 非对称加密+对称加密？ \n 既然非对称加密耗时，非对称加密+对称加密结合可以吗？而且得尽量减少非对称加密的次数。当然是可以的，而且非对称加密、解密各只需用一次即可。\n请看一下这个过程： \n \n 某网站拥有用于非对称加密的公钥A、私钥A’。 \n 浏览器像网站服务器请求，服务器把公钥A明文给传输浏览器。 \n 浏览器随机生成一个用于 对称加密 的密钥X，用公钥A加密后传给服务器。 \n 服务器拿到后用私钥A’解密得到密钥X。 \n \n 这样双方就都拥有密钥X了，且别人无法知道它。之后双方所有数据都用密钥X加密解密。 \n 完美！HTTPS基本就是采用了这种方案。完美？还是有漏洞的。 \n 中间人攻击 \n 中间人的确无法得到浏览器生成的密钥B，这个密钥本身被公钥A加密了，只有服务器才有私钥A’解开拿到它呀！然而中间人却完全不需要拿到密钥A’就能干坏事了。请看： \n \n 某网站拥有用于非对称加密的公钥A、私钥A’。 \n 浏览器向网站服务器请求，服务器把公钥A明文给传输浏览器。 \n 中间人劫持到公钥A，保存下来，把数据包中的公钥A替换成自己伪造的公钥B（它当然也拥有公钥B对应的私钥B’）。 \n 浏览器随机生成一个用于对称加密的密钥X，用公钥B（浏览器不知道公钥被替换了）加密后传给服务器。 \n 中间人劫持后用私钥B’解密得到密钥X，再用公钥A加密后传给服务器。 \n 服务器拿到后用私钥A’解密得到密钥X。 \n \n 这样在双方都不会发现异常的情况下，中间人得到了密钥B。 根本原因是浏览器无法确认自己收到的公钥是不是网站自己的。  那么下一步就是解决下面这个问题： \n 如何证明浏览器收到的公钥一定是该网站的公钥？ \n 现实生活中，如果想证明某身份证号一定是小明的，怎么办？看身份证。这里政府机构起到了“公信”的作用，身份证是由它颁发的，它本身的权威可以对一个人的身份信息作出证明。互联网中能不能搞这么个公信机构呢？给网站颁发一个“身份证”？ \n 数字证书 \n 网站在使用HTTPS前，需要向“ CA机构 ”申请颁发一份 数字证书 ，数字证书里有 证书持有者、证书持有者的公钥 等信息，服务器把证书传输给浏览器，浏览器从证书里取公钥就行了，证书就如身份证一样，可以证明“该公钥对应该网站”。然而这里又有一个显而易见的问题了，证书本身的传输过程中，如何防止被篡改？即如何证明证书本身的真实性？身份证有一些防伪技术，数字证书怎么防伪呢？解决这个问题我们就基本接近胜利了！ \n 如何放防止数字证书被篡改？ \n 我们把证书内容生成一份“签名”，比对证书内容和签名是否一致就能察觉是否被篡改。这种技术就叫 数字签名 ： \n \n (图片来源于网络) \n 数字签名的制作过程： \n \n CA拥有非对称加密的私钥和公钥。 \n CA对证书明文信息进行hash。 \n 对hash后的值用私钥加密，得到数字签名 。 \n 明文和数字签名共同组成了数字证书，这样一份数字证书就可以颁发给网站了。 \n \n 那浏览器拿到服务器传来的数字证书后，如何验证它是不是真的？（有没有被篡改、掉包） \n 浏览器验证过程： \n \n 拿到证书，得到明文T，数字签名S。 \n 用CA机构的公钥对S解密（由于是浏览器信任的机构，所以浏览器保有它的公钥。详情见下文），得到S’。 \n 用证书里说明的hash算法对明文T进行hash得到T’。 \n 比较S’是否等于T’，等于则表明证书可信。 \n \n 为什么这样可以证明证书可信呢？我们来仔细想一下。 \n 中间人有可能篡改该证书吗？ \n \n \n 假设中间人篡改了证书的原文， 由于他没有CA机构的私钥，所以无法得到此时加密后签名，无法相应地篡改签名 。浏览器收到该证书后会发现原文和签名解密后的值不一致，则说明证书已被篡改，证书不可信，从而终止向服务器传输信息，防止信息泄露给中间人。 \n \n \n 假设中间人篡改了证书的数字签名，公钥解密被篡改的数字签名后得到的哈希值和原文的哈希也对不上。 \n \n \n \n 以下内容非参考文章： \n 数字签名有可能被伪造吗？ \n 在查阅资料的时候还发现了一个问题，很有意思：公钥解密被篡改后的数字签名后得到了假的哈希值，然后用彩虹表搞出原文，这时候，原文的哈希和假哈希一样了。可能吗？ \n 回答是理论上可以 实际上这种情况不可能。 \n \n 既然不可能篡改，那整个证书被掉包呢？ \n 中间人有可能把证书掉包吗？ \n 假设有另一个网站B也拿到了CA机构认证的证书，它想搞垮网站A，想劫持网站A的信息。于是它成为中间人拦截到了A传给浏览器的证书，然后替换成自己的证书，传给浏览器，之后浏览器就会错误地拿到B的证书里的公钥了，会导致上文提到的漏洞。 \n 其实这并不会发生，因为证书里包含了网站A的信息，包括域名，浏览器把证书里的域名与自己请求的域名比对一下就知道有没有被掉包了。 \n 为什么制作数字签名时需要hash一次？ \n 我初学HTTPS的时候就有这个问题，似乎以上过程中hash有点多余，把hash过程去掉也能保证证书没有被篡改。\n最显然的是性能问题，前面我们已经说了非对称加密效率较差，证书信息一般较长，比较耗时。而hash后得到的是固定长度的信息（比如用md5算法hash后可以得到固定的128位的值），这样加密解密就会快很多。 \n 怎么证明CA机构的公钥是可信的？ \n 你们可能会发现上文中说到CA机构的公钥，我几乎一笔带过，“浏览器保有它的公钥”，这是个什么保有法？怎么证明这个公钥是否可信？ \n 让我们回想一下数字证书到底是干啥的？没错，为了证明某公钥是可信的，即“该公钥是否对应该网站/机构等”，那这个CA机构的公钥是不是也可以用数字证书来证明？没错，操作系统、浏览器本身会预装一些它们信任的根证书，如果其中有该CA机构的根证书，那就可以拿到它对应的可信公钥了。 \n 实际上证书之间的认证也可以不止一层，可以A信任B，B信任C，以此类推，我们把它叫做信任链或数字证书链，也就是一连串的数字证书，由根证书为起点，透过层层信任，使终端实体证书的持有者可以获得转授的信任，以证明身份。 \n 另外，不知你们是否遇到过网站访问不了、提示要安装证书的情况？这里安装的就是跟证书。说明浏览器不认给这个网站颁发证书的机构，那么没有该机构的根证书，你就得手动下载安装（风险自己承担XD）。安装该机构的根证书后，你就有了它的公钥，就可以用它验证服务器发来的证书是否可信了。 \n HTTPS必须在每次请求中都要先在SSL/TLS层进行握手传输密钥吗？ \n 这也是我当时的困惑之一，显然每次请求都经历一次密钥传输过程非常耗时，那怎么达到只传输一次呢？用session就行。 \n 服务器会为每个浏览器（或客户端软件）维护一个sessionID，在TSL握手阶段传给浏览器，浏览器生成好密钥传给服务器后，服务器会把该密钥存到相应的sessionID下，之后浏览器每次请求都会携带sessionID，服务器会根据sessionID找到相应的密钥并进行解密加密操作，这样就不必要每次重新制作、传输密钥了！ \n 总结 \n 可以看下这张图，梳理一下整个流程（SSL、TSL握手有一些区别，不同版本间也有区别，不过大致过程就是这样）： \n \n ",summary:"本文转载自知乎彻底搞懂HTTPS的加密机制。作者说的很清晰，故转载到博客。对作者表示感谢！\n\nHTTPS(SSL/TLS)的加密机制虽然是个前后端开发都应了解的基本问题，但是网上的很多HTTPS的相关文章也总会忽略一些内容，我学习它的时候也费了挺大功夫。\n\n对称加密、非对称加密、数字签名、数字证书等等，在学习过程中，除了了解“它是什么”，你是否想过“为什么是它”？我认为了解了后者才真正理解了HTTPS的加密机制。\n\n本文以问题的形式逐渐展开，一步步解开HTTPS的面纱，希望能够帮助你彻底搞懂HTTPS。特别是对于了解过HTTPS却在有些地方卡壳的人，希望本文能帮助你理清思路。\n\n为什么需要加密 ...",id:"post",pid:"post",readingTime:{text:"1 min read",minutes:.645,time:38700,words:129}},{title:"计算机组成原理——第三章",frontmatter:{title:"计算机组成原理——第三章",tags:["计算机组成原理","计算机知识"],date:"2020-08-20",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20200810230903.png",meta:[{name:"title",content:"计算机组成原理第三章"},{name:"description",content:"计算机组成原理第三章"},{name:"keywords",content:"计算机组成原理, 系统总线"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-08-20-Principles%20of%20Computer%20Organization-03.html",relativePath:"_posts/2020-08-20-Principles of Computer Organization-03.md",key:"v-6880295d",path:"/2020/08/20/principles-of-computer-organization-03/",headers:[{level:2,title:"3.1 总线的基本概念",slug:"_3-1-总线的基本概念"},{level:2,title:"3.2 总线的分类",slug:"_3-2-总线的分类"},{level:2,title:"3.3 总线特性及性能指标",slug:"_3-3-总线特性及性能指标"},{level:2,title:"3.4 总线结构",slug:"_3-4-总线结构"},{level:2,title:"3.5 总线控制",slug:"_3-5-总线控制"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" 第三章 系统总线 \n 3.1 总线的基本概念 \n \n \n 为什么要使用总线 \n 面向总线的结构主要有以下优点： \n \n 简化了系统结构，便于系统设计制造； \n 大大减少了连线数目，便于布线，减小体积，提高系统的可靠性； \n 便于接口设计，所有与总线连接的设备均采用类似的接口； \n 便于系统的扩充、更新与灵活配置，易于实现系统的模块化； \n 便于设备的软件设计，所有接口的软件就是对不同的口地址进行操作； \n 便于故障诊断和维修，同时也降低了成本。 \n \n \n \n 什么是总线 \n 总线是连接各个部件的信息传输线，是各个部件共享的传输介质。 \n \n \n 总线上信息的传送 \n \n \n 串行：串行通信是指使用一条数据线，将数据一位一位地依次传输，每一位数据占据一个固定的时间长度。其只需要少数几条线就可以在系统间交换信息，特别使用于计算机与计算机、计算机与外设之间的远距离通信。 \n \n \n 并行：并行通信时数据的各个位同时传送，可以字或字节为单位并行进行。并行通信速度快，但用的通信线多、成本高，故不宜进行远距离通信。计算机或plc各种 内部 总线就是以并行方式传送数据的。另外，在PLC(可编程逻辑控制单元)底板上，各种模块之间通过底板总线交换数据也以并行方式进行。 \n \n \n Q: 串行通信和并行通信哪种通信方式更优？ \n A: 理论上，并行传输是优于串行传输的。实际中，串行传输往往远快于并行方式。因为并行通讯的线缆较多，因为串扰的存在，导致通讯频率难以提升，只能通过扩充通讯信道来提速。这会大量占用珍贵的PCB空间，尤其是电子设备小型化的今天。而串行通信通常只采用两条差分通讯线路，尽可能减弱串扰，有助于提高通讯频率，提高通讯速度。今天计算机上使用的高速总线技术，基本上都是串行方式，比如USB，SATA。 \n \n \n 总线结构的计算机举例 \n \n \n 单总线结构框图 \n \n 这样的结构存在的问题就是：总线是信号的公共传输线，在同一时刻只能有一个部件在使用这个总线，那么总线就会成为整个系统的一个瓶颈。 \n \n \n 面向CPU的双总线结构框图 \n \n 由于CPU运行程序的时候，指令和数据都是来自于主存，因此CPU和主存之间的信息交换是非常繁忙的。所以利用M总线专门为CPU和主存之间提供传输服务。但是这种结构也存在问题：比如主存要和某一个外部设备进行信息传输的话，由于主存和I/O设备之间没有直接的信息通路，因此只能把CPU当作中间媒才能进行信息传输。当主存和外部设备进行信息传输的话，那么CPU的计算任务还是会被打断。 \n \n \n 以存储器为中心的双总线结构框图 \n 3.2 总线的分类 \n \n \n 根据总线的位置进行划分 \n \n \n 片内总线：芯片内部的总线 \n \n \n 系统总线：计算机各部件之间的信息传输线。系统总线根据总线上传输的信号不同，可以分为：数据总线、地址总线、控制总线。 \n \n 数据总线：双向，与机器字长、存储字长有关；地址总线：单向，与存储地址、I/O地址有关（在本教材的模型机中，地址总线的宽度和MAR的宽度相同）；控制总线：向系统的各个部件传输控制信号或者是系统的各个部件把自己的状态信号向外传输，告诉主设备、CPU。 \n \n \n \n 通信总线：用于计算机系统之间或计算机系统与其他系统（如控制仪表、移动通信等）之间的通信。 \n \n 传输方式分为：串行通信总线和并行通信总线 \n 3.3 总线特性及性能指标 \n \n \n 总线的物理实现 \n \n \n 总线特性 \n \n 机械特性：尺寸、形状、管脚数、排列顺序 \n 电气特性：传输方向和有效的电平范围 \n 功能特性：每根传输线的功能：地址、数据、控制 \n 时间特性：信号的时序关系 \n \n \n \n 总线的性能指标 \n \n 总线宽度：数据线的根数 \n 标准传输率：每秒传输的额最大字节数 \n 时钟的同步/异步 \n 总线的复用：地址线和数据线复用（如Intel 8086，复用的目的是减少管脚数，进而减小芯片的大小） \n 信号线数：地址线、数据线和控制线的总和 \n 总线控制方式：突发、自动、仲裁、逻辑、计数（指的是用什么方式控制总线的传输） \n 其他指标：负载能力（总线上可以挂载多少个IO设备） \n \n \n \n 总线标准 \n 不同厂家生产的硬件都遵循一个约定，这样才能是不同厂家生产的硬件拼装成一台计算机。关于总线的约定就是总线的标准。 \n 总线标准：IES-232、USB等 \n 3.4 总线结构 \n 正如前面介绍的：单总线结构、多总线结构 \n 双总线结构除了上面介绍的两种，还有一种双总线结构：将主存总线和IO总线分离。主存总线上连接CPU和存储器，IO总线连接IO设备。然后中间通过通道将主存总线和IO总线连接。通道是一种特殊类型、结构简单的处理器，专门用于输入输出操作。一般来说，通道有自己的控制器、有自己的指令系统，可以执行一些简单的指令和通道程序。 \n \n 还有三总线结构（主存总线、IO总线、DMA总线） \n \n DMA总线：直接存储器访问总线。一些高速设备和内存之间进行一些信息交换的话，可以通过DMA总线进行，而不需要通过IO总线和CPU来做。 \n \n \n 当然还有其他的总线结构：四总线结构等。 \n 3.5 总线控制 \n \n \n 总线的判优控制 \n \n \n 基本概念 \n 根据是否能提出总线请求，我们可以把总线上的设备分为两类： \n \n \n 主设备（模块）：对总线有控制权，可以提出总线的占用申请，并且在占用了总线后可以控制和另外一台设备之间进行的通信过程。 \n \n \n 从设备（模块）：响应从主设备发来的总线命令，不能对总线进行控制，也不能对总线提出占用请求。只能响应从主设备发来的命令。 \n \n \n 总线判优控制可以分为两种方法：集中式和分布式。 \n \n \n 集中式：把总线的判优逻辑做在一个部件上，比如CPU；集中式总线判优逻辑又可以分为 链式查询、计数器定时查询、独立请求方式 。 \n 分布式：总线的判优逻辑分布在各个设备或者各个设备的端口上。 \n \n \n 链式查询方式 \n \n 如图所示，总线控制部件是集中在一起的，这是集中式的标志。另外还有数据总线和地址总线。数据总线用于数据交换过程中数据的传输，地址总线用于寻找主设备与哪一个从设备进行通信。另外还有3条线：BR（所有设备都通过这条线发出总线的占用请求）；BS（总线忙，当有主设备占用了总线，就会通过这条线通知总线控制部件总线忙）；BG（总线同意）。 \n 通过BR这条线向总线控制部件提出占用请求，总线控制部件接受到这个请求，并且可以让出总线控制权，就会通过BG这条线进行查询，因为每一个IO设备都是通过BR一条线发出的占用请求，因此不知道总线的控制权应该交给哪个设备。于是就需要BG这条线逐个的去查询。找到第一个提出总线占用请求的设备，把总线的控制权交给它。然后通过BS这条线设置总线忙。 \n 这个方式的特征：设备的优先级和BG这条线的查询顺序有直接关系，因此设备的优先级是由连接方式确定的。缺点：对电路故障特别敏感。优点：结构简单。 \n \n \n 计数器定时查询方式 \n \n 如图所示，总线控制部件是集中在一起的，这是集中式的标志。另外还有数据总线和地址总线。数据总线用于数据交换过程中数据的传输，地址总线用于寻找主设备与哪一个从设备进行通信。除了BS和BR两条线，还有一条设备地址线。在总线控制部件的内部有一个计数器。通过BR这条线向总线控制部件提出占用请求，总线控制部件接受到这个请求，并且可以让出总线控制权，此时计数器就会开始工作。0是起始值，会对IO接口0进行查询，看看IO接口0是不是发出了总线占用请求。如果没有发出占用请求，计数器就会加一，对IO接口1进行查询，如果IO接口1发出了占用请求就会通过BS这条线进行响应，设置总线忙。 \n 这种方式的优点：优先级的确定非常灵活，计数器的起始值可以灵活的设置。 \n \n \n 独立请求方式 \n \n 任何一个IO接口都增加了两条线BR和BG。哪个BG有效，响应的IO接口就获得总线的占用权。优先级的排队是在总线控制部件的内部有一个电路集中的来完成。 因此在总线控制部件内部有一个排队器 。 \n 这种方式的优先级的确定就非常的灵活。但是这种方式的缺点就是线的条数会比较多I。 \n \n \n \n \n 总线的通信控制 \n 总线的判优控制解决了由哪一个主设备来获得主线的使用权。 \n \n \n 总线的通信控制目的是解决通信双方（主设备和从设备）协调配合问题 \n \n \n 总线传输周期（指的是主设备和从设备之间完成一次完整可靠的通信需要的时间） \n \n 申请分配阶段： 主模块申请 ，总线仲裁决定（这一阶段就是总线判优做的工作） \n 寻址阶段：主模块向从模块给出 地址 和 命令 \n 传输阶段：主模块和从模块 交换数据 \n 结束阶段：主模块撤销相关消息 \n \n \n \n 总线通信的四种方式 \n \n 同步通信：由统一的定宽定距的时标控制数据传送 \n 异步通信：采用应答方式，没有公共时钟标准 \n 半同步通信：主要解决不同速度的两个模块之间进行通信的问题，是同步和异步的结合 \n 分离式通信：充分挖掘系统总线每个瞬间的潜力 \n \n a.  同步式数据输入 （主设备输入，从设备输出） \n \n 在第一个时钟周期的上升沿必须要给出 地址信号 ，这个地址信号是主设备给出的。在第二个时钟周期的上升沿必须给出*读命令**，告诉从设备 主设备要从 从设备或者从模块 读取数据。第三个时钟周期上升沿从设备必须给出数据信号（通过数总线给出）。第四个时钟周期上升沿，控制信号和数据信号就可以撤销啦。在第四个时钟周期结束后，地址信号也可以撤销啦。 \n 因此同步式数据传输的特点：第一、一定要有一个 定宽定距的时钟 来控制整个数据传输的过程。第二、在给定的时间点上出相应的操作。 \n b.  同步式数据输出 （主设备输出，输出到从设备）也是类似的： \n \n 在第一个时钟周期的上升沿必须要给出 地址信号 ，在第一个时钟周期的下降沿必须给出数据。第二个时钟周期上升沿必须给出 写命令 ，向从设备进行数据写入。第三个时钟周期的上升沿进行写入操作。第四个周期的上升沿主设备可以撤销数据和写命令。第四个时钟周期结束的时候，地址信号也撤销。 \n 这种通信的优点是规定明确、统一，模块间的配合简单一致。其缺点是主从模块时间配合属强制性“同步”，必须在限定时间内完成规定的要求。并且对所有从模块都用同一限时，这就势必造成对各不相同速度的部件而言，必须按最慢速度部件来设计公共时钟，严重影响总线的工作效率，也给设计带来了局限性，缺乏灵活性。 \n \n 同步通信适用于总线长度较短、各部件存取时间比较接近的情况。这是因为，同步方式对任何两个设备之间的通信都给予同样的时间安排。就总线长度来讲，必须按距离最长的两个设备的传输延迟来设计公共时钟。但是总线长了势必降低传输频率。 \n \n c.  异步通信 \n \n 异步通信可以分为三种：不互锁异步通信、半互锁异步通信、全互锁异步通信。 \n 不互锁异步通信：主设备发出通信请求，从设备接收到请求信号以后进行应答。之后进过一段时间的延时后，主设备撤销请求信号，从设备也撤销应答信号。 \n 半互锁异步通信：主设备发出通信请求，从设备受到请求信号后进行应答，主设备接受到应答信号后撤销请求信号，经过一段时间的延迟，从设备撤销应答信号。如果主设备未接受到应答信号则会保持请求状态。 \n 全互锁异步通信：主设备发出通信请求，从设备受到请求信号后进行应答，主设备接受到应答信号后撤销请求信号，只有主设备的请求信号撤销后，从设备才会撤销自己的应答信号。 \n d.  半同步通信（同步和异步的结合） \n 同步： 发送方 用系统 时钟前沿 发信号， 接受方 用系统 时钟后沿 判断、识别。 \n 异步：允许不同速度的模块和谐工作，增加一条“等待”响应信号， wait 。这个wait信号是由从设备给出的。 \n 以输入数据为例的半同步通信时序（假设还是4个时钟周期） \n T1:主模块发地址；T2:主模块发命令；T3:在第三个时钟周期上升沿来临之前从模块提供数据；T4:从模块撤销数据，主模块撤销命令。 \n 如果主模块和从模块之间的速度不一致，比如说主模块是CPU，从模块是存储器。CPU的工作速度要比存储器的工作速度要快，在T3时钟到来之前，从模块无法向主模块提供数据。那么这个从模块在T3到来之前发出wait信号（低电平有效），主模块检测wait这条线，如果检测到wait信号为低电平，则插入一个TW周期，等待数据的到来。在下一个时钟周期到来之前，主模块还会检测wait信号是否为低电平，如果为低电平，那么还会在等待一个时钟周期。知道在下一个时钟周期到来之前，主模块发现wait信号为高电平，进入T3周期。 \n 在第一个时钟周期的上升沿必须要给出 地址信号 ，这个地址信号是主设备给出的。在第二个时钟周期的上升沿必须给出 读命令 ，告诉从设备 主设备要从 从设备或者从模块 读取数据。在第三个时钟周期带来之前，如果从设备无法提供数据，要发出wait信号，主设备检测wait信号，如果为低电平的话，会在T3周期到来之前，插入Twait周期。在下一个时钟周期开始之前，主设备还会检查wait信号。直到检测到wait信号为高电平（说明数据已经准备好啦，并且放在数据总线上），进入T3周期，接收数据。进入T4周期数据信号和控制信号（读命令）撤销，在T4周期结束时，地址信号撤销。 \n \n 上述三种通信的共同点： \n 一个总线传输周期（以输入数据为例）： \n \n 主模块发地址、命令（占用总线） \n 从模块准备数据（不占用总线） \n 从模块向主模块发数据（占用总线） \n \n 这个传输过程中会有一个阶段总线是空闲的，造成资源的浪费。为了解决这个问题，有了分离式通信。如下。 \n e.  分离式通信 \n 充分挖掘系统总线每个瞬间的潜力。 \n 一个总线传输周期： \n \n \n 子周期1:  主模块 申请占有总线，使用完后，即放弃总线的使用权。 \n \n \n 子周期2:从模块申请占有总线，将各种信息送至总线上。（这个时候从模块 变为 主模块） \n \n \n 分离式通信的特点： \n \n 各模块有权申请占用总线（从模块可以变为主模块） \n 采用同步方式通信，不等待对方回答 \n 各个模块准备数据时，不占用总线 \n 总线被占用时，无空闲 \n \n \n \n \n \n ",summary:"\n3.1 总线的基本概念\n\n为什么要使用总线\n\n    面向总线的结构主要有以下优点：\n\n    简化了系统结构，便于系统设计制造；\n    大大减少了连线数目，便于布线，减小体积，提高系统的可靠性；\n    便于接口设计，所有与总线连接的设备均采用类似的接口；\n    便于系统的扩充、更新与灵活配置，易于实现系统的模块化；\n    便于设备的软件设计，所有接口的软件就是对不同的口地址进行操作；\n    便于故障诊断和维修，同时也降低了成本。\n\n什么是总线\n\n    总线是连接各个部件的信息传输线，是各个部件共享的传输介质。\n\n总线上信息的传送\n\n    串行：串行通信是指使用一条数据线，将数 ...",id:"post",pid:"post",readingTime:{text:"2 min read",minutes:1.135,time:68100,words:227}},{title:"计算机组成原理——第一章",frontmatter:{title:"计算机组成原理——第一章",tags:["计算机组成原理","计算机知识"],date:"2020-07-25",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017104351.png",meta:[{name:"title",content:"计算机组成原理第一章"},{name:"description",content:"计算机组成原理第一章"},{name:"keywords",content:"计算机组成原理"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-07-25-Principles%20of%20Computer%20Organization-01.html",relativePath:"_posts/2020-07-25-Principles of Computer Organization-01.md",key:"v-320be4a6",path:"/2020/07/25/principles-of-computer-organization-01/",headers:[{level:2,title:"1.1 计算机系统简介",slug:"_1-1-计算机系统简介"},{level:2,title:"1.2 计算机的基本组成",slug:"_1-2-计算机的基本组成"},{level:2,title:"1.3 计算机硬件的主要技术指标",slug:"_1-3-计算机硬件的主要技术指标"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" 第一章 计算机系统概论 \n \n 计算机组成原理第一章随堂笔记 \n \n 采用自顶向下的方式，层层细化。 \n 课程内容组织分为四篇： \n \n 第一：概论； \n \n \n \n 第二：计算机系统的硬件结构 \n \n \n \n 第三篇：CPU \n \n \n \n 第四篇：CU \n 1.1 计算机系统简介 \n 计算机系统由软件和硬件两部分组成。软件可以划分为系统软件和应用软件两种。 \n \n 计算机系统结构 是指 程序员所见到的计算机系统的属性，概念性的结构与功能特性。（指令系统、数据类型、寻址技术、I/O机理）。比如 有无乘法指令 \n 计算机组成 主要是 实现计算机体系结构所体现的属性。（具体指令的实现）。比如 如何实现乘法指令 \n 1.2 计算机的基本组成 \n 一、冯诺依曼计算机特点 \n \n 有5大组成部分：运算器(ALU)、控制器(CU)、存储器、输入设备、输出设备。 \n 指令和数据以同等的地位存于存储器，可以按地址寻访 \n 指令和数据用二进制表示 \n 指令由操作码和地址码组成（操作码指明指令具体要做什么操作，地址码指明要操作的数在内存中的地址。） \n 存储程序，程序存储在存储器中（核心特征） \n 以运算器为中心 \n \n 冯诺依曼计算机硬件框图 \n \n 存在的问题：以运算器为中心，运算器的性能成为这个系统的瓶颈；其次层次化结构不够清晰。 \n 二、计算机硬件框图 \n 现代计算机硬件框图 \n \n 层次化结构： \n \n 系统复杂性管理的方法：（3Y） \n \n 层次化：Hierachy,将被设计的系统划分为多个模块或子模块。 \n 模块化：Modularity,有明确定义的功能和接口 \n 规则性：Regularity,模块更容易被复用 \n \n 三、计算机的工作步骤 \n \n \n 上机前的准备 \n \n 建立数学模型 \n 确定计算方法 \n 编制解题程序 \n \n \n \n 计算机的解题过程 \n \n \n 2.1. 存储器的基本组成： \n \n 存储器的核心结构是存储体，存储体由若干个存储单元组成，存储单元由对个存储元件组成。 \n 存储单元存放了一串二进制代码，指令和数据都是存储在存储单元中。 \n 存储单元中二进制代码的组合称为 存储字 。存储单元中二进制代码的位数称为存储字长。 \n 每个存储单元都会有一个地址。通过这个地址实现对存储单元的访问。一个存储单元中存放了一个存储字。 \n MAR：存储器地址寄存器，反映存储单元的个数。 \n MDR：存储器数据寄存器，反映了存储字长。 \n 举个例子： \n 假如MAR=4位，MDR=8位。那么存储单元个数为16（0000到1111）个，存储字长为8位。 \n 2.2 远算器的基本结构 \n 远算器最基本的功能就是完成运算，因此其核心为算术逻辑单元（ALU）。 \n \n ACC:累加器， 专门用来存放操作数或运算结果 ；X：操作数寄存器；MQ：乘商寄存器 \n \n 2.2.1 加法操作过程 \n 指令： 操作码（加） + 内存地址（M） \n 初态： ACC中存入被加数 \n 其次： 在内存地址中取出加数存入X寄存器。[M] → X \n 然后： 在运算器(ALU)中执行加法操作，并将结果存入累加器ACC中。[ACC] + [X] → ACC \n 2.2.2 减法操作过程（基本同上） \n 2.2.3 乘法操作过程 \n 指令： 操作码（乘） + 内存地址（M） \n 初态： ACC中存入被乘数 \n 其次： 在内存地址中取出乘数存入MQ寄存器。[M] → MQ \n 然后： 将ACC中的内容存入X寄存器。 [ACC] → X \n 然后： 由于乘法运算是通过累加和移位的方式实现的。因此需要一个寄存器来保存累加的内容。并且在累加之前，把这个寄存器清零。这个寄存器就是ACC。因此：0 → ACC。 \n 然后： 在ALU中进行乘法操作，并且结果保存在两个寄存器里面。[x] * [MQ] → ACC // MQ \n 2.2.4 除法操作过程 \n 指令： 操作码（除） + 内存地址（M） \n 初态： ACC中存入被除数 \n 其次： 在内存地址中取出除数并存入X寄存器。[M] → X \n 然后： 在运算器中进行除法操作。商保存在MQ寄存器中，余数保存在ACC寄存器中。[ACC] ÷ [x] → MQ \n 2.3 控制器的基本结构 \n 控制器的功能：解释指令、保证指令的按序执行。 \n 完成一条指令过程：首先是取指令（把内存单元中的指令取出来送到控制器中），然后是分析指令（把操作码部分送到控制单元进行分析），然后是执行指令（由控制单元控制相应的执行部件完成这条执行所需要的操作）。 \n 功能决定结构，完成这些功能需要什么样的硬件结构： \n 首先是 取指令 ：PC(程序计数器)中存放了当前欲执行指令的地址，具有计数功能。 \n 然后是 分析指令 ：IR(指令寄存器)存放当前欲执行的指令。控制单元可以从IR寄存器中把指令的操作码取出来进行分析。 \n 然后是 执行指令 ：CU(控制单元)，控制指令的执行顺序。 \n 因此控制器由3大部分组成：PC、IR、CU。核心是控制单元CU。 \n \n 由前面知道存储器、运算器、控制器共同组成了主机。那么主机完成一条指令的过程是什么呢？ \n 2.4主机完成一条指令的过程 \n \n 以取数指令为例 \n \n 取数指令的功能是将保存在存储体中的数据取到ACC中。 \n \n 由前面知道指令和数据存放在存储体中，当前欲执行的指令地址存放在PC中。因此: \n \n 第一步：PC要把指令的地址送给MAR， \n 第二步：再由MAR(存储器地址寄存器)送给存储体， \n 第三步：在控制器的控制下，存储体把指定存储单元中保存的那条取数指令取出来送入到MDR(存储器数据寄存器)， \n 第四步：将取出来的指令送到IR中。 \n 第五步：将指令寄存器中保存的指令的操作码部分送给CU。经过译码以后CU就会有相应的信号控制执行部件去执行指令要求的操作。 \n \n 我们这条指令是取数指令，取数指令的功能是把保存在内存单元M当中的数据取到ACC寄存器。为了完成这个操作，在控制器的控制下要把指令当中的地址部分送给存储器，以便我们把存储的数据取出来。这个应该还是从IR出发。因为IR中保存了指令，包括操作码和内存地址。 \n \n 第六步：在IR(指令寄存器)中取出地址部分送到MAR \n 第七步：再由MAR将地址送入到存储体 \n 第八步：在控制单元的控制下将指定存储单元中保存的数据取出来送入到MDR \n 第九步：然后将MDR中保存的数据送入到ACC。 \n \n 第一步到第四步：取指令 \n 第五步：分析指令 \n 第六步到第九步：执行指令 \n \n 以存数指令为例 \n \n 存数指令是将ACC中的数据保存到存储体中。 \n \n 首先还是取指令： \n \n 第一步：PC要把指令的地址送给MAR， \n 第二步：再由MAR(存储器地址寄存器)送给存储体， \n 第三步：在控制器的控制下，存储体把指定存储单元中保存的那条取数指令取出来送入到MDR(存储器数据寄存器)， \n 第四步：将取出来的指令送到IR中。 \n \n 然后是分析指令： \n \n 第五步：将指令寄存器中保存的指令的操作码部分送给CU。经过译码以后CU就会有相应的信号控制执行部件去执行指令要求的操作。 \n \n 然后是执行指令： \n \n 第六步：在控制单元的控制下将IR中保存的指令的地址部分取出来送到MAR \n 第七步：再由MAR将地址送入到存储体（告诉存储体要有一条数据存进来，地址是多少） \n 第八步：将ACC中的内容送入到MDR \n 第九步：在控制器的控制下把MDR中的数据保存到存储体中。 \n \n \n 这样就知道了一个程序在计算机上的运行过程： \n \n 将程序通过输入设备送至计算机 \n 程序首地址送入到PC \n 启动程序运行 \n 取指令：PC=>MAR=>M=>MDR=>IR, (PC) + 1 → PC \n 分析指令：OP(IR) => CU \n 执行指令：AR(IR)=>MAR=>M=>MDR=>ACC \n ... \n 打印结果 \n 停机 \n 1.3 计算机硬件的主要技术指标 \n \n 机器字长 \n 运算速度：主频、核数、吉普森法、CPI(执行一条指令所需要的时钟周期数)、MIPS(每秒执行百万条指令)、FLOPS(每秒浮点运算次数) \n 存储容量 \n \n ",summary:"计算机组成原理第一章随堂笔记\n\n采用自顶向下的方式，层层细化。\n\n课程内容组织分为四篇：\n\n第一：概论；\n\n第二：计算机系统的硬件结构\n\n第三篇：CPU\n\n第四篇：CU\n\n1.1 计算机系统简介\n\n计算机系统由软件和硬件两部分组成。软件可以划分为系统软件和应用软件两种。\n\n计算机系统结构是指 程序员所见到的计算机系统的属性，概念性的结构与功能特性。（指令系统、数据类型、寻址技术、I/O机理）。比如 有无乘法指令\n\n计算机组成主要是 实现计算机体系结构所体现的属性。（具体指令的实现）。比如 如何实现乘法指令\n\n1.2 计算机的基本组成\n\n  一、冯诺依曼计算机特点\n\n  有5大组成部分：运算器( ...",id:"post",pid:"post",readingTime:{text:"2 min read",minutes:1.275,time:76500,words:255}},{title:"高性能JavaScript——第一章",frontmatter:{title:"高性能JavaScript——第一章",tags:["读书笔记"],date:"2020-08-28",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqs/blogImage/raw/master/blogImage/3378128262-5d07af0750999.png",meta:[{name:"title",content:"高性能JavaScript——第一章"},{name:"description",content:"高性能JavaScript——第一章"},{name:"keywords",content:"高性能JavaScript， 加载和执行, async, defer"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-08-28-load&execute.html",relativePath:"_posts/2020-08-28-load&execute.md",key:"v-45a6d390",path:"/2020/08/28/load-execute/",headers:[{level:2,title:"延迟的脚本",slug:"延迟的脚本"},{level:2,title:"动态脚本元素",slug:"动态脚本元素"},{level:2,title:"XMLHttpRequest脚本注入",slug:"xmlhttprequest脚本注入"},{level:2,title:"小结",slug:"小结"},{level:2,title:"参考文章",slug:"参考文章"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" 第一章 加载和执行 \n \n 高性能JavaScript读书笔记 \n \n \n <script>标签每次出现都会霸道地让页面等待脚本的 解析 和 执行 。无论当前的JavaScript代码是内联的还是包含在外链文件中，页面的下载和渲染都必须停下来等待脚本的执行完成。因为脚本执行的过程可能会修改页面内容。 \n \n 例如： \n < html > \n     < head > \n         < title > Script Example </ title > \n     </ head > \n     < body > \n         < p > \n             < script   type = \" text/javascript \" > \n                document . write ( 'The date is '   +   ( new   Date ( ) ) . toDateString ( ) ) ; \n             </ script > \n         </ p > \n     </ body > \n </ html > \n \n 1 2 3 4 5 6 7 8 9 10 11 12 \n \n 由于脚本会阻塞页面其他资源的下载，因此推荐将所有的script标签尽可能的放到body标签的底部，以减少对整个页面下载的影响。 \n \n \n 如果把内嵌脚本放在引用外联样式表的<link>标签之后会导致页面阻塞去等待样式表的下载。这样做是为了确保内嵌脚本再执行时能获得最精准的样式信息。因此，建议 永远不要把内嵌脚本紧跟在<link>标签后面。 \n 延迟的脚本 \n \n \n 上图中的图片： \n 动态脚本元素 \n let  script  =  document . createElement ( 'script' ) ; \nscript . type  =   'text/javascript' ; \n\nscript . onload   =   ( )   =>   { \n    console . log ( 'loaded' ) ; \n } ; \n\nscript . src  =   './script.js' ; \ndocument . getElementsByTagName ( 'head' ) [ 0 ] . appendChild ( script ) ; \n \n 1 2 3 4 5 6 7 8 9 这个新创建的script元素加载了script.js文件。文件在该元素被添加到页面时开始下载。这种技术的重点在于：无论何时启动下载，文件的下载和执行过程都不会阻塞页面的其他进程。 \n XMLHttpRequest脚本注入 \n 另一种无阻塞脚本的方法是使用XMLHttpRequest(XHR)对象获取脚本并注入页面中。此技术会先创建一个XHR对象，然后用它下载JavaScript文件，最后通过创建动态script元素将代码注入到页面中。 \n let  xhr  =   new   XMLHttpRequest ( ) ; \nxhr . open ( 'get' ,   'script.js' ,   true ) ; \nxhr . onreadystatechange   =   function ( )   { \n     if ( xhr . readyState  ==   4 )   { \n         if ( xhr . status  >=   200   &&  xhr . status  <   300   ||  xhr . status  ===   304 )   { \n             let  script  =  document . createElement ( 'script' ) ; \n            script . type  =   'text/javascript' ; \n            script . text  =  xhr . responseText ; \n            document . body . appendChild ( script ) ; \n         } \n     } \n } \nxhr . send ( null ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 #  小结 \n 管理浏览器中的JavaScript代码是个棘手的问题，因为代码执行过程会阻塞浏览器的其他进程，比如用户界面绘制。每次遇到script标签，页面都必须停下来，等待代码下载（如果是外链文件）并执行，然后继续处理其他部分。尽管如此，还是有几种方法能减少JavaScript对性能的影响： \n \n </body>闭合标签之前，将所有的script标签放到页面底部。这能确保在脚本执行前页面已经渲染完成。 \n 合并脚本。页面的script标签越少，加载也就越快，响应速度也就越迅速。无论外链文件还是内嵌脚本都是如此。 \n 有多种无阻塞下载JavaScript的方法：\n \n 使用script标签的defer属性； \n 使用动态创建的script标签元素来下载并指代码； \n 使用XHR对象下载JavaScript代码并注入到页面中。 \n 参考文章 \n \n defer和sync的区别 \n \n ",summary:"高性能JavaScript读书笔记\n\n\\标签每次出现都会霸道地让页面等待脚本的解析和执行。无论当前的JavaScript代码是内联的还是包含在外链文件中，页面的下载和渲染都必须停下来等待脚本的执行完成。因为脚本执行的过程可能会修改页面内容。\n\n例如：\n\n        Script Example\n\n                document.write('The date is ' + (new Date()).toDateString());\n\n由于脚本会阻塞页面其他资源的下载，因此推荐将所有的script标签尽可能的放到body标签的底部，以减少对整个页面下载的影响。\n\n如果把内嵌 ...",id:"post",pid:"post",readingTime:{text:"1 min read",minutes:.655,time:39300.00000000001,words:131}},{title:"计算机组成原理——第四章",frontmatter:{title:"计算机组成原理——第四章",tags:["计算机组成原理","计算机知识"],date:"2020-08-25",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20200825222450.png",meta:[{name:"title",content:"计算机组成原理第四章"},{name:"description",content:"计算机组成原理第四章"},{name:"keywords",content:"计算机组成原理, 存储器"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-08-25-Principles%20of%20Computer%20Organization-04.html",relativePath:"_posts/2020-08-25-Principles of Computer Organization-04.md",key:"v-48bd62e5",path:"/2020/08/25/principles-of-computer-organization-04/",headers:[{level:2,title:"4.1 概述",slug:"_4-1-概述"},{level:2,title:"4.2 主存储器（重点）",slug:"_4-2-主存储器-重点"},{level:2,title:"4.3 高速缓冲存储器（重点）",slug:"_4-3-高速缓冲存储器-重点"},{level:2,title:"4.4 辅助存储器",slug:"_4-4-辅助存储器"},{level:2,title:"参考文章",slug:"参考文章"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" 第四章 存储器 \n 4.1 概述 \n 一、存储器分类 \n \n \n 按存储介质分类 \n \n 半导体存储器 （TTL、MOS） \n 磁表面存储器 （磁头、载磁体） \n 磁芯存储器 （硬磁材料、环状元件） \n 光盘存储器 （激光、磁光材料） \n \n \n \n 按照存取方式分类 \n \n 存取时间与物理地址无关（随机访问）\n \n 随机存储器（RAM）：在程序执行过程中可读可写 \n 只读存储器（ROM）：在程序执行过程中只读 \n \n \n 存取时间与物理地址有关（串行访问）\n \n 顺序存取存储器：磁带 \n 直接存取存储器：磁盘 \n \n \n \n \n \n 按在计算机中的作用分类 \n 按照在计算机中的作用进行分类，存储器可以分为主存储器和辅存储器。其中主存储器可以分为随机存储器（RAM）和只读存储器（ROM）。一般用户到数据和程序是存储在RAM中，一些系统参数则保存在ROM中。RAM还可以进一步的分类：分为静态RAM和动态RAM。ROM还可以进一步分为：MROM（掩模只读存储器）、PROM（可编程的只读存储器）、EPROM（电可编程只读存储器）、EEPROM（带电可擦可编程只读存储器）。 \n 辅助存储器和主存储器之间还可以放上一层flash memory,常用的U盘就是flash memory来做的，是半导体存储器，它的速度比磁盘要快，但比主存储器要慢。由于主存和辅存之间速度差异比较大，因此flash memory可以作为辅助存储器的缓冲。 \n 另外还有一种  高速缓冲存储器（cache） ，它是放在主存储器和CPU之间的，速度很高。（通常来说，cache就是使用静态RAM来做的）。 \n 辅助存储器：磁盘、磁带、光盘。 \n \n \n \n 二、存储器的层次结构 \n \n \n 存储器三个主要特征的关系 \n 存储器的三个主要特征：速度、容量、价格。 \n \n 价格则是由高到低。 \n 为什么会出先这么多种的存储器呢？ \n 因为任何一种单一的存储器都不能满足用户的要求。用户需要的是高速度、大容量、低价格的存储器。那么解决的办法就是采用这种层次结构，形成一个存储体系。所谓存储体系是指：把两种或者两种以上的存储介质构成的存储器用软件、硬件或者软硬件相结合的方式把不同的存储介质连接成一个 整体 ，使得从某一级程序员的角度去看，这个整体具有高速度、大容量、低价格的特征。 \n \n \n 缓存-主存层次和主存-辅存层次 \n \n 计算机的主机由CPU和主存构成，CPU可以在主存中读信息，也可以把运行的结果保存在主存中，但是主存的容量是有限的，因此需要我们的辅助存储器。但是程序的是在主存中运行的，一个程序要运行就要掉入到主存中，因此主存储器和辅助存储器之间也是有信息交换的。因此主存储器和辅助存储器构成了一个存储层次。在这个存储层次上，利用软硬件相结合的方法把主存储器和辅助存储器构成了一个整体，这个整体有主存储器的速度、辅助存储器的容量和价格。 \n 另外，主存储器的速度和CPU的速度也是有差异的。为了解决这个问题，我们在CPU和主存储器之间加上了一层缓存（cache）。CPU可以直接访问缓存，通过缓存来访问主存储器；缓存和主存储器之间也进行信息交换。如果把CPU常用的指令、数据都放到缓存当中，计算机的速度就会得到很大的提升。在这个地方用到了一个原理： 程序的局部性原理 。 \n 我们把现代计算机当中的各种存储设备、存储元件分为了两个层次：缓存-主存层次和主存-辅存层次。其中缓存-主存层次是采用硬件方法把其连接成一个整体，主存-辅存层次采用软硬件相结合的方式连接成一个整体。 \n 缓存-主存层次主要是解决 速度 问题，主存-辅存层次主要是解决 容量 问题。这也就决定了缓存-主存层次要采用硬件方法来连接成一个整体。 \n 主存储器和辅助存储器构成了一个整体，一般来说，我们把其称为虚拟存储器。那么就有一个问题：虚拟存储器的地址空间是如何来定义的呢？是使用主存储器的地址空间，还是使用辅助存储器的地址空间？在这个层级就给出了新的地址空间，叫做 虚地址 。 \n 缓存和主存储器这个层次用的就是 主存储器的地址空间 ，主存储器用到的地址称为 实地址 。 \n 4.2 主存储器（重点） \n 一、主存储器概述 \n \n \n 主存的基本组成 \n 在前面我们了解到主存储器主要由MAR、MDR、存储体构成，我们的指令和数据都保存在存储体中。其实主存储器的结构要更加复杂。MAR中保存了我们要访问的存储单元的地址，必须经过译码器译码以后，我们才可以选定指定的存储单元。MDR中保存了我们要读出或者写入的数据，这个数据到底是读出还是写入是由读写电路和控制电路来控制的。如果是写入数据，那么就会把MDR中保存的数据写入带MAR指定的存储单元中；如果是读出数据，指定的存储单元中的内容就会被送入到MDR。 \n \n \n \n 主存和CPU的联系 \n CPU和主存之间的连接信号分成了三类： 数据总线、地址总线、控制总线 。 \n 数据总线完成了CPU和主存之间的数据传输，因此数据总线连接在MDR寄存器上（双向）； \n 地址总线连接在MAR寄存器和主存的地址总线之间，给出了要访问的内存单元的地址，所以它是单向的，从CPU送到主存。 \n 控制总线给出了两个：读出或者写入，都是单向的。由CPU送给主存储器。 \n \n \n 疑问：第一章给出的存储器结构图中，MAR、MDR是在存储器中的，但是现在又画在CPU中？ \n \n \n 答：可以确定的回答是MAR、MDR是在CPU中的。至于在内存中的那张图可以理解为：MDR和MAR是配置给主存使用的，但是实际物理存在 不是在主存中。因此也有人回答说：逻辑上属于主存，物理上集成在CPU里。 \n \n \n \n 主存中存储单元地址的分配 \n 存储单元中二进制代码的组合称为存储字。存储单元中二进制代码的位数称为存储字长。 \n \n 位 ：“位(bit)”是电子计算机中最小的数据单位。每一位的状态只能是0或1。 字节 ：8个二进制位构成1个“字节(Byte)”，它是存储空间的基本计量单位。1个字节可以储存1个英文字母或者半个汉字，换句话说：1个汉字占据2个字节的存储空间。 字 ： “字”由若干个字节构成 ， 字的位数叫做字长 ，不同档次的机器有不同的字长。例如一台8位机，它的1个字就等于1个字节，字长为8位。如果是一台16位机，那么，它的1个字就由2个字节构成，字长为16位。字是计算机进行数据处理和运算的单位。 KB ：K表示1024，也就是2的10次方。1KB表示1K个Byte，也就是1024个字节。 \n \n 假设主存储器的存储字长为32位，意味着对这个存储器的某个存储单元每次最多可以读取或者写入32个0或者1. \n 那么12345678H这个16进制数如何在主存储器中进行存储？ \n 有两种方式：一、大端/大尾方式，二、小端/小尾方式。 \n 对于大端方式：高位字节地址为字地址，高位字节在前，低位字节在后，这是人类读写数值的方法。 \n 对于小端方式：低位字节地址为字地址，低位字节在前，高位字节在后。 \n \n 还有一个比较形象的图： \n \n \n 首先，为什么会有小端字节序？答案是，计算机电路先处理低位字节，效率比较高，因为计算都是从低位开始的。所以，计算机的内部处理都是小端字节序。但是，人类还是习惯读写大端字节序。所以，除了计算机的内部处理，其他的场合几乎都是大端字节序，比如网络传输和文件储存。计算机处理字节序的时候，不知道什么是高位字节，什么是低位字节。它只知道按顺序读取字节，先读第一个字节，再读第二个字节。如果是大端字节序，先读到的就是高位字节，后读到的就是低位字节。小端字节序正好相反。理解这一点，才能理解计算机如何处理字节序。 \n \n \n \n 主存的技术指标 \n \n 存储容量：主存存放二进制代码的总位数 \n 存储速度\n \n 存取时间 \n 存取周期 \n \n \n 存储器的带宽 \n \n \n \n 二、半导体存储芯片简介 \n \n \n 半导体存储芯片的基本结构 \n \n 地址线（单向）：由CPU指向存储器或者由IO设备的控制器指向存储器； \n 数据线（双向）：完成数据的读/写。 \n 芯片容量：地址线决定了存储矩阵有多少存储单元，数据线决定了每个存储单元的存储字长为几位。举个例子：地址线为10位，数据线位为8位。那么存储矩阵有1K个存储单元，每个存储单元有8位，因此芯片容量位1K * 8 = 8K。 \n 片选线：芯片选择线，本次访问的数据在哪几个芯片中，是由片选线确定的。（CS/CE，低电平有效） \n 读写控制线：表示本次对半导体芯片的操作是读操作还是写操作。（可以是一根线也可以是两根线） \n \n \n 半导体存储芯片的译码驱动方式 \n (1) 线选法 \n \n 地址线A0-A3说明有16个存储单元，数据线D0-D7说明每个存储单元有8位。 \n 工作过程：如果地址线的输入为0000，那么经过译码器译码之后，只有0的这条线是有效的，其余15条线均无效。如果是现在进行是一个读操作，那么读信号会控制控制电路将通路打开，使数据可以从存储矩阵送到数据总线。 \n 存在的问题：对于容量稍大一些的芯片来说需要集成的字线会相当多。比如1M * 8的芯片，需要的地址线位20根，字线要有100多万条。不合适。因此有了下面的“重合法”。 \n (2) 重合法 \n \n 对于1M * 8的芯片，线选法只有一个译码器，地址线20根，需要字线1M条字线。对于重合法，可以将20根地址线分为10根行地址，10根列地址。这样需要的字线一共就2K条。相比于1M条线，少了很多。 \n \n \n 三、随机存取存储器（RAM） \n 随机存储器可以分为两类：静态RAM和动态RAM。 \n \n \n 静态RAM(SRAM) \n \n 静态RAM基本电路（双稳态触发器存储0和1） \n \n \n 双稳态触发器是一种具有记忆功能的逻辑单元电路，它能储存一位二进制码。它有两个稳定的工作状态，在外加信号触发下电路可从一种稳定的工作状态转换到另一种稳定的工作状态。 \n \n \n 后续课程中以Intel 2114为例介绍了静态RAM矩阵的读操作和写操作。 \n \n \n \n 动态RAM(DRAM) \n \n 动态RAM基本单元电路（电容有无电荷存储0和1） \n \n \n  (三管动态RAM和单管动态RAM) \n 三管动态RAM读出的信息与原信息相反，写入与输出信息相同。单管动态RAM读出时数据线有电流位“1”，写入时电容充电为“1”，放电为“0”。 \n 对于 三管动态RAM 以Intel 1103（1k * 1位）为例介绍了读操作和写操作。 \n \n 在行地址译码器这个地方参加译码的不仅仅是地址同时还有读写控制信号。 \n 对于 单管动态RAM 以Intel 4116（16K* 1位）为例介绍其读操作和写操作。 \n \n 按理来说16k * 1位需要14根地址线，但是4116芯片只有7根地址线，它的地址是分两次传入的，第一次芯片的7位地址线接收到的是7位的行地址，放到行地址缓存器；第二次接收到的是7位列地址，放到列地址缓存器。 \n \n \n 动态RAM刷新 \n 动态RAM是利用电容存储电荷的方式来保存信息的，电容非常小，很容易漏电，一段时间内如果我们不对电容中的信息进行再生的话，电容的信息就会丢失。这就是为什么要对动态RAM刷新。 \n \n 刷新与行地址有关，与列地址无关。也就是说每一次刷新是刷新一行所有的基本单元电路。 \n \n 动态RAM刷新的方式有3种： \n \n \n 集中刷新(假设存取周期为0.5微秒) \n 以128 * 128的芯片矩阵为例，假设刷新周期为2ms \n \n 在刷新时，无论是CPU还是IO都无法与动态RAM进行数据交换，因此刷新这一段时间称为死区：05微秒 * 128 = 64微秒。 \n \n \n 分散刷新(假设存取周期位1微秒) \n 以128 * 128的芯片矩阵为例 \n \n tm是原来的读写周期位0.5微秒，tr也为0.5微秒，专门用于某一行的刷新。tc=tm+tr,这样就把读写周期变为原来的2倍。集中式刷新是2ms刷新128行，现在是每个微秒刷新一行，刷新128行需要128微秒，那么2ms每一行就被刷新了15.6次。无死区。 \n \n \n 异步刷新（分散刷新和集中刷新相结合） \n 对于128 * 128的存储芯片（存取周期位0.5微秒）每隔15.6微秒刷新一行 \n \n 相对于单个15.6微秒，这属于集中刷新。但相对于整个2ms的刷新周期来说，属于分散刷新。死区为0.5微秒，将刷新安排在指令译码阶段，不会出现死区。 \n \n \n \n \n 动态RAM和静态RAM比较 \n \n 所以一般DRAM是做主存，SRAM做Cache。因为SRAM速度快，但是功耗高、价格高，不适合大规模使用。 \n \n \n 四、只读存储器（ROM） \n \n \n 掩膜ROM（MROM） \n 掩膜ROM只可以进行读，里面的任何信息都无法修改。 \n \n \n PROM（一次性编程） \n 一次性、破坏性进行编程 \n \n \n \n EPROM（多次性编程，电可编程只读存储器） \n N型沟道浮动栅MOS电路。 \n 通过紫外线照射进行擦除。 \n \n \n EEPROM（多次性编程，带电可擦可编程只读存储器） \n 电可擦写、局部擦写、全部擦写 \n \n \n Flash Memory（闪速型存储器） \n \n EPROM 价格便宜、集成度高 \n EEPROM 电可擦洗重写 \n Flash Memory 比EEPROM速度快，具备RAM功能 \n \n \n \n 五、CPU和主存储器的连接 \n CPU的地址线条数比较多，寻址范围也比较大。要构成一个主存储器需要多个存储芯片共同组成。 \n \n \n 存储器容量的扩展 \n \n \n 位扩展（增加存储字长） \n 用2片1K * 4位 存储芯片 组成 1K * 8位的存储器。需要地址线10根、数据线8根。 \n \n 这两个芯片的片选信号CS和读写信号WE一定要连接在一起。 \n \n \n 字扩展（增加存储字的数量） \n 用2片1K * 8位 存储芯片组成 2K *  8位的存储器。 \n 需要11根地址线、8根数据线。但这两个芯片不能同时工作，因为都连着D0-D7的数据线。所以A0-A9作为地址线，第11根地址线A10作为片选信号来决定选取哪一个芯片。 \n \n \n \n 字、位扩展 \n 用8片1K * 4位存储芯片组成4K * 8位的存储器。需要12根地址线、8根数据线。其中A0-A9作为地址信号送入芯片，剩余的两根A10、A11作为片选信号决定选取哪一组芯片。 \n \n \n \n \n \n 存储器和CPU的连接 \n \n \n 地址线的连接 \n 存储芯片的容量不同，其地址线数也不同，CPU的地址线数往往比存储芯片的地址线数多。通常总是将CPU地址线的低位与存储芯片的地址线相连。CPU地址线的高位或在存储芯片扩充时用，或做其他用途，如片选信号。 \n \n test:  \n 4.3 高速缓冲存储器（重点） \n 4.4 辅助存储器 \n 参考文章 \n \n 理解字节序 \n \n ",summary:"\n4.1 概述\n\n一、存储器分类\n\n按存储介质分类\n    半导体存储器 （TTL、MOS）\n    磁表面存储器 （磁头、载磁体）\n    磁芯存储器 （硬磁材料、环状元件）\n    光盘存储器 （激光、磁光材料）\n\n按照存取方式分类\n    存取时间与物理地址无关（随机访问）\n        随机存储器（RAM）：在程序执行过程中可读可写\n        只读存储器（ROM）：在程序执行过程中只读\n    存取时间与物理地址有关（串行访问）\n        顺序存取存储器：磁带\n        直接存取存储器：磁盘\n\n按在计算机中的作用分类\n\n    按照在计算机中的作用进行分类，存储器可 ...",id:"post",pid:"post",readingTime:{text:"2 min read",minutes:1.42,time:85199.99999999999,words:284}},{title:"Units in css",frontmatter:{title:"Units in css",date:"2020-08-31",author:"Yoha",tags:["CSS"],location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20200831230601.png",meta:[{name:"title",content:"Units in css"},{name:"description",content:"Units in css"},{name:"keywords",content:"css unit"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-08-31-css%20unit.html",relativePath:"_posts/2020-08-31-css unit.md",key:"v-e21cc276",path:"/2020/08/31/css-unit/",headers:[{level:2,title:"相对单位",slug:"相对单位"},{level:2,title:"绝对单位",slug:"绝对单位"},{level:2,title:"viewpoint units",slug:"viewpoint-units"},{level:2,title:"参考文章",slug:"参考文章"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" Units in css(em,rem,pt,px,vw,vh,vmin,vmax,ex,ch...) \n 本文将从相对单位、绝对单位以及viewpoint units三个类型来介绍在css中的单位。 \n 相对单位 \n 与绝对单位（如：px）不同，我们也可以用相对单位来定义尺寸。 在大多数浏览器中，默认的字体大小是16px ，可以把这个尺寸作为基值来计算。比如16px=1em,1rem或者100%。 \n \n \n \n 单位 \n 描述 \n \n \n \n \n em \n 基准点为父节点字体的大小，如果自身定义了font-size按自身来计算，整个页面内1em不是一个固定的值。 \n \n \n rem \n 可理解为”root em”, 相对根节点html的字体大小来计算 \n \n \n % \n 百分比 \n \n \n ch \n 相对于“0”的宽度 \n \n \n ex \n ex单位定义为“当前字体x的高度或1em的二分之一”。 给定字体x的高度是该字体的小写x的高度。通常，大约是字体的中间标记。 \n \n \n \n \n x-height; the height of the lower case x  \n \n The units ex and ch, similar to em and rem, rely on the current font and font size. However, unlike em and rem, these units also rely on the font-family, as they are determined based on font-specific measures.The  ch  unit is defined as being the “advanced measure” of the width of the zero character, 0. The basic concept is that, given a monospace font, a box with a width of N character units, such as width: 40ch;, can always contain a string with 40 characters in that particular font. While conventional uses of this particular rule relate to laying out braille(盲文), the possibilities for creativity here certainly extend beyond these simple applications.The  ex  unit is defined as the “x-height of the current font OR one-half of one em”. Thex-height of a given font is the height of the lower-case x of that font. Often times, this is about at the middle mark of the font. \n 绝对单位 \n \n \n \n 单位 \n 描述 \n \n \n \n \n cm \n centimeters, 1cm = 1cm \n \n \n mm \n millimeters, 10mm = 1cm \n \n \n in \n inches, 1in = 96px = 2.54cm \n \n \n px \n pixels, 1px = 1/96 in \n \n \n pt \n points, 1pt = 1/72 in \n \n \n pc \n pica, 1pc = 12pt = 1/6 in \n viewpoint units \n viewpoint units代表当前浏览器视口的百分比。与百分比单位的区别在于，viewpoint units始终以浏览器视口大小的百分比计算。百分比单位继承其父元素的大小。 \n \n \n \n 单位 \n 描述 \n \n \n \n \n vw \n 视窗宽度，1vw等于视窗宽度的1% \n \n \n vh \n 视窗高度，1vh等于视窗高度的1% \n \n \n vmax \n 1% of viewport's smaller (vw or vh) dimension \n \n \n vmin \n 1% of viewport's smaller (vw or vh) dimension \n 参考文章 \n \n uints in css \n What is difference between CSS em and ch units?\n \n CSS3单位 \n what is the value of the CSS ex unit? \n 7 CSS Units You Might Not Know About \n \n ",summary:"\n\n本文将从相对单位、绝对单位以及viewpoint units三个类型来介绍在css中的单位。\n\n相对单位\n\n与绝对单位（如：px）不同，我们也可以用相对单位来定义尺寸。在大多数浏览器中，默认的字体大小是16px，可以把这个尺寸作为基值来计算。比如16px=1em,1rem或者100%。\n\n单位 | 描述\n---|---\nem | 基准点为父节点字体的大小，如果自身定义了font-size按自身来计算，整个页面内1em不是一个固定的值。\nrem | 可理解为”root em”, 相对根节点html的字体大小来计算\n% | 百分比\nch | 相对于“0”的宽度\nex | ex单位定义为“当前字 ...",id:"post",pid:"post",readingTime:{text:"2 min read",minutes:1.625,time:97500,words:325}},{title:"你可能还不知道console对象",frontmatter:{title:"你可能还不知道console对象",date:"2020-09-04",author:"Yoha",tags:["Javascript","前端"],location:"Beijing",image:"https://gitee.com/yancqs/blogImage/raw/master/blogImage/20200905134629.jpg",meta:[{name:"title",content:"你可能还不知道console对象"},{name:"description",content:"你可能还不知道console对象"},{name:"keywords",content:"console"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-09-04-console.html",relativePath:"_posts/2020-09-04-console.md",key:"v-4e31b43e",path:"/2020/09/04/console/",headers:[{level:2,title:"显示信息的命令",slug:"显示信息的命令"},{level:2,title:"占位符",slug:"占位符"},{level:2,title:"分组显示",slug:"分组显示"},{level:2,title:"计时功能",slug:"计时功能"},{level:2,title:"性能分析",slug:"性能分析"},{level:2,title:"断言",slug:"断言"},{level:2,title:"计数",slug:"计数"},{level:2,title:"表格",slug:"表格"},{level:2,title:"console.context()",slug:"console-context"},{level:2,title:"console.trace()",slug:"console-trace"},{level:2,title:"其他",slug:"其他"},{level:3,title:"一个属性",slug:"一个属性"},{level:2,title:"分享题目",slug:"分享题目"},{level:2,title:"参考文章",slug:"参考文章"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" console对象详解 \n 直接进入主题，先看一下console这个对象包含哪些属性。 \n \n 其中console对象包含的函数属性： assert 、 clear 、 context 、 count 、 countReset 、 debug 、 dir 、 dirxml 、 error 、 group 、 groupCollapsed 、 groupEnd 、 info 、 log 、 profile 、 profileEnd 、 table 、 time 、 timeEnd 、 timeLog 、 timeStamp 、 trace 、 warn 。 \n 还有一个属性： memory \n 显示信息的命令 \n 最简单常用的就是console.log()。另外，根据显示信息的性质不同，console对象还有4种显示信息的方法，分别是一般信息console.info()、除错信息console.error()、警告信息console.warn()、错误提示console.error()。 \n 占位符 \n console对象的上面5种方法，都可以使用printf风格的占位符。不过，占位符的种类比较少，只支持字符（%s）、整数（%d或%i）、浮点数（%f）和对象（%o）四种。 \n 比如： \n console . log ( \"%d年%d月%d日\" , 2011 , 3 , 26 ) ; \nconsole . log ( \"圆周率是%f\" , 3.1415926 ) ; \n \n 1 2 输出为： \n \n %o占位符，可以用来查看一个对象内部情况。比如，有这样一个对象： \n let  dog  =   { } ; \ndog . name  =   '贝贝' ；\ndog . color  =   '黄色' ; \n\nconsole . log ( '%o' ,  dog ) ; \n \n 1 2 3 4 5 \n 还有一种特殊的标示符**%c**，对输出的文字可以附加特殊的样式。 \n console . log ( '%c酒剑仙' ,   'color: yellow; background: #ccc; font-size: 20px' ) ; \n \n 1 \n 分组显示 \n 如果信息太多，可以分组显示，用到的方法是console.group()和console.groupEnd()。还有一个console.groupCollapsed() 是输出组的标题。 \n console . group ( \"First Group\" ) ; \nconsole . log ( '1-1' ) ; \nconsole . log ( '1-2' ) ; \nconsole . groupEnd ( ) ; \nconsole . group ( \"Second Group\" ) ; \nconsole . log ( '2-1' ) ; \nconsole . log ( '2-2' ) ; \nconsole . groupEnd ( ) ; \n \n 1 2 3 4 5 6 7 8 输出为： \n 计时功能 \n console.time([label])和console.timeEnd([label])，用来显示代码的运行时间。console.timeLog()在控制台输出计时器的值，该计时器必须已经通过 console.time([label]) 启动。label默认值为default。 \n console . time ( '计时器' ) ; \n let  sum  =   0 ; \n for ( let  i  =   0 ;  i  <   100000 ;  i ++ ) { \n    sum  +=  i ;  \n     if ( i  ==   50000 )  console . timeLog ( '计时器' ) ; \n } \nconsole . timeEnd ( '计时器' ) ; \nconsole . log ( sum ) ; \n \n 1 2 3 4 5 6 7 8 \n 性能分析 \n 性能分析（Profiler）就是分析程序各个部分的运行时间，找出瓶颈所在，使用的方法是console.profile()。 \n function   Foo ( )   { \n     for ( let  i  =   1 ;  i  <   20 ;  i ++ )   { \n         fn ( i ) ; \n     } \n } \n function   fn ( n )   { \n     sum ( n ) ; \n } \n function   sum ( m )   { \n     for ( let  i  =   0 ;  i  <  m ;  i ++ )   { \n        console . log ( Math . pow ( 2 ,  i  +   1 ) ) ; \n     } \n } \nconsole . profile ( 'Profile Foo' ) \n Foo ( ) ; \nconsole . profileEnd ( 'Profile Foo' ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 在Javascript Profile就可以看到： \n 断言 \n console.assert(expression, object[, object...])当expression为false时输出后续参数，当expression为true时无输出。 \n 计数 \n console.count([label])输出执行到改行的 次数 ，可选参数label输出在次数之前。默认label为default。 \n console.countReset([label]);重置次数。 \n \n 重置次数： \n 表格 \n console.table();可以将传入的对象或者数组以表格的形式输出。相比树形输出，这种输出方案更适合内部元素排列整齐的对象或数组，不然会出现很多undefined。 \n let  obj  =   { \n    foo : { \n        name : 'yoha' , \n        age : 12 \n     } , \n    baz : { \n        name : 'yooo' , \n        age : 13  \n     } \n } \nconsole . table ( obj ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 输出为： \n console.context() \n 打印出所有的console对象的 方法 (除了本身console.context()不会被打印出来) \n console.trace() \n function   add ( a , b ) { \n    console . trace ( ) ; \n     return  a + b ; \n } \n let  x  =   add3 ( 1 , 1 ) ; \n function   add3 ( a , b ) { return   add2 ( a , b ) ; } \n function   add2 ( a , b ) { return   add1 ( a , b ) ; } \n function   add1 ( a , b ) { return   add ( a , b ) ; } \n \n 1 2 3 4 5 6 7 8 \n 其他 \n \n console.clear() 用于清空控制台(当然你可以用快捷键ctrl+L)。 \n console.timeStamp()  向浏览器的Performance或者Waterfall工具添加一个标记。这样可以让你将代码中的一个点和其他在时间轴上已记录的事件相关联，例如布局事件和绘制事件等。 \n console.dir() 可以打印对象,包括普通对象，函数，数组等，还可以打印DOM元素。 \n consoe.dirxml() 打印XML/HTML,包括DOM元素或者Object对象。 \n 一个属性 \n console.memory \n 分享题目 \n function   f1 ( )   { \n    console . time ( 'time span' ) ; \n } \n function   f2 ( )   { \n    console . timeEnd ( 'time span' ) ; \n } \n setTimeout ( f1 ,   100 ) ; \n setTimeout ( f2 ,   200 ) ; \n\n function   waitForMs ( n )   { \n     let  now  =  Date . now ( ) ; \n     while   ( Date . now ( )   -  now  <  n )   { } \n } \n waitForMs ( 500 ) ; //time span: 0.022216796875 ms \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 其实这个题目考察的主要是JS的事件循环模型。setTimeout(fn,timer)是异步代码，执行到setTimeout的时候会有定时器线程进行计时，计时完毕将回调函数推到事件队列，等待主线程执行完毕，然后将事件队列的第一个压入到执行栈。因此setTimeout()执行的条件有两个：1.定时器线程计时完毕，2.主线程空闲。 \n 因此上面代码在500ms后，f1()和f2()都已经计时完毕，已经推入事件队列。所以主线程一空闲，这两个函数几乎是同时执行的。这也就是输出不是100ms的原因了。 \n 参考文章 \n \n console命令详解 \n 使用console进行 性能测试 和 计算代码运行时间 \n 你真的了解 console 吗 \n 扒一扒那些年我们console过的那些事儿 \n \n ",summary:"\n\n直接进入主题，先看一下console这个对象包含哪些属性。\n\n其中console对象包含的函数属性：assert、clear、context、count、countReset、debug、dir、dirxml、error、group、groupCollapsed、groupEnd、info、log、profile、profileEnd、table、time、timeEnd、timeLog、timeStamp、trace、warn。\n\n还有一个属性：memory\n\n显示信息的命令\n\n最简单常用的就是console.log()。另外，根据显示信息的性质不同，console对象还有4种显示信息的 ...",id:"post",pid:"post",readingTime:{text:"2 min read",minutes:1.43,time:85800,words:286}},{title:"了解cjs、esm以及require.context",frontmatter:{title:"了解cjs、esm以及require.context",date:"2020-09-08",author:"Yoha",tags:["Javascript","前端"],location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201016234622.jpeg",meta:[{name:"title",content:"了解cjs、esm以及require.context"},{name:"description",content:"了解cjs、esm以及require.context"},{name:"keywords",content:"CommonJS, ESModule, require.context"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-09-08-cjs&esm&require.context.html",relativePath:"_posts/2020-09-08-cjs&esm&require.context.md",key:"v-7e4e1a04",path:"/2020/09/08/cjs-esm-require-context/",headers:[{level:2,title:"cjs模块的导入和导出",slug:"cjs模块的导入和导出"},{level:3,title:"cjs模块导出",slug:"cjs模块导出"},{level:3,title:"cjs模块导入",slug:"cjs模块导入"},{level:2,title:"esm模块的导入和导出",slug:"esm模块的导入和导出"},{level:3,title:"esm模块导出",slug:"esm模块导出"},{level:3,title:"esm模块导入",slug:"esm模块导入"},{level:2,title:"import 引入 cjs模块",slug:"import-引入-cjs模块"},{level:2,title:"require 引入 esm模块",slug:"require-引入-esm模块"},{level:2,title:"require.context() 和 require('xx').default",slug:"require-context-和-require-xx-default"},{level:2,title:"最后",slug:"最后"},{level:2,title:"参考文章",slug:"参考文章"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" 了解cjs、esm以及require.context() \n 之前写了一篇文章—— CommonJS 与 ES6 Module的区别 ,主要写了一下cjs和esm特性的一些区别。 \n 这篇文章的内容是对上一篇的一些补充，和在深入了解cjs和esm收获的一些知识。 \n cjs模块的导入和导出 \n cjs模块导出 \n 在cjs中，通过module.exports可以导出模块中的内容，如： \n module . exports  =   { \n    name :   'yoha' , \n     add :   ( a ,  b )   =>  a  +  b ; \n } \n \n 1 2 3 4 cjs模块内部会有一个module对象用于存放当前模块的信息。在每个模块最开始定义了一下对象： \n let  module  =   { \n    exports :   { } \n } \n \n 1 2 3 验证一下： \n //addSum.js \nconsole . log ( module ) ; \n \n 1 2 //index.js \nconsole . log ( require ( './addSum.js' ) ,   'addSum' ) ; \n \n 1 2 \n 注意：导出模块语句不代表模块的末尾，在module.exports或exports后面的代码依旧会照常执行。 \n \n 控制台打印： \n \n 由此可知：其一，require函数返回的值是module.exports的值；其二，在cjs模块内部最开始就会有一个module对象，还默认有一个exports属性。 \n 在最上面的代码中我们导出了一个对象，包含name和add两个属性。为了书写方便，cjs也支持另一种简化的导出方式——直接使用exports。 \n exports . name  =   'yoha' ; \nexports . add   =   ( a ,  b )   =>  a  +  b ; \n \n 1 2 在实现效果上这段代码和最上面的module.exports没有任何不同。其内在机制是将exports指向了module.exports，而module.exports在初始化时是个空对象。可以简单的理解为cjs在每个模块首部默认添加了： \n let  module  =   { \n    exports :   { } \n } \n let  exports  =  module . exports ; \n \n 1 2 3 4 因此，为exports.add赋值就相当于在module.exports对象上添加了一个add属性。同时，这样的特性，如果使用不当，也会带来一些问题。 \n \n 不要直接给exports赋值，否则会导致其失效。 \n \n exports  =   { \n    name :   'yohhhhh' \n } \n \n 1 2 3 这样直接对exports进行赋值操作，使exports指向了内存的另外一个地址（新对象的地址），而module.exports却仍然是原来的空对象，因此name属性并不会导出。 \n \n 注：本来exports是指向module.exports这个对象的内存地址的。 \n \n \n 在module.exports 和 exports 不恰当的混用。 \n \n exports . add   =   ( a ,  b )   =>  a  +  b ; \nmodule . exports  =   { \n    name :   'yoha' \n } \n \n 1 2 3 4 上面的代码先通过exports导出了add属性，然后通过module.exports重新赋值为另外一个对象，这就导致原本拥有的add属性的对象丢失。最后只导出具有那么属性的对象。 \n cjs模块导入 \n 上面说了cjs模块的导出，在cjs中使用require进行模块的导入。如： \n //addSum.js \nmodule . exports  =   { \n     add :   ( a ,  b )   =>  a  +  b\n } \n //index.js \n const  Add  =   require ( './addSum.js' ) ; \n let  sum  =  Add . add ( 2 , 3 ) ; \nconsole . log ( sum ) ; //5 \n \n 1 2 3 4 5 6 7 8 我们在index.js中导入了addSum模块，并且调用了其add函数。我们在require一个模块时会有两种情况： \n \n require的模块的是第一次被加载。这个时候首先执行该模块，然后导出内容。 \n require的模块曾被加载。这个时候该模块的代码不会被再次执行，而是直接导出上次执行完得到的结果。 \n \n 这个是因为，我们在前面提到，模块会有一个module对象来存放信息，这个对象中会有一个属性loaded用于记录该模块是否被加载过。它的默认值时false，当模块第一次被加载后会置为true，后面再次加载时检查到module.loaded为true，则不会再次执行模块代码。 \n esm模块的导入和导出 \n esm模块导出 \n esm模块的导出主要有两种形式：命名导出和默认导出。 \n 一个模块可以有多个命名导出： \n //addSum.js \n export   let  name  =   'yoha' ; \n export   let  age  =   18 ; \n export   let   add   =   ( a ,  b )   =>  a  +  b ; \n \n 1 2 3 4 上面这个esm模块用export命令对外部输出了3个变量，除了上面这样的写法，还有一种写法： \n let  name  =   'yoha' ; \n let  age  =   18 ; \n let   add   =   ( a ,  b )   =>  a  +  b ; \n export   { name ,  age ,  add } ; \n \n 1 2 3 4 这两种写法是等价的。 \n export除了输出变量，还可以输出函数或者class。通常情况下，export输出的变量就是本来的名字，但是可以用as关键字重命名。 \n function   v1 ( )   { } ; \n function   v2 ( )   { } ; \n export   { \n    v1  as  streamV1 , \n    v2  as  streamV2 , \n    v2  as  streamLastV2\n } \n \n 1 2 3 4 5 6 7 重命名后，v2可以用不同的名字输出两次。 \n 需要注意的是， export命令规定的是对外的接口，必须与模块内部变量建立一一对应的关系。 \n //error \n export   1 ; \n //error \n let  a  =   1 ; \n export  a ; \n //error \n function   f ( )   { } ; \n export  f ; \n\n /*===========*/ \n\n //correct \n export   let  a  =   1 ; \n //correct \n let  a  =   1 ; \n export   { a } ; \n\n //correct \n let  a  =   1 ; \n export   { a  as  num } ; \n\n //correct \n function   f ( )   { } ; \n export   { f } ; \n\n //correct \n export   function   f ( )   { } ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 此外，我们还可以用export default命令为模块指定默认输出。其他模块加载该模块时，import命令可以为默认导出指定任意名字。 \n //default.js \n export   default   function ( ) { \n    console . log ( 'foo' ) ; \n } \n\n //导入 \n import  customName  from   './default.js' \n \n 1 2 3 4 5 6 7 这个时候也可以注意到：默认导出模块在引入时import命令后面不适用大括号。因为一个模块只能有一个默认输出，因此export default命令只能使用一次，所以import命令后面才不同加大括号，因为只可能对应一个方法。 \n 本质上，export default就是输出一个叫作default的变量或者方法，然后系统允许我们为它取任意的名字。因此： \n \n export default就是输出一个叫作default的变量或者方法,这一点在后面会被证明。也和require('xxx').default有着莫大的关系。 \n \n function   add ( x , y )   { \n     return  x  +  y ; \n } \n export   { add  as   default } ; \n //等同于 \n //export default add; \n\n import   { default   as  xxx }   from   'module' \n //等同于 \n //import xxx from 'module'; \n \n 1 2 3 4 5 6 7 8 9 10 正因为export default命令其实只是输出一个叫作default的变量，所以它后面不能跟变量声明语句。 \n export   let  a  =   10 ; //correct \n\n\n let  b  =   10 ; \n export   default  b ; //correct \n\n export   default   let  c  =   5 ; //error \n \n 1 2 3 4 5 6 7 #  esm模块导入 \n import是静态执行的，因此不能使用表达式和变量。 \n import导入模块也可以用as关键字对导入的变量重命名。 \n import 引入 cjs模块 \n Node采用cjs模块格式，模块的输出都定义在module.exports属性上面。在node环境中，使用import命令加载cjs模块，node会自动将module.exports属性当作模块的默认输出，即等同于export default。 \n //addSum.js \nmodule . exports  =   { \n    name :   'yoha' , \n     add ( a , b )   { \n         return  a  +  b ; \n     } \n } \n\n //index.js \n import  customName  from   './addSum.js' \n //也可以是 import {default as customName} from './addSum.js'; \nconsole . log ( customName ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 输出为下图： \n \n 如果采用整体输入的写法，import * as customName from './addSum.js',default会取代module.exports作为输入的接口。 \n import   *   as  customName  from   './addSum.js' \n /*\ncustomName = {\n    get default() { return module.exports; }\n    get name() { return this.default.name }.bind(customName)\n    get add() { return this.default.add }.bind(customName)\n}\n*/ \n \n 1 2 3 4 5 6 7 8 上面的代码中, this.default取代了module.exports属性。 node会自动为customName添加default属性，通过customName.default属性获取module.exports。 \n //a.js \nmodule . exports   =   function   a ( )   { \n     return   10 ; \n } \n\n //b.js \n import  custom  from   './a.js' ; \n custom ( ) ; //10 \n\n //c.js \n import   *   as  custom  from   './a.js' ; \ncustom . default ( ) ; //10 \n custom ( ) ; //throw error: custom is not a function \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 由于esm模块是编译时确定输出接口，cjs模块时运行时确定输出接口，因此采用import命令加载cjs模块时， 不允许 采用下面的写法。 \n import   { readfile }   from   'fs' ; \n \n 1 上面的代码不正确，因为fs时cjs格式，只有在运行时才能确定readfile接口，而import命令要求编译时就确定这个接口。解决办法是改为整体输入。 \n import   *   as  express  from   'express' ; \n const  app  =  express . default ( ) ; \n\n import  express  from   'express' ; \n const  app  =   express ( ) ; \n \n 1 2 3 4 5 #  require 引入 esm模块 \n 采用require命令加载esm时，esm所有输出的接口都会成为输入对象的属性。 \n //addSum.js \n export   let  a  =   100 ; \n export   function   add ( a , b )   { \n     return  a  +  b ; \n } \n export   { add  as  add_bak } ; \n export   default   { \n    name :   'yoha' \n } \n\n //index.js \n let  result  =   require ( './addSum.js' ) ; \nconsole . log ( result ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 输出为下图： \n require.context() 和 require('xx').default \n 到这个地方require('xx').default是什么意思应该很明确了：就是在用require引入ES默认导出模块时需要做的。 \n 下面的重点就是 require.context() 。 \n require.context()是webpack提供的一个方法，可以创建一个特定的上下文，主要用来实现自动化导入模块。可以给这个方法传入四个参数：一个要搜索的目录，一个标记表示是否还搜索其子目录， 以及一个匹配文件的正则表达，还有一个是控制模块的加载方式。 \n \n 传递给require.context()的参数必须是字面量。 \n \n 语法如下： \n require . context ( directory ,  useSubdirectories  =   true ,  regExp  =   / ^\\.\\/.*$ / ,  mode  =   'sync' ) \n \n 1 \n sync 直接打包到当前文件，同步加载并执行 \n lazy 延迟加载会分离出单独的 chunk 文件 \n lazy-once 延迟加载会分离出单独的 chunk 文件，加载过下次再加载直接读取内存里的代码。 \n eager 不会分离出单独的 chunk 文件，但是会返回 promise，只有调用了 promise 才会执行代码，可以理解为先加载了代码，但是我们可以控制延迟执行这部分代码。 \n \n 现在的目录结构是在一个文件夹中有很多图片(png或者svg)，这些图片都需要引进来。 \n let  context  = require.context('./portalImg/static', false, /.(png|svg|gif)$/); 这个函数执行后返回的一个函数 webpackContext ，这个函数接受一个request参数。并且这个函数拥有3个静态属性id、keys、resolve。如下图： \n \n \n id 是context module的模块 id. 它可能在你使用 module.hot.accept 时会用到。 \n keys是一个函数，它返回一个数组，由所有可能被此 context module 处理的request组成。（看例子就会明白） \n resolve是一个函数，它返回 request 被解析后得到的模块 id。 \n \n 有关源码： \n var  map  =   { \n     \"./airbloom.svg\" :   \"./src/assets/icons/airbloom.svg\" , \n     \"./crown.svg\" :   \"./src/assets/icons/crown.svg\" , \n     \"./store.svg\" :   \"./src/assets/icons/store.svg\" , \n     ... \n } ; \n\n\n function   webpackContext ( req )   { \n     var  id  =   webpackContextResolve ( req ) ; \n     return   __webpack_require__ ( id ) ; \n } \n function   webpackContextResolve ( req )   { \n     var  id  =  map [ req ] ; \n     if ( ! ( id  +   1 ) )   {   // check for number or string \n         var  e  =   new   Error ( \"Cannot find module '\"   +  req  +   \"'\" ) ; \n        e . code  =   'MODULE_NOT_FOUND' ; \n         throw  e ; \n     } \n     return  id ; \n } \nwebpackContext . keys   =   function   webpackContextKeys ( )   { \n     return  Object . keys ( map ) ; \n } ; \nwebpackContext . resolve  =  webpackContextResolve ; \nmodule . exports  =  webpackContext ; \nwebpackContext . id  =   \"./packages/@situation/app/portal2/src/views/components/portalImg/static sync \\.(png|svg|gif)$\" ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 执行context.keys()得到： \n \n 执行context.resolve()返回了一个字符串代表着传入参数的文件相对于整个工程的相对路径。 \n \n 并且发现这个路径在require.context()执行后返回的函数webpackContext的作用域链中可以找到，因此大胆推测context.resolve()方法在内部是通过map来返回对应的路径的。并且这个作用域和context module的模块 id关联了起来(不确定这种说法对不对)。 \n \n context 作为一个函数,也接受一个req参数,这个和resolve方法的req参数是一样的,即匹配的文件名的相对路径。context函数返回的是文件打包后的相对路径。 \n \n 我看到有的文章说context()返回的是es模块。我想应该是因为引入的文件是通过export或者export default暴露出去的，或者是采用loader在打包时处理了某种类型的文件。(我再查查0.0) \n 最后 \n 路漫漫其修远兮，吾将上下而求索 \n 参考文章 \n \n require('./expample.js).default详解 \n 阮一峰老师-《ES6标准入门（第三版）》 \n 依赖管理 \n 深入理解webpack的require.context \n \n ",summary:"\n\n之前写了一篇文章——CommonJS 与 ES6 Module的区别,主要写了一下cjs和esm特性的一些区别。\n\n这篇文章的内容是对上一篇的一些补充，和在深入了解cjs和esm收获的一些知识。\n\ncjs模块的导入和导出\n\ncjs模块导出\n\n在cjs中，通过module.exports可以导出模块中的内容，如：\n\nmodule.exports = {\n    name: 'yoha',\n    add: (a, b) => a + b;\n}\n\ncjs模块内部会有一个module对象用于存放当前模块的信息。在每个模块最开始定义了一下对象：\n\nlet module = {\n    export ...",id:"post",pid:"post",readingTime:{text:"4 min read",minutes:3.54,time:212400,words:708}},{title:"域名发散和域名收敛",frontmatter:{title:"域名发散和域名收敛",date:"2020-09-13",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20200913170310.gif",tags:["计算机知识","转载"],meta:[{name:"title",content:"域名发散和域名收敛"},{name:"description",content:"域名发散和域名收敛"},{name:"keywords",content:"域名发散和域名收敛, 域名, DNS解析"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-09-13-domain&DNS.html",relativePath:"_posts/2020-09-13-domain&DNS.md",key:"v-6c5a453c",path:"/2020/09/13/domain-dns/",headers:[{level:2,title:"关于域名",slug:"关于域名"},{level:3,title:"域名结构",slug:"域名结构"},{level:3,title:"域名发散",slug:"域名发散"},{level:3,title:"域名收敛",slug:"域名收敛"},{level:2,title:"http请求过程",slug:"http请求过程"},{level:3,title:"DNS解析",slug:"dns解析"},{level:3,title:"TTL 为何",slug:"ttl-为何"},{level:2,title:"SPDY",slug:"spdy"},{level:2,title:"参考文章",slug:"参考文章"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:' 域名发散和域名收敛 \n 关于域名 \n 百度百科关于域名的概念是： \n \n 域名（英语：Domain Name），又称网域，是由一串用点分隔的名字组成的Internet上某一台计算机或计算机组的名称，用于在数据传输时对计算机的定位标识（有时也指地理位置）。由于IP地址具有不方便记忆并且不能显示地址组织的名称和性质等缺点，人们设计出了域名，并通过 网域名称系统 （DNS，Domain Name System）来将域名和IP地址相互映射，使人更方便地访问互联网，而不用去记住能够被机器直接读取的IP地址数串。 \n \n 全球13组根域名服务器以英文字母A到M依序命名，域名格式为“字母.root-servers.net”。 根域名服务器 （英语：root name server）是互联网域名解析系统（DNS）中最高级别的域名服务器，负责返回 顶级域 的权威域名服务器地址。全部已以任播技术在全球多个地点设立镜像站。 \n 域名结构 \n 域名的结构（或者叫命名空间）是一个树状结构，有树就得有根，这个根是一个点‘.’（dot）。\n以 www.example.com 为例，完整的形式应该是 www.example.com. ，注意最后一个点，就是根结点root ，只不过平时是浏览器或者系统的解析器自动帮我们补全了。 根节点之后就是顶级域名 ，就是 .cn .com .gov 这些，顶级域划分为通用顶级域 （com、org、net 等）和国家与地区顶级域（cn、hk、us、tw 等）。我们可以用dig命令查看一下顶级域名的解析路径，加上 +trace 参数选项，意思是追踪 DNS 解析过程，如下：\n·\n \n 另外，上面两张 dig 命令贴图中间出现了很多次  NS  ，NS 即是 NameServer，大部分情况下又叫权威名称服务器简称权威。\n什么是权威呢，通俗点讲其实是某些域的权威，也就是权威上面有这些域的最新，最全的数据，所有这些域的数据都应该以此为准（只有权威可以增删改这些域的数据），就像上面  dig com +trace 的结果可以看到，com 的权威是上面的 13 个根域。同理，所有的顶级域（cn、org、net 等等）的权威都是根域。 \n 域名又有顶级域名、二级域名、子域名和父域名的概念。 \n \n 顶级域名 \n \n 顶级域（或顶级域名），英语：Top-level domains，first-level domains（TLDs），也翻译为国际顶级域名。是互联网DNS等级之中的最高级的域，它保存于DNS根域的名字空间中。顶级域名是域名的最后一个部分，即是域名最后一点之后的字母，例如在http://example.com这个域名中，顶级域是 .com（或 .COM），大小写视为相同。 \n \n 二级域名 \n \n 除了顶级域名，还有二级域名（SLD，second-level domain），就是最靠近顶级域名左侧的字段。如：http://zh.wikipedia.org中，wikipedia就是二级域名(有资料认为, 在顶级域名后面, 还存在一级域名, 那么zh就是二级域名)。 \n \n 父域名和子域名 \n \n 一个相对概念，很好理解。如 "www.sina.com.cn" 和 "news.sina.com.cn" 都是 sina.com.cn 的子域名（或称为二级域名），sina.com.cn 就是父域名。\n同样，sina.com.cn 其实又可以看作是 .com.cn 的子域名；而 .com.cn 又是 .cn 的一个子域名。 \n 这个图把域名结构展示的比较清晰： \n 域名发散 \n 这个很好理解，PC时代为了突破浏览器的域名并发限制，遵循这样一条定律： http静态资源采用多个子域名 ，目的是充分利用现代浏览器的多进程并发下载能力。由于浏览器的限制，每个浏览器允许对每个域名的连接数一般是有限的，附图一枚： \n \n 上图展示了各浏览器的并行连接数（同域名），可以看到在一些现代浏览器内每个 hostname 的最大连接数基本都是6个，IE 稍显傲娇，总体而言并发数不高。 所以 PC 时代对静态资源优化时，通常将静态资源分布在几个不同域，保证资源最完美地分域名存储，以提供最大并行度，让客户端加载静态资源更为迅速。 \n 另外， 为什么浏览器要做并发限制呢？ \n \n 究其根本原因，在以前，服务器的负载能力差，稍微流量大一点服务器就容易就崩溃。 所以为了保护服务器不被强暴到崩溃，浏览器要对 max connections（最大并发数）进行限制。如果每个用户的最大并发数不限制的话，服务器的负载能力会大幅下降。 \n 另外还有一个方面就是, 防止 DDOS 攻击。最基本的 DoS 攻击就是利用合理的服务请求来占用过多的服务资源，从而使合法用户无法得到服务的响应。 \n 域名收敛 \n 顾名思义，域名收敛的意思就是建议将静态资源只放在一个域名下面，而非域名发散情况下的多个域名下。上面也说到了，域名发散可以突破浏览器的域名并发限制，那么为要反其道而行之呢？因为因地制宜，不同情况区别对待， 域名发散是PC时代的产物，而现在进入移动互联网时代，通过无线设备访问网站，App的用户已占据了很大一部分比重，而域名发散正是在这种情况下提出的。 \n http请求过程 \n \n DNS域名解析 \n 发起TCP的3次握手 \n 建立TCP连接后发起http请求 \n 服务器响应http请求 \n ... \n \n 在这里第一步，也是关键的第一步DNS解析， 在移动端的http请求耗时中，DNS解析占据了大部分时间 。 \n DNS解析 \n 一个完整的DNS解析过程如下： \n \n 首先拿到URL后，浏览器会寻找本地的DNS缓存，看看是否有对应的IP的地址，如果缓存中存在那就好啦；如果不存在，那就要想DNS server发送一个请求，找到你想要的IP地址。 \n 首先他会向你的ISP（互联网服务提供商）相关的DNS server发送DNS query。然后这些DNS进行递归查询（recursive）。所谓的递归查询就是说能够直接返回对应的IP地址，而不是其他的DNS server地址。 \n 如果上述的DNS server没有你要的域名地址，则会发送迭代查询，即会先从root nameserver找起。即假如你要查询 www.example.com.,会先从包含根节点的13台最高级域名服务器开始。 \n 接着，以从右向左的方式递进，找到com.，然后向包含com的TLD（顶级域名）nameserver发送DNS请求。接着找到包含example的DNS server。 \n 现在进入到了example.com部分，即现在正在查询的是权威服务器，该服务器里面包含了你想要的域名信息，也就是拿到了最后的结果record。 \n 递归查询的DNS server接收到这record之后，会将record保存一份到本地。如果下一次再请求这个domain时，就可以直接返回这个record。由于每条记录都会存在TLL，所以Server每隔一段时间都会发送一次请求，获取新的record。 \n 最后，再经由最近的DNS server将该条record返回。同样，你的设备也会存一份该record的副本。之后，就是TCP的事情了。下面是一张简化图： \n \n \n 大致流程是：.=>com.=>example.com.=>www.example.com.=>IP adress \n TTL 为何 \n TTL是Time to Live的缩写，也就是生存时间值，表示DNS记录在DNS服务器上缓存的时间。 \n 引用一个百度百科的 例子 ： \n \n 假设，有这样一个域名myhost.baiwan-han.com（其实，这就是一条DNS记录，通常表示在baiwan-han.com域中有一台名为myhost的主机）对应IP地址为1.1.1.1，它的TTL为10分钟。这个域名或称这条记录存储在一台名为-ns.baiwan-han.com的DNS服务器上。此时如果有一个用户在浏览器中输入以下地址（又称URL）：myhost.baiwan-han.com 那么会发生些什么呢？ \n \n \n 该访问者指定的DNS服务器（或是他的ISP，互联网服务商，动态分配给他的)8.8.\\8.8就会试图为他解释myhost.baiwan-han.com，当然8.8.8.8这台DNS服务器由于没有包含myhost.baiwan-han.com这条信息，因此无法立即解析，但是通过全球DNS的递归查询后，最终定位到-ns.baiwan-han.com这台DNS服务器，-ns.baiwan-han.com这台DNS服务器将myhost.baiwan-han.com对应的IP地址1.1.1.1告诉8.8.8.8这台DNS服务器，然有再由8.8.8.8告诉用户结果。8.8.8.8为了以后加快对myhost.baiwan-han.com这条记录的解析，就将刚才的1.1.1.1结果保留一段时间，这就是TTL时间，在这段时间内如果用户又有对myhost.baiwan-han.com这条记录的解析请求，它就直接告诉用户1.1.1.1，当TTL到期则又会重复上面的过程。 \n \n 扯了这么多http请求，DNS解析,回到正题域名收敛上，从上面可以看到，DNS解析其实是一个很复杂的过程，在PC上，我们采用域名发散策略，是因为在PC端上，DNS解析通常而言只需要几十ms，可以接受。而移动端，2G网络，3G网络，4G网络/wifi强网，而且移动4G容易在信号不理想的地段降级成2G，通过大量的数据采集和真实网络抓包分析（存在DNS解析的请求），DNS的消耗相当可观，2G网络大量5-10s，3G网络平均也要3-5s（数据来源于淘宝）。下面附上在 2G，3G，4G， WIFI 情况下 DNS 递归解析的时间 （ms）： \n \n 因为在增加域的同时，往往会给浏览器带来DNS解析的开销。所以在这种情况下，提出了域名收敛，减少域名数量可以降低 DNS 解析的成本。 \n 下图是手机端页面加载数和域名分散数的关系（from Mobify Developer）: \n \n 在 2 个域名分散条件下，网页的加载速度提升较大，而第3个以后就比较慢了。所以，一般来说，域名分散的数量最好在 3 以下。 \n SPDY \n 单纯的在移动端采用域名收敛并不能很大幅度的提升性能，很重要的一点是， 在移动端建连的消耗非常大，而SPDY协议可以完成多路复用的加密全双工通道，显著提升非wifi环境下的网络体验。 \n 俗话说，好刀配好鞘，好马配好鞍，当域名收敛配合SPDY才能最大程度发挥他们的效用，达到事半功倍。 \n \n 非原文：关于SPDY之后会在学习记录HTTP/2的时候详细说明。（这是一个flag=0.0） \n \n \n 对所参考文章的作者表示感谢！！ \n 参考文章 \n \n [前端性能]浅谈域名发散与域名收敛 \n 3分钟弄明白顶级域名|二级域名|子域名|父域名的区别 \n \n ',summary:"\n关于域名\n\n百度百科关于域名的概念是：\n\n>域名（英语：Domain Name），又称网域，是由一串用点分隔的名字组成的Internet上某一台计算机或计算机组的名称，用于在数据传输时对计算机的定位标识（有时也指地理位置）。由于IP地址具有不方便记忆并且不能显示地址组织的名称和性质等缺点，人们设计出了域名，并通过网域名称系统（DNS，Domain Name System）来将域名和IP地址相互映射，使人更方便地访问互联网，而不用去记住能够被机器直接读取的IP地址数串。\n\n全球13组根域名服务器以英文字母A到M依序命名，域名格式为“字母\\.root-servers\\.net”。根域名服务器（英 ...",id:"post",pid:"post",readingTime:{text:"1 min read",minutes:.995,time:59700,words:199}},{title:"高性能JavaScript——第二章",frontmatter:{title:"高性能JavaScript——第二章",description:"DOM编程",date:"2020-09-22",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqs/blogImage/raw/master/blogImage/20200828171746.jpeg",tags:["读书笔记","JavaScript"],meta:[{name:"title",content:"高性能JavaScript——第二章"},{name:"description",content:"数据存取"},{name:"keywords",content:"数据存取, 高性能JavaScript"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-09-22-dataAccess.html",relativePath:"_posts/2020-09-22-dataAccess.md",key:"v-1368c2d0",path:"/2020/09/22/dataaccess/",headers:[{level:2,title:"管理作用域",slug:"管理作用域"},{level:2,title:"标识符的解析性能",slug:"标识符的解析性能"},{level:2,title:"改变作用域链",slug:"改变作用域链"},{level:2,title:"闭包、作用域和内存",slug:"闭包、作用域和内存"},{level:2,title:"原型",slug:"原型"},{level:2,title:"原型链",slug:"原型链"},{level:2,title:"嵌套成员",slug:"嵌套成员"},{level:2,title:"缓存对象成员值",slug:"缓存对象成员值"},{level:2,title:"总结",slug:"总结"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" 第二章 数据存取 \n 计算机科学中有一个经典的问题是通过改变数据的存储位置来获得最佳的读写性能，数据的存储位置关系到代码执行过程过程中数据的检索速度。 \n 通常的建议是，如果在乎运行速度，那么尽量使用字面量和局部变量，减少数组项和对象成员的访问。为此有几种模式来定位和规避问题，以及优化代码。 \n 管理作用域 \n 作用域对JavaScript有许多影响，从确定哪些变量可以被函数访问，到却确定this的赋值。JavaScript作用域同样关系到性能，要理解速度和作用域的关系，首先要正确的理解作用域的工作原理。 \n 每一个JavaScript函数都可以表示为一个对象，更确切地说，是Function对象的一个实例。 \n \n 在这仔细说一下（非书中内容）： \n 其实一个普通的函数，就是通过new Function()来创建的。 \n function   fn ( x ,  y )   { \n     return  x  +  y ; \n } \n\n let  fn1  =   new   Function ( 'x' ,   'y' ,   'return x + y;' ) ; \n \n 1 2 3 4 5 因此function是一个对象，并且fn.__proto__ === Function.prototype \n \n 进一步深入：Function也是一个构造函数，因此是Function自己创造了自己。于是有： \n Function.__proto__ === Function.prototype \n \n 这个时候必上一张图： \n \n 这个图是真滴nice！！！ \n \n Function对象同其他对象一样，拥有可以编程访问的属性，和一系列不能通过代码访问而仅供JavaScript引擎存取的内部属性。其中有一个内部属性[[Scope]]。 \n 内部属性[[Scope]]包含了一个函数被创建的作用域中对象的集合。 这个集合被称为作用域链 ，它决定哪些数据能被函数访问 。函数作用域中的每个对象被称为一个可变对象，每个可变对象都以“键值对”的形式存在。当一个函数创建后，它的作用域链会被创建此函数的作用域中可访问的数据对象所填充。例如，思考下面的的全局函数： \n function   add ( num1 ,  num2 )   { \n     debugger \n     let  sum  =  num1  +  num2 ; \n     return  sum ; \n } \n \n 1 2 3 4 5 当函数add()创建时，它的作用域链中就插入了一个对象变量，这个全局对象代表着在全局范围内定义的变量。该全局对象中包含诸如window、navigator和document等。 \n \n 真想说一句:禁止套娃0.0 \n 再画一个简单的示意图: \n \n 函数add的作用域将会在执行时用到。假设执行下面的代码 \n add ( 5 , 10 ) ; \n \n 1 执行此函数时会创建一个称为 执行环境 (execution context,也可以称为执行上下文)的 内部对象 。一个执行环境定义了一个函数执行时的环境。函数每次执行时对应的执行环境都是独一无二的，所以多次调用同一个函数就会导致创建多个执行环境。当函数执行完毕，执行环境就会被销毁。 \n 每个执行环境都有自己的作用域 ，用于解析标识符。当执行环境被创建时，它的作用域链初始化为当前运行函数的[[Scope]]属性中的对象。这些值按照它们出现在 函数中 的顺序，被复制到执行环境的作用域链中。这个过程一旦完成，一个被称为“ 活动对象 (activation object)”的新对象就为执行环境创建好了。 \n 简单的示意图如下： \n \n 活动对象作为函数运行时的变量对象，包含了所有局部变量、命名参数、参数集合以及this。 然后此对象被推入作用域链的最前端 。当执行环境被销毁，活动对象也随之销毁。 \n \n 在执行这样一段代码： \n function   add ( num1 ,  num2 )   { \n     let  sum  =  num1  +  num2 ; \n     function   add2 ( num3 ,  num4 )   { \n         debugger \n         return  num3  *   2   +  num4  +  sum ; \n     } \n     let  sum2  =   add2 ( sum ,   66 ) ; \n     return  sum2 ; \n } \n\n add ( 5 ,   10 ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 \n 如上图，在调用add函数时，创建了一个执行环境，这个执行环境的作用域链初始化为当前运行函数add的[[Scope]]属性中的对象。然后再看一下，执行add2这个函数时所创建的执行环境，add2的执行环境被创建时也同样有自己的作用域，也同样把执行环境的作用域链初始化为当前运行函数add2的[[Scope]]属性中的对象。 \n \n 在函数的执行过程中，每遇到一个变量，都会经历一次标识符解析过程以决定从哪里获取或存储数据。该过程搜索执行环境的作用域链，查找同名的标识符。搜索过程从作用域链头部开始，也就是当前运行函数的 活动对象 。如果找到，就会使用这个标识符对应的变量；如果没找到，继续搜索作用域链中的下一个对象。搜索过程会持续进行，直到找到标识符，若无法搜索到匹配的对象，那么标识符视为未定义。在函数执行过程中，每个标识符都要经历这样的搜索过程。在前面的代码示例中，函数访问sum、num1、num2时都会产生搜索过程，正是这个过程影响了性能。 \n \n 如果名字相同的两个变量存在于作用于链的不同部分，那么标识符就是遍历作用域时最先找到的那个，也可以说，第一个变量遮蔽(shadow)了第二个。 \n 标识符的解析性能 \n 标识符的解析是由代价的，在执行环境的作用域链中，一个标识符所在的位置越深，它的读写速度也就越慢。全局变量总处于作用域链的最末端。也就是说，要尽可能的使用局部变量。 \n 举个例子： \n function   initUI ( )   { \n     let  bd  =  document . body , \n        links  =  document . getElementsByTagName ( 'a' ) , \n        i  =   0 , \n        len  =  links . length ; \n        \n     while ( i  <  len )   { \n         update ( links [ i ++ ] ) ; \n     } \n    \n    document . getElementById ( 'g0-btn' ) . onclick   =   function ( )   { \n         start ( ) \n     } \n    \n    bd . className  =   'active' ; \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 这个函数引用了三次document,而document是个全局对象。可以优化一下, 把document对象的引用存储到局部变量doc中 。 \n ... \n let  doc  =  document , \n    bd  =  doc . body , \n    links  =  doc . getElementsByTagName ( 'a' ) , \n    i  =   0 , \n    len  =  links . length ; \n ... \n \n 1 2 3 4 5 6 7 #  改变作用域链 \n 一般来说，一个执行环境的作用域链是不会改变的，但是有两个语句可以在执行时临时改变作用域链。第一个是with语句。 \n function   initUI ( )   { \n     with ( document )   { \n         let  bd  =  body , \n            links  =   getElementsByTagName ( 'a' ) , \n     ... \n     } \n } \n \n 1 2 3 4 5 6 7 这样看来确实避免了多次写document，看上去更高效。而实际上产生了一个性能问题。 当代吗执行到with语句时，执行环境的作用域链临时被改变了。一个新的对象被创建，它包含参数指定的对象的所有属性。这个对象被推入作用域的首位，这就意味着函数的所有局部变量现在处于第二个作用域链对象中。因此访问的代价更高啦。 \n 第二个语句是try-catch语句的catch字句也具有同样的效果。当try代码块中发生错误，执行过程会自动跳转到catch子句，然后把异常对象推入一个变量对象并置于作用域的首位。在catch代码块内部，函数所有局部变量将会放在第二个作用域链对象中。 \n \n 注意：一旦catch子句执行完毕，作用域链就会返回到之前的状态。 \n \n 一般推荐尽量简化代码使得catch子句对性能的影响最小。推荐的做法是将错误委托给一个函数来处理。 \n 闭包、作用域和内存 \n 闭包是JavaScript最强大的特性之一，它允许函数访问局部作用域之外的数据。然而，闭包的使用可能会导致性能问题。 \n \n 闭包指的是那些引用了另一个函数作用域中变量的函数。 \n \n function   assignEvents ( )   { \n     let  id  =   'xdi9592' ; \n    \n    document . getElementById ( 'save-btn' ) . onclick   =   function ( event )   { \n         saveDocument ( id ) ; \n     } \n } \n \n 1 2 3 4 5 6 7 这个事件处理函数就是闭包， 它在assignEvents函数执行时创建 ，并且能够访问所属作用域的id变量。为了让这个闭包访问id，必须创建一个特定的作用域。 \n 当assignEvents()函数执行时，一个包含了id以及其他数据的活动对象被创建。它成为执行环境作用域链中的第一个对象，全局对象紧随其后。 当闭包被创建时，它的[[Scope]]属性倍初始化为这些对象 。如下图： \n \n 通常来说，函数的活动对象在函数执行完后，随着执行环境一同销毁。但是引入闭包后，由于闭包的[[Scope]]属性包含了与执行环境作用域链相同的对象引用，会导致函数的活动队对象无法被销毁。 \n 当闭包代码执行时，会创建一个执行环境，它的作用域链与属性[[Scope]]中所引用的两个相同的作用域链对象一起被初始化，然后一个活动对象为闭包自身所创建。 \n \n \n 在闭包中用到两个标识符id和saveDocument，它们的位置在作用域链的第一个对象之后，这就会导致频繁访问跨作用域的标识符，每次访问都会带来性能问题。解决办法在之前提到过：把需要频繁访问的跨作用域的变量存储在局部变量中，然后直接访问局部变量。 \n 原型 \n 之前说到，访问对象内的成员的速度比访问字面量或者变量要慢。为了理解其原因，首先要理解JavaScript中对象的本质。javascript中的对象是基于原型的（可以看一下我说nice的那张图）。 \n 因此，对象中可以存在两种成员类型：实例成员和原型成员，实例成员直接存在于对象实例中，原型成员则从对象原型继承过来。 \n let  book  =   { \n    title :   \"High Performance JavaScript\" , \n    publisher :   \"Yahoo! Press\" \n } ; \nconsole . dir ( book . toString ( ) ) ; //\"[object Object]\" \n \n 1 2 3 4 5 这段代码中，对象book有两个实例成员：title、publisher。但其中并没有定于toString()方法，但方法可以顺利执行。这是因为toString()方法是有book对象从Object原型继承而来。 \n \n book.__proto__ === Object.prototype; \n \n \n 当book.toString()被调用时，会从对象实例中开始搜索名为\"toString\"的成员。如果在book中找不到toString的成员，那会继续搜索其原型对象，直到toString方法被找到并执行。 \n 可以用hasOwnProperty()方法来判断对象是否包含特定的成员。要确定对象是否可以访问到特定的属性，可以使用in操作符。in操作符会在原型链上搜索。 \n book . hasOwnProperty ( 'title' ) ; //true \nbook . hasOwnProperty ( 'toString' ) ; //false \n\nObject . hasOwnProperty ( 'toString' ) ; //true \n\nconsole . log ( 'title'   in  book ) ; //true \nconsole . log ( 'toString'   in  book ) ; //true \n \n 1 2 3 4 5 6 7 #  原型链 \n 对象在原型链中的位置越深，找到它也就越慢。每深入一层原型链都会增加性能损失。搜索实例成员比从字面量或者局部变量中读取数据代价更大，再加上遍历原型链带来的开销，这让性能问题更加严重。 \n 嵌套成员 \n 由于对象成员可能包含其他成员，例如不太常见的写法：window.location.href。每次遇到点操作符，嵌套成员会导致JavaScript引擎搜索所有对象成员。对象成员嵌套越深，读取速度也就越慢。执行location.href总是比window.location.href要快。 \n 如果这些属性不是实例属性，那么成员解析还要遍历原型链，这会花更多的时间。 \n 缓存对象成员值 \n 由于所有类似的性能问题都与对象成员有关，因此因该尽可能的避免使用他们。更确切的说，只在必要的时候使用对象成员。 比如，在同一个函数中没有必要多次读取同一个对象成员。 \n function   hasEitherClass ( element ,  className1 ,  className2 )   { \n     return  element . className  ==  className1  ||  element . className  ==  className2 ; \n } \n \n 1 2 3 上面这段代码中，element.className被读取了两次。很显然，在该函数语句中它的值并未改变，却执行了两次对象成员查找。可以把值保存在局部变量中来减少一次查找。 \n function   hasEitherClass ( element ,  className1 ,  className2 )   { \n     let  currentClassName  =  element . className ; \n     return  currentClassName  ==  className1  ||  currentClassName  ==  className2 ; \n } \n \n 1 2 3 4 \n 注：这种优化方法并不推荐用于对象的成员方法。因为许多对象方法使用this来判断执行环境，把一个对象方法保存在局部变量导致this绑定到window，而this值的改变会使得JavaScript引擎无法正确解析它的对象成员，进而导致程序出错。 \n 总结 \n \n 访问字面量和局部变量的速度最快，相反，访问数组元素和对象成员相对较慢。 \n 由于局部变量存在于作用域链的起始位置，因此访问局部变量比访问跨作用域变量更快。变量在作用域链中的位置越深，访问所需时间越长。由于全局变量总处于作用域链的最末端，因此访问速度也是最慢的。 \n 避免使用with语句，因为它会改变执行环境作用域链。同样tyr-catch语句的catch子语句也有同样的影响，因此要小心使用。 \n 嵌套的对象成员会明显影响性能。 \n 属性或方法在原型链中的位置越深，访问它的速度越慢。 \n 通常来说，可以通过把常用的对象成员、数组元素、跨作用域变量保存在局部变量中来改善JavaScript性能，因为局部变量的访问速度最快。 \n \n ",summary:"\n\n计算机科学中有一个经典的问题是通过改变数据的存储位置来获得最佳的读写性能，数据的存储位置关系到代码执行过程过程中数据的检索速度。\n\n通常的建议是，如果在乎运行速度，那么尽量使用字面量和局部变量，减少数组项和对象成员的访问。为此有几种模式来定位和规避问题，以及优化代码。\n\n管理作用域\n\n作用域对JavaScript有许多影响，从确定哪些变量可以被函数访问，到却确定this的赋值。JavaScript作用域同样关系到性能，要理解速度和作用域的关系，首先要正确的理解作用域的工作原理。\n\n每一个JavaScript函数都可以表示为一个对象，更确切地说，是Function对象的一个实例。\n\n在这仔细 ...",id:"post",pid:"post",readingTime:{text:"2 min read",minutes:1.69,time:101399.99999999999,words:338}},{title:"高性能JavaScript——第三章",frontmatter:{title:"高性能JavaScript——第三章",description:"DOM编程",date:"2020-10-01",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201004184833.jpg",tags:["读书笔记","JavaScript"],meta:[{name:"title",content:"高性能JavaScript——第三章"},{name:"description",content:"DOM编程"},{name:"keywords",content:"DOM编程, 高性能JavaScript"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-10-01-DOM.html",relativePath:"_posts/2020-10-01-DOM.md",key:"v-7fadf5fe",path:"/2020/10/01/dom/",headers:[{level:2,title:"浏览器中的DOM",slug:"浏览器中的dom"},{level:2,title:"节点克隆",slug:"节点克隆"},{level:2,title:"HTML集合",slug:"html集合"},{level:2,title:"选择器API",slug:"选择器api"},{level:2,title:"重绘与重排",slug:"重绘与重排"},{level:3,title:"重排何时发生",slug:"重排何时发生"},{level:3,title:"渲染树变化的排队与刷新",slug:"渲染树变化的排队与刷新"},{level:3,title:"最小化重绘和重排",slug:"最小化重绘和重排"},{level:3,title:"批量修改DOM",slug:"批量修改dom"},{level:2,title:"事件委托",slug:"事件委托"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" DOM编程 \n 浏览器中的DOM \n 尽管DOM是个与语言无关的API，他在浏览器中的接口却是用javascript实现的。浏览器中通常会把DOM和JavaScript独立实现。两个相互独立的功能只要通过接口连接，就会产生消耗。有个比喻：把DOM和JavaScript(这里指ECMAScript)各自想像为一个岛屿，他们之间用收费桥梁连接。ECMAScript每次访问DOM都要途径这座桥，并缴纳“过桥费”。访问DOM的次数越多，费用也就越高。 \n 看看下面的例子就很明显了： \n console . time ( 'dom' ) ; \n ( function ( )   { \n     for ( let  i  =   0 ;  i  <   15000 ;  i ++ )   { \n        document . getElementById ( 'test' ) . innerHTML  +=   'a' ; \n     } \n } ) ( ) \nconsole . timeEnd ( 'dom' ) ; \n\nconsole . time ( 'dom1' ) ; \n ( function ( )   { \n     let  content  =   '' ; \n     for ( let  i  =   0 ;  i  <   15000 ;  i ++ )   { \n        content  +=   'a' ; \n     } \n    document . getElementById ( 'test' ) . innerHTML  +=  content ; \n } ) ( ) \nconsole . timeEnd ( 'dom1' ) ;  \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 \n 由上图可知，访问DOM的次数越多，代码运行的速度越慢。因此，通用的经验法则是：减少DOM的次数，把运算尽量留在ECMAScript这一端处理。 \n 节点克隆 \n 使用DOM方法更新页面内容的另一个途径是克隆已有元素，而不是创建新元素。也就是说使用element.cloneNode()来代替document.createElement()。在大多数浏览器中节点克隆更有效率，但也不是特别明显。 \n HTML集合 \n HTML集合是包含了DOM节点引用的类数组对象。以下方法的返回值就是一个集合(HTMLCollection)： \n document . getElementById ( ) ; \ndocument . getElementsByClassName ( ) ; \ndocument . getElementsByTagName ( ) ; \n \n 1 2 3 下面的属性同样返回HTML集合： \n \n document.images:页面中所有img元素 \n document.links:页面中所有a元素 \n document.forms:页面中所有表单元素 \n \n HTML集合以一种“假定实时态”实时存在，这意味着当底层文档对象更新时，它也会自动更新。事实上，HTML集合一直与文档保持着连接，每次你需要最新的信息时，都会重复执行查询过程，哪怕只是获取集合里的元素个数（即访问集合的length属性）。这正是低效之源。 \n 考虑下面这段代码： \n let  allDivs  =  document . getElementsByTagName ( 'div' ) ; \n for ( let  i  =   0 ;  i  <  allDivs . length ;  i ++ )   { \n    document . body . appendChild ( document . createElement ( 'div' ) ) ; \n } \n \n 1 2 3 4 这段代码看上去只是简单地把页面中div元素的数量翻倍。它遍历现有的div元素，每次创建一个新的div并添加到body中。但事实上，这时一个 死循环 ，因为循环的退出条件allDivs.length在每次迭代时都会增加， 它反映出的是底层文档的当前状态 。 \n 像这样遍历HTML集合可能会导致错误，而且也很慢，因为每次迭代都执行查询操作。读取一个集合的length属性要比读取普通数组的length要慢很多。可以利用Array.from()方法把类数组对象转为数组。 \n 一般来说，对于任何类型的DOM访问，需要多次访问同一个DOM属性或方法需要多次访问时，最好使用一个局部变量缓存此成员。当遍历一个集合时，第一优化原则时把集合存储在局部变量中，并且把length属性缓存在集合外。然后，使用局部变量替代这些需要多次读取的元素。 \n 选择器API \n querySelectorAll()返回值是一个静态列表。如果使用document.getElementsByClassName()等方法返回HTMLCollection，需要把它转为数组才能得到与querySelectorAll()返回值类似的静态列表。 \n 如果需要大量组合查询，使用querySelectorAll()会更有效率。 \n 比如，页面中有一些class为“warning”的div元素和一些class为“notice”的div元素，如果同时得到它们的列表，建议使用querySelectorAll(): \n let errs = document.querySelectorAll('div.warning, div.notice'); \n 如果不使用querySelectorAll，要获得相同的结果则复杂的多。其中一种做法是选择所有div元素，遍历剔除不符合条件的部分。 \n let  errs  =   [ ] , \n    divs  =  document . getElementsByTagName ( 'div' ) , \n    className  =   '' ; \n for ( let  i  =   0 ;  i  <  divs . length ;  i ++ )   { \n    className  =  divs [ i ] . className ; \n     if ( className  ===   'warning'   ||  className  ===   'notice' )   { \n        errs . push ( divs [ i ] ) ; \n     } \n } \n \n 1 2 3 4 5 6 7 8 9 #  重绘与重排 \n webkit内核浏览器渲染过程： \n \n 浏览器内核拿到内容以后，渲染的大致步骤可以分为： \n \n 解析HTML，构建DOM树 \n 解析CSS，构建CSS规则树 \n 合并DOM树和CSS规则树，生成render树 \n 布局render树(layout/reflow),负责各元素尺寸、位置的计算 \n 绘制render树(paint)，绘制页面像素信息 \n 浏览器将各层信息发送给GPU，GPU会将各层合成(composite),显示在屏幕上。 \n \n 当通过js动态的修改了DOM或CSS，会导致重排或者重绘。当DOM的变化影响了元素的几何属性（宽和高）——比如改变边框宽度或给段落增加文字，导致行数增加——浏览器需要重新计算元素的集合属性，同样其他元素的几何属性和位置也会因此受到影响。浏览器会使渲染树中受到影响的部分失效，并重新构造渲染树。这个过程称为“重排（reflow）”。完成重排后浏览器会重新绘制受影响的部分到屏幕中，这个过程称为“重绘（repaint）”。 \n 并不是所有的DOM变化都会影响几何属性。例如，改变一个元素的背景色并不会影响它的宽和高。这种情况下，只会发生一次“重绘”。因为元素的布局没有改变。 \n \n 重排一定导致重绘，但是重绘不一定导致重排。 \n 重排何时发生 \n 下列情况中会发生重排： \n \n 添加或删除可见的DOM元素 \n 元素位置改变 \n 元素尺寸改变（包括：内外边距、边框宽度、宽度、高度等属性改变） \n 内容改变，例如：文本改变或图片被另一个不同尺寸的图片代替 \n 页面渲染器初始化 \n 浏览器窗口尺寸改变 \n \n 有些改变会触发整个页面的重排：例如，当滚动条出现时。 \n 渲染树变化的排队与刷新 \n 由于每次重排都会产生计算消耗， 大多数浏览器通过队列化修改并批量执行来优化重排过程 。然而，经常不知不觉强制刷新队列并要求计划任务立即执行。获取布局信息的操作会导致队列刷新，比如以下方法： \n \n offsetTop, offsetLeft, offsetWidth, offsetHeight \n scrollTop, scrollLeft, scrollWidth, scrollHeight \n clientTop, clientLeft, clientWidth, clientHeight \n getComputedStyle() (currentStyle in IE) \n \n \n window.getComputedStyle() 等价于 document.defaultView.getComputedStyle() \n \n 以上属性和方法需要返回最新的布局信息，因此浏览器不得不执行渲染队列中的“待处理变化”并触发重排以返回正确的信息。在修改样式的过程中，最好避免使用上面的属性。他们会刷新队列，即使在获取最近未发生变化的或与最新改变无关的布局信息。 \n 最小化重绘和重排 \n 重绘和重排的代价可能非常昂贵，因此一个好的提高程序的响应速度的策略就是减少此类操作的发生，合并多次对DOM和样式的修改，然后一次处理掉。 \n 考虑这个例子： \n let  el  =  document . getElementById ( 'mydiv' ) ; \nel . style . borderLeft  =   '1px' ; \nel . style . borderRight  =   '2px' ; \nel . style . padding  =   '5px' ; \n \n 1 2 3 4 示例中有三个样式属性被改动，每一个都会影响元素的几何结构。 \n 使用cssText属性可以实现同样的效果并且效率更高： \n let  el  =  document . getElementById ( 'mydiv' ) ; \nel . style . cssText  =   'border-left: 1px; border-right: 2px; padding: 5px' ; \n \n 1 2 例子中的代码修改cssText属性并覆盖了已存在的样式信息，因此如果想保留现有样式，可以把它附加在cssText字符串的后面： \n el . style . cssText  +=   '; border-left: 1px' ; \n \n 1 #  批量修改DOM \n 当需要对DOM元素进行一系列操作时，可以通过以下步骤来减少重绘和重排的次数： \n \n 使元素脱离文档流 \n 对其应用多重改变 \n 把元素带回文档 \n \n 该过程里会触发两次重排——第一步和第三步。如果忽略这两个步骤，那么在第二步所产生的任何修改都会触发一次重排。 \n 有三种基本方法可以使DOM脱离文档： \n \n 隐藏元素，应用修改，重新显示 \n \n let  ul  =  document . getElementById ( 'mylist' ) ; \nul . style . display  =   'none' ; \n appendDataToElement ( ul ,  data ) ; \nul . style . diaplay  =   'block' ; \n \n 1 2 3 4 \n 使用文档片段(document fragment)在当前DOM之外构建一个子树，再把它拷贝到文档。（推荐） \n \n const  list  =  document . querySelector ( '#list' ) ; \n const  fruits  =   [ 'Apple' ,   'Orange' ,   'Banana' ,   'Melon' ] ; \n\n const  fragment  =  document . createDocumentFragment ( ) ; \n\nfruits . forEach ( fruit   =>   { \n   const  li  =  document . createElement ( 'li' ) ; \n  li . innerHTML  =  fruit ; \n  fragment . appendChild ( li ) ; \n } ) ; \n\nlist . appendChild ( fragment ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 \n 将原始元素拷贝到一个脱离文档的节点中，修改副本，然后替换原始元素。 \n \n let  old  =  document . getElementById ( 'mylist' ) ; \n let  clone  =  old . cloneNode ( true ) ; \n appendDataToElement ( clone ,  data ) ; \nold . parentNode . replace ( clone ,  old ) ; \n \n 1 2 3 4 #  事件委托 \n 当页面中存在大量元素，而且每一个都要一次或者多次绑定事件处理器(比如onclick)时，这种情况可能会影响性能。每绑定一个事件处理器都是有代价的，要么加重了页面负担，要么增加了运行期的执行时间。 \n 一个简单而优雅的处理DOM事件的技术是 事件委托 。它是基于这样一个事实：时间逐层冒泡并能被父元素捕获。使用事件代理，只需要给最外层元素绑定一个处理器，就可以处理在其子元素上触发的所有事件。 \n 每个事件都要经历3个阶段： \n \n 捕获 \n 到达目标 \n 冒泡 \n \n 事件委托利用了事件冒泡，可以只使用一个事件处理程序来管理一种类型的事件。 \n ",summary:"\n浏览器中的DOM\n\n尽管DOM是个与语言无关的API，他在浏览器中的接口却是用javascript实现的。浏览器中通常会把DOM和JavaScript独立实现。两个相互独立的功能只要通过接口连接，就会产生消耗。有个比喻：把DOM和JavaScript(这里指ECMAScript)各自想像为一个岛屿，他们之间用收费桥梁连接。ECMAScript每次访问DOM都要途径这座桥，并缴纳“过桥费”。访问DOM的次数越多，费用也就越高。\n\n看看下面的例子就很明显了：\n\nconsole.time('dom');\n(function() {\n    for(let i = 0; i 重排一定导致重绘，但是重 ...",id:"post",pid:"post",readingTime:{text:"2 min read",minutes:1.675,time:100500,words:335}},{title:"Chrome浏览器架构",frontmatter:{title:"Chrome浏览器架构",description:"DOM编程",date:"2020-10-12",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201008220027.png",tags:["转载"],meta:[{name:"title",content:"Chrome浏览器架构"},{name:"description",content:"Chrome浏览器架构"},{name:"keywords",content:"Chrome浏览器架构"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-10-12-ChromeStructure.html",relativePath:"_posts/2020-10-12-ChromeStructure.md",key:"v-b16522c4",path:"/2020/10/12/chromestructure/",headers:[{level:2,title:"背景",slug:"背景"},{level:2,title:"CPU与GPU",slug:"cpu与gpu"},{level:3,title:"CPU",slug:"cpu"},{level:3,title:"GPU",slug:"gpu"},{level:2,title:"计算机架构",slug:"计算机架构"},{level:3,title:"进程与线程",slug:"进程与线程"},{level:3,title:"进程间通信(IPC)",slug:"进程间通信-ipc"},{level:2,title:"浏览器架构",slug:"浏览器架构"},{level:3,title:"进程工作内容",slug:"进程工作内容"},{level:3,title:"多进程架构的好处",slug:"多进程架构的好处"},{level:3,title:"面向服务的架构",slug:"面向服务的架构"},{level:3,title:"基于站点隔离的渲染进程",slug:"基于站点隔离的渲染进程"},{level:3,title:"浏览器进程",slug:"浏览器进程"},{level:3,title:"一次访问",slug:"一次访问"},{level:3,title:"访问不同的站点",slug:"访问不同的站点"},{level:3,title:"Service Worker",slug:"service-worker"},{level:3,title:"访问预加载",slug:"访问预加载"},{level:3,title:"渲染进程负责页面的内容",slug:"渲染进程负责页面的内容"},{level:2,title:"解析过程",slug:"解析过程"},{level:3,title:"DOM的创建",slug:"dom的创建"},{level:3,title:"额外的资源加载",slug:"额外的资源加载"},{level:3,title:"JavaScript会阻塞转化过程",slug:"javascript会阻塞转化过程"},{level:3,title:"告诉浏览器如何加载资源",slug:"告诉浏览器如何加载资源"},{level:2,title:"样式计算（Style calculation）",slug:"样式计算-style-calculation"},{level:3,title:"布局",slug:"布局"},{level:3,title:"绘制",slug:"绘制"},{level:3,title:"渲染过程是昂贵的",slug:"渲染过程是昂贵的"},{level:3,title:"合成",slug:"合成"},{level:3,title:"层",slug:"层"},{level:3,title:"栅格线程和合成线程",slug:"栅格线程和合成线程"},{level:3,title:"Draw quads",slug:"draw-quads"},{level:3,title:"Compositor frame",slug:"compositor-frame"},{level:2,title:"从浏览器的角度看事件",slug:"从浏览器的角度看事件"},{level:2,title:"合成线程对事件的处理",slug:"合成线程对事件的处理"},{level:3,title:"标记“慢滚动”区域",slug:"标记-慢滚动-区域"},{level:3,title:"在事件监听时标记",slug:"在事件监听时标记"},{level:3,title:"查找事件目标",slug:"查找事件目标"},{level:3,title:"减少发送给主线程的事件数量",slug:"减少发送给主线程的事件数量"},{level:2,title:"总结",slug:"总结"},{level:2,title:"最后",slug:"最后"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" Chrome 浏览器架构 \n 背景 \n 这篇文章被收录在我的前端技术系列文章中浏览器工作原理栏目中，做为这个栏目的第一篇文章，先从页面是如何在浏览器中被显示出来这一最常见的问题做为开始，整体介绍浏览器的工作原理。这篇文章取材于 Mariko Kosaka 在2018年9月发表在Chrome开发者文档中的 Inside look at modern web browser 系列文章，同时结合我自己的理解。如果你对浏览器如何将代码转化成页面，这正适合于你。 \n CPU与GPU \n CPU \n \n CPU是计算机的大脑，负责处理各种不同的任务。在过去，大多数CPU是单芯片的，核心被安置在同一个芯片上。更新的CPU可以支持多核心，运算能力大大加强。而最新的的cpu已经达到10核心20线程数的能力了。 \n GPU \n \n GPU是另一个计算机的组成部分，与CPU不同，GPU更擅长利用多核心同时处理单一的任务。像命名那样，GPU最初被用于处理图像。这就是为什么使用GPU可以更快、更顺畅的渲染页面内容。随着GPU的发展，越来越多的计算任务也可以使用GPU来处理。甚至有人说GPU是人工智能的大功臣，可见GPU已经不再仅用于图像处理上了。 \n 计算机架构 \n \n 我们可以把计算机自下而上分成三层：硬件、操作系统和应用。有了操作系统的存在，上层运行的应用可以使用操作系统提供的能力使用硬件资源而不会直接访问硬件资源。 \n 进程与线程 \n \n 一个进程是应用正在运行的程序。而线程是进程中更小的一部分。当应用被启动，进程就被创建出来。程序可以创建线程来帮助其工作。操作系统会为进程分配私有的内存空间以供使用，当关闭程序时，这段私有的内存也会被释放。其实还有比线程更小的存在就是协程， 而协程是运行在线程中更小的单位。async/await就是基于协程实现的 。 \n \n 进程是系统进行资源分配的最小单位，线程是系统能够进行运算调度的最小单位。线程隶属于进程，被包含于进程之中。 \n 进程间通信(IPC) \n \n 一个进程可以让操作系统开启另一个进程处理不同的任务。当两个进程需要通信时，可以时用IPC(Inter Process Communication)。 \n 多数程序被设计成使用IPC来进行进程间的通信，好处在于当一个进程给另一个进程发消息而没有回应时，并不影响当前的进程继续工作。 \n 浏览器架构 \n 借助进程和线程，浏览器可以被设计成单进程、多线程架构，或者利用IPC实现多进程、多线程架构。 \n \n 这里我们以Chrome多进程架构介绍，在Chrome中存在不同类型的进程，它们各司其职。 \n \n 浏览器进程做为Chrome中最核心的进程管理着Chrome中的其他进程，而Renderer则负责渲染不同的站点。 \n \n 浏览器是多进程的，有一个主控进程，以及每一个tab页都会新开一个进程。\n进程可能包括主控进程（浏览器进程）、渲染进程、插件进程、GPU进程。 \n 进程工作内容 \n \n \n \n 浏览器进程(Browser process) \n 浏览器进程负责管理Chrome应用本身，包括地址栏、书签、前进和后退按钮。同时也负责可不见的功能，比如网络请求、文件按访问等，也负责其他进程的调度。 \n \n \n 渲染进程（Renderer process） \n 渲染进程负责站点的渲染，其中也包括JavaScript代码的运行，web worker的管理等。 \n \n 非原文：每一个tab页可以看作是一个渲染进程，这个进程是多线程的，它有几大类子线程：GUI渲染线程、JS引擎线程、事件触发线程、定时器触发线程、异步http请求线程。 \n \n \n \n 插件进程（Plugin process） \n 插件进程负责为浏览器提供各种额外的插件功能，例如flash。 \n \n \n GPU进程（GPU process） \n GPU进程负责提供成像的功能。 \n \n \n 当然还有其他像扩展进程或工具进程等其他进程，可以在Chrome的Task Manager面板中查看，面板中列出了运行的进程和其占用的CPU、内存情况。 \n 多进程架构的好处 \n 当我们访问一个站点时，渲染进程会负责运行站点的代码，渲染站点的页面，同时响应用户的交互动作，当我们在Chrome中打开三个页签同时访问三个站点时，如果其中一个没有响应，我们可以关闭它然后使用其他的页签，这是因为Chrome为每个站点创建一个独立的渲染进程，专门处理当前站点的渲染工作。如果所有的页面运行在同一个进程中，当有一个页面没有响应时，所有的页面就都卡住了。 \n \n 另一个好处是，借助操作系统对进程安全的控制，浏览器可以将页面放置在沙箱中，站点的代码可以运行在隔离的环境中，保证核心进程的安全。 \n 虽然多进程的架构优于单进程架构，但由于进程独享自己的私有内存，以渲染进程为例，虽然渲染的站点不同，但工作内容大体相似，为了完成渲染工作它们会在自己的内存中包含相同的功能，例如V8引擎（用于解析和运行Javascript），这意味着这部分相同的功能需要占用每个进程的内存空间。为了节省内存，Chrome限制了最大进程数，最大进程数取决于硬件的能力，同时 当使用多个页签访问相同的站点时浏览器不会创建新的渲染进程 。 \n 面向服务的架构 \n Chrome将架构从多进程模型转变成面向服务。浏览器将功能以服务的方式提供，以解决多进程架构中的问题。 \n 当Chrome运行在拥有强大硬件的计算机上时，会将一个服务以多个进程的方式实现，提高稳定性，当计算机硬件资源紧张时，则可以将多个服务放在一个进程中节省资源。 \n 基于站点隔离的渲染进程 \n 利用iframe我们可以在同一个页面访问不同站点的资源，但从安全的角度考虑，同源策略不允许一个站点在未得到同意的情况下访问其他站点的资源，所以从Chrome 67开始每个站点由独立的渲染进程处理被默认启用。 \n 浏览器进程 \n \n 浏览器进程负责处理除了渲染外的大部分工作，浏览器进程包括几个线程： \n \n UI 线程负责绘制工具栏中的按钮、地址栏等。 \n 网络线程负责从网络中获取数据。 \n 存储线程负责文件等功能。 \n \n 当我们在地址栏中输入一个地址时，浏览器进程中的UI线程最先得知这个动作，并开始处理。 \n 一次访问 \n 下面我们就从一次常见的访问入手，逐步了解浏览器是如何展示页面的。 \n Step1: 输入处理 \n 当我们在地址栏中输入时，UI线程会先判断我们输入的内容是要搜索的内容还是要访问一个站点，因为地址栏同时也是一个搜索框。 \n \n Step2: 访问开始 \n 当我们按下回车开始访问时，UI线程将借助 网络线程 访问站点资源. 浏览器页签的标题上会出现加载中的图标，同时网络线程会根据适当的网络协议，例如DNS lookup和TLS为这次请求建立连接。 \n \n 当服务器返回给浏览器重定向请求时，网络线程会通知UI线程需要重定向，然后会以新的地址做开始请求资源。 \n Step3: 处理响应数据 \n \n 当网络线程收到来自服务器的数据时，会试图从数据中的前面的一些字节中得到数据的类型（Content-Type），以试图了解数据的格式。 \n 当返回的数据类型是HTML时，会将数据传递给 渲染进程 做进一步的渲染工作。但是如果数据类型是zip文件或者其他文件格式时，会将数据传递给下载管理器做进一步的文件预览或者下载工作。 \n \n 在开始渲染之前， 网络线程 要先检查数据的安全性，这里也是浏览器保证安全的地方。如果返回的数据来自一些恶意的站点，网络线程会显示警告的页面。同时，Cross Origin Read Blocking(CORB)策略也会确保跨域的敏感数据不会被传递给渲染进程。 \n Step4: 渲染过程 \n 当所有的检查结束后，网络线程确信浏览器可以访问站点时，网络线程通知UI线程数据已经准备好了。UI线程会根据当前的站点找到一个渲染进程完成接下来的渲染工作。 \n \n 在 Step2: 访问开始 ，UI线程将请求地址传递给网络线程时，UI线程就已经知道了要访问的站点。此时UI线程就可以开始查找或启动一个渲染进程，这个动作与让网络线程下载数据是同时的。如果网络线程按照预期获取到数据，则渲染进程就已经可以开始渲染了，这个动作减少了从网络线程开始请求数据到渲染进程可以开始渲染页面的时间。当然，如果出现重定向的请求时，提前初始化的渲染进程可能就不会被使用了，但相比正常访问站点的场景，重定向往往是少数，在实际工作中，也需要根据特定的场景给出特定的方案，不必追求完美的方案。 \n Step5: 提交访问 \n 经历前面的步骤，数据和渲染进程都已经准备好了。浏览器进程会通过IPC向渲染进程提交这次访问，同时也会保证渲染进程可以通过网络线程继续获取数据。一旦浏览器进程收到来自渲染进程的确认完毕的消息，就意味着访问的过程结束了，文档渲染的过程就开始了。 \n 这时，地址栏显示出表明安全的图标，同时显示出站点的信息。访问历史中也会加入当前的站点信息。为了能恢复访问历史信息，当页签或窗口被关闭时，访问历史的信息会被存储在硬盘中。 \n \n Extra Step: 加载完毕 \n 当访问被提交给渲染进程，渲染进程会继续加载页面资源并且渲染页面。当渲染进程\"结束\"渲染工作，会给浏览器进程发送消息，这个消息会在页面中所有子页面（frame）结束加载后发出，也就是onLoad事件触发后发送。当收到\"结束\"消息后，UI线程会隐藏页签标题上的加载状态图标，表明页面加载完毕。 \n 但这里\"结束\"并不意味着所有的加载工作都结束了，因为可能还有JavaScript在加载额外的资源或者渲染新的视图。 \n 访问不同的站点 \n 一次普通的访问到此就结束了。当我们输入另外一个地址时，浏览器进程会重复上面的过程。但是在开始新的访问前，会确认当前的站点是否关心beforeunload事件。 \n beforeunload事件可以提醒用户是否要访问新的站点或者关闭页签，如果用户拒绝则新的访问或关闭会被阻止。 \n 由于所有的包括渲染、运行Javascript的工作都发生在渲染进程中，浏览器进程需要在新的访问开始前与渲染进程确认当前的站点是否关心unload。 \n \n 如果一次访问是从一个渲染进程中发起的，例如用户点击一个链接或者运行JavaScript代码 location = 'http://newsite.com' 时，渲染进程首先检查beforeunload。然后再执行和浏览器进程初始化访问同样的步骤，只不过区别在于这样的访问请求是由渲染进程向浏览器进程发起的。 \n 当新的站点请求被创建时，一个独立的渲染进程将被用于处理这个请求。为了支持像unload的事件触发，老的渲染进程需要保持住当前的状态。 \n Service Worker \n \n 非原文：Web工作者线程规范中定义了三种主要的工作者线程：专用工作者线程，共享工作者线程和服务工作者线程。（立个flag写一篇关于工作者线程文章） \n \n Service worker是一种可以使web开发者控制缓存的技术。如果Service worker被实现成从本地存储获取数据时，那么原本的请求就不会被浏览器发送给服务器了。 \n 值得注意的是，Service worker中的代码是运行在 渲染进程 中的。当访问开始时，网络线程会根据域名检查是否有Service worker会处理当前地址的请求，如果有，则UI线程会找到对应的渲染进程去执行Service worker的代码，而Service worker可以让开发者决定这个请求是从本地存储还是从网络中获取数据。 \n 访问预加载 \n 如果Service worker最终决定要从网络中获取数据时，我们会发现这种跨进程的通信会造成一些延迟。 Navigation Preload 是一种可以在Service worker启动的同时加载资源的优化机制。借助特殊的请求头，服务器可以决定返回什么样的内容给浏览器。 \n 渲染进程负责页面的内容 \n 渲染进程负责所有发生在浏览器页签中的事情。在一个渲染进程中，主线程负责解析，编译或运行代码等工作，当我们使用Worker时，Worker线程会负责运行一部分代码。合成线程和光栅线程是也是运行在渲染进程中的，负责更高效和顺畅的渲染页面。 \n \n 非原文：光栅线程数设最为大值，大部分网站页面都使用光栅图像，提高线程数可以提高网页文字及图片的加载速度。 \n \n 渲染进程最重要的工作就是将HTML、CSS和Javascript代码转换成一个可以与用户产生交互的页面。 \n 解析过程 \n 下面的章节主要介绍渲染进程如何将从网络线程中获取的文本转化成图像的过程。 \n DOM的创建 \n 当渲染进程接收到来自浏览器进程提交访问的消息后就开始接受HTML数据，主线程开始解析HTML文本字符串，并且将其转化成Document Object Model（DOM）。 \n DOM是一种浏览器内部用于表达页面结构的数据，同时也为Web开发者提供了操作页面元素的接口，让web开发者可以在Javascript代码中获取和操作页面中的元素。 \n 额外的资源加载 \n 一个网站通常还会使用类似图片，样式文件和JavaScript代码等额外的资源。这些资源也需要从网络或缓存中获取。主线程在转化HTML的过程中理应挨个加载它们，但是为了提高效率，预加载扫描（Preload Scanner）与转换过程会同时运行着。当预加载扫描在分析器分析HTML过程中发现了类似img或link这样的标签时，就会发送请求给浏览器进程的网络线程，而主线程会根据这些额外资源是否会阻塞转化过程而决定是否等待资源加载完毕。 \n JavaScript会阻塞转化过程 \n 当HTML分析器发现 <script> 标签时，会暂停接下来的HTML转化工作，然后加载、解析并且运行Javascript代码。因为在Javascript代码中可能会使用类似 document.write 这样的API去改变DOM的结构。这就是为什么HTML分析器必须等待Javascript代码运行结束才能继续分析的原因。 \n 告诉浏览器如何加载资源 \n 如果我们的Javascript代码并不需要改变DOM，可以为 <script> 标签添加async或defer属性，这样浏览器就会异步的加载这些资源并且不会阻塞HTML转化过程。如果script标签是由JavaScript代码创建的，标签的async属性会默认为true。同时我们也可以使用一些预加载技术，比如 <link ref=\"preload\"> 来通知浏览器这些资源需要越快下载越好。 \n 样式计算（Style calculation） \n 对于展示一个页面，光有DOM是不够的，因为我们还需要样式来让页面变得更美观。主线程会解析样式（CSS）并决定每个DOM元素的样式。这些样式取决于CSS选择器的范围，在浏览器开发者工具中我们可以看到这些信息。 \n \n 即使我们没有给DOM指定任何的样式， <h1> 标签也会比 <h2> 标签显示的大。这是因为浏览器为不同的标签内置了不同的样式。 \n 布局 \n 完成了样式计算工作后，渲染进程已经知道了DOM的结构和每个节点的样式，但是依然不足以渲染一个页面。想象一下，让你在电话中向朋友描述一张图：“图中有一个大红色圆和一个小的、蓝色的方块”是不足以让朋友知道这张图到底是什么样的。 \n \n 布局是为元素指定几何信息的过程。主线程遍历DOM结构中的元素及其样式，同时创建出带有坐标和元素尺寸信息的布局树（Layout tree）。布局树的结构与DOM树的结构十分相似，但只包含将会在页面中显示的元素。当一个元素的样式被设置成 display: none 时，元素就不会出现在布局树中，但那些样式被设置成visiblility：hidden的元素会出现在布局树中。相似的，当我们使用一个包含内容的伪元素（例如 p::before { content: 'Hi!' } ）时，元素会出现在布局树中即使这个元素不存在于DOM树中，这也是为什么我们使用DOM提供的API无法获取伪元素的原因. \n \n 描述页面布局信息是一项具有挑战性的工作，即使在只有块元素的页面中也必须要考虑字体的大小和在哪里换行，因为在计算下一个元素的位置时需要知道上一个元素的尺寸和形状。 \n 绘制 \n \n 有了DOM、样式和布局还是无法完成渲染工作。试想，当我们试图复制一张图画。我们知道图画中元素的尺寸、形状和位置， 我们还需要知道绘制这些元素的顺序 。 \n 例如，当一个元素z-index属性被设置后，绘制的顺序会导致渲染成错误的结果。 \n \n 在这个阶段，主线程遍历布局树并创建绘制记录，绘制记录是一系列由绘制步骤组成的流程，例如先绘制背景，然后是文字，然后是形状。 \n 渲染过程是昂贵的 \n 在渲染过程中，任何一个步骤中产生的数据变化都会引起后续一系列的的变化。例如，当布局树改变时，绘制需要重构页面中变化的部分。 \n 当一些元素有动画发生时，浏览器需要在每一帧中绘制这些元素。当无法保证每一帧绘制的连续性时，用户就会感觉到卡顿。 \n \n 正常情况下渲染操作可以与屏幕刷新保持同步，但由于这些操作运行在主线程中，也就意味这些操作可能被正在运行的Javascript代码所阻塞。 \n \n 为了不影响渲染操作，我们可以将Javascript操作优化成小块，然后使用requestAnimationFrame()。当需要大量计算时，也可以使用Worker来避免阻塞主进程。 \n 合成 \n 现在，浏览器已经知道了文档结构、每一个元素的样式，元素的几何信息，绘制的顺序。将这些信息转化成屏幕上像素的过程叫做光栅化，光栅化是图形学的范畴。 \n \n 传统的做法是将可视区域的内容进行光栅化。随着用户滚动页面，不断的光栅化更多的区域。然而对于现代浏览器，有着更复杂的的过程，这个过程被称做合成。 \n \n 合成是一种将页面拆分成多层的技术，合成线程可以将各个层在不同线程中光栅化，再组合成一个页面。当滚动时，如果层已经被光栅化，则会使用已经存在的层合成新的帧，动画则可以通过移动层来实现。 \n 层 \n 为了决定层包含哪些元素，主线程需要遍历布局树以找到需要生成的部分。对开发者来说，当某一部分需要用独立的层渲染，我们可以使用css属性will-change让浏览器创建层，关于浏览器如何生成层的标准可自行查阅。 \n \n 虽然通过分层可以优化浏览器性能，但并不意味着应该给每个元素一个层，过多的层反而影响性能，所以在层的划分上应该具体形况具体分析。 \n 栅格线程和合成线程 \n 当布局树和绘制顺序确定以后，主线程会将这些信息提交给合成线程。合成线程会光栅化各个层。一个层包含的内容可能是一个完整的页面，也可能是页面的部分，所以合成线程将层拆分成许多块，并将它们发送给栅格线程。栅格线程光栅化这些块并将它们存储在GPU缓存中。 \n \n 合成线程可以决定栅格线程光栅块的优先级，这样可以保证用户能看到的部分可以先被光栅化。一个层也会包含多种块以支持类似缩放这样的功能。 \n 当块被光栅化后，合成线程会使用draw quads收集这些信息并创建合成帧（Compositor frame）。 \n Draw quads \n 存储在缓存中，包含类似块位置这样的信息，用于描述如何使用块合成页面。 \n Compositor frame \n 用于存储表现页面一帧中包含哪些Draw quads的集合。 \n 然后一个合成帧被提交给浏览器进程。这时如果浏览器UI有变化，或者插件的UI有变化时，另一个合成帧就会被创建出来。所以每当有交互发生时，合成线程就会创建更多的合成帧然后通过GPU将新的部分渲染出来。 \n \n 合成的好处在于其独立于主线程。合成线程不需要等待样式计算和Javascript代码的运行。这也是为什么合成更适合优化交互性能，但如果布局或者绘制需要重新计算则主线程是必须要参与的。 \n 本质上，浏览器的渲染过程就是将文本转换成图像的过程，而当用户与页面发生交互动作时，则显示新的图像。在这个过程中由渲染进程中的主线程完成计算工作，由合成线程和栅格线程完成图像的绘制工作。而在计算过程中，还有强制布局、重排、重绘等更加细节的概念会在后面的文章中做讲解。 \n 从浏览器的角度看事件 \n 当我们听到事件时，通常会联想到在一个文本框中输入或者单击鼠标，但从浏览器的角度看，输入事件意味着所有的用户动作。鼠标滚轮滚动或者屏幕触摸都是输入事件。 \n 当用户与页面发生交互时，浏览器进程首先接收到事件，然而，浏览器进程只关心事件发生时是在哪个页签中，所以浏览器进程会将事件类型和位置信息等发送给负责当前页签的渲染进程，渲染进程会恰当的找到事件发生的元素并且触发事件监听器。 \n 合成线程对事件的处理 \n 在前面的章节中，我们知道了合成线程可以通过合成技术合成不同的光栅层优化性能，如果页面并不监听任何事件，合成线程可以完全独立于主线程生成新的合成帧。但如果页面监听了事件呢？ \n 标记“慢滚动”区域 \n 由于运行Javascript是主线程的工作，当页面被合成线程合成过，合成线程会标记那些有事件监听的区域。有了这些信息，当事件发生在响应的区域时，合成线程就会将事件发送给主线程处理。如果在非事件监听区域，则渲染进程直接创建新的帧而不关心主线程。 \n 在事件监听时标记 \n 在web开发中常见的方式就是事件代理。利用事件冒泡，我们可以在目标元素的上层元素中监听事件。参照下面的代码。 \n document . body . addEventListener ( 'touchstart' ,   event   =>   { \n   if   ( event . target  ===  area )   { \n    event . preventDefault ( ) ; \n   } \n } ) ; \n \n 1 2 3 4 5 通过这种写法，可以更高效的监听事件。但如果从浏览器的角度看，此时整个页面会被标记成“慢滚动”区域。这意味着虽然页面中的某些部分并不需要事件监听，但合成线程依然要在每次交互发生后等待主线程处理事件，合成线程的优化效果不复存在。 \n \n 为了解决这个问题，我们可在事件代理时传入passive: true(IE不支持)参数。这样告诉渲染线程，依然需要将事件发送给主线程处理，但不需要等待。 \n document . body . addEventListener ( 'touchstart' ,   event   =>   { \n     if   ( event . target  ===  area )   { \n        event . preventDefault ( ) \n     } \n  } ,   { passive :   true } ) ; \n \n 1 2 3 4 5 #  查找事件目标 \n \n 当渲染线程将事件发送给主线程后，第一件事就是找到事件触发的目标。通过在渲染过程中生成的绘制信息，可以根据坐标找到目标元素。 \n 减少发送给主线程的事件数量 \n 为了保证动画的顺畅，需要显示器在每秒刷新60次。对于典型的触摸事件由合成线程提交给主线程的事件频率可以达到每秒60-120次，对于典型的鼠标事件每秒会发送100次。事件发送的频率通常比屏幕刷新频率要高。 \n 如果类似 touchmove 这样的事件每秒向主线程发送120次可能会造成主线程执行时间过长而影响性能。 \n \n 为了减少发送给主线程的事件数量，Chrome合并了连续的事件。类似 wheel ， mousewheel ， mousemove ， pointermove ， touchmove 这样的事件会被延迟到下一次requestAnimationFrame前触发. \n \n 而任何的离散事件，类似 keydown ,  keyup ,  mouseup ,  mousedown ,  touchstart 和  touchend 都会立即被发送给主线程处理。 \n 总结 \n 到此，我们已经可以通过从用户在浏览器地址栏中的一次输入到页面图像的显示了解浏览器是如何工作的。这里我们总结一下。 \n \n 浏览器进程做为最重要的进程负责大多数页签外部的工作，包括地址栏显示、网络请求、页签状态管理等。 \n 不同的渲染进程负责不同的站点渲染工作，渲染进程间彼此独立。 \n 渲染进程在渲染页面的过程中会通过浏览器进程获取站点资源，只有安全的资源才会被渲染进程接收到。 \n 渲染进程中主线程负责除了图像生成外绝大多数工作，如何减少主线程上代码的运行是交互性能优化的关键。 \n 渲染进程中的合成线程和栅格线程负责图像生成，利用分层技术可以优化图像生成的效率。 \n 当用户与页面发生交互时，事件的传播途径从浏览器进程到渲染进程的合成线程再根据事件监听的区域决定是否要传递给渲染进程的主线程处理。 \n 最后 \n 转载于 Chrome 浏览器架构 \n ",summary:"\n背景\n\n这篇文章被收录在我的前端技术系列文章中浏览器工作原理栏目中，做为这个栏目的第一篇文章，先从页面是如何在浏览器中被显示出来这一最常见的问题做为开始，整体介绍浏览器的工作原理。这篇文章取材于Mariko Kosaka在2018年9月发表在Chrome开发者文档中的Inside look at modern web browser系列文章，同时结合我自己的理解。如果你对浏览器如何将代码转化成页面，这正适合于你。\n\nCPU与GPU\n\nCPU\n\nCPU是计算机的大脑，负责处理各种不同的任务。在过去，大多数CPU是单芯片的，核心被安置在同一个芯片上。更新的CPU可以支持多核心，运算能力大大加强。 ...",id:"post",pid:"post",readingTime:{text:"2 min read",minutes:1.77,time:106200,words:354}},{title:"JSON.parse(JSON.stringify(obj))实现深拷贝的缺点",frontmatter:{title:"JSON.parse(JSON.stringify(obj))实现深拷贝的缺点",description:"JSON.parse(JSON.stringify(obj))实现深拷贝的缺点",date:"2020-10-20",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqs/blogImage/raw/master/blogImage/20201104182622.jpg",tags:["前端开发"],meta:[{name:"title",content:"JSON.parse(JSON.stringify(obj))实现深拷贝的缺点"},{name:"description",content:"JSON.parse(JSON.stringify(obj))实现深拷贝的缺点"},{name:"keywords",content:"深拷贝, JSON.parse(JSON.stringify(obj))实现深拷贝的缺点"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-10-20-deepclone.html",relativePath:"_posts/2020-10-20-deepclone.md",key:"v-fb2d2604",path:"/2020/10/20/deepclone/",headers:[{level:2,title:"JSON.parse(JSON.stringify(obj))深拷贝的问题",slug:"json-parse-json-stringify-obj-深拷贝的问题"},{level:2,title:"递归实现深拷贝",slug:"递归实现深拷贝"},{level:2,title:"循环引用",slug:"循环引用"},{level:2,title:"参考文章",slug:"参考文章"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" JSON.parse(JSON.stringify(obj))实现深拷贝的缺点 \n 浅拷贝(shallowCopy)只是增加了一个指针指向已存在的内存地址; \n 深拷贝(deepCopy)是增加了一个指针并且申请了一个新的内存用于存放复制的对象，使这个增加的指针指向这个新的内存; \n JSON.parse(JSON.stringify(obj))深拷贝的问题 \n \n 如果obj里面存在时间对象,JSON.parse(JSON.stringify(obj))之后，时间对象变成了字符串。 \n 如果obj里有RegExp、Error对象，则序列化的结果将只得到空对象。 \n 如果obj里有函数、undefined,则序列化的结果会把函数、undefined丢失。 \n 如果obj里有NaN、Infinity和-Infinity，则序列化的结果会变成null。 \n JSON.stringify()只能序列化对象的 可枚举的自有属性 。如果obj中的对象是有构造函数生成的， 则使用JSON.parse(JSON.stringify(obj))深拷贝后，会丢弃对象的constructor。 \n 如果对象中存在循环引用的情况也无法正确实现深拷贝。 \n 不能处理循环引用 \n \n \n let  person  =   { } ; \nObject . defineProperties ( person ,   { \n     'name' :   { \n        configurable :   true , \n        enumerable :   false , \n        writable :   true , \n        value :   'test' \n     } , \n     'age' :   { \n        configurable :   true , \n        enumerable :   true , \n        writable :   true , \n        value :   10 \n     } \n } ) ; \n\n let  mySymbol  =   Symbol ( ) ; \n let  obj  =   { \n    data0 :   1 , \n    data1 :   new   Date ( ) , \n    data2 :   new   RegExp ( '\\\\W+' ) , \n    data3 :   new   Error ( '1' ) , \n    data4 :   undefined , \n     data5 :   function   ( )   { \n        console . log ( 1 ) ; \n     } , \n    data6 :   NaN , \n    data7 :  person , \n    data8 :   { \n        data_1 :   3 , \n        data_2 :   { \n            sub_data_1 :   'heelo' \n         } , \n        data_3 :   [ 1 ,   2 ,   3 ] , \n     } , \n     [ mySymbol ] :   { \n        a :   'symbol' \n     } \n } \nconsole . log ( obj ) ; \nconsole . log ( JSON . parse ( JSON . stringify ( obj ) ) ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 \n 为了解决上述JSON.parse(JSON.stringify(obj))实现深拷贝的缺点，可以通过递归实现一个深拷贝。 \n 递归实现深拷贝 \n function   cloneDeep ( target )   { \n     if   ( typeof  target  ===   'object'   &&  target  !==   null )   { \n         if   ( target . __proto__ . constructor  ===  Date )   return   new   Date ( target ) ; \n         if   ( target . __proto__ . constructor  ===  RegExp )   return   new   RegExp ( target ) ; \n         if   ( target . __proto__ . constructor  ===  Map )   return   new   Map ( target ) ; \n         if   ( target . __proto__ . constructor  ===  Set )   return   new   Set ( target ) ; \n         let  res  =   new   target . constructor ( ) ; \n         for   ( let  i  of  Reflect . ownKeys ( target ) )   { \n            res [ i ]   =   cloneDeep ( target [ i ] ) ; \n         } \n         return  res ; \n     }   else   { \n         return  target ; \n     } \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 \n 用 new target.constructor () 构造函数新建一个空的对象，而不是使用{}或者[],这样可以保持原形链的继承 \n \n 测试结果： \n 循环引用 \n 其实上面的递归实现深拷贝还存在一个问题：如果 target.property = target ,这样会形成了一个环(看着更像是套娃)。 \n \n 那这个问题怎么解决呢？最开始的想法是如果存在这种循环引用的情况，可以找个地方先暂存一下。克隆之前，先去找是否存在一样(引用地址相同)的引用类型，如果有直接返回，没有再克隆。那么Map就很容易想到啦。 \n Map对象保存键值对。任何值(对象或者原始值) 都可以作为一个键或一个值。 \n let  person  =   { } ; \nObject . defineProperties ( person ,   { \n     'name' :   { \n        configurable :   true , \n        enumerable :   false , \n        writable :   true , \n        value :   'test' \n     } , \n     'age' :   { \n        configurable :   true , \n        enumerable :   true , \n        writable :   true , \n        value :   10 \n     } \n } ) ; \n\n let  mySymbol  =   Symbol ( ) ; \n let  obj  =   { \n    data0 :   1 , \n    data1 :   new   Date ( ) , \n    data2 :   new   RegExp ( '\\\\W+' ) , \n    data3 :   new   Error ( '1' ) , \n    data4 :   undefined , \n     data5 :   function   ( )   { \n        console . log ( 1 ) ; \n     } , \n    data6 :   NaN , \n    data7 :  person , \n    data8 :   { \n        data_1 :   3 , \n        data_2 :   { \n            sub_data_1 :   'heelo' , \n            sym :   Symbol ( 'symm' ) \n         } , \n        data_3 :   [ 1 ,   2 ,   3 ] , \n     } , \n     [ mySymbol ] :   { \n        a :   'symbol' \n     } , \n    data10 :   Symbol ( 'test' ) , \n    newMap :   new   Map ( [ [ 'age' ,   10 ] ] ) , \n    newSet :   new   Set ( [ 1 ,   2 ,   3 ] ) \n } \n\n /*造成循环引用*/ \nobj . data9  =  obj ; \n\nconsole . log ( obj ) ; \nconsole . log ( cloneDeep ( obj ) ) ; \n\n\n function   cloneDeep ( target ,  map  =   new   Map ( ) )   { \n     if   ( typeof  target  ===   'object'   &&  target  !==   null )   { \n         let  res  =   new   target . constructor ( ) ; \n\n         if   ( map . get ( target ) )   { \n             return  target ; \n         } \n        map . set ( target ,  res ) ; \n\n         if   ( target . __proto__ . constructor  ===  Date )   return   new   Date ( target ) ; \n         if   ( target . __proto__ . constructor  ===  RegExp )   return   new   RegExp ( target ) ; \n         if   ( target . __proto__ . constructor  ===  Map )   return   new   Map ( target ) ; \n         if   ( target . __proto__ . constructor  ===  Set )   return   new   Set ( target ) ; \n\n         for   ( let  i  of  Reflect . ownKeys ( target ) )   { \n            res [ i ]   =   cloneDeep ( target [ i ] ,  map ) ; \n         } \n         return  res ; \n     }   else   { \n         return  target ; \n     } \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 测试结果： \n \n 到这其实对日期对象( new Date() )、正则对象( new RegExp() )、 Map 、 Set 、 Symbol 、 function 、 undefined 、 null 、 object 、 Array 、 new Error() 的拷贝。下面对代码结构优化一下，不希望出现那么多的if-else。 \n function   cloneDeep ( target ,  map  =   new   Map ( ) )   { \n     if   ( typeof  target  ===   'object'   &&  target  !==   null )   { \n         let  res  =   new   target . constructor ( ) ; \n\n         if   ( map . get ( target ) )   { \n             return  target ; \n         } \n        map . set ( target ,  res ) ; \n\n         let  tagType  =  target . __proto__ . constructor . name ; \n\n         switch   ( tagType )   { \n             case   'Date' : \n                 return   new   Date ( target ) ; \n             case   'RegExp' : \n                 return   new   RegExp ( target ) ; \n             case   'Map' : \n                 return   new   Map ( target ) ; \n             case   'Set' : \n                 return   new   Set ( target ) ; \n             default : \n                 break ; \n         } \n\n         for   ( let  i  of  Reflect . ownKeys ( target ) )   { \n            res [ i ]   =   cloneDeep ( target [ i ] ,  map ) ; \n         } \n         return  res ; \n     }   else   { \n         return  target ; \n     } \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 #  参考文章 \n \n JSON.parse(JSON.stringify(obj))实现深拷贝的弊端 \n 深拷贝系列 ———— 自己通过递归实现一个深拷贝 \n JS中如何进行对象的深拷贝 \n \n ",summary:"\n\n浅拷贝(shallowCopy)只是增加了一个指针指向已存在的内存地址;\n\n深拷贝(deepCopy)是增加了一个指针并且申请了一个新的内存用于存放复制的对象，使这个增加的指针指向这个新的内存;\n\nJSON.parse(JSON.stringify(obj))深拷贝的问题\n\n如果obj里面存在时间对象,JSON.parse(JSON.stringify(obj))之后，时间对象变成了字符串。\n如果obj里有RegExp、Error对象，则序列化的结果将只得到空对象。\n如果obj里有函数、undefined,则序列化的结果会把函数、undefined丢失。\n如果obj里有NaN、Infini ...",id:"post",pid:"post",readingTime:{text:"3 min read",minutes:2.35,time:141e3,words:470}},{title:"高性能JavaScript——第四章",frontmatter:{title:"高性能JavaScript——第四章",description:"算法和流程控制",date:"2020-11-01",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqs/blogImage/raw/master/blogImage/20201110205703.jpg",tags:["读书笔记","JavaScript"],meta:[{name:"title",content:"高性能JavaScript——第四章"},{name:"description",content:"算法和流程控制"},{name:"keywords",content:"算法和流程控制, 高性能JavaScript"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-11-01-alo_flowControl.html",relativePath:"_posts/2020-11-01-alo_flowControl.md",key:"v-5192725e",path:"/2020/11/01/alo-flowcontrol/",headers:[{level:2,title:"循环性能",slug:"循环性能"},{level:3,title:"减少迭代的动作量",slug:"减少迭代的动作量"},{level:3,title:"减少迭代的次数",slug:"减少迭代的次数"},{level:2,title:"基于函数的迭代",slug:"基于函数的迭代"},{level:2,title:"条件语句",slug:"条件语句"},{level:3,title:"if-else 对比 switch",slug:"if-else-对比-switch"},{level:3,title:"优化if-else",slug:"优化if-else"},{level:2,title:"查找表",slug:"查找表"},{level:2,title:"递归",slug:"递归"},{level:3,title:"迭代",slug:"迭代"},{level:3,title:"Memoization",slug:"memoization"},{level:2,title:"小结",slug:"小结"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" 第四章 算法和流程控制 \n 循环性能 \n 循环的类型： \n \n for循环 \n while循环 \n do-while循环 \n for-in循环 \n \n 在以上四种循环类型中，只有for-in循环比其他几种要慢一些。主要是因为每次迭代操作会同时搜索是实例或者原型属性，for-in循环的每次迭代都会产生更多的开销。 \n 减少迭代的动作量 \n 一个典型的数组处理可以采用三种循环中的任何一种。最常见的写法如下： \n for ( let  i  =   0 ;  i  <  arr . length ;  i ++ )   { \n     process ( arr [ i ] ) \n } \n\n\n let  j  =   0 ; \n while ( j  <  arr . length )   { \n     process ( arr [ j ++ ] ) \n } \n\n let  k  =   0 ; \n do   { \n     process ( arr [ k ++ ] ) \n }   while   ( k  <  arr . length ) \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 优化循环的第一步是要减少对象成员及数组项的查找次数。正如第二章所讨论的，在大多数的浏览器中，这些操作比使用局部变量和字面量要花费更多的时间。上面的例子中每次循环都要查找item.length，这样做比较耗时，由于该值在循环过程中并未改变，因此产生了不必要的性能损失。所以优化如下： \n for ( let  i  =   0 ,  len  =  arr . length ;  i  <  len ;  i ++ )   { \n     process ( arr [ i ] ) ; \n } \n\n let  j  =   0 ,  count  =  arr . length ; \n while ( j  <  count )   { \n     process ( arr [ j ++ ] ) ; \n } \n\n let  k  =   0 ,  num  =  arr . length ; \n do   { \n     process ( arr [ k ++ ] ) \n }   while   ( k  <  num ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 这样重写后的循环运行前对数组的长度进行一次属性查找。这使得控制条件可直接读取局部变量，所以速度更快。 \n 测试如下： \n let  arr  =   [ ] ; \n for ( let  i  =   0 ;  i  <   10000000 ;  i ++ )   { \n    arr [ i ]   =  i ; \n } \n\n let  sum  =   0 ; \n\n function   process ( num )   { \n     if ( num % 3   ===   0 )  sum  +=  num ; \n } \n\nconsole . time ( 'arr.length' ) \n for   ( let  i  =   0 ;  i  <  arr . length ;  i ++ )   { \n     process ( arr [ i ] ) \n } \nconsole . timeEnd ( 'arr.length' ) \n\nconsole . time ( 'len' ) \n for   ( let  i  =   0 ,  len  =  arr . length ;  i  <  len ;  i ++ )   { \n     process ( arr [ i ] ) \n } \nconsole . timeEnd ( 'len' ) \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 \n 另外一种方法还可以是颠倒数组的顺序来提高循环性能。通常，数组项的顺序与所要执行的任务无关，因此从最后一项向前处理是个备选方案。 \n 减少迭代的次数 \n 循环体运行时会带来一次小的性能开销，这增加了总体运行时间。减少迭代次数能获得更加显著的性能提升。最广为人知的一种限制循环迭代次数的模式被称为“达夫设备(Duff's Device)”。 \n “Duff's Device”是一个循环体展开技术，它使得一次迭代中实际执行了多次迭代的操作。一个典型的实现如下： \n let  iterations  =  Math . floor ( item . length  /   8 ) , \n    startAt  =  item . length  %   8 , \n    i  =   0 ; \n    \n    \n /*书中的代码有问题，需补充下面一句代码*/ \n if ( startAt  ===   0 )  iterations -- ; \n    \n do   { \n     switch ( startAt )   { \n         case   0 :   process ( item [ i ++ ] ) ; \n         case   7 :   process ( item [ i ++ ] ) ; \n         case   6 :   process ( item [ i ++ ] ) ; \n         case   5 :   process ( item [ i ++ ] ) ; \n         case   4 :   process ( item [ i ++ ] ) ; \n         case   3 :   process ( item [ i ++ ] ) ; \n         case   2 :   process ( item [ i ++ ] ) ; \n         case   1 :   process ( item [ i ++ ] ) ; \n     } \n    startAt  =   0 ; \n }   while ( -- iterations ) \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 \n 注意：每一个case是都没有break关键字。 \n \n Duff's Device背后的理念是：每次循环中最多可调用8次process()。循环迭代的次数为总数除以8.由于不是所有的数字都能被8整除，变量startAt用来存放余数，表示第一次循环中应调用多少次process()。比如：如果是12次循环，那么第一次循环会调用process()4次，第二次循环调用process()调用8次，用两次循环替代了12次循环。 \n \n 关于达夫设备可以看一下这片知乎回答 达夫设备(Duff's Device)效率真的很高吗？ 。\n个人认为：达夫设备能实现的优化效果日趋在减弱，时代在变化，语言在发展，硬件设备在变化，编译器性能优化，除非特殊的需求下，一般还是没必要做像这种层次的性能考量的。不过，这种奇妙的 switch-case 写法经常研究一下还是很有乐趣的。 \n 基于函数的迭代 \n forEach()方法：此方法遍历一个数字的所有成员，并在每个成员上执行一个函数。要执行的函数作为参数传给forEach，并在调用时传递3个参数，分别是：当前数组项的值、索引以及数组本身。 \n console . time ( 'foreach' ) ; \narr . forEach ( ( item ,  index )   =>   { \n     process ( item ) ; \n } ) \nconsole . timeEnd ( 'foreach' ) ; \n \n 1 2 3 4 5 \n 尽管基于函数的迭代提供了一个更为便利的迭代方法，但它仍然比基于循环的迭代要慢一些。 对于每个数组项调用外部方法所带来的开销是速度慢的主要原因。 \n 条件语句 \n 其他语言对应该使用if-else语句还是switch语句的传统观点同样适用于javascript。 \n if-else 对比 switch \n 使用if-else还是switch，最流行的方法是基于测试条件的数量来判断：条件数量越大，越倾向于使用switch而不是if-else。这通常归结于代码的易读性。 \n 事实证明，大多数情况下switch比if-else运行的要快，但只有当条件数量很大时才快的明显。这两个语句的主要性能区别是：当条件增加时，if-else性能负担增加的程度比switch要多。因此，我们自然倾向于在条件数量较少时使用if-else，而在条件数量较大时使用switch，这从性能方面考虑也是合理的。 \n \n 大多数语言对switch语句的实现都采用了branch table（分支表）索引进行优化。在JavaScript中，switch语句比较值时使用全等操作符，不会发生类型转换的损耗。 \n 优化if-else \n 优化if-else的目标是：最小化到达正确分支所需判断的条件数量。最简单的优化方法是确保最可能出现的条件放在首位。 \n 另一种减少判断次数的方法是把if-else组织成一系列嵌套的if-else语句。使用单个庞大的if-else通常会导致运行缓慢，因为每个条件都要判断。可以使用二分法把值域分成一系列的区间，然后逐步缩小范围。 \n 查找表 \n 有些时候优化条件语句的最佳方案是避免使用if-else和switch。当有大量离散值需要测试时，if-else和switch比使用查找表慢很多。JavaScript中可以使用数组和普通对象来构建查找表，通过查找表访问数据比用if-else或switch快很多。 \n 使用查找表相对于if-else和switch，不仅速度快，而且有时代码的可读性也更好。看下面的例子： \n switch ( value )   { \n     case   0 : \n         return  res0 ; \n     case   1 : \n         return  res1 ; \n     case   2 : \n         return  res2 ; \n     case   3 : \n         return  res3 ; \n     case   4 : \n         return  res4 ; \n     case   5 : \n         return  res5 ; \n     case   6 : \n         return  res6 ; \n     case   7 : \n         return  res7 ; \n     case   8 : \n         return  res8 ; \n     case   9 : \n         return  res9 ; \n     default : \n         return  res10 ; \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 switch表达式代码所占的空间可能与它的重要性不成比例。整个结构可以用一个数组作为查找表来替代： \n let  results  =   [ res0 ,  res1 ,  res2 ,  res3 ,  res4 ,  res5 ,  res6 ,  res7 ,  res8 ,  res9 ,  res10 ] ; \n\n return  results [ value ] ; \n \n 1 2 3 当你使用查找表时，必须完全抛弃条件判断语句。这个过程编程数组项查询或者对象成员查询。查找表的一个主要优点是：不用书写任何条件判断语句，即使候选值数量增加时，也几乎不会产生额外的性能开销。 \n 当单个键和单个值之间存在逻辑映射时，查找表的优势就能体现出来。switch语句更适合于每个键都需要对应一个独特的动作或一系列动作的场合。 \n 递归 \n 阶乘函数就是一个经典的递归： \n function   factorial ( n )   { \n     if ( n  ===   0 )   { \n         return   1 ; \n     }   else   { \n         return  n  *   factorial ( n  -   1 ) ; \n     } \n } \n \n 1 2 3 4 5 6 7 递归函数的潜在问题是终止条件不明确或者缺少终止条件会导致函数长时间运行，并使得用户界面处于假死状态。此外，递归函数还会受到浏览器的“调用栈大小限制”。 \n 当遇到调用栈大小限制时，第一步应先检查代码中的递归实例。有两种递归模式值得注意。第一种：直接递归，比如上面的阶乘函数。另外一种称为“隐伏模式”，它包含两个函数： \n function   first ( )   { \n     second ( ) ; \n } \n function   second ( )   { \n     first ( ) ; \n } \n first ( ) ; \n \n 1 2 3 4 5 6 7 这样两个函数相互调用，形成一个无限循环。 \n 如果终止条件没问题，那么肯能是算法中包含了太多层递归，为了能在浏览器中安全的工作，可以使用 迭代、Memoization，或者结合两者使用 。 \n 迭代 \n 任何递归能实现的算法同样可以用迭代来实现。迭代算法通常包含几个不同的循环，分别对应计算过程的不同方面。使用优化后的循环替代长时间运行的递归函数可以提升性能，因为运行一个循环比反复调用一个函数的开销要少的多。 \n 比如，归并排序算法是最常见的递归实现的算法。用如下JS代码实现一个简单的归并排序： \n function   merge ( left ,  right )   { \n     let  result  =   [ ] ; \n     while ( left . length  >   0   &&  right . length  >   0 )   { \n         if ( left [ 0 ]   <  right [ 0 ] )   { \n            result . push ( left . shift ( ) ) \n         }   else   { \n            result . push ( right . shift ( ) ) \n         } \n     } \n     return  result . concat ( left ) . concat ( right ) \n } \n\n function   mergeSort ( items )   { \n     if ( item . length  ==   1 )   return  items ; \n     let  middle  =  Math . floor ( item . length  /   2 ) , \n        left  =  items . slice ( 0 ,  middle ) , \n        right  =  items . slice ( middle ) ; \n     return   merge ( mergeSort ( left ) ,   mergeSort ( right ) ) ; \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 mergeSort()函数会导致很频繁的自调用。一个长度为n的数组最终会调用2*n - 1次。这个归并排序算法同样可以用迭代实现，比如： \n function   mergeSort ( arr )   { \n     let  len  =  arr . length ; \n     let  lim ,  work  =   [ ] ; \n     let  i ,  j ,  k ; \n     if   ( len  ==   1 )   { \n         return  arr ; \n     } \n     for   ( i  =   0 ;  i  <  len ;  i ++ )   { \n        work . push ( [ arr [ i ] ] ) ; \n     } \n    work . push ( [ ] ) ; \n     for   ( lim  =  len ;  lim  >   1 ; )   { //lim为分组长度 \n         for   ( j  =   0 ,  k  =   0 ;  k  <  lim ;  j ++ ,  k  =  k  +   2 )   { \n          work [ j ]   =   merge ( work [ k ] ,  work [ k  +   1 ] ) ; \n         } \n        work [ j ]   =   [ ] ; \n        lim  =  Math . floor ( ( lim  +   1 )   /   2 ) ; \n     } \n     return  work [ 0 ] ; \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 #  Memoization \n 减少工作量就是最好的性能优化方案。代码要处理的事情越少，其运行速度也就越快。因此避免重复的工作是有意义的。Memoization正是一种避免重复工作的方法，它缓存前一个计算结果供后续计算使用，避免了重复工作。这使得它成为递归算法中有用的技术。 \n 比如经典的斐波那契数列  0 1 1 2 3 5 8 13 21 34 55 89.... \n 要求实现：fibonacci(1) 输出 0, fibonacci(2) 输出 1, fibonacci(3) 输出 1, fibonacci(10) 输出 34(第10个) \n 递归实现： \n function   __fibonacci ( n )   { \n     if   ( typeof  n  !==   'number'   &&  n  >   0 )   return   null ; \n     if   ( n  ==   1 )   return   0 ; \n     if   ( n  ==   2 )   return   1 ; \n     return   __fibonacci ( n  -   1 )   +   __fibonacci ( n  -   2 ) ; \n } \n \n 1 2 3 4 5 6 利用Memoization缓存结果： \n function   _fibonacci ( n )   { \n     if   ( typeof  n  !==   'number'   &&  n  >   0 )   return   null ; \n     let  res  =   [ 0 ,   1 ] ; \n     if   ( n  <=   2 )   return  res [ n  -   1 ] ; \n     let  index  =   3 ; \n     while   ( index  <=  n )   { \n        res [ index  -   1 ]   =  res [ index  -   2 ]   +  res [ index  -   3 ] ; \n        index ++ \n     } \n     return  res [ n  -   1 ] \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 其实还可以继续优化，因为按照要求我们没必要维护一个长度为n的数组。 \n 优化后： \n function   fibonacci ( n )   { \n     if   ( typeof  n  !==   'number'   &&  n  >   0 )   return   null ; \n     let  res  =   [ 0 ,   1 ] ; \n     if   ( n  <=   2 )   return  res [ n  -   1 ] ; \n     let  index  =   3 ; \n     while   ( index  <=  n )   { \n         [ res [ 0 ] ,  res [ 1 ] ]   =   [ res [ 1 ] ,  res [ 0 ]   +  res [ 1 ] ] \n        index ++ \n     } \n     return  res [ 1 ] \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 当 n=40 时，这三种方法运算速度的比较如下： \n let  n  =   40 \nconsole . time ( '__fibonacci' ) \nconsole . log ( __fibonacci ( n ) ) \nconsole . timeEnd ( '__fibonacci' ) \n\nconsole . time ( '_fibonacci' ) \nconsole . log ( _fibonacci ( n ) ) \nconsole . timeEnd ( '_fibonacci' ) \n\nconsole . time ( 'fibonacci' ) \nconsole . log ( fibonacci ( n ) ) \nconsole . timeEnd ( 'fibonacci' ) \n \n 1 2 3 4 5 6 7 8 9 10 11 12 \n 小结 \n javascript和其他编程语言一样，代码的写法和算法会影响运行时间。与其它语言不同的是，JavaScript可用资源有限，因此优化技术更为重要。 \n \n for、while和do-while循环性能特性相当，并没有一种循环类型明显快于或慢于其他类型 \n 避免使用for-in循环，除非需要遍历一个属性数量未知的对象 \n 改善循环性能的最佳方式是减少每次迭代的运算量和减少循环迭代次数 \n 通常来说，switch总数比if-else快，但并不总是最佳解决方案 \n 在判断条件比较多时，使用查找表比if-else和switch更快 \n 浏览器的调用栈大小限制了递归算法在JavaScript中的应用 \n 如果遇到栈溢出的错误，可以将递归算法改为迭代算法，或使用Memoization来避免重复计算 \n \n ",summary:"\n循环性能\n\n循环的类型：\nfor循环\nwhile循环\ndo-while循环\nfor-in循环\n\n在以上四种循环类型中，只有for-in循环比其他几种要慢一些。主要是因为每次迭代操作会同时搜索是实例或者原型属性，for-in循环的每次迭代都会产生更多的开销。\n\n减少迭代的动作量\n\n一个典型的数组处理可以采用三种循环中的任何一种。最常见的写法如下：\n\nfor(let i = 0; i 注意：每一个case是都没有break关键字。\n\nDuff's Device背后的理念是：每次循环中最多可调用8次process()。循环迭代的次数为总数除以8.由于不是所有的数字都能被8整除，变量startAt用 ...",id:"post",pid:"post",readingTime:{text:"4 min read",minutes:3.695,time:221700,words:739}},{title:"How JavaScript works - an overview of the engine, the runtime, and the call stack",frontmatter:{title:"How JavaScript works - an overview of the engine, the runtime, and the call stack",description:"How Javascript works",date:"2020-11-12",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqs/blogImage/raw/master/blogImage/20201111175711.png",tags:["翻译","转载","JavaScript"],meta:[{name:"title",content:"Javascript工作原理：引擎、运行时及调用栈概览"},{name:"description",content:"Javascript工作原理：引擎、运行时及调用栈概览"},{name:"keywords",content:"Javascript工作原理, 引擎, 运行时, 调用栈"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-11-12-how-javascript-work1.html",relativePath:"_posts/2020-11-12-how-javascript-work1.md",key:"v-b53aa774",path:"/2020/11/12/how-javascript-work1/",headers:[{level:2,title:"Overview",slug:"overview"},{level:3,title:"The JavaScript Engine",slug:"the-javascript-engine"},{level:3,title:"The Runtime",slug:"the-runtime"},{level:3,title:"The Call Stack",slug:"the-call-stack"},{level:3,title:"Concurrency & the Event Loop",slug:"concurrency-the-event-loop"},{level:2,title:"参考文章",slug:"参考文章"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" How JavaScript works: an overview of the engine, the runtime, and the call stack \n \n Javascript工作原理：引擎、运行时及调用栈概览 \n \n As JavaScript is getting more and more popular, teams are leveraging its support on many levels in their stack - front-end, back-end, hybrid apps, embedded devices and much more. \n \n 随着Javascript越来越受欢迎，团队正凭借JavaScript在他们诸如前端、后端、混合式app、嵌入设备以及更多场景等开发栈的不同层面的支持。 \n \n This post is meant to be the first in a series aimed at digging deeper into JavaScript and how it actually works: we thought that by knowing the building blocks of JavaScript and how they come to play together you’ll be able to write better code and apps. We’ll also share some rules of thumb we use when building  SessionStack , a lightweight JavaScript application that has to be robust and highly-performant in order to stay competitive. \n \n 这篇文章是深入研究JavaScript工作原理系列文章的第一篇：我们认为在了解 JavaScript 的构建模块以及它们是如何在一起工作的之后你将会写出更好的代码和 apps。我们将会分享一些当在创建  SessionStack  时候的经验法则，SessionStack 是一个轻量级的 JavaScript 程序它拥有强壮性和高性能的优点以保持竞争力。 \n \n As shown in the  GitHut stats , JavaScript is at the top in terms of Active Repositories and Total Pushes in GitHub. It doesn’t lag behind much in the other categories either. \n \n 正如 GitHut stats 所展示的那样，JavaScript的活跃仓库和总推送量在Github排名第一。在其他方面也不逊色于其他语言太多。 \n \n \n (Check out up-to-date GitHub language stats) \n \n (查看最新的GitHub语言统计信息) \n \n If projects are getting so much dependent on JavaScript, this means that developers have to be utilizing everything that the language and the ecosystem provide with deeper and deeper understanding of the internals, in order to build amazing software. \n \n 如果工程正在变得非常依赖于JavaScript，这意味着为了开发出色的软件，开发者必须利用由语言和生态系统提供的一切东西，并且要更加深入的理解JavaScript内部的工作机制。 \n \n As it turns out, there are a lot of developers that are using JavaScript on a daily basis but don’t have the knowledge of what happens under the hood. \n \n 事实上，有很多平时使用JavaScrip的t开发者并不了解其底层知识。 \n Overview \n \n 概览 \n \n Almost everyone has already heard of the V8 Engine as a concept, and most people know that JavaScript is single-threaded or that it is using a callback queue. \n \n 几乎所有人都听说过V8引擎的概念，并且大所数人知道JavaScript是单线程的或者它是使用回调队列的。 \n \n In this post, we’ll go through all these concepts in detail and explain how JavaScript actually runs. By knowing these details, you’ll be able to write better, non-blocking apps that are properly leveraging the provided APIs. \n \n 在这篇文章中，我们将详细介绍这些概念并解释JavaScript的工作原理。了解了这些细节，通过合理地使用所提供的APIs，你将可能写出更好的，非阻塞的程序。 \n \n If you’re relatively new to JavaScript, this blog post will help you understand why JavaScript is so “weird” compared to other languages. \n \n 如果你是JavaScript的新手，此博客文章将帮助你了解JavaScript与其他语言相比为何如此“古怪”。 \n \n And if you’re an experienced JavaScript developer, hopefully, it will give you some fresh insights on how the JavaScript Runtime you’re using every day actually works. \n \n 如果你是一位经验丰富的JavaScript开发人员，那么希望它会帮你更加深入地理解JavaScript运行时的实际工作原理。 \n The JavaScript Engine \n \n javascript引擎 \n \n A popular example of a JavaScript Engine is Google’s V8 engine. The V8 engine is used inside Chrome and Node.js for example. Here is a very simplified view of what it looks like: \n \n 谷歌V8引擎是流行的JavaScript引擎之一。例如，V8引擎用于Chrome和Node.js。 这里有一个简单的视图来描绘其大概： \n \n \n The Engine consists of two main components: \n \n 引擎主要有两个部分组成 \n \n \n Memory Heap — this is where the memory allocation happens \n \n \n \n 动态内存管理 － 在这里分配内存 \n \n \n \n Call Stack — this is where your stack frames are as your code executes \n \n \n \n 调用栈 － 这里代码执行即是你的堆栈结构 \n The Runtime \n \n 运行时 \n \n There are APIs in the browser that have been used by almost any JavaScript developer out there (e.g. “setTimeout”). Those APIs, however, are not provided by the Engine. \n \n 几乎每一个JavaScript开发者都使用过一些浏览器API（比如：setTimeout）。然而，这些API并不是引擎提供的。 \n \n So, where are they coming from? \n \n 那么它们从何而来呢？ \n \n It turns out that the reality is a bit more complicated. \n \n 事实上这个情况有点复杂。 \n \n \n So, we have the Engine but there is actually a lot more. We have those things called Web APIs which are provided by browsers, like the DOM, AJAX, setTimeout and much more. \n \n 所以，除了引擎实际上还有很多其他方面的东西。我们可以使用由浏览器提供的称为Web API的东西，比如DOM，AJAX，setTimeout等。 \n \n And then, we have the so popular  event loop  and the  callback queue . \n \n 因此，就有了周知的 事件循环 和 回调队列 \n The Call Stack \n \n 调用栈 \n \n JavaScript is a single-threaded programming language, which means it has a single Call Stack. Therefore it can do one thing at a time. \n \n JavaScript是单线程的编程语言，这就意味着其只有一个调用栈。因此，它一次只能做一件事情。 \n \n The Call Stack is a data structure which records basically where in the program we are. If we step into a function, we put it on the top of the stack. If we return from a function, we pop off the top of the stack. That’s all the stack can do. \n \n 调用栈是一种数据结构，它记录着我们在程序中的大概位置。当执行进入一个函数，会把它置于栈顶。如果从函数中返回，则会把它从栈顶移除。这就是调用栈所能够做的事情。 \n \n Let’s see an example. Take a look at the following code: \n \n 举个例子。代码如下： \n \n function   multiply ( x ,  y )   { \n     return  x  *  y ; \n } \n function   printSquare ( x )   { \n     var  s  =   multiply ( x ,  x ) ; \n    console . log ( s ) ; \n } \n printSquare ( 5 ) ; \n \n 1 2 3 4 5 6 7 8 When the engine starts executing this code, the Call Stack will be empty. Afterwards, the steps will be the following: \n \n 当引擎开始执行这段代码的时候，调用栈会被清空。然后，产生如下步骤： \n \n \n Each entry in the Call Stack is called a Stack Frame. \n \n 调用栈的每个入口被称为堆栈结构。 \n \n And this is exactly how stack traces are being constructed when an exception is being thrown — it is basically the state of the Call Stack when the exception happened. Take a look at the following code: \n \n 这正是当抛出异常时堆栈跟踪是如何被构造出来的 —— 当发生异常时这基本上是调用栈的状态。看如下代码： \n \n function   foo ( )   { \n     throw   new   Error ( 'SessionStack will help you resolve crashes :)' ) ; \n } \n function   bar ( )   { \n     foo ( ) ; \n } \n function   start ( )   { \n     bar ( ) ; \n } \n start ( ) ; \n \n 1 2 3 4 5 6 7 8 9 10 If this is executed in Chrome (assuming that this code is in a file called foo.js), the following stack trace will be produced: \n \n 如果在Chrome中执行（假设代码在foo.js文件中），将会产生如下跟踪栈： \n \n \n “Blowing the stack”  — this happens when you reach the maximum Call Stack size. And that could happen quite easily, especially if you’re using recursion without testing your code very extensively. Take a look at this sample code: \n \n \"堆栈溢出\"  —— 当你达到最大的调用栈大小会发生这种情况。这种情况很容易发生，尤其是当你使用递归而没有仔细检查代码的时候。查看如下代码： \n \n function   foo ( )   { \n     foo ( ) ; \n } \n foo ( ) ; \n \n 1 2 3 4 When the engine starts executing this code, it starts with calling the function “foo”. This function, however, is recursive and starts calling itself without any termination conditions. So at every step of the execution, the same function gets added to the Call Stack over and over again. It looks something like this: \n \n 当引擎开始执行这段代码时，它开始调用foo函数。然而，这是一个递归函数，它会不断的调用自己而没有任何终止条件。因此，在每一次执行过程中，调用栈会反复添加同样的函数。执行过程大概如下： \n \n \n At some point, however, the number of function calls in the Call Stack exceeds the actual size of the Call Stack, and the browser decides to take action, by throwing an error, which can look something like this: \n \n 然而，在某一时刻，调用栈中函数调用次数超出了调用栈的实际大小，浏览器就会抛出如下错误： \n \n \n Running code on a single thread can be quite easy since you don’t have to deal with complicated scenarios that are arising in multi-threaded environments — for example, deadlocks. \n \n 在单线程中运行代码会相当轻松，因为你不必去处理多线程环境中产生的复杂情况，比如死锁。 \n \n But running on a single thread is quite limiting as well. Since JavaScript has a single Call Stack,  what happens when things are slow? \n \n 但是在单线程中运行代码也会有相当多限制。由于JavaScript只有一个调用栈， 那么如果运行很慢会发生什么呢？ \n Concurrency & the Event Loop \n \n 并发和事件循环 \n \n What happens when you have function calls in the Call Stack that take a huge amount of time in order to be processed? For example, imagine that you want to do some complex image transformation with JavaScript in the browser. \n \n 当你在调用栈中有函数为了完成运行需要消耗大量的时间的时候会发生什么？比如，想象一下，你想在浏览器中用JavaScript完成一些复杂的图像转换。 \n \n You may ask — why is this even a problem? The problem is that while the Call Stack has functions to execute, the browser can’t actually do anything else — it’s getting blocked. This means that the browser can’t render, it can’t run any other code, it’s just stuck. And this creates problems if you want nice fluid UIs in your app. \n \n 你也许会问 —— 为什么这也算个问题？问题在于当调用栈有函数在执行时，浏览器实际上是不能做任何事情的 —— 它被阻塞了。这意味着浏览器不能够执行渲染，也不能运行任何代码，它被卡住啦。如果你想在app中拥有流畅的UI交互，那这将是一个问题。 \n \n And that’s not the only problem. Once your browser starts processing so many tasks in the Call Stack, it may stop being responsive for quite a long time. And most browsers take action by raising an error, asking you whether you want to terminate the web page. \n \n 并且，这并不是唯一的问题。一旦你的浏览器开始在调用栈中执行如此多的任务，浏览器可能会在相当长的一段时间内停止交互。大多数浏览器会抛出一个错误，询问你是否要关闭网页。 \n \n \n Now, that’s not the best user experience out there, is it? \n \n 现在，这并不是最好的用户体验，不是吗？ \n \n So, how can we execute heavy code without blocking the UI and making the browser unresponsive? Well, the solution is  asynchronous callbacks . \n \n 所以，我们如何在不阻塞UI以及不让浏览器停止响应的情况下执行运行缓慢（或者说耗时）的代码呢？办法是使用 异步回调 。 \n \n This will be explained in greater detail in Part 2 of the “How JavaScript actually works” tutorial: “Inside the V8 engine + 5 tips on how to write optimized code”. \n \n 这将会在 『JavaScript 工作原理』 第二章：『在V8 引擎中如何写最佳代码的 5 条小技巧』中进行详细阐述。 \n 参考文章 \n \n 翻译参考文章 \n \n ",summary:"Javascript工作原理：引擎、运行时及调用栈概览\n\nAs JavaScript is getting more and more popular, teams are leveraging its support on many levels in their stack - front-end, back-end, hybrid apps, embedded devices and much more.\n>随着Javascript越来越受欢迎，团队正凭借JavaScript在他们诸如前端、后端、混合式app、嵌入设备以及更多场景等开发栈的不同层面的支持。\n\nThis post is m ...",id:"post",pid:"post",readingTime:{text:"7 min read",minutes:6.135,time:368099.99999999994,words:1227}},{title:"正则表达式30分钟入门教程",frontmatter:{title:"正则表达式30分钟入门教程",description:"正则表达式30分钟入门教程",date:"2020-12-01",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201203211137.jpeg",tags:["正则表达式","JavaScript"],meta:[{name:"title",content:"正则表达式"},{name:"description",content:"正则表达式"},{name:"keywords",content:"正则表达式"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-12-01-regexp.html",relativePath:"_posts/2020-12-01-regexp.md",key:"v-5137b8a8",path:"/2020/12/01/regexp/",headers:[{level:2,title:"前言",slug:"前言"},{level:2,title:"如何使用本教程",slug:"如何使用本教程"},{level:2,title:"正则表达式到底是什么东西？",slug:"正则表达式到底是什么东西"},{level:2,title:"入门",slug:"入门"},{level:2,title:"元字符",slug:"元字符"},{level:2,title:"字符转义",slug:"字符转义"},{level:2,title:"重复",slug:"重复"},{level:2,title:"字符类",slug:"字符类"},{level:2,title:"分支条件",slug:"分支条件"},{level:2,title:"分组",slug:"分组"},{level:2,title:"反义",slug:"反义"},{level:2,title:"后向引用",slug:"后向引用"},{level:2,title:"零宽断言",slug:"零宽断言"},{level:2,title:"负向零宽断言",slug:"负向零宽断言"},{level:2,title:"注释",slug:"注释"},{level:2,title:"贪婪与懒惰",slug:"贪婪与懒惰"},{level:2,title:"平衡组/递归匹配",slug:"平衡组-递归匹配"},{level:2,title:"还有什么东西没提到",slug:"还有什么东西没提到"},{level:2,title:"参考文章",slug:"参考文章"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" 正则表达式30分钟入门教程 \n 前言 \n 最早看到这篇文章是在2017年11月8号，那个时候打算认真学一下正则表达式，于是就发现了这篇文章。但是，就在前几天整理打印的文章时，看到这篇文章时发现，当时自己写的笔记、写的表达式，竟然完全不知道是要干啥。其实对于正则表达式而言，就算是自己写的，过个一周半个月的（或者第二天）就看不懂啦要干啥啦。由于平时用正则表达式用的少，也忘的差不多啦。于是打算再来一遍，当时看的版本是V2.3.3，作者是 deerchao ，对作者表示感谢。 \n 本文将以原文为基础，辅以例子验证。 \n 如何使用本教程 \n 别被下面那些复杂的表达式吓倒，只要跟着我一步一步来，你会发现正则表达式其实并没有想像中的那么困难。当然，如果你看完了这篇教程之后，发现自己明白了很多，却又几乎什么都记不得，那也是很正常的——我认为，没接触过正则表达式的人在看完这篇教程后，能把提到过的语法记住80%以上的可能性为零。这里只是让你明白基本的原理，以后你还需要多练习，多使用，才能熟练掌握正则表达式。 \n 除了作为入门教程之外，本文还试图成为可以在日常工作中使用的正则表达式语法参考手册。就作者本人的经历来说，这个目标还是完成得不错的——你看，我自己也没能把所有的东西记下来，不是吗？ \n 本文介绍的大部分正则语法，在不同的正则表达式引擎中都可以使用，但也有一些会有所差异。本文介绍的是 .Net 下的正则表达式，其它环境下的具体情况可以在读完本文后去参考官方文档，或者查看 正则表达式引擎特性对比 。 \n 正则表达式到底是什么东西？ \n 在编写处理字符串的程序或者网页时，经常会有查找符合某些复杂规则的字符串的需要。 正则表达式 就是用于描述这些规则的工具。换句话说，正则表达式就是记录文本规则的代码。 \n 很可能你使用过Windows/Dos下用于文件查找的 通配符(wildcard) ，也就是*和？。如果你想查找某个目录下的所有word文件的话，你会搜索*.doc。在这里，*就会被解释为任意的字符串。和通配符类似，正则表达式也是用来进行文本匹配的工具，只不过比起通配符，它能更精确地描述你的需求——当然代价就是更复杂——比如你可以编写一个正则表达式，用来查找所有以0开头，后面跟着2～3个数字，然后是一个连字号“-”，最后是7或8位数字的字符串(像010-12345678或0376-7654321)。 \n \n ^0\\d{2,3}-\\d{7,8}$ \n \n \n (非原文)以下三种表达式都会创建相同的正在表达式： \n \n /ab+c/i; (字面量) \n new RegExp('ab+c', 'i'); (构造函数) \n new RegExp(/ab+c/, 'i'); (构造函数) \n \n \n \n \n 非原文 \n \n \n lastIndex属性 \n \n 表示正则表达式下次执行匹配操作时字符串下标位置。 \n var  r  =   / a(b) / g ; \nconsole . log ( r . lastIndex ) ;   // 0 \nr . test ( 'abcabc' ) ;   //true， 从字符串下标0开始匹配 \nconsole . log ( r . lastIndex ) ;   // 2 \nr . test ( 'abcabc' ) ;   //true， 从字符串下标2开始匹配 \nconsole . log ( r . lastIndex ) ;   // 5 \n \n 1 2 3 4 5 6 注意几点： \n \n 只有指定全局匹配g时，lastIndex才有效，否则一直为0; \n \n var  r  =   / a(b) / ;   // 没有指定全局m \nconsole . log ( r . lastIndex ) ;   // 0 \nr . test ( 'abcabc' ) ;   //true， 从字符串下标0开始匹配 \nconsole . log ( r . lastIndex ) ;   // 0 \nr . test ( 'abcabc' ) ;   //true， 从字符串下标0开始匹配 \nconsole . log ( r . lastIndex ) ;   // 0 \n \n 1 2 3 4 5 6 \n 每次执行全局模式匹配（通过exec或者test方法）时都会影响lastIndex的值; \n \n var  r  =   / a(b) / g ; \nconsole . log ( r . lastIndex ) ;   // 0 \nr . test ( 'abcabc' ) ;   //true， 从字符串下标0开始匹配 \nconsole . log ( r . lastIndex ) ;   // 2 \nr . test ( 'abcabc' ) ;   //true， 从字符串下标2开始匹配 \nconsole . log ( r . lastIndex ) ;   // 5 \nr . test ( 'abcabc' ) ;   //false， 从字符串下标5开始匹配 \nconsole . log ( r . lastIndex ) ;   // 0，下次又从头开始匹配了 \n \n 1 2 3 4 5 6 7 8 \n lastIndex属性是可读写的 \n \n var  r  =   / a(b) / g ; \nconsole . log ( r . lastIndex ) ;   // 0 \nr . test ( 'abcabc' ) ;   //true， 从字符串下标0开始匹配 \nconsole . log ( r . lastIndex ) ;   // 2 \nr . test ( 'abcabc' ) ;   //true， 从字符串下标2开始匹配 \nconsole . log ( r . lastIndex ) ;   // 5 \nr . lastIndex  =   0 ;   // 修改为0，下次从头开始 \nr . test ( 'abcabc' ) ;   //true， 从字符串下标0开始匹配 \nconsole . log ( r . lastIndex ) ;   // 0，下次又从头开始匹配了 \n \n 1 2 3 4 5 6 7 8 9 \n 入门 \n 学习正则表达式的最好方法是从例子开始，理解例子之后再自己对例子进行修改，实验。下面给出了不少简单的例子，并对它们作了详细的说明。 \n 假设你在一篇英文小说里查找hi，你可以使用正则表达式 hi 。 \n 这几乎是最简单的正则表达式了，它可以精确匹配这样的字符串：由两个字符组成，前一个字符是h,后一个是i。通常，处理正则表达式的工具会提供一个忽略大小写的选项，如果选中了这个选项，它可以匹配hi,HI,Hi,hI这四种情况中的任意一种。 \n 不幸的是，很多单词里包含hi这两个连续字符，比如him, history, high等等。用 hi 来查询的话，这里边的hi也会被查出来。如果要精确地查找hi这个单词的话，我们应该用 \\bhi\\b 。 \n \\b 是正则表达式规定的一个特殊代码(也有人叫它 元字符，metacharacter ), 代表着单词的开头或结尾，也就是单词的分界处。虽然通常英文的单词是由空格，标点符号或者换行符来分隔的，但是 \\b 并不匹配这些单词分隔字符中的任何一个，它 只匹配一个位置 。 \n 假如你要找的是hi后面不远处跟着一个Lucy，你应该用 \\bhi\\b.*\\bLucy\\b 。 \n 这里， . 是另一个元字符，匹配 除了换行符 以外的任意字符。 * 同样是元字符，不过它代表的不是字符，也不是位置，而是数量——它指定 * 前边的内容可以连续重复使用任意次以使整个表达式得到匹配。因此， .* 连在一起就意味着任意数量的不包含换行的字符。现在 \\bhi\\b.*\\bLucy\\b 的意思就很明显了：先是一个单词hi,然后是任意个任意字符(但不能是换行)，最后是Lucy这个单词。 \n 如果同时使用其它元字符，我们就能构造出功能更强大的正则表达式。比如下面这个例子： \n 0\\d\\d-\\d\\d\\d\\d\\d\\d\\d\\d 匹配这样的字符串：以0开头，然后是两个数字，然后是一个连字号“-”，最后是8个数字(也就是中国的电话号码。当然，这个例子只能匹配区号为3位的情形)。 \n 这里的 \\d 是个新的元字符，匹配一位数字(0，或1，或2，或……)。-不是元字符，只匹配它本身——连字符(或者减号，或者中横线，或者随你怎么称呼它)。 \n 为了避免那么多烦人的重复，我们也可以这样写这个表达式： 0\\d{2}-\\d{8} 。这里 \\d 后面的 {2}({8}) 的意思是前面 \\d 必须连续重复匹配2次(8次)。 \n 元字符 \n 现在你已经知道几个很有用的元字符了，如 \\b , . , * ，还有 \\d 正则表达式里还有更多的元字符，比如 \\s 匹配任意的空白符，包括空格，制表符(Tab)，换行符，中文全角空格等。 \\w 匹配字母或数字或下划线等。 \n \n (非原文)在原文中表述 \\w 是可以匹配字母或数字或下划线或汉字。但是在JavaScript中是不可以匹配汉字的。然后在网上查找了一下资料： \n \n \\w 能不能匹配汉字要视你的操作系统和你的应用环境而定。 \\w 匹配任意一个字母或数字或下划线，也就是A～Z,a～z,0～9, 中任意一个。一般来说，是这样的，但是在某些情况下， \\w 也会匹配本地字符集，比如中文系统的中文，全角数字等，所以在明确要求是A～Z,a～z,0～9,  中的一个的时候，用[A-Za-z0-9_]，而不用 \\w 。 \n \n \n 下面看更多例子： \n \\ba\\w*\\b 匹配以字母a开头的单词——先是某个单词开始处( \\b )，然后是字母a,然后是任意数量的字母或数字( \\w* )，最后是单词结束处( \\b )。 \n \\d+ 匹配1个或更多连续的数字。这里的 + 是和 * 类似的元字符，不同的是 * 匹配重复任意次(可能是0次)，而+则匹配重复1次或更多次。 \n \\b\\w{6}\\b 匹配刚好6个字符的单词。 \n 常用的元字符： \n \n \n \n 代码 \n 说明 \n \n \n \n \n . \n 匹配除换行符意外的任意字符 \n \n \n \\w \n 匹配字母或数字或下划线 \n \n \n \\s \n 匹配任意的空白符 \n \n \n \\d \n 匹配数字 \n \n \n \\b \n 匹配单词的开头或结尾 \n \n \n ^ \n 匹配字符串的开始 \n \n \n $ \n 匹配字符串的结束 \n \n \n \n 元字符 ^ 和 $ 都匹配一个位置，这和 \\b 有点类似。 ^ 匹配你要用来查找的字符串的开头， $ 匹配结尾。这两个代码在验证输入的内容时非常有用，比如一个网站如果要求你填写的QQ号必须为5位到12位数字时，可以使用： ^\\d{5,12}$ 。 \n 这里的 {5,12} 和前面介绍过的 {2} 是类似的，只不过 {2} 匹配只能不多不少重复2次， {5,12} 则是重复的次数不能少于5次，不能多于12次，否则都不匹配。 \n 因为使用了 ^ 和 $ ，所以输入的整个字符串都要用来和 \\d{5,12} 来匹配，也就是说整个输入必须是5到12个数字，因此如果输入的QQ号能匹配这个正则表达式的话，那就符合要求了。 \n \n 如果不使用^和$的话，对于\\d{5,12}而言，使用这样的方法就只能保证字符串里包含5到12连续位数字，而不是整个字符串就是5到12位数字。 \n \n 和忽略大小写的选项类似，有些正则表达式处理工具还有一个处理多行的选项。如果选中了这个选项， ^ 和 $ 的意义就变成了匹配行的开始处和结束处。 \n 字符转义 \n 如果你想查找元字符本身的话，比如你查找 . ,或者 * ,就出现了问题：你没办法指定它们，因为它们会被解释成别的意思。这时你就得使用 \\ 来取消这些字符的特殊意义。因此，你应该使用 \\. 和 \\* 。当然，要查找 \\ 本身，你也得用 \\\\ 。 \n 例如： deerchao\\.cn 匹配deerchao.cn， C:\\\\Windows 匹配C:\\Windows。 \n 重复 \n 你已经看过了前面的 * , + , {2} , {5,12} 这几个匹配重复的方式了。下面是正则表达式中所有的限定符(指定数量的代码，例如 * , {5,12} 等)： \n 常用的限定符 \n \n \n \n 代码/语法 \n 说明 \n \n \n \n \n * \n 重复零次或更多次 \n \n \n + \n 重复一次或更多次 \n \n \n ？ \n 重复零次或一次 \n \n \n {n} \n 重复n次 \n \n \n {n,} \n 重复n次或更多次 \n \n \n {n,m} \n 重复n到m次 \n \n \n \n 下面是一些使用重复的例子： \n Windows\\d+ 匹配Windows后面跟1个或更多数字 \n ^\\w+ 匹配一行的第一个单词(或整个字符串的第一个单词，具体匹配哪个意思得看选项设置) \n 字符类 \n 要想查找数字，字母或数字，空白是很简单的，因为已经有了对应这些字符集合的元字符，但是如果你想匹配没有预定义元字符的字符集合(比如元音字母a,e,i,o,u),应该怎么办？ \n 很简单，你只需要在 方括号 里列出它们就行了，像 [aeiou] 就匹配任何一个英文元音字母， [.?!] 匹配标点符号(.或?或!)。 \n 我们也可以轻松地指定一个字符范围，像 [0-9] 代表的含意与 \\d 就是完全一致的：一位数字；同理 [a-z0-9A-Z_] 也完全等同于\\w（如果只考虑英文的话）。 \n 下面是一个更复杂的表达式： \\(?0\\d{2}[) -]?\\d{8} 。 \n 这个表达式可以匹配几种格式的电话号码，像(010)88886666，或022-22334455，或02912345678等。我们对它进行一些分析吧：首先是一个转义字符 \\( ,它能出现0次或1次( ? ),然后是一个0，后面跟着2个数字( \\d{2} )，然后是)或-或空格中的 一个 ，它出现1次或不出现( ? )，最后是8个数字( \\d{8} )。 \n \n “(”和“)”也是元字符，后面的分组节里会提到，所以在这里需要使用转义。 \n 分支条件 \n 不幸的是，刚才那个表达式也能匹配010)12345678或(022-87654321这样的“不正确”的格式。要解决这个问题，我们需要用到 分枝条件 。正则表达式里的分枝条件指的是有几种规则，如果满足其中任意一种规则都应该当成匹配，具体方法是用 | 把不同的规则分隔开。听不明白？没关系，看例子： \n 0\\d{2}-\\d{8}|0\\d{3}-\\d{7} 这个表达式能匹配两种以连字号分隔的电话号码：一种是三位区号，8位本地号(如010-12345678)，一种是4位区号，7位本地号(如0376-2233445)。 \n \\(0\\d{2}\\)[- ]?\\d{8}|0\\d{2}[- ]?\\d{8} 这个表达式匹配3位区号的电话号码，其中区号可以用小括号括起来，也可以不用，区号与本地号间可以用连字号或空格间隔，也可以没有间隔。你可以试试用分枝条件把这个表达式扩展成也支持4位区号的。 \n \n 也支持4为区号： \\(0\\d{2}\\)[- ]?\\d{8}|0\\d{2}[- ]?\\d{8}|\\(0\\d{3}\\)[- ]?\\d{7}|0\\d{3}[- ]?\\d{7} \n 分组 \n 我们已经提到了怎么重复单个字符(直接在字符后面加上限定符就行了)；但如果想要重复多个字符又该怎么办？你可以用小括号来指定子表达式(也叫做分组)，然后你就可以指定这个子表达式的重复次数了，你也可以对子表达式进行其它一些操作(后面会有介绍)。 \n (\\d{1,3}\\.){3}\\d{1,3} 是一个简单的IP地址匹配表达式。要理解这个表达式，请按下列顺序分析它： \\d{1,3} 匹配1到3位的数字， (\\d{1,3}\\.){3} 匹配三位数字加上一个英文句号(这个整体也就是这个分组)重复3次，最后再加上一个一到三位的数字( \\d{1,3} )。 \n 不幸的是，它也将匹配256.300.888.999这种不可能存在的IP地址。如果能使用算术比较的话，或许能简单地解决这个问题，但是正则表达式中并不提供关于数学的任何功能，所以只能使用冗长的分组，选择，字符类来描述一个正确的IP地址： ((2[0-4]\\d|25[0-5]|[01]?\\d\\d?)\\.){3}(2[0-4]\\d|25[0-5]|[01]?\\d\\d?) 。 \n \n IP地址是一个32位的二进制数，通常被分割为4个“8位二进制数”（也就是4个字节）。IP地址通常用“点分十进制”表示成（a.b.c.d）的形式，其中，a,b,c,d都是0~255之间的十进制整数。 \n \n 理解这个表达式的关键是理解2[0-4]\\d|25[0-5]|[01]?\\d\\d?，这里我就不细说了，你自己应该能分析得出来它的意义。 \n \n 其实 2[0-4]\\d|25[0-5]|[01]?\\d\\d?200-249 匹配的是200-249或250-255或0-199，这不就是0-255吗？ \n 反义 \n 有时需要查找不属于某个能简单定义的字符类的字符。比如想查找除了数字以外，其它任意字符都行的情况，这时需要用到 反义 ： \n 常用的反义代码： \n \n \n \n 代码/语法 \n 说明 \n \n \n \n \n \\W \n 匹配任意不是字母，数字，下划线的字符 \n \n \n \\S \n 匹配任意不是空白符的字符 \n \n \n \\D \n 匹配任意非数字的字符 \n \n \n \\B \n 匹配不是单词开头或结束的位置 \n \n \n [^x] \n 匹配除了x以外的任意字符 \n \n \n [^aeiou] \n 匹配除了aeiou这几个字母以外的任意字符 \n \n \n \n 例子： \\S+ 匹配不包含空白符的字符串。 <a[^>]+> 匹配用尖括号括起来的以a开头的字符串。 \n 后向引用 \n 使用 小括号 指定一个子表达式后， 匹配这个子表达式的文本 (也就是此分组捕获的内容)可以在表达式或其他程序中作进一步的处理。默认情况下，每个分组会自动拥有一个 组号 ，规则是：从左向右，以分组的左括号为标志，第一个出现的分组的组号为1，第二个为2，以此类推。 \n \n 其实，组号分配还不像我刚说的那么简单： \n \n 分组0对应整个表达式 \n 实际上组号分配过程是要从左向右扫描两遍的：第一遍只给未命名组分配，第二遍只给命名组分配——因此所有命名组的组号都大于未命名的组号 \n 你可以使用 (?:exp) 这样的语法来剥夺一个分组对组号分配的参与权． \n \n \n 后向引用 用于重复搜索前面某个分组匹配的文本。例如，\\1代表分组1匹配的文本。难以理解？请看示例： \n \\b(\\w+)\\b\\s+\\1\\b 可以用来匹配重复的单词，像 go go , 或者 kitty kitty 。这个表达式首先是一个单词，也就是单词开始处和结束处之间的多于一个的字母或数字( \\b(\\w+)\\b ), 这个单词会被捕获到编号为1的分组中，然后是1个或几个空白字符( \\s+ ), 最后是分组1中捕获的内容(也就是前面匹配的那个单词)( \\1 )。 \n 你也可以自己指定子表达式的 组名 。要指定一个子表达式的组名，请使用这样的语法： (?<Word>\\w+) (或者把尖括号换成 ' 也行： (?'Word'\\w+) ), 这样就把 \\w+ 的组名指定为Word了。要反向引用这个分组 捕获 的内容，你可以使用 \\k<Word> ,所以上一个例子也可以写成 \\b(?<Word>\\w+)\\b\\s+\\k<Word>\\b 。 \n 使用小括号的时候，还有很多特定用途的语法。下面列出了最常用的一些： \n \n \n \n 分类 \n 代码/语法 \n 说明 \n \n \n \n \n 捕获 \n (exp) \n 匹配exp，并捕获文本到自动命名的组里 \n \n \n 捕获 \n (?<name>exp) \n 匹配exp，并捕获文本到名称为name的组里，也可以写成(?'name'exp) \n \n \n 捕获 \n (?:exp) \n 匹配exp，不捕获匹配的文本，也不给此组分配组号 \n \n \n 零宽断言 \n (?=exp) \n 匹配exp前面的位置(匹配后面是exp的数据)<正向肯定预查> \n \n \n 零宽断言 \n (?<=exp) \n 匹配exp后面的位置(匹配前面是exp的数据) \n \n \n 零宽断言 \n (?!exp) \n 匹配后面跟的不是exp的位置 \n \n \n 零宽断言 \n (?<!exp) \n 匹配前面不是exp的位置 \n \n \n 注释 \n (?#comment) \n 这种类型的分组不对正则表达式的处理产生任何影响，用于提供注释让人阅读 \n \n \n \n 我们已经讨论了前两种语法。第三个(?:exp)不会改变正则表达式的处理方式，只是这样的组匹配的内容 不会像前两种那样被捕获到某个组里面，也不会拥有组号 。这在使用或字符 (|) 来组合一个模式的各个部分是很有用。例如 industr(?:y|ies) 就是一个比 industry|industries 更简略的表达式。 \n 零宽断言 \n 接下来的四个用于查找在某些内容(但并不包括这些内容)之前或之后的东西，也就是说它们像 \\b,^,$ 那样用于指定一个位置，这个位置应该满足一定的条件(即断言)，因此它们也被称为零宽断言。最好还是拿例子来说明吧： \n (?=exp)  也叫 零宽度正预测先行断言 , 它断言自身出现的位置的后面能匹配表达式exp。比如 \\b\\w+(?=ing\\b) ，匹配以ing结尾的单词的前面部分(除了ing以外的部分)，如查找I'm singing while you're dancing.时，它会匹配sing和danc。再比如， Windows(?=95|98|NT|2000) 能匹配“Windows2000”中的“Windows”，但不能匹配“Windows3.1”中的“Windows”。 \n (?<=exp) 也叫 零宽度正回顾后发断言 ，它断言自身出现的位置的前面能匹配表达式exp。比如 (?<=\\bre)\\w+\\b 会匹配以re开头的单词的后半部分(除了re以外的部分)，例如在查找reading a book时，它匹配ading。 \n 假如你想要给一个很长的数字中每三位间加一个逗号(当然是从右边加起了)，你可以这样查找需要在前面和里面添加逗号的部分： ((?<=\\d)\\d{3})+\\b ，用它对1234567890进行查找时结果是234567890。 \n 下面这个例子同时使用了这两种断言： (?<=\\s)\\d+(?=\\s) 匹配以空白符间隔的数字( 再次强调，不包括这些空白符 )。 \n 负向零宽断言 \n 前面我们提到过怎么查找 不是某个字符或不在某个字符类里 的字符的方法(反义)。但是如果我们只是想 确保某个字符没有出现，但并不想去匹配它 时怎么办？例如，如果我们想查找这样的单词--它里面出现了字母q,但是q后面跟的不是字母u,我们可以尝试这样： \\b\\w*q[^u]\\w*\\b 匹配包含字母q，但q后面不是字母u的单词。但是如果多做测试(或者你思维足够敏锐，直接就观察出来了)，你会发现，如果q出现在单词的结尾的话，像Iraq,Benq，这个表达式就会出错。这是因为[^u]总要匹配一个字符，所以如果q是单词的最后一个字符的话，后面的 [^u] 将会匹配q后面的单词分隔符(可能是空格，或者是句号或其它的什么)，后面的 \\w*\\b 将会匹配下一个单词，于是 \\b\\w*q[^u]\\w*\\b 就能匹配整个Iraq fighting。 负向零宽断言能解决这样的问题，因为它只匹配一个位置，并不消费任何字符 。现在，我们可以这样解决这个问题： \\b\\w*q(?!u)\\w*\\b 。 \n 零宽度负预测先行断言 (?!exp) ,断言此位置的后面不能匹配表达式exp。例如： \\d{3}(?!\\d) 匹配三位数字，而且这三位数字的后面不能是数字； \\b((?!abc)\\w)+\\b 匹配不包含连续字符串abc的单词。 \n 同理，我们可以用 (?<!exp) , 零宽度负回顾后发断言 来断言此位置的前面不能匹配表达式exp： (?<![a-z])\\d{7} 匹配前面不是小写字母的七位数字。 \n 一个更复杂的例子： (?<=<(?<labelName>\\w+)>).*(?=<\\/\\k<labelName>>) 匹配不包含属性的简单HTML标签内里的内容。 (?<=<(\\w+)>) 指定了这样的前缀：被尖括号括起来的单词(比如可能是 <b> )，然后是 .* (任意的字符串),最后是一个后缀 (?=<\\/\\1>) 。注意后缀里的 \\/ ，它用到了前面提过的字符转义； \\1 则是一个反向引用，引用的正是捕获的第一组，前面的 (\\w+) 匹配的内容，这样如果前缀实际上是 <b> 的话，后缀就是 </b> 了。整个表达式匹配的是 <b> 和 </b> 之间的内容( 再次提醒，不包括前缀和后缀本身 )。 \n \n (?<=<(?<labelName>\\w+)>).*(?=<\\/\\k<labelName>>) 这个在原文是这样写的(效果是一样的):  (?<=<(\\w+)>).*(?=<\\/\\1>) \n 注释 \n 小括号的另一种用途是通过语法(?#comment)来包含注释。例如： 2[0-4]\\d(?#200-249)|25[0-5](?#250-255)|[01]?\\d\\d?(?#0-199) 。 \n 要包含注释的话，最好是启用“忽略模式里的空白符”选项，这样在编写表达式时能任意的添加空格，Tab，换行，而实际使用时这些都将被忽略。启用这个选项后，在#后面到这一行结束的所有文本都将被当成注释忽略掉。 \n 贪婪与懒惰 \n 当正则表达式中包含能接受重复的限定符时，通常的行为是（在使整个表达式能得到匹配的前提下）匹配尽可能多的字符。以这个表达式为例： a.*b ，它将会匹配最长的以a开始，以b结束的字符串。如果用它来搜索aabab的话，它会匹配整个字符串aabab。这被称为 贪婪匹配 。 \n 有时，我们更需要 懒惰匹配 ，也就是匹配尽可能少的字符。前面给出的限定符都可以被转化为懒惰匹配模式，只要在它后面加上一个问号?。这样 .*? 就意味着匹配任意数量的重复，但是在能使整个匹配成功的前提下使用最少的重复。现在看看懒惰版的例子吧： \n a.*?b 匹配最短的，以a开始，以b结束的字符串。如果把它应用于aabab的话，它会匹配aab（第一到第三个字符）和ab（第四到第五个字符）。 \n 懒惰限定符 \n \n \n \n 代码/语法 \n 说明 \n \n \n \n \n *? \n 重复任意次，但尽可能少重复 \n \n \n +? \n 重复一次或更多次，但尽可能少重复 \n \n \n ?? \n 重复零次或一次，但尽可能少重复 \n \n \n {n?} \n 重复n次，但尽可能少重复 \n \n \n {n,?} \n 重复n次或更多次，但尽可能少重复 \n \n \n {n,m?} \n 重复n到m次，但尽可能少重复 \n 平衡组/递归匹配 \n 有时我们需要匹配像 (100*(50+15)) 这样的可嵌套的层次性结构，这时简单地使用 \\(.+\\) 则只会匹配到最左边的左括号和最右边的右括号之间的内容(这里我们讨论的是贪婪模式，懒惰模式也有下面的问题)。假如原来的字符串里的左括号和右括号出现的次数不相等，比如 (5/(3+2))) ，那我们的匹配结果里两者的个数也不会相等。有没有办法在这样的字符串里匹配到最长的， 配对 的括号之间的内容呢？ \n 为了避免 ( 和 \\( 把你的大脑彻底搞糊涂，我们还是用尖括号代替圆括号吧。现在我们的问题变成了如何把 xx<aa<bbb><bbb>aa>yy 这样的字符串里，最长的配对的尖括号内的内容捕获出来？ \n 这里需要用到以下的语法构造： \n \n (?'group') 把捕获的内容命名为group，并压入堆栈(stack) \n (?'-group') 从堆栈上弹出最后压入堆栈的名为group的捕获内容，如果堆栈本来为空，则本组的匹配失败 \n (?(group)yes|no) 如果堆栈上存在名为group的捕获内容的话，继续匹配yes部分的表达式，否则继续匹配no部分 \n (?!) 零宽负向先行断言，由于没有后缀表达式，试图匹配总是失败 \n \n 我们需要做的是每碰到了左括号，就在压入一个\"Open\",每碰到一个右括号，就弹出一个，到了最后就看看堆栈是否为空——如果不为空那就证明左括号比右括号多，那匹配就应该失败。正则表达式引擎会进行回溯(放弃最前面或最后面的一些字符)，尽量使整个表达式得到匹配。 \n <                   #最外层的左括号\n  [^<>]*            #它后面非括号的内容\n  (\n      (\n        (?'Open'<)  #左括号，压入\"Open\"\n        [^<>]*      #左括号后面的内容\n      )+\n      (\n        (?'-Open'>) #右括号，弹出一个\"Open\"\n        [^<>]*      #右括号后面的内容\n      )+\n  )*\n  (?(Open)(?!))     #最外层的右括号前检查\n                    #若还有未弹出的\"Open\"\n                    #则匹配失败\n\n>                   #最外层的右括号\n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 \n 这个平衡组要单独写一篇学习文章。 (flag+1) \n \n 平衡组的一个最常见的应用就是匹配HTML，下面这个例子可以匹配嵌套的div标签： <div[^>]*>[^<>]*(((?'open'<div[^>]*>)[^<>]*)+((?'-open'<\\/div>)[^<>]*)+)*(?(open)(?!))<\\/div> \n 还有什么东西没提到 \n 上边已经描述了构造正则表达式的大量元素，但是还有很多没有提到的东西。下面是一些未提到的元素的列表，包含语法和简单的说明。你可以在网上找到更详细的参考资料来学习它们--当你需要用到它们的时候。如果你安装了MSDN Library,你也可以在里面找到.Net下正则表达式详细的文档。这里的介绍很简略，如果你需要更详细的信息，而又没有在电脑上安装MSDN Library,可以查看 关于正则表达式语言元素的MSDN在线文档 。 \n 尚未详细讨论的语法: \n \n \n \n 代码/语法 \n 说明 \n \n \n \n \n \\a \n 报警字符(打印它的效果是电脑嘀一声) \n \n \n \\b \n 通常是单词分界位置，但如果在字符类里使用代表退格 \n \n \n \\t \n 制表符，Tab \n \n \n \\r \n 回车 \n \n \n \\v \n 竖向制表符 \n \n \n \\f \n 换页符 \n \n \n \\n \n 换行符 \n \n \n \\e \n Escape \n \n \n \\0nn \n ASCII代码中八进制代码为nn的字符 \n \n \n \\xnn \n ASCII代码中十六进制代码为nn的字符 \n \n \n \\unnnn \n Unicode代码中十六进制代码为nnnn的字符 \n \n \n \\cN \n ASCII控制字符。比如\\cC代表Ctrl+C \n \n \n \\A \n 字符串开头(类似^，但不受处理多行选项的影响) \n \n \n \\Z \n 字符串结尾或行尾(不受处理多行选项的影响) \n \n \n \\z \n 字符串结尾(类似$，但不受处理多行选项的影响) \n \n \n \\G \n 当前搜索的开头 \n \n \n \\p{name} \n Unicode中命名为name的字符类，例如\\p{IsGreek} \n \n \n (?>exp) \n 贪婪子表达式 \n \n \n (?<x>-<y>exp) \n 平衡组 \n \n \n (?im-nsx:exp) \n 在子表达式exp中改变处理选项 \n \n \n (?im-nsx) \n 为表达式后面的部分改变处理选项 \n 参考文章 \n \n 正则表达式30分钟入门教程 \n RegExp \n 关于\\w能不能匹配中文字符 \n 正则表达式之(exp),(?:exp),(?=exp) 理解 \n JS-RegExp函数 \n 正则表达式——详细讲解平衡组 \n \n ",summary:"\n前言\n\n最早看到这篇文章是在2017年11月8号，那个时候打算认真学一下正则表达式，于是就发现了这篇文章。但是，就在前几天整理打印的文章时，看到这篇文章时发现，当时自己写的笔记、写的表达式，竟然完全不知道是要干啥。其实对于正则表达式而言，就算是自己写的，过个一周半个月的（或者第二天）就看不懂啦要干啥啦。由于平时用正则表达式用的少，也忘的差不多啦。于是打算再来一遍，当时看的版本是V2.3.3，作者是deerchao，对作者表示感谢。\n\n本文将以原文为基础，辅以例子验证。\n\n如何使用本教程\n\n别被下面那些复杂的表达式吓倒，只要跟着我一步一步来，你会发现正则表达式其实并没有想像中的那么困难。当然， ...",id:"post",pid:"post",readingTime:{text:"3 min read",minutes:2.74,time:164400,words:548}},{title:"详解平衡组",frontmatter:{title:"详解平衡组",description:"详解平衡组",date:"2020-12-09",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqs/blogImage/raw/master/blogImage/20201208172723.jpg",tags:["正则表达式","JavaScript"],meta:[{name:"title",content:"正则表达式, 平衡组"},{name:"description",content:"正则表达式, 平衡组"},{name:"keywords",content:"正则表达式, 平衡组"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-12-09-regexp-NFA.html",relativePath:"_posts/2020-12-09-regexp-NFA.md",key:"v-715cea78",path:"/2020/12/09/regexp-nfa/",headers:[{level:2,title:"NFA引擎匹配原理",slug:"nfa引擎匹配原理"},{level:3,title:"正则表达式引擎",slug:"正则表达式引擎"},{level:3,title:"预备知识",slug:"预备知识"},{level:3,title:"正则表达式匹配文本过程",slug:"正则表达式匹配文本过程"},{level:2,title:"平衡组的概念及作用",slug:"平衡组的概念及作用"},{level:2,title:"平衡组的匹配原理",slug:"平衡组的匹配原理"},{level:2,title:"参考文章",slug:"参考文章"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" 详解平衡组 \n 在之前回顾 正则表达式30分钟入门 这篇文章的时候，发现最后一节的平衡组理解起来有些困难。于是，查找了一些资料，记录一下。 \n NFA引擎匹配原理 \n 正则表达式引擎 \n 正则表达式引擎大体可分为不同的两类： DEA 和 NFA ，而 NFA 又基本上可以分为 传统型NFA 和 POSIX NFA 。 \n DFA :  Deterministic finite automaton  确定型有穷自动机 \n NFA :  Non-deterministic finite automaton  非确定型有穷自动机 \n DFA 引擎因为不需要回溯，所以匹配快，但不支持捕获组，所以也就不支持反向引用和 $number 匹配，目前使用DFA引擎的语言和工具主要有 awk 、 egrep 和 lex 。 \n POSIX NFA 主要指符合POSIX标准的引擎，它的特点主要是提供 longest-leftmost 匹配，也就是在找到最左侧最长匹配之前，它将继续回溯。同 DFA 一样，非贪婪模式或者说忽略优先量词对于 POSIX NFA 同样是没有意义的。 \n 大多数语言和工具使用的是 传统型的NFA 引擎，它有一些 DFA 不支持的属性： \n \n 捕获组、反向引用和 $number 引用方式 \n 环视(Lookaround， (?<=exp) 、 (?<!exp) 、 (?=exp) 、 (?!exp) )，或者有的有文章叫做预搜索 \n 忽略优化量词（ ?? 、 *? 、 +? 、 {m,n}? 、 {m,}? ），或者有的文章叫做非贪婪模式，固化分组 (?<exp) \n 预备知识 \n 字符串组成 \n \n 对于\"abc\"而言，包括3个字符和4个位置。 \n 占有字符和零宽度 \n 正则表达式匹配过程中，如果子表达式匹配到的是字符内容，而非位置，并被保存到最终的匹配结果中，那么就认为这个子表达式是占有字符的；如果子表达式匹配的仅仅是位置，或者匹配的内容并不保存到最终的匹配结果中，那么就认为这个子表达式是零宽度的。 \n 占有字符是互斥的，零宽度是非互斥的。也就是一个字符，同一时间只能由一个子表达式匹配，而一个位置，却可以同时由多个零宽度的子表达式匹配。 \n 控制权和传动 \n 正则的匹配过程，通常情况下都是由一个子表达式(可能是一个普通的字符、元字符或元字符序列组成)取得控制权，从字符的某一位置开始尝试匹配，一个子表达式开始尝试匹配的位置，是从前一个子表达式匹配成功的结束位置开始的。如正则表达式： \n (子表达式1)(子表达式2) \n 假设 (子表达式1) 为零宽度表达式，由于它匹配开始和结束的位置是同一个，如位置0，那么 (子表达式2) 是从位置0开始尝试匹配的。 \n 假设 (子表达式1) 为占有字符的表达式，由于它匹配开始和结束的位置不是同一个，如匹配成功开始于位置0，结束于位子2，那么 (子表达式2) 是从位置2开始尝试匹配的。 \n 而对于整个表达式来说，通常是由字符串位置0开始尝试匹配的。如果在位置0开始的尝试，匹配到字符长某一位置时整个表达式匹配失败，那么引擎会使正则想前 传动 ，整个表达式从位置1开始重新尝试匹配，依此类推，直到报告匹配成功或尝试到最后一个位置报告匹配失败。 \n 回溯和备选状态 \n 由上文可以知道，NFA引擎是用表达式去匹配文本，而表达式又有若干分支和范围，一个分支或者范围匹配失败并不意味着最终匹配失败，正则引擎会去尝试下一个分支或者范围。 \n 正是因为这样的机制，引申出了NFA引擎的核心特点——回溯。 \n 首先，我们要区分备选状态和回溯。 \n 什么是备选状态？就是说这一个分支不行，我就换一个分支，这个范围不行，那我就换一个范围。正则表达式中可以商榷的部分就叫做 备选状态 。 \n 备选状态可以实现模糊匹配 ，是正则表达式能力的一方面。 \n 回溯可不是个好东西。想象一下，面前有两条路，你选择了一条，走到尽头发现是条死路，你只好原路返回尝试另一条路。这个原路返回的过程就叫回溯，它在正则中的含义是吐出已经匹配过的文本。 \n 我们来看两个例子： \n 'abbbc' . match ( / ab{1,3}c / ) ; \n // [\"abbbc\", index: 0, input: \"abbbc\", groups: undefined] \n 'abc' . match ( / ab{1,3}c / ) ; \n // [\"abc\", index: 0, input: \"abc\", groups: undefined] \n \n 1 2 3 4 第一个例子，第一次a匹配a成功，接着碰到贪婪匹配，不巧正好是三个b贪婪得逞，最后用c匹配c成功。 \n \n \n \n 正则 \n 文本 \n \n \n \n \n /a/ \n a \n \n \n /ab{1,3}/ \n ab \n \n \n /ab{1,3}/ \n abb \n \n \n /ab{1,3}/ \n abbb \n \n \n /ab{1,3}c/ \n abbbc \n \n \n \n 第二个例子的区别在于文本只有一个b。所以表达式在匹配第一个b成功后继续尝试匹配b，然而它见到的只有c。不得已将c吐出来，委屈一下，毕竟贪婪匹配也只是尽量匹配更多嘛，还是要臣服于匹配成功这个目标。最后不负众望用c匹配c成功。在成功匹配第一个b之后，继续尝试匹配b，用b匹配c失败，会发生一次控制权的转让，用c去匹配c。 \n \n \n \n 正则 \n 文本 \n \n \n \n \n /a/ \n a \n \n \n /ab{1,3}/ \n ab \n \n \n /ab{1,3}/ \n abc \n \n \n /ab{1,3}/ \n ab \n \n \n /ab{1,3}c/ \n abc \n \n \n \n 这个例子没有发生回溯。 \n \n 这是作者在文中提出的观点。在网上也有人认为这是发生了回溯的。就我个人而言，我是赞同作者的观点的。其实，是否发生回溯，可以通过是否是由于整体匹配失败而发生位置传动进行重新匹配来判断。如果是在某一次匹配过程中分支或范围匹配失败，需要转让控制权，这个过程是不叫回溯的。相反，由于整体匹配失败（分支和范围切换后依然失败）需要进行位置传动进行重新匹配，这个叫回溯。（个人理解） \n \n 下面看一个真正发生回溯的例子： \n 'ababc' . match ( / ab{1,3}c / ) ; \n // [\"abc\", index: 2, input: \"ababc\", groups: undefined] \n \n 1 2 匹配过程： \n \n 从位置0开始匹配，a匹配a成功 \n 控制权转让给 b{1,3} , b{1,3} 尝试匹配b，匹配成功 \n 接着继续匹配b，遇到的是a，匹配失败 \n 此时会回到备选状态，不再匹配b，将控制权转让给c，c匹配a，匹配失败，这个时候无备选状态，报告第一次匹配失败 \n 进行回溯，发生位置传动，尝试在位置1重新开始匹配，用a匹配b，匹配失败 \n 再次发生位置传动，从位置2开始匹配，a匹配a，匹配成功 \n 转让控制权给 b{1,3} ， b{1,3} 尝试匹配b，匹配成功 \n 接着继续匹配b，遇到的是c，匹配失败 \n 此时会回到备选状态，不再匹配b，将控制权转让给c，c匹配c，匹配成功 \n \n \n \n \n 正则 \n 文本 \n \n \n \n \n /a/ \n a \n \n \n /ab{1,3}/ \n ab \n \n \n /ab{1,3}/ \n aba \n \n \n /ab{1,3}/ \n ab \n \n \n /ab{1,3}c/ \n aba \n \n \n /a/ \n ab(位置传动，尝试在位置1重新开始匹配) \n \n \n /a/ \n aba(位置传动，尝试在位置2重新开始匹配) \n \n \n /ab{1,3}/ \n abab \n \n \n /ab{1,3}/ \n ababc \n \n \n /ab{1,3}/ \n abab \n \n \n /ab{1,3}c/ \n ababc \n \n \n \n 结合匹配过程看这个表格会更加清晰。 \n 正则表达式匹配文本过程 \n 基础匹配过程 \n \n \n 源字符串：abc \n 正则表达式：  abc \n 匹配过程：首先由正则表达式字符串'a'取得控制权，从位置0开始匹配，由'a'来匹配'a'，匹配成功；控制权交给正则表达式字符串'b'，由于'a'已经被正则表达式字符串'a'匹配，所以'b'从位置1开始尝试匹配，由'b'来匹配'b'，匹配成功；控制权交给正则表达式字符串'c'，由'c'来匹配'c'，匹配成功。 \n \n 此时正则表达式匹配完成，报告匹配成功。匹配结果为'abc'，开始于位置0，结束于位置3。 \n 含有匹配优先量词的匹配过程——匹配成功（一） \n \n \n 源字符串：abc \n 正则表达式： ab?c \n \n \n 量词“?”属于匹配优先量词，在可匹配可不匹配时，会先选择尝试匹配，只有这种选择会使整个表达式无法匹配成功时，才会尝试让出匹配到的内容。这里的量词“?”是用来修饰字符“b”的，所以“b?”是一个整体。 \n \n \n 匹配过程：首先由正则表达式字符'a'取得控制权，从位置0开始匹配，由'a'来匹配'a'，匹配成功；控制权交给正则表达式字符'b?'，由于'?'是匹配优先量词，所以会尝试进行匹配，由'b?'来匹配'b'，同时记录一个备选状态，匹配成功；控制权交给'c'，由'c'来匹配'c'，匹配成功。记录的备选状态丢弃。 \n \n 此时正则表达式匹配完成，报告匹配成功。匹配结果为‘abc’，开始位置为0，结束位置为3。 \n 含有匹配优先量词的匹配过程——匹配成功（二） \n \n \n 源字符串：abc \n 正则表达式： ab?c \n 匹配过程：首先由正则表达式字符'a'取得控制权，从位置0开始匹配，由'a'来匹配'a'，匹配成功；控制权交给正则表达式字符'b?'，由于'?'是匹配优先量词，所以会尝试进行匹配，由'b?'来匹配'c'，同时记录一个备选状态，匹配失败；此时进行回溯，找到备选状态，'b?'忽略匹配，让出控制权；把控制权交给'c'，由'c'来匹配'c'，匹配成功。 \n \n 此时正则表达式匹配完成，报告匹配成功。匹配结果为“ac”，开始位置为0，结束位置为2。其中“b?”不匹配任何内容。 \n 含有匹配优先量词的匹配过程——匹配失败 \n \n \n 源字符串：abd \n 正则表达式： ab?c \n 匹配过程：首先由正则表达式字符'a'取得控制权，从位置0开始匹配，由'a'来匹配'a'，匹配成功；控制权交给正则表达式字符'b?'，由于'?'是匹配优先量词，所以会尝试进行匹配，由'b?'来匹配'b'，同时记录一个备选状态，匹配成功；控制权交给'c'，由'c'来匹配'd'，匹配失败；此时找到记录的备选状态，'b?'忽略匹配，即'b?'不匹配'b'，让出控制权，把控制权交给'c'，由'c'来匹配'b'，匹配失败。此时第一轮匹配尝试失败。 \n 正则引擎使正则向前传动，由位置1开始尝试匹配，由'a'来匹配'b'，匹配失败，没有备选状态，第二轮匹配失败。 \n 继续向前传动，直到在位置3尝试匹配失败，匹配结束。此时报告整个表达式匹配失败。 \n 含有忽略优先量词的匹配过程——匹配成功 \n \n \n 源字符串：abc \n 正则表达式： ab??c \n 匹配过程：首先由字符'a'取得控制权，从位置0开始匹配，由'a'来匹配'a'，匹配成功；控制权交给字符'b??'，先尝试忽略匹配，即'b??'不进行匹配，同时记录一个备选状态，控制权交给'c'；由'c'来匹配'b'，匹配失败，此时进行回溯，找到记录的备选状态，'b??'尝试匹配，即'b??'来匹配'b'，匹配成功；把控制权交给'c'，由'c'来匹配'c'，匹配成功。 \n \n 此时正则表达式匹配完成，报告匹配成功。匹配结果为“abc”，开始位置为0，结束位置为3。其中“b??”匹配字符“b”。 \n 零宽度匹配过程 \n \n \n 源字符串：a12 \n 正则表达式： ^(?=[a-z])[a-z0-9]+$ \n 匹配过程：首先由元字符 ^ 取得控制权，从位置0开始匹配， ^ 匹配的就是开始位置‘位置0’，匹配成功，控制权交给零宽断言 (?=[a-z]) ; (?=[a-z]) 要求它所在位置的右侧必须是字母才能匹配成功，零宽度的子表达式之间是不互斥的，即同一个位置可以同时由多个零宽度子表达式匹配，所以它也是从位置0尝试进行匹配，位置0的右侧是字符“a”，符合要求，匹配成功，控制权交给 [a-z0-9]+ 。因为 (?=[a-z]) 只进行匹配，并不将匹配到的内容保存到最后结果，并且 (?=[a-z]) 匹配成功的位置是位置0，所以 [a-z0-9]+ 也是从位置0开始尝试匹配的， [a-z0-9]+ 首先尝试匹配“a”，匹配成功，继续尝试匹配，可以成功匹配接下来的“1”和“2”，此时已经匹配到位置3，位置3的右侧已没有字符，这时会把控制权交给“ ； 元 字 符 ”从位置3开始尝试匹配，它匹配的是结束位置，也就是“位置3”，匹配成功。 \n \n 此时正则表达式匹配完成，报告匹配成功。匹配结果为“a12”，开始位置为0，结束位置为3。 \n 其中 ^ 匹配位置0， (?=[a-z]) 匹配位置0， [a-z0-9]+ 匹配字符串“a12”， $ 匹配位置3。 \n 平衡组的概念及作用 \n \n JavaScript不支持平衡组……，因此关于平衡组的测试主要在 Expresso 3.1 中完成。多说一句，这个Expresso 3.1真好用，香。 \n \n \n 平衡组的语法构造可参考之前的文章 正则表达式30分钟入门 \n \n 平衡组，顾名思义，平衡即对称， 主要是结合几种正则语法规则，提供对配对出现的嵌套结构的匹配 。平衡组有狭义和广义两种定义，狭义平衡组指 (?exp) 语法，而广义平衡组并不是固定的语法规则，而是几种语法规则的综合应用，我们平时所说的平衡组通常指的是广义平衡组。 \n \n 下文无特殊说明，平衡组这种简写指的就是广义平衡组。 \n 平衡组的匹配原理 \n 平衡组的匹配原理可以用堆栈来解释，先举个例子，再根据例子进行解释。 \n \n 源字符串： a+(b*(c+d))/e+f-(g/(h-i))*j \n 正则表达式： \\(((?'open'\\()|(?'-open'\\))|[^()]+)*(?(open)(?!))\\) \n \n \n 下面的注释翻译自Expresso \n \n \\(                      # 字符‘(’\n    (                   # 数字编号的捕获组((?'open'\\()|(?'-open'\\))|[^()]+)*，重复任意次\n        (?'open'\\()     # 3个分支，第一个是命名捕获组匹配‘(’，命名为open\n        |\n        (?'-open'\\))    # 第二个是(狭义)平衡组，当匹配到‘)’时,在堆栈中移除最近压入的open捕获\n        |\n        [^()]+          # 第三个时非括号的任意其他字符，重复一次或多次\n    )*\n    (?(open)(?!))       # 仅带“Yes”子句的条件表达式，判断堆栈中是否存在名为open捕获组；\n如果有，则尝试匹配(?!),这是一个零宽负向先行断言，由于没有后缀表达式，试图匹配总是失败。\n也就是说如果堆栈中还存在open捕获组，那匹配就应该失败。正则表达式引擎会进行回溯(放弃最前面或最后面的一些字符)，尽量使整个表达式得到匹配。\n\\)                      # 字符‘)’\n \n 1 2 3 4 5 6 7 8 9 10 11 12 下图为Expresso截图： \n \n 对于一个嵌套结构而言，开始和结束标记都是确定的，对于本例开始为“(”，结束为“)”，那么接下来就是考察中间的结构，中间的字符可以划分为三类，一类是“(”，一类是“)”，其余的就是除这两个字符以外的任意字符。 \n 那么平衡组的匹配原理就是这样的： \n \n 先找到\"(\"作为匹配的开始。即上面的第一行，匹配了a+ ( b*(c+d))/e+f-(g/(h-i))*j中的第一个括号(蓝色部分) \n 在第一步之后，每匹配到一个\"(\"，就入栈一个open捕获组，计数加一 \n 在第一步之后，每匹配到一个\")\"，就出栈最近入栈的open捕获组，计数减一 \n \n 也就是说，上面的第一行\"\\(\"匹配了a+ ( b*(c+d))/e+f-(g/(h-i))*j中的第一个括号(蓝色部分) \n 然后，匹配到c前面的“(”，此时，计数加1；继续匹配，匹配到d后面的“)”，计算减1；——注意：此时堆栈中的计数是0，正则还是会向前继续匹配的，但是，如果匹配到“)”的话，比如，这个例子中d) ) （蓝色显示的括号）——引擎此时将控制权交给(?(Open)(?!))，判断堆栈中open捕获组是否为0，如果为0，则执行匹配“no”分支，由于这个条件判断结构中没有“no”分支，所以什么都不做，把控制权交给接下来的\"\\)\"。这个正则表达式\"\\)\"可匹配接下来的\")\" \n \n 后面的 (?(open)(?!)) 用来检测堆栈中的open捕获组的计数是否为0。(圆括号成对出现就会是0) \n 最后的\"\\)\"作为匹配的结束。 \n \n 匹配过程： \n 首先匹配第一个“(”，然后一直匹配，直到出现以下两种情况之一时，把控制权交给(?(open)(?!))： \n \n 堆栈中open计数已为0，此时再遇到“)” \n 匹配到字符串结束符 \n \n 这时控制权交给 (?(open)(?!)) ，判断open是否有匹配，由于此时计数为0，没有匹配，那么就匹配“no”分支，由于这个条件判断结构中没有“no”分支，所以什么都不做，把控制权交给接下来的“\\)”。 \n 如果上面遇到的是第一种情况，那么此时“\\)”可以匹配接下来的“)”，匹配成功； \n 如果上面遇到的是第二种情况，那么此时会进行 回溯或位置传动 ，直到“)”匹配成功为止，否则报告整个表达式匹配失败。 \n \n 额外的讨论： \n 如果要匹配的字符串为 a+((b*(c+d))/e+f-(g/(h-i))*j ,正则表达式不变，最终匹配的结果没有变。 \n 虽然结果没有变，但是对这个字符串的匹配第一次整体是失败的，因为最后的\"\\)\"是匹配不到的，因此会发生一次 位置的传动 ，会在b前面(紧挨着b的圆括号)的括号再一次进行匹配。 \n 参考文章 \n \n 正则基础之——NFA引擎匹配原理 \n 正则表达式——详细讲解平衡组 \n 正则表达式之固化分组 \n 深入正则表达式(3):正则表达式工作引擎流程分析与原理释义 \n JS match方法的返回数据的探究 \n \n ",summary:"\n\n在之前回顾正则表达式30分钟入门这篇文章的时候，发现最后一节的平衡组理解起来有些困难。于是，查找了一些资料，记录一下。\n\nNFA引擎匹配原理\n\n正则表达式引擎\n\n正则表达式引擎大体可分为不同的两类：DEA和NFA，而NFA又基本上可以分为传统型NFA和POSIX NFA。\n\nDFA: Deterministic finite automaton 确定型有穷自动机\n\nNFA: Non-deterministic finite automaton 非确定型有穷自动机\n\nDFA引擎因为不需要回溯，所以匹配快，但不支持捕获组，所以也就不支持反向引用和$number匹配，目前使用DFA引擎的语言和工 ...",id:"post",pid:"post",readingTime:{text:"2 min read",minutes:1.76,time:105600,words:352}},{title:"项目中用SVG画曲线和动画的一次记录",frontmatter:{title:"项目中用SVG画曲线和动画的一次记录",description:"SVG画曲线和动画",date:"2020-12-16",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqs/blogImage/raw/master/blogImage/20201216172057.jpg",tags:["SVG","工作相关"],meta:[{name:"title",content:"SVG画曲线和动画"},{name:"description",content:"SVG画曲线和动画"},{name:"keywords",content:"SVG, 曲线, 动画"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-12-16-svg.html",relativePath:"_posts/2020-12-16-svg.md",key:"v-3789f57e",path:"/2020/12/16/svg/",headers:[{level:2,title:"背景介绍",slug:"背景介绍"},{level:2,title:"问题1：怎么画出这样的线",slug:"问题1-怎么画出这样的线"},{level:3,title:"svg-path的属性",slug:"svg-path的属性"},{level:3,title:"控制点的选取",slug:"控制点的选取"},{level:2,title:"问题2：返回的数据不同连线的位置怎么获取及连线",slug:"问题2-返回的数据不同连线的位置怎么获取及连线"},{level:2,title:"问题3：线上流动的点怎么做",slug:"问题3-线上流动的点怎么做"},{level:2,title:"问题4：屏幕的尺寸发生变化时，怎么处理画好的线",slug:"问题4-屏幕的尺寸发生变化时-怎么处理画好的线"},{level:2,title:"最后想说的小问题",slug:"最后想说的小问题"},{level:2,title:"参考文章",slug:"参考文章"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" 项目中用SVG画曲线和动画的一次记录 \n 背景介绍 \n 项目要求做一个portal页，作为各个大小屏的入口。一共分为5类，下图是其中的一类。其他的也是类似的布局。 \n \n 这个咋一看，平平无奇，没啥特殊的。但是有一些问题需要考虑 \n \n 怎么画出来这样的线 \n 面对返回的数据不同连线的位置怎么获取及连线 \n 线上流动的点怎么做 \n 屏幕的尺寸发生变化时，怎么处理画好的线(不能偏) \n 问题1：怎么画出这样的线 \n 在做预研的时候，考虑可以用两种方案：canvas和svg。最先研究的是canvas，对于这样的曲线觉得应该是要用三阶贝塞尔曲线来画，选好两个控制点，肯定可以画出来。当时也确实画出来啦，至于控制点是怎么算出来的后文会说。画出来之后，还没想怎么加一个在线上一直移动的点，就想着我要怎么把它加到这个页面上，而且页面尺寸变化时线条还要跟着节点位置去变化。于是，我打算放弃canvas，试一下svg。这篇文章也就是记录一下对svg一些学习(都是皮毛)。 \n svg-path的属性 \n SVG 的路径 <path> 功能非常强大，它不仅能创建基本形状，还能创建更多复杂的形状。 <path> 路径是由一些命令来控制的，每一个命令对应一个字母，并且区分大小写， 大写主要表示绝对定位，小写表示相对定位 。 <path>  通过属性 d 来定义路径， d 是一系列命令的集合，主要有以下几个命令： \n \n \n \n 属性 \n 描述 \n \n \n \n \n M(m) x y \n 移动到(x,y) 小写表示相对于上个坐标的位移，下同 \n \n \n L(l) x y \n 画一条线到(x, y) \n \n \n H(h) x \n 水平画一条直线到x \n \n \n V(v) y \n 竖直画一条直线到y \n \n \n A(a) rx ry x-axis-rotation large-arc sweep x y \n 画一段到(x, y)的椭圆弧, 椭圆弧的x, y轴半径分别为rx, ry。椭圆相对于x轴旋转x-axis-rotation度。large-arc=0表明弧线小于180度(小弧), large-arc=1表示弧线大于180度(大弧)。sweep=0表示弧线逆时针画, sweep=1表示弧线顺时针画。 \n \n \n Q(q) cx cy xy \n 从当前点画一条二阶贝赛曲线，曲线的控制点为(cx, cy)。 \n \n \n T(t) x y \n 此命令只能跟在一个Q命令使用，假设Q命令生成曲线s，T命令是从s的终点再画一条到(x, y)的二阶贝塞尔曲线。曲线的控制点为s控制点关于s终点的对称点。T命令生成的曲线会比较光滑。 \n \n \n C(c) cx1 cy1 cx2 cy2 x y \n 从当前点画一条到(x, y)的三阶贝赛尔曲线，曲线的开始控制点和终点控制点分别为(cx1, cy1)和(cx2, cy2)。 \n \n \n S(s) cx2 cy2 x y \n 此命令只能跟在C命令后使用, 假设C命令生成曲线s, S命令的作用是再画一条到(x, y)的三次贝塞尔曲线, 曲线的终点控制点是(cx2, cy2), 曲线的开始控制点是s的终点控制点关于s终点的对称点。 \n \n \n \n 关于如何画椭圆弧： \n < div   id = ' wrap '   style = \" width :  500px ; height :  500px ; border :  2px solid pink ; margin :  50px auto 0 ; background-color :  #90f ; \" > \n     < svg   xmlns = \" http://www.w3.org/2000/svg \"   width = ' 500 '   height = ' 500 '   style = \" stroke :  red ; stroke-width :  10 ; fill :  pink ; \" > \n       \x3c!-- M:起始坐标(200,100) / A:100长轴半径 50短轴半径 / 角度:70 / 弧长(0小弧) / 方向(0逆时针) / 终点(x y) 见第一个图--\x3e \n       < path   d = ' M200 100 A100 50 70 0 0 200 400 ' > </ path \n       \x3c!--   另外一半   -- > \n       < path   d = ' M200 100 A100 50 70 1 1 200 400 ' > </ path > \n     </ svg > \n </ div > \n \n 1 2 3 4 5 6 7 8 \n 画另外一半： \n \n 更加明显的区分大小弧： \n < div   id = ' wrap '   style = \" width :  500px ; height :  500px ; border :  2px solid pink ; margin :  50px auto 0 ; background-color :  #90f ; \" > \n     < svg   xmlns = \" http://www.w3.org/2000/svg \"   width = ' 500 '   height = ' 500 '   style = \" stroke :  red ; stroke-width :  10 ; fill :  pink ; \" > \n       < path   d = ' M200 100 A100 50 70 0 1 300 150 ' > </ path > \n       < path   d = ' M200 100 A100 50 70 1 0 300 150 ' > </ path > \n     </ svg > \n </ div > \n \n 1 2 3 4 5 6 小弧： \n \n 大弧： \n \n 一起画出来： \n 控制点的选取 \n 关于三阶贝塞尔曲线控制点的选取，是 这篇文章 给了我灵感。 \n 如果起点为(10, 234),终点为(344,341),那么选取两个控制点分别为(177, 234)和(177, 341), 画出的曲线如下图所示。 \n \n 因此可以抽象出：如果起点为(x, y), 终点为(x1, y1),那么两个控制点的可以分别是((x+x1)/2, y)和((x+x1)/2, y1)。 \n \n \n 后来的结果验证这个是合理的。 \n 问题2：返回的数据不同连线的位置怎么获取及连线 \n \n 这个图要连线的部分主要集中再左右两部分，当时项目经理说从左往右是由历史到未来，由借鉴到推演。这也就是为啥在左边的DOM类名为 history , 右边的DOM类名为 future 。 \n SVG的path起于左边DOM->左边黄点( dot_left )->右边黄点( dot_right )->右边DOM \n 对于左边的DOM来说，SVG起点位置坐标为： \n \n let  block  =  document . getElementById ( id ) ; \n let  block_left  =  block . offsetLeft  +  block . offsetWidth ; \n let  block_top  =  block . offsetTop  +  block . offsetHeight  /   2 ; \n \n 1 2 3 对于右边的DOM来说，SVG终点的坐标为： \n \n let  block  =  document . getElementById ( id ) ; \n let  block_left  =  block . offsetLeft ; \n let  block_top  =  block . offsetTop  +  block . offsetHeight  /   2 ; \n \n 1 2 3 同理也可以得到左右黄点的位置： \n //之所以要加上24，是因为这个黄点尺寸为48*48 \n let  dot_left_left  =  document . getElementsByClassName ( 'dot_left' ) [ 0 ] . offsetLeft  +   24 ; \n let  dot_left_top  =  document . getElementsByClassName ( 'dot_left' ) [ 0 ] . offsetTop  +   24 ; \n let  dot_right_left  =  document . getElementsByClassName ( 'dot_right' ) [ 0 ] . offsetLeft  +   24 ; \n let  dot_right_top  =  document . getElementsByClassName ( 'dot_right' ) [ 0 ] . offsetTop  +   24 ; \n \n 1 2 3 4 5 \n offsetLeft\\offsetTop是相对于具有定位元素的父元素来算的。 \n \n 到这各个点的坐标都获取到。 \n 因此我们只要把容器名(标明SVG元素要append到哪个元素)、左右两边DOM的类名出入下面函数即可。（下面函数中的offset主要是调节控制点的高度，可以对曲线进行微调） \n //这些公共方法是写在mixisn里面的 \nmethods :   { \n     findAllBlock ( containerClassName ,  classNamehis ,  classNamefut ,  offset  =   0 )   { \n         let  domListhis  =  Array . from ( \n            document . querySelectorAll ( '.'   +  classNamehis ) , \n         ) ; \n         let  domListfut  =  Array . from ( \n            document . querySelectorAll ( '.'   +  classNamefut ) , \n         ) ; \n         let  historyids  =   [ ] ; \n         let  futureids  =   [ ] ; \n         for   ( let  i  =   0 ;  i  <  domListhis . length ;  i ++ )   { \n            historyids . push ( domListhis [ i ] . getAttribute ( 'id' ) ) ; \n         } \n         for   ( let  i  =   0 ;  i  <  domListfut . length ;  i ++ )   { \n            futureids . push ( domListfut [ i ] . getAttribute ( 'id' ) ) ; \n         } \n         this . createSvg ( containerClassName ,  historyids ,  futureids ,  offset ) ; \n     } , \n     createSvg ( className ,  hisIds ,  futIds ,  offset )   { \n         let  svgDom  =  document . createElementNS ( \n             'http://www.w3.org/2000/svg' , \n             'svg' , \n         ) ; \n         let  container  =  document . getElementsByClassName ( className ) [ 0 ] ; \n        svgDom . setAttribute ( 'width' ,   '100%' ) ; \n        svgDom . setAttribute ( 'height' ,   '100%' ) ; \n        svgDom . style  =   ` position: absolute;top: 0;left: 0;z-index: -1 ` ; \n         let  path  =  document . createElementNS ( 'http://www.w3.org/2000/svg' ,   'path' ) ; \n         //获取左右黄点的位置坐标 \n         let  dot_left_left  = \n            document . getElementsByClassName ( 'dot_left' ) [ 0 ] . offsetLeft  +   24 ; \n         let  dot_left_top  = \n            document . getElementsByClassName ( 'dot_left' ) [ 0 ] . offsetTop  +   24 ; \n         let  dot_right_left  = \n            document . getElementsByClassName ( 'dot_right' ) [ 0 ] . offsetLeft  +   24 ; \n         let  dot_right_top  = \n            document . getElementsByClassName ( 'dot_right' ) [ 0 ] . offsetTop  +   24 ; \n\n         let  d  =   '' ; \n         for   ( let  i  =   0 ;  i  <  hisIds . length ;  i ++ )   { \n            d  +=   this . getPath_d ( hisIds [ i ] ,   true ,  dot_left_left ,  dot_left_top ,  offset ) ; \n         } \n         for   ( let  i  =   0 ;  i  <  futIds . length ;  i ++ )   { \n            d  += \n                 ' '   + \n                 this . getPath_d ( futIds [ i ] ,   false ,  dot_right_left ,  dot_right_top ,  offset ) ; \n         } \n        path . setAttribute ( 'd' ,  d ) ; \n        path . setAttribute ( \n             'style' , \n             ` fill: none; stroke: #ccc; stroke-width: 2px; cursor: default; ` , \n         ) ; \n        svgDom . appendChild ( path ) ; \n        container . appendChild ( svgDom ) ; \n     } , \n     getPath_d ( id ,  add ,  dotLeft ,  dotTop ,  offset )   { \n         let  block  =  document . getElementById ( id ) ; \n         let  block_left  =  add\n             ?  block . offsetLeft  +  block . offsetWidth\n             :  block . offsetLeft ; \n         let  block_top  =  block . offsetTop  +  block . offsetHeight  /   2 ; \n         let  control_1_x  =   ( block_left  +  dotLeft )   /   2 ; \n         return  add\n             ?   ` M  ${ block_left } , ${ block_top }  C  ${ control_1_x  +  offset } , ${ block_top  +  offset\n             }   ${ control_1_x  -  offset } , ${ dotTop  -  offset\n             }    ${ dotLeft } , ${ dotTop } ` \n             :   ` M  ${ dotLeft } , ${ dotTop }  C  ${ control_1_x  -  offset } , ${ dotTop  -  offset\n             }   ${ control_1_x  +  offset } , ${ block_top  +  offset\n             }   ${ block_left } , ${ block_top } ` ; \n     } , \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 现在已经把连接线画出来啦。接下来的问题是怎么把在path路径运动的点画出来。 \n 问题3：线上流动的点怎么做 \n 在这参考了  SVG 动画（animate、animateTransform、animateMotion） 这篇文章。 \n <animateMotion> 元素让你可以实现一个路径动画，并且根据路径进行旋转。路径使用和 <path> 相同的方式进行定义。你可以设置属性来定义对象是否根据路径的正切角度来旋转。 \n 例子：线性运动 \n 在这个例子中，一个蓝色的圆在黑盒的左右边缘之间来回的反弹，无限地重复着同样的动作。该动画是由 <animateMotion> 元素控制的。在这种情况下我们建立了一个路径，由MoveTo命令来创建动画的起始点，然后Horizontal-line命令来将圆向右移动300像素到右边，接着使用Z命令，关闭路径，建立一个环回路径。通过设置repeatCount属性为indefinite，我们可以指定只要SVG图片存在的话，动画是否永久循环。 \n < svg   xmlns = \" http://www.w3.org/2000/svg \"   width = \" 300px \"   height = \" 100px \" > \n     < rect   x = \" 0 \"   y = \" 0 \"   width = \" 300 \"   height = \" 100 \"   fill = \" yellow \"   stroke-width = \" 1 \"   stroke = \" red \"   /> \n     < circle   cx = \" 0 \"   cy = \" 50 \"   r = \" 15 \"   fill = \" blue \"   stroke = \" black \"   stroke-width = \" 1 \" > \n         < animateMotion   path = \" M 0 0 H 300 Z \"   dur = \" 3s \"   repeatCount = \" indefinite \"   /> \n     </ circle > \n </ svg > \n \n 1 2 3 4 5 6 \n 所以我们在上面代码的createSvg方法中添加如下代码： \n path . setAttribute ( \n     'style' , \n     ` fill: none; stroke: #ccc; stroke-width: 2px; cursor: default; ` , \n ) ; \n //新增代码开始 \n let  circle  =  document . createElementNS ( \n     'http://www.w3.org/2000/svg' , \n     'circle' , \n ) ; \ncircle . setAttribute ( 'cx' ,   '0' ) ; \ncircle . setAttribute ( 'cy' ,   '0' ) ; \ncircle . setAttribute ( 'r' ,   '5' ) ; \ncircle . setAttribute ( 'fill' ,   'yellow' ) ; \n let  animate  =  document . createElementNS ( \n     'http://www.w3.org/2000/svg' , \n     'animateMotion' , \n ) ; \nanimate . setAttribute ( 'path' ,  d ) ; \nanimate . setAttribute ( 'dur' ,   '10s' ) ; \nanimate . setAttribute ( 'repeatCount' ,   'indefinite' ) ; \ncircle . appendChild ( animate ) ; \nsvgDom . appendChild ( circle ) ; \n //新增代码结束 \nsvgDom . appendChild ( path ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 #  问题4：屏幕的尺寸发生变化时，怎么处理画好的线 \n 这个问题是偶然发现的，在屏幕尺寸发生变化时，节点的位置发生变化，但是svg化的线没有变，这就导致线和节点的偏差。解决办法就是当屏幕尺寸发生变化时，进行重绘。 \n //这些代码时写在组件里面的 \n ... \n mounted ( )   { \n     this . findAllBlock ( 'safetyAnalysis' ,   'history' ,   'future' ) ; \n } , \n activated ( )   { \n    window . onresize  =   this . redraw ; \n     this . redraw ( ) ; \n } , \nmethods :   { \n     redraw ( )   { \n       let  container  =  document . getElementsByClassName ( 'safetyAnalysis' ) [ 0 ] ; \n       while   ( container . lastChild . nodeName . toUpperCase ( )   ===   'SVG' )   { \n        container . removeChild ( container . lastChild ) ; \n       } \n       this . findAllBlock ( 'safetyAnalysis' ,   'history' ,   'future' ) ; \n     } \n } , \n ... \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 #  最后想说的小问题 \n \n 创建svg元素：用document.createElement创建出来的节点是属于html dom，而svg的节点是svg dom。所以需要用createElementNS函数并传入节点名称的命名空间。 \n \n \n let svgDom = document.createElementNS('http://www.w3.org/2000/svg','svg'); \n \n \n 多个组件的切换用的是动态组件 \n \n < keep - alive > \n     < component\n         : is = \"curCom\" \n         : decisionMaking = \"decisionMaking\" \n         : commandCoordination = \"commandCoordination\" \n         : safetyAnalysis = \"safetyAnalysis\" \n         : platformOperation = \"platformOperation\" \n         : systemOperation = \"systemOperation\" \n     > < / component > \n < / keep - alive > \n \n 1 2 3 4 5 6 7 8 9 10 \n 关于节点的位置问题 \n \n < div \n     class = \" history block \" \n     :id = \" ' historyID '  + index \" \n     v-for = \" (item, index) in leftApp \" \n     :key = \" item \" \n     :style = \" ' top: '  + (50 + (index - Math.floor(leftApp.length / 2)) * 8) +  ' % ' \" \n      @click = \" jumpTo(item.router) \" \n > </ div > \n\n < div \n     class = \" future block \" \n     :id = \" ' futureID '  + index \" \n     v-for = \" (item, index) in rightApp \" \n     :key = \" item \" \n     :style = \" ' top: '  + (50 + (index - Math.floor(rightApp.length / 2)) * 15) +  ' % ' \" \n     @click = \" jumpTo(item.router) \" \n > </ div > \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 要注意上面DOM元素中的style属性，主要希望这些DOM元素可以均匀合理的分布在中间，既不要整体偏上，也不要偏下。最后的那个乘数主要来控制节点的间距。当某一侧的节点较多时，可以相对地调小一些，反之亦然。 \n \n 水平有限，实现方式或许不是最优解，若有更好的方法，请大佬在评论区告知。 \n 参考文章 \n \n 动态创建svg元素以及其子元素 \n SVG 动画（animate、animateTransform、animateMotion） \n Document.createElementNS() \n 聊聊 SVG 基本形状转换那些事 \n svg便签内的path标签画椭圆弧 \n \n ",summary:"\n背景介绍\n\n项目要求做一个portal页，作为各个大小屏的入口。一共分为5类，下图是其中的一类。其他的也是类似的布局。\n\n这个咋一看，平平无奇，没啥特殊的。但是有一些问题需要考虑\n\n怎么画出来这样的线\n面对返回的数据不同连线的位置怎么获取及连线\n线上流动的点怎么做\n屏幕的尺寸发生变化时，怎么处理画好的线(不能偏)\n\n问题1：怎么画出这样的线\n\n在做预研的时候，考虑可以用两种方案：canvas和svg。最先研究的是canvas，对于这样的曲线觉得应该是要用三阶贝塞尔曲线来画，选好两个控制点，肯定可以画出来。当时也确实画出来啦，至于控制点是怎么算出来的后文会说。画出来之后，还没想怎么加一个在线上 ...",id:"post",pid:"post",readingTime:{text:"5 min read",minutes:4.02,time:241200,words:804}},{title:"单行省略和多行省略",frontmatter:{title:"单行省略和多行省略",description:"单行省略和多行省略",date:"2020-12-20",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqs/blogImage/raw/master/blogImage/20201219170044.gif",tags:["转载","CSS"],meta:[{name:"title",content:"单行省略和多行省略"},{name:"description",content:"单行省略和多行省略"},{name:"keywords",content:"单行省略, 多行省略"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-12-20-ellipsis.html",relativePath:"_posts/2020-12-20-ellipsis.md",key:"v-3b0c6bd4",path:"/2020/12/20/ellipsis/",headers:[{level:2,title:"前言",slug:"前言"},{level:2,title:"单行省略",slug:"单行省略"},{level:2,title:"多行文本溢出省略(按行数)",slug:"多行文本溢出省略-按行数"},{level:3,title:"纯CSS实现方案",slug:"纯css实现方案"},{level:3,title:"基于Javascript的实现方案",slug:"基于javascript的实现方案"},{level:2,title:"多行文本溢出省略(按高度)",slug:"多行文本溢出省略-按高度"},{level:3,title:"多行文本溢出不显示省略号",slug:"多行文本溢出不显示省略号"},{level:3,title:"伪元素 + 定位实现多行省略",slug:"伪元素-定位实现多行省略"},{level:3,title:"利用Float特性，纯CSS实现多行省略",slug:"利用float特性-纯css实现多行省略"},{level:2,title:"最后",slug:"最后"},{level:2,title:"参考文章",slug:"参考文章"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:' 单行省略和多行省略 \n \n 转载自 可能是最全的 “文本溢出截断省略” 方案合集 。对其内容进行了学习验证和修改(JS实现多行省略部分)。对文章作者 政采云前端团队 表示感谢。 \n 前言 \n 在我们的日常开发工作中，文本溢出截断省略是很常见的一种需考虑的业务场景细节。看上去 “稀松平常” ，但在实现上却有不同的区分，是单行截断还是多行截断？多行的截断判断是基于行数还是基于高度？这些问题之下，都有哪些实现方案？他们之间的差异性和场景适应性又是如何？凡事就怕较真，较真必有成长。本文试图通过编码实践，给出一些答案。 \n 单行省略 \n 核心CSS语句 \n \n overflow: hidden; (文字超出限定宽度，则隐藏超出的内容) \n text-overflow: ellipsis; (规定当文本溢出时，显示省略符号来代表被修剪的文本) \n white-space: nowrap; (设置文字在一行显示，不能换行) \n \n 优点 \n \n 无兼容问题 \n 响应式截断 \n 文本溢出范围才显示省略号，否则不显示省略号 \n 省略号显示的位置刚好 \n \n 短板 \n \n 只支持单行文本截断 \n \n 使用场景 \n \n 适用于单行文本溢出显示省略号的情况 \n \n DEMO: \n < head > \n     < meta   charset = " UTF-8 " > \n     < meta   name = " viewport "   content = " width=device-width, initial-scale=1.0 " > \n     < title > Document </ title > \n     < style > \n         .singleline   { \n             width :  100% ; \n             overflow :  hidden ; \n             text-overflow :  ellipsis ; \n             white-space :  nowrap ; \n         } \n     </ style > \n </ head > \n < body > \n     < p > \n        单行省略：\n     </ p > \n     < div   class = " singleline " > \n        中国青年报客户端北京12月18日电（中青报·中青网记者叶雨婷）今天记者从教育部获悉，教育部印发《关于正确认识和规范使用高校人才称号的若干意见》的通知。通知指出，坚持人岗相适原则延揽人才，不将人才称号作为硬性指标，不针对人才称号获得者发布“明码标价”的招聘广告。要统筹用好国内外人才资源，不将国（境）外学习或工作经历作为人才招聘引进的限制性条件。\n     </ div > \n </ body > \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 实例图片： \n 多行文本溢出省略(按行数) \n 纯CSS实现方案 \n 核心CSS语句 \n \n -webkit-line-clamp: 3; (可以把 块容器 中的内容限制为指定的行数) \n \n \n 它只有在 display 属性设置成 -webkit-box 或者 -webkit-inline-box 并且 -webkit-box-orient 属性设置成 vertical时才有效果。 \n \n \n display: -webkit-box; \n -webkit-box-orient: vertical; \n overflow: hidden; \n \n \n 在大部分情况下,也需要设置 overflow 属性为 hidden, 否则,里面的内容不会被裁减,并且在内容显示为指定行数后还会显示省略号(ellipsis ). \n \n 优点 \n \n 响应式截断 \n 文本溢出范围才显示省略号，否则不显示省略号 \n 省略号显示位置刚好 \n \n 短板 \n \n 兼容性一般： -webkit-line-clamp 属性只有 WebKit 内核的浏览器才支持 \n \n \n \n 截图自 caniuse \n \n 适用场景 \n \n 多适用于移动端页面，因为移动设备浏览器更多是基于 WebKit 内核 \n \n DEMO： \n < head > \n     < meta   charset = " UTF-8 " > \n     < meta   name = " viewport "   content = " width=device-width, initial-scale=1.0 " > \n     < title > Document </ title > \n     < style > \n         .multiline   { \n             width :  100% ; \n             display :  -webkit-box ; \n             -webkit-box-orient :  vertical ; \n             -webkit-line-clamp :  3 ; \n             overflow :  hidden ; \n         } \n     </ style > \n </ head > \n\n < body > \n     < p > \n        多行省略：\n     </ p > \n     < div   class = " multiline " > \n        中国青年报客户端北京12月18日电（中青报·中青网记者叶雨婷）今天记者从教育部获悉，教育部印发《关于正确认识和规范使用高校人才称号的若干意见》的通知。通知指出，坚持人岗相适原则延揽人才，不将人才称号作为硬性指标，不针对人才称号获得者发布“明码标价”的招聘广告。要统筹用好国内外人才资源，不将国（境）外学习或工作经历作为人才招聘引进的限制性条件。\n     </ div > \n </ body > \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 \n 基于Javascript的实现方案 \n 优点 \n \n 无兼容问题 \n 响应式截断 \n 文本溢出范围才显示省略号，否则不显示省略号 \n \n 短板 \n \n 需要JS实现，背离展示和行为相分离的原则 \n 文本为中英文/纯英文时，省略号的位置会有偏差 \n \n 使用场景 \n \n 适用于响应式截断，多行文本溢出省略的情况。（最好为纯中文） \n \n DEMO \n < body > \n     < p > \n        多行省略：\n     </ p > \n     < div   class = " multiline " > </ div > \n </ body > \n < script > \n     const  text  =   \'中国青年报客户端北京12月18日电（中青报·中青网记者叶雨婷）今天记者从教育部获悉，教育部印发《关于正确认识和规范使用高校人才称号的若干意见》的通知。通知指出，坚持人岗相适原则延揽人才，不将人才称号作为硬性指标，不针对人才称号获得者发布“明码标价”的招聘广告。要统筹用好国内外人才资源，不将国（境）外学习或工作经历作为人才招聘引进的限制性条件。\' ; \n     const  textTotalLength  =  text . length ; \n     const   formatStr   =   ( )   =>   { \n         const  ele  =  document . getElementsByClassName ( \'multiline\' ) [ 0 ] ; \n         //要显示的行数 \n         const  lineNum  =   3 ; \n         const  baseWidth  =   parseFloat ( window . getComputedStyle ( ele ,   null ) . width ) ; \n         const  baseFontSize  =   parseFloat ( window . getComputedStyle ( ele ,   null ) . fontSize ) ; \n         //一行显示多少个字 \n         const  strNum  =  baseWidth  /  baseFontSize ; \n         let  content  =   \'\' ; \n         //多行可容纳的总字数 \n         const  totalStrNum  =  lineNum  *  strNum ; \n         if   ( textTotalLength  >  totalStrNum )   { \n            content  =  text . slice ( 0 ,  totalStrNum  -   1 )   +   \'...\' ; \n         }   else   { \n            content  =  text ; \n         } \n        ele . innerHTML  =  content ; \n     } \n     formatStr ( ) ; \n    window . onresize  =  formatStr ; \n </ script > \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 \n 多行文本溢出省略(按高度) \n 多行文本溢出不显示省略号 \n 核心CSS语句 \n \n overflow: hidden; \n max-height: 60px; (设定当前元素最大高度) \n line-height: 20px; (结合元素高度，高度固定的情况下，设定行高， 控制显示行数) \n \n 优点 \n \n 无兼容问题 \n 响应式截断 \n \n 短板 \n \n 单纯的截断文字，不展示省略号，观感上较为生硬 \n \n 使用场景 \n \n 适用于文本溢出不需要显示省略号的情况 \n \n DEMO \n < head > \n     < meta   charset = " UTF-8 " > \n     < meta   name = " viewport "   content = " width=device-width, initial-scale=1.0 " > \n     < title > Document </ title > \n     < style > \n         .multiline   { \n             overflow :  hidden ; \n             max-height :  60px ; \n             line-height :  20px ; \n         } \n     </ style > \n </ head > \n < body > \n     < p > \n        多行省略：\n     </ p > \n     < div   class = " multiline " > \n        中国青年报客户端北京12月18日电（中青报·中青网记者叶雨婷）今天记者从教育部获悉，教育部印发《关于正确认识和规范使用高校人才称号的若干意见》的通知。通知指出，坚持人岗相适原则延揽人才，不将人才称号作为硬性指标，不针对人才称号获得者发布“明码标价”的招聘广告。要统筹用好国内外人才资源，不将国（境）外学习或工作经历作为人才招聘引进的限制性条件。\n     </ div > \n </ body > \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 \n 伪元素 + 定位实现多行省略 \n 核心CSS语句 \n \n position: relative; （为伪元素绝对定位） \n overflow: hidden; （文本溢出限定的宽度就隐藏内容） \n position: absolute;（给省略号绝对定位） \n line-height: 20px; （结合元素高度,高度固定的情况下,设定行高, 控制显示行数） \n height: 40px; （设定当前元素高度） \n ::after {} （设置省略号样式） \n \n 优点 \n \n 无兼容问题 \n 响应式截断 \n \n 短板 \n \n 无法识别文字的长短，无论文本是否溢出范围，都会一直显示省略号 \n 省略号的位置可能不是刚刚好，又是可能会遮住一半的文字。(可以用线性渐变背景色来解决) \n \n 适用场景 \n \n 适用于对省略效果要求较低，文本一定会溢出元素的情况 \n \n DEMO \n < head > \n     < meta   charset = " UTF-8 " > \n     < meta   name = " viewport "   content = " width=device-width, initial-scale=1.0 " > \n     < title > Document </ title > \n     < style > \n         .multiline   { \n             position :  relative ; \n             overflow :  hidden ; \n             max-height :  60px ; \n             line-height :  20px ; \n         } \n         .multiline::after   { \n             content :   \'...\' ; \n             position :  absolute ; \n             bottom :  0 ; \n             right :  0 ; \n             padding-left :  30px ; \n             background-image :   linear-gradient ( to right ,   rgba ( 255 , 255 , 255 , 0.8 ) ,   rgba ( 255 , 255 , 255 , 1 ) ) ; \n         } \n     </ style > \n </ head > \n < body > \n     < p > \n        多行省略：\n     </ p > \n     < div   class = " multiline " > \n        中国青年报客户端北京12月18日电（中青报·中青网记者叶雨婷）今天记者从教育部获悉，教育部印发《关于正确认识和规范使用高校人才称号的若干意见》的通知。通知指出，坚持人岗相适原则延揽人才，不将人才称号作为硬性指标，不针对人才称号获得者发布“明码标价”的招聘广告。要统筹用好国内外人才资源，不将国（境）外学习或工作经历作为人才招聘引进的限制性条件。\n     </ div > \n </ body > \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 \n 利用Float特性，纯CSS实现多行省略 \n 核心CSS \n \n line-height: 20px;（结合元素高度,高度固定的情况下,设定行高, 控制显示行数） \n overflow: hidden;（文本溢出限定的宽度就隐藏内容） \n float: right/left;（利用元素浮动的特性实现） \n position: relative;（根据自身位置移动省略号位置, 实现文本溢出显示省略号效果） \n word-break: break-all;（使一个单词能够在换行时进行拆分） \n \n 优点 \n \n 无兼容问题 \n 响应式截断 \n 文本溢出范围显示省略号，否则不显示 \n \n 短板 \n \n 省略号显示可能不会刚刚好，有时会遮住一半文字 \n \n 适用场景 \n \n 适用于对省略效果要求较低，多行文本响应式截断的情况 \n \n DEMO \n < head > \n     < meta   charset = " UTF-8 " > \n     < meta   name = " viewport "   content = " width=device-width, initial-scale=1.0 " > \n     < title > Document </ title > \n     < style > \n         .multiline   { \n             overflow :  hidden ; \n             max-height :  60px ; \n             line-height :  20px ; \n         } \n         .multiline::before   { \n             float :  left ; \n             content :   \'\' ; \n             width :  20px ; \n             height :  60px ; \n         } \n         .multiline .text   { \n             float :  right ; \n             width :  100% ; \n             margin-left :  -20px ; \n             word-break :  break-all ; \n         } \n         .multiline::after   { \n             float :  right ; \n             content :   \'...\' ; \n             width :  20px ; \n             height :  20px ; \n             position :  relative ; \n             left :  100% ; \n             transform :   translate ( -100% ,  -100% ) ; \n             background-image :   linear-gradient ( to right ,   rgba ( 255 , 255 , 255 , 0.8 ) ,   rgba ( 255 , 255 , 255 , 1 ) ) ; \n         } \n     </ style > \n </ head > \n\n < body > \n     < p > \n        多行省略：\n     </ p > \n     < div   class = " multiline " > \n         < div   class = " text " > \n            中国青年报客户端北京12月18日电（中青报·中青网记者叶雨婷）今天记者从教育部获悉，教育部印发《关于正确认识和规范使用高校人才称号的若干意见》的通知。通知指出，坚持人岗相适原则延揽人才，不将人才称号作为硬性指标，不针对人才称号获得者发布“明码标价”的招聘广告。要统筹用好国内外人才资源，不将国（境）外学习或工作经历作为人才招聘引进的限制性条件。\n         </ div > \n     </ div > \n </ body > \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 \n 原理讲解 \n 有 A、text、C 三个盒子，A 左浮动，text、C 右浮动。设置 A 盒子的高度与 B 盒子高度（或最大高度）要保持一致, A盒子的宽度大于(或等于)C盒子的宽度。 \n \n 当 text 盒子的高度低于 A 盒子，C 盒子仍会处于 B 盒子右下方。 \n 如果 text 盒子文本过多，高度超过了 A 盒子，则 C 盒子不会停留在右下方，而是掉到了 A 盒子下。 \n \n \n 代码如下： \n < head > \n     < meta   charset = " UTF-8 " > \n     < meta   name = " viewport "   content = " width=device-width, initial-scale=1.0 " > \n     < title > Document </ title > \n     < style > \n         .multiline   { \n             max-height :  60px ; \n             line-height :  20px ; \n             position :  relative ; \n         } \n         .multiline .AFLeft   { \n             float :  left ; \n             width :  100px ; \n             height :  60px ; \n             background :  burlywood ; \n         } \n         .multiline .text   { \n             float :  right ; \n             width :   calc ( 100% - 100px ) ; \n             word-break :  break-all ; \n             background :  blue ; \n         } \n         .multiline .CFRight   { \n             background :  yellow ; \n             float :  right ; \n             width :  100px ; \n             height :  20px ; \n         } \n     </ style > \n </ head > \n\n < body > \n     < p > \n        多行省略：\n     </ p > \n     < div   class = " multiline " > \n         < div   class = " AFLeft " > A float:left </ div > \n         < div   class = " text " > \n            中国青年报客户端北京12月18日电（中青报·中青网记者叶雨婷）今天记者从教育部获悉，教育部印发《关于正确认识和规范使用高校人才称号的若干意见》的通知。通知指出，坚持人岗相适原则延揽人才，不将人才称号作为硬性指标，不针对人才称号获得者发布“明码标价”的招聘广告。要统筹用好国内外人才资源，不将国（境）外学习或工作经历作为人才招聘引进的限制性条件。\n         </ div > \n         < div   class = " CFRight " > C float:right </ div > \n     </ div > \n </ body > \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 \n 接下来对 C 盒子进行相对定位，将 C 盒子位置向右侧移动 100%，并向左上方向拉回一个 C 盒子的宽高（不然会看不到哟）。这样在文本未溢出时不会看到 C 盒子，在文本溢出时，显示 C 盒子。 \n \n .multiline .CFRight   { \n     background :  yellow ; \n     float :  right ; \n     width :  100px ; \n     height :  20px ; \n     position :  relative ; \n     left :  100% ; \n     transform :   translate ( -100% ,  -100% ) ; \n } \n \n 1 2 3 4 5 6 7 8 9 \n \n 最后需要做的就是文本溢出时隐藏 \n \n .multiline   { \n     overflow :  hidden ; \n     max-height :  60px ; \n     line-height :  20px ; \n     position :  relative ; \n } \n \n 1 2 3 4 5 6 \n 最后 \n 本文介绍了几种目前常见的文本截断省略的方案，各有利弊，各位同学可根据实际开发情况及需求选择方案。如果你还知道更好其他实现方案，欢迎在评论区留下宝贵评论。 \n 参考文章 \n \n 可能是最全的 “文本溢出截断省略” 方案合集 \n -webkit-line-clamp \n \n ',summary:"转载自可能是最全的 “文本溢出截断省略” 方案合集。对其内容进行了学习验证和修改(JS实现多行省略部分)。对文章作者政采云前端团队表示感谢。\n\n前言\n\n在我们的日常开发工作中，文本溢出截断省略是很常见的一种需考虑的业务场景细节。看上去 “稀松平常” ，但在实现上却有不同的区分，是单行截断还是多行截断？多行的截断判断是基于行数还是基于高度？这些问题之下，都有哪些实现方案？他们之间的差异性和场景适应性又是如何？凡事就怕较真，较真必有成长。本文试图通过编码实践，给出一些答案。\n\n单行省略\n\n核心CSS语句\n\noverflow: hidden; (文字超出限定宽度，则隐藏超出的内容)\ntext-ove ...",id:"post",pid:"post",readingTime:{text:"4 min read",minutes:3.62,time:217200.00000000003,words:724}},{title:"浅析ArrayBuffer对象(上)",frontmatter:{title:"浅析ArrayBuffer对象(上)",description:"浅析ArrayBuffer对象(上)",date:"2020-12-31",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201226160513.png",tags:["JavaScript","前端开发"],meta:[{name:"title",content:"浅析ArrayBuffer对象"},{name:"description",content:"浅析ArrayBuffer对象"},{name:"keywords",content:"ArrayBuffer对象"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-12-31-arraybuffer.html",relativePath:"_posts/2020-12-31-arraybuffer.md",key:"v-6e403dbe",path:"/2020/12/31/arraybuffer/",headers:[{level:2,title:"前言",slug:"前言"},{level:2,title:"ArrayBuffer",slug:"arraybuffer"},{level:3,title:"属性和方法",slug:"属性和方法"},{level:2,title:"TypedArray视图",slug:"typedarray视图"},{level:3,title:"构造函数",slug:"构造函数"},{level:3,title:"数组方法",slug:"数组方法"},{level:2,title:"字节序",slug:"字节序"},{level:2,title:"ArrayBuffer与字符串的相互转换",slug:"arraybuffer与字符串的相互转换"},{level:2,title:"复合视图",slug:"复合视图"},{level:2,title:"DataView视图",slug:"dataview视图"},{level:2,title:"SharedArrayBuffer",slug:"sharedarraybuffer"},{level:2,title:"Atomics对象",slug:"atomics对象"},{level:3,title:"原子读写",slug:"原子读写"},{level:3,title:"运算方法",slug:"运算方法"},{level:3,title:"其他方法",slug:"其他方法"},{level:2,title:"总结",slug:"总结"},{level:2,title:"参考文章",slug:"参考文章"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" 浅析ArrayBuffer对象(上) \n 前言 \n ArrayBuffer对象、TypedArray视图和DataView视图是Javascript操作二进制数据的一个接口。它们都以数组的语法处理二进制数据，所以统称为二进制数组。它很像C语言的数组，允许开发者以数组下标的形式直接操作内存。 \n 二进制数组由3类对象组成： \n \n ArrayBuffer对象：代表内存中的一段二进制数据，可以通过“视图”进行操作。 “视图”部署了数组借口，这意味着，可以用数组的方法操作内存。 \n TypedArray视图：共包含9种类型的视图。 \n DataView视图：可以自定义符复合格式的视图，比如第一个字节是Uint8(无符号8位整数)、第二个和第三个字节是Int16(16位整数)、第四个字节是Float32(32位浮点数)等，还可以自定义字节序。 \n \n \n 二进制数组并不是真正的数组，而是类似数组的对象。 \n \n TypedArray视图支持的数据类型一共9种(DataView视图支持除Uint8C以外的其他8种), 如下表所示。 \n \n \n \n 数据类型 \n 字节长度 \n 含义 \n 对应的C语言类型 \n \n \n \n \n Int8 \n 1 \n 8位带符号整数 \n signed char \n \n \n Uint8 \n 1 \n 8位不带符号整数 \n unsigned char \n \n \n Uint8C \n 1 \n 8位不带符号整数(自动过滤溢出) \n unsigned char \n \n \n Int16 \n 2 \n 16位带符号整数 \n short \n \n \n Uint16 \n 2 \n 16位不带符号整数 \n unsigned short \n \n \n Int32 \n 4 \n 32位带符号整数 \n int \n \n \n Uint32 \n 4 \n 32位不带符号整数 \n unsigned int \n \n \n Float32 \n 4 \n 32位浮点数 \n float \n \n \n Float64 \n 8 \n 64位浮点数 \n double \n ArrayBuffer \n ArrayBuffer对象代表存储二进制数据的一段内存。它不能直接读写，只能通过视图(TypedArray视图和DataView试图)读写。 \n ArrayBuffer只是一串 0 和 1。它是不知道怎么拆分这个数组中各个元素的。 \n \n 为了提供上下文信息，把 ArrayBuffer 拆分开，我们需要将它放在视图中。这些数据的视图可以添加类型化数组，并且有很多不同的类型数组可以使用。\n例如，你可以使用 Int8 类型的数组，将 ArrayBuffer 分解为8位字节。 \n \n 或者你可以用一个无符号的 Int16 类型数组，它可以将 ArrayBuffer 分解成16位不带符号整数。 \n \n 同一 buffer 上可以有多个视图，不同的视图会为相同的操作提供不同的结果。\n例如，我们从这个 ArrayBuffer 的 Int8 视图获取的元素，和从它的 Uint16 视图获取的元素就是不同的值，即使它们包含完全相同的 bits。 \n \n \n 通过这种方式，ArrayBuffer 基本上就像原始内存，让你可以像使用 C 语言那样直接操作内存。 \n ArrayBuffer构造函数的参数是所需要的内存大小(单位为字节)。 \n 属性和方法 \n \n ArrayBUffer.prototype.byteLength : 返回所分配的内存区域的字节长度。 \n \n let  buffer  =   new   ArrayBuffer ( 32 ) ; \nbuffer . byteLength  //32 \n \n 1 2 如果要分配的内存区域很大，有可能分配失败(因为没有那么多连续的空余内存)，所以有必要检查是否分配成功。 \n if ( buffer . byteLength  ===  n )   { \n     //success \n }   else   { \n     //fail \n } \n \n 1 2 3 4 5 \n ArrayBuffer.prototype.slice() , 该方法允许将内存区域的一部分复制生成一个新的ArrayBuffer对象。slice方法接受两个参数。第一个参数表示复制开始的字节序号（含该字节），第二个参数表示复制截止的字节序号（不含该字节）。如果省略第二个参数，则默认到ArrayBuffer对象的结尾。 \n \n let  buffer  =   new   ArrayBuffer ( 8 ) ; \n let  newBuffer  =  buffer . slice ( 0 ,   3 ) ; \n \n 1 2 上面的代码表示复制buffer对象的前3个字节（从0开始，到第三个字节前面结束）。 \n \n ArrayBuffer.isView() , ArrayBuffer有一个静态方法isView，返回一个布尔值，表示参数是否为ArrayBuffer的试图实例。这个方法大致相当于判断参数是否为TypedArray实例或DataView实例。 \n \n let  buffer  =   new   ArrayBuffer ( 8 ) ; \nArrayBuffer . isView ( buffer ) ;   //false \n\n let  v  =   new   Int8Array ( buffer ) ; \nArrayBuffer . isView ( v ) ;   //true \n \n 1 2 3 4 5 #  TypedArray视图 \n 由前面可以知道，ArrayBuffer对象代表内存区域。同一段内存，不同的数据有不同的解读方式，这就叫做“视图”。ArrayBuffer有两种视图，一种是TypedArray视图，另一种是DataView视图。前者的数组成员都是同一个数据类型，后者的数组成员可以是不同的数据类型。 \n 目前，TypedArray视图一共包括9种类型，每一种类型都是一种构造函数。 \n \n Int8Array \n Uint8Array \n Uint8ClampedArray (canvas元素专有类型) \n Int16Array \n Uint16Array \n Int32Array \n Uint32Array \n Float32Array \n Float64Array \n \n 这9种构造函数生成的数组与普通数组很像，都有length属性，都可以用方括号运算符([])获取单个元素，所有数组方法都能在其上使用。但是，TypedArray数组与普通数组并不完全一样，存在如下差异： \n \n TypedArray数组所有成员都是同一种类型 \n TypedArray数组的成员是连续的，不会有空位 \n TypedArray数组成员的默认值是0. \n TypedArray数组只是一层视图，本身不储存数据，它的数据都是存储在底层的ArrayBuffer对象中。 \n 构造函数 \n \n TypedArray(buffer, byteOffset = 0, length?) \n \n 同一个ArrayBuffer对象之上，可以根据不同的数据类型建立多个视图。 \n //创建一个8字节的ArrayBuffer \n let  b  =   new   ArrayBuffer ( 8 ) ; \n\n //创建一个指向b的Int32视图，开始于字节0，直至缓冲区的末尾 \n let  v1  =   new   Int32Array ( b ) ; \n\n //创建一个指向b的Uint8试图，开始于字节2，直至缓冲区末尾 \n let  v2  =   new   Uint8Array ( b ,   2 ) ; \n\n //创建一个指向b的Int16视图，开始于字节2，长度(成员个数)为2 \n let  v3  =   new   Int16Array ( b ,   2 ,   2 ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 上面的代码在一段长度为8个字节的内存b之上，生成了3个视图：v1、v2和v3。这3个试图是重叠的：v1[0]是一个32位整数(4个字节)，指向字节0-字节3；v2[0]是一个8位无符号整数(1个字节)，指向字节2；v3[0]是一个16位整数(2个字节)，指向字节2-字节3。 \n 视图的构造函数可以接受3个参数。只有第一个是必选的，对应底层ArrayBuffer对象。 \n \n 第二个参数byteOffset必须与所要建立的数据类型一致，否则会报错。 \n \n let  buffer  =   new   ArrayBuffer ( 8 ) ; \n let  i16  =   new   Int16Array ( buffer ,   1 ) ; \n //Uncaught RangeError: start offset of Int16Array should be a multiple of 2 \n \n 1 2 3 之所以报错是因为：带符号的16位整数需要2个字节，所以byteOffset参数必须能被2整除。 \n \n TypedArray(length) \n \n 视图还可以不通过ArrayBuffer对象，而是直接分配内存生成。 \n let  f64a  =   new   Float64Array ( 8 ) ; \nf64a [ 0 ]   =   10 ; \nf64a [ 1 ]   =   20 ; \nf64a [ 2 ]   =  f64a [ 0 ]   +  f64a [ 1 ] ; \n \n 1 2 3 4 上面的代码生成了一个8个成员的Float64Array数组(64字节)，然后依次对每个成员赋值。视图数组的赋值操作与普通数组别无二致。 \n \n 构造函数的参数也可以是一个普通的数组，然后直接生成TypedArray实例。 \n \n let  typedArray  =   new   Int8Array ( [ 1 ,   2 ,   3 ,   4 ] ) ; \n \n 1 这个时候TypedArray视图会重新开辟内存，不会在原数组的内存上建立视图。 \n TypedArray数组也可以转回普通数组： \n let  normalArray  =   Array . prototype . slice . call ( typedArray ) ; \n \n 1 \n 构造函数还可以接受另一个人TypedArray实例作为参数。 \n \n let  typedArray  =   new   Int8Array ( new   Int8Array ( [ 1 ,   1 ] ) ) ; \n \n 1 \n 此时生成的数组只是复制了参数数组的值，对应的底层内存是不一样的。新数组会开辟一段新的内存存储空间，不会在原数组的内存之上建立视图。 \n \n 如果想基于同一段内存空间构造不同的视图，可以采用下面的写法： \n let  x  =   new   Int8Array ( [ 1 ,   2 ] ) ; \n let  y  =   new   Int8Array ( x . buffer ) ; \n\nx [ 0 ]   //1 \ny [ 0 ]   //1 \n\nx [ 0 ]   =   2 ; \ny [ 0 ]   //2 \n \n 1 2 3 4 5 6 7 8 #  数组方法 \n 普通数组的操作方法和属性对TypedArray数组完全适用。 \n \n \n push/pop/concat方法不在其中。 \n \n 由上图也可以看出： \n \n TypedArray数组也部署了Iterator接口(Symbol[iterator]), 所以可以遍历(for...of...) \n 每一种视图的构造函数都有一个 BYTES_PER_ELEMENT 属性，表示这种数据类型占据的字节数 \n TypedArray实例属性和方法：\n \n TypedArray.prototype.buffer \n TypedArray.prototype.byteLength \n TypedArray.prototype.byteOffset \n TypedArray.prototype.length \n TypedArray.prototype.set():用于复制数组(普通数组或TypedArray数组)也就是将一段内存完全复制到另一段内存。 \n TypedArray.prototype.subArray():对于TypedArray数组的一部分再建立一个新的试图。 \n TypedArray.prototype.slice() \n \n \n \n 此外，TypedArray数组的所有构造函数都有静态方法：of和from。 \n \n TypedArray.of()：用于将参数转为一个TypedArray实例 \n TypedArray.from()：接受一个可遍历的数据结构(如数组)作为参数，返回一个基于此结构的TypedArray实例 \n 字节序 \n \n TypedArray数字只能处理小端字节序。为了解决这个问题，JavaScript引入了DataView对象，可以设定字节序。 \n \n 端序又称字节序（Endianness），表示 多字节中的字节排列方式 。小端序是指字节的最低有效位在最高有效位之前（大端序正好与之相反），例如数字10，如果用16位二进制表示，那么它就变为0000 0000 0000 1010，换算成16进制就是000A，用小端序存储的话，该值会被表示成0A00。虽然大端序更符合人类的阅读习惯，但英特尔处理器和多数浏览器采用的都是小端序。 \n \n 还是以这个图为例，内存中存储的二进制为：00000001 00000010 00000011 00000100. \n 对于Int16Array(占2个字节)而言，小端序读出顺序为0000001000000001 0000010000000011 \n parseInt ( '0000001000000001' ,   2 ) ; //513 \n parseInt ( '0000010000000011' ,   2 ) ; //1027 \n \n 1 2 同理对于Int32Array(占4个字节)而言，小端序读出顺序为00000100000000110000001000000001 \n parseInt ( '00000100000000110000001000000001' ,   2 ) ; //67305985 \n \n 1 可以再从存储的角度来看一下小端序： \n let  view  =   new   Uint8Array ( [ 2 , 1 , 3 , 7 ] ) ; \n\n let  u16  =   new   Uint16Array ( view . buffer ) ; \n \n 1 2 3 view.buffer如下： \n \n 同一段内存建立Uint16Array视图： \n u16[0] === 258; //true 00000001 00000010 \n 进行赋值运算： \n u16 [ 0 ]   =   0xff05 ;   //65285 \n \n 1 \n 可以看出赋值运算后，字节变为：[ 0x05, 0xff,  0x03, 0x07] \n ArrayBuffer与字符串的相互转换 \n ArrayBuffer转为字符串，或者字符串转为ArrayBuffer，都有一个前提， 即字符串的编码方式是确定的 。 \n //ArrayBuffer转字符串 \n function   ab2str ( buf )   { \n     return  String . fromCharCode . apply ( null ,   new   Int16Array ( buf ) ) ; \n } \n \n 1 2 3 4 \n //字符串转ArrayBuffer \n function   str2ab ( str )   { \n     let  buf  =   new   ArrayBuffer ( str . length  *   2 ) ; \n     let  bufView  =   new   Int16Array ( buf ) ; \n     for ( let  i  =   0 ,  strLen  =  str . length ;  i  <  strLen ;  i ++ )   { \n        bufView [ i ]   =  str . charCodeAt ( i ) ; \n     } \n     return  buf ; \n } \n \n 1 2 3 4 5 6 7 8 9 \n 复合视图 \n 由于视图的构造函数可以指定起始位置和长度，所以在同一段内存中可以依次存放不同类型的数据，这叫做“复合视图”。 \n let  buffer  =   new   ArrayBuffer ( 24 ) ; \n\n let  idView  =   new   Uint32Array ( buffer ,    0 ,   1 ) ; \n let  usernameView  =   new   Uint8Array ( buffer ,   4 ,   16 ) ; \n let  amountDueView  =   new   Float32Array ( buffer ,   20 ,   1 ) ; \n \n 1 2 3 4 5 \n DataView视图 \n DataView视图本身也是构造函数，接受一个ArrayBuffer对象作为参数生成视图。 \n DataView(ArrayBuffer, [, 字节起始位置 [, 长度]]); \n 例如： \n let  buffer  =   new   ArrayBuffer ( 24 ) ; \n let  dv  =   new   DataView ( buffer ) ; \n \n 1 2 DataView实例有一下属性，含义与TypedArray实例的同名方法相同。 \n \n DataView.prototype.buffer:返回对应的的ArrayBuffer对象 \n DataView.prototype.byteLength:返回占据的内存字节长度 \n DataView.prototype.byteOffset:返回当前视图从对应的ArrayBuffer对象的哪个字节开始。 \n \n DataView实例提供8个方法读取内存： \n \n getInt8:读取1个字节，返回一个8位整数 \n getUint8:读取1个字节，返回一个无符号的8位整数 \n getInt16:读取2个字节，返回一个16位整数 \n getUint16:读取2个字节，返回一个无符号的16位整数 \n getInt32:读取4个字节，返回一个32位整数 \n getUint32:读取4个字节，返回一个无符号的32位整数 \n getFloat32:读取4个字节，返回一个32位浮点数 \n getFloat64:读取8个字节，返回一个64位浮点数 \n \n 这一系列get方法的参数都是一个字节序号，不可为负数，表示从哪个字节开始读取 。 \n \n 如果一次读取两个或两个以上字节，必须明确数据的存储方式：大端序/小端序。默认DataView的get方法使用大端序解读数据，如果需要使用小端序解读，必须在get方法的第二个参数指定true。 \n \n DataView实例提供8个方法写入内存： \n \n setInt8: 写入1个字节的8位整数 \n setUint8: 写入1个字节的8位无符号整数 \n setInt16: 写入2个字节的16位整数 \n setUint16: 写入2个字节的16位无符号整数 \n setInt32: 写入4个字节的32位整数 \n setUint32: 写入4个字节的32位无符号整数 \n setFloat32: 写入4个字节的32位浮点数 \n setFloat64: 读取8个字节的64位浮点数 \n \n 这一系列set方法接受两个参数：第一个是字节序号，表示从哪个字节开始写入；第二个是写入的数据。对于那些写入两个及两个以上字节的方法，需要指定第三个参数，false/undefined表示使用大端序写入，true表示使用小端序写入数据 。 \n SharedArrayBuffer \n Javascript是单线程的，web worker引入了多线程；每个线程的数据都是隔离的，通过postMeaasge()通信。 \n \n 与专有工作者线程通信的方式有3种：postMessage()、MessageChannel、BroadcastChannel。具体用法会在会在后续文章‘工作者线程’中介绍。 \n \n 使用工作者线程时，经常需要为它们提供某种形式的数据负载。工作者线程是独立的上下文，因此在上下文之间传输数据就会产生消耗。在JavaScript中，有三种在上下文间转移信息的方式： 结构化克隆算法(structured clone algorithm)、可转移对象(transferable objects)和共享数组缓冲区(shared array buffers) 。postMessage()通信就是采用的 结构化克隆算法 ，在通过postMessage()传递对象时，浏览器会遍历该对象，并在目标上下文中生成它的一个副本。 \n \n 这是一个相当缓慢的过程。 \n 对于某些数据，比如 ArrayBuffer，你还可以使用“可转移对象”。这种方式会把指定区域的内存移动到另一个 web worker 那里。 \n 但是之前的 web worker 将不再能访问这些被转移走的内存。 \n \n 转移内存这种方式适用于某些场景，但是对于更多的高性能并行的场景，共享内存才是你真正想要的。 \n 这就是  SharedArrayBuffers  能给你的。 \n \n 有了 SharedArrayBuffers，多个 web workers，多个线程都可以在同一块内存上读写数据。 \n 这意味着他们不会再有使用 postMessage 时的通讯开销和延迟。 \n 所有 web workers 都可以即时访问数据。当然，多个线程同时访问内存是有风险的，这会引起 条件竞争(race conditions)问题 。 \n 为解决这个问题，Atomics API 应运而生。Atomics API 可以保证SharedArrayBuffer 上的JavaScript 操作是 线程安全 的。 \n \n 关于线程安全可以看这篇文章，写的通俗易懂，是个大佬。 如果你这样回答“什么是线程安全”，面试官都会对你刮目相看 \n \n 在JS高级程序设计(第四版)中演示这一现象： \n 首先是线程不安全的操作： \n   const  workerScript  =   ` \n    self.onmessage = ({data}) => {\n        const view = new Int32Array(data);\n        //执行1000000次加操作\n        for(let i = 0; i < 1E6; ++i) {\n            //线程不安全加操作或导致资源竞争\n            view[0] += 1;\n        }\n        self.postMessage(null);\n    }\n ` \n const  workerScriptBlobURL  =   URL . createObjectURL ( new   Blob ( [ workerScript ] ) ) ; \n\n //创建容量为4的工作线程池 \n const  workers  =   [ ] ; \n for ( let  i  =   0 ;  i  <   4 ;   ++ i )   { \n    works . push ( new   Worker ( workerScriptBlobURL ) ) ; \n } \n\n //在最后一个工作线程完成后打印出最终值 \n let  responseCount  =   0 ; \n for ( const  worker  of  workers )   { \n    worker . onmessage   =   ( )   =>   { \n         if ( ++ responseCount  ==  workers . length )   { \n            console . log ( ` Final buffer value:  ${ view [ 0 ] } ` ) \n         } \n     } \n } \n // 初始化 SharedArrayBuffer \n const  sharedArrayBuffer  =   new   SharedArrayBuffer ( 4 ) ; \n const  view  =   new   Int32Array ( sharedArrayBuffer ) ; \nview [ 0 ]   =   1 ; \n // 把 SharedArrayBuffer 发送到每个工作线程 \n for ( const  worker  of  workers )   { \n    worker . postMessage ( sharedArrayBuffer ) ; \n } \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 这里，每个工作者线程都顺序执行了100 万次加操作，每次都读取共享数组的索引、执行一次加操作，然后再把值写回数组索引。在所有工作者线程读/写操作交织的过程中就会发生资源争用。例如： \n \n 线程A读取值1; \n 线程B读取到值1; \n 线程A加1并将2写回数组 \n 线程B仍然使用陈旧的数组值1，同样把2写回数组。 \n \n 要解决这个问题，就需要Atomics对象来改写成线程安全的加操作： \n   const  workerScript  =   ` \n    self.onmessage = ({data}) => {\n        const view = new Int32Array(data);\n        //执行1000000次加操作\n        for(let i = 0; i < 1E6; ++i) {\n            //线程安全的加操作\n            Atomics.add(view, 0, 1);\n        }\n        self.postMessage(null);\n    }\n ` \n //下面的代码不变 \n 1 2 3 4 5 6 7 8 9 10 11 12 #  Atomics对象 \n Atomics对象提供多种方法如下： \n 原子读写 \n \n Atomics.store(array, index, value) \n Atomics.load(array, index) \n \n \n store()方法用来向共享内存写入数据，load()方法用来从共享内存中读出数据。比起直接的读写操作，它们的好处是保证了读写操作的 原子性 。 \n \n \n 什么叫“原子性操作”呢？现代编程语言中，一条普通的命令被编译器处理以后会变成多条机器指令。如果是单线程运行，这是没有问题的。多线程环境并且共享内存的时候，就会出问题，因为这一组机器指令的运行期间可能会插入其他线程的指令，从而导致运行结果出错。 \n \n i++为什么不是原子操作？ \n 它相当于3个原子性操作： \n \n 读取变量的值; \n 将变量i的值加一; \n 将结果写入变量i中。 \n \n \n Atomics.wait() \n Atomics.wake() \n \n \n 这两个方法还要再研究研究 \n 运算方法 \n \n Atomics.add(array, index, value) \n Atomics.sub(array, index, value) \n Atomics.and(array, index, value) \n Atomics.or(array, index, value) \n Atomics.xor(array, index, value) \n \n \n 以Atomics.add(array, index, value)为例：将value加到array[index]中，返回array[index]的旧值。其他的方法同理(减运算、位与运算、位或运算、位异或运算) \n 其他方法 \n \n Atomics.exchange(array, index, value) 设置array[index]的值，返回旧的值 \n Atomics.compareExchange(array, index, oldValue, value) 如果array[index]等于oldValue，就写入value，返回oldValue。 \n 总结 \n 本文从ArrayBuffer入手，因为ArrayBuffer不可以直接读写，进而引出视图(TypedArray/DataView)。最后介绍了共享内存SharedArrayBuffer；由于多个线程同时访问共享内存，会带来竞争风险，所以引入了Atomics对象，保证操作的原子性，进而保证线程安全。 \n 参考文章 \n \n A cartoon intro to ArrayBuffers and SharedArrayBuffers \n 聊聊JS的二进制家族：Blob、ArrayBuffer和Buffer \n 阮一峰老师的ES6标准入门 \n 如果你这样回答“什么是线程安全”，面试官都会对你刮目相看 \n 并发编程之原子性操作 \n \n ",summary:"\n前言\n\nArrayBuffer对象、TypedArray视图和DataView视图是Javascript操作二进制数据的一个接口。它们都以数组的语法处理二进制数据，所以统称为二进制数组。它很像C语言的数组，允许开发者以数组下标的形式直接操作内存。\n\n二进制数组由3类对象组成：\n\nArrayBuffer对象：代表内存中的一段二进制数据，可以通过“视图”进行操作。“视图”部署了数组借口，这意味着，可以用数组的方法操作内存。\nTypedArray视图：共包含9种类型的视图。\nDataView视图：可以自定义符复合格式的视图，比如第一个字节是Uint8(无符号8位整数)、第二个和第三个字节是Int1 ...",id:"post",pid:"post",readingTime:{text:"5 min read",minutes:4.57,time:274200.00000000006,words:914}},{title:"Vue3 one piece",frontmatter:{title:"Vue3 one piece",description:"Vue3 one piece",date:"2021-01-07",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210107225332.jpg",tags:["JavaScript","前端开发","Vue"],meta:[{name:"title",content:"Vue3 one piece"},{name:"description",content:"Vue3 one piece"},{name:"keywords",content:"Vue3 one piece"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2021-01-07-vue3.html",relativePath:"_posts/2021-01-07-vue3.md",key:"v-3a7aa7b2",path:"/2021/01/07/vue3/",headers:[{level:2,title:"前言",slug:"前言"},{level:2,title:"初始化项目",slug:"初始化项目"},{level:2,title:"setup",slug:"setup"},{level:2,title:"响应式系统API",slug:"响应式系统api"},{level:3,title:"reactive",slug:"reactive"},{level:3,title:"ref",slug:"ref"},{level:3,title:"computed",slug:"computed"},{level:3,title:"readonly",slug:"readonly"},{level:3,title:"watchEffect",slug:"watcheffect"},{level:3,title:"watch",slug:"watch"},{level:2,title:"声明周期钩子函数",slug:"声明周期钩子函数"},{level:2,title:"依赖注入",slug:"依赖注入"},{level:2,title:"模板Refs",slug:"模板refs"},{level:2,title:"响应式工具集",slug:"响应式工具集"},{level:3,title:"unref",slug:"unref"},{level:3,title:"toRef",slug:"toref"},{level:3,title:"toRefs",slug:"torefs"},{level:3,title:"isRef",slug:"isref"},{level:3,title:"isProxy",slug:"isproxy"},{level:3,title:"isReactive",slug:"isreactive"},{level:3,title:"isReadonly",slug:"isreadonly"},{level:2,title:"高级响应式系统API",slug:"高级响应式系统api"},{level:3,title:"customRef",slug:"customref"},{level:3,title:"markRaw",slug:"markraw"},{level:3,title:"toRaw",slug:"toraw"},{level:2,title:"最后",slug:"最后"},{level:2,title:"参考文章/资源",slug:"参考文章-资源"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:' Vue3 one piece \n 前言 \n Vue3发布有一段时间啦，也一直在关注Vue3带来的新特性，也在看不少业界大佬分享的一些文章。时逢元旦，正所谓“新年新气象”，新的一年，我也决定系统的学习一下新版本的Vue——Vue3。本文打算主要学习一下Vue3的主要的新特性——  Composition API 。 \n \n 讲真的，我超喜欢one piece这个版本名字。 \n 初始化项目 \n \n 安装vue-cli \n \n npm install -g @vue/cli\nOR\nyarn global add @vue/cli\n \n 1 2 3 \n 创建项目 \n \n vue create vue3-test\n \n 1 \n 配置如下 \n setup \n setup函数是一个 新的组件选项 ，作为在组件内使用 Composition API 的入口点。 \n \n 所谓组件选项即 诸如：data, methods, directives, watch, computed, mounted, props, name,  filters(3.0已删除)等等~~ \n \n \n \n 调用时机 \n 创建组件实例，然后初始化 props ，紧接着就调用 setup 函数。从生命周期钩子的视角来看，它会在 beforeCreate 钩子之前被调用。 \n \n \n 模板中使用 \n 如果 setup 返回一个对象，则对象的属性将会被 合并到组件模板的渲染上下文 ： \n \n \n                         /* Home.vue */\n < template > \n   < div   class = " home " > \n     < img   alt = " Vue logo "   src = " ../assets/logo.png " > \n     < HelloWorld   msg = " Welcome to Your Vue.js + TypeScript App " /> \n     < p > \n      {{count}}-{{foo.bar}}\n     </ p > \n   </ div > \n </ template > \n\n < script   lang = " ts " > \n import   {  defineComponent ,  reactive ,  ref  }   from   \'vue\' ;   //tree shaking \n import  HelloWorld  from   \'@/components/HelloWorld.vue\' ;   // @ is an alias to /src \n\n export   default   defineComponent ( { \n  name :   \'Home\' , \n  components :   { \n    HelloWorld , \n   } , \n   setup ( )   { \n     const  count  =   ref ( 0 ) ; \n     const  foo  =   reactive ( { \n      bar :   \'zero\' \n     } ) \n     //暴露给模板 \n     return   { \n      count , \n      foo\n     } \n   } \n } ) ; \n </ script > \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 \n 注意 setup 返回的ref在模板中会自动解开， 不 需要写 .value 。 \n \n \n 在渲染函数/JSX中使用 \n \n setup 也可以返回一个函数，函数中也能使用当前作用域中的响应式数据： \n 新建了一个 render.vue \n \n 里面用到的渲染函数的部分写法与vue2.x有些不同，后续会总结 \n \n /* render.vue */\n < script   lang = " ts " > \n import   {  h ,  reactive ,  ref  }   from   "vue" ; \n interface   Object   { \n  foo :  string  |  number ; \n } \n export   default   { \n   setup ( )   { \n     const  count  =   ref ( 0 ) ; \n     const  object :  Object  =   reactive ( { \n      foo :   "bar" , \n     } ) ; \n\n     const  plusOne  =   ( ) :   void   =>   { \n        count . value ++ ; \n     } \n\n     return   ( )   =>   h ( \'div\' ,   { \n        style :   { \n            color :   \'red\' , \n            fontSize :   \'20px\' , \n         } , \n        onClick :  plusOne , \n        id :   \'renderCom\' \n     } ,   [ count . value ,  object . foo ] ) \n   } , \n } ; \n </ script > \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 在 Home.vue 中引入 \n < template>\n    <div class="home">\n      <img alt="Vue logo" src="../assets/logo.png">\n      <HelloWorld msg="Welcome to Your Vue.js + TypeScript App"/>\n      <p>\n        {{count}}-{{foo.bar}}\n      </p>\n +    <render />\n    </div>\n < /template>\n \n < script lang="ts">\n import { defineComponent, reactive, ref } from \'vue\';\nimport HelloWorld from \'@/components/HelloWorld.vue\'; // @ is an alias to /src\n +  import render from \'@/components/render.vue\';\n \nexport default defineComponent({\n    name: \'Home\',\n    components: {\n      HelloWorld,\n +    render\n    },\n    setup() {\n      const count = ref(0);\n      const foo = reactive({\n        bar: \'zero\'\n      })\n      return {\n        count,\n        foo\n      }\n    }\n });\n < /script>\n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 \n \n 参数 \n \n 该函数接受 props 作为其第一个参数: \n     /* HelloWorld.vue */\n...\n < script   lang = " ts " > \n import   {  defineComponent ,  onMounted ,  watchEffect  }   from   \'vue\' ; \n\n export   default   defineComponent ( { \n  name :   \'HelloWorld\' , \n  props :   { \n    msg :  String , \n   } , \n   setup ( props )   { \n     onMounted ( ( )   =>   { \n      console . log ( \'mounted hook trriger\' ) ; \n      console . log ( props . msg ) ; \n     } ) \n   } \n } ) ; \n </ script > \n...\n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 注意： props 对象是响应式的， watchEffect 或 watch 会观察和响应 props 的更新。 \n /* HelloWorld.vue */\n...\n < script lang="ts">\n import { defineComponent, onMounted, watchEffect } from \'vue\';\n\nexport default defineComponent({\n    name: \'HelloWorld\',\n    props: {\n      msg: String,\n    },\n    setup(props) {\n      onMounted(() => {\n        console.log(\'mounted hook trriger\');\n        console.log(props.msg);\n      })\n \n +    watchEffect(() => {\n +      console.log(`msg is ${props.msg}`)\n +    })\n    }\n });\n < /script>\n ...\n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 同时在 Home.vue 中改变传入 HelloWorld.vue 的msg值： \n             < template > \n   < div   class = " home " > \n     < img   alt = " Vue logo "   src = " ../assets/logo.png " > \n     < HelloWorld   @click = " reverse "   :msg = " msg " /> \n     < p > \n      {{count}}-{{foo.bar}}\n     </ p > \n     < render   /> \n   </ div > \n </ template > \n\n < script   lang = " ts " > \n import   {  defineComponent ,  reactive ,  ref  }   from   \'vue\' ; \n import  HelloWorld  from   \'@/components/HelloWorld.vue\' ;   // @ is an alias to /src \n import  render  from   \'@/components/render.vue\' ; \n\n export   default   defineComponent ( { \n  name :   \'Home\' , \n  components :   { \n    HelloWorld , \n    render\n   } , \n   setup ( )   { \n     const  count  =   ref ( 0 ) ; \n     const  foo  =   reactive ( { \n      bar :   \'zero\' \n     } ) ; \n     const  msg  =   ref ( \'Welcome to Your Vue.js + TypeScript App\' ) ; \n     const  reverse  =   ( ) :   void   =>   { \n      msg . value  =  msg . value . split ( \'\' ) . reverse ( ) . join ( \'\' ) ; \n     } \n     return   { \n      count , \n      foo , \n      reverse\n     } \n   } \n } ) ; \n </ script > \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 然而 不要 解构 props 对象，那样会使其失去响应性： \n /* HelloWorld.vue */\n...\n < script   lang = " ts " > \n import   {  defineComponent ,  onMounted ,  watchEffect  }   from   \'vue\' ; \n\n export   default   defineComponent ( { \n  name :   \'HelloWorld\' , \n  props :   { \n    msg :  String , \n   } , \n   setup ( {  msg  } )   { \n     onMounted ( ( )   =>   { \n      console . log ( \'mounted hook trriger\' ) ; \n      console . log ( msg ) ; \n     } ) \n\n     watchEffect ( ( )   =>   { \n      console . log ( ` msg is  ${ msg } ` )   // Will not be reactive \n     } ) \n   } \n } ) ; \n </ script > \n...\n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 在开发过程中，props 对象对用户空间代码是 不可变 的（用户代码尝试修改 props 时会触发警告）。 \n 第二个参数提供了一个上下文对象，从原来2.x中 this 选择性地暴露了一些property。 \n   /* HelloWorld.vue */\n...\n < script   lang = " ts " > \n import   {  defineComponent ,  onMounted ,  watchEffect  }   from   \'vue\' ; \n\n export   default   defineComponent ( { \n  name :   \'HelloWorld\' , \n  props :   { \n    msg :  String , \n   } , \n   setup ( props ,  ctx )   { \n     onMounted ( ( )   =>   { \n      console . log ( \'mounted hook trriger\' ) ; \n      console . log ( props . msg ) ; \n      console . log ( ctx ) ;   //打印结果如下图 \n     } ) \n\n     watchEffect ( ( )   =>   { \n      console . log ( ` msg is  ${ props . msg } ` ) \n     } ) \n   } \n } ) ; \n </ script > \n...\n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 \n attrs 和 slots 都是都是内部组件实例上对应项的代理(Proxy)，可以确保在更新后仍然是最新值。所以可以解构，无需担心后面访问到过期的值： \n       /* HelloWorld.vue */ \n ... \n export   default   defineComponent ( { \n  name :   \'HelloWorld\' , \n  props :   { \n    msg :  String , \n   } , \n   setup ( props ,   {  attrs ,  slots  } )   { \n     onMounted ( ( )   =>   { \n      console . log ( \'mounted hook trriger\' ) ; \n      console . log ( props . msg ) ; \n      console . log ( attrs ) ; \n      console . log ( slots ) ; \n     } ) \n   } \n } ) ; \n ... \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 #  响应式系统API \n reactive \n 接受一个 普通对象 然后返回该普通对象的响应式 代理(Proxy) 。等同于2.x的 Vue.observable() \n /* Home.vue */ \n ... \n const  foo  =   reactive ( {  bar :   \'zero\'   } ) ; \n ... \n \n 1 2 3 4 响应式转换是“深层的”：会影响对象内部所有嵌套的属性。基于 ES2015 的 Proxy 实现，返回的代理对象不等于原始对象。建议仅使用代理对象而避免依赖原始对象。 \n ref \n 接受一个参数值并 返回 一个响应式且可改变的 ref对象 。ref对象拥有一个指向内部值的单一属性 .value 。 \n const  count  =   ref ( 0 ) ; \nconsole . log ( count . value ) ;   // 0 \n\ncount . value ++ ; \nconsole . log ( count . value ) ;   // 1 \n \n 1 2 3 4 5 如果传入 ref 的是一个对象，将调用  reactive  方法进行深层响应转换。 \n \n 模板中访问 \n \n 当 ref 作为渲染上下文的属性返回（即在setup() 返回的对象中）并在模板中使用时，它会自动解套，无需在模板内额外书写  .value ： \n < template > \n     < div > {{count}} </ div > \n </ template > \n < script > \n     export   default   { \n         setup ( )   { \n             return   { \n                count :   ref ( 0 ) \n             } \n         } \n     } \n </ script > \n \n 1 2 3 4 5 6 7 8 9 10 11 12 \n 作为响应式对象的属性访问 \n \n 当ref作为reactive对象的property被 访问 或 修改 时,也会自动解套value值，其行为类似普通属性。 \n /* Home.vue */\n...\n < script lang="ts">\n import { defineComponent, reactive, ref } from "vue";\nimport HelloWorld from "@/components/HelloWorld.vue"; // @ is an alias to /src\nimport render from "@/components/render.vue";\n\nexport default defineComponent({\n    name: "Home",\n    components: {\n      HelloWorld,\n      render,\n    },\n    setup() {\n      const count = ref(0);\n +    const age = ref(18);\n      const msg = ref("Welcome to Your Vue.js + TypeScript App");\n      const foo = reactive({\n        bar: "zero",\n      });\n \n      //如果传入 ref 的是一个对象，将调用 reactive 方法进行深层响应转换。\n      const obj = ref({\n        a: 3,\n      });\n \n      const person = reactive({\n        name: "yan",\n +      age,\n      });\n      const handlerClick = (): void => {\n        obj.value.a++;\n        count.value += 3;\n +      person.age++;\n      };\n      const reverse = () => {\n        msg.value = msg.value.split("").reverse().join("");\n      };\n      return {\n        count,\n        foo,\n        msg,\n        handlerClick,\n        reverse,\n        obj,\n        person\n      };\n    },\n });\n < /script>\n ...\n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 注意当嵌套在 reactive  Object  中时，ref 才会解套。从  Array  或者  Map  等原生集合类中访问 ref 时，不会自动解套： \n const  arr  =   reactive ( [ ref ( 0 ) ] ) ; \n //这里需要 .value \nconsole . log ( arr [ 0 ] . value ) ; \n\n const  map  =   reactive ( new   Map ( [ [ \'foo\' ,   ref ( 0 ) ] ] ) ) \n //这里与需要 .value \nconsole . log ( map . get ( \'foo\' ) . value ) ; \n \n 1 2 3 4 5 6 7 有时我们可能需要为 ref 做一个较为复杂的类型标注。我们可以通过在调用  ref  时传递泛型参数来覆盖默认推导： \n const  foo  =   ref < string   |   number > ( \'123\' ) ; \n\nfoo . value  =   123 ;   // 能够通过 \n \n 1 2 3 #  computed \n 传入一个getter函数，返回一个默认 不可手动修改的ref对象 。 \n /* HelloWorld.vue */\n < template>\n      <div class="hello">\n          <h1>{{ msg }} && {{plusCount}}</h1>\n      </div>\n      ...\n < /template>\n < script lang="ts">\n import { computed, defineComponent, onMounted, ref, watchEffect } from "vue";\n\nexport default defineComponent({\n    name: \'HelloWorld\',\n    props: {\n      msg: String,\n    },\n    setup(props, ctx) {\n +    const count = ref(0);\n +    const plusCount = computed(() => count.value+1)\n      onMounted(() => {\n        console.log(\'mounted hook trriger\');\n        console.log(props.msg);\n        console.log(ctx);\n +      setInterval(() => {\n +        count.value++;\n +      }, 1000)\n      })\n \n      watchEffect(() => {\n        console.log(`msg is ${props.msg}`)\n      })\n      \n +    return {\n +      plusCount\n +    }\n    }\n });\n < /script>\n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 或者传入一个拥有 get 和 set 函数的对象，创建一个 可手动修改的计算状态 。 \n const  count  =   ref ( 0 ) ; \n const  plusCount  =   computed ( { \n     get :   ( )   =>  count . value  +   1 , \n     set :   ( val )   =>   { \n        count . value  =  val  -   1 ; \n     } \n } ) \n \n 1 2 3 4 5 6 7 #  readonly \n 传入一个对象（响应式或普通）或 ref，返回一个原始对象的只读代理。一个只读的代理是“深层的”，对象内部任何嵌套的属性也都是只读的。 \n /* HelloWorld.vue */\n < script lang="ts">\n import { computed, defineComponent, onMounted, reactive, readonly, ref, watchEffect } from "vue";\n\nexport default defineComponent({\n    name: "HelloWorld",\n    props: {\n      msg: String,\n    },\n    setup(props, ctx) {\n      const count = ref(0);\n      const plusCount = computed(() => count.value+1)\n +    const origin = reactive({\n +      countStart: 0\n +    })\n      const copy = readonly(origin);\n      onMounted(() => {\n        console.log("mounted hook trriger");\n        console.log(props.msg);\n        console.log(ctx);\n        setInterval(() => {\n -        count.value++;\n +        origin.countStart++\n        }, 1000)\n      });\n \n      watchEffect(() => {\n        console.log(`msg is ${props.msg}`);\n      });\n +    watchEffect(() => {\n +      console.log(`copy.countStart: ${copy.countStart}`);\n +    })\n      return {\n        plusCount\n      }\n    },\n });\n < /script>\n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 \n 如果尝试修改只读属性：copy.value++, 此行为会被阻止并且抛出警告。 \n watchEffect \n 立即执行一个传入函数，并响应式追踪其依赖，并在其依赖变更时重新运行该函数。 \n \n 参考上面代码👆 \n 停止侦听 \n 当  watchEffect  在组件的  setup()  函数或生命周期钩子被调用时， 侦听器会被链接到该组件的生命周期，并在组件卸载时自动停止。 \n 在一些情况下，也可以显式调用返回值以停止侦听： \n /* HelloWorld.vue */\n < script lang="ts">\n import { computed, defineComponent, onMounted, reactive, readonly, ref, watchEffect } from "vue";\n\nexport default defineComponent({\n    name: "HelloWorld",\n    props: {\n      msg: String,\n    },\n    setup(props, ctx) {\n      const count = ref(0);\n      const plusCount = computed(() => count.value+1)\n      const origin = reactive({\n        countStart: 0\n      })\n      const copy = readonly(origin);\n      onMounted(() => {\n        console.log("mounted hook trriger");\n        console.log(props.msg);\n        console.log(ctx);\n        setInterval(() => {\n          origin.countStart++;\n +        if(origin.countStart > 5) stop();\n        }, 1000)\n      });\n \n      watchEffect(() => {\n        console.log(`msg is ${props.msg}`);\n      });\n +    const stop = watchEffect(() => {\n        console.log(`copy.countStart: ${copy.countStart}`);\n      })\n      return {\n        plusCount\n      }\n    },\n });\n < /script>\n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 #  清除副作用 \n 有时副作用函数会执行一些异步的副作用, 这些响应需要在其失效时清除（ 即完成之前状态已改变了 ）。 \n 所以侦听副作用传入的函数可以接收一个  onInvalidate  函数作入参, 用来注册清理失效时的回调。当以下情况发生时，这个失效回调会被触发: \n \n 副作用即将重新执行时 \n 侦听器被停止 (如果在  setup()  或 生命周期钩子函数中使用了  watchEffect , 则在卸载组件时) \n \n       const  stop  =   watchEffect ( ( onInvalidate )   =>   { \n    console . log ( ` copy.countStart:  ${ copy . countStart } ` ) ; \n     onInvalidate ( ( )   =>   { \n        console . log ( \'onInvalidate\' ) ; \n     } ) \n } ) \n 1 2 3 4 5 6 官方示例： \n watchEffect ( ( onInvalidate )   =>   { \n   const  token  =   performAsyncOperation ( id . value ) \n   onInvalidate ( ( )   =>   { \n     // id 改变时 或 停止侦听时 \n     // 取消之前的异步操作 \n    token . cancel ( ) \n   } ) \n } ) \n \n 1 2 3 4 5 6 7 8 #  副作用刷新时机 \n Vue 的响应式系统会缓存副作用函数，并异步地刷新它们，这样可以避免同一个 tick 中多个状态改变导致的不必要的重复调用。在核心的具体实现中, 组件的更新函数也是一个被侦听的副作用。当一个用户定义的副作用函数进入队列时, 会在所有的 组件更新后 执行： \n < template > \n   < div > {{ count }} </ div > \n </ template > \n\n < script > \n   export   default   { \n     setup ( )   { \n       const  count  =   ref ( 0 ) \n\n       watchEffect ( ( )   =>   { \n        console . log ( count . value ) \n       } ) \n\n       return   { \n        count , \n       } \n     } , \n   } \n </ script > \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 在这个例子中： \n \n count 会在初始化时同步打印出来 \n 更改 count 时，将在组件 更新后 执行副作用 \n \n 请注意，初始化运行是在组件  mounted  之前执行的。因此，如果你希望在编写副作用函数时访问 DOM（或模板 ref），请在  onMounted  钩子中进行： \n onMounted ( ( )   =>   { \n   watchEffect ( ( )   =>   { \n     // 在这里可以访问到 DOM 或者 template refs \n   } ) \n } ) \n \n 1 2 3 4 5 如果副作用需要同步或在组件更新之前重新运行，我们可以传递一个拥有  flush  属性的对象作为选项（默认为  \'post\' ）： \n     // 同步运行 \n watchEffect ( \n   ( )   =>   { \n     /* ... */ \n   } , \n   { \n    flush :   \'sync\' , \n   } \n ) \n\n // 组件更新前执行 \n watchEffect ( \n   ( )   =>   { \n     /* ... */ \n   } , \n   { \n    flush :   \'pre\' , \n   } \n ) \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 #  侦听器调试 \n onTrack 和 onTrigger 选项可用于调试一个侦听器的行为。 \n \n 当一个reactive对象或者一个ref作为依赖被追踪时，将调用 onTrack \n 依赖项变更导致副作用被触发时，将调用 onTrigger \n \n watchEffect ( \n   ( )   =>   { \n     /* 副作用的内容 */ \n   } , \n   { \n    flush :   \'post\' , \n     onTrack ( e )   { \n       /* code */   \n     } , \n     onTrigger ( e )   { \n       debugger \n     } , \n   } \n ) \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 \n onTrack 和 onTrigger 仅在开发模式下生效。 \n watch \n watch API完全等效于2.x  this.$watch  (以及 watch 中相应的选项)。 watch 需要侦听特定的数据源，并在回调函数中执行副作用。默认情况是懒执行的，也就是说尽在侦听的源变更时才执行回调。 \n \n \n 对比 watchEffect ， watch 允许我们： \n \n 懒执行副作用； \n 更明确哪些状态的改变会触发侦听器重新运行副作用； \n 访问侦听状态变化前后的值 \n \n \n \n 侦听单个数据源 \n \n \n 侦听器的数据源可以是一个拥有返回值的getter函数，也可以是ref： \n // 侦听一个 getter \n const  state  =   reactive ( {  count :   0   } ) \n watch ( \n   ( )   =>  state . count , \n   ( count ,  prevCount )   =>   { \n     /* ... */ \n   } \n ) \n\n // 直接侦听一个 ref \n const  count  =   ref ( 0 ) \n watch ( count ,   ( count ,  prevCount )   =>   { \n   /* ... */ \n } ) \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 \n 侦听多个数据源 \n \n watcher 也可以使用 数组 来同时侦听多个源： \n                                 /* Home.vue */ \n < script lang = "ts" > \n import   {  defineComponent ,  reactive ,  ref ,  watch  }   from   "vue" ; \n import  HelloWorld  from   "@/components/HelloWorld.vue" ;   // @ is an alias to /src \n import  render  from   "@/components/render.vue" ; \n\n export   default   defineComponent ( { \n  name :   "Home" , \n  components :   { \n    HelloWorld , \n    render , \n   } , \n   setup ( )   { \n     const  count  =   ref ( 0 ) ; \n     const  age  =   ref ( 18 ) ; \n     const  msg  =   ref ( "Welcome to Your Vue.js + TypeScript App" ) ; \n     const  foo  =   reactive ( { \n      bar :   "zero" , \n     } ) ; \n\n     //如果传入 ref 的是一个对象，将调用 reactive 方法进行深层响应转换。 \n     const  obj  =   ref ( { \n      a :   3 , \n     } ) ; \n\n     // watch(age, (age, olgAge) => { \n     //   console.log(age, olgAge); \n     // }) \n\n     // watch(() => foo.bar, (val, oldVal) => { \n     //   console.log(val, oldVal); \n     // }) \n\n     watch ( [ age ,   ( )   =>  foo . bar ] ,   ( [ age ,  val ] ,   [ oldAge ,  oldVal ] )   =>   { \n      console . log ( age ,  oldAge ) ; \n      console . log ( val ,  oldVal ) ; \n     } ) \n\n     const  person  =   reactive ( { \n      name :   "yan" , \n      age , \n     } ) ; \n     const  handlerClick  =   ( ) :   void   =>   { \n      obj . value . a ++ ; \n      count . value  +=   3 ; \n      person . age ++ ; \n      foo . bar  +=   \'o\' ; \n     } ; \n     const   reverse   =   ( )   =>   { \n      msg . value  =  msg . value . split ( "" ) . reverse ( ) . join ( "" ) ; \n     } ; \n     return   { \n      count , \n      foo , \n      msg , \n      handlerClick , \n      reverse , \n      obj , \n      person\n     } ; \n   } , \n } ) ; \n < / script > \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 \n 与watchEffect共享的行为 \n \n watch 和 watchEffect 在 停止侦听 ,  清除副作用  (相应地 onInvalidate 会作为回调的第三个参数传入)， 副作用刷新时机  和  侦听器调试  等方面行为一致. \n 声明周期钩子函数 \n 在 runtime-core.d.ts 声明文件中可以找到如下声明： \n export   declare   function   onActivated ( hook :   Function ,  target ? :  ComponentInternalInstance  |   null ) :   void ; \n\n export   declare   const   onBeforeMount :   ( hook :   ( )   =>   any ,  target ? :  ComponentInternalInstance  |   null )   =>   false   |   Function   |   undefined ; \n\n export   declare   const   onBeforeUnmount :   ( hook :   ( )   =>   any ,  target ? :  ComponentInternalInstance  |   null )   =>   false   |   Function   |   undefined ; \n\n export   declare   const   onBeforeUpdate :   ( hook :   ( )   =>   any ,  target ? :  ComponentInternalInstance  |   null )   =>   false   |   Function   |   undefined ; \n\n export   declare   function   onDeactivated ( hook :   Function ,  target ? :  ComponentInternalInstance  |   null ) :   void ; \n\n export   declare   const   onErrorCaptured :   ( hook :  ErrorCapturedHook ,  target ? :  ComponentInternalInstance  |   null )   =>   void ; \n\n export   declare   const   onMounted :   ( hook :   ( )   =>   any ,  target ? :  ComponentInternalInstance  |   null )   =>   false   |   Function   |   undefined ; \n\n export   declare   const   onRenderTracked :   ( hook :  DebuggerHook ,  target ? :  ComponentInternalInstance  |   null )   =>   false   |   Function   |   undefined ; \n\n export   declare   const   onRenderTriggered :   ( hook :  DebuggerHook ,  target ? :  ComponentInternalInstance  |   null )   =>   false   |   Function   |   undefined ; \n\n export   declare   const   onUnmounted :   ( hook :   ( )   =>   any ,  target ? :  ComponentInternalInstance  |   null )   =>   false   |   Function   |   undefined ; \n\n export   declare   const   onUpdated :   ( hook :   ( )   =>   any ,  target ? :  ComponentInternalInstance  |   null )   =>   false   |   Function   |   undefined ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 可以直接导入 onXXX 一族的函数来注册生命周期钩子。这些声明周期钩子注册函数只能在 setup() 期间同步使用。 \n \n \n 与2.x版本声明周期相对应的组合式API \n \n beforeCreate  -> 使用 setup() \n created  -> 使用 setup() \n beforeMount  ->  onBeforeMount \n mounted  ->  onMounted \n beforeUpdate  ->  onBeforeUpdate \n updated  ->  onUpdated \n beforeDestroy  ->  onBeforeUnmount \n destroyed  ->  onUnmounted \n errorCaptured  ->  onErrorCaptured \n activated  ->  onActivated  (keep-alive) \n deactivated  ->  onDeactivated  (keep-alive) \n \n \n \n 新增的钩子函数 \n 除了和 2.x 生命周期等效项之外，组合式 API 还提供了以下调试钩子函数： \n \n onRenderTracked \n onRenderTriggered \n \n 两个钩子函数都接收一个  DebuggerEvent ，与  watchEffect  参数选项中的  onTrack  和  onTrigger  类似： \n export   default   { \n     setup ( )   { \n         onRenderTriggered ( e )   { \n             debugger \n             // 检查哪个依赖性导致组件重新渲染 \n         } \n     } \n } \n \n 1 2 3 4 5 6 7 8 \n 依赖注入 \n provide  和  inject  提供依赖注入，功能类似2.x的 provide/inject 。两者都只能在当前活动组件示例的  setup()  中调用。 \n /* Home.vue */ \n import   {  provide  }   from   \'vue\' ; \n setup ( )   { \n     const  theme  =  Symbol . for ( \'theme\' ) ; \n     provide ( theme ,   \'dark\' ) ; \n } \n\n /* HelloWorld.vue */ \n import   {  inject  }   from   \'vue\' ; \n setup ( )   { \n     const  theme  =  Symbol . for ( \'theme\' ) ; \n     const  themeinfo  =   inject ( theme ,   \'light\' ) ; \n    \n     return   { \n        themeinfo\n     } \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 inject  接受一个可选的的默认值作为第二个参数。如果未提供默认值，并且在  provide  上下文中未找到该属性，则  inject  返回  undefined 。 \n 模板Refs \n 当使用组合式 API 时，reactive refs 和 template refs 的概念已经是统一的。为了获得对模板内元素或组件实例的引用，我们可以像往常一样在  setup()  中声明一个 ref 并返回它： \n /* Home.vue */\n < template>\n    <div class="home">\n +    <img ref="img" alt="Vue logo" src="../assets/logo.png" />\n      ...\n    </div>\n < /template>\n \n < script lang="ts">\n export default defineComponent({\n    name: "Home",\n    components: {\n      HelloWorld,\n      render,\n    },\n    setup() {\n      ...\n +    const img = ref(null);\n      ...\n      const handlerClick = (): void => {\n +      console.log(img.value); // <img />\n      };\n      return {\n        img,\n        ...\n      };\n    },\n });\n < /script>\n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 这里我们将  img  暴露在渲染上下文中，并通过  ref="img"  绑定到  img  作为其 ref。 在 Virtual DOM patch 算法中，如果一个 VNode 的  ref  对应一个渲染上下文中的 ref，则该 VNode 对应的元素或组件实例将被分配给该 ref。 \n \n 配合 render 函数 / JSX 的用法 \n \n /* render.vue */\n < script lang="ts">\n +  import { h, reactive, ref } from "vue";\n interface Object {\n    foo: string | number;\n }\nexport default {\n    setup() {\n      const count = ref(0);\n      const root = ref(null);\n      const object: Object = reactive({\n        foo: "bar",\n      });\n \n      const plusOne = (): void => {\n        count.value++;\n +      console.log(root.value);\n      };\n \n      return () =>\n        h(\n          "div",\n          {\n            style: {\n              color: "red",\n              fontSize: "20px",\n            },\n            onClick: plusOne,\n +          ref: root,\n            id: "renderCom",\n          },\n          [count.value, object.foo]\n        );\n    },\n };\n < /script>\n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 \n 在v-for中使用 \n \n 模板 ref 在 v-for 中使用 vue 没有做特殊处理，需要使用 函数型 的 ref（3.0 提供的新功能）来自定义处理方式： \n   < template > \n   < div   v-for = " (item, i) in list "   :ref = " el => { divs[i] = el } " > \n    {{ item }}\n   </ div > \n </ template > \n\n < script > \n   import   {  ref ,  reactive ,  onBeforeUpdate  }   from   \'vue\' \n\n   export   default   { \n     setup ( )   { \n       const  list  =   reactive ( [ 1 ,   2 ,   3 ] ) \n       const  divs  =   ref ( [ ] ) \n\n       // 确保在每次变更之前重置引用 \n       onBeforeUpdate ( ( )   =>   { \n        divs . value  =   [ ] \n       } ) \n\n       return   { \n        list , \n        divs , \n       } \n     } , \n   } \n </ script > \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 #  响应式工具集 \n unref \n 如果参数是一个 ref 则返回它的 value，否则返回参数本身。它是 val = isRef(val) ? val.value : val 的语法糖。 \n function   useFoo ( x :  number  |  Ref < number > )   { \n   const  unwrapped  =   unref ( x )   // unwrapped 一定是 number 类型 \n } \n \n 1 2 3 #  toRef \n toRef  可以用来为一个 reactive 对象的属性创建一个 ref。这个 ref 可以被传递并且能够保持响应性。 \n const  state  =   reactive ( { \n  foo :   1 , \n  bar :   2 , \n } ) \n\n const  fooRef  =   toRef ( state ,   \'foo\' ) \n\nfooRef . value ++ \nconsole . log ( state . foo )   // 2 \n\nstate . foo ++ \nconsole . log ( fooRef . value )   // 3 \n \n 1 2 3 4 5 6 7 8 9 10 11 12 当您要将一个prop中的属性作为ref传给组合逻辑函数时,  toRef 就派上了用场： \n \n 注意：在开发过程中，props 对象对用户空间代码是不可变的。 \n \n /* HelloWorld.vue */ \n import   {  Ref ,  ref ,  toRef  }   from   "vue" ; \n\n setup ( props ,  ctx )   { \n     const  toRef_test  =  ref < null   |  string > ( null ) ; \n     const   changePropMsg   =   ( propValue :  Ref )   =>   { \n      toRef_test . value  =  propValue . value  +   \'dddd\' ; \n     } \n    \n     changePropMsg ( toRef ( props ,   \'msg\' ) ) ; \n    \n     return   { \n        toRef_test\n     } \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 toRef 源码实现如下： \n \n 注释是我加的 \n \n class   ObjectRefImpl   { \n     constructor ( _object ,  _key )   { \n         this . _object  =  _object ;   //浅拷贝 \n         this . _key  =  _key ; \n         this . __v_isRef  =   true ; \n     } \n     get   value ( )   { \n         return   this . _object [ this . _key ] ; \n     } \n     set   value ( newVal )   { \n         this . _object [ this . _key ]   =  newVal ; \n     } \n } \n function   toRef ( object ,  key )   { \n     return   isRef ( object [ key ] ) \n         ?  object [ key ] \n         :   new   ObjectRefImpl ( object ,  key ) ; \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 #  toRefs \n 把一个响应式对象转换成普通对象，该普通对象的每个 property 都是一个 ref ，和响应式对象 property 一一对应。 \n const  state  =   reactive ( { \n  foo :   1 , \n  bar :   2 , \n } ) \n\n const  stateAsRefs  =   toRefs ( state ) \n /*\nstateAsRefs 的类型如下:\n\n{\n  foo: Ref<number>,\n  bar: Ref<number>\n}\n*/ \n\n // ref 对象 与 原属性的引用是 "链接" 上的 \nstate . foo ++ \nconsole . log ( stateAsRefs . foo . value )   // 2 \n\nstateAsRefs . foo . value ++ \nconsole . log ( state . foo )   // 3 \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 当想要从一个组合逻辑函数中返回响应式对象时，用  toRefs  是很有效的，该 API 让消费组件可以 解构 / 扩展（使用  ...  操作符）返回的对象，并不会丢失响应性： \n function   useFeatureX ( )   { \n   const  state  =   reactive ( { \n    foo :   1 , \n    bar :   2 , \n   } ) \n\n   // 对 state 的逻辑操作 \n\n   // 返回时将属性都转为 ref \n   return   toRefs ( state ) \n } \n\n export   default   { \n   setup ( )   { \n     // 可以解构，不会丢失响应性 \n     const   {  foo ,  bar  }   =   useFeatureX ( ) \n\n     return   { \n      foo , \n      bar , \n     } \n   } , \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 toRefs 源码实现如下： \n function   toRefs ( object )   { \n     if   (   ! isProxy ( object ) )   { \n        console . warn ( ` toRefs() expects a reactive object but received a plain one. ` ) ; \n     } \n     const  ret  =  shared . isArray ( object )   ?   new   Array ( object . length )   :   { } ; \n     for   ( const  key  in  object )   { \n        ret [ key ]   =   toRef ( object ,  key ) ; \n     } \n     return  ret ; \n } \n \n 1 2 3 4 5 6 7 8 9 10 #  isRef \n 检查一个值是否为一个 ref 对象。 \n isProxy \n 检查一个对象是否是由  reactive  或者  readonly 方法创建的代理。 \n isReactive \n 检查一个对象是否是由  reactive  创建的响应式代理。 \n 如果这个代理是由  readonly  创建的，但是又被  reactive  创建的另一个代理包裹了一层，那么同样也会返回 true。 \n isReadonly \n 检查一个对象是否是由  readonly  创建的只读代理。 \n 高级响应式系统API \n customRef \n customRef 用于自定义一个  ref ， 可以显式地控制依赖追踪和触发响应 ，接受一个工厂函数，两个参数分别是用于追踪的  track  与用于触发响应的  trigger ，并返回一个带有  get  和  set  属性的对象。 \n \n 使用自定义的ref实现带防抖功能的 v-model : \n \n < input   v-model = " text "   /> \n \n 1 function   useDebouncedRef ( value ,  delay  =   200 )   { \n   let  timeout\n   return   customRef ( ( track ,  trigger )   =>   { \n     return   { \n       get ( )   { \n         track ( ) \n         return  value\n       } , \n       set ( newValue )   { \n         clearTimeout ( timeout ) \n        timeout  =   setTimeout ( ( )   =>   { \n          value  =  newValue\n           trigger ( ) \n         } ,  delay ) \n       } , \n     } \n   } ) \n } \n\n export   default   { \n   setup ( )   { \n     return   { \n      text :   useDebouncedRef ( \'hello\' ) , \n     } \n   } , \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 源码实现如下： \n class   CustomRefImpl   { \n     constructor ( factory )   { \n         this . __v_isRef  =   true ; \n         //track和trigger是内部实现的方法 \n         const   {  get ,  set  }   =   factory ( ( )   =>   track ( this ,   "get"   /* GET */ ,   \'value\' ) ,   ( )   =>   trigger ( this ,   "set"   /* SET */ ,   \'value\' ) ) ; \n         this . _get  =  get ; \n         this . _set  =  set ; \n     } \n     get   value ( )   { \n         return   this . _get ( ) ; \n     } \n     set   value ( newVal )   { \n         this . _set ( newVal ) ; \n     } \n } \n function   customRef ( factory )   { \n     return   new   CustomRefImpl ( factory ) ; \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 以上面例子为例，调用 useDebouncedRef() 函数，其实最终返回的是 CustomRefImpl 的一个实例对象；当获取text的值时，会触发get value()方法，进而执行this._get()方法，这个this._get()方法就是工厂函数返回的get()。在get()方法中调用了track()，也就是 () => track(this, "get" /* GET */, \'value\') 。 \n \n set同理 \n markRaw \n 显式标记一个对象为“永远不会转为响应式代理”，函数返回这个对象本身。 \n toRaw \n 返回由  reactive  或  readonly  方法转换成响应式代理的普通对象。这是一个还原方法，可用于临时读取，访问不会被代理/跟踪，写入时也不会触发更改。不建议一直持有原始对象的引用。请谨慎使用。 \n const  foo  =   { } \n const  reactiveFoo  =   reactive ( foo ) \n\nconsole . log ( toRaw ( reactiveFoo )   ===  foo )   // true \n \n 1 2 3 4 #  最后 \n 参照Vue组合式API的官网，里面的大多数api都测试了一下。我感觉里面出现次数最多的两个字就是 代理 ，也就是 Proxy , 可以看出 Vue3 利用 ES6 中的 Proxy 解决了Vue2的一些问题，比如对象新增属性的追踪。(Vue2中利用this.$set()来解决的) \n \n Vue2通过Object.defineProperty来将对象的key转换成getter/setter的形式来追踪变化，但是getter/setter只能追踪一个数据是否被修改，无法追踪新增属性和删除属性。 \n \n \n Object.defineProperty是一个相对比较昂贵的操作，因为它直接操作对象的属性，颗粒度比较小。将它替换为es6的Proxy，在目标对象之上架了一层拦截，代理的是对象而不是对象的属性。这样可以将原本对对象属性的操作变为对整个对象的操作，颗粒度变大。 \n \n 其次，组合式api非常的灵活，可以单独写在一个函数里面，提高复用性。 \n 还有Vue3对TS的支持真的超级好，类型推导也很棒 \n 还有Tree shaking的支持，用什么引什么，打包体积更小 \n 参考文章/资源 \n \n Vue组合式API \n Vue3中文官网 \n \n ',summary:"\n前言\n\nVue3发布有一段时间啦，也一直在关注Vue3带来的新特性，也在看不少业界大佬分享的一些文章。时逢元旦，正所谓“新年新气象”，新的一年，我也决定系统的学习一下新版本的Vue——Vue3。本文打算主要学习一下Vue3的主要的新特性—— Composition API。\n\n>讲真的，我超喜欢one piece这个版本名字。\n\n初始化项目\n\n安装vue-cli\n\nnpm install -g @vue/cli\nOR\nyarn global add @vue/cli\n\n创建项目\n\nvue create vue3-test\n\n配置如下\n\nsetup\n\nsetup函数是一个新的组件选项，作为在组 ...",id:"post",pid:"post",readingTime:{text:"14 min read",minutes:13.82,time:829200,words:2764}},{title:"TypeScript学习记录(一)",frontmatter:{title:"TypeScript学习记录(一)",description:"TypeScript学习记录(一)",date:"2021-01-09",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210109223210.jpg",tags:["TypeScript"],meta:[{name:"title",content:"TypeScript学习记录(一)"},{name:"description",content:"TypeScript学习记录(一)"},{name:"keywords",content:"TypeScript"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2021-01-09-typescript.html",relativePath:"_posts/2021-01-09-typescript.md",key:"v-59749606",path:"/2021/01/09/typescript/",headers:[{level:2,title:"前言",slug:"前言"},{level:2,title:"环境搭建",slug:"环境搭建"},{level:2,title:"什么时Typescript",slug:"什么时typescript"},{level:2,title:"数据类型",slug:"数据类型"},{level:3,title:"布尔值",slug:"布尔值"},{level:3,title:"数值",slug:"数值"},{level:3,title:"字符串",slug:"字符串"},{level:3,title:"空值",slug:"空值"},{level:3,title:"Null 和 Undefined",slug:"null-和-undefined"},{level:3,title:"any",slug:"any"},{level:3,title:"Never",slug:"never"},{level:3,title:"Unknown",slug:"unknown"},{level:3,title:"Array",slug:"array"},{level:3,title:"Tuple",slug:"tuple"},{level:3,title:"Enum",slug:"enum"},{level:3,title:"Objct",slug:"objct"},{level:3,title:"类型断言",slug:"类型断言"},{level:2,title:"参考文章/资源",slug:"参考文章-资源"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:' TypeScript学习记录(一) \n 前言 \n 前几天学习了一下Vue3的组合式API，发现Vue3对TypeScript的支持真的好，就是丝滑~。之前对于TS或多或少有了一些了解，今天做个整理。 \n 环境搭建 \n \n 安装typescript \n \n npm install -g typescript\n \n 1 \n 可以通过  tsc -v  判断是否安装成功 \n \n tsc就是typescript compiler(编译器)。通过 tsc xxx.ts 就会将ts文件编译为js文件，至于是哪个版本的文件可以在tsconfig.json文件中进行配置。默认是ES3。 \n \n 生产配置文件(非必需) \n \n tsc --init\n \n 1 执行上面的命令👆会自动生成tsconfig.json文件。 \n \n 生成的tsconfig.json文件默认如下 \n \n { \n   "compilerOptions" :   { \n     /* Visit https://aka.ms/tsconfig.json to read more about this file */ \n\n     /* Basic Options */ \n     // "incremental": true,                   /* Enable incremental compilation */ \n     "target" :   "es5" ,                            /* Specify ECMAScript target version: \'ES3\' (default), \'ES5\', \'ES2015\', \'ES2016\', \'ES2017\', \'ES2018\', \'ES2019\', \'ES2020\', or \'ESNEXT\'. */ \n     "module" :   "commonjs" ,                       /* Specify module code generation: \'none\', \'commonjs\', \'amd\', \'system\', \'umd\', \'es2015\', \'es2020\', or \'ESNext\'. */ \n     // "lib": [],                             /* Specify library files to be included in the compilation. */ \n     // "allowJs": true,                       /* Allow javascript files to be compiled. */ \n     // "checkJs": true,                       /* Report errors in .js files. */ \n     // "jsx": "preserve",                     /* Specify JSX code generation: \'preserve\', \'react-native\', or \'react\'. */ \n     // "declaration": true,                   /* Generates corresponding \'.d.ts\' file. */ \n     // "declarationMap": true,                /* Generates a sourcemap for each corresponding \'.d.ts\' file. */ \n     // "sourceMap": true,                     /* Generates corresponding \'.map\' file. */ \n     // "outFile": "./",                       /* Concatenate and emit output to single file. */ \n     // "outDir": "./",                        /* Redirect output structure to the directory. */ \n     // "rootDir": "./",                       /* Specify the root directory of input files. Use to control the output directory structure with --outDir. */ \n     // "composite": true,                     /* Enable project compilation */ \n     // "tsBuildInfoFile": "./",               /* Specify file to store incremental compilation information */ \n     // "removeComments": true,                /* Do not emit comments to output. */ \n     // "noEmit": true,                        /* Do not emit outputs. */ \n     // "importHelpers": true,                 /* Import emit helpers from \'tslib\'. */ \n     // "downlevelIteration": true,            /* Provide full support for iterables in \'for-of\', spread, and destructuring when targeting \'ES5\' or \'ES3\'. */ \n     // "isolatedModules": true,               /* Transpile each file as a separate module (similar to \'ts.transpileModule\'). */ \n\n     /* Strict Type-Checking Options */ \n     "strict" :   true ,                             /* Enable all strict type-checking options. */ \n     // "noImplicitAny": true,                 /* Raise error on expressions and declarations with an implied \'any\' type. */ \n     // "strictNullChecks": true,              /* Enable strict null checks. */ \n     // "strictFunctionTypes": true,           /* Enable strict checking of function types. */ \n     // "strictBindCallApply": true,           /* Enable strict \'bind\', \'call\', and \'apply\' methods on functions. */ \n     // "strictPropertyInitialization": true,  /* Enable strict checking of property initialization in classes. */ \n     // "noImplicitThis": true,                /* Raise error on \'this\' expressions with an implied \'any\' type. */ \n     // "alwaysStrict": true,                  /* Parse in strict mode and emit "use strict" for each source file. */ \n\n     /* Additional Checks */ \n     // "noUnusedLocals": true,                /* Report errors on unused locals. */ \n     // "noUnusedParameters": true,            /* Report errors on unused parameters. */ \n     // "noImplicitReturns": true,             /* Report error when not all code paths in function return a value. */ \n     // "noFallthroughCasesInSwitch": true,    /* Report errors for fallthrough cases in switch statement. */ \n     // "noUncheckedIndexedAccess": true,      /* Include \'undefined\' in index signature results */ \n\n     /* Module Resolution Options */ \n     // "moduleResolution": "node",            /* Specify module resolution strategy: \'node\' (Node.js) or \'classic\' (TypeScript pre-1.6). */ \n     // "baseUrl": "./",                       /* Base directory to resolve non-absolute module names. */ \n     // "paths": {},                           /* A series of entries which re-map imports to lookup locations relative to the \'baseUrl\'. */ \n     // "rootDirs": [],                        /* List of root folders whose combined content represents the structure of the project at runtime. */ \n     // "typeRoots": [],                       /* List of folders to include type definitions from. */ \n     // "types": [],                           /* Type declaration files to be included in compilation. */ \n     // "allowSyntheticDefaultImports": true,  /* Allow default imports from modules with no default export. This does not affect code emit, just typechecking. */ \n     "esModuleInterop" :   true ,                    /* Enables emit interoperability between CommonJS and ES Modules via creation of namespace objects for all imports. Implies \'allowSyntheticDefaultImports\'. */ \n     // "preserveSymlinks": true,              /* Do not resolve the real path of symlinks. */ \n     // "allowUmdGlobalAccess": true,          /* Allow accessing UMD globals from modules. */ \n\n     /* Source Map Options */ \n     // "sourceRoot": "",                      /* Specify the location where debugger should locate TypeScript files instead of source locations. */ \n     // "mapRoot": "",                         /* Specify the location where debugger should locate map files instead of generated locations. */ \n     // "inlineSourceMap": true,               /* Emit a single file with source maps instead of having a separate file. */ \n     // "inlineSources": true,                 /* Emit the source alongside the sourcemaps within a single file; requires \'--inlineSourceMap\' or \'--sourceMap\' to be set. */ \n\n     /* Experimental Options */ \n     // "experimentalDecorators": true,        /* Enables experimental support for ES7 decorators. */ \n     // "emitDecoratorMetadata": true,         /* Enables experimental support for emitting type metadata for decorators. */ \n\n     /* Advanced Options */ \n     "skipLibCheck" :   true ,                       /* Skip type checking of declaration files. */ \n     "forceConsistentCasingInFileNames" :   true    /* Disallow inconsistently-cased references to the same file. */ \n   } \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 关于这个文件的具体介绍学习会单独写一篇文章。需要打开的配置如下(非固定，按照个人情况)： \n { \n     "compilerOptions" :   { \n         "target" :   "esnext" , \n         "module" :   "esnext" , \n         "declaration" :   true , \n         "outDir" :   "./build" , \n         "strict" :   true , \n         "esModuleInterop" :   true , \n         "skipLibCheck" :   true , \n         "forceConsistentCasingInFileNames" :   true \n     } \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 关于这个 "declaration": true 选项提一嘴，是为了生产对应的描述文件，以 .d.ts 为后缀名。 \n \n 关于编辑器 \n \n 个人使用的是vscode。为了每次编写完成ts文件，不再重复的执行 tsc xxx.ts ,在vscode下可开启监视任务，这个也是tsc提供的命令 tsc -w 。vscode对于typescript的支持也非常完备。开启步骤如下： \n Terminal -> Run Task  就会出现下图： \n \n 选择  typescript  出现下图： \n \n 然后选择 tsc: watch ，即可开启监视任务。 \n 什么时Typescript \n Google一下，我就不粘贴啦。但是还是放一张图吧，很直观： \n \n 正式进入主题。 \n 数据类型 \n JavaScript的类型分为两种：原始数据类型和对象类型。原始数据类型包括：数值、字符串、布尔值、 undefined 、 null 以及ES6新增的 Symbol 和 BigInt 。 \n TypeScript支持与JavaScript几乎相同的数据类型，此外还提供了枚举类型。 \n 布尔值 \n 布尔值时最基础的数据类型,在TypeScript中，使用 boolean 定义布尔值类型： \n let  isDone :   boolean   =   false \n \n 1 注意，使用构造函数 Boolean 创造的对象 不是 布尔值： \n let  createdByNewBoolean :   boolean   =   new   Boolean ( 1 ) ; \n\n // Type \'Boolean\' is not assignable to type \'boolean\'. \n //   \'boolean\' is a primitive, but \'Boolean\' is a wrapper object. Prefer using \'boolean\' when possible. \n \n 1 2 3 4 事实上 new Boolean() 返回的是一个 Boolean 对象： \n let  createdByNewBoolean :  Boolean  =   new   Boolean ( 1 ) ; \n \n 1 直接调用 Boolean 也可以返回一个 boolean 类型： \n let  createdByBoolean :   boolean   =   Boolean ( 1 ) ; \n \n 1 在 TypeScript 中， boolean  是 JavaScript 中的基本类型，而  Boolean  是 JavaScript 中的构造函数。其他基本类型（除了 null 和 undefined）一样，不再赘述。 \n 数值 \n 和JavaScript一样，TypeScript里的所有数字都是浮点数或者BigInt。 这些浮点数的类型是 number。 除了支持十进制和十六进制字面量，TypeScript还支持ECMAScript 2015中引入的二进制和八进制字面量。 \n let  decLiteral :   number   =   6 ; \n let  hexLiteral :   number   =   0xf00d ; \n let  binaryLiteral :   number   =   0b1010 ; \n let  octalLiteral :   number   =   0o744 ; \n let  big :  bigint  =   100n ; \n let  bigByBigInt :  bigint  =   BigInt ( 10 ) ; \n let  notANumber :   number   =   NaN ; \n let  infinityNumber :   number   =   Infinity ; \n \n 1 2 3 4 5 6 7 8 #  字符串 \n 使用 string 定义字符串类型 \n let  myName :   string   =   "Bob" ; \n let  myAge :   number   =   20 ; \n\n //模板字符串 \n let  sentence :   string   =   ` Hello, my name is  ${ myName } ,\nI\'ll be  ${ myAge  +   1 }  years old next month ` ; \n \n 1 2 3 4 5 6 #  空值 \n JavaScript 没有空值（Void）的概念，在 TypeScript 中，可以用 void 表示没有任何返回值的函数： \n function   logName ( ) :   void   { \n   console . log ( \'my name is bob\' ) ; \n } \n \n 1 2 3 声明一个  void  类型的变量没有什么用，因为你只能将它赋值为  undefined  和  null ： \n \n Declaring variables of type void is not useful, because you can only assign null (only if  --strictNullChecks  is not specified) or undefined to them: \n \n let  unusable :   void   =   undefined ; \n let  unusable_null :   void   =   null ; \n \n 1 2 #  Null 和 Undefined \n 在 TypeScript 中，可以使用 null 和 undefined 来定义这两个原始数据类型： \n let  u :   undefined   =   undefined ; \n let  n :   null   =   null ; \n \n 1 2 默认情况下， null  和  undefined  是所有其他类型的子类型，也就是说  undefined  类型的变量，可以赋值给 number 类型的变量： \n \n 原文是这样的：By default  null  and  undefined  are subtypes of all other types. That means you can assign  null  and  undefined  to something like  number . \n \n // 这样是没问题的 \n let  num :   number   =   undefined ; \n \n 1 2 \n 注意：如果在tsconfig.json中如果设置了 "strict": true (默认为ture)，这个地方会报错的。 \n any \n 任意值(any)用来表示允许赋值为任意类型。 \n \n 什么是任意值类型 \n \n 如果是一个普通类型，在赋值过程中改变类型是不被允许的： \n let   let  myFavoriteNumber :   string   =   \'seven\' ; \nmyFavoriteNumber  =   7 ; \n\n // index.ts(2,1): error TS2322: Type \'number\' is not assignable to type \'string\'. \n \n 1 2 3 4 但如果是 any 类型，则允许被赋值为任意类型。 \n let  myFavoriteNumber :   any   =   \'seven\' ; \nmyFavoriteNumber  =   7 ; \n \n 1 2 \n 任意值的属性和方法 \n \n 在任意值上访问任何属性都是允许的： \n let  anything :   any   =   \'hello\' \n console . log ( anyThing . myName ) ; \n console . log ( anyThing . myName . firstName ) ; \n \n 1 2 3 也允许调用任何方法： \n let  anyThing :   any   =   \'Tom\' ; \nanyThing . setName ( \'Jerry\' ) ; \nanyThing . setName ( \'Jerry\' ) . sayHello ( ) ; \nanyThing . myName . setFirstName ( \'Cat\' ) ; \n \n 1 2 3 4 可以认为， 声明一个变量为任意值之后，对它的任何操作，返回的内容的类型都是任意值 。 \n \n 未声明类型的变量 \n \n 变量如果在声明的时候，未指定其类型，那么它会被识别为任意值类型： \n let  something ; \nsomething  =   \'seven\' ; \nsomething  =   7 ; \n\nsomething . setName ( \'Tom\' ) ; \n \n 1 2 3 4 5 等价于 \n let  something :   any ; \nsomething  =   \'seven\' ; \nsomething  =   7 ; \n\nsomething . setName ( \'Tom\' ) ; \n \n 1 2 3 4 5 #  Never \n never 类型表示的是那些永远都不存在的类型。例如，  never 类型是那些总是会抛出异常或根本就不会有返回值的函数表达式或箭头函数表达式的返回值类型； 变量也可能是  never  类型，当它们被永不为真的类型保护所约束时。 \n never 类型是任何类型的子类型，也可以赋值给任何类型；然而，没有类型是 never 的子类型或可以赋值给 never 类型（除了 never 本身之外）。 即使  any  也不可以赋值给  never 。 \n function   error ( message :   string ) :   never   { \n   throw   new   Error ( message ) ; \n } \n\n function   infiniteLoop ( ) :   never   { \n   while   ( true )   { } \n } \n \n 1 2 3 4 5 6 7 #  Unknown \n 我们可能需要描述编写应用程序时不知道的变量类型。 这些值可能来自动态内容，例如 来自用户，或者我们可能要有意接受我们API中的所有值。 在这些情况下，我们希望提供一种类型，该类型告诉编译器和将来的读者此变量可以是任何变量，因此我们将其赋予 unknown 类型。 \n let  notSure :   unknown   =   4 ; \nnotSure  =   "maybe a string instead" ; \n\n // OK, definitely a boolean \nnotSure  =   false ; \n \n 1 2 3 4 5 \n 关于unknown类型和any类型的区别可以看这篇文章： 写TypeScript时，什么时候用any？什么时候用unkown？ \n \n 下文摘自一个回答： \n \n any的意思是，程序员认为aaa可以是 任何 类型(动态的)，所以aaa.xxx中不管xxx是什么，都能通过语法检查，毕竟它是动态的，有的时候有.xxx有的时候没有.xxx都是可能的。 \n unknown的意思是，程序员目前 不知道 uuu的类型(未知的)，所以一般需要在用之前断言一下，才能通过语法检查。断言错了咋办？如上面的例子就断言错误，那就是断言者自己的问题了。 \n \n any 和 unknown 的最大区别是, unknown 是 top type (任何类型都是它的 subtype) , 而 any 即是 top type, 又是 bottom type (它是任何类型的 subtype ) ,这导致 any 基本上就是放弃了任何类型检查. \n Array \n TypeScript像JavaScript一样可以操作数组元素。 有两种方式可以定义数组。 第一种，可以在元素类型后面接上 []，表示由此类型元素组成的一个数组; 第二种方式是使用数组泛型，Array<元素类型>： \n let  list :   number [ ]   =   [ 1 ,   2 ,   3 ] ; \n let  list_2 :   Array < number >   =   [ 1 ,   2 ,   3 ] ; \n \n 1 2 #  Tuple \n 元组类型允许表示一个 已知元素数量和类型 的数组，各元素的类型不必相同。 比如，你可以定义一对值分别为 string和number类型的元组。 \n let  tom :   [ string ,   number ]   =   [ \'Tom\' ,   25 ] ; \n \n 1 当赋值或访问一个已知索引的元素时，会得到正确的类型： \n let  tom :   [ string ,   number ] ; \ntom [ 0 ]   =   \'Tom\' ; \ntom [ 1 ]   =   25 ; \n\ntom [ 0 ] . slice ( 1 ) ; \ntom [ 1 ] . toFixed ( 2 ) ; \n \n 1 2 3 4 5 6 也可以只赋值其中一项： \n let  tom :   [ string ,   number ] ; \ntom [ 0 ]   =   \'Tom\' ; \n \n 1 2 但是当直接对元组类型的变量进行初始化或者赋值的时候，需要提供所有元组类型中指定的项。 \n let  tom :   [ string ,   number ] ; \ntom  =   [ \'Tom\' ,   25 ] ; \n \n 1 2 let  tom :   [ string ,   number ] ; \ntom  =   [ \'Tom\' ] ; \n\n // Property \'1\' is missing in type \'[string]\' but required in type \'[string, number]\'. \n \n 1 2 3 4 当添加越界的元素时，它的类型会被限制为元组中每个类型的联合类型： \n \n 联合类型后面会解释。 \n \n let  tom :   [ string ,   number ] ; \ntom  =   [ \'Tom\' ,   25 ] ; \ntom . push ( \'male\' ) ; \ntom . push ( true ) ; \n\n // Argument of type \'true\' is not assignable to parameter of type \'string | number\'. \n \n 1 2 3 4 5 6 #  Enum \n 枚举（Enum）类型用于取值被限定在一定范围内的场景，比如一周只能有七天，颜色限定为红绿蓝等。 \n 使用enum关键字来定义： \n enum  Days  { Sun ,  Mon ,  Tue ,  Wed ,  Thu ,  Fri ,  Sat } ; \n \n 1 枚举成员会被赋值为从  0  开始递增的数字，同时也会对枚举值到枚举名进行反向映射： \n Objct \n 类型断言 \n \n 未完 \n 参考文章/资源 \n \n TypeScript Documentation \n TypeScript中文文档 \n TypeScript 入门教程 \n tsconfig.json 配置详解 \n tsconfig.json官方文档 \n \n ',summary:"\n前言\n\n前几天学习了一下Vue3的组合式API，发现Vue3对TypeScript的支持真的好，就是丝滑~。之前对于TS或多或少有了一些了解，今天做个整理。\n\n环境搭建\n\n安装typescript\n\nnpm install -g typescript\n\n>可以通过 tsc -v 判断是否安装成功\n\ntsc就是typescript compiler(编译器)。通过tsc xxx.ts就会将ts文件编译为js文件，至于是哪个版本的文件可以在tsconfig.json文件中进行配置。默认是ES3。\n\n生产配置文件(非必需)\n\ntsc --init\n\n执行上面的命令:pointup2:会自动生成ts ...",id:"post",pid:"post",readingTime:{text:"8 min read",minutes:7.285,time:437100,words:1457}},{title:"线程安全",frontmatter:{title:"线程安全",description:"线程安全",date:"2021-01-26",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210126213808.jpeg",tags:["计算机知识","线程"],meta:[{name:"title",content:"线程安全"},{name:"description",content:"线程安全"},{name:"keywords",content:"线程安全"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2021-01-26-thread-safety.html",relativePath:"_posts/2021-01-26-thread-safety.md",key:"v-e1b886c4",path:"/2021/01/26/thread-safety/",headers:[{level:2,title:"前言",slug:"前言"},{level:2,title:"不是线程的安全",slug:"不是线程的安全"},{level:2,title:"私有的东西就不该让别人知道",slug:"私有的东西就不该让别人知道"},{level:2,title:"大家不要抢，人人有份",slug:"大家不要抢-人人有份"},{level:2,title:"只能看，不能摸",slug:"只能看-不能摸"},{level:2,title:"没有规则， 那就先入为主",slug:"没有规则-那就先入为主"},{level:2,title:"相信世界充满爱，即使被伤害",slug:"相信世界充满爱-即使被伤害"},{level:2,title:"参考文章",slug:"参考文章"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:' 线程安全 \n 前言 \n 前一段时间学习了一下 arrayBuffer ,里面在谈及共享数组缓冲区(shared array buffers)时，提出了Atomics API，其是为了解决多个线程同时访问内存有风险这一问题。Atomics API 可以保证 SharedArrayBuffer 上的 JavaScript 操作是 线程安全 的。 \n 这里的线程安全引起了我的兴趣，于是在网上查找了资料，发现一篇比较不错的文章。于是，转载到自己的博客，方便以后回顾。在此对其作者表示感谢。 \n 下面为文章正文。 \n 不是线程的安全 \n 面试官问：“什么是线程安全”，如果你不能很好的回答，那就请往下看吧。 \n 论语中有句话叫“学而优则仕”，相信很多人都觉得是“学习好了可以做官”。然而，这样理解却是错的。切记望文生义。 \n 同理，“线程安全”也不是指线程的安全，而是 指内存的安全 。为什么如此说呢？这和操作系统有关。 \n 目前主流操作系统都是多任务的，即多个进程同时运行。为了保证安全，每个进程只能访问分配给自己的内存空间，而不能访问别的进程的，这是由操作系统保障的。 \n 在每个进程的内存空间中都会有一块特殊的公共区域，通常称为 堆（内存） 。进程内的所有线程都可以访问到该区域，这就是造成问题的潜在原因。 \n 假设某个线程把数据处理到一半，觉得很累，就去休息了一会，回来准备接着处理，却发现数据已经被修改了，不是自己离开时的样子了。可能被其它线程修改了。 \n 比如把你住的小区看作一个进程，小区里的道路/绿化等就属于公共区域。你拿1万块钱往地上一扔，就回家睡觉去了。睡醒后你打算去把它捡回来，发现钱已经不见了。可能被别人拿走了。 \n 因为公共区域人来人往，你放的东西在没有看管措施时，一定是不安全的。内存中的情况亦然如此。 \n 所以线程安全指的是，在堆内存中的数据由于可以被任何线程访问到，在没有限制的情况下存在被意外修改的风险。 \n 即堆内存空间在没有保护机制的情况下，对多线程来说是不安全的地方，因为你放进去的数据，可能被别的线程“破坏”。 \n 那我们该怎么办呢？ 解决问题的过程其实就是一个取舍的过程，不同的解决方案有不同的侧重点。 \n 私有的东西就不该让别人知道 \n 现实中很多人都会把1万块钱藏着掖着，不让无关的人知道，所以根本不可能扔到大马路上。因为这钱是你的私有物品。 \n 在程序中也是这样的，所以操作系统会为每个线程分配属于它自己的内存空间，通常称为 栈内存 ，其它线程无权访问。这也是由操作系统保障的。 \n 如果一些数据只有某个线程会使用，其它线程不能操作也不需要操作，这些数据就可以放入线程的栈内存中。较为常见的就是 局部变量 。 \n double   avgScore ( double [ ]  scores )   { \n     double  sum  =   0 ; \n     for   ( double  score  :  scores )   { \n        sum  +=  score ; \n     } \n     int  count  =  scores . length ; \n     double  avg  =  sum  /  count ; \n     return  avg ; \n } \n \n 1 2 3 4 5 6 7 8 9 这里的变量sum，count，avg都是局部变量，它们都会被分配在线程栈内存中。 \n 假如现在A线程来执行这个方法，这些变量会在A的栈内存分配。与此同时，B线程也来执行这个方法，这些变量也会在B的栈内存中分配。 \n 也就是说这些局部变量会在每个线程的栈内存中都分配一份。由于线程的栈内存只能自己访问，所以栈内存中的变量只属于自己，其它线程根本就不知道。 \n 就像每个人的家只属于自己，其他人不能进来。所以你把1万块钱放到家里，其他人是不会知道的。且一般还会放到某个房间里，而不是仍在客厅的桌子上。 \n 所以把自己的东西放到自己的私人地盘，是安全的，因为其他人无法知道。而且越隐私的地方越好。 \n 大家不要抢，人人有份 \n 相信聪明的你已经发现，上面的解决方案是基于“位置”的。因为你放东西的“位置”只有你自己知道（或能到达），所以东西是安全的，因此这份安全是由“位置”来保障的。 \n 在程序里就对应于方法的局部变量。局部变量之所以是安全的，就是因为定义它的“位置”是在方法里。这样一来安全是达到了，但是它的使用范围也就被限制在这个方法里了，其它方法想用也不用了啦。 \n 现实中往往会有一个变量需要多个方法都能够使用的情况，此时定义这个变量的“位置”就不能在方法里面了，而应该在方法外面。即从（方法的）局部变量变为（类的）成员变量，其实就是“位置”发生了变化。 \n 那么按照主流编程语言的规定，类的成员变量不能再分配在线程的栈内存中，而应该分配在公共的堆内存中。其实也就是变量在内存中的“位置”发生了变化，由一个私有区域来到了公共区域。因此潜在的安全风险也随之而来。 \n 那怎么保证在公共区域的东西安全呢？答案就是，大家不要抢，人人有份。设想你在街头免费发放矿泉水，来了1万人，你却只有1千瓶水，结果可想而知，一拥而上，场面失守。但如果你有10万瓶水，大家一看，水多着呢，不用着急，一个个排着队来，因为肯定会领到。 \n 东西多了，自然就不值钱了，从另一个角度来说，也就安全了。大街上的共享单车，现在都很安全，因为太多了，到处都是，都长得一样，所以连搞破坏的人都放弃了。因此要让一个东西安全，就疯狂的copy它吧。 \n 回到程序里，要让公共区域堆内存中的数据对于每个线程都是安全的，那就每个线程都拷贝它一份，每个线程只处理自己的这一份拷贝而不去影响别的线程的，这不就安全了嘛。相信你已经猜到了，我要表达的就是ThreadLocal类了。 \n \n 对于ThreadLocal类并不了解，主要了解思想吧0.0 \n \n class   StudentAssistant   { \n\n     ThreadLocal < String >  realName  =   new   ThreadLocal < > ( ) ; \n     ThreadLocal < Double >  totalScore  =   new   ThreadLocal < > ( ) ; \n\n     String   determineDegree ( )   { \n         double  score  =  totalScore . get ( ) ; \n         if   ( score  >=   90 )   { \n             return   "A" ; \n         } \n         if   ( score  >=   80 )   { \n             return   "B" ; \n         } \n         if   ( score  >=   70 )   { \n             return   "C" ; \n         } \n         if   ( score  >=   60 )   { \n             return   "D" ; \n         } \n         return   "E" ; \n     } \n\n     double   determineOptionalcourseScore ( )   { \n         double  score  =  totalScore . get ( ) ; \n         if   ( score  >=   90 )   { \n             return   10 ; \n         } \n         if   ( score  >=   80 )   { \n             return   20 ; \n         } \n         if   ( score  >=   70 )   { \n             return   30 ; \n         } \n         if   ( score  >=   60 )   { \n             return   40 ; \n         } \n         return   60 ; \n     } \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 这个学生助手类有两个成员变量，realName和totalScore，都是ThreadLocal类型的。每个线程在运行时都会拷贝一份存储到自己的本地。 \n A线程运行的是“张三”和“90”，那么这两个数据“张三”和“90”是存储到A线程对象（Thread类的实例对象）的成员变量里去了。假设此时B线程也在运行，是“李四”和“85”，那么“李四”和“85”这两个数据是存储到了B线程对象（Thread类的实例对象）的成员变量里去了。 \n 线程类（Thread）有一个成员变量，类似于Map类型的，专门用于存储ThreadLocal类型的数据。从逻辑从属关系来讲，这些ThreadLocal数据是属于Thread类的成员变量级别的。从所在“位置”的角度来讲，这些ThreadLocal数据是分配在公共区域的堆内存中的。 \n 说的直白一些，就是把堆内存中的一个数据复制N份，每个线程认领1份，同时规定好，每个线程只能玩自己的那份，不准影响别人的。 \n 需要说明的是这N份数据都还是存储在公共区域堆内存里的，经常听到的“线程本地”，是从逻辑从属关系上来讲的，这些数据和线程一一对应，仿佛成了线程自己“领地”的东西了。其实从数据所在“位置”的角度来讲，它们都位于公共的堆内存中，只不过被线程认领了而已。这一点我要特地强调一下。 \n 其实就像大街上的共享单车。原来只有1辆，大家抢着骑，老出问题。现在从这1辆复制出N辆，每人1辆，各骑各的，问题得解。共享单车就是数据，你就是线程。骑行期间，这辆单车从逻辑上来讲是属于你的，从所在位置上来讲还是在大街上这个公共区域的，因为你发现每个小区大门口都贴着“共享单车，禁止入门”。哈哈哈哈。 \n \n 作者真的好幽默 \n \n 共享单车是不是和ThreadLocal很像呀。再重申一遍， ThreadLocal就是，把一个数据复制N份，每个线程认领一份，各玩各的，互不影响 。 \n 只能看，不能摸 \n 放在公共区域的东西，只是存在潜在的安全风险，并不是说一定就不安全。有些东西虽然也在公共区域放着，但也是十分安全的。比如你在大街上放一个上百吨的石头雕像，就非常安全，因为大家都弄不动它。 \n 再比如你去旅游时，经常发现一些珍贵的东西，会被用铁栅栏围起来，上面挂一个牌子，写着“只能看，不能摸”。当然可以国际化一点，“only look，don\'t touch”。这也是很安全的，因为光看几眼是不可能看坏的。 \n 回到程序里，这种情况就属于，只能读取，不能修改。其实就是常量或只读变量，它们对于多线程是安全的，想改也改不了。 \n class   StudentAssistant   { \n     final   double  passScore  =   60 ; \n } \n \n 1 2 3 比如把及格分数设定为60分，在前面加上一个final，这样所有线程都动不了它了。这就很安全了。 \n 小节一下：以上三种解决方案，其实都是在“耍花招”。 \n \n 第一种，找个只有自己知道的地方藏起来，当然安全了。 \n 第二种，每人复制1份，各玩各的，互不影响，当然也安全了。 \n 第三种，更狠了，直接规定，只能读取，禁止修改，当然也安全了。 \n \n 是不是都在“避重就轻”呀。如果这三种方法都解决不了，该怎么办呢？Don\'t worry，just continue reading。 \n 没有规则， 那就先入为主 \n 前面给出的三种方案，有点“理想化”了。现实中的情况其实是非常混乱嘈杂的，没有规则的。 \n 比如在中午高峰期你去饭店吃饭，进门后发现只剩一个空桌子了，你心想先去点餐吧，回来就坐这里吧。当你点完餐回来后，发现已经被别人捷足先登了。 \n 因为桌子是属于公共区域的物品，任何人都可以坐，那就只能谁先抢到谁坐。虽然你在人群中曾多看了它一眼，但它并不会记住你容颜。 \n 解决方法就不用我说了吧，让一个人在那儿看着座位，其它人去点餐。这样当别人再来的时候，你就可以理直气壮的说，“不好意思，这个座位，我，已经占了”。 \n 我再次相信聪明的你已经猜到了我要说的东西了，没错，就是**（互斥）锁**。 \n 回到程序里，如果公共区域（堆内存）的数据，要被多个线程操作时，为了确保数据的安全（或一致）性，需要在数据旁边放一把锁，要想操作数据，先获取锁再说吧。 \n 假设一个线程来到数据跟前一看，发现锁是空闲的，没有人持有。于是它就拿到了这把锁，然后开始操作数据，干了一会活，累了，就去休息了。 \n 这时，又来了一个线程，发现锁被别人持有着，按照规定，它不能操作数据，因为它无法得到这把锁。当然，它可以选择等待，或放弃，转而去干别的。 \n 第一个线程之所以敢大胆的去睡觉，就是因为它手里拿着锁呢，其它线程是不可能操作数据的。当它回来后继续把数据操作完，就可以把锁给释放了。锁再次回到空闲状态，其它线程就可以来抢这把锁了。还是谁先抢到锁谁操作数据。 \n class   ClassAssistant   { \n\n     double  totalScore  =   60 ; \n     final   Lock  lock  =   new   Lock ( ) ; \n\n     void   addScore ( double  score )   { \n        lock . obtain ( ) ; \n        totalScore  +=  score ; \n        lock . release ( ) ; \n     } \n\n     void   subScore ( double  score )   { \n        lock . obtain ( ) ; \n        totalScore  -=  score ; \n        lock . release ( ) ; \n     } \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 假定一个班级的初始分数是60分，这个班级抽出10名学生来同时参加10个不同的答题节目，每个学生答对一次为班级加上5分，答错一次减去5分。因为10个学生一起进行，所以这一定是一个并发情形。 \n 因此加分和减分这两个方法被并发的调用，它们共同操作总分数。为了保证数据的一致性，需要在每次操作前先获取锁，操作完成后再释放锁。 \n 相信世界充满爱，即使被伤害 \n 再回到一开始的例子，假如你往地上仍1万块钱，是不是一定会丢呢？这要看情况了，如果是在人来人往的都市，可以说肯定会丢的。如果你跑到无人区扔地上，可以说肯定不会丢。 \n 可以看到，都是把东西无保护的放到公共区域里，结果却相差很大。这说明安全问题还和公共区域的环境状况有关系。 \n 比如我把数据放到公共区域的堆内存中，但是始终都只会有1个线程，也就是单线程模型，那这数据肯定是安全的。 \n 再者说，2个线程操作同一个数据和200个线程操作同一个数据，这个数据的安全概率是完全不一样的。肯定线程越多数据不安全的概率越大，线程越少数据不安全的概率越小。取个极限情况，那就是只有1个线程，那不安全概率就是0，也就是安全的。 \n 可能你又猜到了我想表达的内容了，没错，就是CAS。可能大家觉得既然锁可以解决问题，那就用锁得了，为啥又冒出了个CAS呢？ \n 那是因为锁的获取和释放是要花费一定代价的，如果在线程数目特别少的时候，可能根本就不会有别的线程来操作数据，此时你还要获取锁和释放锁，可以说是一种浪费。 \n 针对这种“地广人稀”的情况，专门提出了一种方法，叫CAS（Compare And Swap）。就是在并发很小的情况下，数据被意外修改的概率很低，但是又存在这种可能性，此时就用CAS。 \n 假如一个线程操作数据，干了一半活，累了，想要去休息。（貌似今天的线程体质都不太好）。于是它记录下当前数据的状态（就是数据的值），回家睡觉了。 \n 醒来后打算继续接着干活，但是又担心数据可能被修改了，于是就把睡觉前保存的数据状态拿出来和现在的数据状态比较一下，如果一样，说明自己在睡觉期间，数据没有被人动过（当然也有可能是先被改成了其它，然后又改回来了，这就是ABA问题了），那就接着继续干。如果不一样，说明数据已经被修改了，那之前做的那些操作其实都白瞎了，就干脆放弃，从头再重新开始处理一遍。 \n 所以CAS这种方式适用于并发量不高的情况，也就是数据被意外修改的可能性较小的情况。如果并发量很高的话，你的数据一定会被修改，每次都要放弃，然后从头再来，这样反而花费的代价更大了，还不如直接加锁呢。 \n 这里再解释下ABA问题，假如你睡觉前数据是5，醒来后数据还是5，并不能肯定数据没有被修改过。可能数据先被修改成8然后又改回到5，只是你不知道罢了。对于这个问题，其实也很好解决，再加一个版本号字段就行了，并规定只要修改数据，必须使版本号加1。 \n 这样你睡觉前数据是5版本号是0，醒来后数据是5版本号是0，表明数据没有被修改。如果数据是5版本号是2，表明数据被改动了2次，先改为其它，然后又改回到5。 \n 我再次相信聪明的你已经发现了， 这里的CAS其实就是乐观锁，上一种方案里的获取锁和释放锁其实就是悲观锁。乐观锁持乐观态度，就是假设我的数据不会被意外修改，如果修改了，就放弃，从头再来。悲观锁持悲观态度，就是假设我的数据一定会被意外修改，那干脆直接加锁得了。 \n 参考文章 \n \n 如果你这样回答“什么是线程安全”，面试官都会对你刮目相看 \n \n ',summary:"\n前言\n\n前一段时间学习了一下arrayBuffer,里面在谈及共享数组缓冲区(shared array buffers)时，提出了Atomics API，其是为了解决多个线程同时访问内存有风险这一问题。Atomics API 可以保证 SharedArrayBuffer 上的 JavaScript 操作是线程安全的。\n\n这里的线程安全引起了我的兴趣，于是在网上查找了资料，发现一篇比较不错的文章。于是，转载到自己的博客，方便以后回顾。在此对其作者表示感谢。\n\n下面为文章正文。\n\n不是线程的安全\n\n面试官问：“什么是线程安全”，如果你不能很好的回答，那就请往下看吧。\n\n论语中有句话叫“学而优则仕 ...",id:"post",pid:"post",readingTime:{text:"2 min read",minutes:1.465,time:87900,words:293}},{title:"Sass入门学习",frontmatter:{title:"Sass入门学习",description:"Sass入门学习",date:"2021-03-05",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210305230928.jpg",tags:["Sass"],meta:[{name:"title",content:"Sass入门学习"},{name:"description",content:"Sass入门学习"},{name:"keywords",content:"Sass"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2021-03-05-sass.html",relativePath:"_posts/2021-03-05-sass.md",key:"v-74cf55b0",path:"/2021/03/05/sass/",headers:[{level:2,title:"前言",slug:"前言"},{level:2,title:"使用变量",slug:"使用变量"},{level:3,title:"变量的声明和引用",slug:"变量的声明和引用"},{level:3,title:"变量名是用中划线还是下划线分割",slug:"变量名是用中划线还是下划线分割"},{level:2,title:"嵌套CSS规则",slug:"嵌套css规则"},{level:3,title:"父选择器的标识符&",slug:"父选择器的标识符"},{level:3,title:"群组选择器的嵌套",slug:"群组选择器的嵌套"},{level:3,title:"子组合选择器和同层组合选择器：>、+和~",slug:"子组合选择器和同层组合选择器-、-和"},{level:3,title:"嵌套属性",slug:"嵌套属性"},{level:2,title:"导入SCSS文件",slug:"导入scss文件"},{level:3,title:"使用SCSS部分文件",slug:"使用scss部分文件"},{level:3,title:"默认变量值&嵌套导入",slug:"默认变量值-嵌套导入"},{level:2,title:"静默注释",slug:"静默注释"},{level:2,title:"混合器",slug:"混合器"},{level:3,title:"给混合器传参",slug:"给混合器传参"},{level:2,title:"选择器继承",slug:"选择器继承"},{level:3,title:"继承的工作细节",slug:"继承的工作细节"},{level:2,title:"最后",slug:"最后"},{level:2,title:"参考文章",slug:"参考文章"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:' sass学习记录 \n 前言 \n 之前一直使用的 less ，也整理过一篇关于 less内置函数的文章 ，现在工作原因，需要了解一下 sass 。此篇文章记录一下学习过程，此篇为基础入门篇，后续会根据文档深入学习。 \n 使用变量 \n sass使用 $ 符号来标识变量。 \n 变量的声明和引用 \n $highlight-clor :  #F90 ; //声明变量 \n .selected  { \n     border :  1px solid  $highlight-clor ; //引用变量 \n } \n\n //编译后 \n\n .selected  { \n     border :  1px solid #F90 ; \n } \n \n 1 2 3 4 5 6 7 8 9 10 在声明变量时，变量值也可以引用其他变量。当你通过粒度区分，为不同的值取不同名字时，这相当有用。下例在独立的颜色值粒度上定义了一个变量，且在另一个更复杂的边框值粒度上也定义了一个变量： \n $highlight-color :  #F90 ; \n $highlight-border :  1px solid  $highlight-color ; \n .selected  { \n   border :   $highlight-border ; \n } \n\n //编译后 \n\n .selected  { \n   border :  1px solid #F90 ; \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 #  变量名是用中划线还是下划线分割 \n sass 对这两种分割方法是相互兼容的。也就是说，用中划线声明的变量可以使用下划线的方式引用，反之亦然。 \n $link-color :  blue ; \n a  { \n   color :   $link_color ; \n } \n\n //编译后 \n\n a  { \n   color :  blue ; \n } \n \n 1 2 3 4 5 6 7 8 9 10 在上例中， 和 link_color其实指向的是同一个变量。 \n 嵌套CSS规则 \n css中重复写选择器是非常恼人的。如果要写一大串指向页面中同一块的样式时，往往需要 一遍又一遍地写同一个ID： \n #content article h1   {   color :  #333  } \n #content article p   {   margin-bottom :  1.4em  } \n #content aside   {   background-color :  #EEE  } \n \n 1 2 3 在Sass中，你可以像俄罗斯套娃那样在规则块中嵌套规则块。sass在输出css时会帮你把这些嵌套规则处理好，避免你的重复书写。 \n #content  { \n   article  { \n     h1  {   color :  #333  } \n     p  {   margin-bottom :  1.4em  } \n   } \n   aside  {   background-color :  #EEE  } \n } \n \n 1 2 3 4 5 6 7 编译后： \n #content article h1   {   color :  #333  } \n #content article p   {   margin-bottom :  1.4em  } \n #content aside   {   background-color :  #EEE  } \n \n 1 2 3 大多数情况下这种简单的嵌套都没问题，但是有些场景下不行，比如你想要在嵌套的选择器里边应用一个类似于：hover的伪类。为了解决这种以及其他情况，sass提供了一个特殊标识符 & 。 \n 父选择器的标识符 & \n 有一种情况是当你为链接之类的元素写:hover这种伪类时，你并不希望以后代选择器的方式连接。比如说，下面这种情况sass就 无法 正常工作： \n article a  { \n   color :  blue ; \n   :hover  {   color :  red  } \n } \n \n 1 2 3 4 解决之道为使用一个特殊的sass选择器，即父选择器。在使用嵌套规则时，父选择器能对于嵌套规则如何解开提供更好的控制。它就是一个简单的&符号，且可以放在任何一个选择器可出现的地方: \n article a  { \n   color :  blue ; \n   & :hover  {   color :  red  } \n } \n \n 1 2 3 4 当包含父选择器标识符的嵌套规则被打开时，它不会像后代选择器那样进行拼接，而是&被父选择器直接替换： \n article a   {   color :  blue  } \n article a:hover   {   color :  red  } \n \n 1 2 父选择器标识符还有另外一种用法，你可以在父选择器之前添加选择器。举例来说，当用户在使用IE浏览器时，你会通过JavaScript在 <body> 标签上添加一个ie的类名，为这种情况编写特殊的样式如下： \n #content aside  { \n   color :  red ; \n   body.ie  &   {   color :  green  } \n } \n \n 1 2 3 4 编译后： \n #content aside   { color :  red } ;\nbody.ie #content aside   {   color :  green  } \n \n 1 2 #  群组选择器的嵌套 \n 如果你需要在一个特定的容器元素内对这样一个群组选择器进行修饰，css的写法会让你在群组选择器中的每一个选择器前都重复一遍容器元素的选择器： \n .container h1, .container h2, .container h3   {   margin-bottom :  .8em  } \n \n 1 sass的嵌套特性在这种场景下也非常有用。当sass解开一个群组选择器规则内嵌的规则时，它会把每一个内嵌选择器的规则都正确地解出来： \n .container  { \n   h1, h2, h3  { margin-bottom :  .8em } \n } \n \n 1 2 3 编译后即为上面的普通css样式。 \n 子组合选择器和同层组合选择器： > 、 + 和 ~ \n 组合选择器可以应用到sass的规则嵌套中。可以把它们放在外层选择器后边，或里层选择器前边： \n article  { \n   ~ article  {   border-top :  1px dashed #ccc  } \n   > section  {   background :  #eee  } \n   dl >  { \n     dt  {   color :  #333  } \n     dd  {   color :  #555  } \n   } \n   nav +  &   {   margin-top :  0  } \n } \n \n 1 2 3 4 5 6 7 8 9 编译后： \n article ~ article   {   border-top :  1px dashed #ccc  } \n article > footer   {   background :  #eee  } \n article dl > dt   {   color :  #333  } \n article dl > dd   {   color :  #555  } \n nav + article   {   margin-top :  0  } \n \n 1 2 3 4 5 #  嵌套属性 \n 在sass中，除了CSS选择器，属性也可以进行嵌套。尽管编写属性涉及的重复不像编写选择器那么糟糕，但是要反复写 border-style , border-width , border-color 以及 border-* 等也是非常烦人的。在sass中，你只需敲写一遍border： \n   nav  { \n   border:  { \n     style :  solid ; \n     width :  1px ; \n     color :  #ccc ; \n   } \n } \n 1 2 3 4 5 6 7 嵌套属性的规则是这样的：把属性名从中划线-的地方断开，在根属性后边添加一个冒号 : ，紧跟一个 { } 块，把子属性部分写在这个 { } 块中。 \n 编译后： \n nav   { \n   border-style :  solid ; \n   border-width :  1px ; \n   border-color :  #ccc ; \n } \n \n 1 2 3 4 5 对于属性的缩写形式，你甚至可以像下边这样来嵌套，指明例外规则： \n   nav  { \n   border: 1px solid #ccc  { \n   left :  0px ; \n   right :  0px ; \n   } \n } \n 1 2 3 4 5 6 编译后： \n nav   { \n   border :  1px solid #ccc ; \n   border-left :  0px ; \n   border-right :  0px ; \n } \n \n 1 2 3 4 5 #  导入SCSS文件 \n css有一个特别不常用的特性，即 @import 规则，它允许在一个css文件中导入其他css文件。然而， 后果是只有执行到 @import 时，浏览器才会去下载其他css文件，这导致页面加载起来特别慢 。 \n sass也有一个 @import 规则，但不同的是，sass的 @import 规则在生成css文件时就把相关文件导入进来。这意味着所有相关的样式被归纳到了同一个css文件中，而无需发起额外的下载请求。另外，所有在被导入文件中定义的变量和混合器均可在导入文件中使用。 \n 使用sass的@import规则并不需要指明被导入文件的全名。你可以省略.sass或.scss文件后缀。 \n 使用SCSS部分文件 \n 当通过 @import 把sass样式分散到多个文件时，你通常只想生成少数几个css文件。那些专门为 @import 命令而编写的sass文件，并不需要生成对应的独立css文件，这样的sass文件称为 局部文件 。对此，sass有一个特殊的约定来命名这些文件。 \n 此约定即，sass局部文件的文件名以下划线开头。这样，sass就不会在编译时单独编译这个文件输出css，而只把这个文件用作导入。当你 @import 一个局部文件时，还可以不写文件的全名，即省略文件名开头的下划线。举例来说，你想导入themes/_night-sky.scss这个局部文件里的变量，你只需在样式表中写 @import "themes/night-sky" ;。 \n 默认变量值&嵌套导入 \n 使用sass的 !default 标签可以实现变量默认值。 \n /* _blue-theme.scss */ \n $width :  400px  !default ; \n aside  { \n     color :  blue ; \n     width :   $width ; \n     span  { \n         background:  { \n             color :  #fff ; \n             repeat :  no-repeat ; \n         } ; \n     } \n } \n\n /* demo.scss */ \n $width :  250px ;   //有这个变量是width为250px，没有这个变量是width使用默认值400px \n h1  { \n     @import   "blue-theme" ; \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 编译后： \n h1 aside   { \n   color :  blue ; \n   width :  250px ; \n } \n\n h1 aside span   { \n   background-color :  #fff ; \n   background-repeat :  no-repeat ; \n } \n \n 1 2 3 4 5 6 7 8 9 #  静默注释 \n sass另外提供了一种不同于css标准注释格式 /* ... */ 的注释语法。 静默注释 的内容不会出现在生成的css文件中。静默注释的语法跟JavaScript、Java等类C的语言中单行注释的语法相同，它们以//开头，注释内容直到行末。 \n body  { \n   color :  #333 ;   // 这种注释内容不会出现在生成的css文件中 \n   padding :  0 ;   /* 这种注释内容会出现在生成的css文件中 */ \n } \n \n 1 2 3 4 #  混合器 \n 如果你的整个网站中有几处小小的样式类似（例如一致的颜色和字体），那么使用变量来统一处理这种情况是非常不错的选择。但是当你的样式变得越来越复杂，你需要大段大段的重用样式的代码，独立的变量就没办法应付这种情况了。你可以通过sass的混合器实现大段样式的重用。 \n 混合器使用 @mixin 标识符定义。混合器中不仅可以包含属性，也可以包含css规则，包含选择器和选择器中的属性。 \n @mixin   no-bullets  { \n   list-style :  none ; \n   li  { \n     list-style-image :  none ; \n     list-style-type :  none ; \n     margin-left :  0px ; \n   } \n } \n \n 1 2 3 4 5 6 7 8 然后就可以在你的样式表中通过@include来使用这个混合器，放在你希望的任何地方: \n ul.plain  { \n   color :  #444 ; \n   @include  no-bullets ; \n } \n \n 1 2 3 4 编译后： \n ul.plain   { \n   color :  #444 ; \n   list-style :  none ; \n } \n ul.plain li   { \n   list-style-image :  none ; \n   list-style-type :  none ; \n   margin-left :  0px ; \n } \n \n 1 2 3 4 5 6 7 8 9 #  给混合器传参 \n 混合器并不一定总得生成相同的样式。可以通过在@include混合器时给混合器传参，来定制混合器生成的精确样式。 \n @mixin   link-colors ( $normal ,   $hover ,   $visited )   { \n   color :   $normal ; \n   & :hover  {   color :   $hover ;   } \n   & :visited  {   color :   $visited ;   } \n } \n \n 1 2 3 4 5 当混合器被@include时，你可以把它当作一个css函数来传参。如果你像下边这样写 \n a   { \n   @include   link-colors ( blue ,  red ,  green ) ; \n } \n\n //Sass最终生成的是：\n\na   {   color :  blue ;   } \n a:hover   {   color :  red ;   } \n a:visited   {   color :  green ;   } \n \n 1 2 3 4 5 6 7 8 9 当你 @include 混合器时，有时候可能会很难区分每个参数是什么意思，参数之间是一个什么样的顺序。为了解决这个问题，sass允许通过语法 $name: value 的形式指定每个参数的值。这种形式的传参，参数顺序就不必再在乎了，只需要保证没有漏掉参数即可： \n a  { \n     @include   link-colors ( \n       $normal :  blue , \n       $visited :  green , \n       $hover :  red\n   ) ; \n } \n \n 1 2 3 4 5 6 7 #  选择器继承 \n 使用sass的时候，最后一个减少重复的主要特性就是 选择器继承 。选择器继承是说一个选择器可以继承为另一个选择器定义的所有样式。这个通过 @extend 语法实现，如下代码： \n //通过选择器继承继承样式 \n .error  { \n   border :  1px solid red ; \n   background-color :  #fdd ; \n } \n .seriousError  { \n   @extend  .error ; \n   border-width :  3px ; \n } \n \n 1 2 3 4 5 6 7 8 9 以 class="seriousError"  修饰的html元素最终的展示效果就好像是 class="seriousError error" 。 \n .seriousError不仅会继承.error自身的所有样式，任何跟.error有关的组合选择器样式也会被.seriousError以组合选择器的形式继承，如下代码: \n .error_1  { \n   border :  1px solid red ; \n   background-color :  #fdd ; \n } \n\n h1 .error_1  { \n   font-size :  1.2em ; \n } \n .seriousError_1  { \n   @extend  .error_1 ; \n   border-width :  3px ; \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 编译后： \n .error_1, .seriousError_1   { \n   border :  1px solid red ; \n   background-color :  #fdd ; \n } \n\n h1 .error_1, h1 .seriousError_1   { \n   font-size :  1.2em ; \n } \n\n .seriousError_1   { \n   border-width :  3px ; \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 #  继承的工作细节 \n 跟变量和混合器不同，继承不是仅仅用css样式替换@extend处的代码那么简单。为了不让你对生成的css感觉奇怪，对这背后的工作原理有一定了解是非常重要的。 \n @extend 背后最基本的想法是，如果 .seriousError @extend .error ， 那么样式表中的任何一处 .error 都用 .error.seriousError 这一选择器组进行替换。这就意味着相关样式会如预期那样应用到.error和.seriousError。 \n 最后 \n 简单入个门，了解语法和规则。一些进阶的功能会通过阅读 文档 来了解。 \n 参考文章 \n \n 如何安装Sass \n Visual Studio Code插件Live Sass Compiler可将Sass或Scss实时编译为CSS \n sass快速入门 \n \n ',summary:"\n前言\n\n之前一直使用的less，也整理过一篇关于less内置函数的文章，现在工作原因，需要了解一下sass。此篇文章记录一下学习过程，此篇为基础入门篇，后续会根据文档深入学习。\n\n使用变量\n\nsass使用$符号来标识变量。\n\n变量的声明和引用\n\n$highlight-clor: #F90;//声明变量\n.selected {\n    border: 1px solid $highlight-clor;//引用变量\n}\n\n//编译后\n\n.selected {\n    border: 1px solid #F90;\n}\n\n在声明变量时，变量值也可以引用其他变量。当你通过粒度区分，为不同的值取不同 ...",id:"post",pid:"post",readingTime:{text:"4 min read",minutes:3.49,time:209400,words:698}},{title:"百度小程序——基础原理篇",frontmatter:{title:"百度小程序——基础原理篇",description:"百度小程序——基础原理篇",date:"2021-03-24",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210325224201.jpg",tags:["百度小程序"],meta:[{name:"title",content:"百度小程序"},{name:"description",content:"百度小程序"},{name:"keywords",content:"百度小程序, 小程序"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2021-03-24-baidu-swan.html",relativePath:"_posts/2021-03-24-baidu-swan.md",key:"v-2251fb10",path:"/2021/03/24/baidu-swan/",headers:[{level:2,title:"背景",slug:"背景"},{level:2,title:"简介",slug:"简介"},{level:2,title:"基本原理",slug:"基本原理"},{level:3,title:"概览",slug:"概览"},{level:3,title:"全局app.json",slug:"全局app-json"},{level:3,title:"全局app.js",slug:"全局app-js"},{level:3,title:"小程序页面.js文件",slug:"小程序页面-js文件"},{level:3,title:"小程序页面.swan文件",slug:"小程序页面-swan文件"},{level:3,title:"小程序页面栈",slug:"小程序页面栈"},{level:3,title:"路由方式",slug:"路由方式"},{level:3,title:"Page",slug:"page"},{level:3,title:"自定义组件",slug:"自定义组件"},{level:3,title:"语法",slug:"语法"},{level:3,title:"框架接口",slug:"框架接口"},{level:3,title:"页面声明周期",slug:"页面声明周期"},{level:2,title:"参考文章",slug:"参考文章"}],lastUpdated:"10/25/2021, 4:20:02 PM",content:' 百度小程序——基础原理篇 \n 背景 \n 出于兴趣和业务需要的双重要求，开始学习一下百度智能小程序的开发。本文侧重原生百度小程序的学习，后续会涉及到小程序框架 okam 的学习。 \n 简介 \n 智能小程序，是百度提供的一种技术解决方案。开发者基于此开发出来的服务，在各类宿主环境（手机 App、车载系统、IOT 设备等）中，可做到用户无感知安装过程即点即用。 \n 小程序使用了双线程模型,包括逻辑层和渲染层。逻辑层作为一个单独的线程执行js代码，控制小程序数据的生成和处理；渲染层使用WebView线程，处理页面的渲染和用户的事件交互行为。 \n 基本原理 \n 概览 \n 小程序开发包括全局配置文件、页面配置文件。开发者可通过app.json和app.js文件对小程序进行全局配置；通过.css、.js、.json和.swan文件进行页面配置。具体结构如下： \n ├── app.js\n├── app.json\n├── app.css\n├── project.swan.json\n└──  pages\n    └── index\n        ├── index.swan\n        ├── index.css\n        ├── index.js\n        └── index.json\n    └── detail\n        ├── detail.swan\n        ├── detail.css\n        ├── detail.js\n        └── detail.json\n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 \n 我们可以看到以下几类的文件： \n \n .json 为后缀的JSON配置文件，配置了智能小程序所有页面的路径和界面展现样式等； \n .swan 结尾的SWAN模板文件，用来描述当前这个页面的文件结构，类似于网页中的HTMK文件； \n .css 结尾的CSS文件，描述页面样式； \n .js 结尾的JS文件，处理这个页面和用户的交互。 \n 全局app.json \n app.json 是小程序全局配置文件，设置SWAN的界面、路径、多Tab等。 \n app.json配置项列表 \n \n \n \n 属性 \n 类型 \n 必填 \n 描述 \n \n \n \n \n pages \n Array.<string> \n 是 \n 设置页面路径 \n \n \n window \n Object \n 否 \n 设置页面展现 \n \n \n preloadRule \n Object \n 否 \n 分包预下载规则 \n \n \n tabBar \n Object \n 否 \n 底部tab栏的表现 \n \n \n requiredBackgroundModes \n Array.<string> \n 否 \n 需要在后台使用的能力，如「音乐播放」 \n \n \n subPackages \n Array.<string> \n 否 \n 分包结构配置 \n \n \n networkTimeout \n Object \n 否 \n 网络超时 \n \n \n permission \n Object \n 否 \n 小程序接口权限相关设置 \n \n \n routes \n Array.<object> \n 否 \n 小程序自定义路由相关设置 \n \n \n dynamicLib \n Object \n 否 \n 引入动态库 \n \n \n \n 配置项各个字段的详细举例： \n \n pages \n \n pages 接受一个数组，每一项都是一个字符串，指定 SWAN App 都有哪些页面。每一项代表页面的 [路径 + 文件名] ，默认第一项为 SWAN App 首页。 \n SWAN 中新增或减少页面的话，需要在 pages 中进行配置。 \n 配置项中不需要加文件后缀名， SWAN 会自动解析。 \n /* app.json */ \n { \n     "pages" :   [ \n         "pages/home/index" , \n         "pages/my/index" \n     ] , \n } \n \n 1 2 3 4 5 6 7 \n 开发者工具在 app.json 的 pages 中填写页面路径可自动生成文件夹。 \n \n \n tabBar \n \n 用于设置客户端底部的 tab 栏：可通过 tabBar 设置 tab 的颜色、个数、位置、背景色等内容。 \n \n \n \n 属性 \n 类型 \n 必填 \n 描述 \n \n \n \n \n backgroundColor \n HexColor \n 是 \n tab 的背景色 \n \n \n borderStyle \n String \n 否 \n tabBar \n \n \n color \n HexColor \n 是 \n tab上文字的默认颜色 \n \n \n list \n Array \n 是 \n tab 的列表，列表个数 2~5 个。 list 接受一个数组，tab 按数组的顺序排序，每个项都是一个对象，其属性值如下： - pagePath：已在 pages 中定义的页面路径；类型：String；必填项。 - text：tab 上显示的文字信息；类型：String；必填项。 - iconPath：图片路径，icon 大小限制为 40kb，建议尺寸为 78px*78px，不支持网络图片；类型：String；非必填项。 - selectedIconPath：选中时的图片路径，icon 规格同上；类型：String；非必填项 \n \n \n selectedColor \n HexColor \n 是 \n tab 上的文字选中时的颜色 \n \n \n \n /* app.json */ \n { \n     "tabBar" :   { \n         "backgroundColor" :   "#fff" , \n         "borderStyle" :   "black" , \n         "color" :   "#000" , \n         "selectedColor" :   "#ff7800" , \n         "list" :   [ \n             { \n             "pagePath" :   "pages/home/index" , \n             "text" :   "首页" , \n             "iconPath" :   "" , \n             "selectedIconPath" :   "" \n         } ,   { \n             "pagePath" :   "pages/my/index" , \n             "text" :   "我的" , \n             "iconPath" :   "" , \n             "selectedIconPath" :   "" \n         } ] \n     } \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 还支持 自定义tabbar \n \n window \n \n \n \n \n 属性 \n 类型 \n 默认值 \n 描述 \n \n \n \n \n navigationBarBackgroundColor \n HexColor \n #000000 \n 导航栏背景颜色，如#000000 \n \n \n navigationBarTextStyle \n String \n white \n 导航栏标题颜色，目前有效值 black/white \n \n \n navigationBarTitleText \n String \n \n 导航栏标题文字内容 \n \n \n navigationStyle \n String \n default \n 导航栏样式，有效值：default(默认样式) custom(自定义导航栏)，只保留右上角胶囊按钮 \n \n \n backgroundColor \n HexColor \n #ffffff \n 背景颜色 \n \n \n enablePullDownRefresh \n Boolean \n false \n 是否开启下拉刷新 \n \n \n onReachBottomDistance \n Number \n 50 \n 页面上拉触底事件触发时距页面底部距离（单位：px） \n \n \n textSizeAdjust \n String \n auto \n 小程序页面是否禁止响应字体大小的设置，有效值：auto(默认响应)、none(不响应) \n \n \n backgroundTextStyle \n String \n dark \n 下拉背景字体、loading 图的样式，有效值 dark/light \n \n \n backgroundColorTop \n HexColor \n #ffffff \n 顶部窗口的背景色，仅 iOS 支持 \n \n \n backgroundColorBottom \n HexColor \n #ffffff \n 底部窗口的背景色，仅 iOS 支持 \n \n \n \n \n 这些在每个页面的 .json 文件中也可以配置。会覆盖全局的配置(app.json)。 \n \n /* app.json */ \n { \n     "window" :   { \n         "navigationBarBackgroundColor" :   "#00ff00" , \n         "navigationBarTextStyle" :   "black" , \n         "navigationBarTitleText" :   "智能小程序" , \n         "backgroundTextStyle" :   "light" , \n         "backgroundColor" :   "#fff" \n     } , \n } \n\n /* pages/home/index.json */ \n\n { \n     /* 默认不做配置 */ \n } \n\n /* pages/my/index.json */ \n { \n     "navigationBarTitleText" :   "智能小程序示例-我的" , \n     "navigationBarBackgroundColor" :   "#0000ff" , \n     "navigationBarTextStyle" :   "white" , \n     "backgroundColor" :   "#ffff00" \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 页面表现如下： \n 首页（未做配置） \n \n 我的（pages/my/index.json） \n \n \n requiredBackgroundModes \n \n \n 未测试 \n \n 申明需要后台运行的能力，类型为数组。 \n \n 未测试 \n \n 代码示例：audio后台音乐播放 \n { \n     "requiredBackgroundModes" :   [ "audio" ] \n } \n \n 1 2 3 \n networkTimeout \n \n \n 未测试 \n \n 各类网络请求的超时时间 \n \n \n \n 属性 \n 类型 \n 必填 \n 默认值 \n 说明 \n \n \n \n \n request \n Number \n 否 \n 10000 \n swan.request 的超时时间（单位：毫秒）。 \n \n \n connectSocket \n Number \n 否 \n 60000 \n swan.connectSocket 的超时时间（单位：毫秒）。 \n \n \n uploadFile \n Number \n 否 \n 60000 \n swan.uploadFile 的超时时间（单位：毫秒）。 \n \n \n downloadFile \n Number \n 否 \n 60000 \n swan.downloadFile 的超时时间（单位：毫秒）。 \n \n \n \n /* app.json */ \n { \n     "networkTimeout" :   { \n         "request" :   30000 , \n         "connectSocket" :   10000 , \n         "uploadFile" :   10000 , \n         "downloadFile" :   10000 \n     } \n } \n \n 1 2 3 4 5 6 7 8 9 \n permission \n \n \n 未测试 \n \n 小程序接口权限相关设置。 \n \n \n \n 属性 \n 类型 \n 必填 \n 默认值 \n 说明 \n \n \n \n \n scope.userLocation \n PermissionObject \n 否 \n \n 位置相关权限声明 \n \n \n \n PermissionObject结构 \n \n \n \n 属性 \n 类型 \n 必填 \n 默认值 \n 说明 \n \n \n \n \n desc \n String \n 是 \n 小程序获取权限时展示的接口用途说明。最长 30 个字符 \n \n \n \n \n 示例代码： \n /* app.json */ \n { \n     "permission" :   { \n         "scope.userLocation" :   { \n             // 高速公路行驶持续后台定位 \n             "desc" :   "你的位置信息将用于小程序位置接口的效果展示"  \n         } \n     } \n } \n \n 1 2 3 4 5 6 7 8 9 \n routes \n \n \n 未测试 \n \n routes 为一个数组，数组中每一项代表一组路由规则，具体包含字段为： \n \n \n \n 属性 \n 类型 \n 必填 \n 描述 \n 示例 \n \n \n \n \n path \n String \n 是 \n 访问路径 \n "home" \n \n \n page \n String \n 是 \n 页面源码文件路径，从小程序包根目录开始的文件路径 \n "pages/home/index" \n \n \n \n 代码示例： \n /* app.json */ \n { \n     "routes" :   [ \n         { \n             // 投放入口，scheme中的path \n             "path" :   "home" ,  \n             // 真实的物理存储路径 \n             "page" :   "pages/home/home"  \n         } , \n         { \n             "path" :   "list" , \n             "page" :   "pages/list/list" \n         } , \n         { \n             "path" :   "foo/bar" , \n             "page" :   "pages/list/list" \n         } \n     ] \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 URL Scheme 是一种 App 间的调起协议。App 内部注册协议后，当用户在浏览器或其他 App 内点击相应的 scheme 链接，就能够调起 App 并打开 App 内的相关页面。\n下面是“智能小程序示例”小程序的调起 scheme： \n 全局app.js \n app.js中存放全局的JavaScript逻辑。 \n App ( { \n     onLaunch ( options )   { \n         // do something when launch \n     } , \n     onShow ( options )   { \n         // do something when show \n     } , \n     onHide ( )   { \n         // do something when hide \n     } , \n    globalData :   \'SWAN\' \n } ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 App 函数用来注册一个智能小程序。接受一个 Object 作为参数，用以指定智能小程序的生命周期函数等。 \n \n 整个小程序只有一个App实例，是页面共享的。开发者可以通过getApp()方法获取到全局唯一的App示例，代码如下: \n //xxx.js \n const  appInstance  =   getApp ( ) ; \nconsole . log ( appInstance ) ; \n \n 1 2 3 \n 注意： \n \n App() 必须在 app.js 中注册，且不能注册多个； \n 不要在 App() 内的函数中调用 getApp() 函数，可以通过 this 获取 app 实例； \n 不要在 onLaunch 中调用 getCurrentPages() ，因为此时 page 还没有生成。 \n 小程序页面.js文件 \n 在SWAN模板中书写一下代码： \n < view > {{ me }} </ view > \n < button   bind: tap = " setName " > 点击变值 </ button > \n \n 1 2 在js中可以对视图中的行为进行监听，并触发页面变化： \n Page ( { \n     setName ( )   { \n         this . setData ( { \n            me :   \'aaa\' \n         } ) \n         //this.data.me = \'aaa\' 不会触发视图的变化 \n     } \n } ) \n \n 1 2 3 4 5 6 7 8 #  小程序页面.swan文件 \n 这部分是每个智能小程序页面的展现模板，类似于 Web 开发中的 HTML，SWAN 模板中使用的标签均为 SWAN 组件规定的标签。标签可以拥有属性，需要注意的是，swan 中的属性是大小写敏感的，也就是说 class 和 Class 在 swan 中是不同的属性。 \n \n 基础数据绑定 \n \n \x3c!-- xxx.swan --\x3e \n < view > \n    hi, {{name}}\n </ view > \n \n 1 2 3 4 Page ( { \n    data :   { \n        name :   \'baiduStu\' \n     } \n } ) \n \n 1 2 3 4 5 \n 循环 && 条件 \n \n 开发者可以通过在元素上添加s-for、s-if指令来进行渲染和视图层的逻辑判断。 \n \x3c!-- xxx.swan --\x3e \n < view   s-for = " name in names " > \n    {{name.name}}\n </ view > \n < button   bind: tap = " toggleShow " > toggle show </ button > \n < view   s-if = " show " > {{show}} </ view > \n \n 1 2 3 4 5 6 Page ( { \n    data :   { \n        names :   [ \n             { name :   \'hhhh\' } , \n             { name :   \'gggg\' } , \n             { name :   \'dddd\' } , \n         ] , \n        show :   false \n     } , \n     toggleShow ( )   { \n         this . setData ( { \n            show :   ! this . data . show\n         } ) \n     } \n } ) \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 \n 事件 \n \n 开发者可以使用 bind: + 事件名 来进行事件绑定。 \n 目前支持的事件类型有： \n \n \n \n 类型 \n 触发条件 \n \n \n \n \n touchstart \n 手指触摸开始 \n \n \n touchmove \n 手指触摸后进行移动 \n \n \n touchend \n 手指触摸结束 \n \n \n touchcancel \n 手指触摸动作被打断，如来电提醒等 \n \n \n tap \n 手指触摸后马上离开动作 \n \n \n \n 当开发者绑定方法到事件，事件触发时，SWAN 会给触发的方法传递 事件对象 ，事件对象因事件不同而不同。 \n \n 还有其他事件，后面会有介绍 \n \n 开发者可以通过 dataset 在组件中自定义数据，并在事件发生时，由 SWAN 所在事件对象中，传递给绑定函数。 \n \x3c!-- xxx.swan --\x3e \n < view   data-swan = " {{test}} "   bind: tap = " viewtap " > dataset-test </ view > \n \n 1 2 Page ( { \n    data :   { \n        test :   1 , \n        Test :   2 \n     } , \n     viewtap :   function   ( event )   { \n         // 输出1(大小写敏感) \n        console . log ( \'value is:\' ,  event . currentTarget . dataset . swan ) ; \n     } \n } ) ; \n \n 1 2 3 4 5 6 7 8 9 10 #  小程序页面栈 \n \n 框架以栈的形式维护了当前的所有页面。开发者可以使用  getCurrentPages()  函数获取当前页面栈。 \n \n getCurrentPages 全局函数用于获取当前页面栈的实例，以数组形式按栈的顺序给出，第一个元素为首页，最后一个元素为当前页面。 \n 路由方式 \n Page \n Page() 函数用来注册一个页面。接受一个 object 参数，其指定页面的初始数据、生命周期函数、事件处理函数等。 \n 自定义组件 \n 创建自定义组件 \n 开发者可以将页面内的功能模块抽象成自定义组件，在智能小程序的各个页面中进行使用，提升代码复用度，节省开发成本。 \n \n 一个自定义组件由 4 个文件 (.swan .css .js .json) 组成 \n \n // 包含自定义组件custom的项目结构\n├── app.js\n├── app.json\n├── project.swan.json\n└── components\n    └── custom\n        ├── custom.swan\n        ├── custom.css\n        ├── custom.js\n        └── custom.json\n\n \n 1 2 3 4 5 6 7 8 9 10 11 要编写一个自定义组件，首先需要在 json 文件中进行自定义组件声明（在 json 文件中将 component 字段设为 true 可将这一组文件设为自定义组件）： \n /* custm.json */ \n { \n     "component" :   true \n } \n \n 1 2 3 4 同时，类似于页面开发。开发自定义组件，可以在 swan 文件中编写组件模板，在 css 文件中引入样式，它们的写法和页面的写法类似。 \n \x3c!-- custom.swan --\x3e \n < view   class = " name "   bind: tap = " onTap " > \n    {{name}}{{age}}\n </ view > \n \n 1 2 3 4 /* custom.css */ \n .name   { \n     color :  black ; \n } \n \n 1 2 3 4 在自定义组件的 js 文件中，需要使用  Component()  来注册组件，并提供组件的属性定义、内部数据和自定义方法。 \n \n 全局app.js用App()来注册，小程序页面用Page()来注册。 \n \n /* custom.js */ \n Component ( { \n    properties :   { \n        name :   {   // 属性名 \n            type :  String ,   // 类型（必填），目前接受的类型包括：String, Number, Boolean, Object, Array, null（表示任意类型） \n            value :   \'\' ,   // 属性初始值（必填） \n             observer :   function ( newVal ,  oldVal )   { \n                 // 属性被改变时执行的函数（可选） \n                console . log ( ` name has been changed: ${ newVal } ` ) \n             } \n         } \n     } , \n\n    data :   { \n        age :   20 \n     } ,   // 私有数据，可用于模版渲染 \n\n     // 生命周期函数，可以为函数，或一个在methods段中定义的方法名 \n     attached :   function   ( )   { } , \n\n     detached :   function   ( )   { } , \n\n    methods :   { \n         onTap :   function   ( )   { \n             this . setData ( { \n                name :   this . data . name . split ( \'\' ) . reverse ( ) . join ( \'\' ) \n                 // 更新属性和数据的方法与更新页面数据的方法类似 \n             } ) ; \n         } \n     } \n } ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 \n 使用自定义组件 \n \n 需要在页面json文件中配置： \n { \n     "usingComponents" :   { \n         "custom" :   "/componrnts/custom/custom" \n     } \n } \n \n 1 2 3 4 5 这样在页面的 swan 文件中，就可以像使用基础组件一样使用自定义组件。节点名即自定义组件的标签名，节点属性即传递给组件的属性值。 \n \x3c!-- xxx.swan --\x3e \n < view > \n     < custom   name = " swanApp " > </ custom > \n </ view > \n \n 1 2 3 4 #  组件模板和样式 \n \n 组件模板 \n \n 在组建模板中可以提供一个 <slot> 节点，用于承载组件引用时提供的子节点。 \n \x3c!-- custom.swan --\x3e \n < view > \n    {{name}}{{age}}\n     \x3c!-- 如果组件引用时没有子节点 可以给出默认值 --\x3e \n     < slot > default value/node </ slot > \n </ view > \n \n 1 2 3 4 5 6 \x3c!-- xxxx.swan --\x3e \n < view > \n     < custom   name = " swanApp " > \n         < text > custom slot </ text > \n     </ custom > \n </ view > \n \n 1 2 3 4 5 6 通过 name 属性可以给 slot 命名。一个视图模板的声明可以包含一个默认 slot 和多个命名 slot。外层组件或页面的元素通过 slot="name" 的属性声明，可以指定自身的插入点。 \n \x3c!-- custom.swan --\x3e \n < view > \n     < slot   name = " slot1 " > </ slot > \n     < slot   name = " slot2 " > </ slot > \n </ view > \n \n 1 2 3 4 5 \x3c!-- xxx.swan --\x3e \n < view > \n     < custom > \n         < view   slot = " slot1 " > 我是slot1 </ view > \n         < view   slot = " slot2 " > 我是slot2 </ view > \n     </ custom > \n </ view > \n \n 1 2 3 4 5 6 7 \n 和Vue的slot基本一样 \n \n 在 slot 声明时应用 if 或 for 指令，可以让插槽根据组件数据动态化。 \n < view > \n     < slot   s-if = " !visible "   name = " subcomponent " > </ slot > \n </ view > \n \n 1 2 3 \n 模板数据绑定 \n \n 与普通的 SWAN 模板类似，可以使用数据绑定，这样就可以向子组件的属性传递动态数据。 \n < view > \n     < custom   prop-a = " {{dataFieldA}} "   prop-b = " {{dataFieldB}} " > \n         < view > 这里是插入到组件slot中的内容 </ view > \n     </ custom > \n </ view > \n \n 1 2 3 4 5 在以上例子中，组件的属性 propA 和 propB 将收到页面传递的数据。页面可以通过 setData 来改变绑定的数据字段。 \n \n 数据环境 \n \n 插入slot的内容, 其数据环境为声明时的环境 。 \n 代码示例： \n 组件： \n \x3c!-- custom自定义组件 --\x3e \n < view   class = " component-range " > \n     < slot   name = " inner " > </ slot > \n </ view > \n \n 1 2 3 4 Component ( { \n    data :   { \n        name :   \'swan-inner\' \n     } \n } ) ; \n \n 1 2 3 4 5 使用组件的页面或组件： \n < view > \n     < custom > \n         < view   slot = " inner " > {{name}} </ view > \n     </ custom > \n </ view > \n \n 1 2 3 4 5 Page ( { \n    data :   { \n        name :   \'swan-outer\' \n     } \n } ) ; \n \n 1 2 3 4 5 渲染结果： \n < view > \n     < view   class = " component-range " > \n         < view > swan-outer </ view > \n     </ view > \n </ view > \n \n 1 2 3 4 5 但是：如果 slot 声明中包含 s-bind 或 1 个以上 var- 数据前缀声明，该 slot 为 scoped slot。scoped slot 具有独立的数据环境。  scoped slot 通常用于组件的视图部分期望由外部传入视图结构，渲染过程使用组件内部数据 。 \n 代码示例： \n 组件： \n \x3c!-- custom自定义组件 --\x3e \n < view   class = " component-range " > \n     < slot   name = " inner "   var-name = " name " > </ slot > \n </ view > \n \n 1 2 3 4 Component ( { \n    data :   { \n        name :   \'swan-inner\' \n     } \n } ) ; \n \n 1 2 3 4 5 使用组件的页面或组件： \n < view > \n     < custom > \n         < view   slot = " inner " > {{name}} </ view > \n     </ custom > \n </ view > \n \n 1 2 3 4 5 Page ( { \n    data :   { \n        name :   \'swan-outer\' \n     } \n } ) ; \n \n 1 2 3 4 5 渲染结果： \n < view > \n     < view   class = " component-range " > \n         < view > swan-inner </ view > \n     </ view > \n </ view > \n \n 1 2 3 4 5 \n 外部样式类 \n \n 当组件希望接受外部传入的样式类时，可以在 Component 中用  externalClasses  字段定义若干个外部样式类。 \n /* 组件 custom.js */ \n Component ( { \n    externalClasses :   [ \'external-class\' ] \n } ) ; \n \n 1 2 3 4 \x3c!-- 组件 custom.swan --\x3e \n < view   class = " external-class " > 这段文本的颜色由组件外的 class 决定 </ view > \n \n 1 2 组件的使用者可以像使用其他属性一样，指定这个样式类对应的 class 。 \n \x3c!-- 使用组件的页面或者组件 --\x3e \n < custom   external-class = " red-text "   /> \n \n 1 2 .red-text   { \n     color :  red ; \n } \n \n 1 2 3 #  Component 构造器 \n 具体的Component构造器可定义的字段与方法 \n \n 框出来的是 组件 的生命周期。 \n 事实上，一个自定义组件也可以视为一个页面，故 页面也可以使用 Component 构造器构造 ，拥有与普通组件一样的定义字段与实例方法，其必要配置项（ json ）与正常自定义组件一致，即需要有component: true字段。但是 页面的生命周期方法（即 on 开头的方法），应写在 methods 定义段中 。 \n 组件间通信与事件 \n \n 通过 dispatch 方法与父组件通信 \n \n \n 未测试 \n \n 通过 dispatch 方法，子组件可以向组件树的上层派发消息。消息将沿着组件树向上传递，直到遇到第一个处理该消息的组件，则停止。\n通过 messages 可以声明组件要处理的消息，messages 是一个对象，key 是消息名称，value 是消息处理的函数，接收一个包含 target（派发消息的组件）和 value（消息的值）的参数对象。 \n /* 父组件逻辑 */ \n Component ( { \n    messages :   { \n         \'childmessage\' :   function   ( e )   { \n            console . log ( \'childmessage\' ,  e ) ; \n         } \n     } \n } ) ; \n\n /* 子组件逻辑 */ \n Component ( { \n     created ( )   { \n         this . dispatch ( \'childmessage\' ,   { \n            name :   \'swan\' \n         } ) ; \n     } \n } ) ; \n\n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 \n 通过 triggerEvent 方法与父组件通信 \n \n 自定义组件触发事件时，需要使用 triggerEvent 方法，指定事件名和 detail 对象。 \n /* custom.js */ \n Component ( { \n     attached :   function   ( )   { \n         this . triggerEvent ( \'myEvent\' ,   2021 ) ; \n     } , \n } ) \n \n 1 2 3 4 5 6 \x3c!-- 引用组件的页面swan文件 --\x3e \n < custom   name = " yanhaha "   dataA = " {{number1}} "   bind: tap = " increNum "   bind: myEvent = " listener " > \n     < view   slot = " slot1 " > 我是slot1 </ view > \n     < text   slot = " default " > custom slot </ text > \n     < view   slot = " slot2 " > 我是slot2-{{test}} </ view > \n </ custom > \n \n 1 2 3 4 5 6 // 引用组件的页面js文件 \n Page ( { \n     //... \n     listener ( e )   { \n        console . log ( e , \'listener\' ) ; \n     } , \n     //... \n } ) \n \n 1 2 3 4 5 6 7 8 \n \n 通过 this.selectComponent 方法获取子组件示例对象 \n \n \x3c!-- 使用组件的页面 --\x3e \n < custom   id = " customid "   name = " yanhaha "   dataA = " {{number1}} "   bind: tap = " increNum "   bind: myEvent = " listener " > \n     < view   slot = " slot1 " > 我是slot1 </ view > \n     < text   slot = " default " > custom slot </ text > \n     < view   slot = " slot2 " > 我是slot2-{{test}} </ view > \n </ custom > \n \n 1 2 3 4 5 6 //使用该组件的逻辑 \n Page ( { \n     onLoad :   function   ( )   { \n         const  res  =   this . selectComponent ( \'#customid\' ) ; \n        console . log ( res ,   \'selectComponent\' ) ; \n     } , \n } ) \n \n 1 2 3 4 5 6 7 #  组件生命周期 \n \n 当前自定义组件可用的全部生命周期及其描述如下表所示： \n \n Component ( { \n    pageLifeTimes :   { \n         show ( )   { \n             //组件所在页面被展示时触发 \n         } , \n         hide ( )   { \n             //组件所在页面被隐藏时触发 \n         } \n     } \n } ) \n \n 1 2 3 4 5 6 7 8 9 10 #  behaviors \n behaviors 用于组件间代码共享，类似于一些编程语言中的“mixins”或“traits”。 \n \n 每个 behavior 可以包含一组属性、数据、生命周期函数和方法，组件引用它时，它的属性、数据和方法会被合并到组件中，生命周期函数也会在对应时机被调用。 \n 每个组件可以引用多个 behavior 。 同时该 behavior 也可以引用其它 behavior 。 \n behavior 需要使用 Behavior() 构造器定义 。 \n \n //my-behavior.js \nmodule . exports  =   Behavior ( { \n    behaviors :   [ ] , \n    properties :   { \n        myBehaviorProperty :   { \n            type :  String , \n            value :   \'behavior\' \n         } \n   } , \n  data :   { \n      myBehaviorData :   { } \n   } , \n   attached :   function ( ) { } , \n  methods :   { \n       myBehaviorMethod :   function ( ) { } \n   } \n } ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 组件引用： \n Component ( { \n     //... \n    behaviors :   [ require ( \'my-behavior\' ) ] , \n     //... \n } ) \n \n 1 2 3 4 5 字段的覆盖和组合规则 \n \n 如果有同名的属性或方法，组件本身的属性或方法会覆盖behavior中的属性或方法 \n 如果引用了多个behavior，在定义段中靠后的behavior中的属性或方法会覆盖靠前的属性或方法 \n 如果有同名的数据字段，如果数据是对象类型，会进行对象合并；如果是非对象类型则会进行相互覆盖 \n 生命周期函数不会相互覆盖，而是在对应触发时机被逐个调用。如果同一个behavior被一个组件多次引用，它定义的生命周期函数只会执行一次。 \n 数据监听器 \n \n 数据监听器可以用于监听和响应任何属性和数据字段的变化。 \n \n 假如存在这样一种场景： this.data.sum 永远是 this.data.dataA 和 this.data.dataB 的和。此时，可以使用数据监听器进行如下实现： \n Component ( { \n    properties :   { \n        dataA :   { \n            type :  Number , \n            value :   0 , \n         } , \n        dataB :   { \n            type :  Number , \n            value :   0 , \n         } \n     } , \n    observers :   { \n         "dataA, dataB" :   function   ( dataA ,  dataB )   { \n             this . setData ( { \n                sum :  dataA  +  dataB\n             } ) \n         } \n     } , \n } ) \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 数据监听器还可以支持监听属性或内部数据的变化，可以同时监听多个。 \n Component ( { \n    observers :   { \n         \'some.subfield\' :   function ( subfield )   { \n             // 使用 setData 设置 this.data.some.subfield 时触发 \n             // （除此以外，使用 setData 设置 this.data.some 也会触发） \n            subfield  ===   this . data . some . subfield\n         } , \n         \'arr[12]\' :   function ( arr12 )   { \n             // 使用 setData 设置 this.data.arr[12] 时触发 \n             // （除此以外，使用 setData 设置 this.data.arr 也会触发） \n            arr12  ===   this . data . arr [ 12 ] \n         } , \n     } \n } ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 如果需要监听所有子数据字段的变化，可以使用通配符 ** 。 \n Component ( { \n    observers :   { \n         \'some.field.**\' :   function ( field )   { \n             // 使用 setData 设置 this.data.some.field 本身或其下任何子数据字段时触发 \n             // （除此以外，使用 setData 设置 this.data.some 也会触发） \n            field  ===   this . data . some . field\n         } , \n     } , \n    data :   { \n        some :   { \n            field :   { \n                subfield :   [ 1 ,   2 ,   3 ] \n             } \n         } \n     } , \n     attached :   function ( )   { \n         // 会触发 observers \n         this . setData ( { \n             \'some.field\' :   { } \n         } ) ; \n        \n         // 会触发 observers \n         // this.setData({ \n         //     \'some.field.xxx\': {} \n         // }); \n\n         // 会触发 observers \n         // this.setData({ \n         //     \'some\': {} \n         // }); \n     } \n } ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 当然，仅使用通配符 ** 可以监听全部 setData 。 \n Component ( { \n    observers :   { \n         \'**\' :   function ( value )   { \n             // 数据发生变化即触发，这里的 value 是 properties 和 data 的合集 \n         } \n     } \n } ) \n \n 1 2 3 4 5 6 7 #  抽象节点 \n 关于抽象节点：在自定义组件中的一些节点，其对应的自定义组件不是由自定义组件自身决定的，而是由自定义组件的调用者确定的。这个时候就可以把节点声明为“抽象节点”。 \n //selectable-group.swan\n < view   s-for = " {{labels}} " > \n   < label   bindtap = " itemTap "   data-index = " {{index}} " > \n     < selectable2   disabled = " {{false}} "   selected = " {{selected[index]}} "   name = " {{name}} " > </ selectable2 > \n    {{item}}\n   </ label > \n   < text > {{item}} </ text > \n </ view > \n \n 1 2 3 4 5 6 7 8 其中，“selectable2”不是在 json 文件中的 usingComponents 字段声明的组件。而是在 componentGenerics 中声明的 抽象节点 。抽象节点也可以指定默认组件。 \n //selectable-group.json \n { \n     "component" :   true , \n     "usingComponents" :   { } , \n     "componentGenerics" :   { \n         "selectable2" :   { \n             "default" :   "/components/checkbox/checkbox" \n         } \n     } \n } \n\n //或者不指定默认组件 \n { \n     "component" :   true , \n     "usingComponents" :   { } , \n     "componentGenerics" :   { \n         "selectable2" :   true \n     } \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 应该如何使用包含抽象节点的组件呢？ \n \x3c!-- index.swan --\x3e \n < view > selectable-group with custom-radio </ view > \n < selectable-group   generic: selectable = " custom-radio "   /> \n\n < view > selectable-group with custom-checkbox </ view > \n < selectable-group   generic: selectable = " custom-checkbox "   /> \n\n < view > selectable-group with default component </ view > \n < selectable-group   /> \n \n 1 2 3 4 5 6 7 8 9 //index.json \n { \n     "navigationBarTitleText" :   "代码片段示例" , \n     "usingComponents" :   { \n         "selectable-group" :   "/components/selectable-group/selectable-group" , \n         "custom-radio" :   "/components/radio/radio" , \n         "custom-checkbox" :   "/components/checkbox/checkbox" \n     } \n } \n \n 1 2 3 4 5 6 7 8 9 在使用 selectable-group 组件时，需要用 generic:selectable="xxxx" 来指定具体 selectable2 要渲染成哪一个组件。 \n 自定义组件扩展 \n \n 自定义组件的扩展其实就是提供了修改自定义组件定义段的能力。 \n \n 代码示例： \n // behavior.js \nmodule . exports  =   Behavior ( { \n     definitionFilter ( defFields )   { \n        defFields . data . from  =   \'behavior\' \n     } \n } ) \n\n // component.js \n Component ( { \n    data :   { \n         from :   \'component\' \n     } , \n    behaviors :   [ require ( \'./behavior.js\' ) ] , \n     ready ( )   { \n       // 此处会发现输出 behavior 而不是 component \n      console . log ( this . data . from )  \n     } \n } ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 Behavior() 构造器提供了新的定义段 definitionFilter，用于支持自定义组件扩展。 definitionFilter 是一个函数，在被调用时会注入两个参数： \n \n 第一个参数是使用该 behavior 的 component/behavior 的定义对象； \n 第二个参数是该 behavior 所使用的 behavior 的 definitionFilter 函数列表。 \n \n // behavior3.js \nmodule . exports  =   Behavior ( { \n     definitionFilter ( defFields ,  definitionFilterArr )   { } \n } ) ; \n\n // behavior2.js \nmodule . exports  =   Behavior ( { \n    behaviors :   [ require ( \'./behavior3.js\' ) ] , \n     definitionFilter ( defFields ,  definitionFilterArr )   { \n         // definitionFilterArr[0](defFields) \n     } \n } ) ; \n\n // behavior1.js \nmodule . exports  =   Behavior ( { \n    behaviors :   [ require ( \'./behavior2.js\' ) ] , \n     definitionFilter ( defFields ,  definitionFilterArr )   { } \n } ) ; \n\n // component.js \n Component ( { \n    behaviors :   [ require ( \'./behavior1.js\' ) ] \n } ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 上述代码中声明了 1 个自定义组件和 3 个 behavior，每个 behavior 都使用了 definitionFilter 定义段。按照声明的顺序会有如下事情发生： \n \n 当进行 behavior2 的声明时就会调用 behavior3 的 definitionFilter 函数，其中 defFields 参数是 behavior2 的定义段， definitionFilterArr 参数即为空数组，因为 behavior3 没有使用其他的 behavior 。 \n 当进行 behavior1 的声明时就会调用 behavior2 的 definitionFilter 函数，其中 defFields 参数是 behavior1 的定义段， definitionFilterArr 参数是一个长度为 1 的数组， definitionFilterArr[0]  即为 behavior3 的 definitionFilter 函数，因为 behavior2 使用了 behavior3。用户在此处可以自行决定在进行 behavior1 的声明时要不要调用 behavior3 的 definitionFilter 函数，如果需要调用，在此处补充代码  definitionFilterArr[0](defFields)  即可， definitionFilterArr  参数会由基础库补充传入。 \n 同理，在进行 component 的声明时就会调用 behavior1 的 definitionFilter 函数。 \n \n 简单概括，definitionFilter 函数可以理解为当 A 使用了 B 时，A 声明就会调用 B 的 definitionFilter 函数并传入 A 的定义对象让 B 去过滤。此时如果 B 还使用了 C 和 D，那么 B 可以自行决定要不要调用 C 和 D 的 definitionFilter 函数去过滤 A 的定义对象。 \n 语法 \n 模板语法 \n \n 数据绑定 \n \n SWAN模板中的动态数据都从逻辑层Page中data对象中来。数据绑定和许多模板引擎一样，数据包裹在双大括号里面。双向绑定的数据需包裹在 {= =} 中。 \n 代码示例： \n < scroll-view \n     scroll-top = " {= scrollTop =} " \n     scroll-into-view = " {= scrollIntoView =} " \n > \n     < view   id = " one "   class = " color-a " > A </ view > \n     < view   id = " two "   class = " color-b " > B </ view > \n </ scroll-view > \n\n < view   class = " c-{{className}} " > {{value}} </ view > \n\n \x3c!-- 控制属性不需要大括号包裹 --\x3e \n < view   s-if = " flag " > 如果为flag为true，你看得到我。 </ view > \n\n \x3c!-- 运算 --\x3e \n\n \x3c!-- 普通变量 --\x3e \n < text > {{name}} </ text > \n\n \x3c!-- 属性访问 --\x3e \n < text > {{person.name}} </ text > \n < text > {{persons[1]}} </ text > \n\n \x3c!-- 一元否定 --\x3e \n < text > {{!isOK}} </ text > \n < text > {{!!isOK}} </ text > \n\n \x3c!-- 二元运算 --\x3e \n < text > {{num1 + num2}} </ text > \n < text > {{num1 - num2}} </ text > \n < text > {{num1 * num2}} </ text > \n < text > {{num1 / num2}} </ text > \n < text > {{num1 + num2 * num3}} </ text > \n\n \x3c!-- 二元关系 --\x3e \n < text > {{num1 > num2}} </ text > \n < text > {{num1 !== num2}} </ text > \n\n \x3c!-- 三元条件 --\x3e \n < text > {{num1 > num2 ? num1 : num2}} </ text > \n\n \x3c!-- 括号 --\x3e \n < text > {{a * (b + c)}} </ text > \n\n \x3c!-- 数值 --\x3e \n < text > {{num1 + 200}} </ text > \n\n \x3c!-- 字符串 + 三元条件 --\x3e \n < text > {{item ? \',\' + item : \'\'}} </ text > \n\n \x3c!-- 三元运算 --\x3e \n < checkbox   checked = " {{flag ? true : false}} " > </ checkbox > \n\n \x3c!-- 数组字面量 --\x3e \n < text > {{ [\'john\', \'tony\', \'lbj\'] }} </ text > \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 \n 循环 \n \n s-for 默认情况下( s-for="persons" )下标索引是为 index，数组当前变量名默认为 item。也可以通过使用  s-for-index  来指定下标索引， s-for-item  来指定数组当前变量名。或者通过 s-for="p,index in persons" 简写的方式，指定下标索引和数组当前变量名。 \n 如果列表中的项目会动态地增加、删除，并且希望列表中的项目保持自己的特征和状态，需要在 s-for 指令声明中指定 trackBy 。 \n trackBy 后跟的值可以是 s-for 的 array 中 item 本身或者其属性（如  item.id ），该值需要是列表中唯一的字符串或数字，且不能动态改变。比如： s-for="list trackBy item" 。 \n 当数据更新触发重新渲染时，将自动跟踪项的变更，原先列表内的项位置会移动，新添加的项会被渲染，以确保组件保持自身的状态，并且省去一部分重新渲染带来的消耗。 \n \n 注意：当循环渲染自定义组件列表时， 不 指定 trackBy 而动态增删数组中的元素，可能会导致调用错误的 attached detached 生命周期函数。 \n \n \n 条件 \n \n s-if 可以实现以下操作： \n \n 为元素指定条件，当条件成立时元素可见，反之不可见 \n 为 s-if 增加一个额外分支条件块 \n 为 s-if 增加一个不满足条件的分支块， s-else 指令没有值 \n \n \n 注意： s-if 与 s-else 之间加入多余标签会报错。 \n \n \n 注意： s-if 与 s-for 不可在同一标签下同时使用。 \n \n < view   s-if = " is4G " > 4G </ view > \n < view   s-elif = " isWifi " > Wifi </ view > \n < view   s-else > Other </ view > \n \n 1 2 3 block s-if \n block 虚拟组件，在渲染时不会包含自身，只会渲染其内容。可以用来渲染一组组件或者标签。 \n \n 模板 \n \n SWAN 提供模板 template 的用法，旨在提高工程化和代码可维护性，可以在模板中定义代码片段，并被外界注入值，然后在合适的时机调用。 \n name  属性，定义了模板的名字。通过  is  属性，声明需要使用的模板， data  是所需要传入到模板的值，注意对象字面量的使用方法，对象字面量是三个大括号包裹。 \n 代码示例： \n \x3c!-- template-demo.swan--\x3e \n < template   name = " person-card " > \n     < view > \n         < text > 位置: {{pos}} </ text > \n         < text > 姓名: {{name}} </ text > \n     </ view > \n </ template > \n\n < template   name = " odd " > \n    < view >  odd  </ view > \n </ template > \n\n\n < template   name = " even " > \n    < view >  even  </ view > \n </ template > \n\n < template   is = " person-card "   data = " {{{...person}}} "   /> \n\n\n < block   s-for = " {{[1, 2, 3, 4, 5]}} " > \n    < view > {{item}} </ view > \n    < template   is = " {{item % 2 == 0 ?  \' even \'  :  \' odd \' }} " /> \n </ block > \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 \n 事件处理 \n \n 与浏览器的 DOM 事件类似，智能小程序的视图中事件分为 冒泡事件 和 非冒泡事件 。 \n 冒泡事件如下表，不在列表的事件均为非冒泡事件。 \n \n 事件绑定在组件上，与属性的写法相同（以 key、value 的形式）。 \n \n key 以 bind 或 catch 开头，衔接事件类型，例如 bindtap、catchtouchcancel 。也可以在 bind 和 catch 后可以紧跟一个冒号，如 bind:tap 、 catch:touchstart ，其功能不变。 \n bind 与 catch 的区别是 bind 事件绑定不会阻止冒泡事件向上冒泡，catch 事件绑定可以阻止冒泡事件向上冒泡； \n value 对应的是在 Page 中定义同名的函数，否则在事件触发时执行函数会抛出异常。 \n \n 代码示例： \n < view   id = " wrap "   bindtap = " handleTap1 " > \n    wrap\n     < view   id = " module "   catchtap = " handleTap2 " > \n        module\n         < view   id = " text "   bindtap = " handleTap3 " > \n            text\n         </ view > \n     </ view > \n </ view > \n \n 1 2 3 4 5 6 7 8 9 \n 事件的捕获 \n 捕获阶段是位于冒泡阶段之前，在捕获阶段中，事件到达节点的顺序与冒泡阶段恰好相反。在捕获阶段监听的方式是采用 capture-bind 、 capture-catch 关键字，后者将中断捕获阶段和取消冒泡阶段。 \n 代码示例：capture-bind \n < view   id = " wrap "   bind: touchstart = " handleTap1 "   capture-bind: touchstart = " handleTap2 " > \n    wrap\n     < view   id = " inner "   bind: touchstart = " handleTap3 "   capture-bind: touchstart = " handleTap4 " > \n        text\n     </ view > \n </ view > \n \n 1 2 3 4 5 6 \n 代码示例：capture-catch \n < view   id = " wrap "   bind: touchstart = " handleTap1 "   capture-catch: touchstart = " handleTap2 " > \n    wrap\n     < view   id = " inner "   bind: touchstart = " handleTap3 "   capture-bind: touchstart = " handleTap4 " > \n        text\n     </ view > \n </ view > \n \n 1 2 3 4 5 6 \n 事件对象 \n 默认当组件触发事件时，逻辑层绑定事件的处理函数会收到一个默认参数，即事件对象。下面是事件对象详细属性列表： \n \n \n 注意：target 和 currentTarget 的区别是  currentTarget  为当前事件所绑定的组件，而  target  则是触发该事件的源头组件。 \n \n target \n \n \n \n 属性 \n 类型 \n 说明 \n \n \n \n \n dataset \n Object \n 触发事件 组件上由data-开头的自定义属性组成的集合 \n \n \n id \n String \n 触发事件 组件的id \n \n \n offsetTop \n Int \n 元素向上偏移的像素值 \n \n \n offsetLeft \n Int \n 元素向左偏移的像素值 \n \n \n \n currentTarget \n \n \n \n 属性 \n 类型 \n 说明 \n \n \n \n \n dataset \n Object \n 事件绑定的 组件上由data-开头的自定义属性组成的集合 \n \n \n id \n String \n 事件绑定 的组件的id \n \n \n offsetTop \n Int \n 元素向上偏移的像素值 \n \n \n offsetLeft \n Int \n 元素向左偏移的像素值 \n \n \n \n dataset \n 在组件的事件被触发时，可以传递自定义的数据。 \n 书写方式： 以 data- 开头，多个单词由连字符-链接，不能有大写(大写会自动转成小写)，最终的 - 在 dataset 中会将连字符转成驼峰式写法。如组件上 data-car-color 属性值的读取方式是: event.currentTarget.dataset.carColor。 \n touch \n \n \n \n 属性 \n 类型 \n 说明 \n \n \n \n \n identifier \n Number \n 触摸点的标识符 \n \n \n clientX, clientY \n Number \n 距离页面可显示区域（屏幕除去导航条）左上角的 X 轴与 Y 轴的距离 \n \n \n pageX, pageY \n Number \n 距离文档左上角的 X 轴与 Y 轴的距离 \n \n \n \n changedTouch \n 数据格式同 touches，指的是有变化的触摸点，如 touchstart（开始），touchmove（变化），touchend，touchcancel（结束）等。 \n 点击事件的 detail 带有的 x, y 同 pageX, pageY 代表距离文档左上角的距离。 \n 注意 \n 请不要在组件中绑定 onClick、onAnimationstart、onDrag 等 HTML 原生事件，这会导致小程序的事件绑定不生效。 \n \n 文件作用域 \n \n 在 JavaScript 文件中声明的变量和函数只在该文件中有效；不同的文件中可以声明相同名字的变量和函数，且不会互相影响。通过全局函数 getApp() 可以获取全局的应用实例，如果需要全局的数据可以在 App() 中设置。 \n \n 引用 \n \n SWAN可以通过  import  和  include 来引用模板文件。 \n import \n 通过 import 和 template 配合使用，可以将代码分离以及复用。 \n 例如： \n 首先，在person-card.swan中定义了一个叫person-card的template： \n \x3c!-- person-card.swan--\x3e \n < template   name = " person-card " > \n     < view > \n         < text > 位置: {{pos}} </ text > \n         < text > 姓名: {{name}} </ text > \n     </ view > \n </ template > \n \n 1 2 3 4 5 6 7 然后，在index.swan里引用文件person-card.swan，并使用它的模板： \n \x3c!-- index.swan--\x3e \n < import   src = " ./person-card.swan "   /> \n < template   is = " person-card "   data = " {{person}} "   /> \n \n 1 2 3 // index.js \n Page ( { \n    data :   { \n        person :   { \n            pos :   \'Baidu\' , \n            name :   \'SWAN\' \n         } \n     } \n } ) ; \n \n 1 2 3 4 5 6 7 8 9 \n import 具有递归的特性。 例如：C 引用 B，B 引用 A，在 C 中可以使用 B 定义的 template，在 B 中可以使用 A 定义的 template ， C 也可以使用 A 定义的 template \n \n include \n 通过 include 可以将目标模板整个（除了 template）引入到当前的位置，相当于 inline 。 \n \x3c!-- index.swan --\x3e \n < include   src = " header.swan " /> \n < view >  body  </ view > \n < include   src = " footer.swan " /> \n\n \x3c!-- header.swan --\x3e \n < view >  header  </ view > \n\n \x3c!-- footer.swan --\x3e \n < view >  footer  </ view > \n \n 1 2 3 4 5 6 7 8 9 10 #  SJS语法参考 \n \n 基本和JS的一致，不在赘述。需要看的是 这个地方 \n 框架接口 \n setData机制 \n setData 函数用于将数据，从逻辑层发送到视图层，当开发者调用 setData 后，数据的变化会引起视图层的更新。 \n 参数说明： \n \n \n \n 属性 \n 类型 \n 必填 \n 描述 \n \n \n \n \n data \n Object \n 是 \n 要改变的数据 \n \n \n callback \n Function \n 否 \n setData引起的界面更新渲染完毕后的回调函数 \n \n \n \n 说明： \n \n Object 以 key: value 的形式表示，将 this.data 中的 key 对应的值改变成 value ； key 可以以 数据路径 的形式给出，支持改变数组中的某一项或对象的某个属性，如 array[2].message 、 a.b.c.d ，并且不需要在 this.data 中预先定义； \n 直接修改 this.data 而不用 this.setData(Object[, callback]) 是无法改变页面状态的，还会造成数据不一致； \n 不要把 data 中的任何一项的 value 设为 undefined ,否则会有一些潜在的问题； \n data 的键名必须遵守camelCase(驼峰式)命名规范， 不得 使用kebab-case(短横线隔开式)规范。 \n 仅支持设置可JSON化的数据 \n 模块化 \n 可以将一些公共的代码抽离成为一个单独的 js 文件，作为一个模块。模块可以通过 module.exports、exports 或者 export 对外暴露接口，使用 require 或者 import 进行导入。 \n AOP \n \n AOP.after \n \n App.after 可以增加 APP 级的切面，触发的时机是在所拦截的对应生命周期方法执行之后。 \n 方法参数：Object \n \n \n \n 属性名 \n 类型 \n 必填 \n 说明 \n \n \n \n \n methods \n Object \n 否 \n 所有需要拦截的生命周期方法的合集 \n \n \n \n 可拦截的所有方法： \n \n onLaunch \n onShow \n onHide \n onError \n onPageNotFound \n \n // app.js \n App ( { \n     onShow ( )   { \n        console . log ( \'normal onShow\' ) ; \n     } \n } ) ; \n\nApp . after ( { \n    methods :   { \n         onShow ( )   { \n            console . log ( \'after app onshow\' ) ; \n         } \n     } \n } ) ; \n /**\n * 打印结果\n * normal onShow\n * after app onshow\n */ \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 \n Page.after \n \n Page.after 可以增加 Page 级的切面，触发的时机是在所拦截的对应生命周期方法执行之后，也可以拦截所有页面上发生的事件（对于要拦截的事件，在 swan 文件上必须显示绑定了相应事件）。 \n 方法参数：Object \n \n \n \n 属性名 \n 类型 \n 必填 \n 说明 \n \n \n \n \n url \n String \n 否 \n 要增加切面的页面的URL规则，当URL参数不填时，则默认拦截所有页面 \n \n \n methods \n Object \n 否 \n 所有要拦截的生命周期方法的集合 \n \n \n events \n Object \n 否 \n 所有要拦截的事件的集合 \n \n \n \n 可以拦截的所有方法： \n \n onLoad \n onReady \n onShow \n onHide \n onUnload \n onForceReLaunch \n onPullDownRefresh \n onReachBottom \n onPageScroll \n onTabitemTap \n onURLQueryChange \n \n 代码示例： \n // 为url中含有page/index的page实例增加切面 \nPage . after ( { \n\n    url :   / pages\\/index / ,      //正则 \n\n     // 拦截页面中的生命周期onShow \n    methods :   { \n         onShow ( context )   { \n            console . log ( \'message after normal show function\' ) ; \n         } \n     } , \n\n     // 拦截页面中，属性有data-tag="1"的节点的tap事件 \n    events :   { \n         \'[data-tag="1"]:tap\' :   function   ( context )   { \n            console . log ( \'message after a tag is tapped\' ) ; \n         } \n     } \n } ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 \n swan.after \n \n swan.after 可以拦截所有当前运行小程序对于 API 的调用，默认传入function时，只在 API 函数调用的返回阶段拦截。如果传入 Object，则可以选择拦截的阶段（例如: 返回阶段、回调调用阶段）。 \n 方法参数：Object \n \n \n \n 属性名 \n 类型 \n 必填 \n 说明 \n \n \n \n \n [key] \n String \n 否 \n 要拦截的API名称 \n \n \n [value] \n Object/Function \n 否 \n 拦截之后的处理器(如果为function,则默认在returning阶段调用) \n \n \n \n API文档中所有swan调用均可以拦截。 \n 代码示例： \n swan . after ( { \n     // 默认在returning阶段进行拦截 \n     showToast : function ( context )   { \n        console . log ( context ) ; \n        console . log ( \'swan after\' ) ; \n     } \n    \n     // 可以拦截success返回，fail返回，与returning \n    showToast :   { \n         success ( )   { \n            console . log ( \'swan after success\' ) ; \n         } , \n         fail ( )   { \n            console . log ( \'swan after fail\' ) ; \n         } , \n         returning ( )   { \n            console . log ( \'swan after returning\' ) ; \n         } \n     } \n } ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 #  页面声明周期 \n 原理图 \n \n \n FCP：First Contentful Paint ，即首次有内容的绘制 \n FMP：First Meaningful Paint ，即首次有意义的绘制 \n \n 下列加载时间线屏幕截图直观的介绍了FCP与FMP的含义： \n 首页初次渲染全过程 \n \n 初始化：渲染线程和逻辑线程同步的进行初始化，在逻辑线程初始化时收集App和Page的初始化数据，并且执行App.onLaunch回调中的相关逻辑。 \n notify：当渲染线程初始化后，向逻辑线程派发消息，请求获取初始化渲染数据。同时，如果开发者有配置骨架屏，小程序会优先加载骨架屏，此时即为FCP完成。如果骨架屏的高度撑满整个页面，那么我们认为此时为FMP完成，如果骨架屏信息不足以撑满整个屏幕，那么我们认为此次渲染非有效的FMP。 \n setInitData：逻辑线程将初始化渲染数据派发给渲染线程，渲染进程拿到这些初始化数据后，会初始化页面及自定义组件，最后将所有内容渲染到页面上。 \n setData：逻辑线程触发以上生命周期后，逻辑层一般执行了众多的setData，每次setData均会使得逻辑线程向渲染线程传送数据，引起页面的重新渲染。其中首次的setData，是在逻辑线程达到Inited状态后，将业务相关的数据通过setData发送到渲染线程，触发渲染线程Rerender，并可以触发FMP。 \n 参考文章 \n \n 百度小程序官网 \n \n ',summary:"\n背景\n\n出于兴趣和业务需要的双重要求，开始学习一下百度智能小程序的开发。本文侧重原生百度小程序的学习，后续会涉及到小程序框架okam的学习。\n\n简介\n\n智能小程序，是百度提供的一种技术解决方案。开发者基于此开发出来的服务，在各类宿主环境（手机 App、车载系统、IOT 设备等）中，可做到用户无感知安装过程即点即用。\n\n小程序使用了双线程模型,包括逻辑层和渲染层。逻辑层作为一个单独的线程执行js代码，控制小程序数据的生成和处理；渲染层使用WebView线程，处理页面的渲染和用户的事件交互行为。\n\n基本原理\n\n概览\n\n小程序开发包括全局配置文件、页面配置文件。开发者可通过app.json和app ...",id:"post",pid:"post",readingTime:{text:"15 min read",minutes:14.87,time:892199.9999999999,words:2974}},{title:"漫话：如何给女朋友解释为什么计算机中 0.2 + 0.1 不等于 0.3 ？",frontmatter:{title:"漫话：如何给女朋友解释为什么计算机中 0.2 + 0.1 不等于 0.3 ？",description:"漫话：如何给女朋友解释为什么计算机中 0.2 + 0.1 不等于 0.3 ？",date:"2021-03-29",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210329171827.png",tags:["转载"],meta:[{name:"title",content:"漫话：如何给女朋友解释为什么计算机中 0.2 + 0.1 不等于 0.3 ？"},{name:"description",content:"漫话：如何给女朋友解释为什么计算机中 0.2 + 0.1 不等于 0.3 ？"},{name:"keywords",content:"0.2 + 0.1 不等于 0.3"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2021-03-29-float-double.html",relativePath:"_posts/2021-03-29-float-double.md",key:"v-112d3ec4",path:"/2021/03/29/float-double/",headers:[{level:2,title:"背景",slug:"背景"},{level:2,title:"正文",slug:"正文"},{level:3,title:"十进制转二进制",slug:"十进制转二进制"},{level:3,title:"不是所有数都能用二进制表示",slug:"不是所有数都能用二进制表示"},{level:3,title:"IEEE 754",slug:"ieee-754"},{level:3,title:"避免丢失精度",slug:"避免丢失精度"},{level:2,title:"参考文章",slug:"参考文章"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:' 漫话：如何给女朋友解释为什么计算机中 0.2 + 0.1 不等于 0.3 ？ \n 背景 \n 关于在计算机中 0.1 + 0.2 为什么不等于 0.3这个问题，以前确实很好奇。但是由于一些不可抗力(懒)一直没有去深挖下去。近日，偶然发现一篇文章 漫话：如何给女朋友解释为什么计算机中 0.2 + 0.1 不等于 0.3 ？ ,通过漫画的形式对这个问题做了解释，醍醐灌顶，遂转载至博客。对其作者表示感谢。 \n 下面时正文。 \n 正文 \n \n \n \n \n \n \n \n \n \n \n \n \n 为什么当我们使用电脑浏览器计算0.2+0.1的时候，解决却是0.30000000000000004，而0.1+0.6的结果却是0.7呢？ \n 这个问题其实一直是一个经典的问题，甚至有一个网站的域名就是 https://0.30000000000000004.com/  ，主要就是解释这个问题的。 \n 在这个网站中，列举了各种编程语言中计算0.2+0.1的结果，摘选几个如下： \n \n \n 可以看到，在各种语言中，计算0.2+0.1的结果都出奇的一致，那就是这个神奇的0.30000000000000004。 \n 其实，当我们使用浏览器的控制台（F12）进行计算的时候，用到的就是JavaScript语言进行计算的，所以，前面的现象，归根结底其实和具体的编程语言无关。 \n 主要问题还是计算机中到底是如何表示小数以及如何进行小数运算的。 \n \n \n 我们知道，计算机只认识0和1  [为什么计算机只认识0和1] ，现实世界中的内容想要通过计算机存储、计算或者展示，都需要转换2进制。在现实世界中，数字主要有整数和小数两种。 \n 在之前的 [为什么计算机用补码存储数据] 这篇文章中，我们介绍过，计算机中表示整数的方式有很多，如原码、反码以及补码等。 \n 整数包括正整数、负整数以及零。在计算机中存储的整数则分为有符号数和无符号数。 \n 对于无符号数，采用哪种编码方式都无所谓，对于有符号数的编码方式，常用的是补码。 \n 那么，一个十进制数字想要获得其二进制的补码，需要先通过一定的算法得到他对应的原码。 \n \n \n 反码是基于原码计算得来的，表示方式是：正数的反码是其本身。负数的反码是在其原码的基础上, 符号位不变，其余各个位取反。 \n \n 如，10 的 原码为 0 1010 ，那么他的反码同样也是 0 1010 。 \n 如，-2 的原码为 1 0010 ，那么他的反码为 1 1101 。 \n \n 补码是在原码和反码的基础上衍生出来的，补码的表示方法是：正数的补码就是其本身，负数的补码是在其原码的基础上， 符号位不变， 其余各位取反，最后+1。(即在反码的基础上+1) \n \n 使用补码的原因： \n \n 计算机的运算器为了实现简单，倾向于在运算过程中将减法转换成加法，统一使用加法运算器进行计算。想要把减法转化成加法运算，就需要在运算时带着符号一起运算，而反码和补码可以带符号位一起运算，也就方便了将减法转换为加法。 \n 采用补码，可以解决编码中有+0和-0两种表示0的方式。 \n 十进制转二进制 \n 首先我们看一下，如何把十进制整数转换成二进制整数？ \n 十进制整数转换为二进制整数采用"除2取余，逆序排列"法。 \n 具体做法是： \n \n 用2整除十进制整数，可以得到一个商和余数； \n 再用2去除商，又会得到一个商和余数，如此进行，直到商为小于1时为止 \n 然后把先得到的余数作为二进制数的低位有效位，后得到的余数作为二进制数的高位有效位，依次排列起来。 \n \n 如，我们想要把127转换成二进制，做法如下： \n \n 那么，十进制小数转换成二进制小数，又该如何计算呢？ \n 十进制小数转换成二进制小数采用"乘2取整，顺序排列"法。 \n 具体做法是： \n \n 用2乘十进制小数，可以得到积 \n 将积的整数部分取出，再用2乘余下的小数部分，又得到一个积 \n 再将积的整数部分取出，如此进行，直到积中的小数部分为零，此时0或1为二进制的最后一位。或者达到所要求的精度为止。 \n \n \n 所以，十进制的0.625对应的二进制就是0.101。 \n 不是所有数都能用二进制表示 \n 我们知道了如何将一个十进制小数转换成二进制，那么是不是计算就可以直接用二进制表示小数了呢？ \n 前面我们的例子中0.625是一个特列，那么还是用同样的算法，请计算下0.1对应的二进制是多少？ \n \n 我们发现，0.1的二进制表示中出现了无限循环的情况，也就是(0.1)10 = (0.000110011001100…)2 \n 这种情况，计算机就没办法用二进制精确的表示0.1了。 \n 也就是说，对于像0.1这种数字，我们是没办法将他转换成一个确定的二进制数的 。 \n IEEE 754 \n 为了解决部分小数无法使用二进制精确表示的问题，于是就有了IEEE 754规范。 \n IEEE二进制浮点数算术标准（IEEE 754）是20世纪80年代以来最广泛使用的浮点数运算标准，为许多CPU与浮点运算器所采用。 \n \n 浮点数和小数并不是完全一样的，计算机中小数的表示法，其实有定点和浮点两种。因为在位数相同的情况下，定点数的表示范围要比浮点数小。所以在计算机科学中，使用浮点数来表示实数的近似值。 \n \n IEEE 754规定了四种表示浮点数值的方式：单精确度（32位）、双精确度（64位）、延伸单精确度（43比特以上，很少使用）与延伸双精确度（79比特以上，通常以80位实现）。 \n 其中最常用的就是32位单精度浮点数和64位双精度浮点数。 \n IEEE并没有解决小数无法精确表示的问题，只是提出了一种使用近似值表示小数的方式，并且引入了精度的概念 。 \n 浮点数是一串0和1构成的位序列(bit sequence)，从逻辑上用三元组{S,E,M}表示一个数N,如下图所示： \n \n \n S(sign)表示N的符号位。对应值s满足：n>0时，s=0; n≤0时，s=1。 \n E(exponent)表示N的指数位，位于S和M之间的若干位。对应值e值也可正可负。 \n M(mantissa)表示N的尾数位，恰好，它位于N末尾。M也叫有效数字位（significand）、系数位（coefficient）, 甚至被称作"小数"。 \n \n 则浮点数N的实际值n由下方的式子表示： \n \n 上面这个公式看起来很复杂，其中符号位和尾数位还比较容易理解，但是这个指数位就不是那么容易理解了。 \n 其实，大家也不用太过于纠结这个公式，大家只需要知道对于单精度浮点数，最多只能用32位字符表示一个数字，双精度浮点数最多只能用64位来表示一个数字。 \n 而对于那些无限循环的二进制数来说，计算机采用浮点数的方式保留了一定的有效数字，那么这个值只能是近似值，不可能是真实值 。 \n 至于一个数对应的IEEE 754浮点数应该如何计算，不是本文的重点，这里就不再赘述了，过程还是比较复杂的，需要进行对阶、尾数求和、规格化、舍入以及溢出判断等。 \n 但是这些其实不需要了解的太详细，我们只需要知道，小数在计算机中的表示是近似数，并不是真实值。根据精度不同，近似程度也有所不同。 \n 如0.1这个小数，他对应的在双精度浮点数的二进制为：0.00011001100110011001100110011001100110011001100110011001 。 \n 0.2这个小数0.00110011001100110011001100110011001100110011001100110011 。 \n 所以两者相加： \n \n 转换成10进制之后得到：0.30000000000000004！ \n 避免丢失精度 \n 在Java中，使用float表示单精度浮点数，double表示双精度浮点数，表示的都是近似值。 \n 所以，在Java代码中，千万不要使用float或者double来进行高精度运算，尤其是金额运算，否则就很容易产生资损问题。 \n 为了解决这样的精度问题，Java中提供了BigDecimal来进行精确运算。 \n 参考文章 \n \n 漫话：如何给女朋友解释为什么计算机中 0.2 + 0.1 不等于 0.3 ？ \n Is floating point math broken?\n \n \n ',summary:"\n背景\n\n关于在计算机中 0.1 + 0.2 为什么不等于 0.3这个问题，以前确实很好奇。但是由于一些不可抗力(懒)一直没有去深挖下去。近日，偶然发现一篇文章漫话：如何给女朋友解释为什么计算机中 0.2 + 0.1 不等于 0.3 ？,通过漫画的形式对这个问题做了解释，醍醐灌顶，遂转载至博客。对其作者表示感谢。\n\n下面时正文。\n\n正文\n\n为什么当我们使用电脑浏览器计算0.2+0.1的时候，解决却是0.30000000000000004，而0.1+0.6的结果却是0.7呢？\n\n这个问题其实一直是一个经典的问题，甚至有一个网站的域名就是https://0.30000000000000004.co ...",id:"post",pid:"post",readingTime:{text:"1 min read",minutes:.965,time:57900,words:193}},{title:"AST实现函数自动包裹try/catch",frontmatter:{title:"AST实现函数自动包裹try/catch",description:"AST实现函数自动包裹try/catch",date:"2021-04-10",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210407135526.jpg",tags:["AST","babel"],meta:[{name:"title",content:"AST实现函数自动包裹try/catch"},{name:"description",content:"AST实现函数自动包裹try/catch"},{name:"keywords",content:"AST"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2021-04-10-AST.html",relativePath:"_posts/2021-04-10-AST.md",key:"v-11d81cbe",path:"/2021/04/10/ast/",headers:[{level:2,title:"背景",slug:"背景"},{level:2,title:"实现效果",slug:"实现效果"},{level:2,title:"AST是什么",slug:"ast是什么"},{level:3,title:"AST工作流程",slug:"ast工作流程"},{level:2,title:"babel是什么",slug:"babel是什么"},{level:2,title:"开发工具介绍",slug:"开发工具介绍"},{level:2,title:"环境搭建",slug:"环境搭建"},{level:2,title:"调试",slug:"调试"},{level:3,title:"创建try/catch节点",slug:"创建try-catch节点"},{level:3,title:"边界条件",slug:"边界条件"},{level:3,title:"loader",slug:"loader"},{level:3,title:"使用",slug:"使用"},{level:2,title:"测试",slug:"测试"},{level:2,title:"最后",slug:"最后"},{level:2,title:"参考文章",slug:"参考文章"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" AST实现函数自动包裹try/catch \n 背景 \n 看到一篇关于AST的文章，关于如何通过AST自动给函数包裹try/cache，实现错误的自动捕获上报。感觉真的好玩，以前对AST了解的也不多，于是参考该文章自己实现了一下，并且发npm包，在实际项目中使用并验证。写此文记一下。 \n 文章主要参考 哈罗出行-杭州团队：AST实现函数错误的自动上报 、 Alibaba F2E团队：用JS解释JS！详解AST及其应用 ，还查阅 babel 官方网站的一下API。 \n 在此对这些优秀的FE团队表示感谢。 \n \n 真是一个伟大的时代。 \n \n 下面是正文。 \n 实现效果 \n 开发环境： \n var   fn   =   function ( )   { \n    console . log ( 'hello, world' ) ; \n } \n \n 1 2 3 线上环境 \n var fn = function() {\n +    try {\n          console.log('hello, world');\n +    } catch(error) {\n +        console.log(`${custom-error-info}`, error);\n +    }\n }\n \n 1 2 3 4 5 6 7 \n custom-error-info是在loader的options中自定义的错误提示信息。 \n AST是什么 \n 百度百科对AST的解释是：在计算机科学中， 抽象语法树 （Abstract Syntax Tree， AST ），或简称语法树（Syntax tree），是源代码语法结构的一种抽象表示。 它以树状的形式表现编程语言的语法结构，树上的每个节点都表示源代码中的一种结构 。 \n 当我们查看目前主流的项目中的 devDependencies，会发现各种各样的模块工具。归纳一下有：JavaScript转译、css预处理器、elint、pretiier 等等。这些模块我们不会在生产环境用到，但它们在我们的开发过程中充当着重要的角色，而所有的上述工具，都建立在 AST 的基础上。 \n AST工作流程 \n \n \n parse：把代码解析为AST \n transform：对AST中的各个节点做相关操作，如新增、删除、替换、追加。业务开发的95%的代码都在这里 \n generator：把AST转换为代码 \n \n AST辅助开发工具： AST explore \n function   square ( num )   { \n\t return  num  *  num ; \n } \n \n 1 2 3 上面这段代码解析为AST： \n babel是什么 \n Babel 是JS编译器，主要用于将 ECMAScript 2015+ 版本的代码转换为向后兼容的 JavaScript 语法，以便能够运行在当前和旧版本的浏览器或其他环境中。 \n 此外它还拥有众多模块可用于不同形式的静态分析。 \n \n 静态分析是在不需要执行代码的前提下对代码进行分析的处理过程 （执行代码的同时进行代码分析即是动态分析）。 静态分析的目的是多种多样的， 它可用于语法检查，编译，代码高亮，代码转换，优化，压缩等等场景。 \n \n 简单说就是从一种源码到另一种源码的编辑器！下面列出的是 Babel 能为你做的事情: \n \n 语法转换 \n 通过 Polyfill 方式在目标环境中添加缺失的特性 (通过 @babel/polyfill 模块) \n 源码转换 (codemods) \n \n Babel 的三个主要处理步骤分别是：  解析（parse），转换（transform），生成（generate） 。 \n 这个处理过程中的每一步都涉及到创建或是操作抽象语法树。 \n 本文将写一个Bable Plugin的npm包，用于编译时将代码进行改造，为函数自动包裹try/catch, 实现错误捕获。 \n 开发工具介绍 \n 前面说过Babel的运行主要分3个阶段：解析、转换、生成。每个阶段Babel官方都提供了核心的lib： \n \n \n @babel/core \n Babel的核心库，提供了将代码编译转化的能力。 \n \n \n @babel/paerse \n 通过 babel/parser 将源代码转为 AST，简单形象。 \n \n \n @babel/types \n Babel Types模块是一个用于 AST 节点的 Lodash 式工具库（译注：Lodash 是一个 JavaScript 函数工具库，提供了基于函数式编程风格的众多工具函数）， 它包含了构造、验证以及变换 AST 节点的方法。 该工具库包含考虑周到的工具方法，对编写处理AST逻辑非常有用。 \n \n \n @babel/template \n babel-template 是另一个虽然很小但却非常有用的模块。它能让你编写字符串形式且带有占位符的代码来代替手动编码，尤其是生成的大规模 AST的时候。 在计算机科学中，这种能力被称为准引用（quasiquotes）。@bable/types 可以创建 ast 节点，但过于繁琐，通过 @babel/template 则可以快速创建整段的 ast 节点。 \n \n \n @babel/generator \n Babel Generator模块是 Babel 的代码生成器，它读取AST并将其转换为代码和源码映射（sourcemaps）。 \n \n \n @babel/traverse \n Babel Traverse（遍历）模块维护了整棵树的状态，并且负责替换、移除和添加节点。95% 以上的代码量都是通过  @babel/traverse  在写 visitor。 \n visitor 的第一个参数是 path，path 不直接等于 node（节点），path 的属性和重要方法组成如下： \n \n \n \n \n 详细的API和option可以参考 babel官网 \n 环境搭建 \n 我们最终打算要发一个npm包，所以执行命令如下： \n //初始化npm项目\n npm  init --yes\n//创建.npmignore,过滤部分不打算发布的文件\n touch  .npmignore\n//安装依赖\n npm  i @babel/core @babel/parser babel-traverse @babel/template babel-types -S\n \n 1 2 3 4 5 6 此时目录结构为： \n .\n├── .npmignore\n├── node_modules\n├── package-lock.json\n└── package.json\n \n 1 2 3 4 5 \n 另外关于 .npmignore \n npm publish 的时候会把项目目录里面所有的文件都publish到npm仓库中， 但是往往有一部分目录和文件不想发布上去，比如项目的源码、编译脚本等等信息。 \n 可以使用 .gitignore 来设置忽略哪些文件，在git代码管理和 npm publish 都会忽略。 \n 也可以使用 .npmignore ，写法和 .gitignore 写法一致。如果同时使用了 .gitignore 和 .npmignore ,只有 .npmignore 会生效，优先级较高。 \n 或者在 package.json 中的 file 字段设置发布哪些文件或者目录。这个优先级高于 .npmignore 和 .gitignore 。 \n \n 参考 npm doc package.json#file \n \n 另外 npm publish 默认的忽略规则： \n \n .git \n CVS \n .svn \n .hg \n .lock-wscript \n .wafpickle-N \n .DS_Store \n npm-debug.log \n .npmrc \n node_modules \n config.gypi \n package-lock.json \n All files containing a * character \n \n 默认包含，忽略文件无效的： \n \n package.json \n README \n CHANGES / CHANGELOG / HISTORY \n LICENSE / LICENCE \n NOTICE \n The file in the \"main\" field \n 调试 \n 新建一个 index.js 文件并编辑： \n const  parse  =   require ( '@babel/parser' ) ; \n\n let  source  =   ` let fn = function() {\n    console.log('hello, world');\n} ` \n // 1. 解析 \n let  ast  =  parse . parse ( source ,   { \n    sourceType :   'module' , \n    plugins :   [ \"dynamicImport\" ] \n } ) ; \n\nconsole . log ( ast ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 终端执行 node index.js 后会打印出： \n \n 这是函数fn对应的ast，第一步解析完成。 \n 然后我们要使用 babel-traverse 来遍历对应的AST节点,我们想要寻找所有的 function 表达可以写在 FunctionExpression 中： \n const parse = require('@babel/parser');\n +  const traverse = require('babel-traverse').default;\n \nlet source = `let fn = function() {\n      console.log('hello, world');\n }`\n// 1. 解析\nlet ast = parse.parse(source, {\n      sourceType: 'module',\n      plugins: [\"dynamicImport\"]\n });\n\n// 2、遍历\n +  traverse(ast, {\n +    FunctionExpression(path) { // 函数表达式节点\n +      // do some stuff\n +    },\n +  });\n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 \n 这是一个简单的访问者(visitor)，把它用于遍历中时，每当在树中遇见一个 FunctionExpression 的时候会调用 FunctionExpression() 方法。 \n \n 所有函数表达式都会走到 FunctionExpression 中，然后我们可以在里面对其进行修改。\n其中参数 path 用于访问到当前的节点信息 path.node，也可以像 DOM 树访问到父节点的方法 path.parent。 \n 接下来要做的是在 FunctionExpression 中去劫持函数的内部代码，然后将其放入 try 函数内，并且在 catch 内加入自定义错误信息的代码段。 \n 上面定义的函数是： \n let   fn   =   function ( )   { \n    console . log ( 'hello, world' ) ; \n } \n \n 1 2 3 我们可以使用 path 拿到这段代码的 AST 信息，如下： \n const parser = require(\"@babel/parser\");\nconst traverse = require(\"babel-traverse\").default;\n\nlet source = `let fn = function() {\n      console.log('hello, world');\n }`\n\n// 1、解析\nlet ast = parser.parse(source, {\n    sourceType: \"module\",\n    plugins: [\"dynamicImport\"]\n });\n\n// 2、遍历\ntraverse(ast, {\n    FunctionExpression(path, state) { // 函数表达式会进入当前方法\n +     // 获取函数当前节点信息\n +     let node = path.node,\n +         params = node.params,\n +         blockStatement = node.body,\n +         isGenerator = node.generator,\n +         isAsync = node.async;\n \n +     // 可以尝试打印看看结果\n +     console.log('node:', node);\n +     console.log('params:', params);\n +     console.log('blockStatement', blockStatement);\n    }，\n });\n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 终端执行 node index.js 可打印出当前函数的AST节点信息。 \n 创建try/catch节点 \n 在文章 AST实现函数错误的自动上报 中给出了创建节点的一些作者的个人经验，很受用。 \n \n 首先需要知道当前新增代码段它的声明是什么，然后使用 @babel-types 去创建即可。 \n \n 个人理解所谓“新增代码段的声明”指的应该是代码段在AST节点中的type类型。 \n \n \n 第一步：那么我们如何知道它的表达声明type是什么呢？这里我们可以 使用 astexplorer 查找它在 AST 中 type 的表达。\n \n如上截图得知，try/catch 在 AST 中的 type 就是  TryStatement ！ \n \n \n 第二步 \n 然后去  @babel-types  官方文档查找对应方法，根据 API 文档来创建即可。 \n \n 如文档所示，创建一个 try/catch 的方式使用 t.tryStatement(block, handler, finalizer)。 \n \n \n 创建新的ast节点一句话总结： 使用 astexplorer 查找你要生成的代码的 type，再根据 type 在  @babel-types  文档查找对应的使用方法使用即可！ \n 那么创建try/catch只需要使用 t.tryStatement(block, handler, finalizer) 即可。 \n \n block(type:blockStatement), 表示 try 中的函数代码块，即原先函数 body 内的代码  {console.log('hello, world')} ，可以直接用 path.node.body 获取； \n handler(type:CatchClause), 表示 catch 代码块，即我们想要去改造进行错误信息自定义的代码，可以使用  @babel/template  去生成。 \n finalizer(type:BlockStatement), 表示 finally 代码块。 \n \n 代码示例如下： \n const parse = require('@babel/parser');\nconst traverse = require('babel-traverse').default;\nconst template = require('@babel/template');\nconst t = require('babel-types');\n\nlet source = `let fn = function() {\n      console.log('hello, world');\n }`\n\n// 1. 解析\nlet ast = parse.parse(source, {\n      sourceType: 'module',\n      plugins: [\"dynamicImport\"]\n });\n\n// 2. 遍历\ntraverse(ast, {\n      FunctionExpression(path) {\n          let node = path.node,\n              params = node.params,\n              blockStatement = node.body,\n              isGenerator = node.generator,\n              isSync = node.async;\n \n          //创建 catch 节点中的代码\n +        let cacheStatement = template.statement(`console.log('Error 0.0', error)`)();\n +        let cacheClause = t.catchClause(\n +            t.identifier('error'),\n +            t.blockStatement([cacheStatement])\n +        );\n \n +        // 创建 try/catch 的 ast\n +        let tryStatement = t.tryStatement(blockStatement, cacheClause);\n     }\n });\n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 创建新函数节点，并将上面定义好的 try/catch 塞入函数体： \n const parse = require('@babel/parser');\nconst traverse = require('babel-traverse').default;\nconst template = require('@babel/template');\nconst t = require('babel-types');\n\nlet source = `let fn = function() {\n      console.log('hello, world');\n }`\n\n// 1. 解析\nlet ast = parse.parse(source, {\n      sourceType: 'module',\n      plugins: [\"dynamicImport\"]\n });\n\n// 2. 遍历\ntraverse(ast, {\n      FunctionExpression(path) {\n          let node = path.node,\n              params = node.params,\n              blockStatement = node.body,\n              isGenerator = node.generator,\n              isSync = node.async;\n \n          //创建 catch 节点中的代码\n         let cacheStatement = template.statement(`console.log('Error 0.0', error)`)();\n         let cacheClause = t.catchClause(\n             t.identifier('error'),\n             t.blockStatement([cacheStatement])\n         );\n \n         // 创建 try/catch 的 ast\n         let tryStatement = t.tryStatement(blockStatement, cacheClause);\n         \n         //创建新节点\n +       let func = t.functionExpression(node.id, params, t.blockStatement([tryStatement]), isGenerator, isAsync);\n +        console.log('func: ', func);\n +        console.log('func.body: ', func.body);\n     }\n });\n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 在终端执行 node index.js , 可打印节点信息： \n \n 可以看到此时我们在一个函数表达式 body 中创建了一个 try 函数（TryStatement）。 \n 最后我们需要把原来的函数节点进行替换： \n const parse = require('@babel/parser');\nconst traverse = require('babel-traverse').default;\nconst template = require('@babel/template');\nconst t = require('babel-types');\n +  const core = require('@babel/core');\n \nlet source = `let fn = function() {\n      console.log('hello, world');\n }`\n\n// 1. 解析\nlet ast = parse.parse(source, {\n      sourceType: 'module',\n      plugins: [\"dynamicImport\"]\n });\n\n// 2. 遍历\ntraverse(ast, {\n      FunctionExpression(path) {\n          let node = path.node,\n              params = node.params,\n              blockStatement = node.body,\n              isGenerator = node.generator,\n              isSync = node.async;\n \n          //创建 catch 节点中的代码\n         let cacheStatement = template.statement(`console.log('Error 0.0', error)`)();\n         let cacheClause = t.catchClause(\n             t.identifier('error'),\n             t.blockStatement([cacheStatement])\n         );\n \n         // 创建 try/catch 的 ast\n         let tryStatement = t.tryStatement(blockStatement, cacheClause);\n         \n         //创建新节点\n        let func = t.functionExpression(node.id, params, t.blockStatement([tryStatement]), isGenerator, isAsync);\n        \n +      path.replaceWith(func);\n     }\n });\n//将新生成的AST转换为Source源码\n +  return core.transformFromAstSync(ast, null, {\n +    configFile: false\n +  }).code\n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 #  边界条件 \n 我们并不需要给所有的函数添加try/catch，因此我们还需要处理一些边界条件： \n \n 如果已经有 try/catch 包裹 \n 需要 try catch 的只能是语句，像 () => 0 这种的 body \n 函数内容小于行数 \n \n 满足以上条件return掉； \n \n \n 图中未体现：const LIMIT_LINE = 0; \n loader \n loader 是导出为一个函数的 node 模块。该函数在 loader 转换资源的时候调用。因此，我们基本可以写成这个样子： \n module . exports   =   function ( source ) { \n     //... \n } \n \n 1 2 3 \n 最后我们发布 npm平台 \n 使用 \n 首先安装： \n npm i babel-plugin\n \n 1 webpack.config.js配置: \n \n 让我们的loader来接受 babel-loader 的输出。 \n 并且可以通过 options 来自定义错误提示信息。这个可以通过 loader 工具库(Loader Utilities) 来获取options对象。 \n 在代码修改如下： \n const parse = require('@babel/parser');// 解析source为AST\nconst traverse = require('babel-traverse').default;// 遍历AST\nconst template = require('@babel/template');// 将普通的字符串转化为AST，提供更便捷的使用\nconst t = require('babel-types'); // 提供AST树节点的类型（215种）\nconst core = require('@babel/core');// Babel 的核心库，提供了将代码编译转化的能力。\n\n +  const { getOptions } = require('loader-utils');\n \nconst LIMIT_LINE = 0;\nmodule.exports = function (source) {\n\n +    const info = getOptions(this).errInfo || 'default error info';\n \n      // 1. 解析\n      let ast = parse.parse(source, {\n          sourceType: 'module',\n          plugins: [\"dynamicImport\"]\n      });\n \n      // 2. 遍历\n      traverse(ast, {\n          FunctionExpression(path) {\n              //...\n \n              //创建 catch 节点中的代码\n +            let cacheStatement = template.statement(`console.log('${info}', error)`)();\n              let cacheClause = t.catchClause(\n                  t.identifier('error'),\n                  t.blockStatement([cacheStatement])\n              );\n \n              // 创建 try/catch 的 ast\n              let tryStatement = t.tryStatement(blockStatement, cacheClause);\n \n              let func = t.functionExpression(node.id, params, t.blockStatement([tryStatement]), isGenerator, isSync);\n              path.replaceWith(func);\n          }\n      });\n \n      return core.transformFromAstSync(ast, null, {\n          configFile: false\n      }).code\n };\n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 #  测试 \n 可再写一个简单的loader来接收 babel-plugin 的输出。并且在这个loader中把 babel-plugin 的输出打印出来。 \n //loader/print.js \nmodule . exports   =   function ( params )   { \n    console . log ( '<=======up========>' ) ; \n    console . log ( params ) ; \n    console . log ( '<========down=======>' ) ; \n     return  params ; \n } \n \n 1 2 3 4 5 6 7 \n 输出如下： \n \n 可见 babel-plugin 生效。 \n 最后 \n 感觉还有很多要去了解的，AST、babel、loader等。这次算开启了新的大门，AST真的强大，日后可以刻意的去练习。真是 \n 路漫漫其修远兮，吾将上下而求索。 \n 加油～～ \n 参考文章 \n \n AST实现函数错误的自动上报 \n 用JS解释JS！详解AST及其应用 \n npm包本地开发和调试 \n 编写一个loader \n Babel插件手册 \n babel官方网站 \n \n ",summary:"\n背景\n\n看到一篇关于AST的文章，关于如何通过AST自动给函数包裹try/cache，实现错误的自动捕获上报。感觉真的好玩，以前对AST了解的也不多，于是参考该文章自己实现了一下，并且发npm包，在实际项目中使用并验证。写此文记一下。\n\n文章主要参考哈罗出行-杭州团队：AST实现函数错误的自动上报、Alibaba F2E团队：用JS解释JS！详解AST及其应用，还查阅babel官方网站的一下API。\n\n在此对这些优秀的FE团队表示感谢。\n\n>真是一个伟大的时代。\n\n下面是正文。\n\n实现效果\n\n开发环境：\n\nvar fn = function() {\n    console.log('hell ...",id:"post",pid:"post",readingTime:{text:"6 min read",minutes:5.665,time:339900,words:1133}},{title:"How JavaScript works - inside the V8 engine + 5 tips on how to write optimized code",frontmatter:{title:"How JavaScript works - inside the V8 engine + 5 tips on how to write optimized code",description:"How Javascript works",date:"2021-04-13",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqs/blogImage/raw/master/blogImage/20201217171505.png",tags:["翻译","转载","JavaScript"],meta:[{name:"title",content:"Javascript工作原理：如何在 V8 引擎中书写最优代码的 5 条小技巧"},{name:"description",content:"Javascript工作原理：如何在 V8 引擎中书写最优代码的 5 条小技巧"},{name:"keywords",content:"Javascript工作原理"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2021-04-13-how-javascript-work2.html",relativePath:"_posts/2021-04-13-how-javascript-work2.md",key:"v-69fc2000",path:"/2021/04/13/how-javascript-work2/",headers:[{level:2,title:"Overview",slug:"overview"},{level:2,title:"Why was the V8 Engine created?",slug:"why-was-the-v8-engine-created"},{level:2,title:"V8 used to have two compilers",slug:"v8-used-to-have-two-compilers"},{level:2,title:"Inlining",slug:"inlining"},{level:2,title:"Hidden class",slug:"hidden-class"},{level:2,title:"Inline caching",slug:"inline-caching"},{level:2,title:"Compilation to machine code",slug:"compilation-to-machine-code"},{level:2,title:"Garbage collection",slug:"garbage-collection"},{level:2,title:"Ignition and TurboFan",slug:"ignition-and-turbofan"},{level:2,title:"How to write optimized JavaScript",slug:"how-to-write-optimized-javascript"},{level:2,title:"参考文章",slug:"参考文章"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:' How JavaScript works: inside the V8 engine + 5 tips on how to write optimized code \n \n Javascript工作原理：如何在 V8 引擎中书写最优代码的 5 条小技巧 \n \n Couple of weeks ago we started a series aimed at digging deeper into JavaScript and how it actually works: we thought that by knowing the building blocks of JavaScript and how they come to play together you’ll be able to write better code and apps. \n \n 几周前，我们开始了旨在更深入地研究JavaScript及其工作原理的一系列文章：我们认为，通过了解JavaScript的组成部分以及它们如何一起发挥作用，你将能够编写更好的代码和应用。 \n \n The first post of the series focused on providing an overview of the engine, the runtime and the call stack. This second post will be diving into the internal parts of Google’s V8 JavaScript engine. We’ll also provide a few quick tips on how to write better JavaScript code —best practices our development team at SessionStack follows when building the product. \n \n 该系列的第一篇文章主要介绍了引擎、运行时以及调用栈的概述。第二篇文章将深入探讨Google V8 JavaScript引擎的内部部分。我们还将提供一些有关如何编写更好的JavaScript代码的技巧，这是我们SessionStack开发团队在构建产品时遵循的最佳实践。 \n Overview \n \n 概述 \n \n A  JavaScript engine  is a program or an interpreter which executes JavaScript code. A JavaScript engine can be implemented as a standard interpreter, or just-in-time compiler that compiles JavaScript to bytecode in some form. \n \n JavaScript引擎 是执行JavaScript代码的程序或解释器。JavaScript引擎可以用标准解释器或者即时编译器来实现，即时编译器是以某种形式把JavaScript解释为字节码。 \n \n This is a list of popular projects that are implementing a JavaScript engine: \n \n 这是一组实现JavaScript引擎的热门项目： \n \n \n V8  — open source, developed by Google, written in C++ \n Rhino  — managed by the Mozilla Foundation, open source, developed entirely in Java \n SpiderMonkey  — the first JavaScript engine, which back in the days powered Netscape Navigator, and today powers Firefox \n JavaScriptCore  — open source, marketed as Nitro and developed by Apple for Safari \n KJS  —— KDE\'s engine originally developed by Harri Porten for the KDE project’s Konqueror web browser \n Chakra (JScript9)  —— Internet Explorer \n Chakra (JavaScript)  —— Microsoft Edge \n Nashorn  —— open source as part of OpenJDK, written by Oracle Java Languages and Tool Group \n JerryScript  ——  is a lightweight engine for the Internet of Things. \n \n \n \n v8 —— 开源，由谷歌开发，用C++编写 \n Rhino —— 由 Mozilla 基金会主导，开源的，完全使用 Java 开发 \n SpiderMonkey —— 第一个JavaScript引擎，可追溯到Netscape Navigator时代，如今又为Firefox提供动力 \n JavaScriptCore —— 开源，以 Nitro 的名称来推广，并由苹果为 Safari 开发 \n KJS —— KDE 引擎，起先是由 Harri Porten 为 KDE 工程的 Konqueror 浏览器所开发 \n Chakra (JScript9) —— IE \n Chakra (JavaScript) —— Microsoft Edge \n Nashorn —— 作为OpenJDK的一部分开源，由Oracle Java语言和Tool Group编写 \n JerryScript —— 一个为物联网开发的轻量级引擎 \n Why was the V8 Engine created? \n \n V8引擎的由来 \n \n The V8 Engine which is built by Google is open source and written in C++. This engine is used inside Google Chrome. Unlike the rest of the engines, however, V8 is also used for the popular Node.js runtime. \n \n V8引擎是由谷歌开源并以C++语言编写。Google Chrome内置了这个引擎。然而与其他引擎不同的是，V8引擎也被用于当下流行的Node.js运行时中。 \n \n \n V8 was first designed to increase the performance of JavaScript execution inside web browsers. In order to obtain speed, V8 translates JavaScript code into more efficient machine code instead of using an interpreter. It compiles JavaScript code into machine code at execution by implementing a  JIT (Just-In-Time) compiler  like a lot of modern JavaScript engines do such as SpiderMonkey or Rhino (Mozilla). The main difference here is that V8 doesn’t produce bytecode or any intermediate code. \n \n 起先V8被设计用来提高Web浏览器中JavaScript的执行性能。为了达到更快的执行速度，V8将JavaScript代码转换为更为有效的机器代码，而不是使用解释器。像许多现代JavaScript引擎（例如SpiderMonkey或Rhino（Mozilla））一样，它通过实现JIT（即时）编译器在执行时将JavaScript代码编译为机器代码。这里主要的区别是V8不会产生字节码或任何中间码。 \n V8 used to have two compilers \n \n V8曾经拥有两个编译器 \n \n Before version 5.9 of V8 came out (released earlier this year), the engine used two compilers: \n \n 在V8引擎的5.9版本发布(2017 年初)之前，它拥有两种编译器： \n \n \n full-codegen — a simple and very fast compiler that produced simple and relatively slow machine code. \n Crankshaft — a more complex (Just-In-Time) optimizing compiler that produced highly-optimized code. \n \n \n \n full-codegen —— 一个简单且快速的编译器用来生成简单且运行相对缓慢的机器码。 \n Crankshaft —— 一个更复杂的（即时）优化编译器用来生成了高效的代码。 \n \n \n The V8 Engine also uses several threads internally: \n \n V8引擎内部使用多个线程： \n \n \n The main thread does what you would expect: fetch your code, compile it and then execute it \n There’s also a separate thread for compiling, so that the main thread can keep executing while the former is optimizing the code \n A Profiler thread that will tell the runtime on which methods we spend a lot of time so that Crankshaft can optimize them \n A few threads to handle Garbage Collector sweeps \n \n \n \n 主线程做你期望它做的事情：获取代码，编译代码并且执行 \n 还有一个单独的编译线程，因此主线程可以在编译线程优化代码的同时继续执行 \n 一个用于性能检测的线程会告诉运行时我们在哪个方法上花了太多的时间，以便于让 Crankshaft 来优化这些代码 \n 有几个线程用来处理垃圾回收器的清理工作 \n \n \n When first executing the JavaScript code, V8 leverages full-codegen which directly translates the parsed JavaScript into machine code without any transformation. This allows it to start executing machine code very fast. Note that V8 does not use intermediate bytecode representation this way removing the need for an interpreter. \n \n 当第一次执行 JavaScript 代码的时候，V8 使用 full-codegen 直接把解析的 JavaScript 代码解释为机器码，中间没有任何转换。这使得它一开始非常快速地运行机器码。注意， V8 没有使用中间字节码来表示，这样就不需要解释器了。 \n \n When your code has run for some time, the profiler thread has gathered enough data to tell which method should be optimized. \n \n 当代码已经执行一段时间后，性能检测器线程已经收集了足够多的数据来告诉 Crankshaft 哪个方法可以被优化。 \n \n Next, Crankshaft optimizations begin in another thread. It translates the JavaScript abstract syntax tree to a high-level static single-assignment (SSA) representation called Hydrogen and tries to optimize that Hydrogen graph. Most optimizations are done at this level. \n \n 接下来，在另一个线程中开始进行 Crankshaft 代码优化。它把 JavaScript 抽象语法树转化为一个被称为 Hydrogen 的高级静态单赋值并且试着优化这个 Hydrogen 图表。大多数的代码优化都在这一层完成。 \n Inlining \n \n 内联 \n \n The first optimization is inlining as much code as possible in advance. Inlining is the process of replacing a call site (the line of code where the function is called) with the body of the called function. This simple step allows following optimizations to be more meaningful. \n \n 第一个优化方法即是提前尽可能多地内联代码。内联指的是把调用地址(函数被调用的那行代码)置换为被调用函数的函数体的过程。这个简单的步骤使得接下来的代码优化更有意义。 \n Hidden class \n \n 隐藏类 \n \n JavaScript is a prototype-based language: there are no classes and objects are created using a cloning process. JavaScript is also a dynamic programming language which means that properties can be easily added or removed from an object after its instantiation. \n \n Javascript是基于原型的语言：当进行克隆的时候不会创建类和对象。Javascript也是一门动态编程语言，这意味着在它实例化之后，可以任意地添加或删除对象属性。 \n \n Most JavaScript interpreters use dictionary-like structures ( hash function based ) to store the location of object property values in the memory. This structure makes retrieving the value of a property in JavaScript more computationally expensive than it would be in a non-dynamic programming language like Java or C#. In Java, all of the object properties are determined by a fixed object layout before compilation and cannot be dynamically added or removed at runtime (well, C# has the  dynamic  type which is another topic). As a result, the values of properties (or pointers to those properties) can be stored as a continuous buffer in the memory with a fixed-offset between each. The length of an offset can easily be determined based on the property type, whereas this is not possible in JavaScript where a property type can change during runtime. \n \n 大多数的Javascript解释器使用类字典结构(基于哈希函数)来存储对象属性值的内存地址（即对象的内存地址）。这种结构使得在Javascript中获取属性值要比诸如Java或者C#这种非动态编程语言更耗费时间。在 Java 中，所有的对象属性都在编译前由一个固定的对象布局所决定并且不能够在运行时动态添加或者删除(嗯， C# 拥有动态类型，这是另外一个话题)。因此，属性值(指向这些属性的指针)以连续的缓冲区的形式存储在内存之中，彼此之间有固定的偏移量。偏移量的长度可以基于属性类型被简单地计算出来，然而在 JavaScript 中这是不可能的，因为运行时可以改变属性类型。 \n \n Since using dictionaries to find the location of object properties in the memory is very inefficient, V8 uses a different method instead: hidden classes. Hidden classes work similarly to the fixed object layouts (classes) used in languages like Java, except they are created at runtime. Now, let’s see what they actually look like: \n \n 由于使用字典在内存中寻找对象属性的内存地址是非常低效的，V8 转而使用隐藏类。隐藏类工作原理和 Java 语言中使用的固定对象布局(类)类似，除了它们是在运行时创建的以外。现在，让我们看看他们的样子： \n \n function   Point ( x ,  y )   { \n     this . x  =  x ; \n     this . y  =  y ; \n } \n var  p1  =   new   Point ( 1 ,   2 ) ; \n \n 1 2 3 4 5 Once the “new Point(1, 2)” invocation happens, V8 will create a hidden class called “C0”. \n \n 一旦 "new Point(1,2)" 发生调用，V8 将会创建一个叫做 "C0" 的隐藏类。 \n \n \n No properties have been defined for Point yet, so “C0” is empty. \n \n 因为还没有为类 Point 创建属性，所以 "C0" 是空的。 \n \n Once the first statement “this.x = x” is executed (inside the “Point” function), V8 will create a second hidden class called “C1” that is based on “C0”. “C1” describes the location in the memory (relative to the object pointer) where the property x can be found. In this case, “x” is stored at  offset  0, which means that when viewing a point object in the memory as a continuous buffer, the first offset will correspond to property “x”. V8 will also update “C0” with a “class transition” which states that if a property “x” is added to a point object, the hidden class should switch from “C0” to “C1”. The hidden class for the point object below is now “C1”. \n \n 一旦第一条语句 "this.x = x" 开始执行(在 Point 函数中), V8 将会基于 "C0" 创建第二个隐藏类"C1"。"C1"描述了属性 x 的内存地址(相对于对象指针)。本例中， \'x\' 存储在偏移0中，这意味着当在内存中以连续的缓冲区来查看  Point  对象时，第一个偏移量将会对应着属性 \'x\'。V8将会使用"类转换"来更新"C0",类转换表示如果属性\'x\'被添加到 Point 对象，隐藏类将会从"C0"更新到"C1"。下面的 Point 对象的隐藏类现在是"C1"。 \n \n \n Every time a new property is added to an object, the old hidden class is updated with a transition path to the new hidden class. Hidden class transitions are important because they allow hidden classes to be shared among objects that are created the same way. If two objects share a hidden class and the same property is added to both of them, transitions will ensure that both objects receive the same new hidden class and all the optimized code that comes with it. \n \n 每当对象添加新的属性时，将会使用转换路径来把旧的隐藏类更新为新的隐藏类。隐藏类转换是重要的，因为它们使得以同样方式创建的对象可以共享隐藏类。如果两个对象共享一个隐藏类并且两个对象添加了相同的属性，转换将会确保两个对象收到相同的隐藏类，以及随之而来的相同的代码优化。 \n \n This process is repeated when the statement “this.y = y” is executed (again, inside the Point function, after the “this.x = x” statement). \n \n 当运行"this.y = y"时，会重复相同的过程(还是在 Ponint 函数中，在"this.x = x"语句之后)。 \n \n A new hidden class called “C2” is created, a class transition is added to “C1” stating that if a property “y” is added to a Point object (that already contains property “x”) then the hidden class should change to “C2”, and the point object’s hidden class is updated to “C2”. \n \n 一个被称为"C2"的新的隐藏类将会被创建，一个类转换被添加到"C1"中，表明如果属性\'y\'被添加到 Point 对象中(已经包含\'x\'属性)，那么隐藏类应该更改为"C2",并且 Point 对象的隐藏类会更新为"C2"。 \n \n \n Hidden class transitions are dependent on the order in which properties are added to an object. Take a look at the code snippet below: \n \n 隐藏类转换依赖于属性被添加到对象的 顺序 。看如下的代码片段： \n \n function   Point ( x ,  y )   { \n     this . x  =  x ; \n     this . y  =  y ; \n } \n var  p1  =   new   Point ( 1 ,   2 ) ; \np1 . a  =   5 ; \np1 . b  =   6 ; \n var  p2  =   new   Point ( 3 ,   4 ) ; \np2 . b  =   7 ; \np2 . a  =   8 ; \n \n 1 2 3 4 5 6 7 8 9 10 Now, you would assume that for both p1 and p2 the same hidden classes and transitions would be used. Well, not really. For “p1”, first the property “a” will be added and then the property “b”. For “p2”, however, first “b” is being assigned, followed by “a”. Thus, “p1” and “p2” end up with different hidden classes as a result of the different transition paths.  In such cases, it’s much better to initialize dynamic properties in the same order so that the hidden classes can be reused. \n \n 现在，你会以为 p1 和 p2 会使用相同的隐藏类和类转换。然而，对于 "p1"，先添加属性 "a" 然后再添加属性 "b"。然而，对于 "p2"，先添加属性 "b" 然后是 "a"。这样，因为使用不同的转换路径，"p1" 和 "p2" 会使用不同的隐藏类。 在这种情况下，更好的方法是以相同的顺序初始化动态属性以便于复用隐藏类。 \n Inline caching \n \n 内联缓存 \n \n V8 takes advantage of another technique for optimizing dynamically typed languages called inline caching. Inline caching relies on the observation that repeated calls to the same method tend to occur on the same type of object. An in-depth explanation of inline caching can be found  here . \n \n V8利用了另一种优化动态类型语言的技术，称为内联缓存。内联缓存依赖于对于同样类型的对象的同样方法的重复调用的观察。关于内联缓存的深入阐述可以在 这里 找到。 \n \n We’re going to touch upon the general concept of inline caching (in case you don’t have the time to go through the in-depth explanation above). \n \n 我们将会简单涉及一下内联缓存的概念(万一你没有时间去通读以上的深入理解内联缓存的文章)。 \n \n So how does it work? V8 maintains a cache of the type of objects that were passed as a parameter in recent method calls and uses this information to make an assumption about the type of object that will be passed as a parameter in the future. If V8 is able to make a good assumption about the type of object that will be passed to a method, it can bypass the process of figuring out how to access the object’s properties, and instead, use the stored information from previous lookups to the object’s hidden class. \n \n 那么它是怎么工作的？V8 会维护了在最近方法调用中作为参数传递的对象类型的缓存，并且使用这份信息假设在未来某个时候这个对象类型将会作为参数被传入这个方法。如果 V8 能够很好地预判即将传入方法的对象类型，它就可以绕过寻找如何访问对象属性的过程，代之以使用储存的来自之前查找到的对象隐藏类的信息。 \n \n So how are the concepts of hidden classes and inline caching related? Whenever a method is called on a specific object, the V8 engine has to perform a lookup to the hidden class of that object in order to determine the offset for accessing a specific property. After two successful calls of the same method to the same hidden class, V8 omits the hidden class lookup and simply adds the offset of the property to the object pointer itself. For all future calls of that method, the V8 engine assumes that the hidden class hasn’t changed, and jumps directly into the memory address for a specific property using the offsets stored from previous lookups. This greatly increases execution speed. \n \n 所以隐藏类和内联缓存的概念是怎么联系在一起的呢？每当在一个特定的对象上调用方法的时候，V8引擎都必须对该对象的隐藏类执行查找，以确定访问特定属性的偏移量。在两次具有相同隐藏类的相同方法的成功调用之后，V8 忽略隐藏类的查找，而是只是简单地把属性的偏移量添加到对象指针自身。在之后所有对这个方法的调用，V8 引擎假设隐藏类没有改变，然后使用之前查找到的偏移量来直接跳转到指定属性的内存地址。这极大地提升了代码运行速度。 \n \n Inline caching is also the reason why it’s so important that objects of the same type share hidden classes. If you create two objects of the same type and with different hidden classes (as we did in the example earlier), V8 won’t be able to use inline caching because even though the two objects are of the same type, their corresponding hidden classes assign different offsets to their properties. \n \n 内联缓存也是为什么同样类型的对象共享隐藏类是如此重要的原因。如果创建了两个相同类型的对象而使用不同的隐藏类(正如之前的例子所做的那样)，V8将不能使用内联缓存，因为即使相同类型的两个对象，它们对应的隐藏类也会为它们的属性分配不同的偏移量。 \n \n \n The two objects are basically the same but the “a” and “b” properties were created in different order. \n \n 这两个对象基本上是一样的但是创建\'a\'和\'b\'的顺序是不同的。 \n Compilation to machine code \n \n 编译为机器码 \n \n Once the Hydrogen graph is optimized, Crankshaft lowers it to a lower-level representation called Lithium. Most of the Lithium implementation is architecture-specific. Register allocation happens at this level. \n \n 一旦优化了Hydrogen图表，Crankshaft 会把它降级为低级的表现形式叫做 Lithium。大多数 Lithium 的实现都是依赖于指定的架构的。寄存器分配发生在这一层。 \n \n In the end, Lithium is compiled into machine code. Then something else happens called OSR: on-stack replacement. Before we started compiling and optimizing an obviously long-running method, we were likely running it. V8 is not going to forget what it just slowly executed to start again with the optimized version. Instead, it will transform all the context we have (stack, registers) so that we can switch to the optimized version in the middle of the execution. This is a very complex task, having in mind that among other optimizations, V8 has inlined the code initially. V8 is not the only engine capable of doing it. \n \n 最后，Lithium会被编译为机器码。然后被称为OSR的事情发生了：堆栈替换。在开始编译和优化一个明显的耗时的方法之前，我们可能已经运行它了。V8 不会忘记代码执行缓慢的地方，而再次使用优化过的版本代码。相反，它会转换所有的上下文(堆栈，寄存器)，这样就可以在执行过程中切换到优化的版本代码。这是一个复杂的任务，你只需要记住的是，在其它优化过程中，V8 会初始化内联代码。V8 并不是唯一拥有这项能力的引擎。 \n \n There are safeguards called deoptimization to make the opposite transformation and reverts back to the non-optimized code in case an assumption the engine made doesn’t hold true anymore. \n \n 这里有被称为逆优化的安全防护，以防止当引擎所假设的事情不再成立的时候，可以进行逆向转换和把代码反转为未优化的代码。 \n Garbage collection \n \n 垃圾回收 \n \n For garbage collection, V8 uses a traditional generational approach of mark-and-sweep to clean the old generation. The marking phase is supposed to stop the JavaScript execution. In order to control GC costs and make the execution more stable, V8 uses incremental marking: instead of walking the whole heap, trying to mark every possible object, it only walk part of the heap, then resumes normal execution. The next GC stop will continue from where the previous heap walk has stopped. This allows for very short pauses during the normal execution. As mentioned before, the sweep phase is handled by separate threads. \n \n V8 使用传统的标记-清除技术来清理老旧的内存以进行垃圾回收。标记阶段会中止 JavaScript 的运行。为了控制垃圾回收的成本并且使得代码执行更加稳定，V8 使用增量标记法：不遍历整个内存堆，试图标记每个可能的对象，它只是遍历一部分堆，然后恢复正常的代码执行。下一个垃圾回收点将会从上一个堆遍历中止的地方开始执行。这会在正常的代码执行过程中有一个非常短暂的间隙。之前提到过，清除阶段是由单独的线程处理的。 \n Ignition and TurboFan \n \n Ignition 和 TurboFan \n \n With the release of V8 5.9 earlier in 2017, a new execution pipeline was introduced. This new pipeline achieves even bigger performance improvements and significant memory savings in real-world JavaScript applications. \n \n 随着2017年初V8 5.9的发布，引入了新的执行管道。 这个新的管道可以在实际的JavaScript应用程序中实现更大的性能提升并显著节省内存。 \n \n The new execution pipeline is built on  top of Ignition , V8’s interpreter, and  TurboFan , V8’s newest optimizing compiler. \n \n 新的执行管道是建立在新的 V8 解释器 Ignition 和 V8 最新的优化编译器 TurboFan 之上的。 \n \n You can check out the blog post from the V8 team about the topic  here . \n \n 你可以查看 V8 小组的 博文 。 \n \n Since version 5.9 of V8 came out, full-codegen and Crankshaft (the technologies that have served V8 since 2010) have no longer been used by V8 for JavaScript execution as the V8 team has struggled to keep pace with the new JavaScript language features and the optimizations needed for these features. \n \n 自从 V8 5.9 版本发布以来，full-codegen 和 Crankshaft(V8 从 2010 开始使用至今) 不再被 V8 用来运行JavaScript，因为 V8 小组正努力跟上新的 JavaScript 语言功能以及为这些功能所需要做的优化。 \n \n \n \n 非原文 \n \n 注：V8团队的博文:『Launching Ignition and TurboFan』发表于2017年5月15日。摘抄文章一段： \n For the first time, Ignition and TurboFan are used universally and exclusively for JavaScript execution in V8 v5.9. Furthermore, starting with v5.9, Full-codegen and Crankshaft, the technologies that  served V8 well since 2010 , are no longer used in V8 for JavaScript execution, since they no longer are able to keep pace with new JavaScript language features and the optimizations those features require. We plan to remove them completely very soon. That means that V8 will have an overall much simpler and more maintainable architecture going forward. \n \n This means that overall V8 will have much simpler and more maintainable architecture going forward. \n \n 这意味着接下来整个 V8 将会更加精简和更具可维护性。 \n \n \n Improvements on Web and Node.js benchmarks \n \n 网页和 Node.js benchmarks 评分的提升 \n \n These improvements are just the start. The new Ignition and TurboFan pipeline pave the way for further optimizations that will boost JavaScript performance and shrink V8’s footprint in both Chrome and Node.js in the coming years. \n \n 这些提升只是一个开始。新的 Ignition 和 TurboFan 管道为未来的优化作铺垫，这些优化在未来几年内会提升 JavaScript 性能，并且缩小 V8 在 Chrome 和 Node.js 中占用的空间。 \n \n Finally, here are some tips and tricks on how to write well-optimized, better JavaScript. You can easily derive these from the content above, however, here’s a summary for your convenience: \n \n 最后，这里有一些技巧教你如何写出优化的、更好的JavaScript。你可以很容易地从上面的内容中获得这些信息，不过，为了方便起见，总结如下： \n How to write optimized JavaScript \n \n 如何编写优化的Javascript代码 \n \n \n Order of object properties:  always instantiate your object properties in the same order so that hidden classes, and subsequently optimized code, can be shared. \n Dynamic properties:  adding properties to an object after instantiation will force a hidden class change and slow down any methods that were optimized for the previous hidden class. Instead, assign all of an object’s properties in its constructor. \n Methods:  code that executes the same method repeatedly will run faster than code that executes many different methods only once (due to inline caching). \n Arrays:  avoid sparse arrays where keys are not incremental numbers. Sparse arrays which don’t have every element inside them are a  hash table . Elements in such arrays are more expensive to access. Also, try to avoid pre-allocating large arrays. It’s better to grow as you go. Finally, don’t delete elements in arrays. It makes the keys sparse. \n Tagged values:  V8 represents objects and numbers with 32 bits. It uses a bit to know if it is an object (flag = 1) or an integer (flag = 0) called SMI (SMall Integer) because of its 31 bits. Then, if a numeric value is bigger than 31 bits, V8 will box the number, turning it into a double and creating a new object to put the number inside. Try to use 31 bit signed numbers whenever possible to avoid the expensive boxing operation into a JS object. \n \n \n \n 对象属性的顺序：总是以相同的顺序实例化对象属性，这样隐藏类及之后的优化代码都可以被共享。 \n 动态属性：实例化之后为对象添加属性会致使隐藏类发生改变以及为前一个隐藏类优化的所有方法会变慢。相反，在对象构造函数中赋值对象的所有属性。 \n 方法：重复执行相同方法的代码会比每次运行不同的方法的代码更快(多亏了内联缓存)。 \n 数组：避免使用键不是递增数字的稀疏数组。里面没有包含所有元素的稀疏数组是一个哈希表。访问该数列中的元素会更加耗时。同样，试着避免预先分配大型数组。最好是随着使用而递增。最后，不要删除数列中的元素。这会让键稀疏。 \n 标记值：V8 用 32 位来表示对象和数字。它使用一位来辨别是对象(flag=1)或者是被称为 SMI(小整数) 的整数(flag=0)，之所以是小整数是因为它是 31 位的。然后，如果一个数值比 31 位还要大，V8 将会装箱数字，把它转化为浮点数并且创建一个新的对象来存储这个数字。尽可能试着使用 31 位有符号数字来避免创建 JS 对象的耗时装箱操作。 \n 参考文章 \n \n 翻译参考文章 \n \n ',summary:"Javascript工作原理：如何在 V8 引擎中书写最优代码的 5 条小技巧\n\nCouple of weeks ago we started a series aimed at digging deeper into JavaScript and how it actually works: we thought that by knowing the building blocks of JavaScript and how they come to play together you’ll be able to write better code and apps.\n\n>几周前，我们开始 ...",id:"post",pid:"post",readingTime:{text:"15 min read",minutes:14.575,time:874500,words:2915}},{title:"博客优化二三事",frontmatter:{title:"博客优化二三事",description:"博客优化二三事",date:"2021-04-21",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210421234422.jpeg",tags:["CI","Travis"],meta:[{name:"title",content:"博客优化二三事"},{name:"description",content:"博客优化二三事"},{name:"keywords",content:"博客优化二三事"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2021-04-21-blog-opt.html",relativePath:"_posts/2021-04-21-blog-opt.md",key:"v-e621ca34",path:"/2021/04/21/blog-opt/",headers:[{level:2,title:"前言",slug:"前言"},{level:2,title:"评论系统",slug:"评论系统"},{level:2,title:"修改主题，单独发包",slug:"修改主题-单独发包"},{level:2,title:"添加.travis.yml文件",slug:"添加-travis-yml文件"},{level:2,title:"添加自动生成文章列表README.md的脚本",slug:"添加自动生成文章列表readme-md的脚本"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" 博客优化二三事 \n 前言 \n 交代一下背景，这个博客是最开始是基于 jekyll 搭建的github page，但是由于一些原因(主要是jekyll的主题觉得不好看), 寻寻觅觅，终于找到一个喜欢的主题，是基于Vuepress的，主题用的是 vuepress-theme-modern-blog ，于是就把博客迁移到基于Vuepress的github page。具体的迁移过程不复杂，个人的 .vuepress/config.js 可参考 这里 ，在这篇文章就不再赘述。这篇文章主要打算记录一下迁移到Vuepress之后的一些问题的解决方法。 \n 评论系统 \n 迁移文章其实比较简单，因为都是一些markdown文件,也没什么需要改的。但是原来的评论系统不能用啦，vuepress-theme-modern-blog给出了一个评论系统 disqus ,但是这个评论系统在国内由于防火墙的原因支持的不太好。于是发现了 Vssue 评论系统，经过咔咔一顿配置(主要是github的access token等)，在一个md文件的最后添加 <Vssue :title=\"$title\" /> 一测试可以用，开心啊。但是接着问题就来啦,文章说多不多，说少不少，也不能一个个的手动去添加吧，好麻烦。于是写了个脚本: \n //append.js \n const  fs  =   require ( 'fs' ) ; \n const  reg  =   / ^.*\\.md$ / ; \n const  _path  =   './_posts' \n\n let  all_files  =  fs . readdirSync ( _path ) ; \n let  files  =  all_files . filter ( item   =>  reg . test ( item ) ) ; \n\nfiles . forEach ( item   =>   { \n   try   { \n    fs . appendFileSync ( ` ${ _path } / ${ item } ` ,   '\\n\\n<Vssue :title=\"$title\" />\\n' ) ; \n   }   catch ( err )   { \n    console . log ( err ) ; \n   } \n } ) \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 齐活~~ \n 但是好景不长，这个Vssue插件的用的代理 cors-anywhere 应该是做了一些限制，导致获取授权access_token的接口返回403，导致登录github失败，无发评论。在网上看了一些解决办法，但都以失败告终。于是选择了更换评论系统，经过比较我选择了 gittalk ，因为相对而言，更换到 gittalk 的成本比较低。具体的文章可参考 为你的VuePress博客添加GitTalk评论 。 \n 这个时候需要一个删除之前添加的 <Vssue :title=\"$title\" /> 的脚本： \n //deleteComponent.js \n const  fs  =   require ( 'fs' ) ; \n const  reg  =   / ^.*\\.md$ / ; \n const  _path  =   './_posts' \n\n let  all_files  =  fs . readdirSync ( _path ) ; \n let  files  =  all_files . filter ( item   =>  reg . test ( item ) ) ; \n\nfiles . forEach ( item   =>   { \n   try   { \n    fs . readFile ( ` ${ _path } / ${ item } ` ,   'utf-8' ,   ( err ,  data )   =>   { \n       if ( err )  console . log ( err ) ; \n      fs . writeFile ( ` ${ _path } / ${ item } ` ,  data . replace ( / \\n\\n<Vssue.*\\/> / g ,   '' ) ,   ( err )   =>   { \n         if ( err )  console . log ( err ) \n       } ) \n     } ) \n   }   catch ( err )   { \n    console . log ( err ) ; \n   } \n } ) \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 添加（或者删除） gittalk 的评论组件的脚本依然可以用 append.js（或者deleteComponent.js） ，只不过需要改一下脚本中需要添加和删除的内容。 \n 这样就ok啦。 \n 修改主题，单独发包 \n 在使用这个vuepress-theme-modern-blog主题的时候发现了一些问题，当然也不全是问题，如果全是问题我就给作者提PR了，还有的是一些自己的需求。 \n 比如：图标，由于在国内像instagram、Twitter、linkedin等国外网站都不太好访问，也没有账号，所以第一步就是换图标，主要是在 iconfont ,找图标然后替换，在这个过程中修改了一些代码。还有文章的末尾的轮播文章卡片，我不喜欢下面的轮播指示，也做了修改。还有一些其他的修改，比如添加推荐网站卡片、增加了其他tab等。 \n 最开始这些都是直接在本地文件的 node_modules 中找到这个vuepress-theme-modern-blog包，直接去源文件中进行修改。一开始修改的地方不太多，所以感觉还好。但是随着修改的地方的增加，我开始思考一个问题，如果修改的文件丢失了怎么办，在重新安装这个包，修改的地方就全消失啦。并且随着文章越来越多，每次都要重新打包，全量推送到远程仓库，比较消耗人力。此时就很需要travis CI来帮助我们自动安装依赖，自动打包，然后推送到远程的github page仓库。 \n 出于这两个原因，把这个修改后的主题包发布到npm平台似乎成了一个必要的选择。 \n 发包也比叫简单： \n \n 首先要有npm账号，没有可以注册一个。 \n \n npm login\nnpm publish\n \n 1 2 本地调试： \n 在要发布的npm包（vuepress-theme-custom）中执行： \n npm link\n \n 1 在需要用到这个npm包的项目中： \n npm link vuepress-theme-custom\n \n 1 这样就可以实现本地的npm包进行调试啦。 \n \n 其实 npm link 相当于在全局环境下安装了vuepress-theme-custom,在项目中进行 npm link vuepress-theme-custom 相当于在项目的node_modules中创建了一个这个npm包的符号连接。 \n 添加 .travis.yml 文件 \n 正如上面提到的那样，每次发布文章都要在本地重新打包，然后把打包后的产物推送到远程分支，比较耗费人力和时间。为了解决这个问题，比较好的解决办法就是引入持续集成和持续发布。 \n 在查阅官方文档后，发现github page的发布有一个 模板 （我也不知道叫模板正不正确），如下： \n deploy : \n   provider :  pages\n   skip_cleanup :   true \n   github_token :  $GITHUB_TOKEN\n   keep_history :   true \n   on : \n     branch :  main\n \n 1 2 3 4 5 6 7 一些其他的github page配置可参考 官方说明 。 \n 我现在用的配置文件为： \n language :  node_js\n node_js : \n   -  lts/*\n install : \n   -  yarn install\n script : \n   -  node append.js  &&  yarn build  &&  node deleteComponent.js\n deploy : \n   provider :  pages\n   skip_cleanup :   true \n   local_dir :  .vuepress/dist\n   repo :  yancqS/blog\n   github_token :  $GH_TOKEN\n   keep_history :   true \n   on : \n     branch :  master\n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 这里面会涉及到tarvis的job生命周期，具体的要参考 官方文档 。 \n 注意： $GH_TOKEN 这个是在github生产的token，以允许travis向github平台推送代码。具体的生成方法参考 github官网-Creating a personal access token\n 。由于这个token是保密的，因此这个token值是要在travis的设置中添加为变量的。如下： \n \n 还有要记得确认travis的邮箱，否则不会正常触发job。 \n \n 里面还有一些细节操作，比如选择仓库啥的。 \n \n 正常情况下到这一步，已经成功啦。现在只要这个仓库有push或者其他动作就会触发这个travis.yml中的任务并执行脚本。 \n 具体如下图： \n \n 暂时就先这么多吧，如果以后有啥新的更改，会及时同步。 \n 土遁～～～～～ \n 添加自动生成文章列表 README.md 的脚本 \n \n 更新2021-04-23 \n \n 所谓文章列表 README.md 就是这个东西： \n \n 值得注意的是 .vuepress/public/README.md 文件会被打包到dist文件夹并被travis推送到仓库。 \n 因此，思路就是在打包前要遍历 _post 文件夹下面的所有md文件，并对文件名进行处理、以及提取文件标题。并将处理后的内容组合后写入到 .vuepress/public/README.md 。这个过程完全是在在travis的虚拟机上执行完成的，因此本地不会产生这个 README.md 文件。 \n 步骤如下： \n \n 遍历 _post 文件夹下面的所有md文件前面已经有相关代码： \n \n const  fs  =   require ( 'fs' ) ; \n const  reg  =   / ^.*\\.md$ / ; \n const  _path  =   './_posts' \n\n let  all_files  =  fs . readdirSync ( _path ) ; \n //这个地方之所以要reverse(),是因为希望最新的文章在最上面。也不难理解 \n let  files  =  all_files . filter ( item   =>  reg . test ( item ) ) . reverse ( ) ; \n \n 1 2 3 4 5 6 7 \n 获取文件名（不包含后缀名） \n \n const fs = require('fs');\n +  const path = require('path');\n const reg = /^.*\\.md$/;\nconst _path = './_posts'\nconst base = 'https://yancqs.github.io/blog';\nconst readme_path = '.vuepress/public/README.md';\n\nlet all_files = fs.readdirSync(_path);\nlet files = all_files.filter(item => reg.test(item)).reverse();\n\n +  let file_name = files.map(item => path.parse(item).name);\n \n 1 2 3 4 5 6 7 8 9 10 11 \n 如何把文件名处理为URL \n \n 这个可谓是这个脚本的核心说在，首先经过观察和测试可以看出转换规则如下： \n 以文件名 2020-06-02-leetcode-pow(x,n)-50.md 为例 \n \n 线上实际的URL为： ${base}/2020/06/02/leetcode-pow-x-n-50/ \n \n \n 文件名中的日期 2020-06-02 会被处理为 2020/06/02 \n 文件名中的大写字母要转换为小写字母 \n 文件名中所有非字母、数字都要转换为中划线 - \n \n 经过这个规则处理之后，我们得到的文件名为 2020/06/02/leetcode-pow-x-n--50/ ,这样显然是不对的，因为连续重复出现的 - 要处理为1个。这样得出最后一条规则： \n \n 经过处理后的URL中连续重复出现的 - 要替换为1个 - \n \n 因此得到如下代码： \n const fs = require('fs');\nconst path = require('path');\nconst reg = /^.*\\.md$/;\n +  const reg_paper_name = /([-])\\1{1,}/g;\n const _path = './_posts';\nconst base = 'https://yancqs.github.io/blog';\n\nlet all_files = fs.readdirSync(_path);\nlet files = all_files.filter(item => reg.test(item)).reverse();\n\nlet file_name = files.map(item => path.parse(item).name);\n + let URL = file_name.map(item => {\n +  let date = item.split('-').slice(0, 3).join('/');\n +  let _paper_name = item.split('-')\n +    .slice(3)\n +    .map(subitem => (subitem + '').toLowerCase())\n +    .map(lowerString => lowerString.replace(/[^a-z0-9]/g, '-'))\n +    .join('-');\n +  let paper_name = _paper_name.replace(reg_paper_name, '-');\n +  return `${base}/${date}/${paper_name}/`;\n + })\n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 \n 获取文章标题 \n \n 主要是文章开头的 font-matter 的格式固定，才可以这样去读文件： \n // ... \n let  data  =  fs . readFileSync ( ` ${ _path } / ${ item } ` ,   'utf-8' ) ; \n let  _title  =  data . split ( '---' ) [ 1 ] . split ( '\\n' ) [ 1 ] . split ( ':' ) ; \n_title . shift ( ) ; \n let  title  =  _title . join ( ':' ) . trim ( ) ; \n \n 1 2 3 4 5 \n 处理后写入 .vuepress/public/README.md \n \n const  readme_path  =   '.vuepress/public/README.md' ; \n\nfs . appendFileSync ( readme_path ,   ` - [ ${ title } ]( ${ URL [ index ] } )\\n ` ,   'utf-8' ) ; \n \n 1 2 3 \n 整合代码如下： \n \n const  fs  =   require ( 'fs' ) ; \n const  path  =   require ( 'path' ) ; \n const  reg  =   / ^.*\\.md$ / ; \n const  reg_paper_name  =   / ([-])\\1{1,} / g ; \n const  _path  =   './_posts' ; \n const  base  =   'https://yancqs.github.io/blog' ; \n const  readme_path  =   '.vuepress/public/README.md' ; \n\n let  all_files  =  fs . readdirSync ( _path ) ; \n let  files  =  all_files . filter ( item   =>  reg . test ( item ) ) . reverse ( ) ; \n\n let  file_name  =  files . map ( item   =>  path . parse ( item ) . name ) ; \n let   URL   =  file_name . map ( item   =>   { \n   let  date  =  item . split ( '-' ) . slice ( 0 ,   3 ) . join ( '/' ) ; \n   let  _paper_name  =  item . split ( '-' ) \n     . slice ( 3 ) \n     . map ( subitem   =>   ( subitem  +   '' ) . toLowerCase ( ) ) \n     . map ( lowerString   =>  lowerString . replace ( / [^a-z0-9] / g ,   '-' ) ) \n     . join ( '-' ) ; \n   let  paper_name  =  _paper_name . replace ( reg_paper_name ,   '-' ) ; \n   return   ` ${ base } / ${ date } / ${ paper_name } / ` ; \n } ) \n\n if ( fs . existsSync ( readme_path ) )   { \n  fs . unlinkSync ( readme_path ) ; \n } \n\nfs . writeFileSync ( readme_path ,   ` # <center>目录</center>\\n\\n![](https://img.shields.io/badge/Yoha's%20Blog-Count%20 ${ files . length } -green)\\n\\n ` ) \n\nfiles . forEach ( ( item ,  index )   =>   { \n   let  data  =  fs . readFileSync ( ` ${ _path } / ${ item } ` ,   'utf-8' ) ; \n   let  _title  =  data . split ( '---' ) [ 1 ] . split ( '\\n' ) [ 1 ] . split ( ':' ) ; \n  _title . shift ( ) ; \n   let  title  =  _title . join ( ':' ) . trim ( ) ; \n  fs . appendFileSync ( readme_path ,   ` - [ ${ title } ]( ${ URL [ index ] } )\\n ` ,   'utf-8' ) ; \n } ) \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 就先到这吧。 \n 最后，记得更新 travis.yml : \n language :  node_js\n node_js : \n   -  lts/*\n install : \n   -  yarn install\n script : \n   -  node getReadme.js  &&  node append.js  &&  yarn build  &&  node deleteComponent.js\n deploy : \n   provider :  pages\n   skip_cleanup :   true \n   local_dir :  .vuepress/dist\n   repo :  yancqS/blog\n   github_token :  $GH_TOKEN\n   keep_history :   true \n   on : \n     branch :  master\n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 ",summary:"\n前言\n\n交代一下背景，这个博客是最开始是基于jekyll搭建的github page，但是由于一些原因(主要是jekyll的主题觉得不好看), 寻寻觅觅，终于找到一个喜欢的主题，是基于Vuepress的，主题用的是vuepress-theme-modern-blog，于是就把博客迁移到基于Vuepress的github page。具体的迁移过程不复杂，个人的.vuepress/config.js可参考这里，在这篇文章就不再赘述。这篇文章主要打算记录一下迁移到Vuepress之后的一些问题的解决方法。\n\n评论系统\n\n迁移文章其实比较简单，因为都是一些markdown文件,也没什么需要改的。但是 ...",id:"post",pid:"post",readingTime:{text:"3 min read",minutes:2.965,time:177899.99999999997,words:593}},{title:"Concurrency vs. Parallelism",frontmatter:{title:"Concurrency vs. Parallelism",description:"Concurrency vs. Parallelism",date:"2021-05-05",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210505231625.png",tags:["翻译","转载"],meta:[{name:"title",content:"Concurrency vs. Parallelism"},{name:"description",content:"Concurrency vs. Parallelism"},{name:"keywords",content:"Concurrency vs. Parallelism"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2021-05-05-Concurrency-Parallelism.html",relativePath:"_posts/2021-05-05-Concurrency-Parallelism.md",key:"v-0ea3989e",path:"/2021/05/05/concurrency-parallelism/",headers:[{level:2,title:"Concurrency",slug:"concurrency"},{level:2,title:"Parallelism",slug:"parallelism"},{level:2,title:"Differences between concurrency vs. parallelism",slug:"differences-between-concurrency-vs-parallelism"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" Concurrency vs. Parallelism \n \n 并发 vs. 并行 \n \n Concurrency  means multiple tasks which start, run, and complete in overlapping time periods, in no specific order.  Parallelism  is when multiple tasks OR several part of a unique task literally run at the same time, e.g. on a multi-core processor. Remember that Concurrency and parallelism are NOT the same thing. \n \n 并发是指多个任务，它们在重叠的时间段内（没有特定的顺序）开始，运行和完成。 并行是指多个任务或唯一任务的多个部分同时运行的情况，例如，在多核处理器上。 请记住，并发和并行性不是一回事。 \n \n Let’s understand more in detail that what I mean when I say Concurrency vs. Parallelism. \n \n 让我们更详细地了解一下我所说的并发与并行的含义。 \n Concurrency \n \n 并发 \n \n Concurrency is essentially applicable when we talk about minimum two tasks or more. When an application is capable of executing two tasks virtually at same time, we call it concurrent application. Though here tasks run looks like simultaneously, but essentially they MAY not. They take advantage of CPU time-slicing feature of operating system where each task run part of its task and then go to waiting state. When first task is in waiting state, CPU is assigned to second task to complete it’s part of task. \n \n 当我们讨论最少两个或更多任务时，并发基本上是适用的。当一个应用程序能够同时执行两个任务时，我们称之为并发应用程序。虽然这里的任务看起来是同时运行的，但本质上它们可能不是。它们利用了操作系统的CPU  时间切片  特性，每个任务运行其部分任务，然后进入等待状态。当第一个任务处于等待状态时，CPU被分配给第二个任务来完成任务的一部分。 \n \n Operating system based on priority of tasks, thus, assigns CPU and other computing resources e.g. memory; turn by turn to all tasks and give them chance to complete. To end user, it seems that all tasks are running in parallel. This is called concurrency. \n \n 操作系统根据任务的优先级分配CPU和其他计算资源（例如内存）依次完成所有任务。对于终端用户来说， 似乎 所有任务都是并行运行的。这称为并发。 \n Parallelism \n \n 并行 \n \n Parallelism does not require two tasks to exist. It literally physically run parts of tasks OR multiple tasks, at the same time using multi-core infrastructure of CPU, by assigning one core to each task or sub-task. \n \n 并行不需要两个任务。通过为每个任务或子任务分配一个内核，利用CPU的多核基础架构同时运行部分任务或多个任务。 \n \n Parallelism requires hardware with multiple processing units, essentially. In single core CPU, you may get concurrency but NOT parallelism. \n \n 从本质上讲，并行需要具有多个处理单元的硬件。在单核CPU中，可以获得并发性，但不能获得并行性。 \n Differences between concurrency vs. parallelism \n \n 并发和并行的区别 \n \n Now let’s list down remarkable differences between concurrency and parallelism. \n \n 现在，让我们列出并发和并行之间的显着差异。 \n \n Concurrency is when two tasks can start, run, and complete in overlapping time periods. Parallelism is when tasks literally run at the same time, eg. on a multi-core processor. \n \n 并发是指两个任务可以在重叠的时间段内启动、运行和完成。并行是指任务实际上在同一时间运行，例如。 在多核处理器上。 \n \n Concurrency is the composition of independently executing processes, while parallelism is the simultaneous execution of (possibly related) computations. \n \n 并发性是独立执行的进程的组合，而并行性是同时执行（可能相关的）计算。 \n \n Concurrency is about  dealing with lots of things  at once. Parallelism is about  doing lots of things  at once. \n \n 并发是指同时处理很多事情。并行是指同时做很多事情。 \n \n An application can be concurrent – but not parallel, which means that it processes more than one task at the same time, but no two tasks are executing at same time instant. \n \n 应用程序可以是并发的，但不能是并行的，这意味着它可以同时处理多个任务，但不能同时执行两个任务。 \n \n An application can be parallel – but not concurrent, which means that it processes multiple sub-tasks of a task in multi-core CPU at same time. \n \n 应用程序可以是并行的，但不能是并发的，这意味着它在多核CPU中同时处理一个任务的多个子任务。 \n \n An application can be neither parallel – nor concurrent, which means that it processes all tasks one at a time, sequentially. \n \n 应用程序既不能并行也不能并发，这意味着它一次按顺序处理一个任务。 \n \n An application can be both parallel – and concurrent, which means that it processes multiple tasks concurrently in multi-core CPU at same time . \n \n 一个应用程序既可以是并行的，也可以是并发的，这意味着它可以在多核CPU中同时处理多个任务。 \n \n That’s all about  Concurrency vs. Parallelism , a very important concept in java multi-threading concepts. \n \n 这就是关于并发与并行的全部内容，这是Java多线程概念中非常重要的概念。 \n \n Happy Learning !! \n \n 原文连接 \n \n ",summary:"并发 vs. 并行\n\nConcurrency means multiple tasks which start, run, and complete in overlapping time periods, in no specific order. Parallelism is when multiple tasks OR several part of a unique task literally run at the same time, e.g. on a multi-core processor. Remember that Concurrency and parallelism  ...",id:"post",pid:"post",readingTime:{text:"3 min read",minutes:2.44,time:146400,words:488}},{title:"去哪吃",frontmatter:{title:"去哪吃",description:"去哪吃",date:"2021-05-13",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210513202439.png",tags:["node","idea"],meta:[{name:"title",content:"去哪吃"},{name:"description",content:"去哪吃"},{name:"keywords",content:"去哪吃, node, nodemailer"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2021-05-13-eat-what.html",relativePath:"_posts/2021-05-13-eat-what.md",key:"v-760ad9c8",path:"/2021/05/13/eat-what/",headers:[{level:2,title:"背景",slug:"背景"},{level:2,title:"准备工作",slug:"准备工作"},{level:2,title:"获取周边餐馆✌️",slug:"获取周边餐馆"},{level:2,title:"发送邮件💫",slug:"发送邮件"},{level:2,title:"定时执行 🕚",slug:"定时执行"},{level:2,title:"最后",slug:"最后"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" 去哪吃 \n 背景 \n 看到这个题目，你也许会想『啥意思，什么去哪吃，想去哪吃去哪吃呗』。说得好，关键是不知道去哪吃，纠结啊。于是，就想着可不可以搞一个每天定时告诉我去哪吃的小脚本，定时发个邮件告诉我去哪吃，距离、价格最好也能一并告诉我。正所谓：『行胜于言』，搞起🤣 \n \n 其实这篇文章没啥技术含量，就是挺好玩的。😛 \n 准备工作 \n \n axios：请求库 \n nodemailer：用于发送邮件 \n \n mkdir  getCating\n cd  getCanting\n npm  init --yes\n npm  i axios nodemailer\n \n 1 2 3 4 #  获取周边餐馆✌️ \n 检索周边地点主要是调用了百度地图的Web服务API。 \n 可参考 地点检索服务 服务文档。 \n \n 原型区域检索API(GET请求)： http://api.map.baidu.com/place/v2/search?query=银行&location=39.915,116.404&radius=2000&output=xml&ak=您的密钥 。具体的请求参数也可参考 地点检索服务 服务文档。 \n 这个query参数里面唯一需要自己去获取的就是经纬度( location )。这个具体的获取方法如下： \n navigator . geolocation . getCurrentPosition ( position   =>   { \n    console . log ( position . coords . latitude ) ; \n    console . log ( position . coords . longitude ) \n } ) \n \n 1 2 3 4 \n 这个要打开浏览器的定位服务。 \n \n 具体代码如下： \n const  request  =   require ( 'axios' ) ; \n const  fs  =   require ( 'fs' ) ; \n const  path  =   require ( 'path' ) ; \n const  ak  =   'xxxxxxxxxxxxxxxxxxxx' ; \n const  query  =   encodeURI ( ` query=小吃$快餐$中餐&tag=小吃&location=40.04171,116.312820086&scope=2&radius_limit=true&page_size=20&radius=500&output=json&ak= ${ ak } ` ) ; \n\nrequest . get ( ` http://api.map.baidu.com/place/v2/search? ${ query } ` ) \n     . then ( res   =>   { \n        fs . writeFileSync ( path . resolve ( __dirname ,   'cantingList.json' ) ,   JSON . stringify ( res . data ,   null ,   '\\t' ) ) ; \n     } ) \n \n 1 2 3 4 5 6 7 8 9 10 返回的结果如下： \n 发送邮件💫 \n 发送邮件主要用了 nodemailer 这个第三方库，使用方法可参考 usage 以及 内置支持的服务 。 \n const  nodemailer  =   require ( 'nodemailer' ) ; \n\n const  transport  =  nodemailer . createTransport ( { \n    service :   'QQ' , \n    auth :   { \n        user :   'xxxxxxx@qq.com' , \n         //这个密码不是qq密码，而是qq邮箱的授权码 \n        pass :   'xxxxxxxx' \n     } \n } ) \n\n let  mailOption  =   { \n     from :   '\"xxxx\" <xxxxxxxx@qq.com>' , \n    to :   [ 'email-list' ] , \n    subject :   '中午/晚上吃什么? 我来告诉你' , \n } \n\n function   send ( _item )   { \n    transport . sendMail ( Object . assign ( mailOption ,   { \n        text :   ` \n        名称： ${ _item . name } \n        地址： ${ _item . address } \n        距离： ${ _item . detail_info . distance } 米\n        人均价格： ${ _item . detail_info . price  ||   '暂无数据' } \n        评分： ${ _item . detail_info . overall_rating  ||   '暂无数据' } \n        经纬度： ${ _item . location . lat } ,  ${ _item . location . lng } \n        电话： ${ _item . telephone  ||   '暂无电话' } \n        在地图中查看： ${ _item . detail_info . detail_url } \n         ` \n     } ) ,   ( err ,  info )   =>   { \n         if   ( err )   { \n             return ; \n         } \n        console . log ( 'Message send successfully: %s' ,  info . messageId ) ; \n     } ) \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 看这👀  qq邮箱的授权码怎么获取？ \n 最后的代码： \n const  request  =   require ( 'axios' ) ; \n const  nodemailer  =   require ( 'nodemailer' ) ; \n const  fs  =   require ( 'fs' ) ; \n const  path  =   require ( 'path' ) ; \n const  ak  =   'xxxxxxxxxxxxxxx' ; \n const  query  =   encodeURI ( ` query=小吃$快餐$中餐&tag=小吃&location=40.04171,116.312820086&scope=2&radius_limit=true&page_size=20&radius=500&output=json&ak= ${ ak } ` ) \n\n let  item ; \n\n const  transport  =  nodemailer . createTransport ( { \n    service :   'QQ' , \n    auth :   { \n        user :   'xxxxxx@qq.com' , \n        pass :   'xxxxxxxx' \n     } \n } ) \n\n let  mailOption  =   { \n     from :   '\"name\" <xxxxxx@qq.com>' , \n    to :   [ 'email-list' ] , \n    subject :   '中午/晚上吃什么? 我来告诉你' , \n } \n\n function   send ( _item )   { \n    transport . sendMail ( Object . assign ( mailOption ,   { \n        text :   ` \n        名称： ${ _item . name } \n        地址： ${ _item . address } \n        距离： ${ _item . detail_info . distance } 米\n        人均价格： ${ _item . detail_info . price  ||   '暂无数据' } \n        评分： ${ _item . detail_info . overall_rating  ||   '暂无数据' } \n        经纬度： ${ _item . location . lat } ,  ${ _item . location . lng } \n        电话： ${ _item . telephone  ||   '暂无电话' } \n        在地图中查看： ${ _item . detail_info . detail_url } \n         ` \n     } ) ,   ( err ,  info )   =>   { \n         if   ( err )   { \n             return ; \n         } \n        console . log ( 'Message send successfully: %s' ,  info . messageId ) ; \n     } ) \n } \n\nrequest . get ( ` http://api.map.baidu.com/place/v2/search? ${ query } ` ) \n     . then ( res   =>   { \n        fs . writeFileSync ( path . resolve ( __dirname ,   'cantingList.json' ) ,   JSON . stringify ( res . data ,   null ,   '\\t' ) ) ; \n        item  =  res . data . results [ parseInt ( Math . random ( )   *   20 ) ] \n         send ( item ) ; \n     } ) \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 #  定时执行 🕚 \n 用的 crontab , crontab -e 直接编辑如下： \n 30   11,17  * *  1 -5 /usr/local/bin/node /Users/ { your path } /getCanting/getCanting.js\n \n 1 #  最后 \n 感觉挺好玩的，虽然没啥含金量，但是感觉还是有那么「yinainai」（就是一点点的意思 🐶）收获。 \n 好啦 就到这吧。 \n 土遁~~~~ 👋 👋 \n ",summary:"\n背景\n\n看到这个题目，你也许会想『啥意思，什么去哪吃，想去哪吃去哪吃呗』。说得好，关键是不知道去哪吃，纠结啊。于是，就想着可不可以搞一个每天定时告诉我去哪吃的小脚本，定时发个邮件告诉我去哪吃，距离、价格最好也能一并告诉我。正所谓：『行胜于言』，搞起:rofl:\n\n>其实这篇文章没啥技术含量，就是挺好玩的。:stuckouttongue:\n\n准备工作\n\naxios：请求库\nnodemailer：用于发送邮件\n\nmkdir getCating\ncd getCanting\nnpm init --yes\nnpm i axios nodemailer\n\n获取周边餐馆:v:\n\n检索周边地点主要是调用了百 ...",id:"post",pid:"post",readingTime:{text:"2 min read",minutes:1.465,time:87900,words:293}},{title:"交换机和路由器的区别",frontmatter:{title:"交换机和路由器的区别",description:"交换机和路由器的区别",date:"2021-05-20",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210602223659.png",tags:["计算机知识"],meta:[{name:"title",content:"交换机和路由器的区别"},{name:"description",content:"交换机和路由器的区别"},{name:"keywords",content:"交换机, 路由器, 区别"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2021-05-20-router-switch.html",relativePath:"_posts/2021-05-20-router-switch.md",key:"v-4be3ab3e",path:"/2021/05/20/router-switch/",headers:[{level:2,title:"交换机",slug:"交换机"},{level:2,title:"路由器",slug:"路由器"},{level:2,title:"交换机和路由器的区别",slug:"交换机和路由器的区别-2"},{level:2,title:"三层交换机和路由器的区别",slug:"三层交换机和路由器的区别"},{level:2,title:"如何理解『交换求快，路由谋短』",slug:"如何理解『交换求快-路由谋短』"},{level:2,title:"参考文章",slug:"参考文章"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" 交换机和路由器的区别 \n 交换机 \n 在计算机网络系统中，交换机是针对共享工作模式的弱点而推出的。交换机拥有一条高带宽的背部总线和内部交换矩阵。交换机的所有的端口都挂接在这条背部总线上，当控制电路收到数据包以后，处理端口会查找内存中的地址对照表以确定目的MAC的NIC（网卡）挂接在哪个端口上，通过内部交换矩阵迅速将数据包传送到目的端口。若目的MAC不存在，交换机就广播到所有的端口，接收端口回应后交换机会“学习”新的地址，并把它添加到内部地址表中。 \n 交换机工作在OSI模型的 数据链路层 上。交换机内部的CPU在每个端口成功连接时，通过ARP协议来学习各端口的MAC地址，保存成一张ARP表。在以后的通信中，发往该MAC地址的数据包将仅仅送往其对应的端口，而不是所有的端口。因此，交换机可用于划分数据链路层广播，即冲突域，但它不能划分网络层广播，即广播域。 \n 交换机被广泛应用于二层网络交换，俗称“二层交换机”。交换机的种类有：二层交换机、三层交换机、四层交换机、七层交换机，分别工作在OSI模型的第二层、第三层、第四层和第七层。 \n 路由器 \n 路由器是一种计算机网络设备，提供了路由与转发两种重要机制，可以决定数据包来源端到目的端所经过的路由路径，这个过程称为路由；将路由器输入端的数据包移送至适当的路由器输出端，称为转发（转送）。路由器工作在OSI模型的 网络层 上。 \n 路由器的一个作用是连通不同的网络，另一个作用是选择信息传送的线路。路由器与交换机的差别即在于路由器是OSI模型第三层的产品，交换机是OSI模型第二层的产品。 \n \n 每一个路由器与其之下连接的设备，其实构成一个局域网 \n 交换机工作在路由器之下，就是也就是交换机工作在局域网内 \n 交换机用于局域网内网的数据转发 \n 路由器用于连接局域网和外网 \n 交换机和路由器的区别 \n \n 路由器可以给你的局域网自动分配IP，虚拟拨号，就像一个交通警察，指挥着你的电脑该往哪走，你自己不用操心那么多了。交换机只是用来分配网络数据的。 \n 路由器在网络层，路由器根据IP地址寻址，路由器可以处理TCP/IP协议，交换机不可以。 \n 交换机在中继层，交换机根据MAC地址寻址。路由器可以把一个IP分配给很多个主机使用，这些主机对外只表现出一个IP。交换机可以把很多主机连起来，这些主机对外各有各的IP。 \n 路由器提供防火墙的服务，交换机不能提供该功能。集线器、交换机都是做端口扩展的，就是扩大局域网(通常都是以太网)的接入点，也就是能让局域网可以连进来更多的电脑。路由器是用来做网间连接，也就是用来连接不同的网络。 \n \n 交换机是利用物理地址或者说MAC地址来确定转发数据的目的地址。而路由器则是利用不同网络的ID号(即IP地址)来确定数据转发的地址。  IP地址是在软件中实现的，描述的是设备所在的网络，有时这些第三层的地址也称为协议地址或者网络地址。MAC地址通常是硬件自带的，由网卡生产商来分配的，而且已经固化到了网卡中去，一般来说是不可更改的。而IP地址则通常由网络管理员或系统自动分配。 \n 三层交换机和路由器的区别 \n 虽然他们都具有路由功能。 \n 但是三层交换机的主要功能仍是数据交换，它的路由功能通常比较简单，因为它所面对的主要是简单的局域网连接，路由路径远没有路由器那么复杂，它用在局域网中的主要用途还是提供快速数据交换功能，满足局域网数据交换频繁的应用特点。 \n 路由器的主要功能还是路由功能，它的路由功能更多的体现在不同类型网络之间的互联上，如局域网与广域网之间的连接、不同协议的网络之间的连接等，所以路由器主要是用于不同类型的网络之间。它最主要的功能就是路由转发，解决好各种复杂路由路径网络的连接就是它的最终目的，所以路由器的路由功能通常非常强大，不仅适用于同种协议的局域网间，更适用于不同协议的局域网与广域网间。它的优势在于选择最佳路由、负荷分担、链路备份及和其他网络进行路由信息的交换等等路由器所具有功能。为了与各种类型的网络连接，路由器的接口类型非常丰富，而三层交换机则一般仅同类型的局域网接口，非常简单。 \n 从技术上讲，路由器和三层交换机在数据包交换操作上存在着明显区别。路由器一般由基于微处理器的软件路由引擎执行数据包交换，而三层交换机通过硬件执行数据包交换。三层交换机在对第一个数据流进行路由后，它将会产生一个MAC地址与IP地址的映射表，当同样的数据流再次通过时，将根据此表直接从二层通过而不是再次路由，从而消除了路由器进行路由选择而造成网络的延迟，提高了数据包转发的效率。同时，三层交换机的路由查找是针对数据流的，它利用缓存技术，很容易利用ASIC技术来实现，因此，可以大大节约成本，并实现快速转发。而路由器的转发采用最长匹配的方式，实现复杂，通常使用软件来实现，转发效率较低。 \n 正因如此，从整体性能上比较的话，三层交换机的性能要远优于路由器，非常适用于数据交换频繁的局域网中;而路由器虽然路由功能非常强大，但它的数据包转发效率远低于三层交换机，更适合于数据交换不是很频繁的不同类型网络的互联，如局域网与互联网的互联。如果把路由器，特别是高档路由器用于局域网中，则在相当大程度上是一种浪费(就其强大的路由功能而言)，而且还不能很好地满足局域网通信性能需求，影响子网间的正常通信 \n 综上所述，在局域网中进行多子网连接，最好还选用三层交换机，特别是在不同子网数据交换频繁的环境中。一方面可以确保子网间的通信性能需求，另一方面省去了另外购买交换机的投资。当然，如果子网间的通信不是很频繁，采用路由器也无可厚非，也可达到子网安全隔离相互通信的目的。具体要根据实际需求来定。 \n 三层交换与路由最大的区别就在于：路由支持nat转换，而三层不支持。在实际工程中体现出来就在：路由上直接接光纤可以上网，而将光纤接到层三设备上是不能上网了。三层每个端口都有专用的mac地址，有专用的ASIC集成电路。 \n 如何理解『交换求快，路由谋短』 \n 把交换和路由这样放在一起对比有点不是很合适呀，因为交换和路由的应用场景不一样，不是两个可以平行比较的东西，局域网当然要交换，广域网必然要路由。就低端支持三层路由的交换机来说，二层报文转发（也就是交换）是通过芯片完成，转发过程无需CPU上的软件干预，速度很快，但是三层报文的转发（也就是路由），因为是低端产品，无专业处理三层报文的NP，所以基本上是通过CPU软转发完成，速度跟交换来比当然是慢的。但是高端产品三层报文的转发也都是通过线卡上的专业NP完成，无需CPU软件干预，所以不存在速度上的问题。大多数路由协议在计算路由的时候基本算法都是围绕一个最短路径来进行的，一般来说最优路由也就是最短路径，当然也会有其他的因素，可以设置metric值来改变路径的权重，这样算出来的最优路由不见得最短。跳出IP路由转发，看看MPLS-TE，引入流量工程后转发路径可以按需定制，路径是否最短已经不是最重要的。 \n 参考文章 \n \n 交换机和路由器的区别 \n 交换机、路由器、网关的概念和用途 \n 交换机和路由器的区别在哪里 一针见血通俗解答 \n 怎样更加通俗的理解“交换求快，路由谋短”这句话？ \n \n ",summary:"\n交换机\n\n在计算机网络系统中，交换机是针对共享工作模式的弱点而推出的。交换机拥有一条高带宽的背部总线和内部交换矩阵。交换机的所有的端口都挂接在这条背部总线上，当控制电路收到数据包以后，处理端口会查找内存中的地址对照表以确定目的MAC的NIC（网卡）挂接在哪个端口上，通过内部交换矩阵迅速将数据包传送到目的端口。若目的MAC不存在，交换机就广播到所有的端口，接收端口回应后交换机会“学习”新的地址，并把它添加到内部地址表中。\n\n交换机工作在OSI模型的数据链路层上。交换机内部的CPU在每个端口成功连接时，通过ARP协议来学习各端口的MAC地址，保存成一张ARP表。在以后的通信中，发往该MAC地址的 ...",id:"post",pid:"post",readingTime:{text:"1 min read",minutes:.265,time:15900,words:53}},{title:"How JavaScript works - memory management + how to handle 4 common memory leaks",frontmatter:{title:"How JavaScript works - memory management + how to handle 4 common memory leaks",description:"How Javascript works",date:"2021-06-01",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210517122820.png",tags:["翻译","转载","JavaScript"],meta:[{name:"title",content:"JavaScript工作原理：内存泄露 + 如何处理4中常见的内存泄露"},{name:"description",content:"JavaScript工作原理：内存泄露 + 如何处理4中常见的内存泄露"},{name:"keywords",content:"Javascript工作原理"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2021-06-01-how-javascript-work3.html",relativePath:"_posts/2021-06-01-how-javascript-work3.md",key:"v-2c73b2f8",path:"/2021/06/01/how-javascript-work3/",headers:[{level:2,title:"Overview",slug:"overview"},{level:2,title:"Memory life cycle",slug:"memory-life-cycle"},{level:2,title:"What is memory?",slug:"what-is-memory"},{level:2,title:"Dynamic allocation",slug:"dynamic-allocation"},{level:2,title:"Allocation in JavaScript",slug:"allocation-in-javascript"},{level:2,title:"Using memory in JavaScript",slug:"using-memory-in-javascript"},{level:2,title:"Release when the memory is not needed anymore",slug:"release-when-the-memory-is-not-needed-anymore"},{level:2,title:"Garbage collection",slug:"garbage-collection"},{level:2,title:"Memory references",slug:"memory-references"},{level:2,title:"Reference-counting garbage collection",slug:"reference-counting-garbage-collection"},{level:2,title:"Cycles are creating problems",slug:"cycles-are-creating-problems"},{level:2,title:"Mark-and-sweep algorithm",slug:"mark-and-sweep-algorithm"},{level:2,title:"Cycles are not a problem anymore",slug:"cycles-are-not-a-problem-anymore"},{level:2,title:"Counter intuitive behavior of Garbage Collectors",slug:"counter-intuitive-behavior-of-garbage-collectors"},{level:2,title:"What are memory leaks?",slug:"what-are-memory-leaks"},{level:2,title:"The four types of common JavaScript leaks",slug:"the-four-types-of-common-javascript-leaks"},{level:2,title:"内存管理心得",slug:"内存管理心得"},{level:3,title:"指导思想",slug:"指导思想"},{level:3,title:"优化方案",slug:"优化方案"},{level:2,title:"参考文章",slug:"参考文章"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" How JavaScript works: memory management + how to handle 4 common memory leaks \n \n JavaScript工作原理：内存泄露 + 如何处理4中常见的内存泄露 \n Overview \n \n 概览 \n \n Languages, like C, have low-level memory management primitives such as  malloc()  and  free() . These primitives are used by the developer to explicitly allocate and free memory from and to the operating system. \n \n 像C这样的语言，拥有底层内存管理原语，例如  malloc()  和  free() 。开发人员使用这些原语显式地分配和释放操作系统中的内存。 \n \n \n 关于原语定义可参考 原语-百度百科 和 什么是『原语』？ \n \n At the same time, JavaScript allocates memory when things (objects, strings, etc.) are created and “automatically” frees it up when they are not used anymore, a process called garbage collection. This seemingly “automatical” nature of freeing up resources is a source of confusion and gives JavaScript (and other high-level-language) developers the false impression they can choose not to care about memory management.  This is a big mistake . \n \n 与此同时，当创建事物(对象，字符串等)的时候，JavaScript 分配内存并且当它们不再使用的时候 \"自动释放\" 内存，这一过程称为内存垃圾回收。这个看起来 \"自动化释放资源\" 的特性是引起混乱的原因，并且给予 JavaScript(及其它高级语言)开发者一个错误的印象即他们可以选择忽略内存管理。 这是一个巨大的错误 。 \n \n Even when working with high-level languages, developers should have an understanding of memory management (or at least the basics). Sometimes there are issues with the automatic memory management (such as bugs or implementation limitations in the garbage collectors, etc.) which developers have to understand in order to handle them properly (or to find a proper workaround, with a minimum trade off and code debt). \n \n 即使是当使用高级语言的时候，开发者也应该要理解内存管理(或者至少是一些基础)。有时候自动化内存管理会存在一些问题(比如垃圾回收中的 bugs 或者实施的局限性等等)，为了能够合理地处理内存泄漏问题(或者以最小代价和代码缺陷来寻找一个合适的方案)，开发者就必须理解内存管理。 \n Memory life cycle \n \n 内存生命周期 \n \n No matter what programming language you’re using, memory life cycle is pretty much always the same: \n \n 不管你使用哪种编程语言，内存生命周期几乎是一样的： \n \n \n Here is an overview of what happens at each step of the cycle: \n \n 以下是每一步生命周期所发生事情的一个概述: \n \n \n Allocate memory  — memory is allocated by the operating system which allows your program to use it. In low-level languages (e.g. C) this is an explicit operation that you as a developer should handle. In high-level languages, however, this is taken care of for you. \n \n \n \n 分配内存 - 内存是由操作系统分配，这样程序就可以使用它。在底层语言(例如 C 语言)，开发者可以显式地操作内存。而在高级语言中，操作系统帮你处理。 \n \n \n \n Use memory  — this is the time when your program actually makes use of the previously allocated memory.  Read  and  write  operations are taking place as you’re using the allocated variables in your code. \n \n \n \n 使用内存 - 这是程序实际使用之前分配的内存的阶段。当你在代码中使用已分配的变量的时候，就会发生内存读写的操作。 \n \n \n \n Release memory  — now is the time to release the entire memory that you don’t need so that it can become free and available again. As with the  Allocate memory  operation, this one is explicit in low-level languages. \n \n \n \n 释放内存 - 该阶段你可以释放你不再使用的整块内存，该内存就可以被释放且可以被再利用。和内存分配操作一样，该操作也是用底层语言显式编写的。 \n \n \n For a quick overview of the concepts of the call stack and the memory heap, you can read our first post on the topic. \n \n 为快速浏览调用堆栈和动态内存管理的概念，你可以阅读第一篇 文章 。 \n What is memory? \n \n 什么是内存 \n \n Before jumping straight to memory in JavaScript, we’ll briefly discuss what memory is in general and how it works in a nutshell. \n \n 在直接跳向 JavaScript 内存管理之前，先来简要地介绍一下内存及其工作原理。 \n \n On a hardware level, computer memory consists of a large number of\n flip flops . Each flip flop contains a few transistors and is capable of storing one bit. Individual flip flops are addressable by a  unique identifier , so we can read and overwrite them. Thus, conceptually, we can think of our entire computer memory as a just one giant array of bits that we can read and write. \n \n 从硬件层面看，计算机内存是由大量的 flip flops 所组成的(这里大概查了下，即大量的二进制电路所组成的)。每个 flip flop 包含少量晶体管并能够存储一个比特位。单个的 flip flops 可以通过一个 唯一标识符 寻址，所以就可以读和覆写它们。因此，理论上，我们可以把整个计算机内存看成是由一个巨大的比特位数组所组成的，这样就可以进行读和写。 \n \n Since as humans, we are not that good at doing all of our thinking and arithmetic in bits, we organize them into larger groups, which together can be used to represent numbers. 8 bits are called 1 byte. Beyond bytes, there are words (which are sometimes 16, sometimes 32 bits). \n \n 作为人类，我们并不擅长用位来进行所有的逻辑思考和计算，所以我们把位组织成一个更大的组，这样就可以用来表示数字。8 位称为一字节。除了字节还有字(16 或 32 位)。 \n \n A lot of things are stored in this memory: \n \n 内存中存储着很多东西： \n \n \n All variables and other data used by all programs. \n The programs’ code, including the operating system’s. \n \n \n \n 所有变量及所有程序使用的其他数据 \n 程序代码，包括操作系统的代码 \n \n \n The compiler and the operating system work together to take care of most of the memory management for you, but we recommend that you take a look at what’s going on under the hood. \n \n 编译器和操作系统一起协作来为你进行内存管理，但是建议你了解一下底层是如何实现的。 \n \n When you compile your code, the compiler can examine primitive data types and calculate ahead of time how much memory they will need. The required amount is then allocated to the program in the call stack space. The space in which these variables are allocated is called the stack space because as functions get called, their memory gets added on top of the existing memory. As they terminate, they are removed in a LIFO (last-in, first-out) order. For example, consider the following declarations: \n \n 当编译代码的时候，编译器会检查原始数据类型并提前计算出程序运行所需要的内存大小。在所谓的静态堆栈空间中，所需的内存大小会被分配给程序。这些变量所分配到的内存所在的空间之所以被称为静态内存空间是因为当调用函数的时候，函数所需的内存会被添加到现存内存的顶部。当函数中断，它们被以 LIFO(后进先出) 的顺序移出内存。比如，考虑如下代码： \n \n int n ;   // 4 字节 \nint x [ 4 ] ;   // 4个元素的数组 每个元素4个字节 \ndouble m ;   // 8 字节 \n \n 1 2 3 The compiler can immediately see that the code requires  4 + 4 × 4 + 8 = 28  bytes. \n \n 编译器会立即计算出代码所需的内存：4 + 4 x 4 + 8 = 28 字节。 \n \n \n That’s how it works with the current sizes for integers and doubles. About 20 years ago, integers were typically 2 bytes, and double 4 bytes. Your code should never have to depend on what is at this moment the size of the basic data types. \n 编译器是这样处理当前整数和浮点数的大小的。大约 20 年前，整数一般是 2 字节而 浮点数是 4 字节。代码不用依赖于当前基础数据类型的字节大小。 \n \n The compiler will insert code that will interact with the operating system to request the necessary number of bytes on the stack for your variables to be stored. \n \n 编译器会插入标记，标记会和操作系统协商从堆栈中获取所需要的内存大小，以便在堆栈中存储变量。 \n \n In the example above, the compiler knows the exact memory address of each variable. In fact, whenever we write to the variable  n , this gets translated into something like “memory address 4127963” internally. \n \n 在以上示例中，编译知道每个变量的准确内存地址。事实上，当你编写变量 n 的时候，会在内部把它转换为类似 \"内存地址 412763\" 的样子。 \n \n Notice that if we attempted to access  x[4]  here, we would have accessed the data associated with m . That’s because we’re accessing an element in the array that doesn’t exist — it’s 4 bytes further than the last actual allocated element in the array which is  x[3] , and may end up reading (or overwriting) some of  m’ s bits. This would almost certainly have very undesired consequences for the rest of the program. \n \n 注意到这里当我们试图访问  x[4]  时候，将会访问到  m  相关的数据。这是因为我们访问了数组中不存在的数组元素－它超过了最后一个实际分配到内存的数组元素  x[3] 的 4 字节，并且有可能会读取(或者覆写)  m  的数据。这几乎可以确定会产生其它程序所预料不到的后果。 \n \n \n When functions call other functions, each gets its own chunk of the stack when it is called. It keeps all its local variables there, but also a program counter that remembers where in its execution it was. When the function finishes, its memory block is once again made available for other purposes. \n \n 当函数调用其它函数的时候，各个函数都会在被调用的时候取得其在堆栈中的各自分片内存地址。函数会把保存它所有的本地变量，但也会有一个程序计数器用来记住函数在其执行环境中的地址。当函数运行结束时，其内存块可以再次被用作其它用途。 \n Dynamic allocation \n \n 动态内存分配 \n \n Unfortunately, things aren’t quite as easy when we don’t know at compile time how much memory a variable will need. Suppose we want to do something like the following: \n \n 不幸的是，想要知道编译时一个变量需要多少内存并没有想象中那般容易。设想一下若要做类似如下事情： \n \n int n  =   readInput ( ) ;   // 从用户读取信息 \n ... \n // 创建一个含有 n 个元素的数组 \n \n 1 2 3 Here, at compile time, the compiler does not know how much memory the array will need because it is determined by the value provided by the user. \n \n 这里，编译器并不知道编译时数组需要多少内存，因为这是由用户输入的数组元素的值所决定的。 \n \n It, therefore, cannot allocate room for a variable on the stack. Instead, our program needs to explicitly ask the operating system for the right amount of space at run-time. This memory is assigned from the  heap space . The difference between static and dynamic memory allocation is summarized in the following table: \n \n 因此，就 不能够 在堆栈中为变量分配内存空间。相反，程序需要在运行时显式地从操作系统分配到正确的内存空间。这里的内存是由动态内存空间所分配的。静态和动态内存分配的差异总结如下图表： \n \n \n Differences between statically and dynamically allocated memory \n To fully understand how dynamic memory allocation works, we need to spend more time on  pointers , which might be a bit too much of a deviation from the topic of this post. If you’re interested in learning more, just let me know in the comments and we can go into more details about pointers in a future post. \n \n 为了完全理解动态内存分配的工作原理，我们需要花点时间了解指针，这个就可能有点跑题了。如果你对指针感兴趣，请留言，然后我们将会在以后的章节中讨论更多关于指针的内容。 \n Allocation in JavaScript \n \n JavaScript中的内存分配 \n \n Now we’ll explain how the first step (allocate memory) works in JavaScript. \n \n 现在，我们将会介绍在 JavaScript 中是如何分配内存的((第一步)。 \n \n JavaScript relieves developers from the responsibility to handle memory allocations — JavaScript does it by itself, alongside declaring values. \n \n JavaScript 通过声明变量值，自己处理内存分配工作而不需要开发者干涉。 \n \n var  n  =   374 ;   // 为数字分配内存 \n var  s  =   'sessionstack' ;   // 为字符串分配内存 \n var  o  =   { \n  a :   1 , \n  b :   null \n } ;   // 为对象及其值分配内存 \n var  a  =   [ 1 ,   null ,   'str' ] ;    // (类似对象)为数组及其数组元素值分配内存 \n\n function   f ( a )   { \n   return  a  +   3 ; \n }   // 分配一个函数(一个可调用对象) \n\n // 函数表达式也分配一个对象 \nsomeElement . addEventListener ( 'click' ,   function ( )   { \n  someElement . style . backgroundColor  =   'blue' ; \n } ,   false ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 Some function calls result in object allocation as well: \n \n 一些函数调用也会分配一个对象： \n \n var  d  =   new   Date ( ) ;   // 为日期对象分配内存 \n\n var  e  =  document . createElement ( 'div' ) ;   // 为DOM元素分配内存 \n \n 1 2 3 Methods can allocate new values or objects: \n \n 可以分配值或对象的方法： \n \n var  s1  =   'sessionstack' ; \n var  s2  =  s1 . substr ( 0 ,   3 ) ;   // s2 是一个新字符串 \n // 因为字符串是不可变的, 所以 Javascript 可能会选择不分配内存而只是存储数组 [0, 3] 的内存地址范围。 \n\n var  a1  =   [ 'str1' ,   'str2' ] ; \n var  a2  =   [ 'str3' ,   'str4' ] ; \n var  a3  =  a1 . concat ( a2 ) ;  \n // 包含 4 个元素的新数组由 a1 和 a2 数组元素所组成 \n \n 1 2 3 4 5 6 7 8 #  Using memory in JavaScript \n \n JavaScript中的使用内存 \n \n Using the allocated memory in JavaScript basically, means reading and writing in it. \n \n JavaScript 中使用分配的内存主要指的是内存读写。 \n \n This can be done by reading or writing the value of a variable or an object property or even passing an argument to a function. \n \n 可以通过为变量或者对象属性赋值，亦或是为函数传参来使用内存。 \n Release when the memory is not needed anymore \n \n 释放不再使用的内存 \n \n Most of the memory management issues come at this stage. \n \n 大多数的内存管理问题出现在这一阶段。 \n \n The hardest task here is to figure out when the allocated memory is not needed any longer. It often requires the developer to determine where in the program such piece of memory is not needed anymore and free it. \n \n 难点在于检测出何时分配的内存是闲置的。它经常会要求开发者来决定程序中的这段内存是否已经不再使用，然后释放它。 \n \n High-level languages embed a piece of software called  garbage collector  which job is to track memory allocation and use in order to find when a piece of allocated memory is not needed any longer in which case, it will automatically free it. \n \n 高级程序语言集成了一块称为 垃圾回收器 的软件，该软件的工作就是追踪内存分配和使用情况以便找出并自动释放闲置的分配内存片段。 \n \n Unfortunately, this process is an approximation since the general problem of knowing whether some piece of memory is needed is undecidable (can’t be solved by an algorithm). \n \n 不幸的是，这是个近似的过程，因为判定一些内存片段是否闲置的普遍问题在于其不可判定性(不能为算法所解决)。 \n \n Most garbage collectors work by collecting memory which can no longer be accessed, e.g. all variables pointing to it went out of scope. That’s, however, an under-approximation of the set of memory spaces that can be collected, because at any point a memory location may still have a variable pointing to it in scope, yet it will never be accessed again. \n \n 大多数的垃圾回收器会收集那些不再被访问的内存，比如引用该内存的所有变量超出了内存寻址范围。然而还是会有低于近似值的内存空间被收集，因为在任何情况下仍然可能会有变量在内存寻址范围内引用该内存地址，即使该内存是闲置的。 \n Garbage collection \n \n 垃圾回收 \n \n Due to the fact that finding whether some memory is “not needed anymore” is undecidable, garbage collections implement a restriction of a solution to the general problem. This section will explain the necessary notions to understand the main garbage collection algorithms and their limitations. \n \n 由于找出 \"不再使用\" 的内存的不可判定性，针对这一普遍问题，垃圾回收实现了一个有限的解决方案。本小节将会阐述必要的观点来理解主要的内存垃圾回收算法及其局限性。 \n Memory references \n \n 内存引用 \n \n The main concept garbage collection algorithms rely on is the one of reference. \n \n 引用是内存垃圾回收算法所依赖的主要概念之一。 \n \n Within the context of memory management, an object is said to reference another object if the former has an access to the latter (can be implicit or explicit). For instance, a JavaScript object has a reference to its  prototype  (implicit reference) and to its properties’ values ( explicit reference ). \n \n 在内存管理上下文中，如果对象 A 访问了另一个对象 B 表示 A 引用了对象 B(可以隐式或显式)。举个栗子，一个 JavaScript 对象有引用了它的 原型 (隐式引用)和它的属性值(显式引用)。 \n \n In this context, the idea of an “object” is extended to something broader than regular JavaScript objects and also contains function scopes (or the global  lexical scope ). \n \n 在这个上下文中，\"对象\" 的概念被拓展超过了一般的 JavaScript 对象, 并且还包含函数作用域(或者全局词法作用域)。 \n \n \n Lexical Scoping defines how variable names are resolved in nested functions: inner functions contain the scope of parent functions even if the parent function has returned. \n词法作用域定义了如何在嵌套函数中解析变量名。即使父函数已经返回，内部的函数仍然会包含父函数的作用域。 \n Reference-counting garbage collection \n \n 垃圾回收引用计数 \n \n This is the simplest garbage collection algorithm. An object is considered “garbage collectible” if there are zero references pointing to it. \n \n 这是最简单的内存垃圾回收算法。当一个对象被引用0次，会被标记为 \"可回收内存垃圾\"。 \n \n Take a look at the following code: \n \n 看如下代码： \n \n var  o1  =   { \n  o2 :   { \n    x :   1 \n   } \n } ; \n\n // 创建两个对象。 \n // 'o1' 引用对象 'o2' 作为其属性。全部都是不可回收的。 \n\n // 'o3' 是第二个引用 'o1' 对象的变量 \n var  o3  =  o1 ; \n\no1  =   1 ;   // 现在，原先在 'o1' 中的对象只有一个单一的引用，以变量 'o3' 来表示 \n\n // 引用对象的 'o2' 属性。 \n // 该对象有两个引用：一个是作为属性，另一个是 'o4' 变量 \n var  o4  =  o3 . o2 ; \n\n // 'o1' 对象现在只有 0 引用，它可以被作为内存垃圾回收。 \n // 然而，其 'o2' 属性仍然被变量 'o4' 所引用，所以它的内存不能够被释放。 \no3  =   '374' ; \n\no4  =   null ; \n // 'o1' 中的 'o2' 属性现在只有 0 引用了。所以 'o1' 对象可以被回收。 \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 #  Cycles are creating problems \n \n 循环引用是个问题 \n \n There is a limitation when it comes to cycles. In the following example, two objects are created and reference one another, thus creating a cycle. They will go out of scope after the function call, so they are effectively useless and could be freed. However, the reference-counting algorithm considers that since each of the two objects is referenced at least once, neither can be garbage-collected. \n \n 循环引用会造成限制。在以下的示例中，创建了两个互相引用的对象，这样就会造成循环引用。函数调用之后他们将会超出范围，所以，实际上它们是无用且可以释放对他们的引用。然而，引用计数算法会认为由于两个对象都至少互相引用一次，所以他们都不可回收的。 \n \n function   f ( )   { \n   var  o1  =   { } ; \n   var  o2  =   { } ; \n  o1 . p  =  o2 ;   // o1 references o2 \n  o2 . p  =  o1 ;   // o2 references o1. This creates a cycle. \n } \n\n f ( ) ; \n \n 1 2 3 4 5 6 7 8 \n Mark-and-sweep algorithm \n \n 标记清除法 \n \n In order to decide whether an object is needed, this algorithm determines whether the object is reachable. \n \n 为了判断是否需要释放对对象的引用，算法会确定该对象是否可获得。 \n \n The Mark-and-sweep algorithm goes through these 3 steps: \n \n 标记-清除算法包含三个步骤： \n \n \n Roots: In general, roots are global variables which get referenced in the code. In JavaScript for example, a global variable that can act as a root is the “window” object. The identical object in Node.js is called “global”. A complete list of all roots gets built by the garbage collector. \n \n \n \n 一般来说，根指的是代码中引用的全局变量。就拿 JavaScript 来说，window 对象即是根的全局变量。Node.js 中相对应的变量为 \"global\"。垃圾回收器会构建出一份所有根变量的完整列表。 \n \n \n \n The algorithm then inspects all roots and their children and marks them as active (meaning, they are not garbage). Anything that a root cannot reach will be marked as garbage. \n \n \n \n 随后，算法会检测所有的根变量及他们的后代变量并标记它们为激活状态(表示它们不可回收)。任何根变量所到达不了的变量(或者对象等等)都会被标记为内存垃圾。 \n \n \n \n Finally, the garbage collector frees all memory pieces that are not marked as active and returns that memory to the OS. \n \n \n \n 最后，垃圾回收器会释放所有非激活状态的内存片段然后返还给操作系统。 \n \n \n \n A visualization of the mark and sweep algorithm in action \n This algorithm is better than the previous one since “an object has zero reference” leads to this object being unreachable. The opposite is not true as we have seen with cycles. \n \n 该算法比之前的算法要好，因为对象零引用可以让对象不可获得。反之则不然，正如之前所看到的循环引用。 \n \n As of 2012, all modern browsers ship a mark-and-sweep garbage-collector. All improvements made in the field of JavaScript garbage collection (generational/incremental/concurrent/parallel garbage collection) over the last years are implementation improvements of this algorithm (mark-and-sweep), but not improvements over the garbage collection algorithm itself, nor its goal of deciding whether an object is reachable or not. \n \n 从 2012 年起，所有的现代浏览器都内置了一个标记－清除垃圾回收器。前些年所有对于 JavaScript 内存垃圾收集(分代/增量/并发/并行 垃圾收集)的优化都是针对标记-清除算法的实现的优化，但既没有提升垃圾收集算法本身，也没有提升判定对象是否可获得的能力。 \n \n In this  article , you can read in a greater detail about tracing garbage collection that also covers mark-and-sweep along with its optimizations. \n \n 你可以查看这篇 文章  来了解追踪内存垃圾回收的详情及包含优化了的标记-清除算法。 \n Cycles are not a problem anymore \n \n 循环引用不在是问题 \n \n In the first example above, after the function call returns, the two objects are not referenced anymore by something reachable from the global object. Consequently, they will be found unreachable by the garbage collector. \n \n 在之前的第一个示例中，当函数返回，全局对象不再引用这两个对象。结果，内存垃圾回收器发现它们是不可获得的。 \n \n \n Even though there are references between the objects, they’re not reachable from the root. \n \n 即使两个对象互相引用，也不能够从根变量获得他们。 \n Counter intuitive behavior of Garbage Collectors \n \n 内存垃圾回收器的反直觉行为 \n \n Although Garbage Collectors are convenient they come with their own set of trade-offs. One of them is non-determinism. In other words, GCs are unpredictable. You can’t really tell when a collection will be performed. This means that in some cases programs use more memory that it’s actually required. In other cases, short-pauses may be noticeable in particularly sensitive applications. Although non-determinism means one cannot be certain when a collection will be performed, most GC implementations share the common pattern of doing collection passes during allocation. If no allocations are performed, most GCs stay idle. Consider the following scenario: \n \n 虽然内存垃圾回收器很方便，但是它们也有其一系列的代价。其中之一便是不确定性。也就是说内存垃圾回收具有不可预见性。你不能确定内存垃圾收集的确切时机。这意味着在某些情况下，程序会使用比实际需要更多的内存。在其它情况下，在特定的交互敏感的程序中，你也许需要注意那些内存垃圾收集短暂停时间。虽然不确定性意味着不能够确定什么时候可以进行内存垃圾收集，但是大多数 GC 的实现都是在 内存分配期间 进行内存垃圾回收的一般模式。如果没有进行内存分配，大多数的内存垃圾回收就会保持闲置状态。考虑以下情况： \n \n \n A sizable set of allocations is performed. \n \n \n \n 分配一段固定大小的内存 \n \n \n \n Most of these elements (or all of them) are marked as unreachable (suppose we null a reference pointing to a cache we no longer need). \n \n \n \n 大多数的元素(或所有)被标记为不可获得(假设我们赋值我们不再需要的缓存为 null ) \n \n \n \n No further allocations are performed. \n \n \n \n 不再分配其它内存。 \n \n \n In this scenario, most GCs will not run any further collection passes. In other words, even though there are unreachable references available for collection, these are not claimed by the collector. These are not strictly leaks but still, result in higher-than-usual memory usage. \n \n 在该情况下，大多数的内存垃圾回收器不会再运行任何的内存垃圾回收。换句话说，即使可以对该不可获得的引用进行垃圾回收，但是内存收集器不会进行标记。虽然这不是严格意义上的内存泄漏，但是这会导致高于平常的内存使用率。 \n What are memory leaks? \n \n 什么是内存泄露？ \n \n Just like the memory suggests, memory leaks are pieces of memory that the application have used in the past but is not needed any longer but has not yet been return back to the OS or the pool of free memory. \n \n 正如内存管理所说的那样，内存泄漏即一些程序在过去时使用但处于闲置状态，却没有返回给操作系统或者可用的内存池。 \n \n \n Programming languages favor different ways of managing memory. However, whether a certain piece of memory is used or not is actually an  undecidable problem . In other words, only developers can make it clear whether a piece of memory can be returned to the operating system or not. \n \n 编程语言支持多种内存管理方法。然而，某个内存片段是否被使用是一个不确定的问题。换句话说，只有开发人员清楚某个内存片段是否可以返回给操作系统。 \n \n Certain programming languages provide features that help developers do this. Others expect developers to be completely explicit about when a piece of memory is unused. Wikipedia has good articles on manual and automatic memory management. \n \n 某些编程语言会为开发者提供功能函数来解决这个问题。其它的编程语言完全依赖于开发者全权掌控哪个内存片段是可回收的。维基百科上有关于手动和自动内存管理的好文章。 \n The four types of common JavaScript leaks \n \n 四种常见的 JavaScript 内存泄漏 \n \n \n Global variables \n \n \n \n 全局变量 \n \n \n JavaScript handles undeclared variables in an interesting way: when a undeclared variable is referenced, a new variable gets created in the global object. In a browser, the global object would be window, which means that \n \n JavaScript 以一种有趣的方式来处理未声明变量：当引用一个未声明的变量，会在全局对象上创建一个新的变量。在浏览器中，全局对象是  window  ，这意味着如下代码： \n \n function   foo ( arg )   { \n    bar  =   \"some text\" ; \n } \n \n 1 2 3 is the equivalent of: \n \n 等同于： \n \n function   foo ( arg )   { \n    window . bar  =   \"some text\" ; \n } \n \n 1 2 3 Let’s say the purpose of  bar  is to only reference a variable in the foo function. A redundant global variable will be created, however, if you don’t use  var  to declare it. In the above case, this won’t cause much harm. You can surely imagine a more damaging scenario though. \n \n 变量  bar  本意是只能在  foo  函数中被引用。但是如果你没有用  var  来声明变量，那么将会创建一个多余的全局变量。在上面的例子中，并不会造成大的事故。但你可以很自然地想象一个更具破坏性的场景。 \n \n You can also accidentally create a global variable using  this : \n \n 你也可以使用  this  关键字不经意地创建一个全局变量。 \n \n function   foo ( )   { \n   this . var1  =   \"potential accidental global\" ; \n } \n\n // 调用 foo 函数自身，this 会指向全局对象(window)而不是未定义 \n \n 1 2 3 4 5 \n You can avoid all this by adding  ‘use strict’;  at the beginning of your JavaScript file which would switch on a much stricter mode of parsing JavaScript which prevents the unexpected creation of global variables. \n 你可以通过在 JavaScript 文件的顶部添加  'use strict'  来避免以上的所有问题， 'use strict'  会切换到更加严格的 JavaScript 解析模式，这样就可以防止创建意外的全局变量。 \n \n Unexpected globals is certainly an issue, however, more often than not your code would be infested with explicit global variables which by definition cannot be collected by the garbage collector. Special attention needs to be given to global variables used to temporarily store and process large bits of information. Use global variables to store data if you must but when you do, make sure to  assign it as null or reassign it  once you are done with it. \n \n 意外的全局变量的确是个问题，而代码经常会被显式定义的全局变量所污染，根据定义这些全局变量是不会被内存垃圾回收器所收集的。你需要特别注意的是使用全局变量来临时存储和处理大型的位信息。只有在必要的时候使用全局变量来存储数据，记得一旦你不再使用的时候，把它赋值为 null 或者对其再分配。 \n \n \n Timers or callbacks that are forgotten \n \n \n \n 定时器及被遗忘的回调函数 \n \n \n Let’s take  setInterval  for example as it’s often used in JavaScript. \n \n 因为经常在 JavaScript 中使用  setInterval ，所以让我们以它为例。 \n \n Libraries which provide observers and other instruments that accept callbacks usually make sure all references to the callbacks become unreachable once their instances are unreachable too. Still, the code below is not a rare find: \n \n 框架中提供了观察者和接受回调的其它指令通常会确保当他们的实例不可获得的时候，所有对回调的引用都会变成不可获得。很容易找到如下代码： \n \n var  serverData  =   loadData ( ) ; \n setInterval ( function ( )   { \n     var  renderer  =  document . getElementById ( 'renderer' ) ; \n     if ( renderer )   { \n        renderer . innerHTML  =   JSON . stringify ( serverData ) ; \n     } \n } ,   5000 ) ;   //This will be executed every ~5 seconds. \n \n 1 2 3 4 5 6 7 The snippet above shows the consequences of using timers that reference nodes or data that’s no longer needed. \n \n 以上代码片段展示了使用定时器来引用不再需要的节点或数据的后果。 \n \n The renderer object may be replaced or removed at some point which would make the block encapsulated by the interval handler redundant. If this happens, neither the handler, nor its dependencies would be collected as the interval would need to be stopped first (remember, it’s still active). It all boils down to the fact that  serverData  which surely stores and processes loads of data will not be collected either. \n \n renderer  对象会在某些时候被替换或移除，这样就会导致由定时处理程序封装的代码变得冗余。当这种情况发生的时候，不管是定时处理程序还是它的依赖都不会被垃圾回收，这是由于需要先停止定时器(记住，定时器仍然处于激活状态)。这可以归结为保存和处理数据加载的  serverData  变量也不会被垃圾回收。 \n \n When using observers, you need to make sure you make an explicit call to remove them once you are done with them (either the observer is not needed anymore, or the object will become unreachable). \n \n 当使用观察者的时候，你需要确保一旦你不再需要它们的时候显式地移除它们(不再需要观察者或者对象变得不可获得)。 \n \n Luckily, most modern browsers would do the job for you: they’ll automatically collect the observer handlers once the observed object becomes unreachable even if you forgot to remove the listener. In the past some browsers were unable to handle these cases (good old IE6). \n \n 幸运的是，大多数现代浏览器都会替你进行处理：当被观察者对象变得不可获得时，即使你忘记移除事件监听函数，浏览器也会自动回收观察者处理程序。以前，一些老掉牙的浏览器处理不了这些情况(如老旧的 IE6)。 \n \n Still, though, it’s in line with best practices to remove the observers once the object becomes obsolete. See the following example: \n \n 那么，最佳实践是当对象被废弃的时候，移除观察者处理程序。查看如下例子： \n \n var  element  =  document . getElementById ( 'launch-button' ) ; \n var  counter  =   0 ; \n\n function   onClick ( event )   { \n   counter ++ ; \n   element . innerHtml  =   'text '   +  counter ; \n } \n\nelement . addEventListener ( 'click' ,  onClick ) ; \n\n // Do stuff \n\nelement . removeEventListener ( 'click' ,  onClick ) ; \nelement . parentNode . removeChild ( element ) ; \n\n // Now when element goes out of scope, \n // both element and onClick will be collected even in old browsers // that don't handle cycles well. \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 You no longer need to call  removeEventListener  before making a node unreachable as modern browsers support garbage collectors that can detect these cycles and handle them appropriately. \n \n 在让一个 DOM 节点不可获得之前，你不再需要调用 removeEventListener，因为现代浏览器支持用内存垃圾回收器来检测并适当地处理 DOM 节点的生命周期。 \n \n If you leverage the  jQuery  APIs (other libraries and frameworks support this too) you can also have the listeners removed before a node is made obsolete. The library would also make sure there are no memory leaks even when the application is running under older browser versions. \n \n 如果你使用 jQuery API(其它的库和框架也支持的 API)，你可以在废弃节点之前移除事件监听函数。jQuery 也会确保即使在老旧的浏览器之中，也不会产生内存泄漏。 \n \n \n Closures \n \n \n \n 闭包 \n \n \n A key aspect of JavaScript development are closures: an inner function that has access to the outer (enclosing) function’s variables. Due to the implementation details of the JavaScript runtime, it is possible to leak memory in the following way: \n \n 闭包是 JavaScript 的一个重要功能：嵌套函数可以访问外部(封闭)函数的变量。鉴于 JavaScript 运行时的实现细节，以下方法可能会造成内存泄漏： \n \n var  theThing  =   null ; \n\n var   replaceThing   =   function   ( )   { \n   var  originalThing  =  theThing ; \n   var   unused   =   function   ( )   { \n     if   ( originalThing )   // a reference to 'originalThing' \n      console . log ( \"hi\" ) ; \n   } ; \n  theThing  =   { \n    longStr :   new   Array ( 1000000 ) . join ( '*' ) , \n     someMethod :   function   ( )   { \n      console . log ( \"message\" ) ; \n     } \n   } ; \n } ; \n\n setInterval ( replaceThing ,   1000 ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 Once  replaceThing  is called,  theThing  gets a new object which consists of a big array and a new closure ( someMethod ). Yet,  originalThing  is referenced by a closure that’s held by the  unused  variable (which is  theThing  variable from the previous call to  replaceThing ). The thing to remember is that  once a scope for closures is created for closures in the same parent scope, the scope is shared . \n \n 当调用  replaceThing  的时候， theThing  对象由一个大数组和新的闭包( someMethod )所组成。而  originalThing  由  unused  变量创建的闭包所引用(即引用  replaceThing  函数之前的  theThing  变量)。 需要记住的是当为同一个父作用域中的闭包创建闭包作用域的时候，该闭包作用域是共享的 。 \n \n In this case, the scope created for the closure  someMethod  is shared with unused.  unused  has a reference to  originalThing . Even though  unused  is never used,  someMethod  can be used through  theThing  outside of the scope of  replaceThing  (e.g. somewhere globally). And as  someMethod  shares the closure scope with  unused , the reference  unused  has to  originalThing  forces it to stay active (the whole shared scope between the two closures). This prevents its collection. \n \n 在这样的情况下，闭包  someMethod  和  unused  共享相同的作用域。 unused  引用了  origintalThing 。即使  unused  永不使用，也可以通过  theThing  在  replaceThing  的作用域外使用  someMethod  函数(例如，全局某处)。然后由于  someMethod  和  unused  共享相同的闭包作用域， unused  变量引用  originalThing  会强迫  unused  保持激活状态(两个闭包共享作用域)。这会阻止内存垃圾回收。 \n \n In the above example, the scope created for the closure  someMethod  is shared with  unused , while  unused  references  originalThing .  someMethod  can be used through  theThing  outside of the  replaceThing  scope, despite the fact that unused is never used. The fact that  unused  references  originalThing  requires that it remains active since  someMethod  shares the closure scope with unused. \n \n 在以上例子中，闭包  someMethod  和  unused  共享作用域，而  unused  引用  origintalThing 。可以在  replaceThing  作用域外通过  theThing  使用  someMethod ，即使  unused  从未被使用。事实上，由于  someMethod  和  unused  共享闭包作用域， unused  引用  origintalThing  要求  unused  保持激活状态。 \n \n All this can result in a considerable memory leak. You can expect to see a spike in memory usage when the above snippet is run over and over again. Its size won’t shrink when the garbage collector runs. A linked list of closures is created (its root is  theThing  variable in this case), and each the closure scopes carries forward an indirect reference to the big array. \n \n 所有的这些行为会导致内存泄漏。当你不断地运行如上代码片段，你将会发现飙升的内存使用率。当内存垃圾回收器运行的时候，这些内存使用率不会下降。这里会创建出一份闭包链表(当前情况下，其根变量是  theThing )，每个闭包作用域都间接引用了大数组。 \n \n This issue was found by the Meteor team and  they have a great article  that describes the issue in great detail. \n \n 该问题是由 Metor 小组发现的并且他们写了一篇很好的 文章 来详细描述该问题。 \n \n \n Out of DOM references \n \n \n \n 出于DOM引用 \n \n \n There are cases in which developers store DOM nodes inside data structures. Suppose you want to rapidly update the contents of several rows in a table. If you store a reference to each DOM row in a dictionary or an array, there will be two references to the same DOM element: one in the DOM tree and another in the dictionary. If you decide to get rid of these rows, you need to remember to make both references unreachable. \n \n 有时候，开发者会在数据结构中存储 DOM 节点。假设你想要快速更新几行表格内容。如果你在一个字典或者数组中保存对每个表格行的引用，这将会造成重复引用相同的 DOM 元素：一个在 DOM 树中而另一个在字典中。如果你想要释放对这些表格行的引用，你需要记得让这些引用变成不可获得。 \n \n var  elements  =   { \n    button :  document . getElementById ( 'button' ) , \n    image :  document . getElementById ( 'image' ) \n } ; \n\n function   doStuff ( )   { \n    elements . image . src  =   'http://example.com/image_name.png' ; \n } \n\n function   removeImage ( )   { \n     // image 元素是 body 元素的直系后代元素 \n    document . body . removeChild ( document . getElementById ( 'image' ) ) ; \n     // 这时，我们仍然在 elements 全局对象中引用了 #button 元素 \n     // 换句话说，按钮元素仍然在内存中且不能够被垃圾回收器收集 \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 There’s an additional consideration that has to be taken into account when it comes to references to inner or leaf nodes inside a DOM tree. If you keep a reference to a table cell (a  <td>  tag) in your code and decide to remove the table from the DOM yet keep the reference to that particular cell, you can expect a major memory leak to follow. You might think that the garbage collector would free up everything but that cell. This will not be the case, however. Since the cell is a child node of the table and children keep references to their parents,  this single reference to the table cell would keep the whole table in memory . \n \n 你还需要额外考虑的情况是引用 DOM 树中的内节点或者叶节点。如果你在代码中保存着对一个单元格的引用，这时候当你决定从 DOM 中移除表格，却仍然会保持对该单元格的引用，这就会导致大量的内存泄漏。你可以认为内存垃圾回收器将会释放除了该单元格以外的内存。而这还没完。因为单元格是表格的一个后代元素而后代元素保存着对其父节点的引用， 对一个单元格的引用会导致无法释放整个表格所占用的内存 。 \n \n \n 以下非原文： \n 内存管理心得 \n 以下内容为个人原创分享。By  三月 。 \n 指导思想 \n 尽可能减少内存占用，尽可能减少 GC。 \n \n \n 减少 GC 次数 \n 浏览器会不定时回收垃圾内存，称为 GC，不定时触发，一般在向浏览器申请新内存时，浏览器会检测是否到达一个临界值再进行触发。一般来说，GC 会较为耗时，GC 触发时可能会导致页面卡顿及丢帧。故我们要尽可能避免GC的触发。GC 无法通过代码触发，但部分浏览器如 Chrome，可在 DevTools -> TimeLine 页面手动点击 CollectGarbage 按钮触发 GC。 \n \n \n 减少内存占用 \n 降低内存占用，可避免内存占用过多导致的应用/系统卡顿，App 闪退等，在移动端尤为明显。当内存消耗较多时，浏览器可能会频繁触发 GC。而如前所述，GC 发生在申请新内存时，若能避免申请新内存，则可避免GC 触发。 \n 优化方案 \n 使用对象池 \n \n 对象池  (英语：object pool pattern)是一种 设计模式 。 一个对象池包含一组已经初始化过且可以使用的对象，而可以在有需求时创建和销毁对象。池的用户可以从池子中取得对象，对其进行操作处理，并在不需要时归还给池子而非直接销毁它。这是一种特殊的工厂对象。 \n \n \n 若初始化、实例化的代价高，且有需求需要经常实例化，但每次实例化的数量较少的情况下，使用对象池可以获得显著的效能提升。从池子中取得对象的时间是可预测的，但新建一个实例所需的时间是不确定。 \n 以上摘自维基百科。 \n \n 使用对象池技术能显著优化需频繁创建对象时的内存消耗，但建议按不同使用场景做以下细微优化。 \n \n \n 按需创建 \n 默认创建空对象池，按需创建对象，用完归还池子。 \n \n \n 预创建对象 \n 如在高频操作下，如滚动事件、TouchMove事件、resize事件、for 循环内部等频繁创建对象，则可能会触发GC的发生。故在特殊情况下，可优化为提前创建对象放入池子。 \n 高频情况下，建议使用 截流/防抖 及任务队列相关技术。 \n \n \n 定时释放 \n 对象池内的对象不会被垃圾回收，若极端情况下创建了大量对象回收进池子却不释放只会适得其反。 \n 故池子需设计定时/定量释放对象机制，如以已用容量/最大容量/池子使用时间等参数来定时释放对象。 \n 其他优化tips \n \n \n 尽可能避免创建对象，非必要情况下避免调用会创建对象的方法，如  Array.slice 、 Array.map 、 Array.filter 、字符串相加、 $('div') 、 ArrayBuffer.slice  等。 \n \n \n 不再使用的对象，手动赋为 null，可避免循环引用等问题。 \n \n \n 使用  Weakmap \n \n \n 生产环境勿用  console.log  大对象，包括 DOM、大数组、ImageData、ArrayBuffer 等。因为  console.log  的对象不会被垃圾回收。详见 Will console.log prevent garbage collection? 。 \n \n \n 合理设计页面，按需创建对象/渲染页面/加载图片等。 \n \n \n 避免如下问题： \n \n 为了省事儿，一次性请求全部数据。 \n 为了省事儿，一次性渲染全部数据，再做隐藏。 \n 为了省事儿，一次性加载/渲染全部图片。 \n \n \n \n 使用重复 DOM 等，如重复使用同一个弹窗而非创建多个。 \n 如 Vue-Element 框架中，PopOver/Tooltip 等组件用于表格内时会创建 m * n 个实例，可优化为只创建一个实例，动态设置位置及数据。 \n \n \n \n \n ImageData 对象是 JS 内存杀手，避免重复创建 ImageData 对象。 \n \n \n 重复使用 ArrayBuffer。 \n \n \n 压缩图片、按需加载图片、按需渲染图片，使用恰当的图片尺寸、图片格式，如 WebP 格式。 \n 图片处理优化 \n 假设渲染一张 100KB 大小，300x500 的透明图片，粗略的可分为三个过程： \n \n \n 加载图片 \n 加载图片二进制格式到内存中并缓存，此时消耗了100KB 内存 & 100KB 缓存。 \n \n \n 解码图片 \n 将二进制格式解码为像素格式，此时占用宽 * 高 * 24（透明为32位）比特大小的内存,即 300 * 500 * 32，约等于 585 KB，这里约定名为像素格式内存。个人猜测此时浏览器会回收加载图片时创建的 100KB 内存。 \n \n \n 渲染图片 \n 通过 CPU 或 GPU 渲染图片，若为 GPU 渲染，则还需上传到 GPU 显存，该过程较为耗时，由图片尺寸 / 显存位宽决定，图片尺寸越大，上传时间越慢，占用显存越多。 \n \n \n \n 其中，较旧的浏览器如Firefox回收像素内存时机较晚，若渲染了大量图片时会内存占用过高。 \n \n PS：浏览器会复用同一份图片二进制内存及像素格式内存，浏览器渲染图片会按以下顺序去获取数据： \n 显存  >> 像素格式内存 >> 二进制内存 >> 缓存 >> 从服务器获取。我们需控制和优化的是二进制内存及像素内存的大小及回收。 \n 总结一下，浏览器渲染图片时所消耗内存由图片文件大小内存、宽高、透明度等所决定，故建议： \n \n \n 使用 CSS3、SVG、IconFont、Canvas 替代图片。展示大量图片的页面，建议使用 Canvas 渲染而非直接使用img标签。具体详见  Javascript的Image对象、图像渲染与浏览器内存两三事 。 \n \n \n 适当压缩图片，可减小带宽消耗及图片内存占用。 \n \n \n 使用恰当的图片尺寸，即响应式图片，为不同终端输出不同尺寸图片，勿使用原图缩小代替 ICON 等，比如一些图片服务如 OSS。 \n \n \n 使用恰当的图片格式，如使用WebP格式等。详细图片格式对比，使用场景等建议查看 web前端图片极限优化策略 。 \n \n \n 按需加载及按需渲染图片。 \n \n \n 预加载图片时，切记要将 img 对象赋为 null，否则会导致图片内存无法释放。 \n 当实际渲染图片时，浏览器会从缓存中再次读取。 \n \n \n 将离屏 img 对象赋为 null，src 赋为 null，督促浏览器及时回收内存及像素格式内存。 \n \n \n 将非可视区域图片移除，需要时再次渲染。和按需渲染结合时实现很简单，切换 src 与 v-src 即可。 \n 参考文章 \n \n JavaScript工作原理：内存泄露 + 如何处理4中常见的内存泄露 \n \n ",summary:"JavaScript工作原理：内存泄露 + 如何处理4中常见的内存泄露\n\nOverview\n>概览\n\nLanguages, like C, have low-level memory management primitives such as malloc() and free(). These primitives are used by the developer to explicitly allocate and free memory from and to the operating system.\n>像C这样的语言，拥有底层内存管理原语，例如 malloc() 和 free()。 ...",id:"post",pid:"post",readingTime:{text:"22 min read",minutes:21.71,time:1302600.0000000002,words:4342}},{title:"堆和栈的区别",frontmatter:{title:"堆和栈的区别",description:"堆和栈的区别",date:"2021-06-09",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210609120039.jpg",tags:["计算机知识","转载","翻译"],meta:[{name:"title",content:"堆和栈的区别"},{name:"description",content:"堆和栈的区别"},{name:"keywords",content:"堆, 栈, 区别"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2021-06-09-stack-heap-diff.html",relativePath:"_posts/2021-06-09-stack-heap-diff.md",key:"v-db94b744",path:"/2021/06/09/stack-heap-diff/",headers:[{level:2,title:"堆和栈存储在哪里？",slug:"堆和栈存储在哪里"},{level:2,title:"为什么要区分堆和栈？",slug:"为什么要区分堆和栈"},{level:2,title:"堆和栈的区别",slug:"堆和栈的区别-2"},{level:2,title:"线程如何与栈和堆交互？ 栈和堆如何在多线程中工作？",slug:"线程如何与栈和堆交互-栈和堆如何在多线程中工作"},{level:2,title:"为什么堆是线程共享的而栈不是？",slug:"为什么堆是线程共享的而栈不是"},{level:2,title:"栈内存与堆内存的生命周期？",slug:"栈内存与堆内存的生命周期"},{level:2,title:"栈内存的大小能增加吗？堆内存的大小能增加吗？",slug:"栈内存的大小能增加吗-堆内存的大小能增加吗"},{level:2,title:"栈和堆是如何实现的？",slug:"栈和堆是如何实现的"},{level:2,title:"哪个更快——栈还是堆？ 为什么？",slug:"哪个更快-栈还是堆-为什么"},{level:2,title:"栈和堆上的内存是如何释放的？",slug:"栈和堆上的内存是如何释放的"},{level:2,title:"栈和堆会出现什么问题？",slug:"栈和堆会出现什么问题"},{level:2,title:"该使用哪一个——栈还是堆？",slug:"该使用哪一个-栈还是堆"},{level:2,title:"参考文章",slug:"参考文章"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" 堆和栈的区别 \n 堆栈和堆之间的差异可能会让许多人感到困惑。所以，我认为整理一个关于堆栈问题和答案列表会非常有用。 \n 堆和栈存储在哪里？ \n 它们都存储在计算机的 RAM（随机存取存储器）中。 \n 为什么要区分堆和栈？ \n 之所以要区分堆和栈，是由于程序需要两种不同特性的内存形式而确定的。在C++中，新建一个对象有两种方式， 静态分配 和 动态分配 。 \n 静态分配 ： \n 一般来说，静态分配用于初始化已知对象大小的时候，比如 int a[10]; 如果我们能够确定这个数组是10个，我们可以使用这种方式。这种方式所需要的内存在编译期间即可确定，因此操作系统便可以预先确定所指定大小内存给变量，并且可以在变量生命周期结束后自动释放。 \n 动态分配 ： \n 然而在某些场景下，可能需要根据某些情况来申请内存，比如 int* a =new int[count]; 而变量 count 可能就来自于某个配置文件或者用户手动输入的值。这个时候操作系统就无法再预先确定内存大小，并且不执行到 new int[count] 这一行代码的时候，是无法知道所要分配的内存大小，因此操作系统分出一块内存，用来进行动态分配。并且规定，动态分配的内存需要由程序员自行管理。 \n \n 之前的 文章 也有所涉及。 \n 堆和栈的区别 \n \n 堆是运行时确定内存大小，而栈在编译时即可确定内存大小。理由便是上一节中提到的，这是区分堆和栈的初衷。 \n 堆内存由用户管理，栈内存会被自动释放。 \n 栈实现方式采用数据结构中的栈实现，具有(LIFO)的顺序特点，堆为一块一块的内存（其数据结构更类似于链表）。 \n 栈由于其实现方式，在分配速度上比堆快的多。分配一块栈内存不过是简单的移动一个指针。 \n 栈为线程私有而堆为线程共享 \n \n 虽然堆和栈有这么多的区别，但是这些区别都是由于操作系统而决定的，在硬件上，他们本质都是 RAM 。 \n 线程如何与栈和堆交互？ 栈和堆如何在多线程中工作？ \n 在多线程应用程序中，每个线程都会有自己的栈（内存）。但是所有的线程将共享堆（内存）。因为在多线程应用程序中，不同的线程共享堆（内存），这也意味着线程之间必须有一些协调策略，这样它们就不会试图同时访问和操作堆中的同一块内存。 \n \n 在之前的 线程安全 的文章中也曾提到。共享内存会带来线程安全问题。在JavaScript的共享工作者线程中曾提及这个问题，同样也是因为共享内存引起的。因此，JavaScript提供了Atomics对象来解决线程安全的问题。 \n 为什么堆是线程共享的而栈不是？ \n 上面最后一点提到了栈为线程私有而堆为线程共享。这是为什么呢？ \n 其实很简单，为了解决一个问题：线程间通信。 \n 想要实现线程间通信，目前有两种方法： \n \n 消息传递 \n 共享内存 \n \n 共享内存 便是我们所说的将堆设置为线程间共享的，这样我们能够通过堆中的对象实现数据共享，这样便使得其他线程能够知道某个线程修改了某个数据。但是这样带来的问题可能就有线程安全问题等，但是这样做的优势便在于 速度更快和节约内存 ，Java，C#等使用这种方式。 \n 消息传递 是每个线程都私有自己的数据空间，当需要线程通信的时候，便需要一个线程显示的给另外一个线程发送具体的消息，这样做的能够让多线程更加安全，但是私有的线程空间和消息传递带来的是需要给内个线程都拷贝相同的对象，变量等，并且可能会带来效率问题。而Erlang和JoCaml便是使用消息传递式线程通信。 \n 栈内存与堆内存的生命周期？ \n 一旦函数调用运行完成，栈区内存中为该函数调用创建的所有数据都将被自动删除。 堆区内存中的数据都将保留在那里，直到程序员手动删除为止。 \n \n 一些高级语言也有自动的GC机制，比如Java和JavaScript等。这个在之前的 文章 也有所提及。像C这样的语言，拥有底层内存管理原语，例如 malloc() 和 free()。开发人员使用这些原语显式地分配和释放操作系统中的内存（堆区内存）。 \n 栈内存的大小能增加吗？堆内存的大小能增加吗？ \n 栈内存被设置为固定大小，并且不能超过其固定大小（尽管有些语言的扩展允许这样做）。因此，如果栈区没有足够的空间来处理分配给它的内存，就会发生 栈溢出 。这通常发生在调用大量嵌套函数或者存在无限递归调用的时候。 \n 如果堆区的当前大小太小，无法容纳新内存，那么操作系统可以向堆中添加更多内存。这是堆和堆栈之间的一大区别。 \n 栈和堆是如何实现的？ \n 栈和堆的实现实际上取决于语言、编译器和运行时。栈和堆的实现细节总是不同的，这取决于所使用的语言和编译器。但是，从总体来看，一种语言中的栈和堆用于完成与另一种语言中的栈和堆相同的事情。 \n 哪个更快——栈还是堆？ 为什么？ \n 栈由于其实现方式，在分配速度上比堆快的多。分配一块栈内存不过是简单的移动一个指针。 \n 栈和堆上的内存是如何释放的？ \n 当变量超出范围时(out of scope)，栈上的数据会自动释放。 但是，在 C 和 C++ 等语言中，存储在堆上的数据必须由程序员使用内置关键字之一（如 free、delete 或 delete[]）手动删除。 其他语言（如 Java 和 .NET）使用垃圾收集来自动从堆中删除内存，而无需程序员做任何事情。 \n 栈和堆会出现什么问题？ \n 栈内存不足时，会导致栈溢出，并可能导致程序崩溃。在堆内存可能存在内存碎片的问题。内存碎片产生的原因可参考 知乎-C语言内存碎片如何处理？ \n \n 内存碎片即“碎片的内存”描述一个系统中所有不可用的空闲内存，这些碎片之所以不能被使用，是因为负责动态分配内存的分配算法使得这些空闲的内存无法使用，这一问题的发生，原因在于这些空闲内存以小且不连续方式出现在不同的位置。 —— 百度百科 \n 该使用哪一个——栈还是堆？ \n 因为栈很小，所以当你确切地知道数据需要多少内存时，或者如果知道数据需要的内存非常小时，就应该使用栈。当你知道数据需要大量内存，或者不确定需要多少内存（比如使用动态数组）时，最好使用堆。 \n 参考文章 \n \n What’s the difference between a stack and a heap? \n 堆和栈的区别 \n \n ",summary:"\n\n堆栈和堆之间的差异可能会让许多人感到困惑。所以，我认为整理一个关于堆栈问题和答案列表会非常有用。\n\n堆和栈存储在哪里？\n\n它们都存储在计算机的 RAM（随机存取存储器）中。\n\n为什么要区分堆和栈？\n\n之所以要区分堆和栈，是由于程序需要两种不同特性的内存形式而确定的。在C++中，新建一个对象有两种方式，静态分配和动态分配。\n\n静态分配：\n\n一般来说，静态分配用于初始化已知对象大小的时候，比如int a[10];如果我们能够确定这个数组是10个，我们可以使用这种方式。这种方式所需要的内存在编译期间即可确定，因此操作系统便可以预先确定所指定大小内存给变量，并且可以在变量生命周期结束后自动释放。\n ...",id:"post",pid:"post",readingTime:{text:"1 min read",minutes:.545,time:32700.000000000004,words:109}},{title:"How JavaScript works - Event loop and the rise of Async programming + 5 ways to better coding with async/await",frontmatter:{title:"How JavaScript works - Event loop and the rise of Async programming + 5 ways to better coding with async/await",description:"How Javascript works",date:"2021-06-22",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210622203624.gif",tags:["翻译","转载","JavaScript"],meta:[{name:"title",content:"JavaScript工作原理：事件循环"},{name:"description",content:"JavaScript工作原理：事件循环"},{name:"keywords",content:"Javascript工作原理"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2021-06-22-how-javascript-work4.html",relativePath:"_posts/2021-06-22-how-javascript-work4.md",key:"v-340ec498",path:"/2021/06/22/how-javascript-work4/",headers:[{level:2,title:"Why having a single thread is a limitation?",slug:"why-having-a-single-thread-is-a-limitation"},{level:2,title:"The building blocks of a JavaScript program",slug:"the-building-blocks-of-a-javascript-program"},{level:2,title:"What is the Event Loop?",slug:"what-is-the-event-loop"},{level:2,title:"So what is the event loop after all?",slug:"so-what-is-the-event-loop-after-all"},{level:2,title:"How setTimeout(…) works",slug:"how-settimeout-works"},{level:2,title:"What are Jobs in ES6 ?",slug:"what-are-jobs-in-es6"},{level:2,title:"Callbacks",slug:"callbacks"},{level:2,title:"Nested Callbacks",slug:"nested-callbacks"},{level:2,title:"Promises",slug:"promises"},{level:2,title:"Promise Value",slug:"promise-value"},{level:2,title:"To Promise or not to Promise?",slug:"to-promise-or-not-to-promise"},{level:2,title:"Swallowing exceptions",slug:"swallowing-exceptions"},{level:2,title:"Handling uncaught exceptions",slug:"handling-uncaught-exceptions"},{level:2,title:"What’s happening in ES8? Async/await",slug:"what-s-happening-in-es8-async-await"},{level:2,title:"How to use async/await?",slug:"how-to-use-async-await"},{level:2,title:"5 Tips on writing highly maintainable, non-brittle async code",slug:"_5-tips-on-writing-highly-maintainable-non-brittle-async-code"},{level:2,title:"参考文章",slug:"参考文章"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" How JavaScript works - Event loop and the rise of Async programming + 5 ways to better coding with async/await \n \n Javascript工作原理：事件循环及异步编程的出现 + 5种更好的async/await编程方式 \n \n This time we’ll expand on our first post by reviewing the drawbacks to programming in a single-threaded environment and how to overcome them using the Event Loop and async/await in order to build stunning JavaScript UIs. As the tradition goes, at the end of the article we’ll share 5 tips on how to write cleaner code with async/await. \n \n 现在，我们将会通过回顾单线程环境下编程的弊端及以及如何使用事件循环和async/await来克服这些缺点以创建令人惊叹的 JavaScript 交互界面来展开第一篇文章。老规矩，我们将会在本章末尾分享 5 条利用 async/await 编写更简洁代码的小技巧。 \n Why having a single thread is a limitation? \n \n 单线程的局限性 \n \n In the  first post  we launched, we pondered over the question  what happens when you have function calls in the Call Stack that take a huge amount of time to be processed . \n \n 在第一篇 文章 的开头，我们考虑了一个问题即 当调用栈中含有需要长时间运行的函数调用的时候会发生什么 。 \n \n Imagine, for example, a complex image transformation algorithm that’s running in the browser. \n \n 譬如，试想下，在浏览器中运行着一个复杂的图片转化算法。 \n \n While the Call Stack has functions to execute, the browser can’t do anything else — it’s being blocked. This means that the browser can’t render, it can’t run any other code, it’s just stuck. And here comes the problem — your app UI is no longer efficient and pleasing. \n \n 恰好此时调用栈中有函数需要执行，此时浏览器将会被阻塞，它不能够做其它任何事情。这意味着，浏览器会没有响应，不能够进行渲染和运行其它代码。这将会带来问题－程序界面将不再高效和令人愉悦。 \n \n Your app is stuck. \n \n 程序没有响应。 \n \n In some cases, this might not be such a critical issue. But hey — here’s an even bigger problem. Once your browser starts processing too many tasks in the Call Stack, it may stop being responsive for a long time. At that point, a lot of browsers would take action by raising an error, asking whether they should terminate the page: \n \n 在某些情况下，这或许没什么大不了的。但是，这可能会造成更加严重的问题。一旦浏览器在调用栈中同时运行太多的任务的时候，浏览器会很长时间停止响应。到了那个时候，大多数浏览器会抛出一个错误，询问你是否关闭网页。 \n \n It’s ugly, and it completely ruins your UX: \n \n 这很丑陋且它完全摧毁了程序的用户体验。 \n The building blocks of a JavaScript program \n \n JavaScript程序组件 \n \n You may be writing your JavaScript application in a single .js file, but your program is almost certainly comprised of several blocks, only one of which is going to execute  now , and the rest will execute  later . The most common block unit is the function. \n \n 你可能会在单一的 .js 文件中书写 JavaScript 程序，但是程序是由多个代码块组成的，当前只有一个代码块在运行，其它代码块将在随后运行。最常见的块状单元是函数。 \n \n The problem most developers new to JavaScript seem to have is understanding that  later  doesn’t necessarily happen strictly and immediately after  now . In other words, tasks that cannot complete now are, by definition, going to complete asynchronously, which means you won’t have the above-mentioned blocking behavior as you might have subconsciously expected or hoped for. \n \n 大多数 JavaScript 新手有可能需要理解的问题即 之后运行 表示的是并不是必须严格且立即在现在之后执行。换句话说即，根据定义， 现在 不能够运行完毕的任务将会异步完成，这样你就不会不经意间遇到以上提及的 UI 阻塞行为。 \n \n Let’s take a look at the following example: \n \n 看如下代码： \n \n // ajax(..) is some arbitrary Ajax function given by a library \n var  response  =   ajax ( 'https://example.com/api' ) ; \n\nconsole . log ( response ) ; \n // `response` won't have the response \n \n 1 2 3 4 5 You’re probably aware that standard Ajax requests don’t complete synchronously, which means that at the time of code execution the ajax(..) function does not yet have any value to return back to be assigned to a response variable. \n \n 可能你已经知道标准的 ajax 请求不会完全同步执行完毕，意即在代码运行阶段，ajax(..) 函数不会返回任何值给 response 变量。 \n \n A simple way of “waiting” for an asynchronous function to return its result is to use a function called  callback : \n \n 获得异步函数返回值的一个简单方法是使用回调函数。 \n \n ajax ( 'https://example.com/api' ,   function ( response )   { \n    console . log ( response ) ;   // `response` is now available \n } ) ; \n \n 1 2 3 Just a note: you can actually make  synchronous  Ajax requests. Never, ever do that. If you make a synchronous Ajax request, the UI of your JavaScript app will be blocked — the user won’t be able to click, enter data, navigate, or scroll. This would prevent any user interaction. It’s a terrible practice. \n \n 只是要注意一点：即使可以也永远不要发起同步 ajax 请求。如果发起同步 ajax 请求，JavaScript 程序的 UI 将会被阻塞－用户不能够点击，输入数据，跳转或者滚动。这将会冻结任何用户交互体验。这是非常糟糕。 \n \n This is how it looks like, but please, never do this — don’t ruin the web: \n \n 以下示例代码，但请别这样做，这会毁掉网页： \n \n // This is assuming that you're using jQuery \njQuery . ajax ( { \n    url :   'https://api.example.com/endpoint' , \n     success :   function ( response )   { \n         // This is your callback. \n     } , \n    async :   false   // And this is a terrible idea \n } ) ; \n \n 1 2 3 4 5 6 7 8 We used an Ajax request just as an example. You can have any chunk of code execute asynchronously. \n \n 我们以 Ajax 请求为例。你可以异步执行任意代码。 \n \n This can be done with the  setTimeout(callback, milliseconds)  function. What the  setTimeout  function does is to set up an event (a timeout) to happen later. Let’s take a look: \n \n 你可以使用  setTimeout(callback, milliseconds)  函数来异步执行代码。 setTimeout  函数会在之后的某个时刻触发事件(定时器)。如下代码： \n \n function   first ( )   { \n    console . log ( 'first' ) ; \n } \n function   second ( )   { \n    console . log ( 'second' ) ; \n } \n function   third ( )   { \n    console . log ( 'third' ) ; \n } \n first ( ) ; \n setTimeout ( second ,   1000 ) ;   // Invoke `second` after 1000ms \n third ( ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 The output in the console will be the following: \n \n 控制台输出如下： \n \n first\nthird\nsecond\n \n 1 2 3 #  What is the Event Loop? \n \n 事件循环详解 \n \n We’ll start with a somewhat of an odd claim — despite allowing async JavaScript code (like the  setTimeout  we just discussed), until ES6, JavaScript itself has actually never had any direct notion of asynchronicity built into it. The JavaScript engine has never done anything more than executing a single chunk of your program at any given moment. \n \n 我们将会以一个有些让人费解的问题开始－尽管允许异步执行 JavaScript 代码(比如之前讨论的  setTimetout )，但是直到 ES6，实际上 JavaScript 本身并没有集成任何直接的异步编程概念。JavaScript 引擎只允许在任意时刻执行单个的程序片段。 \n \n For more details on how JavaScript engines work (Google’s V8 specifically), check one of our  previous articles  on the topic. \n \n 可以查看之前的 文章 来了解 JavaScript 引擎的工作原理。 \n \n So, who tells the JS Engine to execute chunks of your program? In reality, the JS Engine doesn’t run in isolation — it runs inside a  hosting  environment, which for most developers is the typical web browser or Node.js. Actually, nowadays, JavaScript gets embedded into all kinds of devices, from robots to light bulbs. Every single device represents a different type of hosting environment for the JS Engine. \n \n 那么， JS 引擎是如何执行程序片段的呢？实际上，JS 引擎并不是隔离运行的－它运行在一个宿主环境中，对大多数开发者来说是典型的 web 浏览器或者 Node.js。实际上，现在 JavaScript 广泛应用于从机器到电灯泡的各种设备之中。每个设备代表了 JS 引擎的不同类型的宿主环境。 \n \n The common denominator in all environments is a built-in mechanism called the event loop, which handles the execution of multiple chunks of your program over time, each time invoking the JS Engine . \n \n 所有宿主环境都含有一个被称为事件循环的内置机制，随着时间的推移，事件循环会执行程序中多个代码片段，每次都会调用 JS 引擎 。 \n \n This means that the JS Engine is just an on-demand execution environment for any arbitrary JS code. It’s the surrounding environment that schedules the events (the JS code executions). \n \n 这意味着 JS 引擎只是任意 JS 代码的按需执行环境。这是一个封闭的环境，在其中进行事件的调度(运行JS 代码)。 \n \n So, for example, when your JavaScript program makes an Ajax request to fetch some data from the server, you set up the “response” code in a function (the “callback”), and the JS Engine tells the hosting environment: \n \n 所以，打个比方，当 JavaScript 程序发起 Ajax 请求来从服务器获得数据，你在回调函数中书写 \"response\" 代码，JS 引擎会告诉宿主环境： \n \n “Hey, I’m going to suspend execution for now, but whenever you finish with that network request, and you have some data, please call this function back.” \n \n \"嘿，我现在要挂起执行了，现在当你完成网络请求的时候且返回了数据，请执行回调函数。\" \n \n The browser is then set up to listen for the response from the network, and when it has something to return to you, it will schedule the callback function to be executed by inserting it into the  event loop . \n \n 之后浏览器会监听从网络中返回的数据，当有数据返回的时候，它会通过把回调函数插入事件循环以便调度执行。 \n \n Let’s look at the below diagram: \n \n 让我们看下如下图示： \n \n \n You can read more about the Memory Heap and the Call Stack in our  previous article . \n \n 你可以在之前的 文章 中阅读更多关于动态内存管理和调用栈的信息。 \n \n And what are these Web APIs? In essence, they are threads that you can’t access, you can just make calls to them. They are the pieces of the browser in which concurrency kicks in. If you’re a Node.js developer, these are the C++ APIs. \n \n 什么是网页 API ？本质上，你没有权限访问这些线程，你只能够调用它们。它们是浏览器自带的，且可以在浏览器中进行并发操作。如果你是个 Node.js 开发者，这些是 C++ APIs。 \n So what is the event loop after all? \n \n 所以什么是事件循环呢？ \n \n \n The Event Loop has one simple job — to monitor the Call Stack and the Callback Queue. If the Call Stack is empty, the Event Loop will take the first event from the queue and will push it to the Call Stack, which effectively runs it. \n \n 事件循环只有一项简单的工作－监测调用栈和回调队列。如果调用栈是空的，它会从回调队列中取得第一个事件然后入栈，并有效地执行该事件。 \n \n Such an iteration is called a  tick  in the Event Loop. Each event is just a function callback. \n \n 事件循环中的这样一次遍历被称为一个  tick 。每个事件就是一个回调函数。 \n \n console . log ( 'Hi' ) ; \n setTimeout ( function   cb1 ( )   {  \n    console . log ( 'cb1' ) ; \n } ,   5000 ) ; \nconsole . log ( 'Bye' ) ; \n \n 1 2 3 4 5 Let’s “execute” this code and see what happens: \n \n 让我们执行这段代码，然后看看会发生什么： \n \n \n \n The state is clear. The browser console is clear, and the Call Stack is empty. \n \n 空状态。浏览器控制台是空的，调用栈也是空的。 \n \n \n \n \n \n \n console.log('Hi')  is added to the Call Stack. \n \n console.log('Hi')  入栈。 \n \n \n \n \n \n \n console.log('Hi')  is executed. \n \n 执行  console.log('Hi') 。 \n \n \n \n \n \n \n console.log('Hi')  is removed from the Call Stack. \n \n console.log('Hi')  出栈 \n \n \n \n \n \n \n setTimeout(function cb1() { ... })  is added to the Call Stack. \n \n setTimeout(function cb1() { ... })  入栈。 \n \n \n \n \n \n \n setTimeout(function cb1() { ... })  is executed. The browser creates a timer as part of the Web APIs. It is going to handle the countdown for you. \n \n 执行  setTimeout(function cb1() { ... }) ，浏览器创建定时器作为网页 API 的一部分并将会为你处理倒计时。 \n \n \n \n \n \n \n The  setTimeout(function cb1() { ... })  itself is complete and is removed from the Call Stack. \n \n setTimeout(function cb1() { ... })  执行完毕并出栈。 \n \n \n \n \n \n \n console.log('Bye')  is added to the Call Stack. \n \n console.log('Bye')  入栈。 \n \n \n \n \n \n \n console.log('Bye')  is executed. \n \n 执行  console.log('Bye') 。 \n \n \n \n \n \n \n console.log('Bye')  is removed from the Call Stack. \n \n console.log('Bye')  出栈。 \n \n \n \n \n \n \n After at least 5000 ms, the timer completes and it pushes the cb1 callback to the Callback Queue. \n \n 至少 5 秒之后，定时器结束运行并把  cb1  回调添加到回调队列。 \n \n \n \n \n \n \n The Event Loop takes  cb1  from the Callback Queue and pushes it to the Call Stack. \n \n 事件循环从回调队列中获得  cb1  函数并且将其入栈。 \n \n \n \n \n \n \n cb1  is executed and adds  console.log('cb1')  to the Call Stack. \n \n 运行  cb1  函数并将  console.log('cb1')  入栈。 \n \n \n \n \n \n \n console.log('cb1')  is executed. \n \n 执行  console.log('cb1') 。 \n \n \n \n \n \n \n console.log('cb1')  is removed from the Call Stack. \n \n console.log('cb1')  出栈。 \n \n \n \n \n \n \n cb1  is removed from the Call Stack. \n \n cb1  出栈。 \n \n \n \n \n A quick recap: \n \n 录像快速回放： \n \n \n It’s interesting to note that ES6 specifies how the event loop should work, meaning that technically it’s within the scope of the JS engine’s responsibilities, which is no longer playing just a hosting environment role. One main reason for this change is the introduction of Promises in ES6 because the latter require access to a direct, fine-grained control over scheduling operations on the event loop queue (we’ll discuss them in a greater detail later). \n \n 令人感兴趣的是，ES6 规定事件循环如何工作的，这意味着从技术上讲，它在 JS 引擎负责的范围之内，而 JS 引擎将不再只是扮演着宿主环境的角色。ES6 中 Promise 的出现是导致改变的主要原因之一，因为 ES6 要求有权限直接细粒度地控制事件循环队列中的调度操作(之后会深入探讨)。 \n How setTimeout(…) works \n \n setTimeout(...) 工作原理 \n \n It’s important to note that setTimeout(…) doesn’t automatically put your callback on the event loop queue. It sets up a timer. When the timer expires, the environment places your callback into the event loop, so that some future tick will pick it up and execute it. Take a look at this code: \n \n 需要注意的是  setTimeout(…)  并没有自动把回调添加到事件循环队列。它创建了一个定时器。当定时器过期，宿主环境会把回调函数添加至事件循环队列中，然后，在未来的某个 tick 取出并执行该事件。查看如下代码： \n \n setTimeout ( myCallback ,   1000 ) ; \n \n 1 That doesn’t mean that  myCallback  will be executed in 1,000 ms but rather that, in 1,000 ms,  myCallback  will be added to the event loop queue. The queue, however, might have other events that have been added earlier — your callback will have to wait. \n \n 这并不意味着 1 秒之后会执行  myCallback  回调而是在 1 秒后将其添加到回调队列。然而，该队列有可能在之前就添加了其它的事件－所以回调就会被阻塞。 \n \n There are quite a few articles and tutorials on getting started with async code in JavaScript that suggest doing a  setTimeout(callback, 0) . Well, now you know what the Event Loop does and how setTimeout works: calling setTimeout with 0 as a second argument just defers the callback until the Call Stack is clear. \n \n 有相当一部分的文章和教程开始会建议你使用  setTimeout(callback, 0)  来书写 JavaScript 异步代码。那么，现在你明白了事件循环和 setTimeout 的原理：调用  setTimeout  把其第二个参数设置为 0 表示延迟执行回调直到调用栈被清空。 \n \n Take a look at the following code: \n \n 查看如下代码： \n \n console . log ( 'Hi' ) ; \n setTimeout ( function ( )   { \n    console . log ( 'callback' ) ; \n } ,   0 ) ; \nconsole . log ( 'Bye' ) ; \n \n 1 2 3 4 5 Although the wait time is set to 0 ms, the result in the browser console will be the following: \n \n 虽然定时时间设定为 0， 但是控制台中的结果将会如下显示： \n \n Hi\nBye\ncallback\n \n 1 2 3 #  What are Jobs in ES6 ? \n \n ES6 作业概念（微任务） \n \n A new concept called the “Job Queue” was introduced in ES6. It’s a layer on top of the Event Loop queue. You are most likely to bump into it when dealing with the asynchronous behavior of Promises (we’ll talk about them too). \n \n ES6 介绍了一个被称为『作业队列』的概念。它位于事件循环队列的顶部。你极有可能在处理 Promises(之后会介绍) 的异步行为的时候无意间接触到这一概念。 \n \n We’ll just touch on the concept now so that when we discuss async behavior with Promises, later on, you understand how those actions are being scheduled and processed. \n \n 现在我们将会接触这个概念，以便当讨论 Promises 的异步行为之后，理解如何调度和处理这些行为。 \n \n Imagine it like this: the Job Queue is a queue that’s attached to the end of every tick in the Event Loop queue. Certain async actions that may occur during a tick of the event loop will not cause a whole new event to be added to the event loop queue, but will instead add an item (aka Job) to the end of the current tick’s Job queue. \n \n 像这样想象一下：作业队列是附加于事件循环队列中每个 tick 末尾的队列。事件循环的一个 tick 所产生的某些异步操作不会导致添加全新的事件到事件循环队列中，但是反而会在当前 tick 的作业队列末尾添加一个作业项。 \n \n This means that you can add another functionality to be executed later, and you can rest assured that it will be executed right after, before anything else. \n \n 这意味着，你可以添加延时运行其它功能并且你可以确保它会在其它任何功能之前立刻执行。 \n \n A Job can also cause more Jobs to be added to the end of the same queue. In theory, it’s possible for a Job “loop” (a Job that keeps adding other Jobs, etc.) to spin indefinitely, thus starving the program of the necessary resources needed to move on to the next event loop tick. Conceptually, this would be similar to just expressing a long-running or infinite loop (like  while (true)  ..) in your code. \n \n 一个作业还可能导致更多作业添加到同一队列的末尾。从理论上讲，作业“循环”（一个不断添加其他作业的作业）可能无限期地循环，从而使程序无法继续进行下一个事件循环。从概念上讲，这类似于在代码中只表达一个长时间运行的或无限的死循环（如'while（true）`..）。 \n \n Jobs are kind of like the  setTimeout(callback, 0)  “hack” but implemented in such a way that they introduce a much more well-defined and guaranteed ordering: later, but as soon as possible. \n \n 作业是有些类似于  setTimeout(callback, 0)  这样的小技巧，但是是以这样的方式实现的，它们拥有明确定义和有保证的执行顺序：之后且尽快地执行。 \n Callbacks \n \n 回调 \n \n As you already know, callbacks are by far the most common way to express and manage asynchronicity in JavaScript programs. Indeed, the callback is the most fundamental async pattern in the JavaScript language. Countless JS programs, even very sophisticated and complex ones, have been written on top of no other async foundation than the callback. \n \n 正如你已知的那样，回调函数是 JavaScript 程序中用来表示和进行异步操作最常见的方法。的确，回调是 JavaScript 语言中最为重要的异步模式。无数的 JS 程序，甚至非常复杂的那些，都是建立在回调函数之上的。 \n \n Except that callbacks don’t come with no shortcomings. Many developers are trying to find better async patterns. It’s impossible, however, to effectively use any abstraction if you don’t understand what’s actually under the hood. \n \n 回调并不是没有缺点(如， callback hell)。许多开发者试图找到更好的异步模式。然而，如果你不理解底层的原理而想要高效地使用任何抽象化的语法是不可能的。 \n \n In the following chapter, we’ll explore couple of these abstractions in-depth to show why more sophisticated async patterns (that will be discussed in subsequent posts) are necessary and even recommended. \n \n 在接下来的章节中，我们将会深入探究这些抽象语法并理解更复杂的异步模式的必要性。 \n Nested Callbacks \n \n 嵌套回调 \n \n Look at the following code: \n \n 查看一下示例 \n \n listen ( 'click' ,   function   ( e ) { \n     setTimeout ( function ( ) { \n         ajax ( 'https://api.example.com/endpoint' ,   function   ( text ) { \n             if   ( text  ==   \"hello\" )   { \n\t        \t\t doSomething ( ) ; \n\t    \t\t\t } \n\t    \t\t\t else   if   ( text  ==   \"world\" )   { \n\t        \t\t doSomethingElse ( ) ; \n             } \n         } ) ; \n     } ,   500 ) ; \n } ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 We’ve got a chain of three functions nested together, each one representing a step in an asynchronous series. \n \n 我们有三个链式嵌套函数，每个函数代表一个异步操作。 \n \n This kind of code is often called a “callback hell”. But the “callback hell” actually has almost nothing to do with the nesting/indentation. It’s a much deeper problem than that. \n \n 这类代码通常被称为『回调地狱』。但是，实际上『回调地狱』和代码嵌套及缩进没有任何关系。这是一个更加深刻的问题。 \n \n First, we’re waiting for the “click” event, then we’re waiting for the timer to fire, then we’re waiting for the Ajax response to come back, at which point it might get all repeated again. \n \n 首先，我们监听点击事件，然后，等待定时器执行，最后等待 Ajax 返回数据，在 Ajax 返回数据的时候，可以重复执行这一过程。 \n \n At first glance, this code may seem to map its asynchrony naturally to sequential steps like: \n \n 乍一眼看上去，可以上把以上具有异步特性的代码拆分为按步骤执行的代码，如下所示： \n \n listen ( 'click' ,   function   ( e )   { \n\t // .. \n } ) ; \n \n 1 2 3 Then we have: \n \n 之后： \n \n setTimeout ( function ( ) { \n     // .. \n } ,   500 ) ; \n \n 1 2 3 Then later we have: \n \n 再后来： \n \n ajax ( 'https://api.example.com/endpoint' ,   function   ( text ) { \n     // .. \n } ) ; \n \n 1 2 3 And finally: \n \n 最后： \n \n if   ( text  ==   \"hello\" )   { \n     doSomething ( ) ; \n } \n else   if   ( text  ==   \"world\" )   { \n     doSomethingElse ( ) ; \n } \n \n 1 2 3 4 5 6 So, such a sequential way of expressing your async code seems a lot more natural, doesn’t it? There must be such a way, right? \n \n 因此，以这样顺序执行的方式来表示异步代码看起来一气呵成，应该有这样的方法吧？ \n Promises \n Take a look at the following code: \n \n 查看一下代码： \n \n var  x  =   1 ; \n var  y  =   2 ; \nconsole . log ( x  +  y ) ; \n \n 1 2 3 It’s all very straightforward: it sums the values of  x  and  y  and prints it to the console. What if, however, the value of  x  or  y  was missing and was still to be determined? Say, we need to retrieve the values of both  x  and  y  from the server, before they can be used in the expression. Let’s imagine that we have a function  loadX  and  loadY  that respectively load the values of  x  and  y  from the server. Then, imagine that we have a function sum that sums the values of  x  and  y  once both of them are loaded. \n \n 这个很直观：计算出  x  和  y  的值然后在控制台打印出来。但是，如果  x  或者  y  的初始值是不存在的且不确定的呢？假设，在表达式中使用  x  和 y  之前，我们需要从服务器得到  x  和  y  的值。想象下，我们拥有函数  loadX  和  loadY  分别从服务器获取 x 和 y 的值。然后，一旦获得  x  和  y  的值，就可以使用  sum  函数计算出和值。 \n \n It could look like this (quite ugly, isn’t it): \n \n 类似如下这样： \n \n function   sum ( getX ,  getY ,  callback )   { \n     var  x ,  y ; \n     getX ( function ( result )   { \n        x  =  result ; \n         if   ( y  !==   undefined )   { \n             callback ( x  +  y ) ; \n         } \n     } ) ; \n     getY ( function ( result )   { \n        y  =  result ; \n         if   ( x  !==   undefined )   { \n             callback ( x  +  y ) ; \n         } \n     } ) ; \n } \n // A sync or async function that retrieves the value of `x` \n function   fetchX ( )   { \n     // .. \n } \n\n\n // A sync or async function that retrieves the value of `y` \n function   fetchY ( )   { \n     // .. \n } \n sum ( fetchX ,  fetchY ,   function ( result )   { \n    console . log ( result ) ; \n } ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 There is something very important here — in that snippet, we treated  x  and  y  as future values, and we expressed an operation sum(…) that (from the outside) did not care whether x or y or both were or weren’t available right away. \n \n 在这段代码中需要注意的是： x  和  y  是未来值，我们用  sum(..) (从外部)来计算来两值之和，但是并没有关注  x  和  y  是否马上同时有值。 \n \n Of course, this rough callbacks-based approach leaves much to be desired. It’s just a first tiny step towards understanding the benefits of reasoning about future values without worrying about the time aspect of when they will be available. \n \n 当然，这个粗糙的基于回调的技术还有很多需要改进的地方。这只是向理解推出未来值而不用担心何时有返回值的好处迈出的一小步。 \n Promise Value \n \n Promise 值 \n \n Let’s just briefly glimpse at how we can express the x + y example with Promises: \n \n 让我们简略地看一下 x+y 这个例子的 Promises 版本  ： \n \n function   sum ( xPromise ,  yPromise )   { \n\t // `Promise.all([ .. ])` takes an array of promises, \n\t // and returns a new promise that waits on them \n\t // all to finish \n\t return  Promise . all ( [ xPromise ,  yPromise ] ) \n\n\t // when that promise is resolved, let's take the \n\t // received `X` and `Y` values and add them together. \n\t . then ( function ( values ) { \n\t\t // `values` is an array of the messages from the \n\t\t // previously resolved promises \n\t\t return  values [ 0 ]   +  values [ 1 ] ; \n\t }   ) ; \n } \n\n // `fetchX()` and `fetchY()` return promises for \n // their respective values, which may be ready \n // *now* or *later*. \n sum ( fetchX ( ) ,   fetchY ( ) ) \n\n // we get a promise back for the sum of those \n // two numbers. \n // now we chain-call `then(...)` to wait for the \n // resolution of that returned promise. \n . then ( function ( sum ) { \n    console . log ( sum ) ; \n } ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 There are two layers of Promises in this snippet. \n \n 以上代码片段含有两种层次的 Promise。 \n \n fetchX()  and  fetchY()  are called directly, and the values they return (promises!) are passed to  sum(...) . The underlying values these promises represent may be ready  now  or  later , but each promise normalizes its behavior to be the same regardless. We reason about  x  and  y  values in a time-independent way. They are  future values , period. \n \n fetchX()  和  fetchY()  都是直接调用，它们的返回值(promises!)都被传入  sum(…)  作为参数。虽然这些 promises 的 返回值也许会在现在或之后返回，但是无论如何每个 promise 都具有相同的异步行为。我们可以认为  x  和  y  是与时间无关的值。暂时称他们为未来值。 \n \n The second layer is the promise that  sum(...)  creates (via  Promise.all([ ... ]) ) and returns, which we wait on by calling  then(...) . When the  sum(...)  operation completes, our sum future value is ready and we can print it out. We hide the logic for waiting on the  x  and  y   future values  inside of  sum(...) . \n \n 第二层次的 Promise 是由  sum(...) (通过 Promise.all([...]) )所创建和返回的，然后通过调用 then(...) 来等待promise的返回值。当 sun(...) 运行结束，返回 sum 未来值然后就可以打印出来。我们在  sum(…)  内部隐藏了等待未来值  x  和  y  的逻辑。 \n \n Note : Inside  sum(…) , the  Promise.all([ … ])  call creates a promise (which is waiting on  promiseX  and  promiseY  to resolve). The chained call to  .then(...)  creates another promise, which the return  values[0] + values[1]  line immediately resolves (with the result of the addition). Thus, the  then(...)  call we chain off the end of the  sum(...)  call — at the end of the snippet — is actually operating on that second promise returned, rather than the first one created by  Promise.all([ ... ]) . Also, although we are not chaining off the end of that second  then(...) , it too has created another promise, had we chosen to observe/use it. This Promise chaining stuff will be explained in much greater detail later in this chapter. \n \n 注意 ：在  sum(…)  内部， Promise.all([ … ]) 创建了一个 promise(在等待  promiseX  和  promiseY  解析之后)。链式调用  .then(…)  创建了另一个 promise，该 promise 会由代码  values[0] + values[1]  立刻进行解析(返回相加结果)。因此，在代码片段的末尾即  sum(…)  的末尾链式调用  then(…) －实际上是在操作第二个返回的 promise 而不是第一个由  Promise.all([ ... ])  创建返回的 promise。同样地，虽然我们没有在第二个 then(…)  之后进行链式调用，但是它也创建了另一个 promise，我们可以选择观察／使用该 promise。我们将会在本章的随后内容中进行详细地探讨 promise 的链式调用相关。 \n \n With Promises, the  then(...)  call can actually take two functions, the first for fulfillment (as shown earlier), and the second for rejection: \n \n 在 Promises 中，实际上  then(…)  函数可以传入两个函数作为参数，第一个函数是成功函数，第二个是失败函数。 \n \n sum ( fetchX ( ) ,   fetchY ( ) ) \n . then ( \n     // fullfillment handler \n     function ( sum )   { \n        console . log (  sum  ) ; \n     } , \n     // rejection handler \n     function ( err )   { \n    \tconsole . error (  err  ) ;   // bummer! \n     } \n ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 If something went wrong when getting  x  or  y , or something somehow failed during the addition, the promise that  sum(...)  returns would be rejected, and the second callback error handler passed to  then(...)  would receive the rejection value from the promise. \n \n 当获取  x  或者  y  出现错误或者计算和值的时候出现错误， sum(…)  返回的 promise 将会失败，并将promise的失败原因（拒绝值）传递给  then(...)  的第二个回调错误处理程序。 \n \n Because Promises encapsulate the time-dependent state — waiting on the fulfillment or rejection of the underlying value — from the outside, the Promise itself is time-independent, and thus Promises can be composed (combined) in predictable ways regardless of the timing or outcome underneath. \n \n 因为 Promise 封装与时间相关的状态—等待外部成功或失败的返回值——所以 Promise 本身是与时间无关的，因此 Promise 可以以可预测的方式组合（合并），而不用关心时序或者返回结果。 \n \n Moreover, once a Promise is resolved, it stays that way forever — it becomes an immutable value at that point — and can then be observed as many times as necessary. \n \n 此外，一旦 Promise 解析完成，它就会一直保持不可变的状态且可以被随意观察。 \n \n It’s really useful that you can actually chain promises: \n \n 链式调用 promise 真的很管用： \n \n function   delay ( time )   { \n     return   new   Promise ( function ( resolve ,  reject ) { \n         setTimeout ( resolve ,  time ) ; \n     } ) ; \n } \n\n delay ( 1000 ) \n . then ( function ( ) { \n    console . log ( \"after 1000ms\" ) ; \n     return   delay ( 2000 ) ; \n } ) \n . then ( function ( ) { \n    console . log ( \"after another 2000ms\" ) ; \n } ) \n . then ( function ( ) { \n    console . log ( \"step 4 (next Job)\" ) ; \n     return   delay ( 5000 ) ; \n } ) \n // ... \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 Calling  delay(2000)  creates a promise that will fulfill in 2000ms, and then we return that from the first  then(...)  fulfillment callback, which causes the second  then(...) 's promise to wait on that 2000ms promise. \n \n 调用  delay(2000)  创建一个将在 2 秒后返回成功的 promise，然后，从第一个  then(…)  的成功回调函数中返回该 promise，这会使得第二个  then(…)  返回的 promise 在等待 2 秒后返回。 \n \n Note : Because a Promise is externally immutable once resolved, it’s now safe to pass that value around to any party, knowing that it cannot be modified accidentally or maliciously. This is especially true in relation to multiple parties observing the resolution of a Promise. It’s not possible for one party to affect another party’s ability to observe Promise resolution. Immutability may sound like an academic topic, but it’s actually one of the most fundamental and important aspects of Promise design, and shouldn’t be casually passed over. \n \n 注意 ：因为一个 promise 一旦解析其状态就不可以从外部改变，正是由于它的状态不可以被随意修改，所以可以安全地把状态值分发给任意第三方。当涉及多方观察 Promise 的返回结果时候更是如此。一方影响另一方观察 Promise 返回结果的能力是不可能。不可变性听起来像是个晦涩的科学课题，但是，实际上这是 Promise 最根本和重要的方面，你得好好研究研究。 \n To Promise or not to Promise? \n \n Promise使用时机 \n \n An important detail about Promises is knowing for sure if some value is an actual Promise or not. In other words, is it a value that will behave like a Promise? \n \n Promise 的一个重要细节即确定某些值是否是真正的 Promise。换句话说，这个值是否具有 Promise 的行为。 \n \n We know that Promises are constructed by the  new Promise(…)  syntax, and you might think that  p instanceof Promise  would be a sufficient check. Well, not quite. \n \n 我们知道可以利用  new Promise(…)  语法来创建 Promise，然后，你会认为使用  p instanceof Promise  来检测某个对象是否是 Promise 类的实例。然而，并不全然如此。 \n \n Mainly because you can receive a Promise value from another browser window (e.g. iframe), which would have its own Promise, different from the one in the current window or frame, and that check would fail to identify the Promise instance. \n \n 主要的原因在于你可以从另一个浏览器窗口(比如 iframe)获得 Promise 实例，iframe 中的 Promise 不同于当前浏览器窗口或框架中的 Promise，因此，会导致检测 Promise 实例失败。 \n \n Moreover, a library or framework may choose to vend its own Promises and not use the native ES6 Promise implementation to do so. In fact, you may very well be using Promises with libraries in older browsers that have no Promise at all. \n \n 除此之外，库或框架或许会选择使用自身自带的 Promise 而不是原生的 ES6 实现的 Promise。实际工作中，你可以使用库自带的 Promise 来兼容不支持 Promise 的老版本浏览器。 \n Swallowing exceptions \n \n 异常捕获 \n \n If at any point in the creation of a Promise, or in the observation of its resolution, a JavaScript exception error occurs, such as a  TypeError  or  ReferenceError , that exception will be caught, and it will force the Promise in question to become rejected. \n \n 如果在创建 Promise 或者是在观察解析 Promise 返回结果期间，遇到了诸如  TypeError  或者  ReferenceError  的 JavaScript 错误异常，这个异常会被捕获进而强制 Promise 为失败状态。 \n \n For example: \n \n 比如 \n \n var  p  =   new   Promise ( function ( resolve ,  reject ) { \n    foo . bar ( ) ; \t   // `foo` is not defined, so error! \n     resolve ( 374 ) ;   // never gets here :( \n } ) ; \n\np . then ( \n     function   fulfilled ( ) { \n         // never gets here :( \n     } , \n     function   rejected ( err ) { \n         // `err` will be a `TypeError` exception object \n\t // from the `foo.bar()` line. \n     } \n ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 But what happens if a Promise is fulfilled yet there was a JS exception error during the observation (in a  then(…)  registered callback)? Even though it won’t be lost, you may find the way they’re handled a bit surprising. Until you dig a little deeper: \n \n 但是，如果 Promise 成功解析了而在成功解析的监听函数( then(…)  注册回调)中抛出 JS 运行错误会怎么样？仍然可以捕捉到该异常，但或许你会发现处理这些异常的方式有些让人奇怪。直到深入理解其中原理： \n \n var  p  =   new   Promise (   function ( resolve , reject ) { \n\t resolve ( 374 ) ; \n } ) ; \n\np . then ( function   fulfilled ( message ) { \n    foo . bar ( ) ; \n    console . log ( message ) ;     // never reached \n } , \n     function   rejected ( err ) { \n         // never reached \n     } \n ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 It looks like the exception from  foo.bar()  really did get swallowed. It wasn’t, though. There was something deeper that went wrong, however, which we failed to listen for. The  p.then(…)  call itself returns another promise, and it’s that promise that will be rejected with the TypeError exception. \n \n 看起来  foo.bar()  抛出的错误异常真的被捕获到了。然而，事实上并没有。然而，深入理解你会发现我们没有监测到其中一些错误。 p.then(…)  调用本身返回另一个 promise，该 promise 会返回  TypeError  类型的异常失败信息。 \n \n \n 非原文： \n 拓展一下以上的说明，这是原文没有的 。 \n var  p  =   new   Promise (   function ( resolve , reject ) { \n\t resolve ( 374 ) ; \n } ) ; \n\np . then ( function   fulfilled ( message ) { \n    foo . bar ( ) ; \n    console . log ( message ) ;     // 永不执行 \n } , \n     function   rejected ( err ) { \n         // 永不执行 \n     } \n ) . then ( \n\t function ( )   { } , \n\t function ( err )   {  console . log ( 'err' ,  err ) ; } \n ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 如上代码所示就可以真正捕获到 promise 成功解析回调函数里面的代码错误。 \n Handling uncaught exceptions \n \n 处理未捕获的异常 \n \n There are other approaches which many would say are  better . \n \n 有其它据说更好的处理异常的技巧。 \n \n A common suggestion is that Promises should have a  done(…)  added to them, which essentially marks the Promise chain as “done.”  done(…)  doesn’t create and return a Promise, so the callbacks passed to  done(..)  are obviously not wired up to report problems to a chained Promise that doesn’t exist. \n \n 普遍的做法是为 Promises 添加  done(..)  回调，本质上这会标记 promise 链的状态为 \"done.\"。 done(…)  并不会创建和返回 promise，因此，当不存在链式 promise 的时候，传入  done(..)  的回调显然并不会抛出错误。 \n \n It’s treated as you might usually expect in uncaught error conditions: any exception inside a  done(..)  rejection handler would be thrown as a global uncaught error (in the developer console, basically): \n \n 和未捕获的错误状况一样：任何在  done(..)  失败处理函数中的异常都将会被抛出为全局错误(基本上是在开发者控制台)。 \n \n var  p  =  Promise . resolve ( 374 ) ; \n\np . then ( function   fulfilled ( msg ) { \n     // numbers don't have string functions, \n     // so will throw an error \n    console . log ( msg . toLowerCase ( ) ) ; \n } ) \n . done ( null ,   function ( )   { \n     // If an exception is caused here, it will be thrown globally  \n } ) ; \n \n 1 2 3 4 5 6 7 8 9 10 #  What’s happening in ES8? Async/await \n \n ES8中的Async/await \n \n JavaScript ES8 introduced  async/await  that makes the job of working with Promises easier. We’ll briefly go through the possibilities  async/await  offers and how to leverage them to write async code. \n \n JavaScript ES8 中介绍了  async/await ，这使得处理 Promises 更加地容易。我们将会简要介绍  async/await  的所有可能的使用方式并利用其来书写异步代码。 \n How to use async/await? \n \n 如何使用 async/await \n \n You define an asynchronous function using the async function declaration. Such functions return an AsyncFunction object. The  AsyncFunction  object represents the asynchronous function which executes the code, contained within that function. \n \n 使用  async  函数定义一个异步函数。该函数会返回 异步函数 对象。 AsyncFunction  对象表示在异步函数中运行其内部代码。 \n \n When an async function is called, it returns a  Promise  . When the async function returns a value, that’s not a  Promise  , a  Promise  will be automatically created and it will be resolved with the returned value from the function. When the async function throws an exception, the Promise will be rejected with the thrown value. \n \n 当调用异步函数的时候，它会返回一个  Promise 。异步函数返回值并 非   Promise ，在函数执行过程中会自动创建一个  Promise  并使用函数的返回值来解析该  Promise 。当  async  函数抛出异常， Promise  失败回调会获取抛出的异常值。 \n \n An  async  function can contain an  await  expression, that pauses the execution of the function and waits for the passed Promise’s resolution, and then resumes the async function’s execution and returns the resolved value. \n \n async  函数可以包含一个  await  表达式，这样就可以暂停函数的执行来等待传入的 Promise 的返回结果，之后重启异步函数的执行并返回解析值。 \n \n You can think of a  Promise  in JavaScript as the equivalent of Java’s  Future  or  C# 's Task. \n \n 你可以把 JavaScript 中的  Promise  看作 Java 中的  Future  或  C#  中的 Task。 \n \n \n The purpose of  async/await  is to simplify the behavior of using promises. \n \n \n async/await  本意是用来简化 promises 的使用。 \n \n Let’s take a look at the following example: \n \n 看一下代码： \n \n // Just a standard JavaScript function \n function   getNumber1 ( )   { \n     return  Promise . resolve ( '374' ) ; \n } \n // This function does the same as getNumber1 \n async   function   getNumber2 ( )   { \n     return   374 ; \n } \n \n 1 2 3 4 5 6 7 8 Similarly, functions that are throwing exceptions are equivalent to functions that return promises that have been rejected: \n \n 类似地，抛出异常的函数等价于返回失败的 promises。 \n \n function   f1 ( )   { \n     return  Promise . reject ( 'Some error' ) ; \n } \n async   function   f2 ( )   { \n     throw   'Some error' ; \n } \n \n 1 2 3 4 5 6 The  await  keyword can only be used in  async  functions and allows you to synchronously wait on a Promise. If we use promises outside of an  async  function, we’ll still have to use then callbacks: \n \n await  关键字只能在  async  函数中使用并且允许你同步等待 Promise。如果在  async  函数外使用 promises，我们仍然必须要使用  then  回调。 \n \n async   function   loadData ( )   { \n     // `rp` is a request-promise function. \n     var  promise1  =   rp ( 'https://api.example.com/endpoint1' ) ; \n     var  promise2  =   rp ( 'https://api.example.com/endpoint2' ) ; \n   \n     // Currently, both requests are fired, concurrently and \n     // now we'll have to wait for them to finish \n     var  response1  =   await  promise1 ; \n     var  response2  =   await  promise2 ; \n     return  response1  +   ' '   +  response2 ; \n } \n // Since, we're not in an `async function` anymore \n // we have to use `then`. \n loadData ( ) . then ( ( )   =>  console . log ( 'Done' ) ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 You can also define async functions using an “async function expression”. An async function expression is very similar to and has almost the same syntax as, an async function statement. The main difference between an async function expression and an async function statement is the function name, which can be omitted in async function expressions to create anonymous functions. An async function expression can be used as an IIFE (Immediately Invoked Function Expression) which runs as soon as it is defined. \n \n 你也可以使用异步函数表达式来定义异步函数。异步函数表达式拥有和异步函数语句相近的语法。异步函数表达式和异步函数语句的主要区别在于函数名，异步函数表达式可以忽略函数名来创建匿名函数。异步函数表达式可以被用作 IIFE(立即执行函数表达式)，可以在定义的时候立即运行。 \n \n It looks like this: \n \n 像这样： \n \n var   loadData   =   async   function ( )   { \n     // `rp` is a request-promise function. \n     var  promise1  =   rp ( 'https://api.example.com/endpoint1' ) ; \n     var  promise2  =   rp ( 'https://api.example.com/endpoint2' ) ; \n   \n     // Currently, both requests are fired, concurrently and \n     // now we'll have to wait for them to finish \n     var  response1  =   await  promise1 ; \n     var  response2  =   await  promise2 ; \n     return  response1  +   ' '   +  response2 ; \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 More importantly, async/await is supported in all major browsers: \n \n 更为重要的是，所有的主流浏览器都支持 async/await。 \n \n \n 如果该兼容性不符合你的需求，你可以使用诸如  Babel  和  TypeScript  的 JS 转译器来转换为自己需要的兼容程度。 \n At the end of the day, the important thing is not to blindly choose the “latest” approach to writing async code. It’s essential to understand the internals of async JavaScript, learn why it’s so critical and comprehend in-depth the internals of the method you have chosen. Every approach has pros and cons as with everything else in programming. \n \n 最后要说的是，不要盲目地使用最新的技术来写异步代码。理解 JavaScript 中 async 的内部原理是非常重要的，学习为什么深入理解所选择的方法是很重要的。正如编程中的其它东西一样，每种技术都有其优缺点。 \n 5 Tips on writing highly maintainable, non-brittle async code \n \n 书写高可用，强壮的异步代码的 5 条小技巧 \n \n \n \n Clean code : Using async/await allows you to write a lot less code. Every time you use async/await you skip a few unnecessary steps: write .then, create an anonymous function to handle the response, name the response from that callback e.g. \n \n 简洁：使用 async/await 可以让你写更少的代码。每次书写 async/await 代码，你都可以跳过书写一些不必要的步骤： 比如不用写  .then  回调，创建匿名函数来处理返回值，命名回调返回值。 \n \n \n \n // `rp` is a request-promise function. \n rp ( ‘https : / / api . example . com / endpoint1' ) . then ( function ( data )   { \n  // … \n } ) ; \n \n 1 2 3 4 Versus: \n \n 对比 \n \n // `rp` is a request-promise function. \n var  response  =   await   rp ( ‘https : / / api . example . com / endpoint1' ) ; \n \n 1 2 \n \n Error handling : Async/await makes it possible to handle both sync and async errors with the same code construct — the well-known try/catch statements. Let’s see how it looks with Promises: \n \n 错误处理：Async/await 允许使用日常的 try/catch 代码结构体来处理同步和异步错误。看下和 Promise 是如何写的： \n \n \n \n function   loadData ( )   { \n     try   {   // Catches synchronous errors. \n         getJSON ( ) . then ( function ( response )   { \n             var  parsed  =   JSON . parse ( response ) ; \n            console . log ( parsed ) ; \n         } ) . catch ( function ( e )   {   // Catches asynchronous errors \n            console . log ( e ) ;  \n         } ) ; \n     }   catch ( e )   { \n        console . log ( e ) ; \n     } \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 Versus: \n async   function   loadData ( )   { \n     try   { \n         var  data  =   JSON . parse ( await   getJSON ( ) ) ; \n        console . log ( data ) ; \n     }   catch ( e )   { \n        console . log ( e ) ; \n     } \n } \n \n 1 2 3 4 5 6 7 8 \n \n Conditionals : Writing conditional code with async/await is a lot more straightforward: \n \n 条件语句：使用  async/await  来书写条件语句会更加直观。 \n \n \n \n function   loadData ( )   { \n   return   getJSON ( ) \n     . then ( function ( response )   { \n       if   ( response . needsAnotherRequest )   { \n         return   makeAnotherRequest ( response ) \n           . then ( function ( anotherResponse )   { \n            console . log ( anotherResponse ) \n             return  anotherResponse\n           } ) \n       }   else   { \n        console . log ( response ) \n         return  response\n       } \n     } ) \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 Versus: \n async   function   loadData ( )   { \n   var  response  =   await   getJSON ( ) ; \n   if   ( response . needsAnotherRequest )   { \n     var  anotherResponse  =   await   makeAnotherRequest ( response ) ; \n    console . log ( anotherResponse ) \n     return  anotherResponse\n   }   else   { \n    console . log ( response ) ; \n     return  response ;     \n   } \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 \n \n Stack Frames : Unlike with  async/await , the error stack returned from a promise chain gives no clue of where the error happened. Look at the following: \n \n 堆栈桢：和  async/await  不同的是，从链式 promise 返回的错误堆栈中无法得知发生错误的地方。看如下代码： \n \n \n \n function   loadData ( )   { \n   return   callAPromise ( ) \n     . then ( callback1 ) \n     . then ( callback2 ) \n     . then ( callback3 ) \n     . then ( ( )   =>   { \n       throw   new   Error ( \"boom\" ) ; \n     } ) \n } \n loadData ( ) \n   . catch ( function ( e )   { \n    console . log ( err ) ; \n // Error: boom at callAPromise.then.then.then.then (index.js:8:13) \n } ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 Versus: \n async   function   loadData ( )   { \n   await   callAPromise1 ( ) \n   await   callAPromise2 ( ) \n   await   callAPromise3 ( ) \n   await   callAPromise4 ( ) \n   await   callAPromise5 ( ) \n   throw   new   Error ( \"boom\" ) ; \n } \n loadData ( ) \n   . catch ( function ( e )   { \n    console . log ( err ) ; \n     // output \n     // Error: boom at loadData (index.js:7:9) \n } ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 \n Debugging : If you have used promises, you know that debugging them is a nightmare. For example, if you set a breakpoint inside a .then block and use debug shortcuts like “stop-over”, the debugger will not move to the following .then because it only “steps” through synchronous code. \n \n \n 调试：如果使用 promise，你就会明白调试它们是一场噩梦。例如，如果你在 .then 代码块中设置一个断点并且使用诸如 \"stop-over\" 的调试快捷键，调试器不会移动到下一个 .then 代码块，因为调试器只会步进同步代码。 \n \n With async/await you can step through await calls exactly as if they were normal synchronous functions. \n \n 使用  async/await  你可以就像同步代码那样步进到下一个 await 调用。 \n 参考文章 \n \n https://github.com/getify/You-Dont-Know-JS/blob/master/async%20%26%20performance/ch2.md \n https://github.com/getify/You-Dont-Know-JS/blob/master/async%20%26%20performance/ch3.md \n http://nikgrozev.com/2017/10/01/async-await/ \n \n ",summary:"Javascript工作原理：事件循环及异步编程的出现 + 5种更好的async/await编程方式\n\nThis time we’ll expand on our first post by reviewing the drawbacks to programming in a single-threaded environment and how to overcome them using the Event Loop and async/await in order to build stunning JavaScript UIs. As the tradition goes, at t ...",id:"post",pid:"post",readingTime:{text:"28 min read",minutes:27.39,time:1643400,words:5478}},{title:"JS 图片压缩",frontmatter:{title:"JS 图片压缩",description:"JS 图片压缩",date:"2021-06-28",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210628224652.png",tags:["JavaScript","转载"],meta:[{name:"title",content:"JS 图片压缩"},{name:"description",content:"JS 图片压缩"},{name:"keywords",content:"JS, 图片压缩"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2021-06-28-image-compress.html",relativePath:"_posts/2021-06-28-image-compress.md",key:"v-02122350",path:"/2021/06/28/image-compress/",headers:[{level:2,title:"背景",slug:"背景"},{level:2,title:"前言",slug:"前言"},{level:2,title:"转化关系",slug:"转化关系"},{level:2,title:"具体实现",slug:"具体实现"},{level:3,title:"file2DataUrl(file)",slug:"file2dataurl-file"},{level:3,title:"file2Image(file)",slug:"file2image-file"},{level:3,title:"url2Image(url)",slug:"url2image-url"},{level:3,title:"image2Canvas(image)",slug:"image2canvas-image"},{level:3,title:"canvas2DataUrl(canvas, quality, type)",slug:"canvas2dataurl-canvas-quality-type"},{level:3,title:"dataUrl2Image(url)",slug:"dataurl2image-url"},{level:3,title:"dataUrl2Blob(dataUrl, type)",slug:"dataurl2blob-dataurl-type"},{level:3,title:"canvas2Blog(canvas, quality, type)",slug:"canvas2blog-canvas-quality-type"},{level:3,title:"blob2DataUrl(blob)",slug:"blob2dataurl-blob"},{level:3,title:"upload(url, file, callback)",slug:"upload-url-file-callback"},{level:2,title:"图片上传本地服务器",slug:"图片上传本地服务器"},{level:2,title:"实现简易的图片压缩",slug:"实现简易的图片压缩"},{level:2,title:"TODO",slug:"todo"},{level:2,title:"参考文章",slug:"参考文章"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" JS 图片压缩 \n 背景 \n 文章转载于 了解JS压缩图片，这一篇就够了 。跟着文章的思路梳理了一下图片压缩的方法，以及Image对象、data URL、Canvas和 File (Blob)之间的转化关系。对文章作者 wuwhs 表示感谢。 \n 本文代码github地址： \n 下面正文开始。 \n 前言 \n 公司的移动端业务需要在用户上传图片是由前端压缩图片大小，再上传到服务器，这样可以减少移动端上行流量，减少用户上传等待时长，优化用户体验。 \n JavaScript  操作压缩图片原理不难，已有成熟  API ，然而在实际输出压缩后结果却总有意外，有些图片竟会越压缩越大，加之终端（手机）类型众多，有些手机压缩图片甚至变黑。 \n \n 所以本文将试图解决如下问题 \n \n \n 弄清楚Image对象、data URL、Canvas和File(Blob)之间的转化关系 \n \n \n 图片压缩的关键 \n \n \n 超大图片压缩黑屏问题 \n 转化关系 \n 在实际应用中有可能使用的情境：大多时候我们直接读取用户上传的  File  对象，读写到画布（ canvas ）上，利用  Canvas  的  API  进行压缩，完成压缩之后再转成  File（Blob）  对象，上传到远程图片服务器；不妨有时候我们也需要将一个  base64  字符串压缩之后再变为  base64  字符串传入到远程数据库或者再转成  File（Blob）  对象。一般的，它们有如下转化关系： \n 具体实现 \n \n 代码的具体实现做了部分修改，但不影响功能实现。 \n \n 下面将按照转化关系图中的转化方法一一实现。 \n file2DataUrl(file) \n 用户通过页面标签  <input type=\"file\" />  上传的本地图片直接转化  data URL  字符串形式。可以使用  FileReader  文件读取构造函数。 FileReader  对象允许  Web  应用程序异步读取存储在计算机上的文件（或原始数据缓冲区）的内容，使用  File  或  Blob  对象指定要读取的文件或数据。该实例方法  readAsDataURL  读取文件内容并转化成  base64  字符串。在读取完后，在实例属性  result  上可获取文件内容。 \n class   ImageCompress   { \n   //... \n   file2DataUrl ( file )   { \n     return   new   Promise ( ( resolve ,  reject )   =>   { \n       let  reader  =   new   FileReader ( ) ; \n      reader . onload   =   function   ( )   { \n         resolve ( reader . result ) \n       } \n      reader . readAsDataURL ( file ) ; \n     } ) \n   } \n   //... \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 \n 关于FileReader可参考： FileReader \n \n Data URL  由四个部分组成：前缀（ data: ）、指示数据类型的  MIME  类型、如果非文本则为可选的  base64  标记、数据本身： \n data:<mediaType>,<data>\n \n 1 比如一张png格式图片，转化为  base64  字符串形式： \n data:image/png;base64,UklGRpQIAABXRUJQVlA4IIgIAADwLgCdASrIAJYAPu1qrlKppSQi...DWHRNsAW\n \n 1 #  file2Image(file) \n 若想将用户通过本地上传的图片放入缓存并  img  标签显示出来，除了可以利用以上方法转化成的  base64  字符串作为图片  src ，还可以直接用  URL  对象，引用保存在  File  和  Blob  中数据的  URL 。使用对象  URL  的好处是可以不必把文件内容读取到  JavaScript  中 而直接使用文件内容。为此，只要在需要文件内容的地方提供对象  URL  即可。 \n class   ImageCompress   { \n   //... \n   file2Image ( file )   { \n     return   new   Promise ( async   ( resolve ,  reject )   =>   { \n       let  img  =   new   Image ( ) ; \n       let   URL   =  window . webkitURL  ||  window . URL ; \n       if   ( URL )   { \n         let  url  =   URL . createObjectURL ( file ) ; \n        img . onload   =   function   ( )   { \n           URL . revokeObjectURL ( url ) ; \n           resolve ( img ) ; \n         } ; \n        img . src  =  url ; \n       }   else   { \n         const  dataUrl  =   await   this . file2DataUrl ( file ) ; \n        img . onload   =   function   ( )   { \n           resolve ( img ) ; \n         } ; \n        img . src  =  dataUrl ; \n       } \n     } ) \n   } \n   //... \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 注意：要创建对象  URL ，可以使用  window.URL.createObjectURL()  方法，并传入  File  或  Blob  对象。如果不再需要相应数据，最好释放它占用的内容。但只要有代码在引用对象  URL ，内存就不会释放。要手工释放内存，可以把对象  URL  传给  URL.revokeObjectURL() 。 \n url2Image(url) \n 通过图片链接（ url ）获取图片  Image  对象，由于图片加载是异步的，因此放到 resolve 中回传获取到的  Image  对象。 \n class   ImageCompress   { \n   //... \n   url2Image ( url ) { \n     return   new   Promise ( ( resolve ,  reject )   =>   { \n       let  img  =   new   Image ( ) ; \n      img . onload   =   function ( )   { \n         resolve ( img ) ; \n       } \n     } ) ; \n    img . src  =  url ; \n   } \n   //... \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 #  image2Canvas(image) \n 利用  drawImage()  方法将  Image  对象绘画在  Canvas  对象上。 \n drawImage  有三种语法形式： \n \n void ctx.drawImage(image, dx, dy); \n void ctx.drawImage(image, dx, dy, dWidth, dHeight); \n void ctx.drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight); \n \n \n s* 代表 source（原图片）信息，d* 代表 destination（转化后canvas）的信息。 \n \n 参数： \n \n image : 绘制到上下文的元素； \n sx : 绘制选择框左上角以  Image  为基准  X  轴坐标； \n sy : 绘制选择框左上角以  Image  为基准  Y  轴坐标； \n sWidth : 绘制选择框宽度； \n sHeight ： 绘制选择框宽度； \n dx :   Image  的左上角在目标  canvas  上  X  轴坐标； \n dy :   Image  的左上角在目标  canvas  上  Y  轴坐标； \n dWidth :   Image  在目标  canvas  上绘制的宽度； \n dHeight :   Image  在目标  canvas  上绘制的高度； \n \n \n class   ImageCompress   { \n   //... \n   image2Canvas ( img )   { \n     let  canvas  =  document . createElement ( 'canvas' ) ; \n     let  ctx  =  canvas . getContext ( '2d' ) ; \n    canvas . width  =  img . naturalWidth ; \n    canvas . height  =  img . naturalHeight ; \n    ctx . drawImage ( img ,   0 ,   0 ,  canvas . width ,  canvas . height ) ; \n     return  canvas ; \n   } \n   //... \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 #  canvas2DataUrl(canvas, quality, type) \n HTMLCanvasElement  对象有  toDataURL(type, encoderOptions)  方法，返回一个包含图片展示的  data URL  。同时可以指定输出格式和质量。 \n 参数分别为： \n \n type  图片格式，默认为  image/png 。 \n encoderOptions   在指定图片格式为  image/jpeg  或  image/webp  的情况下 ，可以从  0  到  1  的区间内选择图片的质量。如果超出取值范围，将会使用默认值  0.92 ，其他参数会被忽略。 \n \n class   ImageCompress   { \n   //... \n   canvas2DataUrl ( canvas ,  quality ,  type )   { \n     return  canvas . toDataURL ( type  ||   'image/jpeg' ,  quality  ||   0.8 ) ; \n   } \n   //... \n } \n \n 1 2 3 4 5 6 7 \n HTMLCanvasElement具体可参考： HTMLCanvasElement \n dataUrl2Image(url) \n 图片链接也可以是  base64  字符串，直接赋值给  Image  对象  src  即可。 \n class   ImageCompress   { \n   //... \n   dataUrl2Image ( url )   { \n     return   new   Promise ( ( resolve ,  reject )   =>   { \n       let  img  =   new   Image ( ) ; \n      img . onload   =   function ( )   { \n         resolve ( img ) ; \n       } \n     } ) ; \n    img . src  =  url ; \n   } \n   //... \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 #  dataUrl2Blob(dataUrl, type) \n 将  data URL  字符串转化为  Blob  对象。主要思路是：先将  data URL  数据（ data ） 部分提取出来，用  atob  对经过  base64  编码的字符串进行解码，再转化成  Unicode  编码，存储在 Uint8Array （8位无符号整型数组，每个元素是一个字节） 类型数组，最终转化成  Blob  对象。 \n class   ImageCompress   { \n   //... \n   dataUrl2Blob ( dataUrl ,  type )   { \n     let  data  =  dataUrl . split ( ',' ) [ 1 ] ; \n     let  mimePattern  =   / ^data:(.*);base64, / ; \n     let  mime  =  dataUrl . match ( mimePattern ) [ 1 ] ; \n     let  binStr  =   atob ( data ) ;   // base64解码 \n     let  len  =  binStr . length ; \n     let  arr  =   new   Uint8Array ( len ) ; \n\n     for   ( let  i  =   0 ;  i  <  len ;  i ++ )   { \n      arr [ i ]   =  binStr . charCodeAt ( i ) ; \n     } \n     return   new   Blob ( [ arr ] ,   {  type :  type  ||  mime  } ) ; \n   } \n   //... \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 #  canvas2Blog(canvas, quality, type) \n HTMLCanvasElement  有  toBlob(callback, [type], [encoderOptions])  方法创造  Blob  对象，用以展示  canvas  上的图片；这个图片文件可以被缓存或保存到本地，由用户代理端自行决定。第二个参数指定图片格式，如不特别指明，图片的类型默认为  image/png ，分辨率为  96dpi 。第三个参数用于针对 image/jpeg  格式的图片进行输出图片的质量设置。 \n class   ImageCompress   { \n   //... \n   canvas2Blog ( canvas ,  quality ,  type )   { \n     return   new   Promise ( ( resolve ,  reject )   =>   { \n      canvas . toBlob ( blob   =>   { \n         resolve ( blob ) ; \n       } ,  type  ||   'image/jpeg' ,  quality  ||   0.8 ) ; \n     } ) \n   } \n   //... \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 #  blob2DataUrl(blob) \n 将  Blob  对象转化成  Image  对象，可通过  URL  对象引用文件，也支持引用  Blob  这样的类文件对象，同样，这里复用上面  file2Image  方法即可： \n class   ImageCompress   { \n   //... \n   blob2DataUrl ( blob )   { \n     return   this . file2DataUrl ( blob ) \n   } \n   //... \n } \n \n 1 2 3 4 5 6 7 #  upload(url, file, callback) \n class   ImageCompress   { \n   //... \n   upload ( url ,  file ,  callback )   { \n     var  xhr  =   new   XMLHttpRequest ( ) ; \n     var  fd  =   new   FormData ( ) ; \n    fd . append ( 'file' ,  file ) ; \n    xhr . onreadystatechange   =   function   ( )   { \n       if   ( xhr . readyState  ===   4 )   { \n         if   ( xhr . status  ===   200 )   { \n           // 上传成功 \n          callback  &&   callback ( xhr . responseText ) ; \n         }   else   { \n           throw   new   Error ( xhr ) ; \n         } \n       } \n     } \n    xhr . open ( 'POST' ,  url ,   true ) ; \n    xhr . send ( fd ) ; \n   } \n   //... \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 #  图片上传本地服务器 \n // app.js \n const  express  =   require ( 'express' ) ; \n const  multer  =   require ( 'multer' ) ; \n const  dest  =   '/Users/<your path>/uploads/' ; \n const  upload  =   multer ( {  dest  } ) ; \n const  fs  =   require ( 'fs' ) ; \n const  path  =   require ( 'path' ) ; \n\n const  app  =   express ( ) ; \n\napp . all ( '*' ,   ( req ,  res ,  next )   =>   { \n  res . header ( 'Access-Control-Allow-Origin' ,   '*' ) ; \n  res . header ( 'Access-Control-Allow-Headers' ,   'content-type' ) ; \n  res . header ( 'Access-Control-Allow-Methods' ,   'POST' ) ; \n\n   next ( ) ; \n } ) \n\napp . post ( '/upload' ,  upload . any ( ) ,   ( req ,  res ,  next )   =>   { \n  res . send ( ` 上传成功: 文件大小为 ${ Math . floor ( req . files [ 0 ] . size  /   1000 ) } K ` ) ; \n   let   {  name ,  ext  }   =  path . parse ( req . files [ 0 ] . originalname ) ; \n  fs . rename ( ` ${ dest } ${ req . files [ 0 ] . filename } ` , \n             ` ${ dest } ${ name } _ ${ new   Date ( ) . getTime ( ) } ${ ext  ||   '.'   +  req . files [ 0 ] . mimetype . slice ( 6 ) } ` , \n             ( err )   =>   { \n    \t\t\t\t\t if   ( err )   throw   new   Error ( err ) ; \n    \t\t\t\t\tconsole . log ( '重命名完成' ) ; \n  \t\t\t\t\t } ) ; \n } ) \n\napp . listen ( 3000 ,   ( )   =>   { \n  console . log ( 'file upload server is running in 3000 port' ) ; \n } ) \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 #  实现简易的图片压缩 \n 基本的图片压缩思路：首先将上传图片转化成  Image  对象，再将写入到  Canvas  画布，最后由  Canvas  对象  API  对图片的大小和尺寸输出调整，实现压缩目的。 \n class   ImageCompress   { \n   REGEXP_IMAGE_TYPE   =   / ^image\\/ / ; \n  defaultOption  =   { \n    file :   null , \n    quality :   0.8 \n   } ; \n   isImage   =   type   =>   this . REGEXP_IMAGE_TYPE . test ( type ) ; \n\n   constructor ( options )   { \n     this . options  =  Object . assign ( { } ,   this . defaultOption ,  options ) ; \n     this . file  =   this . options . file ; \n     this . init ( ) ; \n   } \n\n   async   init ( )   { \n     let  file  =   this . file ; \n     let  options  =   this . options ; \n\n     if   ( ! file  ||   ! this . isImage ( file . type ) )   { \n      console . error ( '请上传图片' ) ; \n     } \n\n     if   ( ! this . isImage ( options . mimeType ) )   { \n      options . mimeType  =  file . type ; \n     } \n\n     let  image  =   await   this . file2Image ( file ) ; \n    options . container  &&  document . querySelector ( options . container ) . appendChild ( image ) ; \n     // 压缩前的调用函数，外部传入 \n    options . beforeCompress  &&  options . beforeCompress ( file ) ; \n     let  canvas  =   this . image2Canvas ( image ) ; \n     let  blob  =   await   this . canvas2Blog ( canvas ,  options . quality ,  options . mimeType ) ; \n     let  compress_img  =   await   this . file2Image ( blob ) ; \n    options . container  &&  document . querySelector ( options . container ) . appendChild ( compress_img ) ; \n     // 压缩成功后的调用函数，外部传入 \n    options . successCompress  &&  options . successCompress ( blob ) ; \n    options . upload_url  &&   this . upload ( options . upload_url ,  blob ,  console . log ) ; \n   } \n\n\n   file2Image ( file )   { //...} \n\n   file2DataUrl ( file )   { //...} \n\n   image2Canvas ( img )   { //....} \n\n   canvas2Blog ( canvas ,  quality ,  type )   { //...} \n\n   upload ( url ,  file ,  callback )   { //...} \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 这个简易图片压缩的构造函数的使用方法： \n < body > \n   < div   class = \" setting_zone \" > \n     < div > \n       < input   type = \" file \"   onchange = \" handleChange(event) \"   /> \n     </ div > \n   </ div > \n\n   < div   class = \" imgList \" > </ div > \n </ body > \n < script   src = \" ./src/main.js \" > </ script > \n < script > \n   function   handleChange ( e )   { \n     let  file  =  e . target . files [ 0 ] ; \n     let  options  =   { \n      file , \n      quality :   0.4 , \n      mimeType :   'image/webp' , \n      container :   '.imgList' , \n      upload_url :   'http://127.0.0.1:3000/upload' , \n      width :   200 , \n      height :   150 , \n       beforeCompress :   function ( file )   { \n        console . table ( [ \n           { beforeCompress :  file . size ,  mimeType :  file . type } \n         ] ) \n       } , \n       successCompress :   function ( blob )   { \n        console . table ( [ \n           { afterCompress :  blob . size ,  mimeType :  blob . type } \n         ] ) \n        console . log ( '压缩率为：' ,   ( ( file . size  -  blob . size )   /  file . size  *   100 ) . toFixed ( 2 )   +   '%' ) ; \n       } \n     } \n    \n     new   ImageCompress ( options ) ; \n   } \n </ script > \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 到这其实建议的图片压缩上传就完成了。但是在原文中提出一些问题： \n \n 压缩输出图片寸尺固定为原始图片尺寸大小，而实际可能需要控制输出图片尺寸，同时达到尺寸也被压缩目的； \n png  格式图片同格式压缩，压缩率不高，还有可能出现“不减反增”现象； \n 有些情况，其他格式转化成  png  格式也会出现“不减反增”现象； \n 大尺寸  png  格式图片在一些手机上，压缩后出现“黑屏”现象； \n TODO \n \n 图片等比缩放（假如options中的width和height比例与原图宽高比不同） \n 复现一下大尺寸png图片压缩失败的情况 \n 参考文章 \n \n 了解JS压缩图片，这一篇就够了 \n 聊聊JS的二进制家族：Blob、ArrayBuffer和Buffer \n \n ",summary:"\n背景\n\n文章转载于了解JS压缩图片，这一篇就够了。跟着文章的思路梳理了一下图片压缩的方法，以及Image对象、data URL、Canvas和 File (Blob)之间的转化关系。对文章作者wuwhs表示感谢。\n\n本文代码github地址：\n\n下面正文开始。\n\n前言\n\n公司的移动端业务需要在用户上传图片是由前端压缩图片大小，再上传到服务器，这样可以减少移动端上行流量，减少用户上传等待时长，优化用户体验。\n\nJavaScript 操作压缩图片原理不难，已有成熟 API，然而在实际输出压缩后结果却总有意外，有些图片竟会越压缩越大，加之终端（手机）类型众多，有些手机压缩图片甚至变黑。\n\n所以本文 ...",id:"post",pid:"post",readingTime:{text:"6 min read",minutes:5.16,time:309600,words:1032}},{title:"ES next",frontmatter:{title:"ES next",description:"ES next",date:"2021-07-01",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210704162016.jpeg",tags:["JavaScript"],meta:[{name:"title",content:"ES next"},{name:"description",content:"ES next"},{name:"keywords",content:"ES, next"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2021-07-01-es-next.html",relativePath:"_posts/2021-07-01-es-next.md",key:"v-03466e5e",path:"/2021/07/01/es-next/",headers:[{level:2,title:"ECMAScript 历史",slug:"ecmascript-历史"},{level:2,title:"神秘的 ECMA-262",slug:"神秘的-ecma-262"},{level:2,title:"探秘 Ecma TC39 神秘组织",slug:"探秘-ecma-tc39-神秘组织"},{level:2,title:"ES6",slug:"es6"},{level:2,title:"TC39 流程 和 Stage X",slug:"tc39-流程-和-stage-x"},{level:2,title:"官方ECMAscript新特性列表",slug:"官方ecmascript新特性列表"},{level:3,title:"New in ECMAScript 2016",slug:"new-in-ecmascript-2016"},{level:3,title:"New in ECMAScript 2017",slug:"new-in-ecmascript-2017"},{level:3,title:"New in ECMAScript 2018",slug:"new-in-ecmascript-2018"},{level:3,title:"New in ECMAScript 2019",slug:"new-in-ecmascript-2019"},{level:3,title:"New in ECMAScript 2020",slug:"new-in-ecmascript-2020"},{level:3,title:"New in ECMAScript 2021",slug:"new-in-ecmascript-2021"},{level:3,title:"New in ECMAScript 2022",slug:"new-in-ecmascript-2022"},{level:2,title:"最后",slug:"最后"},{level:2,title:"更新",slug:"更新"},{level:2,title:"参考文章",slug:"参考文章"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" ES next \n ECMAScript 历史 \n ECMA，读音类似“埃科妈”，是欧洲计算机制造商协会（European Computer Manufacturers Association）的简称，是一家国际性会员制度的信息和电信标准组织。1994 年之后，由于组织的标准牵涉到很多其他国家，为了体现其国际性，更名为 Ecma 国际（Ecma International），因此 Ecma 就不再是首字母缩略字了。 \n 1995 年，著名的网景公司（Netscape）的 Brendan Eich 开发了一种脚本语言，最初命名为 Mocha，后来改名为 LiveScript，最后为了蹭当时火热的 Java 热度重命名为了 JavaScript。 \n 了解了 Ecma 国际和 JavaScript，就方便了解 ECMAScript 了，ECMAScript 是一种由 Ecma 国际在标准  ECMA-262  中定义的 脚本语言 规范。这种语言在往往被称为 JavaScript 或 JScript ，但实际上 JavaScript 和 JScript 是 ECMA-262 标准的实现和扩展。 \n 神秘的 ECMA-262 \n 上文提到了第一个神秘代码 ECMA-262，ECMA-262 到底是什么呢？原来 Ecma 国际的标准，都会以 Ecma-Number 命名，ECMA-262 就是 ECMA 262 号标准，具体就是指 ECMAScript 遵照的标准。1996 年 11 月，网景公司将 JavaScript 提交给 Ecma 国际进行标准化。ECMA-262 的第一个版本于 1997 年 6 月被 Ecma 国际采纳。 \n 尽管 JavaScript 和 JScript 与 ECMAScript 兼容，但包含超出 ECMAScript 的功能。 \n 我们如何查看最新最全的 Ecma 标准呢，可以查看 Ecma 国际官网的 Standards。截止到 2021 年 7 月，最新的 Ecma 标准已经到了 ECMA-419。 \n \n Ecma 标准涉及的类别非常多，官网因此提供了按照类别和最新修改排序的功能，我们来看看 ECMA-262 属于哪个类别： \n \n ECMA-262 属于“软件工程与接口”类别 ，该类别一共有 12 个标准，详见上图。注意，ECMA-262 的最新更新日期是 2021 年 6 月， ES2021 正式成为 ECMA 标准 。 \n 探秘  Ecma TC39  神秘组织 \n TC39 是 Technical Committee 39 的简称，是制定 ECMAScript 标准的委员会，由各个主流浏览器厂商的代表构成，主席团三人分别来自 PayPal、Bloomberg 和 Microsoft，下设两个工作组（task group） TC39-TG1 和 TC39-TG2 。 \n TC39-TG1 工作组主要工作是通用 ECMAScript® 语言， 包括语法、语义、类库以及支持该语言的技术。 \n TC39-TG2 工作组 ECMAScript® 国际化 API 标准。 \n ES6 \n 上文提到 ECMAScript 是由 Ecma 国际在标准 ECMA-262 中定义的脚本语言规范。 到 2015 年，一共发布了 1、2、3、4、5、5.1、6 共 7 个版本（其中 4 被废弃） 。 \n 我们常把 5.1 之前的 ECMAScript 版本统称做  ES5 ，将 6 版本之后的版本统称做  ES6 （因为从 2015 年起，ECMAScript 终于步入正轨，每年发布一次版本，到了 2021 年，已经发布了 6 个版本了，实在太多，所以用变革了 JavaScript 时代的 ES6 作为后续版本的代称）。 \n 从 ECMAScript 第 6 版开始，每年发布一个 ECMAScript 版本，因此 ECMAScript 版本有了很多名字，包括全名 ECMAScript 6、简写 ES6、年份命名 ECMAScript 2015、年份简写 ES2015。最常见的名字还是 ES6，之后推出的 ES7、ES8 等同理。 \n \n \n \n 版本 \n 版本全称 \n 版本别称 \n 发布日期 \n 简介 \n \n \n \n \n 1 \n ECMAScript 1 \n ES1 \n 1997年6月 \n 首版 \n \n \n 2 \n ECMAScript 2 \n ES2 \n 1998年6月 \n 格式修正，以使得其形式与ISO/IEC16262国标一致 \n \n \n 3 \n ECMAScript 3 \n ES3 \n 1999年12月 \n 强大的正则表达式，更好的词法作用域链处理，新的控制指令，异常处理，错误定义更加明确，数据输出的格式化及其他改变 \n \n \n 4 \n ECMAScript 4 \n ES4 \n 放弃 \n 由于关于语言的复杂性出现分歧，第4版本被放弃，其中的部分成为第5版本及Harmony的基础 \n \n \n 5 \n ECMAScript 5 \n ES5 \n 2009年12月 \n 新增『严格模式』，一个子集用作提供更彻底的错误检查，以避免结果出错，澄清了许多第3版本的模糊规范，并适应了与规范不一致的真实世界实现的行为。增加了部分新功能，如getters及setters，支持JSON以及在对象属性上更完整的反射 \n \n \n 5.1 \n ECMAScript 5.1 \n ES5.1 \n 2011年6月 \n ECMAScript 5.1版形式上完全一致于国标ISO/IEC16262:2011 \n \n \n 6 \n ECMAScript 6 \n ES6、ECMAScript 2015、ES2015 \n 2015年6月 \n 第6版，添加了类和模块的语法，其他特性包括迭代器，生成器和生成器表达式，箭头函数，二进制数据、静态类型数数组，集合，promise，reflect和proxy。 \n \n \n 7 \n ECMAScript 7 \n ES7、ECMAScript 2016、ES2016 \n 2016年6月 \n 第7版，多个新的概念和语言特性 \n \n \n 8 \n ECMAScript 8 \n ES8、ECMAScript 2017、ES2017 \n 2017年6月 \n 第8版，多个新的概念和语言特性 \n \n \n 9 \n ECMAScript 9 \n ES9、ECMAScript 2018、ES2018 \n 2018年6月 \n 第9版，包含了异步循环，生成器，新的正则表达式特性和rest/spread语法 \n \n \n 10 \n ECMAScript 10 \n ES10、ECMAScript 2019、ES2019 \n 2019年6月 \n 第10版 \n \n \n 11 \n ECMAScript 11 \n ES11、ECMAScript 2020、ES2020 \n 2020年6月 \n 第11版 \n \n \n 12 \n ECMAScript 12 \n ES12、ECMAScript 2021、ES2021 \n 2021年6月 \n 第12版 \n \n \n 13 \n ECMAScript 13 \n ES13、ECMAScript 2022、ES2022 \n 预计2022年6月 \n 尚未发布，已经进入stage4，预计2022年6月通过，正式成为ECMA标准 \n \n \n \n 需要注意的是，自从 TC39 流程 制定以来，ECMAScript 版本的重要性就降低了很多。大家不必记住某一个 ES 特性到底是哪年推出的。现在真正重要的是提案处于哪个阶段：一旦提案到了第 4 阶段，那么它就可以使用了。但是即使这样，你仍然需要检查你的引擎是否支持该功能。 \n 这里又提到了一个 TC39 流程 和 阶段（Stage）的概念，我们接下来看看这两个概念是什么含义。 \n  TC39 流程  和 Stage X \n \n 如果两个版本之间经过了太多的时间，那么早已准备好的特性就必须等待很长时间才可以发布。而且功能准备如果很晚，会增加 deadline 之前匆忙赶工的风险。 \n 很多功能在其实现和使用之前就花了很长时间在设计上。因此，发现与实现和使用相关的设计缺陷会非常晚。 \n \n 为了解决上述问题， TC39 建立了新的 TC39 流程： \n \n ECMAScript 功能设计与每年的 ECMAScript 版本发布独立，使用不同阶段（Stage）来区分功能的状态，共 5 个阶段，从 Stage 0（strawman）开始，到 Stage 4 （finished）结束。 \n 越往后的阶段，需要原型实现和真机测试，可以建立设计和实现之间的反馈机制。 \n ECMAScript 版本每年发布一次，发布的内容包含在 release deadline 之前的全部到达 Stage 4 的功能。 \n \n \n ES2016是第一个根据TC39流程设计的ECMAScript版本。 \n 官方ECMAscript新特性列表 \n 2016年到目前 (2021-07-07)，进入stage4阶段的新特性有41个： \n 具体可参考 Finished Proposal . \n ES2015（ES6）新增的特性比较多，不方便在此一一列举。可参考阮一峰老师的《ES6标准入门（第三版）》（以下简称《ES6》）。 \n New in ECMAScript 2016 \n ECMAScript 2016中添加了以下新特性： \n \n Array.prototype.includes() \n Exponentiation Operator （**） \n New in ECMAScript 2017 \n ECMAScript 2017中添加了以下新特性： \n \n Object.values(), Object.entries() \n String padding:  String.prototype.padStart / String.prototype.padEnd \n Object.getOwnPropertyDescriptors() \n \n \n 注意Object.getOwnPropertyDescriptor(obj, key) 和 Object.getOwnPropertyDescriptors(obj) 的区别 \n \n \n Proposal to allow trailing commas in function parameter lists and calls 『函数参数列表允许使用尾随逗号』 \n \n function   clownPuppiesEverywhere ( \n  param1 , \n  param2 ,   // Next parameter that's added only has to add a new line, not modify this line \n  )   {   /* ... */   }  \n\n clownPuppiesEverywhere ( \n   'foo' , \n   'bar' ,   // Next parameter that's added only has to add a new line, not modify this line \n ) ; \n \n 1 2 3 4 5 6 7 8 9 \n Async functions \n Shared memory and atomics『共享内存和Atomics对象』 \n \n \n 可参考之前的 文章 \n New in ECMAScript 2018 \n \n Template literal revision『模板文字修订』，可参考阮一峰老师《ES6》CH4-4.14 模板字符串的限制 P68 \n s  ( dotAll ) flag for regular expressions 『s修饰符：dotAll模式』，可参考阮一峰老师《ES6》CH5-5.7 s修饰符：dotAll模式 P78 \n RegExp named capture groups 『正则表达式命名捕获组以及后向引用』可参考之前的文章 正则表达式30分钟入门教程 \n \n 对于任何标识符名称，可以使用  (?<name>...)  语法为捕获组命名。 \n let  re  =   / (?<year>\\d{4})-(?<month>\\d{2})-(?<day>\\d{2}) / u ; \n let  result  =  re . exec ( '2015-01-02' ) ; \n // result.groups.year === '2015'; \n // result.groups.month === '01'; \n // result.groups.day === '02'; \n\n // result[0] === '2015-01-02'; \n // result[1] === '2015'; \n // result[2] === '01'; \n // result[3] === '02'; \n\n // 支持解构赋值 \n let   { groups :   { one ,  two } }   =   / ^(?<one>.*):(?<two>.*)$ / u . exec ( 'foo:bar' ) ; \nconsole . log ( ` one:  ${ one } , two:  ${ two } ` ) ;    // prints one: foo, two: bar \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 后向引用： \n 命名组可以通过 \\k<name>  结构在正则表达式中引用。 例如， \n let  duplicate  =   / ^(?<half>.*).\\k<half>$ / u ; \nduplicate . test ( 'a*b' ) ;   // false \nduplicate . test ( 'a*a' ) ;   // true \n \n 1 2 3 命名引用与编号引用可以同时使用。 \n let  triplicate  =   / ^(?<part>.*).\\k<part>.\\1$ / u ; \ntriplicate . test ( 'a*a*a' ) ;   // true \ntriplicate . test ( 'a*a*b' ) ;   // false \n \n 1 2 3 \n Object Rest/Spread Properties \n RegExp Lookbehind Assertions 『正则表达式的后向断言』 \n RegExp Unicode Property Escapes 『正则表达式 Unicode属性转义』可参考阮一峰老师《ES6》CH5-5.3 u修饰符 \n Promise.prototype.finally \n Asynchronous Iteration 『异步迭代器』可参考阮一峰老师《ES6》CH18-18.7 异步遍历器 \n New in ECMAScript 2019 \n \n Optional  catch  binding 『可选的捕获绑定』 \n \n 此提案引入的语法更改允许省略 catch 绑定及其周围的括号，如 \n try   { \n   // ... \n }   catch   { \n   // ... \n } \n \n 1 2 3 4 5 \n JSON superset \n Symbol.prototype.description \n \n // The parameter we pass to the symbol factory function provides a description for the created symbol: \n const  mySymbol  =   Symbol ( 'mySymbol' ) ; \n // The description can be accessed in two ways. \n // First, it is part of the string returned by .toString(): \nassert . equal ( mySymbol . toString ( ) ,   'Symbol(mySymbol)' ) ; \n // Second, since ES2019, we can retrieve the description via the property .description: \nassert . equal ( mySymbol . description ,   'mySymbol' ) ; \n\n //注意与Symbol.for() 和 Symbol.keyFor() 的区别 \n const  for1  =  Symbol . for ( 'a' ) ; \n const  for2  =  Symbol . for ( 'a' ) ; \nassert . equal ( Symbol . keyFor ( for1 ) ,   'a' ) ; \nassert . equal ( for1  ===  for2 ,   true ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 \n Function.prototype.toString  revision \n \n \n 摘抄两段话： \n The ECMAScript proposal “ Function.prototype.toString  revision ” (by Michael Ficarra) is at  stage 4  and therefore part of ECMAScript 2019. It brings two major improvements  compared to ES2016 : \n \n Whenever possible – source code: If a function was created via ECMAScript source code,  toString()  must return that source code. In ES2016, whether to do so is left up to engines. \n Otherwise – standardized placeholder: In ES2016, if  toString()  could not (or would not) create syntactically valid ECMAScript code, it had to return a string for which  eval()  throws a  SyntaxError . In other words,  eval()  must not be able to parse the string. This requirement was forward-incompatible – whatever string you come up with, you can never be completely sure that a future version of ECMAScript doesn’t make it syntactically valid. In contrast, the proposal standardizes a placeholder: a function whose body is  { [native code] } . \n \n \n \n Object.fromEntries \n \n Object.fromEntries  会执行 Object.entries 的相反操作：它接受可迭代的键值对并返回一个新对象，其键和相应值由键值对给出。 \n obj  =  Object . fromEntries ( [ [ 'a' ,   0 ] ,   [ 'b' ,   1 ] ] ) ;   // { a: 0, b: 1 } \n \n 1 把对象转为Map： \n obj  =   {  foo :   true ,  bar :   false   } ; \nmap  =   new   Map ( Object . entries ( obj ) ) ; \n \n 1 2 然而，从却没有 Object.entries 的逆操作，使得可以从键值对构造对象，因此通常必须编写一个辅助程序： \n obj  =  Array . from ( map ) . reduce ( ( acc ,   [ key ,  value ] )   =>  Object . assign ( acc ,   {   [ key ] :  value  } ) ,   { } ) ; \n \n 1 在有了 Object.fromEntries 之后，我们可以这样： \n obj  =  Object . fromEntries ( map ) ; \n \n 1 对于其他类似 Map 的对象，这种转换可能也很简单： \n query  =  Object . fromEntries ( new   URLSearchParams ( 'foo=bar&baz=qux' ) ) ; \n \n 1 \n 关于 URLSearchParams \n \n 对于其他集合，中间转换可以将集合转换为所需的形式： \n arr  =   [   {  name :   'Alice' ,  age :   40   } ,   {  name :   'Bob' ,  age :   36   }   ] ; \nobj  =  Object . fromEntries ( arr . map ( ( {  name ,  age  } )   =>   [  name ,  age  ] ) ) ; \n \n 1 2 更多例子用法可参考 Object.formEntries()-Motivating examples \n \n Well-formed  JSON.stringify 『格式良好的JSON.stringify』 \n String.prototype.{trimStart,trimEnd} \n \n '    a b c    ' . trim ( ) ;   // \"a b c\" \n\n '    a b c    ' . trimStart ( ) ;   // \"a b c    \" \n '    a b c    ' . trimLeft ( ) ;   // \"a b c    \" \n\n '    a b c    ' . trimEnd ( ) ;   // \"    a b c\" \n '    a b c    ' . trimRight ( ) ;   // \"    a b c\" \n \n 1 2 3 4 5 6 7 \n 为了与padStart/padEnd保持一致，trimStart和trimEnd被纳为标准函数，但是为了web兼容性， trimLeft  将别名为  trimStart ， trimRight  将别名为  trimEnd 。这意味着在大多数引擎中， String.prototype.trimRight.name  将从“trimRight”更改为“trimEnd”。 \n \n String . prototype . trimRight . name  ===   \"trimEnd\" ;   // true \n \n 1 \n Array.prototype.{flat,flatMap} \n \n // Array.prototype.flat(depth = 1): any[] \n\n [   1 , 2 ,   [ 3 , 4 ] ,   [ [ 5 , 6 ] ]   ] . flat ( 0 ) ;   // [ 1, 2, [3,4], [[5,6]] ] \n [   1 , 2 ,   [ 3 , 4 ] ,   [ [ 5 , 6 ] ]   ] . flat ( 1 ) ;   // [1, 2, 3, 4, [5,6]] \n [   1 , 2 ,   [ 3 , 4 ] ,   [ [ 5 , 6 ] ]   ] . flat ( 2 ) ;   // [1, 2, 3, 4, 5, 6] \n\n // Array.prototype.flatMap( \n //\tcallback: (value: T, index: number, array: T[]) => U | U[], \n //\tthisValue?: any \n //): U[] \n\n [ 'a' ,   'b' ,   'c' ] . flatMap ( x   =>   [ x ,  x ] ) ;   // [\"a\", \"a\", \"b\", \"b\", \"c\", \"c\"] \n [ 'a' ,   'b' ,   'c' ] . flatMap ( x   =>   [ x ] ) ;   // [\"a\", \"b\", \"c\"] \n [ 'a' ,   'b' ,   'c' ] . flatMap ( x   =>   [ ] ) ;   // [] \n [ 'a' ,   'b' ,   'c' ] . flatMap ( x   =>  x . repeat ( 3 ) ) ;   // [\"aaa\", \"bbb\", \"ccc\"] \n [ 'a' ,   'b' ,   'c' ] . flatMap ( x   =>   [ x ,   [ x ] ] ) ;   // [\"a\", Array(1), \"b\", Array(1), \"c\", Array(1)] \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 #  New in ECMAScript 2020 \n \n String.prototype.matchAll \n \n .matchAll() 的调用方法： \n const  matchIterable  =  str . matchAll ( regExp ) ; \n \n 1 给定一个字符串和一个正则表达式， .matchAll()  返回一个包含所有匹配对象的 迭代 。 \n [ ... '-a-a-a' . matchAll ( / -(a) / ug ) ] ; \n // 输出为： \n [ \n   {   0 : '-a' ,   1 : 'a' ,  index :   0 ,  input :   '-a-a-a' ,  groups :   undefined   } , \n   {   0 : '-a' ,   1 : 'a' ,  index :   2 ,  input :   '-a-a-a' ,  groups :   undefined   } , \n   {   0 : '-a' ,   1 : 'a' ,  index :   4 ,  input :   '-a-a-a' ,  groups :   undefined   } , \n ] \n \n 1 2 3 4 5 6 7 \n 标志位 /g 是必须的 \n \n [ ... '-a-a-a' . matchAll ( / -(a) / u ) ] \n // TypeError: String.prototype.matchAll called with a non-global RegExp argument \n \n 1 2 .matchAll() 不受  regExp.lastIndex 的影响并且也不会改变这个值。 \n 我们自己也可以实现一个 .matchAll() : \n function *   matchAll ( str ,  regExp )   { \n   if   ( ! regExp . global )   { \n     throw   new   TypeError ( 'Flag /g must be set!' ) ; \n   } \n   const  localCopy  =   new   RegExp ( regExp ,  regExp . flags ) ; \n   let  match ; \n   while   ( match  =  localCopy . exec ( str ) )   { \n     yield  match ; \n   } \n } \n \n 1 2 3 4 5 6 7 8 9 10 \n Dynamic imports via import() \n \n 到目前位置，引入模块的唯一方式是通过 import 表达式。其有几条限制如下： \n 1. 必须在模块的顶层使用。也就是说，不可以在块内导入某些内容。\n2. 模块标识符总是固定的。也就是说，不能根据条件更改导入的内容。而且不能动态地组装模块的标识符。\n \n import() 改变了这一现状。举个栗子： \n 现有文件如下： \n ​\tlib/my-math.mjs \n ​\tmain1.mjs \n ​\tmain2.mjs \n 其中my-math.mjs内容如下： \n function   times ( a ,  b )   { \n   return  a  *  b ; \n } \n export   function   square ( x )   { \n   return   times ( x ,  x ) ; \n } \n export   const   LIGHTSPEED   =   299792458 ; \n \n 1 2 3 4 5 6 7 那么，我们在main1.mjs中可以以下面这种方式来引入： \n const  dir  =   './lib/' ; \n const  moduleSpecifier  =  dir  +   'my-math.mjs' ; \n\n function   loadConstant ( )   { \n   return   import ( moduleSpecifier ) \n   . then ( myMath   =>   { \n     const  result  =  myMath . LIGHTSPEED ; \n    assert . equal ( result ,   299792458 ) ; \n     return  result ; \n   } ) ; \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 注意，在这段代码中有两处是之前所不允许的： \n \n 在函数内导入模块（不是模块顶层） \n 模块的标识符是一个变量 \n \n 在main2.mjs中，我们可以通过 async 函数来实现同样的功能： \n const  dir  =   './lib/' ; \n const  moduleSpecifier  =  dir  +   'my-math.mjs' ; \n\n async   function   loadConstant ( )   { \n   const  myMath  =   await   import ( moduleSpecifier ) ; \n   const  result  =  myMath . LIGHTSPEED ; \n  assert . equal ( result ,   299792458 ) ; \n   return  result ; \n } \n \n 1 2 3 4 5 6 7 8 9 import() 的使用场景： \n ​\tcase1： 在需要时加载代码 \n button . addEventListener ( 'click' ,   event   =>   { \n   import ( './dialogBox.mjs' ) \n     . then ( dialogBox   =>   { \n      dialogBox . open ( ) ; \n     } ) \n     . catch ( error   =>   { \n       /* Error handling */ \n     } ) \n } ) ; \n \n 1 2 3 4 5 6 7 8 9 ​\tcase2： 模块的条件加载 \n if   ( isLegacyPlatform ( ) )   { \n   import ( './my-polyfill.mjs' ) \n     . then ( ··· ) ; \n } \n \n 1 2 3 4 ​\tcase3： Computed module specifiers \n import ( ` messages_ ${ getLocale ( ) } .mjs ` ) \n   . then ( ··· ) ; \n \n 1 2 \n \n BigInt 『github文档很详细』 \n \n \n Promise.allSettled \n \n \n 该 Promise.allSettled() 方法返回一个在所有给定的promise都已经 fulfilled 或 rejected 后的promise，并带有一个对象数组，每个对象表示对应的promise结果。 \n 当您有多个彼此不依赖的异步任务成功完成时，或者您总是想知道每个 promise 的结果时，通常使用它。 \n 相比之下， Promise.all()  更适合彼此相互依赖或者在其中任何一个 reject 时立即结束。 \n const  promise1  =  Promise . resolve ( 3 ) ; \n const  promise2  =   new   Promise ( ( resolve ,  reject )   =>   setTimeout ( reject ,   100 ,   'foo' ) ) ; \n const  promises  =   [ promise1 ,  promise2 ] ; \n ( async   ( )   =>   { \n   const  data  =   await  Promise . allSettled ( promises ) ; \n  data . forEach ( ( item )   =>   { \n    console . log ( item ) ; \n   } ) \n } ) ( ) ; \n\n //output: \n // \"fulfilled\" \n // \"rejected\" \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 \n globalThis \n for-in  mechanics 『for-in 机制』 \n Optional Chaining 『可选链』（ ?. ） \n \n 可选链存在一下几种情况中： \n obj?.prop     // optional static property access\nobj?.[«expr»] // optional dynamic property access\nfunc?.(«arg0», «arg1») // optional function or method call\n \n 1 2 3 如果在问号前面的值既不是  undefined  也不是  null ，那么就会执行问号的运算。否则，返回  undefined 。 \n 举个栗子： \n const  persons  =   [ \n   { \n    surname :   'Zoe' , \n    address :   { \n      street :   { \n        name :   'Sesame Street' , \n        number :   '123' , \n       } , \n     } , \n   } , \n   { \n    surname :   'Mariner' , \n   } , \n   { \n    surname :   'Carmen' , \n    address :   { \n     } , \n   } , \n ] ; \n\n // 我们可以用可选链比较安全的提取街道名称 \n\n const  streetNames  =  persons . map ( \n   p   =>  p . address ?. street ?. name ) ; \nassert . deepEqual ( \n  streetNames ,   [ 'Sesame Street' ,   undefined ,   undefined ] \n ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 \n Nullish coalescing Operator 『空值合并运算符 ?? 』 \n \n 空值合并操作符 （ ?? ）是一个逻辑操作符，当左侧的操作数为  null  或者  undefined  时，返回其右侧操作数，否则返回左侧操作数。 \n 下面的两个表达式是等效的： \n a  ??  b\na  !==   undefined   &&  a  !==   null   ?  a  :  b\n \n 1 2 上面可选链的例子，可以结合空值合并运算符，来使用默认值『'no street'』来代替  undefined ： \n const  streetNames  =  persons . map ( \n   p   =>  p . address ?. street ?. name  ??   'no street name' ) ; \nassert . deepEqual ( \n  streetNames ,   [ 'Sesame Street' ,   'no street name' ,   'no street name' ] \n ) ; \n \n 1 2 3 4 5 \n import.meta \n New in ECMAScript 2021 \n \n String.prototype.replaceAll \n \n let  str  =   'abc abf adabfasdadfa' ; \nconsole . log ( str . replace ( 'a' ,   '*' ) ) ; // *bc abf adabfasdadfa \nconsole . log ( str . replace ( / a / ,   '*' ) ) ; // *bc abf adabfasdadfa \nconsole . log ( str . replace ( / a / g ,   '*' ) ) ; // *bc *bf *d*bf*sd*df* \n\nconsole . log ( str . replaceAll ( 'a' ,   '*' ) ) ; // *bc *bf *d*bf*sd*df* \n // console.log(str.replaceAll(/a/, '*')); 报错，replaceAll 当使用一个 `regex`时，您必须设置全局（“ g”）标志 \nconsole . log ( str . replaceAll ( / a / g ,   '*' ) ) ; // *bc *bf *d*bf*sd*df* \n \n 1 2 3 4 5 6 7 8 \n 当使用一个  regex 时，您必须设置全局（“ g”）标志，否则，它将引发  TypeError ：“必须使用全局 RegExp 调用 replaceAll”。 \n \n \n Promise.any \n \n Promise.any()  接收一个 Promise 可迭代对象，只要其中的一个  promise  成功，就返回那个已经成功的  promise  。如果可迭代对象中没有一个  promise  成功（即所有的  promises  都失败/拒绝），就返回一个失败的  promise 和 AggregateError 类型的实例，它是  Error  的一个子类，用于把单一的错误集合在一起。本质上，这个方法和 Promise.all() 是相反的。 \n ( async   ( )   =>   { \n     const  data  =   await  Promise . any ( [ \n       new   Promise ( ( resolve ,  reject )   =>   { \n         setTimeout ( ( )   =>   { \n           reject ( '2 second' ) ; \n         } ,   2000 ) \n       } ) , \n       new   Promise ( ( resolve ,  reject )   =>   { \n         setTimeout ( ( )   =>   { \n           resolve ( '5 second' ) ; \n         } ,   5000 ) \n       } ) \n     ] ) ; \n    console . log ( data ) ; \n  } ) ( ) ; \n\n // output: \n // 5 second \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 与Promise.race()的区别： \n \n Promise.any(): 以第一个 成功  (resolve) 为准，失败不管 \n Promie.race(): 以第一个 完成  (迭代器中的某个promise成功『resolve』或失败『reject』) 的为准 \n \n ( async   ( )   =>   { \n     const  data  =   await  Promise . race ( [ \n       new   Promise ( ( resolve ,  reject )   =>   { \n         setTimeout ( ( )   =>   { \n           reject ( '2 second' ) ; \n         } ,   2000 ) \n       } ) , \n       new   Promise ( ( resolve ,  reject )   =>   { \n         setTimeout ( ( )   =>   { \n           resolve ( '5 second' ) ; \n         } ,   5000 ) \n       } ) \n     ] ) ; \n    console . log ( data ) ; \n } ) ( ) ; \n\n // output: \n // Uncaught (in promise) 2 second \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 \n WeakRefs \n \n 之前存在弱引用： weakMap 、 weakSet \n WeakRef对象包含对对象的弱引用，这个弱引用被称为该WeakRef对象的target或者是referent。对对象的弱引用是指当该对象应该被GC回收时不会阻止GC的回收行为。而与此相反的，一个普通的引用（默认是强引用）会将与之对应的对象保存在内存中。只有当该对象没有任何的强引用时，JavaScript引擎GC才会销毁该对象并且回收该对象所占的内存空间。如果上述情况发生了，那么你就无法通过任何的弱引用来获取该对象。 \n \n 实例方法 \n \n WeakRef.prototype.deref() : 返回当前实例的WeakRef对象所绑定的target对象，如果该target对象已被GC回收则返回 undefined 。 \n class   Counter   { \n   constructor ( element )   { \n     // Remember a weak reference to the DOM element \n     this . ref  =   new   WeakRef ( element ) ; \n     this . start ( ) ; \n   } \n\n   start ( )   { \n     if   ( this . timer )   { \n       return ; \n     } \n\n     this . count  =   0 ; \n\n     const   tick   =   ( )   =>   { \n       // Get the element from the weak reference, if it still exists \n       const  element  =   this . ref . deref ( ) ; \n       if   ( element )   { \n        element . textContent  =   ++ this . count ; \n       }   else   { \n         // The element doesn't exist anymore \n        console . log ( \"The element is gone.\" ) ; \n         this . stop ( ) ; \n         this . ref  =   null ; \n       } \n     } ; \n\n     tick ( ) ; \n     this . timer  =   setInterval ( tick ,   1000 ) ; \n   } \n\n   stop ( )   { \n     if   ( this . timer )   { \n       clearInterval ( this . timer ) ; \n       this . timer  =   0 ; \n     } \n   } \n } \n\n const  counter  =   new   Counter ( document . getElementById ( \"counter\" ) ) ; \ncounter . start ( ) ; \n setTimeout ( ( )   =>   { \n  document . getElementById ( \"counter\" ) . remove ( ) ; \n } ,   5000 ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 \n Logical Assignment Operators 『逻辑赋值运算符』 \n \n 之前主要存在的复合赋值运算符：+=、-=、*=、/=、%=、<<=、>>=、>>>= \n 新版本中增加了逻辑赋值运算符：&&=、||=、??= \n const  books  =   [ \n   { \n    isbn :   '123' , \n   } , \n   { \n    title :   'ECMAScript Language Specification' , \n    isbn :   '456' , \n   } , \n ] ; \n\n // Add property .title where it’s missing \n for   ( const  book  of  books )   { \n  book . title  ??=   '(Untitled)' ; \n } \n\nassert . deepEqual ( \n  books , \n   [ \n     { \n      isbn :   '123' , \n      title :   '(Untitled)' , \n     } , \n     { \n      title :   'ECMAScript Language Specification' , \n      isbn :   '456' , \n     } , \n   ] ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 \n Numeric separators 『数字分隔符』 \n \n let  a  =   10_000_000_0000_0 ; \nconsole . log ( a ) ; // 1000000000000 \n \n 1 2 \n 主要是便于阅读，书写比较长的数字。 \n New in ECMAScript 2022 \n \n Class Fields ( Private instance methods and accessors ,  Class Public Instance Fields & Private Instance Fields ,  Static class fields and private static methods ) \n RegExp Match Indices \n Top-level  await \n Ergonomic brand checks for Private Fields \n 最后 \n 本文会持续更新，更新依据主要是根据 Finished Proposal 发布的提案。 \n 更新 \n \n 2021.07.19更新 Ergonomic brand checks for Private Fields \n 参考文章 \n \n New JavaScript features \n 全网最全 ECMAScript 攻略 \n Finished Proposal \n The TC39 Process \n ES2019: Function.prototype.toString revision \n \n ",summary:"\nECMAScript 历史\n\nECMA，读音类似“埃科妈”，是欧洲计算机制造商协会（European Computer Manufacturers Association）的简称，是一家国际性会员制度的信息和电信标准组织。1994 年之后，由于组织的标准牵涉到很多其他国家，为了体现其国际性，更名为 Ecma 国际（Ecma International），因此 Ecma 就不再是首字母缩略字了。\n\n1995 年，著名的网景公司（Netscape）的 Brendan Eich 开发了一种脚本语言，最初命名为 Mocha，后来改名为 LiveScript，最后为了蹭当时火热的 Java 热度重命名 ...",id:"post",pid:"post",readingTime:{text:"11 min read",minutes:10.725,time:643500,words:2145}},{title:"转载-节选-科技爱好者周刊节选（168期）",frontmatter:{title:"转载-节选-科技爱好者周刊节选（168期）",description:"转载-节选-科技爱好者周刊节选（168期）",date:"2021-07-23",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210723153229.jpeg",tags:["趣谈","转载"],meta:[{name:"title",content:"转载-节选-科技爱好者周刊节选（168期）"},{name:"description",content:"转载-节选-科技爱好者周刊节选（168期）"},{name:"keywords",content:"科技爱好者周刊节选"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2021-07-23-sci-note.html",relativePath:"_posts/2021-07-23-sci-note.md",key:"v-023be828",path:"/2021/07/23/sci-note/",headers:[{level:2,title:"前言",slug:"前言"},{level:2,title:"正文",slug:"正文"},{level:2,title:"最后",slug:"最后"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:' 科技爱好者周刊节选（168期） \n 前言 \n 本文是《科技爱好者周刊》（以下简称《周刊》）节选的第一篇，节选自《周刊》第168期。 \n 最近看到阮一峰老师的网络日志科技周刊，发现里面有很多有意思的东西，节选一些自己感觉好玩的、有意思的一些内容到本文。 \n 《周刊》链接： 科技爱好者周刊168期 \n 正文 \n 在第一部分   游戏：《底特律：变人》  这一节中有一段话让我很喜欢： \n \n 这个游戏是一个最好的例子，说明了  电子游戏这种东西，不仅仅是娱乐和生意，而是一个很宽泛的载体，只要你想，就有办法让它承载各种不同的东西。  完全可以让它像小说一样，用来表达作者的爱憎和抒情，或者像哲学家一样，引发人们对社会和命运的思索。 \n \n 随着年龄的增长，玩游戏的目的也悄然发生着变化。我们希望游戏可以带给我们除了娱乐、刺激之外一些不一样的东西。不要对抗、不要有排名、输赢，只要跟着游戏的情结去体验不一样的人生，去认识游戏中的世界，这也别有一番滋味在其中。 \n 第二部分   科技动态  中有几个事情让我印象深刻： \n \n 时速600公里的磁浮列车 \n \n 7月20日，四方机车公司在青岛发布世界首辆时速600公里的磁悬浮列车。一旦投入应用，这将是当前世界速度最快的地面交通工具，北京到上海仅需2.5小时。 \n \n 以北京至上海为例,加上旅途准备时间,乘飞机需要约4.5小时,高铁需要约5.5小时,而高速磁浮仅需2.5小时左右。 \n \n \n \n 话说我在青岛读书的时候就知道青岛四方机车，当时师姐的男朋友就去这个单位上班。 \n \n \n 远程驾驶服务 \n \n \n 一家美国创业公司近日在拉斯维加斯，推出"远程驾驶服务"。它不采用无人驾驶，而是由真人驾驶员在家中通过摄像头驾驶，控制信号会通过 5G 发送到车上。顾客在网上叫车以后，出租车就由远程驾驶员开到预约位置去接客。客人上车以后，必须自己接手驾驶，开到目的地。客人下车后，再由远程驾驶员接手，去接下一个顾客。 \n \n 该来的终究是要来的，有一段时间5G特别火的时候，记得就看过一篇文章，大概是说：凭借5G的超低延迟的特性，未来远程手术、远程驾驶服务都会成为可能。真是科技改变生活，很难想象10年以后的社会是什么样子，就像10年前我们无法想到现在的生活会是这个样子一样。未来已来！ \n \n 第三部分   文章  中让我眼前一亮有： \n \n 一行 CSS 代码实现全站中文简繁转换 （中文） \n \n CSS 命令  font-variant-east-asian: traditional; ，可以让网站字体从简体变成繁体。 \n \n iPod.js \n \n \n 一个 JS 应用程序，生成一个网页的音乐播放器，操作界面类似 iPod，可以链接用户的 Spotify 或 Apple Music 账户。 \n 第四部分   文摘部分  ： \n \n 做完你的项目 \n \n 如果要为 UNIX 哲学添加一个原则，我认为应该是： \n "做完你的项目。"\n \n 1 这是我能想到的最简单、但最被忽视的软件工程准则。 \n 大多数软件其实都没有真正完成，作者只是做出了基本功能，然后就发布了。很多软件后来不做了，也不是因为做完了，而是作者放弃了。 \n 让我们把程序员比作木匠。你买了一把椅子，因为觉得它能满足你的需求。可是买来以后，每隔几天，木匠就会出现在你的家里，对椅子进行修改。有些变动是你想要的，有些你无所谓，还有一些变动只会让你心生反感。甚至有时候，木匠还会出错，比如木头上伸出了一些尖刺，使椅子不再可用。 \n 你买的是椅子，而不是某种千变万化的家具，没人喜欢每天会变的椅子。 \n 程序员也是如此，应该对软件有一个总体规划，让它有一个完整的基本功能。虽然以后可以进行维护、错误修复和安全补丁，但基本功能应该从始至终都是完整清晰的。 \n 你不能说，因为出现了新情况，所以需要不断改变或完善它的功能。 如果一个软件一直在加功能，它就太大了，超出了你应该做的东西。你试图制造一个超出合理范围的东西，你需要画一下功能图，将过大的软件拆分成几个功能完整且合理的小软件。 \n 总之，做完你的项目再发布。用户拿到的，应该是一个基本上做完的项目。 \n 最后 \n 程序员的世界可以十分丰富多彩，多读，多看，对了解。一些思想、一些基本的知识更加重要。 \n 最后感谢阮一峰老师《周刊》。 \n love & peace 😘 \n ',summary:"\n前言\n\n本文是《科技爱好者周刊》（以下简称《周刊》）节选的第一篇，节选自《周刊》第168期。\n\n最近看到阮一峰老师的网络日志科技周刊，发现里面有很多有意思的东西，节选一些自己感觉好玩的、有意思的一些内容到本文。\n\n《周刊》链接：科技爱好者周刊168期\n\n正文\n\n在第一部分 游戏：《底特律：变人》 这一节中有一段话让我很喜欢：\n\n> 这个游戏是一个最好的例子，说明了 电子游戏这种东西，不仅仅是娱乐和生意，而是一个很宽泛的载体，只要你想，就有办法让它承载各种不同的东西。 完全可以让它像小说一样，用来表达作者的爱憎和抒情，或者像哲学家一样，引发人们对社会和命运的思索。\n\n随着年龄的增长，玩游戏的目 ...",id:"post",pid:"post",readingTime:{text:"1 min read",minutes:.44,time:26400,words:88}},{title:"转载-节选-科技爱好者周刊节选（169期）",frontmatter:{title:"转载-节选-科技爱好者周刊节选（169期）",description:"转载-节选-科技爱好者周刊节选（169期）",date:"2021-07-30",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210730213554.jpeg",tags:["趣谈","转载"],meta:[{name:"title",content:"转载-节选-科技爱好者周刊节选（169期）"},{name:"description",content:"转载-节选-科技爱好者周刊节选（169期）"},{name:"keywords",content:"科技爱好者周刊节选"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2021-07-30-sci-note2.html",relativePath:"_posts/2021-07-30-sci-note2.md",key:"v-c6398944",path:"/2021/07/30/sci-note2/",headers:[{level:2,title:"前言",slug:"前言"},{level:2,title:"正文",slug:"正文"},{level:2,title:"最后",slug:"最后"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:' 科技爱好者周刊节选（169期）-五菱汽车的产品设计 \n 前言 \n 本文节选自阮一峰老师的《科技爱好者周刊》第169期。 \n 《周刊》链接： 科技爱好者周刊169期 \n 正文 \n 科技动态  部分： \n \n 闪烁灯光的代码 \n \n 有人发现，2020年发布的游戏 Alyx，里面地下室的闪烁灯光，跟1998年发售的《半条命》是一样的，说明它们使用的是同样的代码。大家仔细看下面的 游戏视频 ，两者闪烁灯光的模式和频率完全一样。 \n 它的代码实现，是使用一个字符串 mmamammmmmammamamaaamammma 表示灯光亮度变化的顺序，a 表示暗，m 表示亮。这个技巧最早是1996年 John Carmack 在雷神之锤（Quake）里使用的。 \n \n 沼气摩托车 \n \n \n 一个荷兰艺术家将一辆二手摩托车，改建成使用沼气（主要成分甲烷）作为燃料。摩托车的尾部挂了一个大瓶子，用来存储沼气。 \n 加气时，需要使用一个特殊装置，到池塘和沟渠去收集有机物质分解或腐烂所释放的甲烷。 \n \n 收集8个小时的沼气，可以行驶20公里。这个项目的主要目的，是为了提醒公众环境保护。 \n \n 这... 可以的 😎 佩服 \n \n 文章  部分： \n \n 3D 打印的汽车配件 \n \n \n 福特公司在美国新发布的 Maverick 皮卡汽车，车内的大量配件都没有提供实物，而是提供了 STL 源码文件，让车主自己去 3D 打印，有一点"毛坯车"的意思。 \n 可以打印的配件包括杯架、储物箱、垃圾桶、绳索组织器、挂袋的双钩、座椅下的储物隔板等等。福特公司说，还会发布更多可 3D 打印的配件。 \n 这样做有几个好处，一是降低了车辆的出厂价格，二是用户可以根据自己的喜好，决定打印哪些配件，以及使用什么材质。另外，外部厂商也可以根据公开的接口，生产第三方配件。 \n \n 这让我想到Apple买手机不给充电器，但是性质也不完全一样。福特公司降低了车辆出厂价格，留给用户更大的取舍空间。但是Apple不带充电器，但是价格没有下调，这增加了用户的购买负担，效果明显不一样。 \n \n \n 最糟糕的音量控制界面 （英文） \n \n \n 本文收集各种极其难用的音量控制界面设计，有点恶作剧性质，比如上图。 \n \n 这可太逗了，转载预订~~~ \n \n \n JS 脚本如何正确检测用户的设备 （英文） \n \n \n 用户经常使用伪装的 User-Agent 标头，隐藏自身的信息。本文给出了各种思路，如何用 JS 脚本，正确检测用户的上网设备。 \n \n 打算翻译一下，学习一下~~ \n \n 工具  部分： \n \n MoviePy \n \n \n 一个视频编辑的 Python 库，可以方便地编写脚本，进行各种视频操作，基于 ffmpeg。 \n 资源  部分： \n \n Mac 电脑如何设置开发环境（2021版） （英文） \n \n \n 一个程序员买了新的 Mac 电脑，用于全栈开发。他详细记录了，如何将这台电脑设置成开发环境。 \n 图片  部分： \n \n 地下小镇 \n \n 澳大利亚南部内陆有一个名叫库伯佩迪（Coober Pedy）的小镇。它最初是一个蛋白石矿场，现在已经停止开采了。 \n \n 该镇的夏季地表温度接近50摄氏度，为了躲避酷暑，许多居民都搬到地下的矿洞里面居住，已经有100年历史了。 \n \n 当地的地面上，到处都是烟囱和通气孔。 \n \n 人们则是在地下安家，客厅、卧室、厨房，一应俱全。 \n \n \n \n 酒吧、教堂、商店、旅馆、娱乐设施等也在地下，整个小镇可以都在地下运作，不到地面活动。 \n 最后 \n 感谢阮一峰老师的《周刊》，可以了解到很多有趣的东西~~ \n love & peace 😘 \n ',summary:"\n前言\n\n本文节选自阮一峰老师的《科技爱好者周刊》第169期。\n\n《周刊》链接：科技爱好者周刊169期\n\n正文\n\n科技动态 部分：\n\n闪烁灯光的代码\n\n有人发现，2020年发布的游戏 Alyx，里面地下室的闪烁灯光，跟1998年发售的《半条命》是一样的，说明它们使用的是同样的代码。大家仔细看下面的游戏视频，两者闪烁灯光的模式和频率完全一样。\n\n它的代码实现，是使用一个字符串mmamammmmmammamamaaamammma表示灯光亮度变化的顺序，a 表示暗，m 表示亮。这个技巧最早是1996年 John Carmack 在雷神之锤（Quake）里使用的。\n\n沼气摩托车\n\n一个荷兰艺术家将一辆 ...",id:"post",pid:"post",readingTime:{text:"1 min read",minutes:.575,time:34500,words:115}},{title:"转载-节选-科技爱好者周刊节选（170期）",frontmatter:{title:"转载-节选-科技爱好者周刊节选（170期）",description:"转载-节选-科技爱好者周刊节选（170期）",date:"2021-08-07",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210806181429.jpeg",tags:["趣谈","转载"],meta:[{name:"title",content:"转载-节选-科技爱好者周刊节选（170期）"},{name:"description",content:"转载-节选-科技爱好者周刊节选（170期）"},{name:"keywords",content:"科技爱好者周刊节选"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2021-08-07-sci-note3.html",relativePath:"_posts/2021-08-07-sci-note3.md",key:"v-338a8c9e",path:"/2021/08/07/sci-note3/",headers:[{level:2,title:"前言",slug:"前言"},{level:2,title:"正文",slug:"正文"},{level:2,title:"最后",slug:"最后"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:' 科技爱好者周刊（第 170 期）：软件订阅制的胜利 \n 前言 \n 本文节选自阮一峰老师的《科技爱好者周刊》第170期。 \n 《周刊》链接： 科技爱好者周刊170期 \n 正文 \n \n 一个摄影师在荷兰拍到了一只倒着飞的鹅。 \n 科技动态  部分： \n \n 印度空气净化扇 \n \n 印度首都新德里，是世界空气最脏的城市之一。最近，市中心的豪华购物区耗资200万美元，建造了一个空气净化装置，40 台巨型风扇同时过滤空气。 \n \n 这个装置是一个 25 米高的风扇塔，预计将于本月完工。它的目的是为旁边的商业街和咖啡馆，提供大约一平方公里范围的干净空气。目前尚无法知道，该方法是否真能奏效。 \n \n 刚看到时，感觉挺扯的，但是，后来一想是印度，那就没事了；对于这个魔幻的国家，我觉得它做出什么事情来都是正常的。包括之前的疫情防控更是花样百出，总结一句话：什么都信，就是不信科学~~ \n \n \n 投篮机器人 \n \n 东京奥运会的第一场男子篮球比赛（美国对法国），中场休息时，丰田公司的一个投篮机器人为观众表演超准的三分球，可以在中圈命中蓝框。非常精彩。 \n 视频链接 \n 这个机器人身高2米04，是丰田公司17位工程师在业余时间研制的。它采用人工智能算法，会利用重复投篮进行数据调整，最终实现百发百中。 \n \n 汽油味香水 \n \n 福特汽车的一项调查发现，五分之一的司机表示，他们在电动汽车上，闻不到汽油味，感到不适应。近 70% 的人说，他们某种程度上想念汽油味。 \n 福特汽车因此发明了一种新的香水，"混合了淡淡的汽油味、烟熏味和橡胶味。" \n \n 文章  部分： \n \n 苏炳添的论文 （中文） \n \n 苏炳添是第一个100米跑进10秒的亚洲人。除了短跑运动员之外，他还有另外两个身份：暨南大学体育学院副教授以及北京体育大学2019级博士研究生。他曾经发表论文，以自己为例，研究怎样才能跑得更快。 \n \n 网页暗模式只要一行代码 （英文） \n \n \n 本文介绍如何使用一个 CSS 命令，反转网页颜色。 \n html   { \n   filter :   invert ( 1 ) ; \n } \n \n 1 2 3 资源  部分： \n \n 信息检索导论 \n \n \n 一本免费阅读的英语教材，介绍搜索引擎的原理和基本技术。 \n \n Public API Lists \n \n 这个 GitHub 仓库收集了各种专供软件开发使用的免费 API。 \n 图片  部分： \n \n 卵石画 \n \n 一位英国艺术家展示了如何用不同颜色的卵石作画。 \n \n \n \n 言论  部分： \n \n 我一直被问到工作与生活的平衡，我的观点是，这种说法会让人变软弱，因为它意味着你必须权衡，何时工作，何时生活。实际上，工作和生活是融合在一起的，一方不顺利，另一方就会受到影响。它们不是平衡关系。\t--  贝佐斯 ，亚马逊的老板 \n 最后 \n 感谢阮一峰老师的《周刊》，可以知道自己的渺小（大佬太多了 😆 ）~~ \n love & peace 😘 \n PS: 最佳图片：倒着飞的鹅~~ \n ',summary:"\n前言\n\n本文节选自阮一峰老师的《科技爱好者周刊》第170期。\n\n《周刊》链接：科技爱好者周刊170期\n\n正文\n\n一个摄影师在荷兰拍到了一只倒着飞的鹅。\n\n科技动态 部分：\n\n印度空气净化扇\n\n印度首都新德里，是世界空气最脏的城市之一。最近，市中心的豪华购物区耗资200万美元，建造了一个空气净化装置，40 台巨型风扇同时过滤空气。\n\n这个装置是一个 25 米高的风扇塔，预计将于本月完工。它的目的是为旁边的商业街和咖啡馆，提供大约一平方公里范围的干净空气。目前尚无法知道，该方法是否真能奏效。\n\n> 刚看到时，感觉挺扯的，但是，后来一想是印度，那就没事了；对于这个魔幻的国家，我觉得它做出什么事情来 ...",id:"post",pid:"post",readingTime:{text:"1 min read",minutes:.475,time:28500,words:95}},{title:"为什么设备欺骗变得几乎不可能",frontmatter:{title:"为什么设备欺骗变得几乎不可能",description:"为什么设备欺骗变得几乎不可能",date:"2021-08-12",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210802155602.png",tags:["JavaScript","转载","翻译"],meta:[{name:"title",content:"为什么设备欺骗变得几乎不可能"},{name:"description",content:"为什么设备欺骗变得几乎不可能"},{name:"keywords",content:"设备欺骗"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2021-08-12-device-spoof.html",relativePath:"_posts/2021-08-12-device-spoof.md",key:"v-7ae2d4e4",path:"/2021/08/12/device-spoof/",headers:[{level:3,title:"为什么系统会尝试检测设备？",slug:"为什么系统会尝试检测设备"},{level:3,title:"但是……为什么个人和机器人试图模仿设备？",slug:"但是-为什么个人和机器人试图模仿设备"},{level:3,title:"为什么设备欺骗并不总是有效？",slug:"为什么设备欺骗并不总是有效"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:' 为什么设备欺骗变得几乎不可能 \n 原文链接： Why mimicking a device is becoming almost impossible \n 如果你看过昆汀·塔伦蒂诺（Quentin Tarantino）的电影《无耻混蛋》，你可能还记得一个酒吧场景，一名英国的间谍作为纳粹官员的卧底，一个无意识的手势暴露了他的身份。 \n 虽然他穿着纳粹制服，德语说得很好，但他的一个小细节暴露了自己：他的手指。 再点三品脱时，他不用拇指、食指和中指（像德国人那样），而是用无名指、中指和食指。 餐桌旁的另一名官员立即认出这个微妙的细节是明显的英语国家。 \n \n 我们任何一个需要在网上工作的人都面临同样的状况。如果你忽略了一些看似次要的关键点而放松警惕，那么就很容易导致身份泄露。在本文，我们将进入设备检测的世界，并展示为什么以及如何模仿设备变得几乎不可能。 \n 在深入探讨之前，让我们快速了解一下为什么系统会尝试检测设备——这也是人们尝试检测或模拟设备的原因。 \n 为什么系统会尝试检测设备？ \n 在浏览器的早期和随后的“浏览器战争”中，多如牛毛的浏览器供应商意味着开发人员需要了解是哪个供应商开发的哪个客户端连接到他们的网站，然后他们开始根据检测到的浏览器来定制和优化响应 . 从这个意义上说，这是技术上的需要。 \n 我们的老朋友 User-Agent 字符串是从这些日子里幸存下来的——但现在的检测和预防技术都更加先进。 \n 在检测方面，大多数网站都采用检测机制来帮助服务客户。例如，Netflix 为每个设备（从移动设备到智能电视）支持数百种不同分辨率的视频格式。 如果没有设备检测，这怎么可能？ \n 同样，想想为笔记本电脑和桌面设备提供功能齐全的产品的公司，他们向移动用户只提供有限的版本。 \n 但是……为什么个人和机器人试图模仿设备？ \n 到目前为止，我们提出的问题将我们带到了这里，答案就是问题。 因为一些人或机器人想要获得更多特定于某些设备的元素，或者想要摆脱所谓的“设备贫民窟”（例如，他们不想因为是移动设备而限制可能性）。 同样，一些居心叵测的人希望利用某些安全措施对某些设备不那么严格这一事实。 \n 如果网站无法向移动设备显示验证码（即使超过了某些费率限制），或者如果公司仅向某些类型的设备提供特定折扣或产品，谁能阻止人们使用设备欺骗？ \n 于是便有了如今一场隐喻性的“军备竞赛”在那些试图检测设备的人和那些试图阻止检测的人之间脱颖而出。虽然这导致了对机器学习或人工智能等先进技术的更大投资，但还有一些其他方法出乎意料地没有引起太多关注，比如谷歌的设备分类方法：Picasso。稍后我们将详细介绍它，但首先，我们不要忘记那些可以在一秒钟内给您信息的微小细节。 \n 为什么设备欺骗并不总是有效？ \n 从修改 User-Agent 字符串到采用更先进的技术，设备欺骗可以通过不同的方式进行——但这也意味着有不同的方式发现设备欺骗。 \n 你在使用手机吗？真的吗？ \n 许多人认为设备欺骗就像更改 User-Agent 字符串一样简单：我们对他们说，“言语是无力的； 拿出你的证据！” \n 例如，大多数的设备欺骗试图声称该设备是移动设备却立马露出了马脚。他们忘记了模仿特有设备的特征，比如不支持触摸。 \n 你能想象不支持触摸的智能手机吗？ \n 试试下面的解决办法： \n var  touch_capable  =   (   \'ontouchstart\'   in  window  )   ||  \n            (  navigator . maxTouchPoints  >   0   )   ||  \n            (  navigator . msMaxTouchPoints  >   0   ) ; \n\n if ( touch_capable )   { \n   alert ( "Supported" ) ; \n }   else   { \n\t alert ( "Not Supported" ) ; \n } \n \n 1 2 3 4 5 6 7 8 9 正如我们所说，特定于设备的功能和信息是必不可少的。 如果你声称你的设备是 Apple iPhone 6，那么你必须了解特定于设备的详细信息，至少是 iPhone 6 的屏幕尺寸。 \n 你见过屏幕分辨率为1920×1080的iPhone 6吗？ 我们没有，检测系统也没有！ \n \n 另一个例子：如果你成功通过了 navigator.platform 测试，没有人会觉得你有一台 MacBook 很奇怪： \n \n 但是，你不能说你同时使用 Max OS X 和 Windows！ \n 欺骗设备时会忽略更多异常。 如果你曾经使用过移动浏览器（当然你使用过），你就会知道你无法调整浏览器窗口的大小。 它总是打开，最大化，覆盖整个屏幕。 这意味着对于检测系统来说，窗口的 X 和 Y 值应始终为 0，否则.. \n 关于特定设备属性的例子还可以继续，但现在是时候微笑一下了。 \n Emojis：你的感觉背叛了你吗？ \n 你是否意识到，尽管以相同的方式键入表情符号，但是在不同的设备中显示的方式有所不同呢？ \n 例如，这里有一个微笑表情符号，使用 ： and  ） 表示，系统将其转换为甜美的图片。🙂 \n 看看这个甜美的表情符号在不同的系统和设备中有多么的不同。 \n \n 假设你声称客户端运行在Android操作系统上。检测系统可以获取表情符号的哈希值，并将其与从正版安卓系统获得的哈希值进行比较。如果结果不一样，那么显然你正在欺骗你的设备。这是真正的魔法！ \n 这是来自不同设备的  U+1F600  微笑表情符号的哈希值。 \n \n 这里， sha256 是从 Windows 10 操作系统上不同版本的谷歌浏览器得到的相同表情符号的哈希值。 \n \n 你的字体匹配吗？ \n 每个系统都带有一些预装的字体，默认使用某些特定的字体。 例如，虽然 iOS 13 Academy 预装了 Engraved LET Plain:1.0 字体，但它没有 Al Bayan Bold。 但是，macOS Catalina 有！ \n 同样，Tahoma 是 Windows XP 中的默认字体，自 Vista 以来，默认字体就一直是 Segoe UI。 微软 最新的 Windows 10 字体列表 附带了一个说明： \n 请注意：并非所有桌面字体都会出现在 Windows 10 的非桌面版本中，例如 Xbox、HoloLens、SurfaceHub 等。 \n 因此，如果检测字体的检测系统没有检测到 Microsoft 页面上列出的字体，那么检测系统可以立即确定这不是普通的 Windows 10。 \n 到目前为止，我们已经研究了一些会暴露设备欺骗的问题，但并不难找到解决方法。 通过覆盖浏览器配置和提供字体、表情符号和二进制属性，这是一个可以解决的问题，尽管需要付出很多努力和成本。 \n 但是，凡事都有两面性。 \n \n 应该是：前面主要说什么是设备欺骗，为什么要进行设备欺骗，如何进行设备欺骗，然后要过度到下面要说的如何发现或打击设备欺骗 \n \n 2006 年，来自 Google 反滥用团队的 Elie Bursztein 公开分享了他的作品 Picasso，详细介绍了 Google 是如何打击 Google Play 中的设备欺骗的。 \n Picasso 旨在通过执行一些严重依赖于浏览器的操作系统和图形硬件的渲染操作来了解浏览器的设备分类。 通过使用随机种子，Picasso在每一轮中随机在画布上创建几何符号。 随机种子、圆形、宽度和高度等值是Picasso操作的要素。 因此，Picasso可以获得通过客户端不可克隆的功能（如操作系统和图形硬件）生成的图形输出。 \n \n 除非数据库预先计算了使用正版设备获得的值，否则该系统没有任何意义。 该数据库稍后用作真正的参考。 \n \n 我们必须在这里注意Picasso工作的一些要点。 例如，它使用 HTML Canvas生成图形。 人们倾向于认为Canvas是用来增加指纹熵以获得唯一性的。  正如 Multilogin 工程师们几年前所证明的那样 ，在设置中Canvas哈希值将与硬件保持一致，而不是保证独特的Canvas指纹。 2006 年，谷歌开始使用Canvas指纹的这一功能对设备进行分类，以尝试了解设备欺骗。 \n \n 尽管这是相当古老的工作（2006 年），但它已被 Cloudflare 所采用。 当我们考虑到他们的市场份额有多大时，Picasso将成为设备欺骗不可预防的机制。 \n 只要对方有一个由真实设备获得的预先计算的哈希组成的数据库，设备和操作系统欺骗就很难不被 Picasso 检测出来。 您不认为 Google 和 Cloudflare 有足够的数据集来检查设备的真实性吗？ \n 长期以来，我们一直建议用户在Multilogin中创建浏览器配置文件时，确保选择与浏览器配置文件所匹配的正确操作系统。 \n \n 尽管 Multilogin 采取了一些措施来防止检测系统，比如提供带有配置文件的字体、提供真实的画布结果等； 但最好的办法是尽可能保持真实。 离开操作系统对检测系统没有任何意义； 然而，检测虚假设置之间的不匹配意义重大！ \n The key rule is blending in the crowd for not being the person pointed to by finger. From a device spoofing perspective, as Rumi says, we would suggest: Seem as you are or be as you seem! \n ',summary:"\n\n原文链接：Why mimicking a device is becoming almost impossible\n\n如果你看过昆汀·塔伦蒂诺（Quentin Tarantino）的电影《无耻混蛋》，你可能还记得一个酒吧场景，一名英国的间谍作为纳粹官员的卧底，一个无意识的手势暴露了他的身份。\n\n虽然他穿着纳粹制服，德语说得很好，但他的一个小细节暴露了自己：他的手指。 再点三品脱时，他不用拇指、食指和中指（像德国人那样），而是用无名指、中指和食指。 餐桌旁的另一名官员立即认出这个微妙的细节是明显的英语国家。\n\n我们任何一个需要在网上工作的人都面临同样的状况。如果你忽略了一些看似次要的关键点而 ...",id:"post",pid:"post",readingTime:{text:"2 min read",minutes:1.36,time:81600.00000000001,words:272}},{title:"转载-节选-科技爱好者周刊节选（171期）",frontmatter:{title:"转载-节选-科技爱好者周刊节选（171期）",description:"转载-节选-科技爱好者周刊节选（171期）",date:"2021-08-13",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210813163942.jpeg",tags:["趣谈","转载"],meta:[{name:"title",content:"转载-节选-科技爱好者周刊节选（171期）"},{name:"description",content:"转载-节选-科技爱好者周刊节选（171期）"},{name:"keywords",content:"科技爱好者周刊节选"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2021-08-13-sci-note4.html",relativePath:"_posts/2021-08-13-sci-note4.md",key:"v-772ba81e",path:"/2021/08/13/sci-note4/",headers:[{level:2,title:"前言",slug:"前言"},{level:2,title:"正文",slug:"正文"},{level:2,title:"最后",slug:"最后"}],lastUpdated:"8/18/2021, 11:52:47 AM",content:' 科技爱好者周刊（第 171 期）：云服务流量有多贵？ \n 前言 \n 本文节选自阮一峰老师的《科技爱好者周刊》第171期。 \n 《周刊》链接： 科技爱好者周刊171期 \n 正文 \n 云服务流量有多贵  部分结论： \n 小网站尽量不要托管在大型云服务商那里，流量费用实在吃不消。如果不得不放在上面，那就必须设法降低或转移流量，比如使用 CDN。 \n 科技动态  部分： \n \n 本田电动平衡车 \n \n 日本摩托车厂商本田公司，推出了全新设计的单轮电动平衡车，令人耳目一新。这种车比摩托车成本更低、更节省空间。 \n \n \n \n 别说这小车挺中我意的~~ \n \n \n 人工智能的读图会意 \n \n \n 人工智能在图像学的应用，取得了新进展。 \n 8月12日，阿里巴巴达摩院研发的 AliceMind 系统（已在  GitHub  开源），在2021国际 VQA 挑战赛中，获得榜首成绩后，再次刷新了 VQA 得分纪录，首次超越人类的分数。 \n 所谓 VQA（Visual Question Answering） 指的是视觉问答，简单说，就是根据图片回答问题，属于视觉-文本推理，也叫做"读图会意"，是更高层次的"图像识别"。 \n 请看下图，图像识别工具会认出是一架飞机，而视觉问答工具则会尝试理解这张图片：它是什么型号的飞机？哪一年制造的？属于哪个国家？用什么材料做的？...... \n \n VQA 技术有着广阔的应用，可以使得图片搜索质量上一个台阶，并且在医疗诊断、智能驾驶等领域有着巨大的实用价值。据说，阿里巴巴内部已经把它用于店铺的智能客服，从商品图片提取信息，自动回答用户的咨询。 \n \n DIY 笔记本 \n \n 美国 Framebook 公司推出了世界第一款 DIY 笔记本，用户收到的就是一堆零件，需要自己组装成一台 13.5寸的笔记本电脑。 \n \n \n \n \n 这帮歪果仁脑洞是真滴大，但是我喜欢~~ \n \n 文章  部分： \n \n 音频可视化入门 （中文） \n \n 作者介绍了音频处理的基本知识，如何进行采样，并通过傅立叶变换分离频率，最后实现音乐播放器的可视化音柱跳跃效果。 \n \n 真不错~~ \n \n \n JavaScript 的浮点数格式 （英文） \n \n 本文介绍了 JavaScript 的浮点数格式，JS 引擎底层到底是怎么存储一个数字的，图文并茂。 \n 工具  部分： \n \n Muse \n \n \n Muse 是一个无代码的网站生成器，但是生成的是 3D 虚拟网站。 \n 这个工具还没有做完，现有的部分已经很酷了，全流程都是 3D 场景。可以裸眼使用，也可以配合 VR 眼镜，3D 网站的未来前景非常光明。 \n \n MacType \n \n 这个工具将 Mac 电脑的字体渲染方法，移植到 Windows 电脑。 \n \n 先存一下，感觉有用~~ \n \n 资源  部分： \n \n FastAI book \n \n \n FastAI 是一个深度学习库，这是它的教程书，介绍深度学习的基础知识，以及如何用这个库完成人工智能项目。 \n 言论  部分： \n \n \n 抖音的推荐算法有一个最大的优势，就是它的内容很短，用户的观看历史以秒计算。用户使用一个小时，可以产生几百条观看记录。Netflix 需要等待一个月，才能获得相同数量的用户观看记录。 \n \n \n 经常有人问我："未来 10 年会发生什么变化？" 但是，几乎从没人问我："未来 10 年什么不会改变？" 第二个问题实际上更重要，因为只有基于稳定的事物，我们才能制定业务战略。\t\t\t-- 贝佐斯，亚马逊老板 \n \n \n 我担心未来的技术会让美国的电影人以数字方式复制我的动作，再套上任何演员的脸。我一生都在训练，我们武者只会越来越老，他们却可以永远拥有我的动作，变成他们的知识产权，所以我拒绝与他们合作，不让他们使用数字技术捕捉我的动作。\t\t--  李连杰 ，谈为什么拒绝出演《黑客帝国》续集 \n 最后 \n 感谢阮一峰老师的《周刊》，技术进步的速度总让人瞠目结舌~~ \n love & peace 😘 \n PS: 最佳言论：经常有人问我："未来 10 年会发生什么变化？" 但是，几乎从没人问我："未来 10 年什么不会改变？" 第二个问题实际上更重要，因为只有基于稳定的事物，我们才能制定业务战略。 \n ',summary:"\n前言\n\n本文节选自阮一峰老师的《科技爱好者周刊》第171期。\n\n《周刊》链接：科技爱好者周刊171期\n\n正文\n\n云服务流量有多贵 部分结论：\n\n小网站尽量不要托管在大型云服务商那里，流量费用实在吃不消。如果不得不放在上面，那就必须设法降低或转移流量，比如使用 CDN。\n\n科技动态 部分：\n\n本田电动平衡车\n\n日本摩托车厂商本田公司，推出了全新设计的单轮电动平衡车，令人耳目一新。这种车比摩托车成本更低、更节省空间。\n\n> 别说这小车挺中我意的\n\n人工智能的读图会意\n\n人工智能在图像学的应用，取得了新进展。\n\n8月12日，阿里巴巴达摩院研发的 AliceMind 系统（已在 GitHub 开源） ...",id:"post",pid:"post",readingTime:{text:"1 min read",minutes:.705,time:42300,words:141}},{title:"如何对图片主题色进行提取",frontmatter:{title:"如何对图片主题色进行提取",description:"如何对图片主题色进行提取",date:"2021-08-15",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210815223336.jpeg",tags:["JavaScript","转载"],meta:[{name:"title",content:"如何对图片主题色进行提取"},{name:"description",content:"如何对图片主题色进行提取"},{name:"keywords",content:"图片主题色提取, canvas"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2021-08-15-get-image-data.html",relativePath:"_posts/2021-08-15-get-image-data.md",key:"v-4d0b8f92",path:"/2021/08/15/get-image-data/",headers:[{level:2,title:"前言",slug:"前言"},{level:2,title:"网易云特效",slug:"网易云特效"},{level:2,title:"获取图片数据",slug:"获取图片数据"},{level:2,title:"对图片数据进行处理",slug:"对图片数据进行处理"},{level:2,title:"对颜色进行排序",slug:"对颜色进行排序"},{level:2,title:"最后",slug:"最后"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:' 如何对图片主题色进行提取 \n 前言 \n 本文转载于公众号『前端森林』，对作者 前端森林 表示感谢。 \n 并非原文转载，里面部分代码及文字按照个人风格做了修改，但最终效果一致。 \n 网易云特效 \n 在网易云听歌时，发现了一个很有意思的特效：就是切换歌曲时，会根据当前封面替换背景色。 \n 首先我构思了很多它可能的实现方式： \n \n 机器学习对图片进行色彩分析 \n 前端提取图片主色调，做渐变处理 \n 封面背景图做高斯模糊 \n \n 对于第一种，他不在我的知识范围内，这里就不展开说明了。 \n 第二种的话，一般都是利用 canvas 来实现。 \n 第三种相对来说，从技术层面来看，实现上是最为简单的。 \n 做了猜测分析后，我默默打开了熟悉的 Chrome 控制台，打开了网易云音乐的源代码： \n \n 好家伙，果然是第三种实现方式。 \n 本来到这里，本文就该结束了。但之前也有朋友问过我 如何对前端图片主题色进行提取 的问题，正好之前也做过类似的需求，这里就展开做个说明吧。 \n 我们这里以一个图片网站为例，来展示实际业务中应用较广的场景： \n \n 在弱网下，图片加载速度较慢，此时在图片完全加载之前，提取图片的主色调，然后填充为背景色。这样用户体验能有较大的提升。 \n 那具体是怎么实现的呢？ \n 我们这里采用 canvas 来实现，具体分为三步： \n \n 获取图片数据 \n 对图片数据进行处理 \n 对颜色列表排序 \n \n 这里我们使用的测试图片为： \n \n 相对来说，主色调较为明显，也便于测试～ \n 获取图片数据 \n 我们知道图片是由一个个像素点组成的。通过 canvas 的 getImageData() 方法恰好可以获取图片的像素数据： \n function   getImage ( url )   { \n     return   new   Promise ( resolve   =>   { \n         let  img  =   new   Image ( ) ; \n        img . onload   =   ( )   =>   { \n             resolve ( img ) ; \n         } \n        img . src  =  url ; \n     } ) \n } ; \n\n async   function   getColor ( url )   { \n     const  img  =   await   getImage ( url ) ; \n     const  canvas  =  document . createElement ( \'canvas\' ) ; \n     const  ctx  =  canvas . getContext ( \'2d\' ) ; \n\n    canvas . width  =  img . naturalWidth ; \n    canvas . height  =  img . naturalHeight ; \n    ctx . drawImage ( img ,   0 ,   0 ,  canvas . width ,  canvas . height ) ; \n     const  PXdata  =  ctx . getImageData ( 0 ,   0 ,  canvas . width ,  canvas . height ) . data ; \n    console . log ( PXdata ) ; \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 输出结果如下： \n \n \n Uint8ClampedArray (canvas元素专有类型)之前 文章 有提及。 \n \n 获取了图片数据，下一步就要对其进行相应的处理。 \n 对图片数据进行处理 \n getImageData() 方法返回 ImageData 对象，该对象拷贝了画布指定矩形的像素数据。 \n 对于 ImageData 对象中的每个像素，都存在着四方面的信息，即 RGBA 值： \n \n R - 红色 (0-255) \n G - 绿色 (0-255) \n B - 蓝色 (0-255) \n A - alpha 通道 (0-255; 0 是透明的，255 是完全可见的) \n \n 展开上一步得到的数据： \n \n \n ImageData对象可参考 ImageData \n \n 知道了规律，那让我们来对数据做一下处理：主要就是对颜色进行分组，并统计每种颜色分别出现的次数： \n function   getCountColor ( data )   { \n     let  rgba  =   [ ] ; \n     let  rgbaStr  =   \'\' ; \n     let  colorList  =   { } ; \n     for ( let  i  =   0 ;  i  <  data . length ;  i += 4 )   { \n        rgba [ 0 ]   =  data [ i ] ; \n        rgba [ 1 ]   =  data [ i  +   1 ] ; \n        rgba [ 2 ]   =  data [ i  +   2 ] ; \n        rgba [ 3 ]   =  data [ i  +   3 ] ; \n\n        rgbaStr  =  rgba . join ( ) ; \n\n         if ( colorList [ rgbaStr ] )   { \n            colorList [ rgbaStr ]   +=   1 ; \n         }   else   { \n            colorList [ rgbaStr ]   =   1 ; \n         } \n     } \n    console . log ( colorList ) \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 输出结果为： \n \n 到这里，我们就得到了每种颜色分别出现的次数。 \n 对颜色进行排序 \n 最后一步，对上面得到的色值对象做一个排序： \n for ( let  prop  in  colorList )   { \n    arr . push ( { \n        color :  prop , \n        count :  colorList [ prop ] \n     } ) \n } \narr . sort ( ( a ,  b )   =>  b . count  -  a . count ) ; \n \n 1 2 3 4 5 6 7 排序后得到如下结果： \n \n 到这里我们就得到了图片色值出现次数从大到小的排序数组，我们来看排在第一位的 rgba(51,8,51,255) 。 \n \n 最终代码： \n // index.html\n <! DOCTYPE   html > \n < html   lang = " en " > \n < head > \n     < meta   charset = " UTF-8 " > \n     < meta   http-equiv = " X-UA-Compatible "   content = " IE=edge " > \n     < meta   name = " viewport "   content = " width=device-width, initial-scale=1.0 " > \n     < title > 取主题色 </ title > \n     < style > \n         *   { \n             margin :  0 ; \n             padding :  0 ; \n         } \n         html, body   { \n             height :  100% ; \n             width :  100% ; \n         } \n         img   { \n             position :  absolute ; \n             top :  50% ; \n             left :  50% ; \n             transform :   translate ( -50% ,  -50% ) ; \n         } \n     </ style > \n </ head > \n < script   src = " ./index.js " > </ script > \n < script > \n     ( async   ( url )   =>   { \n         let  data  =   await   getColor ( url ) ; \n        document . body . style . background  =   \'rgba(\'   +  data . color  +   \')\' ; \n     } ) ( "./img/wukong.jpeg" ) \n </ script > \n < body > \n     < img   src = " ./img/wukong.jpeg "   alt = " " > \n </ body > \n </ html > \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 // index.js \n function   getImage ( url )   { \n     return   new   Promise ( resolve   =>   { \n         let  img  =   new   Image ( ) ; \n        img . onload   =   ( )   =>   { \n             resolve ( img ) ; \n         } \n        img . src  =  url ; \n     } ) \n } ; \n\n async   function   getColor ( url )   { \n     const  img  =   await   getImage ( url ) ; \n     const  canvas  =  document . createElement ( \'canvas\' ) ; \n     const  ctx  =  canvas . getContext ( \'2d\' ) ; \n\n    canvas . width  =  img . naturalWidth ; \n    canvas . height  =  img . naturalHeight ; \n    ctx . drawImage ( img ,   0 ,   0 ,  canvas . width ,  canvas . height ) ; \n     const  PXdata  =  ctx . getImageData ( 0 ,   0 ,  canvas . width ,  canvas . height ) . data ; \n     return   getCountColor ( PXdata ) ; \n } \n\n function   getCountColor ( data )   { \n     let  rgba  =   [ ] ; \n     let  rgbaStr  =   \'\' ; \n     let  colorList  =   { } ; \n     let  arr  =   [ ] ; \n     for ( let  i  =   0 ;  i  <  data . length ;  i += 4 )   { \n        rgba [ 0 ]   =  data [ i ] ; \n        rgba [ 1 ]   =  data [ i  +   1 ] ; \n        rgba [ 2 ]   =  data [ i  +   2 ] ; \n        rgba [ 3 ]   =  data [ i  +   3 ] ; \n\n        rgbaStr  =  rgba . join ( ) ; \n\n         if ( colorList [ rgbaStr ] )   { \n            colorList [ rgbaStr ]   +=   1 ; \n         }   else   { \n            colorList [ rgbaStr ]   =   1 ; \n         } \n     } \n     for ( let  prop  in  colorList )   { \n        arr . push ( { \n            color :  prop , \n            count :  colorList [ prop ] \n         } ) \n     } \n    arr . sort ( ( a ,  b )   =>  b . count  -  a . count ) ; \n     return  arr [ 0 ] ; \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 #  最后 \n 最后还是回到文章最开始提到的网易云音乐的播放器特效。不管它的实现方式是怎么样的，它的这种产品创意是值得我们学习的。 \n 我们平时在浏览国内外的一些网站或者使用一些 app 时，总能遇到一些让你拍手称赞的效果。而这些特效往往又与前端分不开。 \n ',summary:"\n前言\n\n本文转载于公众号『前端森林』，对作者前端森林表示感谢。\n\n并非原文转载，里面部分代码及文字按照个人风格做了修改，但最终效果一致。\n\n网易云特效\n\n在网易云听歌时，发现了一个很有意思的特效：就是切换歌曲时，会根据当前封面替换背景色。\n\n首先我构思了很多它可能的实现方式：\n\n机器学习对图片进行色彩分析\n前端提取图片主色调，做渐变处理\n封面背景图做高斯模糊\n\n对于第一种，他不在我的知识范围内，这里就不展开说明了。\n\n第二种的话，一般都是利用canvas来实现。\n\n第三种相对来说，从技术层面来看，实现上是最为简单的。\n\n做了猜测分析后，我默默打开了熟悉的 Chrome 控制台，打开了网易云音 ...",id:"post",pid:"post",readingTime:{text:"3 min read",minutes:2.405,time:144299.99999999997,words:481}},{title:"How JavaScript works - Deep dive into WebSockets and HTTP/2 with SSE + how to pick the right path",frontmatter:{title:"How JavaScript works - Deep dive into WebSockets and HTTP/2 with SSE + how to pick the right path",description:"How Javascript works",date:"2021-08-18",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210816143708.png",tags:["翻译","转载","JavaScript"],meta:[{name:"title",content:"深入理解WebSockets和带有SSE机制的Http/2以及正确的使用姿势"},{name:"description",content:"深入理解WebSockets和带有SSE机制的Http/2以及正确的使用姿势"},{name:"keywords",content:"WebSockets, Http/2"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2021-08-18-how-javascript-work5.html",relativePath:"_posts/2021-08-18-how-javascript-work5.md",key:"v-04f59a88",path:"/2021/08/18/how-javascript-work5/",headers:[{level:2,title:"Intro",slug:"intro"},{level:2,title:"Making HTTP “bidirectional”",slug:"making-http-bidirectional"},{level:2,title:"The introduction of WebSockets",slug:"the-introduction-of-websockets"},{level:2,title:"WebSocket URLs",slug:"websocket-urls"},{level:2,title:"Framing protocol",slug:"framing-protocol"},{level:2,title:"Data on the frames",slug:"data-on-the-frames"},{level:2,title:"Fragmentation",slug:"fragmentation"},{level:2,title:"What is Hearbeating?",slug:"what-is-hearbeating"},{level:2,title:"Handling Errors",slug:"handling-errors"},{level:2,title:"Closing the Connection",slug:"closing-the-connection"},{level:2,title:"How do WebSockets and HTTP/2 compare?",slug:"how-do-websockets-and-http-2-compare"},{level:2,title:"How to choose between WebSocket and HTTP/2?",slug:"how-to-choose-between-websocket-and-http-2"},{level:2,title:"How we make the decision at SessionStack",slug:"how-we-make-the-decision-at-sessionstack"}],lastUpdated:"8/18/2021, 11:52:47 AM",content:" How JavaScript works - Deep dive into WebSockets and HTTP/2 with SSE + how to pick the right path \n \n Javascript 工作原理 - 深入理解WebSockets和带有SSE机制的Http/2以及正确的使用姿势 \n \n This is post # 5 of the series dedicated to exploring JavaScript。 \n \n 这是 Javascript 工作原理系列的第五章。 \n \n This time we’ll dive into the world of communication protocols, mapping and discussing their attributes and building parts on the way. We’ll offer a quick comparison of WebSockets and HTTP/2. At the end, we share some ideas on how to choose which way to go when it comes to network protocols. \n \n 这次我们将会深入通信协议的世界，列举并讨论它们的特点和内部构造。我们将会给出一份 WebSockets 和 HTTP/2 的快速比较 。在文末，我们将会分享一些有关如何正确地选择网络协议的见解。 \n Intro \n \n 简介 \n \n Nowadays complex web apps that feature rich, dynamic UIs are taken for granted. And it’s not surprising — the internet has come a long way since its inception. \n \n 现在，复杂的网页程序拥有丰富的功能，动态交互能力被认为是理所当然的事情。而这并不令人感到惊讶－因为自互联网诞生以来，它已走过一段漫长的时间。 \n \n Initially, the internet wasn’t built to support such dynamic and complex web apps. It was conceived to be a collection of HTML pages, linking to one another to form the concept of “web” that contains information. Everything was largely built around the so-called request/response paradigm of HTTP. A client loads up a page and then nothing happens until the user clicks and navigates to the next page. \n \n 起初，互联网并不是用来支持如此动态和复杂的网页程序的。它本来设想是由大量的 HTML 页面组成的，每个页面链接到其它的页面，这样就形成了包含信息的网页的概念。一切都是极大地围绕着所谓的 HTTP 请求/响应模式来建立的。客户端加载一个网页，直到用户点击页面并导航到下一个网页。 \n \n Around 2005, AJAX was introduced and a lot of people started to explore the possibilities of making connections between a client and а server  bidirectional . Still, all HTTP communication was steered by the client, which required user interaction or periodic polling to load new data from the server. \n \n 大约在 2005 年，引入了 AJAX，然后，很多人开始探索客户端和服务端双向通信的可能性。不变的是，所有的 HTTP 通信都是由客户端控制的，意即必须由用户交互或者定期轮询以从服务器加载数据。 \n Making HTTP “bidirectional” \n \n 让 HTTP 支持双向通信 \n \n Technologies that enable the server to send data to the client “proactively” have been around for quite some time. “ Push ” and “ Comet ” to name a few. \n \n 支持服务器主动向客户端推送数据的技术已经出现了好一段时间了。比如 \" Push \" 和 \" Comet \" 技术。 \n \n One of the most common hacks to create the illusion that the server is sending data to the client is called  long polling . With long polling, the client opens an HTTP connection to the server which keeps it open until a response is sent. Whenever the server has new data that has to be sent, it transmits it as a response. \n \n 长轮询是产生服务端主动向客户端发送数据这一错觉最常见的 hack 之一。通过长轮询，客户端打开了一个连接到服务端的 HTTP 连接，服务端保持该连接直到返回响应数据。当服务端有新数据需要发送时，它会把新数据作为响应发送给客户端。 \n \n Let’s see how a very simple long polling snippet might look like: \n \n 让我们看一下简单的长轮询代码片段： \n \n ( function   poll ( ) { \n    setTimeout ( function ( ) { \n      $ . ajax ( {  \n        url :   'https://api.example.com/endpoint' ,  \n         success :   function ( data )   { \n           // Do something with `data` \n           // ... \n\n           //Setup the next poll recursively \n           poll ( ) ; \n         } ,  \n        dataType :   'json' \n       } ) ; \n   } ,   10000 ) ; \n } ) ( ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 This is basically a self-executing function that runs the first time automatically. It sets up the ten (10) second interval and after each async Ajax call to the server, the callback calls  ajax  again. \n \n 这是一个基础的自执行函数，第一次会自动运行。它每隔 10 秒钟异步请求服务器并且当每次发起对服务器的异步请求之后，会在回调函数里面再次调用  ajax  函数。 \n \n Other techniques involve  Flash  or  XHR multipart request  and the so-called  htmlfiles . \n \n 其它技术涉及到  Flash  和  XHR 多方请求 以及所谓的  htmlfiles 。 \n \n All these workarounds share the same problem though: they carry the overhead of HTTP, which doesn’t make them well-suited for low-latency applications. Think multiplayer first-person shooter games in the browser or any other online game with a realtime component. \n \n 所有这些方案都有一个共同的问题：都带有 HTTP 开销，这样就会使得它们不适用于低延迟程序。试想一下浏览器中的第一人称射击游戏或者其它要求实时功能的在线游戏。 \n The introduction of WebSockets \n \n webScokets 的出现 \n \n The  WebSocket  specification defines an API establishing “socket” connections between a web browser and a server. In plain words: there is a persistent connection between the client and the server and both parties can start sending data at any time. \n \n WebSocket  规范定义了一个 API 用以在网页浏览器和服务器建立一个套接字连接。通俗地讲：在客户端和服务器保有一个永久连接，两边可以在任意时间开始发送数据。 \n \n \n The client establishes a WebSocket connection through a process known as the WebSocket  handshake . This process starts with the client sending a regular HTTP request to the server. An  Upgrade  header is included in this request which informs the server that the client wishes to establish a WebSocket connection. \n \n 客户端通过 WebSocket 握手的过程来创建 WebSocket 连接。在这一过程中，首先客户端向服务器发起一个常规的 HTTP 请求。请求中会包含一个  Upgrade  的请求头，通知服务器客户端想要建立一个 WebSocket 连接。 \n \n Let’s see how opening a WebSocket connection looks like on the client side: \n \n 让我们看下如何在客户端创建 WebSocket 连接： \n \n // Create a new WebSocket with an encrypted connection. \n var  socket  =   new   WebSocket ( 'ws://websocket.example.com' ) ; \n \n 1 2 \n WebSocket URLs use the  ws  scheme. There is also  wss  for secure WebSocket connections which is the equivalent of  HTTPS . \n 网页套接字地址使用了  ws  协议。 wss  是一个等同于  HTTPS  的安全的网页套接字连接。 \n \n This scheme just starts the process of opening a WebSocket connection towards  websocket.example.com . \n \n 该协议开始启动打开到  websocket.example.com  的 WebSocket 连接的过程。 \n \n Here is a simplified example of the initial request headers. \n \n 下面是初始化请求头的简化例子。 \n \n GET ws://websocket.example.com/ HTTP/1.1\nOrigin: http://example.com\nConnection: Upgrade\nHost: websocket.example.com\nUpgrade: websocket\n \n 1 2 3 4 5 If the server supports the WebSocket protocol, it will agree to the upgrade and will communicate this through the  Upgrade  header in the response. \n \n 如果服务器支持网页套接字协议，它将会同意升级请求，然后通过在响应里面返回  Upgrade  头来进行通信。 \n \n Let’s see how this can be implemented in Node.JS: \n \n 让我们看下 Node.js 的实现： \n \n // We'll be using the https://github.com/theturtle32/WebSocket-Node \n // WebSocket implementation \n var  WebSocketServer  =   require ( 'websocket' ) . server ; \n var  http  =   require ( 'http' ) ; \n\n var  server  =  http . createServer ( function ( request ,  response )   { \n   // process HTTP request.  \n } ) ; \nserver . listen ( 1337 ,   function ( )   {   } ) ; \n\n // create the server \nwsServer  =   new   WebSocketServer ( { \n  httpServer :  server\n } ) ; \n\n // WebSocket server \nwsServer . on ( 'request' ,   function ( request )   { \n   var  connection  =  request . accept ( null ,  request . origin ) ; \n\n   // This is the most important callback for us, we'll handle \n   // all messages from users here. \n  connection . on ( 'message' ,   function ( message )   { \n       // Process WebSocket message \n   } ) ; \n\n  connection . on ( 'close' ,   function ( connection )   { \n     // Connection closes \n   } ) ; \n } ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 After the connection is established, the server replies by upgrading: \n \n 连接建立之后，服务器使用升级来作为回复： \n \n HTTP/1.1 101 Switching Protocols\nDate: Wed, 25 Oct 2017 10:07:34 GMT\nConnection: Upgrade\nUpgrade: WebSocket\n \n 1 2 3 4 Once the connection has been established, the  open  event will be fired on your WebSocket instance on the client side: \n \n 一旦连接建立，会触发客户端网页套接字实例的  open  事件。 \n \n var  socket  =   new   WebSocket ( 'ws://websocket.example.com' ) ; \n\n // Show a connected message when the WebSocket is opened. \nsocket . onopen   =   function ( event )   { \n  console . log ( 'WebSocket is connected.' ) ; \n } ; \n \n 1 2 3 4 5 6 Now that the handshake is complete the initial HTTP connection is replaced by a WebSocket connection that uses the same underlying TCP/IP connection. At this point, either party can start sending data. \n \n 现在，握手结束了，最初的 HTTP 连接被替换为 WebSocket 连接，该连接底层使用同样的 TCP/IP 连接。现在两边都可以开始发送数据了。 \n \n With WebSockets, you can transfer as much data as you like without incurring the overhead associated with traditional HTTP requests. Data is transferred through a WebSocket as  messages , each of which consists of one or more  frames  containing the data you are sending (the payload). In order to ensure the message can be properly reconstructed when it reaches the client each frame is prefixed with 4–12 bytes of data about the payload. Using this frame-based messaging system helps to reduce the amount of non-payload data that is transferred, leading to significant reductions in latency. \n \n 通过 WebSocket，你可以随意发送数据而不用担心传统 HTTP 请求所带来的相关开销。数据是以消息的形式通过 WebSocket 进行传输的，每条信息是由一个或者多个帧组成，帧包含你所传输的数据(有效载荷)。为了保证当消息到达客户端的时候被正确地重新组装出来，每一帧都会前置关于有效载荷的 4-12 个字节的数据。使用这种基于帧的信息系统可以帮助减少非有效载荷数据的传输，从而显著地减少延迟。 \n \n Note : It’s worth noting that the client will only be notified about a new message once all of the frames have been received and the original message payload has been reconstructed. \n \n 这里需要注意的是只有当所有的消息帧都被接收到而且原始的信息有效载荷被重新组装的时候，客户端才会接收到新消息的通知。 \n WebSocket URLs \n \n WebSocket 地址 \n \n We briefly mentioned before that WebSockets introduce a new URL scheme. In reality, they introduce two new schemes:  ws://  and  wss:// . \n \n 前面我们简要地谈到 WebSockets 引进了一个新的地址协议。实际上，WebSocket 引进了两种新协议： ws://  和  wss:// 。 \n \n URLs have scheme-specific grammar. WebSocket URLs are special in that they do not support anchors (  #sample_anchor  ). \n \n URL 地址含有协议指定的语法。WebSocket 地址特别之处在于，它不支持锚( sample_anchor )。 \n \n The same rules apply to WebSocket style URLs as to HTTP style URLs.  ws  is unencrypted and has port 80 as default, while  wss  requires TLS encryption and has port 443 as default. \n \n WebSocket 风格的地址和 HTTP 风格的地址使用相同的地址规则。 ws  是未加密且默认是 80 端口，而  wss  要求 TSL 加密且默认 443 端口。 \n Framing protocol \n \n 帧协议 \n \n Let’s take a deeper look at the framing protocol. This is what the  RFC  provides us with: \n \n 让我们深入了解下帧协议。这是  RFC  提供的： \n \n  \t\t\t0                   1                   2                   3\n      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n     +-+-+-+-+-------+-+-------------+-------------------------------+\n     |F|R|R|R| opcode|M| Payload len |    Extended payload length    |\n     |I|S|S|S|  (4)  |A|     (7)     |             (16/64)           |\n     |N|V|V|V|       |S|             |   (if payload len==126/127)   |\n     | |1|2|3|       |K|             |                               |\n     +-+-+-+-+-------+-+-------------+ - - - - - - - - - - - - - - - +\n     |     Extended payload length continued, if payload len == 127  |\n     + - - - - - - - - - - - - - - - +-------------------------------+\n     |                               |Masking-key, if MASK set to 1  |\n     +-------------------------------+-------------------------------+\n     | Masking-key (continued)       |          Payload Data         |\n     +-------------------------------- - - - - - - - - - - - - - - - +\n     :                     Payload Data continued ...                :\n     + - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - +\n     |                     Payload Data continued ...                |\n     +---------------------------------------------------------------+\n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 As of the WebSocket version specified by the RFC, there’s only a header in front of each packet. It’s quite a complex header, however. Here are its building blocks explained: \n \n 由于 WebSocket 版本是由 RFC 所规定的，所以每个包前面只有一个头部信息。然而，这个头部信息相当的复杂。这是其组成模块的说明： \n \n \n \n fin  ( 1 bit ): indicates if this frame is the final frame that makes up the message. Most of the time the message fits into a single frame and this bit will always be set. Experiments show that Firefox makes a second frame after 32K. \n \n fin (1 位)：指示是否是组成信息的最后一帧。大多数时候，信息正好一帧所以该位通常有值。测试表明火狐的第二帧数据在 32K 之后。 \n \n \n \n rsv1 ,  rsv2 ,  rsv3  ( 1 bit each ): must be 0 unless an extension is negotiated that defines meanings for non-zero values. If a nonzero value is received and none of the negotiated extensions defines the meaning of such a nonzero value, the receiving endpoint must fail the connection. \n \n rsv1 ， rsv2 ， rsv3 (每个一位)：必须是 0 除非使用协商扩展来定义非 0 值的含义。如果收到一个非 0 值且没有协商扩展来定义非零值的含义，接收端会中断连接。 \n \n \n \n opcode  ( 4 bits ): says what the frame represents. The following values are currently in use: \n \n \n 0x00 : this frame continues the payload from the previous. \n \n \n 0x01 : this frame includes text data. \n \n \n 0x02 : this frame includes binary data. \n \n \n 0x08 : this frame terminates the connection. \n \n \n 0x09 : this frame is a ping. \n \n \n 0x0a : this frame is a pong. \n (As you can see, there are enough values unused; they’ve been reserved for future use). \n \n \n \n opcode (4 位)：帧表示的数据。目前可用的值： \n \n 0x00 ：该帧接续前面一帧的有效载荷。 \n 0x01 ：该帧包含文本数据。 \n 0x02 ：该帧包含二进制数据。 \n 0x08 ：该帧中断连接。 \n 0x09 ：该帧是一个 ping。 \n 0x0a ：该帧是一个pong。 \n \n 正如你所看到的，有相当一部分值未被使用；它们是保留以备将来使用的。 \n \n \n \n mask  ( 1 bit ): indicates if the connection is masked. As it stands right now, every message from a client to a server  must be masked  and the spec would want to terminate the connection if it’s unmasked. \n \n mask (1 位)：指示该连接是否被遮罩。正其所表示的意义，每一条从客户端发往服务器的信息都必须被遮罩，然后如果信息未遮罩，根据规范会中断该连接。 \n \n \n \n payload_len  ( 7 bits ): the length of the payload. WebSocket frames come in the following length brackets:\n0–125 indicates the length of the payload. 126 means that the following two bytes indicate the length, 127 means the next 8 bytes indicate the length. So the length of the payload comes in ~7bit, 16bit, and 64bit brackets. \n \n payload_len (7 位)：有效载荷的长度。WebSocket 帧有以下长度分类： \n 0-125 表示有效载荷的长度。126 意味着接下来两个字节表示有效载荷长度，127 意味着接下来的 8 个字节表示有效载荷长度。所以有效载荷的长度大概有 7 位，16 位和 64 位这三个等级。 \n \n \n \n masking-key  ( 32 bits ): all frames sent from the client to the server are masked by a 32-bit value that is contained within the frame. \n \n masking-key  (32 位)：所有从客户端发往服务器的帧都由帧内的一个 32 位值所遮罩。 \n \n \n \n payload : the actual data which most likely is masked. Its length is the length of the  payload_len . \n \n payload ：一般情况下被遮罩的实际数据。其长度取决于  payload_len  的长度。 \n \n \n \n Why are WebSockets frame-based and not stream-based? I don’t know and just like you, I’d love to learn more, so if you have an idea, feel free to add comments and resources in the responses below. Also, a good  discussion on the topic is available on HackerNews . \n \n 为什么 WebSocket 是基于帧而不是基于流的呢？我和你一样不明白，我也想多学点，如果你有任何想法，欢迎在下面的评论区添加评论和资源。另外， HackerNews  上面有关于这方面的讨论。 \n Data on the frames \n \n 帧数据 \n \n As mentioned above, the data can be fragmented into multiple frames. The first frame that transmits the data has an opcode on it that indicates what sort of data is being transmitted. This is necessary because JavaScript has pretty much nonexistent support for binary data at the time the specification was started.  0x01  indicates utf-8 encoded text data,  0x02  is binary data. Most people will transmit JSON in which case you’d probably want to choose the text opcode. When you emit binary data it will be represented in a browser specific  Blob . \n \n 正如之前提到的，数据可以被拆分为多个帧。第一帧所传输的数据里面含有一个操作码表示传输的数据类型。这是必须的，因为当规范起草的时候，JavaScript 并不能很好地支持二进制数据。 0x01  表示 utf-8 编码的文本数据， 0x02  表示二进制数据。大多数人在传输 JSON 数据的时候都会选择文本操作码。当你传输二进制数据的时候，它会以浏览器指定的  Blob  来表示。 \n \n The API for sending data through a WebSocket is very simple: \n \n 通过 WebSocket 来传输数据的 API 是非常简单的： \n \n var  socket  =   new   WebSocket ( 'ws://websocket.example.com' ) ; \nsocket . onopen   =   function ( event )   { \n  socket . send ( 'Some message' ) ;   // Sends data to server. \n } ; \n \n 1 2 3 4 When the WebSocket is receiving data (on the client side), a  message  event is fired. This event includes a property called  data  that can be used to access the contents of the message. \n \n 当 WebSocket 正在接收数据的时候（客户端），会触发  message  事件。该事件会带有一个  data  属性，里面包含了消息的内容。 \n \n // Handle messages sent by the server. \nsocket . onmessage   =   function ( event )   { \n   var  message  =  event . data ; \n  console . log ( message ) ; \n } ; \n \n 1 2 3 4 5 You can easily explore the data in each of the frames in your WebSocket connection using the Network Tab inside Chrome DevTools: \n \n 你可以很容易地利用 Chrome 开发者工具的网络选项卡来检查 WebSocket 连接中的每一帧的数据。 \n Fragmentation \n \n 数据分片 \n \n Payload data can be split up into multiple individual frames. The receiving end is supposed to buffer them up until the  fin  bit is set. So you can transmit the string “Hello World” in 11 packages of 6 (header length) + 1 byte each. Fragmentation is not allowed for control packages. However, the specification wants you to be able to handle  interleaved  control frames. That’s in case TCP packages arrive in arbitrary order. \n \n 有效载荷数据可以被分成多个独立的帧。接收端会缓冲这些帧直到  fin  位有值。所以你可以把字符串『Hello World』拆分为 11 个包，每个包由 6(头长度) + 1 字节组成。数据分片不能用来控制包。然而，规范想要你有能力去处理 交错 控制帧。这是为了预防 TCP 包无序到达客户端。 \n \n The logic for joining frames is roughly the following: \n \n receive the first frame \n remember opcode \n concatenate frame payload together until the  fin  bit is set \n assert that the opcode for each package is zero \n \n \n 连接帧的大概逻辑如下： \n \n 接收第一帧 \n 记住操作码 \n 连接帧有效载荷直到  fin  位有值 \n 断言每个包的操作码都为 0 \n \n \n The primary purpose of fragmentation is to allow sending a message that is of unknown size when the message is started. With fragmentation, a server may choose a reasonable size buffer and, when the buffer is full, write a fragment to the network. A secondary use case for fragmentation is for multiplexing, where it is not desirable for a large message on one logical channel to take over the whole output channel, so the multiplexing needs to be free to split the message into smaller fragments to better share the output channel. \n \n 数据分片的主要目的在于允许开始时传输不明大小的信息。通过数据分片，服务器可能需要设置一个合理的缓冲区大小，然后当缓冲区满，通过网络发送一个数据分片。数据分片的第二个用途即多路复用，逻辑通道上的大量数据占据整个输出通道是不合理的，所以利用多路复用技术把信息拆分成更小的数据分片以更好地共享输出通道。 \n What is Hearbeating? \n \n 心跳包 \n \n At any point after the handshake, either the client or the server can choose to send a ping to the other party. When the ping is received, the recipient must send back a pong as soon as possible. That’s a heartbeat. You can use it to make sure that the client is still connected. \n \n 握手之后的任意时刻，客户端和服务器可以随意地 ping 对方。当接收到 ping 的时候，接收方必须尽快回复一个 pong。此即心跳包。你可以用它来确保客户端是否仍然保持连接。 \n \n A ping or pong is just a regular frame, but it’s a  control frame . Pings have an opcode of  0x9 , and pongs have an opcode of  0xA . When you get a ping, send back a pong with the exact same Payload Data as the ping (for pings and pongs, the max payload length is  125 ). You might also get a pong without ever sending a ping. Ignore it if it happens. \n \n ping 或者 pong 虽然只是一个普通帧，但却是一个控制帧。Ping 包含  0x9  操作码，而 Pong 包含  0xA  操作码。当你接收到 ping 的时候，返回一个和 ping 携带同样有效载荷数据的 pong(ping 和 pong 最大有效载荷长度都为 125)。你可能接收到一个 pong 而未曾发送一个 ping。如果有发生这样的情况请忽略它。 \n \n Heartbeating can be very useful. There are services (like load balancers) that will terminate idle connections. Plus, it’s not possible for the receiving side to see if the remote side has terminated. Only at the next send would you realize that something went wrong. \n \n 心跳包非常有用。利用服务（比如负载均衡器）来中断空闲的连接。另外，接收端不可能知道服务端是否已经中断连接。只有在发送下一帧的时候，你才会意识到发生了错误。 \n Handling Errors \n \n 处理错误 \n \n You can handle any errors that occur by listening out for the  error  event. \n \n 你可以通过监听  error  事件来处理错误。 \n \n It looks like this: \n \n 像这样： \n \n var  socket  =   new   WebSocket ( 'ws://websocket.example.com' ) ; \n\n // Handle any error that occurs. \nsocket . onerror   =   function ( error )   { \n  console . log ( 'WebSocket Error: '   +  error ) ; \n } ; \n \n 1 2 3 4 5 6 #  Closing the Connection \n \n 关闭连接 \n \n To close a connection either the client or server should send a control frame with data containing an opcode of  0x8 . Upon receiving such a frame, the other peer sends a Close frame in response. The first peer then closes the connection. Any further data received after closing the connection is then discarded. \n \n 客户端或服务器可以发送一个包含  0x8  操作码的数据控制帧来关闭连接。当接收到控制帧的时候，另一个节点会返回一个关闭帧。之后第一个节点会关闭连接。关闭连接之后，之后接收的任何数据都会被遗弃。 \n \n This is how you initiate the closing of a WebSocket connection from the client: \n \n 这是初始化关闭客户端的 WebSocket 连接的代码： \n \n // Close if the connection is open. \n if   ( socket . readyState  ===  WebSocket . OPEN )   { \n    socket . close ( ) ; \n } \n \n 1 2 3 4 Also, in order to perform any clean up after the closing has completed, you can attach an event listener to the  close  event: \n \n 同样地，为了关闭连接后运行任意清理工作，你可以为  close  事件添加事件监听函数： \n \n // Do necessary clean up. \nsocket . onclose   =   function ( event )   { \n  console . log ( 'Disconnected from WebSocket.' ) ; \n } ; \n \n 1 2 3 4 The server has to listen on the  close  event in order to process it if needed: \n \n 服务器不得不监听  close  事件以便在需要的时候处理： \n \n connection . on ( 'close' ,   function ( reasonCode ,  description )   { \n     // The connection is getting closed. \n } ) ; \n \n 1 2 3 #  How do WebSockets and HTTP/2 compare? \n \n WebSockets 和 HTTP/2 对比 \n \n While HTTP/2 has a lot to offer, it doesn’t completely replace the need for existing push/streaming technologies. \n \n 虽然 HTTP/2 提供了很多的功能，但是它并不能完全取代当前的 push/streaming 技术。 \n \n The first important thing to notice about HTTP/2 is that it’s not a replacement for all of HTTP. The verbs, status codes and most of the headers will remain the same as today. HTTP/2 is about improving the efficiency of the way data is transferred on the wire. \n \n 关于 HTTP/2 需要注意的最重要的事即它并不能完全取代 HTTP。动词，状态码以及大部分的头部信息都会保持和现在一样。HTTP/2 只是提升了线路上的数据传输效率。 \n \n Now, if we compare HTTP/2 to WebSocket, we can see a lot of similarities: \n \n 现在，如果我们对比 WebSocket 和 HTTP/2，将会发现很多类似的地方： \n \n \n \n \n \n HTTP/2 \n WebSocket \n \n \n \n \n Headers \n Compressed(HPACK) \n None \n \n \n Binary \n Yes \n Binary or Textual \n \n \n Multiplexing \n Yes \n Yes \n \n \n Prioritization \n Yes \n No \n \n \n Compression \n Yes \n Yes \n \n \n Direction \n Client/Server + Server Push \n Bidirectional \n \n \n Full-duplex \n Yes \n Yes \n \n \n \n As we have seen above, HTTP/2 introduces  Server Push  which enables the server to proactively send resources to the client cache. It does not, however, allow for pushing data down to the client application itself. Server pushes are only processed by the browser and do not pop up in the application code, meaning there is no API for the application to get notifications for those events. \n \n 正如以上所显示的那样，HTTP/2 引进了  Server Push  技术用来让服务器主动向客户端缓存发送数据。然而，它并不允许直接向客户端程序本身发送数据。服务端推送只能由浏览器处理而不能够在程序代码中进行处理，意即程序代码没有 API 可以用来获取这些事件的通知。 \n \n This is where Server-Sent Events (SSE) become very useful. SSE is a mechanism that allows the server to asynchronously push the data to the client once the client-server connection is established. The server can then decide to send data whenever a new “chunk” of data is available. It can be considered as a one-way  publish-subscribe  model. It also offers a standard JavaScript client API named EventSource implemented in most modern browsers as part of the HTML5 standard by  W3C . Note that browsers that do not support  EventSource API  can be easily polyfilled. \n \n 这时候服务端推送事件（SSE）就派上用场了。SSE 的机制是这样的：一旦客户端－服务器连接建立，它允许服务器异步推送数据给客户端。之后，每当服务器产生新数据分片的时候，就推送数据给客户端。这可以看成是单向的发布－订阅模型。它也提供了一个被称为 EventSource 的 标准 JavaScript 客户端 API，该 API 作为  W3C  组织发布的 HTML5 标准的一部分已经在大多数的现代浏览器中实现。注意不支持原生  EventSource API  的浏览器可以通过兼容插件实现。 \n \n Since SSE is based on HTTP, it has a natural fit with HTTP/2 and can be combined to get the best of both: HTTP/2 handling an efficient transport layer based on multiplexed streams and SSE providing the API up to the applications to enable push. \n \n 由于 SSE 是基于 HTTP 的，所以它天然兼容于 HTTP/2 并且可以组合使用以利用各自的优势： HTTP/2 处理一个基于多路复用流的高效传输层而 SSE 为程序提供了 API 用来支持服务端推送。 \n \n To fully understand what Streams and Multiplexing are all about, let’s first have a look at the IETF definition:  a “stream” is an independent, bidirectional sequence of frames exchanged between the client and server within an HTTP/2 connection. One of its main characteristics is that a single HTTP/2 connection can contain multiple concurrently open streams, with either endpoint interleaving frames from multiple streams. \n \n 为了完全理解流和多路复用技术，先让我们来了解一下 IETF 的定义：『流』即是在一个 HTTP/2 连接中，在客户端和服务端间进行交换传输的一个独立的双向帧序列。它的主要特点之一即单个的  HTTP/2  连接可以包含多个并发打开的流，在每一终端交错传输来自多个流的帧。 \n \n \n We have to remember that SSE is HTTP-based. It means that with HTTP/2, not only can several SSE streams be interleaved onto a single TCP connection, but the same can also be done with a combination of several SSE streams (server to client push) and several client requests (client to server). Thanks to HTTP/2 and SSE, now we have a pure HTTP bidirectional connection with a simple API to let application code register to server pushes. Lack of bidirectional capabilities has often been perceived as a major drawback when comparing SSE to WebSocket. Thanks to HTTP/2 this is no longer the case. This opens up the opportunity to skip WebSockets and stick to an HTTP-based signaling instead. \n \n 必须记住的是 SSE 是基于 HTTP 的。这意味着，通过使用 HTTP/2，不仅仅可以把多个 SSE 流交叉合并成单一的 TCP 连接，还可以把多个 SSE 流（服务端向客户端推送）和多个客户端请求（客户端到服务端）合并成单一的 TCP 连接。多亏了 HTTP/2 和 SSE，现在我们有了一个纯粹的 HTTP 双向连接，该连接带有一个简单的 API 允许程序代码注册监听服务端的数据推送。缺乏双向通信能力一直被认为是 SSE 对比 WebSocket 的主要缺点。多亏了 HTTP/2，这不再是缺点。这就让你有机会坚持使用基于 HTTP 的通信系统而非 WebSockets。 \n How to choose between WebSocket and HTTP/2? \n \n WebScoket 和 HTTP/2 的使用场景 \n \n WebSockets will certainly survive the domination of HTTP/2 + SSE, mainly because it’s a technology already well adopted and, in very specific use cases, it has an advantage over HTTP/2 as it has been built for bidirectional capabilities with less overhead (e.g. headers). \n \n WebSockets 依然可以在 HTTP/2 + SSE 的统治下存在，主要是由于它曾经是被广泛使用的技术，在特殊情况下，和 HTTP/2 比较它有一个优点即它天生拥有更少的开销（比如，头部信息）的双向通信能力。 \n \n Say you want to build a Massive Multiplayer Online Game that needs a huge amount of messages from both ends of the connection. In such a case, WebSockets will perform much, much better. \n \n 假设你想要构建一个大型的多人在线游戏，在各个连接终端会产生大量的信息。在这样的情况下，WebSockets 会表现得更加完美。 \n \n In general, use WebSockets whenever you need a truly  low-latency , near realtime connection between the client and the server. Keep in mind that this might require rethinking how you build your server-side applications, as well as shifting the focus on technologies like event queues. \n \n 总之，当你需要在客户端和服务端建立一个真正的低延迟的，接近实时连接的时候使用 WebSockets。记住这可能要求你重新考虑如何构建服务器端程序，同时也需要你关注诸如事件队列的技术。 \n \n If your use case requires displaying real-time market news, market data, chat applications, etc., relying on HTTP/2 + SSE will provide you with an efficient bidirectional communication channel while reaping the benefits from staying in the HTTP world: \n \n 如果你的使用场景要求显示实时市场新闻，市场数据，聊天程序等等，HTTP/2 + SSE 将会为你提供一个高效的双向通信通道的同时可以得到 HTTP 的所有益处： \n \n \n \n WebSockets can often be a source of pain when considering compatibility with existing web infrastructure as it upgrades an HTTP connection to a completely different protocol that has nothing to do with HTTP. \n \n 当考虑现有架构的兼容性的时候，WebSockets 经常会是一个痛点，因为升级 HTTP 连接到一个完全和 HTTP 不相关的协议。 \n \n \n \n Scale and security: Web components (Firewalls, Intrusion Detection, Load Balancers) are built, maintained and configured with HTTP in mind, an environment that large/critical applications will prefer in terms of resiliency, security, and scalability. \n \n 可扩展性和安全：网络组件（防火墙，入侵检测，负载均衡器）的建立，维护和配置都是为 HTTP 而设计的，大型／重要的程序会更喜欢具有弹性，安全和可伸缩性的环境。 \n \n \n \n Also, you have to take into consideration browser support. Have a look at the WebSocket: \n \n 同样地，你不得不考虑浏览器兼容性。查看下 WebSocket 兼容情况： \n \n \n It’s quite good actually, isn’t it? \n \n 兼容性还不错。 \n \n The situation with HTTP/2, however, is not the same. \n \n 然而，HTTP/2的情况就不太秒了。 \n \n \n PS：非原文：当时作者在写这篇文章时是2017年，兼容性确实不太好（83.74%）；但目前来看，HTTP/2的兼容性也还不错。 \n \n \n 值得注意的是： \n \n TLS-only (which is not so bad) \n Partial support in IE 11 but only on Windows 10 \n Only supported on OSX 10.11+ in Safari \n Only supports HTTP/2 if you can negotiate it via ALPN (which is something your server needs to support explicitly) \n \n \n \n 仅支持 TLS（还不算坏） \n 仅限于 Windows 10 的 IE 11 部分支持 \n 仅支持 OSX 10.11+ Safari 浏览器（Version: 9-10.1） \n 仅当你能够通过 ALPN 使用 HTTP/2 （服务器需要明确支持的东西）才会支持 HTTP/2 \n \n \n The SSE support is better though: \n \n SSE支持情况： \n \n \n Only IE/Edge don’t provide support. (Well, Opera Mini supports neither SSE nor WebSockets so we can take it out of the equation altogether). There are some decent polyfills out there for SSE support in IE/Edge. \n \n 仅 IE/Edge 不支持。（好吧，Opera Mini 即不支持 SSE 也不支持 WebSockets，因此我们把它完全排队在外）。有一些还不错的垫片来让 IE/Edge 支持 SSE。 \n How we make the decision at SessionStack \n \n SessionStack 是如何选择的 \n \n We at  SessionStack  use both WebSockets and HTTP, depending on the case. Once you integrate SessionStack into your web app, it starts recording all DOM changes, user interactions, JavaScript exceptions, stack traces, failed network requests, and debug messages, allowing you to replay issues in your web apps as videos and see everything that happened to your users. It’s all taking place  real-time  and needs to happen with no performance impact for your web app. \n \n SessionStack   同时使用 WebSockets 和 HTTP，这取决于使用场景。一旦整合 SessionStack 进网页程序，它会开始记录 DOM 变化，用户交互，JavaScript 异常，堆栈追踪，失败的网络请求以及调试信息，允许你用视频回放网页程序中的问题及发生在用户身上的一切事情。全部都是实时发生的并且要求对网页程序不会产生任何的性能影响。 \n \n This means that you can join a user session  live,  while the user is still in the browser. In this scenario, we have chosen to leverage HTTP, since there is no bidirectional communication (the server just “streams” the data to the browser). A WebSocket, in this case, will be an overkill really, harder to maintain and scale. \n \n 这意味着你可以实时加入到用户会话，而用户仍然在浏览器中。这样的情况下，我们会选择使用 HTTP，因为这并不需要双向通信（服务端把数据传输到浏览器端）。当前情况下，使用 WebSocket 就是过度使用，难以维护和扩展。 \n \n The SessionStack library that gets integrated into your web app, however, uses a WebSocket (if possible, otherwise falls back to HTTP). It’s batching and sending the data to our servers which is also a one-way communication. We chose WebSocket in this case because some of the product features that are on the roadmap would require a bidirectional communication. \n \n 然而，整合进网页程序的 SessionStack 库应用了 WebSocket（优先使用，否则回滚到 HTTP）。它会分批处理并且向我们的服务器发送数据，这是单向通信。在这种情况下，之所以选择 WebSocket 是因为计划中的某些产品功能可能需要进行双向通信。 \n \n ",summary:"Javascript 工作原理 - 深入理解WebSockets和带有SSE机制的Http/2以及正确的使用姿势\n\nThis is post # 5 of the series dedicated to exploring JavaScript。\n\n> 这是 Javascript 工作原理系列的第五章。\n\nThis time we’ll dive into the world of communication protocols, mapping and discussing their attributes and building parts on the way. We’ll offer ...",id:"post",pid:"post",readingTime:{text:"21 min read",minutes:20.6,time:1236e3,words:4120}},{title:"转载-节选-科技爱好者周刊节选（172期）",frontmatter:{title:"转载-节选-科技爱好者周刊节选（172期）",description:"转载-节选-科技爱好者周刊节选（172期）",date:"2021-08-20",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210820154332.jpeg",tags:["趣谈","转载"],meta:[{name:"title",content:"转载-节选-科技爱好者周刊节选（172期）"},{name:"description",content:"转载-节选-科技爱好者周刊节选（172期）"},{name:"keywords",content:"科技爱好者周刊节选"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2021-08-20-sci-note5.html",relativePath:"_posts/2021-08-20-sci-note5.md",key:"v-11d8c7be",path:"/2021/08/20/sci-note5/",headers:[{level:2,title:"前言",slug:"前言"},{level:2,title:"正文",slug:"正文"},{level:2,title:"最后",slug:"最后"}],lastUpdated:"8/20/2021, 9:24:10 AM",content:" 科技爱好者周刊（第 172 期）：我们会死于气候灾难吗？ \n 前言 \n 本文节选自阮一峰老师的《科技爱好者周刊》第172期。 \n 《周刊》链接： 科技爱好者周刊172期 \n 正文 \n 科技动态  部分： \n \n 音乐消费量下降 \n \n \n 一项研究发现，自从新冠疫情爆发以后，音乐流媒体的消费量大约下降了10%，使得全球最大音乐网站之一的 Spotify 收入减少。 \n 这很奇怪，人们在隔离期间无事可做，反而减少了听音乐。 \n 原因可能是，音乐并不是独立的娱乐活动，而往往是对其他活动（比如上下班期间）的补充。一旦人们减少了其它活动，音乐消费也随之减少。 \n \n 酒驾监控系统 \n \n 最近，美国国会通过一项法律，规定2027年后生产的所有汽车都必须配备酒驾监控系统，防止驾驶员酒后驾车。美国每年因为酒后驾车，有超过10000人丧生。 \n \n 但是，麻烦的是目前还没有任何技术，能够主动发现酒后驾车。美国政府正在研究两种有希望的方案。一种是检测车内空气，找出空气里面的酒精成分，这种方法的问题是，无法区分酒精来自驾驶员的呼吸，还是来自乘客的呼吸。 \n 另一种方案是在引擎按钮上，装备一个红外线触摸传感器，通过皮肤检测血液中的酒精含量。 \n \n 文章  部分： \n \n MDN 如何实现自动补全搜索？ （英文） \n \n \n 本文介绍 Mozilla 的文档网站如何实现搜索框的自动补全功能。 \n \n 里面用到了flexSearch第三方库，这个库在我的博客有用到，但是这个库有一个问题就是不能检索中文。如果有哪位大佬知道比较好用的中英文检索工具可以评论区赐教，小弟先行谢过~~ \n \n \n 总得来说，这篇文章是值得一读的。 \n \n \n Git 的两个新命令 （英文） \n \n \n 新版本的 Git 加了两个命令：git switch 和 git restore，本文介绍它们的用法。 \n git switch 用来切换分支，git restore 用来恢复原样，可以取代 git checkout。 \n \n 工具  部分 \n \n static.wiki \n \n \n 维基百科的静态化工具，将维基百科变成一个只读的离线静态网站。 \n 它将所有条目导入一个 SQLite 数据库，然后实现一个前端的查询展示页面。注意，它的查询是 SQLite 的静态化查询，不需要有后端服务。 \n \n 有趣有趣 \n \n \n 资源  部分： \n \n 自己动手写编译器 \n \n 一本中文电子书，介绍一个非常简单的编译器的实现，通过实例，描述基本的编译原理及过程。 \n \n 图片  部分： \n \n 阿富汗地形图 \n \n 下面是阿富汗的地形图。 \n \n 可以看到，这个国家全境都是高山，只有西南方向有一点点平原。而且，它东部连接帕米尔高原，海拔非常高，最高峰将近7500米，到处是高耸的雪山、深邃的山谷和无人的高原荒漠。 \n 这种地形，再加上没有高等级道路，特别适合游击队出没，不适合正规军作战，大型武器无法发挥威力。这就是前苏联和美国都无法在阿富汗获胜，最终只能铩羽而归的主要外部原因。 \n \n 言论  部分： \n \n Windows 的游戏优势有多大？根据 Steam 游戏平台 2021 年 6 月的数据，Linux 上玩家比例是 0.89%，macOS 是 2.54%，Windows 是 96.57%。\t\t--  phoronix.com \n 最后 \n 感谢阮一峰老师的《周刊》 \n love & peace 😘 \n ",summary:"\n前言\n\n本文节选自阮一峰老师的《科技爱好者周刊》第172期。\n\n《周刊》链接：科技爱好者周刊172期\n\n正文\n\n科技动态 部分：\n\n音乐消费量下降\n\n一项研究发现，自从新冠疫情爆发以后，音乐流媒体的消费量大约下降了10%，使得全球最大音乐网站之一的 Spotify 收入减少。\n\n这很奇怪，人们在隔离期间无事可做，反而减少了听音乐。\n\n原因可能是，音乐并不是独立的娱乐活动，而往往是对其他活动（比如上下班期间）的补充。一旦人们减少了其它活动，音乐消费也随之减少。\n\n酒驾监控系统\n\n最近，美国国会通过一项法律，规定2027年后生产的所有汽车都必须配备酒驾监控系统，防止驾驶员酒后驾车。美国每年因为酒 ...",id:"post",pid:"post",readingTime:{text:"1 min read",minutes:.58,time:34800,words:116}},{title:"转载-节选-科技爱好者周刊节选（173期）",frontmatter:{title:"转载-节选-科技爱好者周刊节选（173期）",description:"转载-节选-科技爱好者周刊节选（173期）",date:"2021-08-28",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210828145215.jpeg",tags:["趣谈","转载"],meta:[{name:"title",content:"转载-节选-科技爱好者周刊节选（173期）"},{name:"description",content:"转载-节选-科技爱好者周刊节选（173期）"},{name:"keywords",content:"科技爱好者周刊节选"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2021-08-28-sci-note6.html",relativePath:"_posts/2021-08-28-sci-note6.md",key:"v-40d4d644",path:"/2021/08/28/sci-note6/",headers:[{level:2,title:"前言",slug:"前言"},{level:2,title:"正文",slug:"正文"},{level:2,title:"最后",slug:"最后"}],lastUpdated:"8/29/2021, 10:13:23 AM",content:' 科技爱好者周刊（第 173 期）：网络收音机的设计 \n 前言 \n 本文节选自阮一峰老师的《科技爱好者周刊》第173期。 \n 《周刊》链接： 科技爱好者周刊173期 \n 正文 \n 科技动态  部分 \n \n Facebook 虚拟会议软件 \n \n Facebook 公司推出虚拟会议软件 Horizon Workrooms，将虚拟会议提升到一个新的境界。 \n \n 只要用户戴上 VR 头盔，打开软件，就会进入一间虚拟会议室。软件会自动为你的分身配上脸部动作和表情，同时使用 VR 头盔的摄像头，捕捉你双手的动作，让软件里面的分身也做出同样的动作。 \n 比如，如果你在打字，虚拟空间里面也会显示你的分身在打字。 \n 与会者可以在虚拟白板上进行协作，也可以共享照片、文档和电脑屏幕。Facebook 放出了马克·扎克伯格虚拟会议的 演示视频 ，他的表情和双手的动作，以及背后白板上的板书，令人印象深刻。 \n \n \n 电子驾照 \n \n 今年9月1日开始，公安部在全国28个城市，全面推行电子驾照，效力与纸质驾照完全相同。电子驾照通过"交管12123"APP发放，领取后只要携带手机，就不需要携带纸质驾照了。 \n 电子驾照下方还有实时生成的二维码和条形码信息，交警通过扫描二维码，能够快速获取车主的身份证信息和车辆登记信息。 \n \n VR 透视头盔 \n \n 随着头戴显示装置越来越普及，逐渐浮现出一个问题。戴头盔的人可以看到外部，但是外部的人无法看到戴头盔者的脸，双方无法进行面对面的交流。 \n Facebook 的研究人员想出了一个解决方法，就是在头盔外部的眼睛位置，放置显示屏，实时展示戴头盔者的眼部表情和动作。未来，人们有可能彼此戴着头盔，当面交流。 \n \n \n 确定这样面对面交流 晚上不害怕吗 🐶 \n \n \n 文章  部分: \n \n man 命令的奇怪输出 （英文） \n \n \n 有人发现，如果在半夜 00:30 分执行 man 命令，会得到一条奇怪的报错信息"gimme gimme gimme"。 \n 他在网上提问：有人知道这是怎么回事吗？ \n 被采纳的答案指出是 man 命令的彩蛋。 \n \n \n CSS 检测支持悬停的设备 （英文） \n \n \n 鼠标有悬停（hover）事件，移动设备由于不使用鼠标，自然就没有这个动作。因此就可以通过它判断，用户是否正在使用移动设备。 \n 本文介绍如何使用 CSS 来侦测支持悬停事件的设备，并可以设置特殊的样式。 \n \n CSS transform 属性详解 （英文） \n \n \n 一篇写得很好的 CSS 入门教程，介绍如何使用 transform 属性，实现网页元素的变形。文中有大量互动式示例。 \n \n 工具  部分 \n \n Web Captioner \n \n \n 一个网页的语音转文字工具，使用 Chrome 浏览器的 Web Speech API，支持中文， 代码 开源，这里还有一篇 介绍文章 。 \n \n 好玩~~，开启了新世界的大门 \n \n \n 资源  部分 \n \n 物联网 IoT 初学者教程 \n \n \n 微软发布的英文教程，详细介绍什么是物联网，以及物联网的应用。 \n \n 图片  部分 \n \n 人工智能图像 \n \n 人工智能公司 OpenAI 最近推出了 CLIP 模型，经过训练以后，可以根据用户提供的文字描述，自动生成图像。 \n 研究人员已经用它生成了许多非常酷的图像，有些堪称是艺术杰作。如果不说明，你根本想象不到这是软件生成的。 \n 下面就是其中一些作品，标题就是给出的文字描述，图像是软件返回的结果。 \n 《城市的夜》 \n \n 《起风了》 \n \n 《山顶的暴风雪中有一个小木屋，黄昏时亮着一盏灯》 \n \n 《午夜，山中的房子，飞舞的萤火虫（使用吉卜力工作室的风格）》 \n \n \n 文摘  部分 \n \n 门把手的设计 \n \n 一扇门既可以向外拉，也可以向里推，人们经常搞错。应该怎么设计门把手，才能使大家一眼就看出来，到底应该推还是拉，而不会搞错？ \n 一个最简单的方法，就是在门上贴文字说明，写明应该"拉"或"推"。 \n 但是，这种方法需要用户先看到文字标签，而且对于外国用户，或者不能理解说明的人就没有用。那么能不能不使用文字说明，只凭人类直觉来区分"推"和"拉"呢？ \n 《设计心理学》的作者建议，为了解决这个问题，可以约定，竖的门把手表示拉，横的门把手表示推。 \n \n 或者，对于需要推的门，索性取消门把手，表示这个门只能推。 \n \n 但是，作者也认为，这些设计都不是特别理想。门把手的推拉设计，是一个很难的问题，目前还没有完美的解决方案。 \n 他开玩笑说，有一回他用绳子当作家里的门把手，表示这扇门只能拉，这个设计可能是最好的设计。 \n \n \n 讲真的，最后一个设计真的让我明白了一个道理：less is more。这个设计确实绝了。佩服 \n \n \n 言论  部分 \n \n 你的代码应该是写给下一个开发者的情书。\t\t--  AgriWebb \n 最后 \n 感谢阮一峰老师的《周刊》 \n love & peace 😘 \n 最喜欢言论：你的代码应该是写给下一个开发者的情书。 \n ',summary:"\n前言\n\n本文节选自阮一峰老师的《科技爱好者周刊》第173期。\n\n《周刊》链接：科技爱好者周刊173期\n\n正文\n\n科技动态 部分\n\nFacebook 虚拟会议软件\n\nFacebook 公司推出虚拟会议软件 Horizon Workrooms，将虚拟会议提升到一个新的境界。\n\n只要用户戴上 VR 头盔，打开软件，就会进入一间虚拟会议室。软件会自动为你的分身配上脸部动作和表情，同时使用 VR 头盔的摄像头，捕捉你双手的动作，让软件里面的分身也做出同样的动作。\n\n比如，如果你在打字，虚拟空间里面也会显示你的分身在打字。\n\n与会者可以在虚拟白板上进行协作，也可以共享照片、文档和电脑屏幕。Faceboo ...",id:"post",pid:"post",readingTime:{text:"1 min read",minutes:.81,time:48600,words:162}},{title:"深入解析 EventLoop 和浏览器渲染、帧动画、空闲回调的关系",frontmatter:{title:"深入解析 EventLoop 和浏览器渲染、帧动画、空闲回调的关系",description:"深入解析 EventLoop 和浏览器渲染、帧动画、空闲回调的关系",date:"2021-09-02",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210901153710.png",tags:["JavaScript","转载"],meta:[{name:"title",content:"深入解析 EventLoop 和浏览器渲染、帧动画、空闲回调的关系"},{name:"description",content:"深入解析 EventLoop 和浏览器渲染、帧动画、空闲回调的关系"},{name:"keywords",content:"EventLoop, 浏览器渲染, 帧动画, 空闲回调"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2021-09-02-eventloop-rAF-rID.html",relativePath:"_posts/2021-09-02-eventloop-rAF-rID.md",key:"v-1571973e",path:"/2021/09/02/eventloop-raf-rid/",headers:[{level:2,title:"前言",slug:"前言"},{level:2,title:"事件循环",slug:"事件循环"},{level:3,title:"定义",slug:"定义"},{level:3,title:"流程",slug:"流程"},{level:2,title:"多任务队列",slug:"多任务队列"},{level:2,title:"requestAnimationFrame",slug:"requestanimationframe"},{level:3,title:"闪烁动画",slug:"闪烁动画"},{level:3,title:"定时器合并",slug:"定时器合并"},{level:2,title:"requestIdleCallback",slug:"requestidlecallback"},{level:3,title:"草案解读",slug:"草案解读"},{level:3,title:"渲染有序进行",slug:"渲染有序进行"},{level:3,title:"渲染长期空闲",slug:"渲染长期空闲"},{level:3,title:"动画例子",slug:"动画例子"},{level:2,title:"总结",slug:"总结"},{level:2,title:"参考文章",slug:"参考文章"}],lastUpdated:"9/1/2021, 1:54:34 PM",content:' 深入解析 EventLoop 和浏览器渲染、帧动画、空闲回调的关系 \n 前言 \n 关于 Event Loop 的文章很多，但是有很多只是在讲「宏任务」、「微任务」，我先提出几个问题： \n \n 每一轮 Event Loop 都会伴随着渲染吗？ \n requestAnimationFrame  在哪个阶段执行，在渲染前还是后？在  microTask  的前还是后？ \n requestIdleCallback  在哪个阶段执行？如何去执行？在渲染前还是后？在  microTask  的前还是后？ \n resize 、 scroll  这些事件是何时去派发的。 \n \n 这些问题并不是刻意想刁难你，如果你不知道这些，那你可能并不能在遇到一个动画需求的时候合理的选择  requestAnimationFrame ，你可能在做一些需求的时候想到了  requestIdleCallback ，但是你不知道它运行的时机，只是胆战心惊的去用它，祈祷不要出线上 bug。 \n 这也是本文想要从规范解读入手，深挖底层的动机之一。本文会酌情从规范中排除掉一些比较晦涩难懂，或者和主流程不太相关的概念。更详细的版本也可以直接去读这个规范，不过比较费时费力。 \n \n 其实我看到这个地方的时候就知道这篇文章值得一读，因为它不是单纯讲进程、线程、JS事件循环（宏任务、微任务）的文章。前言中提到的问题确实不太熟悉，说不知道吧了解一点，说知道吧，也不能很明确的说出来。是时候梳理一波了。对文章作者 SSH ，公众号『 前端从进阶到入院』表示感谢~~ \n 事件循环 \n 我们先依据 HTML 官方规范 从浏览器的事件循环讲起，因为剩下的 API 都在这个循环中进行，它是浏览器调度任务的基础。 \n 定义 \n 为了协调时间，用户交互，脚本，渲染，网络任务等，浏览器必须使用本节描述的事件循环。 \n 流程 \n \n \n 从任务队列中取出一个 宏任务 并执行； \n \n \n 检查微任务队列，执行并清空 微任务 队列，如果在微任务的执行中又加入新的微任务，也会在这一步一起执行。 \n \n \n 进入更新渲染阶段，判断是否需要渲染，这里有一个 rendering opportunity 的概念，也就是说： 不一定每一轮event loop都会对应一次浏览器渲染 ，要根据其屏幕刷新率、页面性能、页面是否在后台运行来共同决定。通常来说，这个渲染间隔是固定的。（ 所以多个task很可能在一次渲染之间执行 ） \n \n 浏览器会尽可能的保持帧率稳定，例如页面性能无法维持60fps（每16.66ms渲染一次）的话，那么浏览器会选择30fps的更新速率，而不是偶尔丢帧。 \n 如果浏览器上下文不可见，那么页面帧率会降低到4fps左右甚至更低。 \n 如果满足以下条件，也会跳过渲染：\n \n 浏览器判断更新渲染不会带来视觉上的改变，且 \n map of animation frame callback 为空，也就是帧动画回调为空，可以通过 requestAnimationFrame 来请求帧动画。 \n \n \n \n \n \n 如果上述的判断决定本轮不需要渲染，那么下面的几步（5-9）也 不会 继续运行： \n \n This step enables the user agent to prevent the steps below from running for other reasons, for example, to ensure certain tasks are executed immediately after each other, with only microtask checkpoints interleaved (and without, e.g., animation frame callbacks interleaved). Concretely, a user agent might wish to coalesce timer callbacks together, with no intermediate rendering updates. 有时候浏览器希望两次「定时器任务」是合并的，他们之间只会穿插着  microTask 的执行，而不会穿插屏幕渲染相关的流程（比如 requestAnimationFrame ，下面会写一个例子）。 \n \n \n \n 对于需要渲染的文档，如果窗口大小发生了变化，执行监听的 resize 方法。 \n \n \n 对于需要渲染的文档，如果页面发生了滚动，执行 scroll 方法。 \n \n \n 对于需要渲染的文档，执行帧回调动画，也就是 requestAnimationFrame 的回调。 \n \n \n 对于需要渲染的文档，执行 IntersectionObserve 的回调。 \n \n \n 对于需要渲染的文档，***重新渲染***绘制用户界面。 \n \n \n 判断 task队列 和 microTask 队列是否都为空，如果是的话，则进行 Idle 空闲周期的算法，判断是否要执行 requestIdleCallback 的回调函数。 \n \n \n 对于 resize  和  scroll 来说，并不是到了这一步才去执行滚动和缩放，那岂不是要延迟很多？浏览器当然会立刻帮你滚动视图，根据 CSSOM 规范 所讲，浏览器会保存一个  pending scroll event targets ，等到事件循环中的  scroll 这一步，去派发一个事件到对应的目标上，驱动它去执行监听的回调函数而已。 resize 也是同理。 \n 可以在这个流程中仔细看一下「宏任务」、「微任务」、「渲染」之间的关系。 \n 多任务队列 \n task 队列并不是像我们想象的那样只有一个，根据规范里的描述： \n \n An event loop has one or more task queues. A task queue is a set of tasks. For example, a user agent could have one task queue for mouse and key events (to which the user interaction task source is associated), and another to which all other task sources are associated. Then, using the freedom granted in the initial step of the event loop processing model, it could give keyboard and mouse events preference over other tasks three-quarters of the time, keeping the interface responsive but not starving other task queues. Note that in this setup, the processing model still enforces that the user agent would never process events from any one task source out of order. \n \n 事件循环中可能会有一个或多个任务队列，这些队列分别为了处理： \n \n 鼠标和键盘事件 \n 其他一些Task \n \n 浏览器会在保持任务顺序的前提下，可能会分配四分之三的优先权给鼠标和键盘事件，保证用户的输入得到最高优先级的响应，而剩下的优先级交给其他 Task ，并且保证不会『饿死』它们。 \n 这个规范也导致 Vue 2.0.0-rc.7 这个版本  nextTick  采用了从微任务  MutationObserver  更换成宏任务  postMessage  而导致了一个  Issue 。 \n \n 非原文 \n 下面为具体回答： \n \n \n 目前由于一些“未知”的原因，jsfiddle 的案例打不开了。简单描述一下就是采用了  task  实现的  nextTick ，在用户持续滚动的情况下  nextTick  任务被延后了很久才去执行，导致动画跟不上滚动了。 \n 迫于无奈，尤大还是改回了  microTask  去实现  nextTick ，当然目前来说  promise.then  微任务已经比较稳定了，并且 Chrome 也已经实现了  queueMicroTask  这个官方 API。不久的未来，我们想要调用微任务队列的话，也可以节省掉实例化  Promise  的开销了。 \n 从这个 Issue 的例子中我们可以看出，稍微去深入了解一下规范还是比较有好处的，以免在遇到这种比较复杂的 Bug 的时候一脸懵逼。 \n 下面的章节中咱们来详细聊聊  requestIdleCallback  和  requestAnimationFrame 。 \n requestAnimationFrame \n \n 以下内容中 requestAnimationFrame  简称  rAF \n \n 在解读规范的过程中，我们发现 requestAnimationFrame 的回调有两个特征： \n \n 在重新渲染前调用 \n 很可能在宏任务之后不调用 \n \n \n 非原文：第二点主要是因为：不一定每一轮event loop都会对应一次浏览器渲染 \n \n 我们来分析一下，为什么要在重新渲染前调用？因为 rAF 是官方推荐来做一些流畅动画说应该使用的API，做动画不可避免的会去更改DOM，而如果在渲染之后再去更改DOM，那就只能在下一次渲染机会的时候才能去绘制出来，这显然是不合理的。 \n rAF 在浏览器决定渲染之前给你最后一个机会去改变DOM属性，然后很快在接下来的绘制中帮你呈现出来，所以这是做流畅动画的不二选择。下面我用一个 setTimeoue 的例子来对比。 \n 闪烁动画 \n 假设我们现在想要快速的让屏幕上闪烁  黄 、 蓝 两种颜色，保证用户可以观察到，如果我们用  setTimeout  来写，并且带着我们长期的 误解 「宏任务之间一定会伴随着浏览器绘制」，那么你会得到一个预料之外的结果。 \n setTimeout ( ( )   =>   { \n  document . body . style . background  =   "yellow" \n   setTimeout ( ( )   =>   { \n    document . body . style . background  =   "blue" \n   } ) \n } ) \n \n 1 2 3 4 5 6 \n \n PS: 在处理视频的时候可以很明确看到有一帧的背景是黄色，但在『435』次却不存在背景变黄的这一帧。 \n \n 通过上面的视频也可以看出来，这个结果是非常不可控的，如果这两个  Task  之间正好遇到了浏览器认定的渲染机会，那么它会重绘，否则就不会。 \n 接下来我们换成  rAF  试试？我们用一个递归函数来模拟 10 次颜色变化的动画。 \n let  i  =   10 \n let   req   =   ( )   =>   { \n  i -- \n   requestAnimationFrame ( ( )   =>   { \n    document . body . style . background  =   "yellow" \n     requestAnimationFrame ( ( )   =>   { \n      document . body . style . background  =   "blue" \n       if   ( i  >   0 )   { \n         req ( ) \n       } \n     } ) \n   } ) \n } \n\n req ( ) \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 \n 通过视频可以看出浏览器会非常规律的把这 10 组也就是 20 次颜色变化绘制出来。 \n 定时器合并 \n 在第一节解读规范的时候，第 4 点中提到了，定时器宏任务可能会直接跳过渲染。 \n 按照一些常规的理解来说，宏任务之间理应穿插渲染，而定时器任务就是一个典型的宏任务，看一下以下的代码： \n setTimeout ( ( )   =>   { \n  console . log ( "sto" ) \n   requestAnimationFrame ( ( )   =>  console . log ( "rAF" ) ) \n } ) \n setTimeout ( ( )   =>   { \n  console . log ( "sto" ) \n   requestAnimationFrame ( ( )   =>  console . log ( "rAF" ) ) \n } ) \n\n queueMicrotask ( ( )   =>  console . log ( "mic" ) ) \n queueMicrotask ( ( )   =>  console . log ( "mic" ) ) \n \n 1 2 3 4 5 6 7 8 9 10 11 从直觉上来看，顺序是不是应该是： \n mic\nmic\nsto\nrAF\nsto\nrAF\n \n 1 2 3 4 5 6 呢？也就是每一个宏任务之后都紧跟着一次渲染。 \n 实际上不会，浏览器会合并这两个定时器任务： \n mic\nmic\nsto\nsto\nrAF\nrAF\n \n 1 2 3 4 5 6 结论：并不是每一轮eventLoop都伴随着渲染，如果浏览器判断需要渲染的话， rAF 的回调调用是在微任务后，渲染前调用。 \n requestIdleCallback \n 草案解读 \n \n 以下内容中  requestIdleCallback 简称为 rIC 。 \n \n 我们都知道  requestIdleCallback  是浏览器提供给我们的空闲调度算法，关于它的简介可以看  MDN 文档 ，意图是让我们把一些计算量较大但是又没那么紧急的任务放到空闲时间去执行。不要去影响浏览器中优先级较高的任务，比如动画绘制、用户输入等等。 \n React 的时间分片渲染就想要用到这个 API，不过目前浏览器支持的不给力，他们是自己去用  postMessage  实现了一套。 \n \n 通过上图可看到，一帧内需要完成如下六个步骤的任务： \n \n 处理用户的交互 \n JS 解析执行 \n 帧开始。窗口尺寸变更，页面滚去等的处理 \n requestAnimationFrame(rAF) \n 布局 \n 绘制 \n \n 上面六个步骤完成后没超过 16 ms(60Hz刷新情况下)，说明时间有富余，此时就会执行  requestIdleCallback  里注册的任务。 \n 渲染有序进行 \n 首先看一张图，很精确的描述了这个 API 的意图： \n \n 当然，这种有序的  浏览器 -> 用户 -> 浏览器 -> 用户  的调度基于一个前提，就是我们要把任务切分成比较小的片，不能说浏览器把空闲时间让给你了，你去执行一个耗时  10s  的任务，那肯定也会把浏览器给阻塞住的。 这就要求我们去读取  rIC  提供给你的  deadline  里的时间，去动态的安排我们切分的小任务 。浏览器信任了你，你也不能辜负它呀。 \n 渲染长期空闲 \n \n 还有一种情况，也有可能在几帧的时间内浏览器都是空闲的，并没有发生任何影响视图的操作，它也就不需要去绘制页面：这种情况下为什么还是会有  50ms  的  deadline  呢？是因为浏览器为了提前应对一些可能会突发的用户交互操作，比如用户输入文字。如果给的时间太长了，你的任务把主线程卡住了，那么用户的交互就得不到回应了。50ms 可以确保用户在无感知的延迟下得到回应。 \n 草案中还提到： \n \n 当浏览器判断这个页面对用户不可见时，这个回调执行的频率可能被降低到 10 秒执行一次，甚至更低。这点在解读 EventLoop 中也有提及。 \n 如果浏览器的工作比较繁忙的时候，不能保证它会提供空闲时间去执行  rIC  的回调，而且可能会长期的推迟下去。所以如果你需要保证你的任务在一定时间内一定要执行掉，那么你可以给  rIC  传入第二个参数  timeout 。\n这会强制浏览器不管多忙，都在超过这个时间之后去执行  rIC  的回调函数。所以要谨慎使用，因为它会打断浏览器本身优先级更高的工作。 \n 最长期限为 50 毫秒，是根据研究得出的，研究表明，人们通常认为 100 毫秒内对用户输入的响应是瞬时的。将闲置截止期限设置为 50ms 意味着即使在闲置任务开始后立即发生用户输入，浏览器仍然可以在 50ms 后响应用户输入而不会产生用户可察觉的滞后。 \n 每次调用  timeRemaining()  函数判断是否有剩余时间的时候，如果浏览器判断此时有优先级更高的任务，那么会动态的把这个值设置为 0，否则就是用预先设置好的  deadline - now  去计算。 \n \n // ... \n timeRemaining :   function ( )   { \n   return  Math . max ( 0 ,   50.0   -   ( Date . now ( )   -  startTime ) ) ; \n } \n // ... \n \n 1 2 3 4 5 \n 这个  timeRemaining()  的计算非常动态，会根据很多因素去决定，所以不要指望这个时间是稳定的。 \n 动画例子 \n 滚动 \n 如果我鼠标不做任何动作和交互，直接在控制台通过  rIC  去打印这次空闲任务的剩余时间，一般都稳定维持在  49.xx  ms，因为此时浏览器没有什么优先级更高的任务要去处理。 \n \n 而如果我不停的滚动浏览器，不断的触发浏览器的重新绘制的话，这个时间就变的非常不稳定了。 \n \n 通过这个例子，你可以更加有体感的感受到什么样叫做「繁忙」，什么样叫做「空闲」。 \n 动画 \n 这个动画的例子很简单，就是利用 rAF 在每帧渲染前的回调中把方块的位置向右移动 10px。 \n <! DOCTYPE   html > \n < html   lang = " en " > \n < head > \n     < meta   charset = " UTF-8 " > \n     < meta   http-equiv = " X-UA-Compatible "   content = " IE=edge " > \n     < meta   name = " viewport "   content = " width=device-width, initial-scale=1.0 " > \n     < title > Document </ title > \n     < style > \n         *   { \n             margin :  0 ; \n             padding :  0 ; \n         } \n         #animateDiv   { \n             height :  200px ; \n             width :  200px ; \n             background :  red ; \n         } \n     </ style > \n </ head > \n < body > \n     < div   id = " animateDiv " > </ div > \n     < script > \n         let  start  =   null ; \n         let  ele  =  document . getElementById ( \'animateDiv\' ) ; \n        ele . style . position  =   \'absolute\' ; \n\n         function   step ( timeStamp )   { \n             if ( ! start )  start  =  timeStamp ; \n             let  progress  =  timeStamp  -  start ; \n            ele . style . left  =   ( progress  /   10 )   +   \'px\' ; \n             if ( progress  <   5000 )   { \n                 requestAnimationFrame ( step ) ; \n             } \n         } \n\n         requestAnimationFrame ( step ) ; \n\n         requestIdleCallback ( ( )   =>   { \n             alert ( \'rIC\' ) ; \n         } ) \n     </ script > \n </ body > \n </ html > \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 注意在最后我加了一个  requestIdleCallback  的函数，回调里会  alert(\'rIC\') ，来看一下演示效果： \n \n alert  在最开始的时候就执行了，为什么会这样呢一下，想一下「空闲」的概念，我们每一帧仅仅是把  left  的值移动了一下，做了这一个简单的渲染，没有占满空闲时间，所以可能在最开始的时候，浏览器就找到机会去调用  rIC  的回调函数了。 \n 我们简单的修改一下  step  函数，在里面加一个很重的任务，1000 次循环打印。 \n \n 其实和我们预期的一样，由于浏览器的每一帧都"太忙了",导致它真的就无视我们的  rIC  函数了。 \n 如果给  rIC  函数加一个  timeout  呢： \n requestIdleCallback ( ( )   =>   { \n   alert ( \'rIC\' ) ; \n } ,   { \n  timeout :   500 \n } ) \n \n 1 2 3 4 5 \n 浏览器会在大概  500ms  的时候，不管有多忙，都去强制执行  rIC  函数，这个机制可以防止我们的空闲任务被“饿死”。 \n 总结 \n 通过本文的学习过程，我自己也打破了很多对于 Event Loop 以及 rAF、rIC 函数的固有错误认知，通过本文我们可以整理出以下的几个关键点。 \n \n 事件循环不一定每轮都伴随着重渲染，但是一定会伴随着微任务执行。 \n 决定浏览器视图是否渲染的因素很多，浏览器是非常聪明的。 \n requestAnimationFrame 在重新渲染屏幕之前执行，非常适合用来做动画。 \n requestIdleCallback 在渲染屏幕之后执行，并且是否有空执行要看浏览器的调度，如果你一定要它在某个时间内执行，请使用  timeout 参数。 \n resize 和 scroll 事件其实自带节流，它只在 Event Loop 的渲染阶段去执行事件。 \n 参考文章 \n \n 在 JavaScript 中通过 queueMicrotask() 使用微任务 \n HTML Standard#event-loop \n requestIdleCallback和requestAnimationFrame详解 \n MDN-requestIdleCallback \n MDN-Background Tasks API \n \n ',summary:"\n前言\n\n关于 Event Loop 的文章很多，但是有很多只是在讲「宏任务」、「微任务」，我先提出几个问题：\n\n每一轮 Event Loop 都会伴随着渲染吗？\nrequestAnimationFrame 在哪个阶段执行，在渲染前还是后？在 microTask 的前还是后？\nrequestIdleCallback 在哪个阶段执行？如何去执行？在渲染前还是后？在 microTask 的前还是后？\nresize、scroll 这些事件是何时去派发的。\n\n这些问题并不是刻意想刁难你，如果你不知道这些，那你可能并不能在遇到一个动画需求的时候合理的选择 requestAnimationFrame，你可 ...",id:"post",pid:"post",readingTime:{text:"4 min read",minutes:3.905,time:234299.99999999997,words:781}},{title:"转载-节选-科技爱好者周刊节选（174期）",frontmatter:{title:"转载-节选-科技爱好者周刊节选（174期）",description:"转载-节选-科技爱好者周刊节选（174期）",date:"2021-09-03",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210903161221.jpeg",tags:["趣谈","转载"],meta:[{name:"title",content:"转载-节选-科技爱好者周刊节选（174期）"},{name:"description",content:"转载-节选-科技爱好者周刊节选（174期）"},{name:"keywords",content:"科技爱好者周刊节选"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2021-09-03-sci-note7.html",relativePath:"_posts/2021-09-03-sci-note7.md",key:"v-27bd9704",path:"/2021/09/03/sci-note7/",headers:[{level:2,title:"前言",slug:"前言"},{level:2,title:"正文",slug:"正文"},{level:2,title:"最后",slug:"最后"}],lastUpdated:"9/3/2021, 9:39:10 AM",content:' 科技爱好者周刊（第 174 期）：全能程序员 vs 特长程序员 \n 前言 \n 本文节选自阮一峰老师的《科技爱好者周刊》第174期。 \n 《周刊》链接： 科技爱好者周刊174期 \n 又到周五啦 开心~~ 🤩 🥰 ✌️ \n 正文 \n 本周话题  部分 \n 软件行业其实也是如此，"全能程序员"的出路，明显不如"特长程序员"。 \n 如果你什么都会干，前端、后端、数据库、服务器管理都能上手，那么哪里缺人手，就会让你顶上去。但是，一旦遇到疑难问题，又指望不了你，因为你不是那个方面的专家，解决不了。 \n 反过来，你精通某一项技术，其他都不懂，公司反而会觉得你更有价值。因为你可以把这个技术做得很深，克服技术难点，超过竞争对手，所以你的晋升会快得多。 \n 新人如果想在软件行业长远发展，建议选择一两个技术方向进行专研，成为专家，而不要什么技术都懂一点，但是哪一项都不精通。 \n \n 自己的想法：其实全能程序员和特长程序员，可以转换为另外一个问题：技术的广度和深度哪一个更重要？个人拙见：比较偏向于技术的深度，让深度去辐射广度。因为我认为到了某一项技术到了一定的深度，广度会自然而然的产生的。🤓 \n \n \n 科技动态  部分 \n \n 电子咖啡 \n \n 很多人工作疲惫时，会喝一杯咖啡振奋精神。一家美国创业公司发明了一种电动剃须刀大小的设备，可以替代咖啡。 \n 这种设备只要按在脖子上，打开开关，就会向人体释放低压电流，每次持续一毫秒，相当于一次电击。 \n \n 它可以刺激迷走神经，促进体内肾上腺素的分泌，起到跟咖啡类似的作用。目前，价格是每个 1250美元。 \n \n \n 哈哈，这属于电刑啊 这玩意是不是还可以戒网瘾，那雷电法王可以申请出战🐶（开个玩笑） \n \n \n 算法裁员 \n \n \n 美国的游戏服务公司 Xsolla 的收益今年下降了40%，决定裁掉三分之一的员工，大约150人。这件事的特别之处在于，公司使用软件算法判定，应该裁掉哪些人。 \n CEO 的内部邮件这样写道： \n "你收到这封电子邮件，是因为我们的大数据团队分析了你在 Jira、Confluence、Gmail、\n聊天、文档、仪表板中的活动，并将你标记为不敬业和效率低下的员工。换句话说，当你远程\n工作时，你并不总是在工作。你们中的许多人可能会感到震惊，不认同软件的算法，\n但我真的相信 Xsolla 不适合你。"\n \n 1 2 3 4 \n 这... 我自己写的算法把我给裁了？ 🤣  哈哈哈 这事情要是发生在中国 微博热搜第一名没跑啦~~ \n \n \n 文章  部分 \n \n CSS 中 content 属性的妙用 （中文） \n \n CSS 的 content 属性可以向网页添加文本内容，本文总结了这个属性的用途，并逐一给出示例。 \n \n 掌握 Python 网页抓取 （英文） \n \n \n 本文详细介绍如何使用 Python 开发一个爬虫，抓取网页，并且考虑到了很多细节问题，比如多线程并行抓取、防止被屏蔽等等。 \n \n 工具  部分 \n \n BackgroundRemover \n \n \n 一个开源软件，用来移除图像和视频的背景。 \n \n 文摘  部分 \n \n Linux 内核5.14版发布说明 \n \n 8月25日是 Linux 操作系统诞生纪念日。 \n 1991年8月25日，芬兰大学生 Linus 在网上宣布，他写了一个操作系统的内核，欢迎大家提意见。 \n \n 30年过去了，Linus 依然在为这个项目忙碌。他按照预定计划，在8月29日发布了内核的5.14版。并且写了下面的发布说明。 \n "我意识到，大家一定还忙于30周年的庆祝活动，各种花里胡哨的晚会。但在某个时候，你一定会厌倦那里的浮华、烟花和香槟，穿着礼服也不舒服。这种庆祝活动还将持续数周，但你可能想停下来喘口气。 \n 如果是这样，我正好为你准备了一个新的内核版本，欢迎来测试和享用。5.14版已经发布，就等着你来试用，别忘了所有那些庆祝活动是为了什么。 \n 当然，可怜的不知疲倦的内核维护者，是不会有时间参加庆祝活动的。因为对他们来说，这一天只是意味着合并窗口将在明天开始。我们期待还有下一个30年。但是对于其他人，请稍事休息，构建新版本的内核，对其进行测试，然后你就可以回到那个你刚刚离开的、看上去不会结束的聚会上了。" \n 最后 \n 感谢阮一峰老师的《周刊》 \n love & peace 😘 \n PS：本周最佳 算法裁员  😝 \n ',summary:'\n前言\n\n本文节选自阮一峰老师的《科技爱好者周刊》第174期。\n\n《周刊》链接：科技爱好者周刊174期\n\n又到周五啦 开心 🤩 🥰 ✌️\n\n正文\n\n本周话题 部分\n\n软件行业其实也是如此，"全能程序员"的出路，明显不如"特长程序员"。\n\n如果你什么都会干，前端、后端、数据库、服务器管理都能上手，那么哪里缺人手，就会让你顶上去。但是，一旦遇到疑难问题，又指望不了你，因为你不是那个方面的专家，解决不了。\n\n反过来，你精通某一项技术，其他都不懂，公司反而会觉得你更有价值。因为你可以把这个技术做得很深，克服技术难点，超过竞争对手，所以你的晋升会快得多。\n\n新人如果想在软件行业长远发展，建议选择一两 ...',id:"post",pid:"post",readingTime:{text:"1 min read",minutes:.595,time:35699.99999999999,words:119}},{title:"转载-节选-科技爱好者周刊节选（175期）",frontmatter:{title:"转载-节选-科技爱好者周刊节选（175期）",description:"转载-节选-科技爱好者周刊节选（175期）",date:"2021-09-11",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210911221105.jpeg",tags:["趣谈","转载"],meta:[{name:"title",content:"转载-节选-科技爱好者周刊节选（175期）"},{name:"description",content:"转载-节选-科技爱好者周刊节选（175期）"},{name:"keywords",content:"科技爱好者周刊节选"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2021-09-11-sci-note8.html",relativePath:"_posts/2021-09-11-sci-note8.md",key:"v-444b4f84",path:"/2021/09/11/sci-note8/",headers:[{level:2,title:"前言",slug:"前言"},{level:2,title:"正文",slug:"正文"},{level:2,title:"最后",slug:"最后"}],lastUpdated:"9/11/2021, 3:06:55 PM",content:' 科技爱好者周刊（第 175 期）：知识广度 vs 知识深度 \n 前言 \n 本文节选自阮一峰老师的《科技爱好者周刊》第175期。 \n 《周刊》链接： 科技爱好者周刊175期 \n 正文 \n 本周话题  部分：知识广度 vs 知识深度 \n \n 知识广度和知识深度也是我毕业两年多以来一直在思考的问题，我给自己的答案就是用深度去辐射广度。现在看来也不算错~~  😊 \n \n 国外有人讨论过知识广度和知识深度这个话题： \n \n 作者画了一张图，将世界上的程序员比喻成三种形状。 \n （1）大饼型：拥有知识广度，但没有知识深度。 \n （2）竹竿型：拥有知识深度，但没有知识广度。 \n （3）T 型：介于前两者之间。 \n 文章也认为，通常情况下，竹竿型程序员的出路最好，雇主愿意为知识深度买单。因为现代社会高度分工，越是大公司，岗位职责越明确，需要的是领域专家，而不是多面手。 \n 但是作者提到， 有一种情况例外，知识广度有明显优势，那就是确定项目路线的时候 。 \n \n 请看上图，右上角有一个黑点，那是公司的目标。当前位置在左下角的原点，两点之间没有现成的道路，需要自己寻找实现路径。 \n 这时，知识广度就发挥作用了，了解的信息越广泛，知道的情况越多，就越可能具备洞察力，能够在多条路径里面，选出最合适的道路。知识面狭窄的人，由于不了解其它道路，不管遇到什么问题，可能都选择他会的那一条路，比如 Java。 \n 这就是全能程序员的优势，判断正确的仰角 θ，使得两点之间距离最短；特长程序员的优势是前进速度 r，可以在既定道路上做到快速前进。所以， 知识的广度能告诉你什么是正确的方向，知识的深度则可以让你在该方向上快速前进 。 \n \n 科技动态  部分： \n \n 小行星撞地球 \n \n \n 根据美国宇航局的计算，有一颗叫做 Bennu 的小行星，直径约为492米，将在一个多世纪后的2135年到2200年之间，在地球和月球之间经过，而且不能排除撞上地球的可能性。 \n 早先的计算是撞击概率为2,700分之一，后来经过修正为1,750分之一。 \n \n \n 文章  部分： \n \n elm 语言的使用心得 （英文） \n \n \n 作者在生产环境使用 Elm 将近两年了，写了10万行代码。这篇文章详细评价了 elm 语言，给予很高的评价。本文写得很好，推荐阅读。 \n \n 对elm 语言不太了解 先mark一下~~ \n \n \n NetBSD 解释 （英文） \n \n \n 一篇科普文章，介绍什么是 NetBSD 操作系统，它的由来和特点。 \n \n 工具  部分： \n \n Lit \n \n \n 谷歌推出的基于 Web Components 的前端框架，非常小巧（5KB），用法很优雅。 \n \n TypeIt \n \n \n 一个 JS 库，用来在网页上生成打字机输入文字的动画效果。 \n \n 资源  部分： \n \n 技术面试手册 \n \n \n 工程师如何准备技术面试的英文免费电子书，全书分成两部分：面试本身的准备和技术知识的准备。GitHub 有5万多颗星。 \n \n 图片  部分： \n \n 古斯塔夫·哈肯松 \n \n 1951年，66岁的瑞典人古斯塔夫·哈肯松（Gustaf Håkansson），报名参加一个超长距离1764公里的自行车比赛。主办方拒绝了，理由是他的年纪太大了，比赛只允许40岁以下的人参加。 \n 但是，他还是跟选手一起出发了，但不是正式参赛者，而是在最后一名参赛者出发后一分钟出发，并穿着一件写着零的号码牌衬衫。 \n \n 比赛分成好几天，其它参赛者睡觉时，古斯塔夫·哈肯松依然在骑车。他留着很长的白胡子，显得更加苍老。许多报纸都报道了他的故事，引起了全国的关注，他变成了知名人物。 \n \n 经过6 天 14 小时 20 分钟，他率先到达终点，比其它参赛者早了 24 小时。人们在终点迎接他。 \n 他一直活到了1987年，102岁逝世。 \n \n 文摘  部分： \n \n 错误的面试答案，让我得到了工作 \n \n 面试不仅仅需要技术技能，还需要人际交往能力。这也很合理，因为实际工作中，确实两种能力都需要。 \n \n 言论  部分： \n \n \n 我在普林斯顿大学学习物理学时，曾经与一个同学一起花了三个小时，研究一个非常困难的偏微分方程，但一无所获。后来，我们去找了班上最聪明的同学，他看了几分钟就说："余弦变换可以解"。我们表示不理解，他就写了三页纸的答案，并说几年前就解过类似的问题。 \n 因为这件事，我知道自己永远不会成为一名伟大的理论物理学家，所以就改学了计算机。 \n --  贝佐斯 ，亚马逊公司的老板，回忆大学生活 \n 最后 \n 感谢阮一峰老师的《周刊》 \n love & peace 😘 \n PS：本周最佳——知识的广度能告诉你什么是正确的方向，知识的深度则可以让你在该方向上快速前进 \n ',summary:"\n前言\n\n本文节选自阮一峰老师的《科技爱好者周刊》第175期。\n\n《周刊》链接：科技爱好者周刊175期\n\n正文\n\n本周话题 部分：知识广度 vs 知识深度\n\n> 知识广度和知识深度也是我毕业两年多以来一直在思考的问题，我给自己的答案就是用深度去辐射广度。现在看来也不算错 😊\n\n国外有人讨论过知识广度和知识深度这个话题：\n\n作者画了一张图，将世界上的程序员比喻成三种形状。\n\n（1）大饼型：拥有知识广度，但没有知识深度。\n\n（2）竹竿型：拥有知识深度，但没有知识广度。\n\n（3）T 型：介于前两者之间。\n\n文章也认为，通常情况下，竹竿型程序员的出路最好，雇主愿意为知识深度买单。因为现代社会高度分工 ...",id:"post",pid:"post",readingTime:{text:"1 min read",minutes:.685,time:41100,words:137}},{title:"转载-节选-科技爱好者周刊节选（176&177期）",frontmatter:{title:"转载-节选-科技爱好者周刊节选（176&177期）",description:"转载-节选-科技爱好者周刊节选（176&177期）",date:"2021-09-28",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210928212522.jpg",tags:["趣谈","转载"],meta:[{name:"title",content:"转载-节选-科技爱好者周刊节选（176&177期）"},{name:"description",content:"转载-节选-科技爱好者周刊节选（176&177期）"},{name:"keywords",content:"科技爱好者周刊节选"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2021-09-28-sci-note9&10.html",relativePath:"_posts/2021-09-28-sci-note9&10.md",key:"v-01b345d4",path:"/2021/09/28/sci-note9-10/",headers:[{level:2,title:"前言",slug:"前言"},{level:2,title:"176期：中国法院承认GPL吗？",slug:"_176期-中国法院承认gpl吗"},{level:3,title:"科技动态 部分",slug:"科技动态-部分"},{level:3,title:"文章 部分",slug:"文章-部分"},{level:3,title:"工具 部分",slug:"工具-部分"},{level:3,title:"资源 部分",slug:"资源-部分"},{level:3,title:"言论 部分",slug:"言论-部分"},{level:2,title:"177 期：iPad 的真正用途",slug:"_177-期-ipad-的真正用途"},{level:3,title:"封面图",slug:"封面图"},{level:3,title:"科技动态 部分",slug:"科技动态-部分-2"},{level:3,title:"文章 部分",slug:"文章-部分-2"},{level:3,title:"工具 部分",slug:"工具-部分-2"},{level:3,title:"文摘 部分",slug:"文摘-部分"},{level:3,title:"言论 部分",slug:"言论-部分-2"},{level:2,title:"最后",slug:"最后"}],lastUpdated:"9/28/2021, 3:30:07 PM",content:' 科技爱好者周刊（第 176&177 期） \n 前言 \n 最近事情（当然是喜事了~~）比较多，阮老师的周刊有两期没看，今天一起来补看一下 \n 《176周刊》链接： 科技爱好者周刊176期 \n 《177周刊》链接： 科技爱好者周刊177期 \n 176期：中国法院承认GPL吗？ \n  科技动态  部分 \n \n 游戏厅的衰落 \n \n \n 日本的电子游戏厅曾经盛极一时，各种街机玲琅满目，但是，现在已经盛况不再。根据警方的统计，1986年日本全国曾经有 26,573 家游戏厅，到了2019年只剩下 4,022 家，疫情爆发以后，数目更是继续锐减，可能不到最高峰时的十分之一。 \n 互联网和手机游戏的兴起，是游戏厅衰落的主要原因。目前，游戏厅的最大顾客来源是传统游戏爱好者，以及老年人。一位65岁的老人说，他把游乐厅当作社交场所，可以结交很多朋友。 \n \n \n 漂浮式光伏电站 \n \n \n 山东 德州 最近建成了，世界最大的单体水上漂浮式光伏电站。在水库的水面上，漂浮着面积2200亩的太阳能光伏板，设计总容量为320兆瓦，第一期建成了200兆瓦。 \n 漂浮式光伏电站的好处是，对水体没有破坏性，比较环保，节省地基成本，施工周期短，还可以减少水库的水量蒸发、遮挡阳光抑制藻类生长。另一方面，光伏板放在水里，可以有效降温，显著提高发电效率。 \n  文章  部分 \n \n 消灭后视镜 （中文） \n \n \n 越来越多的小汽车使用摄像头取代后视镜，有的甚至连突出的门把手都隐藏了，本文讨论这样做的原因。 \n \n 12 张视觉错觉图片 （英文） \n \n \n 本文收集了 12 张著名的视觉错误图片。比如，上面这两张图片，看上去是不同角度拍摄的同一条街道，但是实际上，它们是同一张图片并排放在一起。 \n \n 浏览器的"包导入地图" （英文） \n \n Chrome 89 开始支持 ES 模块的"包导入地图"功能（package import maps），可以为导入模块指定别名。 \n  工具  部分 \n \n MDvideo \n \n \n 一个桌面软件，自动将 Markdown 文档转成一段视频。文档里面的视频、音频、图片网址，都会抓取后插入视频，还可以根据文字生成人工语音的旁白朗读。 \n 它非常适合快速生成产品的介绍视频。 \n  资源  部分 \n \n Samantha Ming 个人网站 \n \n \n Samantha Ming 是一名加拿大前端工程师，她在个人网站上分享了很多前端代码的技巧，内容质量很高，制作精美。 \n \n SQL Bolt \n \n \n 一个交互式的英文在线教程，一共19课，从零开始讲授 SQL 知识，以及如何查询数据库。 \n  言论  部分 \n \n \n 二战开始后，德国轰炸伦敦。伦敦市区每天晚上都有炸弹落下，郊区的炸弹比较少，可能每周一次。 \n 战后的调查发现，在这段时期，市区居民的胃溃疡发病率显著增加，奇怪的是，郊区居民的胃溃疡发病率，增加得比市区还要大得多。这说明压力的不确定性比压力本身伤害更大。\t--  《学会减少不确定性》 \n \n \n 幸福的秘诀就是永远抱有低期望值。（the secret to happiness is low expectations.） \n 177 期：iPad 的真正用途 \n 封面图 \n \n 23岁的宁夏青年董书畅，今年6月份在西藏阿里地区，拍到了一张完美的日环食照片。最近获得了英国格林威治天文台评选的2021年天文摄影冠军照片。 \n  科技动态  部分 \n \n 四足鲸鱼化石 \n \n \n 秘鲁发现了距今4300万年前的鲸鱼化石，奇特的是这种鲸鱼长有四条腿，还有蹄子和蹼足。 \n 科学家认为，这证明了，鲸鱼原来在陆上生活，能够同时游泳和行走，后来回到海里，四条腿才逐渐消失。 \n 生命起源于海洋，后来一部分动物从海里上岸，来到陆地生活，但是其中一些动物后来又离开陆地，回到海洋，鲸鱼大概就属于这种情况。 \n  文章  部分 \n \n 前端资源的完整性校验 （中文） \n \n \n 网页的 <link> 和 <script> 标签有一个 integrity 属性，指定所加载内容的哈希值，防止被篡改。本文介绍这个属性的用法。 \n  工具  部分 \n \n 可视化代码执行 \n \n \n 这个网站会将代码的执行流程，转成可视化图形，展示代码一步步是怎么执行的。目前支持 Python、Java、C、C++、JavaScript 和 Ruby 代码。 \n \n \n favicon pang \n 这个网页的 favicon 图标是一个乒乓球游戏，通过拖动网页滚动条来玩游戏。 \n  文摘  部分 \n \n 浏览器标准被大公司左右 \n \n 最近这些年，浏览器开发商（比如谷歌和苹果）从 W3C 手中夺取了网络标准的控制权。 \n 网络标准正越来越多由大公司来决定，而不是由标准化组织 W3C 来决定。 \n 大公司为了自己的业务，让浏览器的功能不断膨胀，目标是让 Web 网站做到原生应用可以做的一切，这是一个巨大的错误。 \n 大公司明白，添加到 Web 的功能越多，浏览器之间的竞争就会越少！ \n 谁能跟上谷歌推出新标准的脚步？Mozilla 不能，苹果不能，甚至微软也认输了，放弃自己开发浏览器引擎，直接采用了 Chromium 作为自家 Edge 浏览器的内核。 \n 想象一下，现在有一家小公司试图从头开始编写一个 Web 浏览器。简直不可能！网络如此复杂，他别无选择，只能采用少数现有的浏览器引擎之一：Chromium、WebKit、Gecko。 \n 这就是现在的状况，浏览器市场的竞争正在越来越少。"每个人都必须采用 Chromium"，这正是谷歌的计划。 \n 谁主导了浏览器引擎，谁就控制了互联网。即使 Web 标准是开放的，理论上允许任何人实现浏览器引擎。但是 Web 标准那么多、那么复杂，实际上没有人可以实现能与 Chromium 抗衡的浏览器引擎，那么这种开放也没有意义了。 \n 现在的 Web 标准被大公司控制，已经沦为 Chromium、WebKit、Gecko 和它们各自怪癖的集合。以后怎么可能还会有新引擎？ \n 如果没有新的人可以编写浏览器引擎，网络就不会是开放的。开放只是一种错觉。 \n  言论  部分 \n \n 失败很少是一种永久状态。失败后，继续前进就可以了。失败只是旅程中的一站，不要让它成为你的目的地。\t--  《首届 Delta Force 训练班》 \n 最后 \n 读阮一峰老师的周刊还是会有很多收获，不仅仅是技术方面。 \n love & peace \n PS: 最佳推荐 --  可视化代码执行 \n ',summary:"\n前言\n\n最近事情（当然是喜事了）比较多，阮老师的周刊有两期没看，今天一起来补看一下\n\n《176周刊》链接：科技爱好者周刊176期\n\n《177周刊》链接：科技爱好者周刊177期\n\n176期：中国法院承认GPL吗？\n\n科技动态 部分\n\n游戏厅的衰落\n\n日本的电子游戏厅曾经盛极一时，各种街机玲琅满目，但是，现在已经盛况不再。根据警方的统计，1986年日本全国曾经有 26,573 家游戏厅，到了2019年只剩下 4,022 家，疫情爆发以后，数目更是继续锐减，可能不到最高峰时的十分之一。\n\n互联网和手机游戏的兴起，是游戏厅衰落的主要原因。目前，游戏厅的最大顾客来源是传统游戏爱好者，以及老年人。一位6 ...",id:"post",pid:"post",readingTime:{text:"2 min read",minutes:1.01,time:60600,words:202}},{title:"Web页面子资源完整性校验详细指南",frontmatter:{title:"Web页面子资源完整性校验详细指南",description:"Web页面子资源完整性校验详细指南",date:"2021-09-29",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210929161341.png",tags:["JavaScript","转载"],meta:[{name:"title",content:"Web页面子资源完整性校验详细指南"},{name:"description",content:"Web页面子资源完整性校验详细指南"},{name:"keywords",content:"子资源完整性, SIR, Subresource Integrity, web安全"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2021-09-29-SIR.html",relativePath:"_posts/2021-09-29-SIR.md",key:"v-75403e1e",path:"/2021/09/29/sir/",headers:[{level:2,title:"前言",slug:"前言"},{level:2,title:"SRI是什么，以及解决了什么问题",slug:"sri是什么-以及解决了什么问题"},{level:2,title:"如何使用SRI",slug:"如何使用sri"},{level:2,title:"如何在框架中使用SRI",slug:"如何在框架中使用sri"},{level:2,title:"关于Integrity的一些细节",slug:"关于integrity的一些细节"},{level:2,title:"总结",slug:"总结"},{level:2,title:"关于crossorigin",slug:"关于crossorigin"},{level:2,title:"参考",slug:"参考"}],lastUpdated:"10/8/2021, 3:14:18 PM",content:' Web页面子资源完整性校验详细指南 \n 前言 \n 本文转载于 Web页面子资源完整性校验详细指南 ,对作者表示感谢。 \n 文章内容有部分修改，但整体效果相同。 \n \n 这次要跟大家分享的是关于 Subresource Integrity （子资源完整性）的内容。如果平时对Web安全关注不是很多的话，可能没怎么听过这个术语。不知道也没关系，接下来我会跟大家一起来研究讨论一下这个内容，相信在看完这篇文章之后，你能够深入的理解什么是 SRI ，为什么要使用 SRI ，以及在有这方面需求的情况下如何在项目中实践使用 SRI 。 \n SRI是什么，以及解决了什么问题 \n SRI 是 Subresource Integrity 的简写，表示的是子资源的完整性。比如对于我们在页面中通过 link 和 script 标签引入的样式文件或者引入使用的第三方库就是页面的的子资源。比如像下面这样： \n < link   rel = " stylesheet "  \n       href = " https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css "   \n       crossorigin = " anonymous " > \n\n < script   src = " https://cdn.jsdelivr.net/npm/vue/dist/vue.js "  \n         crossorigin = " anonymous " > </ script > \n \n 1 2 3 4 5 6 一般情况下，为了提高网页的响应速度以及性能，我们通常会把这些子资源放到CDN上 。对于大的互联网公司来说，一般会有自己的云服务，也基本会有自己的CDN服务。但是对于小公司来说，一般会使用云服务厂商提供的 CDN 功能。这里就会有一个问题，如果我们托管在云服务厂商的CDN上的资源万一被篡改了，那么就会对我们的业务产生一些影响。虽然这种事情一般情况下不会发生，但是如果我们的业务对安全要求很高的话，那么还是要对这种情况做好防范处理。 \n SRI  就是应对这个问题的一个解决方案。那么具体是通过什么方式来解决的呢？首先对于一个文件，我们如何知道这个文件的内容有没有被篡改呢？ 我们可以对这个文件进行一个 哈希计算 然后通过 base64 编码生成一段跟文件内容关联的唯一的字符串。如果文件的内容发生了变化，那么通过相同的方式生成的字符串，跟原来的文件生成的字符串是不一样的。这样我们就知道文件被篡改了 。关于这一点如果大家对区块链有了解的话，应该比较容易理解的。 \n \n CA证书的数字签名的验证原理与上述基本类似 \n \n 对于每一个引入的第三方资源，我们只需要在对应的标签上加上 integrity 属性， integrity 属性的值是一个字符串，形式如下面这样： \n < script   src = " https://example.com/example-framework.js " \n         integrity = " sha384-oqVuAfXRKap7fdgcCY5uykM6+R9GqQ8K/uxy9rx7HNQlGYl1kPzQho1wx4JwY8wC " \n         crossorigin = " anonymous " > </ script > \n \n 1 2 3 其中 sha384-oqVuAfXRKap7fdgcCY5uykM6+R9GqQ8K/uxy9rx7HNQlGYl1kPzQho1wx4JwY8wC 就是 integrity 的值，这个字符串以 sha384 开头，表示的是对应安全散列算法的名称，还有 sha256 和 sha512 ；接着是一个短横线 - ，用来分割算法名称和后面通过这个算法生成的 base64 编码的值；最后的 oqVuAfXRKap7fdgcCY5uykM6+R9GqQ8K/uxy9rx7HNQlGYl1kPzQho1wx4JwY8wC 表示的就是对应的文件经过计算后产生的字符串。 \n 当浏览器下载了带有 integrity 属性的子资源的时候，不会立刻执行里面的代码；或者应用里面的样式。浏览器会首先根据 integrity 属性值中指定的相应算法以及下载的文件的内容计算一下这个文件的哈希值是否跟标签中的那个值一样，只有两者一样的情况下才会应用对应的样式或者执行相应的代码。如果两者不一样，那么浏览器就会拒绝执行对应的代码，以及拒绝应用对应的样式。也会在控制台报错，提醒我们当前下载的子资源存在问题 。 \n 这样我们就通过 SRI 这种方法保证了我们的页面不会使用从CDN上下载的被篡改了内容的资源。保证了我们的页面的安全。 \n 如何使用SRI \n 上面简单介绍了 SRI 的作用，那么具体怎么实践呢？下面我们来一起实践一下如何使用 SRI 。 \n 首先我们随便创建一个 index.html ，然后在里面添加如下内容： \n < script   src = " http://localhost:3000/test.js " \n         integrity = " sha384-yGduQba2SOt4PhcoqN6zsgbwhbpK8ZBguLWCSdnSRc6zY/MmfJEmBguDBXJpvXFg " \n         crossorigin = " anonymous " > </ script > \n \n 1 2 3 然后创建一个 test.js 文件，里面内容如下： \n console . log ( \'Hello world\' ) ; \n \n 1 然后在本地使用 Node.js 的 express 框架或者其他的工具，让 test.js 能够在本地通过 http://localhost:3000/test.js 访问。 \n 对于上面 script 标签的 integrity 属性，我们可以通过 如下的命令 ，通过 openssl 工具获取对应的 sha384 算法生成的字符串： \n cat  test.js  |  openssl dgst -sha384 -binary  |  openssl base64 -A\n \n 1 如果是Windows环境的话，需要使用 另外的方式 获取对应的字符串。 \n 然后在浏览器中打开 index.html ，你会看到控制台打印： Hello World 。如果我们这个时候把 test.js 的内容更改一下，在原来的基础上，在 Hello World 后面加上感叹号，如下所示： \n console . log ( \'Hello world!\' ) ; \n \n 1 那么这个时候控制台就不再展示 Hello World ，并且控制台会报错，不过不同的浏览器报错信息不一样： \n \n \n Chrome报错如下： \n \n \n \n Firefox报错如下： \n \n \n \n Safari报错如下： \n \n \n \n 总之都会提醒你， 当前下载的子资源通过计算后的哈希字符串，跟标签上的不一致，浏览器拒绝执行对应的代码 。 \n 这里还有一些需要注意的地方， 如果我们的 test.js 资源跟我们的 index.html 是不同的源，那么还需要在标签上添加 crossorigin="anonymous" ，表明这个资源的请求是需要跨源资源共享的。不然浏览器会报错如下 ： \n \n 如果对跨源资源共享还不是很明白的同学可以参考 Cross-Origin Resource Sharing 。 \n 当然对应的服务端也需要设置对应的响应头部： Access-Control-Allow-Origin: * ，如果是使用 express 的话，可以使用 cors 来简单的设置一下。具体如下所示： \n // ... \napp . use ( \n     cors ( { \n        origin :   "*" , \n     } ) \n ) ; \n // ... \n \n 1 2 3 4 5 6 7 #  如何在框架中使用SRI \n \n 对于 Vue 项目来说，通过使用 Vue CLI 我们可以很简单的就使用这个功能。通过在 vue.config.js 中增加一个配置： integrity: true ，我们就可以在构建的时候后看到，打包后的 index.html 中引入的资源都是带有 integrity 属性的，如下面所示： \n \n \x3c!-- ... --\x3e \n < link   href = " /css/app.fb0c6e1c.css "   rel = " stylesheet " \n           integrity = " sha384-1Ekc46o2fTK9DVGas4xXelFNSBIzgXeLlQlipQEqYUDHkR32K9dbpIkPwq+JK6cl " > \n \x3c!-- ... --\x3e \n < script   src = " /js/chunk-vendors.0691b6c2.js " \n         integrity = " sha384-j7EDAmdSMZbkzJnbdSJdteOHi77fyFw7j6JeGYAf4O20/zAyQq1nJ91iweLs6NDd " > </ script > \n < script   src = " /js/app.290d19ae.js " \n         integrity = " sha384-S3skbo1aIjA4WCmQH6ltlpwMgTXWrakI5+aloQEnNKpEKRfbNyy1eq6SrV88LGOh " > </ script > \n \x3c!-- ... --\x3e \n \n 1 2 3 4 5 6 7 8 9 \n 对于其他框架来说，如果打包工具使用的是 Webpack 的话，可以直接使用对应的插件 webpack-subresource-integrity ，相关的安装和使用说明可以参考 这里 。 \n 关于Integrity的一些细节 \n 在实际的使用过程中，还有很多细节需要注意的，下面给大家再深入的介绍一下。 \n \n \n 目前使用计算资源文件哈希值的算法有 sha256 ， sha384 ， sha512 ，这些都是属于 SHA-2 的安全散列算法 。 \n \n \n 目前已经不推荐使用 MD5 和 SHA-1 的计算哈希值的算法 。 \n \n \n 首先 Integrity 的值可以存在多个，每个值之间使用空格分隔开 。 \n \n 如果多个值分别使用的是 不同 的安全散列算法，比如如下所示： \n \n < script   src = " http://localhost:3000/test.js " \n         crossorigin = " anonymous " \n         integrity = " \n        sha256-LsK9lSOT7mZ9iEbLTm9cwaKTfuBdypNn2ID1Z9g7ZPM=\n        sha384-yGduQba2SOt4PhcoqN6zsgbwhbpK8ZBguLWCSdnSRc6zY/MmfJEmBguDBXJpvXFg\n        sha512-2qg2xR+0XgpsowJp3VCqWFgQalU9xPbqNTV0fdM9sV9ltHSSAcHni2Oo0Woo6aj860KvFu8S1Rdwb8oxJlMJ2Q==\n " > </ script > \n \n 1 2 3 4 5 6 7 那么这个时候浏览器是根据那个安全散列算法来进行处理的呢？还是说只要有一个匹配就可以了呢？ \n 答案是： 浏览器首先会选择安全性最高的那个计算方式，如果是上面这个例子的话，浏览器会选择 sha512 这种计算哈希值的算法。因为 sha512 的安全性大于 sha384 ， sha384 的安全性大于 sha256 ，然后会忽略掉其余通过其他方式计算出的哈希值。这个时候需要注意的是，如果浏览器根据 sha512 计算出来的哈希字符串跟提供的不一样的话，那么不管 sha384 或者 sha256 提供的哈希值是否正确，浏览器都会认为这个资源计算出来的哈希值跟提供的哈希值不一样。所以不会执行对应的代码。 \n \n 如果多个值分别使用的是 相同 的安全散列算法，比如如下所示： \n \n < script   src = " http://localhost:3000/test.js " \n         crossorigin = " anonymous " \n         integrity = " \n        sha384-yGduQba2SOt4PhcoqN6zsgbwhbpK8ZBguLWCSdnSRc6zY/MmfJEmBguDBXJpvXFg\n        sha384-c+xXeW2CdZ1OuDKSrMpABg4MrVFWi3N5VKDC6CTgSRRnPr0dgprowjuFPomHgXlI\n        sha384-E6ULLMoeKAMASZMjQ00AvU+3GzK8HPRhL/bM+P4JdcHLbNqGzU14K9ufSPJCnuex\n " > </ script > \n \n 1 2 3 4 5 6 7 那么这个时候只要有一个值跟浏览器计算的结果是一样的，那么这个资源就可以被认为是没有被篡改的；资源的内容是可以被执行的。 \n \n \n Integrity 属性暂时只支持 link 和 script 标签，以后会支持更多的关于子资源的标签，比如： audio ，  embed ， iframe ， img 等 。 \n 总结 \n 关于 Web页面子资源完整性校验 的分享到这里也就算结束了，相信如果大家仔细看过一遍的话应该都会有一些收获的。如果大家看完后有什么建议和反馈都可以在评论区留言。 \n 关于crossorigin \n 使用 window.onerror 事件来捕获 js脚本中的错误信息是重要的手段 。 \n 但是对于跨域的资源 ，onerror事件通常会上报 "Script error" \n < script > \n        window . onerror   =   function ( e )   { \n            console . log ( e ) ; \n         } \n </ script > \n < script \n         src = " http://localhost:3000/test.js " \n > </ script > \n \n 1 2 3 4 5 6 7 8 //test.js \nconsole . log ( \'Hello world\' ,  a ) ; \n \n 1 2 控制台打印错误信息如下： \n \n 解决这个问题的一个办法之一就是在跨域资源的script标签中添加crossorigin属性： \n < script > \n        window . onerror   =   function ( e )   { \n            console . log ( e ) ; \n         } \n </ script > \n < script \n         src = " http://localhost:3000/test.js " \n         crossorigin = " anonymous " \n > </ script > \n \n 1 2 3 4 5 6 7 8 9 此时控制台打印的错误信息为： \n 参考 \n \n Subresource Integrity \n A CDN that can not XSS you: Using Subresource Integrity \n Subresource Integrity \n What is the best SRI hash size? \n script标签中的crossorigin属性详解 \n HTML attribute: crossorigin \n \n ',summary:"\n前言\n\n本文转载于Web页面子资源完整性校验详细指南,对作者表示感谢。\n\n文章内容有部分修改，但整体效果相同。\n\n这次要跟大家分享的是关于Subresource Integrity（子资源完整性）的内容。如果平时对Web安全关注不是很多的话，可能没怎么听过这个术语。不知道也没关系，接下来我会跟大家一起来研究讨论一下这个内容，相信在看完这篇文章之后，你能够深入的理解什么是SRI，为什么要使用SRI，以及在有这方面需求的情况下如何在项目中实践使用SRI。\n\nSRI是什么，以及解决了什么问题\n\nSRI是Subresource Integrity的简写，表示的是子资源的完整性。比如对于我们在页面中通 ...",id:"post",pid:"post",readingTime:{text:"2 min read",minutes:1.3,time:78e3,words:260}},{title:"SQL入门学习",frontmatter:{title:"SQL入门学习",description:"SQL入门学习",date:"2021-10-19",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20211019151256.png",tags:["SQL"],meta:[{name:"title",content:"SQL入门学习"},{name:"description",content:"SQL入门学习"},{name:"keywords",content:"SQL"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2021-10-19-sql.html",relativePath:"_posts/2021-10-19-sql.md",key:"v-51c9f104",path:"/2021/10/19/sql/",headers:[{level:2,title:"前言",slug:"前言"},{level:2,title:"SQL Lesson 1: SELECT queries",slug:"sql-lesson-1-select-queries"},{level:3,title:"Exercise",slug:"exercise"},{level:2,title:"SQL Lesson 2: Queries with constraints (Pt. 1)",slug:"sql-lesson-2-queries-with-constraints-pt-1"},{level:3,title:"Exercise",slug:"exercise-2"},{level:2,title:"SQL Lesson 3: Queries with constraints (Pt. 2)",slug:"sql-lesson-3-queries-with-constraints-pt-2"},{level:3,title:"Exercise",slug:"exercise-3"},{level:2,title:"SQL Lesson 4: Filtering and sorting Query results",slug:"sql-lesson-4-filtering-and-sorting-query-results"},{level:3,title:"Exercise",slug:"exercise-4"},{level:2,title:"SQL lesson 5:SQL Review: Simple SELECT Queries",slug:"sql-lesson-5-sql-review-simple-select-queries"},{level:3,title:"Exercise",slug:"exercise-5"},{level:2,title:"SQL lesson 6: Multi-table queries with JOINs",slug:"sql-lesson-6-multi-table-queries-with-joins"},{level:3,title:"Exercise",slug:"exercise-6"},{level:2,title:"SQL Lesson 7: OUTER JOINs",slug:"sql-lesson-7-outer-joins"},{level:3,title:"Exercise",slug:"exercise-7"},{level:2,title:"SQL Lesson 8: A short note on NULLs",slug:"sql-lesson-8-a-short-note-on-nulls"},{level:3,title:"Exrecise",slug:"exrecise"},{level:2,title:"SQL Lesson 9: Queries with expressions",slug:"sql-lesson-9-queries-with-expressions"},{level:3,title:"Exercise",slug:"exercise-8"},{level:2,title:"SQL Lesson 10: Queries with aggregates (Pt. 1)",slug:"sql-lesson-10-queries-with-aggregates-pt-1"},{level:3,title:"Common aggregate functions",slug:"common-aggregate-functions"},{level:3,title:"Exercise",slug:"exercise-9"},{level:2,title:"SQL Lesson 11: Queries with aggregates (Pt. 2)",slug:"sql-lesson-11-queries-with-aggregates-pt-2"},{level:3,title:"Exercise",slug:"exercise-10"},{level:2,title:"SQL Lesson 12: Order of execution of a Query",slug:"sql-lesson-12-order-of-execution-of-a-query"},{level:3,title:"Query order of execution(查询执行顺序)",slug:"query-order-of-execution-查询执行顺序"},{level:3,title:"Exercise",slug:"exercise-11"},{level:2,title:"SQL Lesson 13: Inserting rows",slug:"sql-lesson-13-inserting-rows"},{level:3,title:"Exercise",slug:"exercise-12"},{level:2,title:"SQL Lesson 14: Updating rows",slug:"sql-lesson-14-updating-rows"},{level:3,title:"Exercise",slug:"exercise-13"},{level:2,title:"SQL Lesson 15: Deleting rows",slug:"sql-lesson-15-deleting-rows"},{level:3,title:"Exercise",slug:"exercise-14"},{level:2,title:"SQL Lesson 16: Creating tables",slug:"sql-lesson-16-creating-tables"},{level:3,title:"Table data type",slug:"table-data-type"},{level:3,title:"Exercise",slug:"exercise-15"},{level:2,title:"SQL Lesson 17: Altering tables",slug:"sql-lesson-17-altering-tables"},{level:3,title:"Exercise",slug:"exercise-16"},{level:2,title:"SQL Lesson 18: Dropping tables",slug:"sql-lesson-18-dropping-tables"},{level:3,title:"Exercise",slug:"exercise-17"},{level:2,title:"最后",slug:"最后"}],lastUpdated:"10/22/2021, 12:41:26 PM",content:' SQL入门学习 \n 前言 \n 国庆节在家学习了一下SQL语言，主要是通过阮一峰老师在周刊推荐的网站 SQLBolt 。一共18节小课，每一节都有对应的练习题，相对来说比较简单，适合入门。 \n SQL Lesson 1: SELECT queries \nSelect query for a specific columns \n SELECT   < column > ,   < another_column > ,  …\n FROM   < mytable > ; \nSelect query for all columns \n SELECT   *  \n FROM   < mytable > ; \n \n 1 2 3 4 5 6 7 #  Exercise \n Table: Movies \n \n \n \n Id \n Title \n Director \n Year \n Length_minutes \n \n \n \n \n 1 \n Toy Story \n John Lasseter \n 1995 \n 81 \n \n \n 2 \n A Bug\'s Life \n John Lasseter \n 1998 \n 95 \n \n \n 3 \n Toy Story 2 \n John Lasseter \n 1999 \n 93 \n \n \n 4 \n Monsters, Inc. \n Pete Docter \n 2001 \n 92 \n \n \n 5 \n Finding Nemo \n Andrew Stanton \n 2003 \n 107 \n \n \n 6 \n The Incredibles \n Brad Bird \n 2004 \n 116 \n \n \n 7 \n Cars \n John Lasseter \n 2006 \n 117 \n \n \n 8 \n Ratatouille \n Brad Bird \n 2007 \n 115 \n \n \n 9 \n WALL-E \n Andrew Stanton \n 2008 \n 104 \n \n \n 10 \n Up \n Pete Docter \n 2009 \n 101 \n \n \n 11 \n Toy Story 3 \n Lee Unkrich \n 2010 \n 103 \n \n \n 12 \n Cars 2 \n John Lasseter \n 2011 \n 120 \n \n \n 13 \n Brave \n Brenda Chapman \n 2012 \n 102 \n \n \n 14 \n Monsters University \n Dan Scanlon \n 2013 \n 110 \n \n \n \n \n Find the  title  of each film \n \n SELECT  title  FROM  movies ; \n \n 1 \n Find the  director  of each film \n \n SELECT  director  FROM  movies ; \n \n 1 \n Find the  title  and  director  of each film \n \n SELECT  title ,  director  FROM  movies ; \n \n 1 \n Find the  title  and  year  of each film \n \n SELECT  title ,   year   FROM  movies ; \n \n 1 \n Find  all  the information about each film \n \n SELECT   *   FROM  movies ; \n \n 1 #  SQL Lesson 2: Queries with constraints (Pt. 1) \nSelect query with constraints \n SELECT   < column > ,   < another_column > ,  …\n FROM   < mytable > \n WHERE   < condition > \n     AND / OR   < another_condition > \n     AND / OR  … ; \n \n 1 2 3 4 5 6 \n \n \n Operator \n Condition \n SQL Example \n \n \n \n \n =, !=, < <=, >, >= \n Standard numerical operators \n col_name  !=  4 \n \n \n BETWEEN … AND … \n Number is within range of two values (inclusive) \n col_name  BETWEEN  1.5  AND  10.5 \n \n \n NOT BETWEEN … AND … \n Number is not within range of two values (inclusive) \n col_name  NOT BETWEEN  1  AND  10 \n \n \n IN (…) \n Number exists in a list \n col_name  IN  (2, 4, 6) \n \n \n NOT IN (…) \n Number does not exist in a list \n col_name  NOT IN  (1, 3, 5) \n Exercise \n Table: Movies \n \n \n \n Id \n Title \n Director \n Year \n Length_minutes \n \n \n \n \n 1 \n Toy Story \n John Lasseter \n 1995 \n 81 \n \n \n 2 \n A Bug\'s Life \n John Lasseter \n 1998 \n 95 \n \n \n 3 \n Toy Story 2 \n John Lasseter \n 1999 \n 93 \n \n \n 4 \n Monsters, Inc. \n Pete Docter \n 2001 \n 92 \n \n \n 5 \n Finding Nemo \n Andrew Stanton \n 2003 \n 107 \n \n \n 6 \n The Incredibles \n Brad Bird \n 2004 \n 116 \n \n \n 7 \n Cars \n John Lasseter \n 2006 \n 117 \n \n \n 8 \n Ratatouille \n Brad Bird \n 2007 \n 115 \n \n \n 9 \n WALL-E \n Andrew Stanton \n 2008 \n 104 \n \n \n 10 \n Up \n Pete Docter \n 2009 \n 101 \n \n \n 11 \n Toy Story 3 \n Lee Unkrich \n 2010 \n 103 \n \n \n 12 \n Cars 2 \n John Lasseter \n 2011 \n 120 \n \n \n 13 \n Brave \n Brenda Chapman \n 2012 \n 102 \n \n \n 14 \n Monsters University \n Dan Scanlon \n 2013 \n 110 \n \n \n \n \n Find the movie with a row  id  of 6 \n \n SELECT   *   FROM  movies  WHERE  id = 6 ; \n \n 1 \n Find the movies released in the  year s between 2000 and 2010 \n \n SELECT   *   FROM  movies  WHERE   year   BETWEEN   2000   AND   2010 ; \n \n 1 \n Find the movies  not  released in the  year s between 2000 and 2010 \n \n SELECT   *   FROM  movies  WHERE   year   NOT   BETWEEN   2000   AND   2010 ; \n \n 1 \n Find the first 5 Pixar movies and their release  year \n \n SELECT  title ,   year   FROM  movies  WHERE   year   <=   2003 ; \n \n 1 #  SQL Lesson 3: Queries with constraints (Pt. 2) \n \n \n \n Operator \n Condition \n Example \n \n \n \n \n = \n Case sensitive exact string comparison ( notice the single equals ) \n col_name  =  "abc" \n \n \n != or <> \n Case sensitive exact string inequality comparison \n col_name  !=  "abcd" \n \n \n LIKE \n Case insensitive exact string comparison \n col_name  LIKE  "ABC" \n \n \n NOT LIKE \n Case insensitive exact string inequality comparison \n col_name  NOT LIKE  "ABCD" \n \n \n % \n Used anywhere in a string to match a sequence of zero or more characters (only with LIKE or NOT LIKE) \n col_name  LIKE  "%AT%" (matches "AT", "ATTIC", "CAT" or even "BATS") \n \n \n _ \n Used anywhere in a string to match a single character (only with LIKE or NOT LIKE) \n col_name  LIKE  "AN_" (matches "AND", but not "AN") \n \n \n IN (…) \n String exists in a list \n col_name  IN  ("A", "B", "C") \n \n \n NOT IN (…) \n String does not exist in a list \n col_name  NOT IN  ("D", "E", "F") \n Exercise \n Table: Movies \n \n \n \n Id \n Title \n Director \n Year \n Length_minutes \n \n \n \n \n 1 \n Toy Story \n John Lasseter \n 1995 \n 81 \n \n \n 2 \n A Bug\'s Life \n John Lasseter \n 1998 \n 95 \n \n \n 3 \n Toy Story 2 \n John Lasseter \n 1999 \n 93 \n \n \n 4 \n Monsters, Inc. \n Pete Docter \n 2001 \n 92 \n \n \n 5 \n Finding Nemo \n Andrew Stanton \n 2003 \n 107 \n \n \n 6 \n The Incredibles \n Brad Bird \n 2004 \n 116 \n \n \n 7 \n Cars \n John Lasseter \n 2006 \n 117 \n \n \n 8 \n Ratatouille \n Brad Bird \n 2007 \n 115 \n \n \n 9 \n WALL-E \n Andrew Stanton \n 2008 \n 104 \n \n \n 10 \n Up \n Pete Docter \n 2009 \n 101 \n \n \n 11 \n Toy Story 3 \n Lee Unkrich \n 2010 \n 103 \n \n \n 12 \n Cars 2 \n John Lasseter \n 2011 \n 120 \n \n \n 13 \n Brave \n Brenda Chapman \n 2012 \n 102 \n \n \n 14 \n Monsters University \n Dan Scanlon \n 2013 \n 110 \n \n \n 87 \n WALL-G \n Brenda Chapman \n 2042 \n 97 \n \n \n \n \n Find all the Toy Story movies \n \n SELECT   *   FROM  movies  WHERE  title  LIKE   \'Toy Story%\' ; \n \n 1 \n Find all the movies directed by John Lasseter \n \n SELECT   *   FROM  movies  WHERE  director = \'John Lasseter\' ; \n \n 1 \n Find all the movies (and director) not directed by John Lasseter \n \n SELECT   *   FROM  movies  WHERE  director != \'John Lasseter\' ; \n \n 1 \n Find all the WALL-* movies \n \n SELECT   *   FROM  movies  WHERE  title  LIKE   \'WALL-_\' ; \n \n 1 #  SQL Lesson 4: Filtering and sorting Query results \nSelect query with unique results \n SELECT   DISTINCT   column ,  another_column ,  …\n FROM  mytable\n WHERE  condition ( s ) ; \n\n SELECT   < column > ,   < another_column > ,  …\n FROM   < mytable > \n WHERE  condition ( s ) \n ORDER   BY   < column >   ASC / DESC \n LIMIT   < num_limit >   OFFSET   < num_offset > ; \n \n 1 2 3 4 5 6 7 8 9 10 #  Exercise \n Table: Movies \n \n \n \n Id \n Title \n Director \n Year \n Length_minutes \n \n \n \n \n 1 \n Ratatouille \n Brad Bird \n 2007 \n 115 \n \n \n 2 \n Up \n Pete Docter \n 2009 \n 101 \n \n \n 3 \n Toy Story 3 \n Lee Unkrich \n 2010 \n 103 \n \n \n 4 \n Finding Nemo \n Andrew Stanton \n 2003 \n 107 \n \n \n 5 \n Monsters, Inc. \n Pete Docter \n 2001 \n 92 \n \n \n 6 \n Toy Story \n John Lasseter \n 1995 \n 81 \n \n \n 7 \n Toy Story 2 \n John Lasseter \n 1999 \n 93 \n \n \n 8 \n WALL-E \n Andrew Stanton \n 2008 \n 104 \n \n \n 9 \n Brave \n Brenda Chapman \n 2012 \n 102 \n \n \n 10 \n A Bug\'s Life \n John Lasseter \n 1998 \n 95 \n \n \n 11 \n Cars \n John Lasseter \n 2006 \n 117 \n \n \n 12 \n Cars 2 \n John Lasseter \n 2011 \n 120 \n \n \n 13 \n Monsters University \n Dan Scanlon \n 2013 \n 110 \n \n \n 14 \n The Incredibles \n Brad Bird \n 2004 \n 116 \n \n \n \n \n List all directors of Pixar movies (alphabetically), without duplicates \n \n SELECT   DISTINCT  director  FROM  movies  ORDER   BY  director  ASC ; \n \n 1 \n List the last four Pixar movies released (ordered from most recent to least) \n \n SELECT   *   FROM  movies  ORDER   BY   year   DESC   LIMIT   4 ; \n \n 1 \n List the  first  five Pixar movies sorted alphabetically \n \n SELECT   *   FROM  movies  ORDER   BY  title  LIMIT   5 ; \n \n 1 \n List the  next  five Pixar movies sorted alphabetically \n \n SELECT   *   FROM  movies  ORDER   BY  title  LIMIT   5   OFFSET   5 ; \n \n 1 #  SQL lesson 5:SQL Review: Simple SELECT Queries \n SELECT   < column > ,   < another_column > ,  …\n FROM   < mytable > \n WHERE  condition ( s ) \n ORDER   BY   < column >   ASC / DESC \n LIMIT   < num_limit >   OFFSET   < num_offset > ; \n \n 1 2 3 4 5 #  Exercise \n \n \n \n City \n Country \n Population \n Latitude \n Longitude \n \n \n \n \n Guadalajara \n Mexico \n 1500800 \n 20.659699 \n -103.349609 \n \n \n Toronto \n Canada \n 2795060 \n 43.653226 \n -79.383184 \n \n \n Houston \n United States \n 2195914 \n 29.760427 \n -95.369803 \n \n \n New York \n United States \n 8405837 \n 40.712784 \n -74.005941 \n \n \n Philadelphia \n United States \n 1553165 \n 39.952584 \n -75.165222 \n \n \n Havana \n Cuba \n 2106146 \n 23.05407 \n -82.345189 \n \n \n Mexico City \n Mexico \n 8555500 \n 19.432608 \n -99.133208 \n \n \n Phoenix \n United States \n 1513367 \n 33.448377 \n -112.074037 \n \n \n Los Angeles \n United States \n 3884307 \n 34.052234 \n -118.243685 \n \n \n Ecatepec de Morelos \n Mexico \n 1742000 \n 19.601841 \n -99.050674 \n \n \n Montreal \n Canada \n 1717767 \n 45.501689 \n -73.567256 \n \n \n Chicago \n United States \n 2718782 \n 41.878114 \n -87.629798 \n \n \n \n \n List all the Canadian cities and their populations \n \n SELECT   *   FROM  north_american_cities  WHERE  Country = \'Canada\' ; \n \n 1 \n Order all the cities in the United States by their latitude from north to south \n \n SELECT   *   FROM  north_american_cities  WHERE  Country = \'United States\'   ORDER   BY  Latitude  DESC ; \n \n 1 \n List all the cities west of Chicago, ordered from west to east \n \n SELECT   *   FROM  north_american_cities  WHERE  Longitude  <   - 87.629798   ORDER   BY  Longitude ; \n \n 1 \n List the two largest cities in Mexico (by population) \n \n SELECT   *   FROM  north_american_cities  WHERE  Country = \'Mexico\'   ORDER   BY  Population  DESC   LIMIT   2 ; \n \n 1 \n List the third and fourth largest cities (by population) in the United States and their population \n \n SELECT   *   FROM  north_american_cities  WHERE  Country  =   \'United States\'   ORDER   BY  Population  DESC   LIMIT   2 ,   2 ; \n \n 1 或者 \n SELECT   *   FROM  north_american_cities  WHERE  Country  =   \'United States\'   ORDER   BY  Population  DESC   LIMIT   2   OFFSET   2 ; \n \n 1 #  SQL lesson 6: Multi-table queries with JOINs \n SELECT   < column > ,   < another_table_column > ,  …\n FROM   < mytable > \n INNER   JOIN   < another_table >  \n     ON   < mytable . id  =  another_table . id > \n WHERE  condition ( s ) \n ORDER   BY   < column > ,  …  ASC / DESC \n LIMIT   < num_limit >   OFFSET   < num_offset > ; \n \n 1 2 3 4 5 6 7 #  Exercise \n Table: Movies \n \n \n \n Id \n Title \n Director \n Year \n Length_minutes \n \n \n \n \n 1 \n Toy Story \n John Lasseter \n 1995 \n 81 \n \n \n 2 \n A Bug\'s Life \n John Lasseter \n 1998 \n 95 \n \n \n 3 \n Toy Story 2 \n John Lasseter \n 1999 \n 93 \n \n \n 4 \n Monsters, Inc. \n Pete Docter \n 2001 \n 92 \n \n \n 5 \n Finding Nemo \n Andrew Stanton \n 2003 \n 107 \n \n \n 6 \n The Incredibles \n Brad Bird \n 2004 \n 116 \n \n \n 7 \n Cars \n John Lasseter \n 2006 \n 117 \n \n \n 8 \n Ratatouille \n Brad Bird \n 2007 \n 115 \n \n \n 9 \n WALL-E \n Andrew Stanton \n 2008 \n 104 \n \n \n 10 \n Up \n Pete Docter \n 2009 \n 101 \n \n \n 11 \n Toy Story 3 \n Lee Unkrich \n 2010 \n 103 \n \n \n 12 \n Cars 2 \n John Lasseter \n 2011 \n 120 \n \n \n 13 \n Brave \n Brenda Chapman \n 2012 \n 102 \n \n \n 14 \n Monsters University \n Dan Scanlon \n 2013 \n 110 \n \n \n \n Table: Boxoffice \n \n \n \n Movie_id \n Rating \n Domestic_sales \n International_sales \n \n \n \n \n 5 \n 8.2 \n 380843261 \n 555900000 \n \n \n 14 \n 7.4 \n 268492764 \n 475066843 \n \n \n 8 \n 8 \n 206445654 \n 417277164 \n \n \n 12 \n 6.4 \n 191452396 \n 368400000 \n \n \n 3 \n 7.9 \n 245852179 \n 239163000 \n \n \n 6 \n 8 \n 261441092 \n 370001000 \n \n \n 9 \n 8.5 \n 223808164 \n 297503696 \n \n \n 11 \n 8.4 \n 415004880 \n 648167031 \n \n \n 1 \n 8.3 \n 191796233 \n 170162503 \n \n \n 7 \n 7.2 \n 244082982 \n 217900167 \n \n \n 10 \n 8.3 \n 293004164 \n 438338580 \n \n \n 4 \n 8.1 \n 289916256 \n 272900000 \n \n \n 2 \n 7.2 \n 162798565 \n 200600000 \n \n \n 13 \n 7.2 \n 237283207 \n 301700000 \n \n \n \n \n Find the domestic and international sales for each movie \n \n SELECT  title ,  domestic_sales ,  international_sales  FROM  movies  INNER   JOIN  boxoffice  ON  id  =  movie_id ; \n \n 1 \n Show the sales numbers for each movie that did better internationally rather than domestically \n \n SELECT  title ,  domestic_sales ,  international_sales  FROM  movies  INNER   JOIN  boxoffice  ON  id  =  movie_id  WHERE  international_sales  >  domestic_sales ; \n \n 1 \n List all the movies by their ratings in descending order \n \n SELECT  title ,  rating ,  domestic_sales ,  international_sales  FROM  movies  INNER   JOIN  boxoffice  ON  id  =  movie_id  ORDER   BY  rating  DESC ; \n \n 1 #  SQL Lesson 7: OUTER JOINs \nSelect query with LEFT/RIGHT/FULL JOINs on multiple tables \n SELECT   < column > ,   < another_column > ,  …\n FROM   < mytable > \n INNER / LEFT / RIGHT / FULL   JOIN   < another_table >  \n     ON  mytable . id  =  another_table . matching_id\n WHERE  condition ( s ) \n ORDER   BY   < column > ,  …  ASC / DESC \n LIMIT   < num_limit >   OFFSET   < num_offset > ; \n \n 1 2 3 4 5 6 7 8 #  Exercise \n Table: Buildings \n \n \n \n Building_name \n Capacity \n \n \n \n \n 1e \n 24 \n \n \n 1w \n 32 \n \n \n 2e \n 16 \n \n \n 2w \n 20 \n \n \n \n Table: Employees \n \n \n \n Role \n Name \n Building \n Years_employed \n \n \n \n \n Engineer \n Becky A. \n 1e \n 4 \n \n \n Engineer \n Dan B. \n 1e \n 2 \n \n \n Engineer \n Sharon F. \n 1e \n 6 \n \n \n Engineer \n Dan M. \n 1e \n 4 \n \n \n Engineer \n Malcom S. \n 1e \n 1 \n \n \n Artist \n Tylar S. \n 2w \n 2 \n \n \n Artist \n Sherman D. \n 2w \n 8 \n \n \n Artist \n Jakob J. \n 2w \n 6 \n \n \n Artist \n Lillia A. \n 2w \n 7 \n \n \n Artist \n Brandon J. \n 2w \n 7 \n \n \n Manager \n Scott K. \n 1e \n 9 \n \n \n Manager \n Shirlee M. \n 1e \n 3 \n \n \n Manager \n Daria O. \n 2w \n 6 \n \n \n \n \n Find the list of all buildings that have employees \n \n SELECT   DISTINCT  building  FROM  employees ; \n \n 1 \n Find the list of all buildings and their capacity \n \n SELECT   *   FROM  buildings ; \n \n 1 \n List all buildings and the distinct employee roles in each building (including empty buildings) \n \n SELECT   DISTINCT  building_name ,  role \n FROM  buildings \n   LEFT   JOIN  employees\n     ON  building_name  =  building ; \n \n 1 2 3 4 #  SQL Lesson 8: A short note on NULLs \nSelect query with constraints on NULL values \n SELECT   < column > ,   < another_column > ,  …\n FROM   < mytable > \n WHERE   column   IS / IS   NOT   NULL \n AND / OR  another_condition\n AND / OR  … ; \n \n 1 2 3 4 5 6 #  Exrecise \n Table: Buildings \n \n \n \n Building_name \n Capacity \n \n \n \n \n 1e \n 24 \n \n \n 1w \n 32 \n \n \n 2e \n 16 \n \n \n 2w \n 20 \n \n \n \n Table: Employees \n \n \n \n Role \n Name \n Building \n Years_employed \n \n \n \n \n Engineer \n Becky A. \n 1e \n 4 \n \n \n Engineer \n Dan B. \n 1e \n 2 \n \n \n Engineer \n Sharon F. \n 1e \n 6 \n \n \n Engineer \n Dan M. \n 1e \n 4 \n \n \n Engineer \n Malcom S. \n 1e \n 1 \n \n \n Artist \n Tylar S. \n 2w \n 2 \n \n \n Artist \n Sherman D. \n 2w \n 8 \n \n \n Artist \n Jakob J. \n 2w \n 6 \n \n \n Artist \n Lillia A. \n 2w \n 7 \n \n \n Artist \n Brandon J. \n 2w \n 7 \n \n \n Manager \n Scott K. \n 1e \n 9 \n \n \n Manager \n Shirlee M. \n 1e \n 3 \n \n \n Manager \n Daria O. \n 2w \n 6 \n \n \n Engineer \n Yancy I. \n \n 0 \n \n \n Artist \n Oliver P. \n \n 0 \n \n \n \n \n Find the name and role of all employees who have not been assigned to a building \n \n SELECT  name ,  role  FROM  employees  WHERE  building  is   null ; \n \n 1 \n Find the names of the buildings that hold no employees \n \n SELECT   DISTINCT  building_name\n FROM  buildings\n   LEFT   JOIN  employees\n     ON  building_name  =  building\n WHERE  role  IS   NULL ; \n \n 1 2 3 4 5 #  SQL Lesson 9: Queries with expressions \n SELECT  col_expression  AS  expr_description ,  …\n FROM  mytable ; \n \n 1 2 #  Exercise \n Table: Movies \n \n \n \n Id \n Title \n Director \n Year \n Length_minutes \n \n \n \n \n 1 \n Toy Story \n John Lasseter \n 1995 \n 81 \n \n \n 2 \n A Bug\'s Life \n John Lasseter \n 1998 \n 95 \n \n \n 3 \n Toy Story 2 \n John Lasseter \n 1999 \n 93 \n \n \n 4 \n Monsters, Inc. \n Pete Docter \n 2001 \n 92 \n \n \n 5 \n Finding Nemo \n Andrew Stanton \n 2003 \n 107 \n \n \n 6 \n The Incredibles \n Brad Bird \n 2004 \n 116 \n \n \n 7 \n Cars \n John Lasseter \n 2006 \n 117 \n \n \n 8 \n Ratatouille \n Brad Bird \n 2007 \n 115 \n \n \n 9 \n WALL-E \n Andrew Stanton \n 2008 \n 104 \n \n \n 10 \n Up \n Pete Docter \n 2009 \n 101 \n \n \n 11 \n Toy Story 3 \n Lee Unkrich \n 2010 \n 103 \n \n \n 12 \n Cars 2 \n John Lasseter \n 2011 \n 120 \n \n \n 13 \n Brave \n Brenda Chapman \n 2012 \n 102 \n \n \n 14 \n Monsters University \n Dan Scanlon \n 2013 \n 110 \n \n \n \n Table: Boxoffice \n \n \n \n Movie_id \n Rating \n Domestic_sales \n International_sales \n \n \n \n \n 5 \n 8.2 \n 380843261 \n 555900000 \n \n \n 14 \n 7.4 \n 268492764 \n 475066843 \n \n \n 8 \n 8 \n 206445654 \n 417277164 \n \n \n 12 \n 6.4 \n 191452396 \n 368400000 \n \n \n 3 \n 7.9 \n 245852179 \n 239163000 \n \n \n 6 \n 8 \n 261441092 \n 370001000 \n \n \n 9 \n 8.5 \n 223808164 \n 297503696 \n \n \n 11 \n 8.4 \n 415004880 \n 648167031 \n \n \n 1 \n 8.3 \n 191796233 \n 170162503 \n \n \n 7 \n 7.2 \n 244082982 \n 217900167 \n \n \n 10 \n 8.3 \n 293004164 \n 438338580 \n \n \n 4 \n 8.1 \n 289916256 \n 272900000 \n \n \n 2 \n 7.2 \n 162798565 \n 200600000 \n \n \n 13 \n 7.2 \n 237283207 \n 301700000 \n \n \n \n \n List all movies and their combined sales in  millions  of dollars \n \n SELECT  title ,   ( domestic_sales  +  international_sales )   /   1000000   AS  gross_sales_millions\n FROM  movies\n   JOIN  boxoffice\n     ON  movies . id  =  boxoffice . movie_id ; \n \n 1 2 3 4 \n List all movies and their ratings  in percent \n \n SELECT  title ,  rating  *   10   AS  rate_percent\n FROM  movies\n   INNER   JOIN  boxoffice\n     ON  movies . id  =  boxoffice . movie_id ; \n \n 1 2 3 4 \n List all movies that were released on even number years \n \n SELECT  title ,   year   FROM  movies  WHERE   year   %   2   =   0 ; \n \n 1 #  SQL Lesson 10: Queries with aggregates (Pt. 1) \nSelect query with aggregate functions over all rows \n SELECT  AGG_FUNC ( column_or_expression )   AS  aggregate_description ,  …\n FROM   < mytable > \n WHERE  constraint_expression ; \nSelect query with aggregate functions over groups \n SELECT  AGG_FUNC ( column_or_expression )   AS  aggregate_description ,  …\n FROM  mytable\n WHERE  constraint_expression\n GROUP   BY   < column > ; \n \n 1 2 3 4 5 6 7 8 9 10 #  Common aggregate functions \n \n \n \n Function \n Description \n \n \n \n \n COUNT( * ) ,  COUNT( column ) \n A common function used to counts the number of rows in the group if no column name is specified. Otherwise, count the number of rows in the group with non-NULL values in the specified column. \n \n \n MIN( column ) \n Finds the smallest numerical value in the specified column for all rows in the group. \n \n \n MAX( column ) \n Finds the largest numerical value in the specified column for all rows in the group. \n \n \n AVG( column ) \n Finds the average numerical value in the specified column for all rows in the group. \n \n \n SUM( column ) \n Finds the sum of all numerical values in the specified column for the rows in the group. \n Exercise \n Table: Employees \n \n \n \n Role \n Name \n Building \n Years_employed \n \n \n \n \n Engineer \n Becky A. \n 1e \n 4 \n \n \n Engineer \n Dan B. \n 1e \n 2 \n \n \n Engineer \n Sharon F. \n 1e \n 6 \n \n \n Engineer \n Dan M. \n 1e \n 4 \n \n \n Engineer \n Malcom S. \n 1e \n 1 \n \n \n Artist \n Tylar S. \n 2w \n 2 \n \n \n Artist \n Sherman D. \n 2w \n 8 \n \n \n Artist \n Jakob J. \n 2w \n 6 \n \n \n Artist \n Lillia A. \n 2w \n 7 \n \n \n Artist \n Brandon J. \n 2w \n 7 \n \n \n Manager \n Scott K. \n 1e \n 9 \n \n \n Manager \n Shirlee M. \n 1e \n 3 \n \n \n Manager \n Daria O. \n 2w \n 6 \n \n \n \n \n Find the longest time that an employee has been at the studio \n \n SELECT  role ,  name ,  building ,   max ( Years_employed )   FROM  employees ; \n \n 1 \n For each role, find the average number of years employed by employees in that role \n \n SELECT  role ,   AVG ( Years_employed )   as  avg_emply  FROM  employees  group   by  role ; \n \n 1 \n Find the total number of employee years worked in each building \n \n SELECT  role ,  name ,  building ,   SUM ( Years_employed )   as  sum_employ  FROM  employees  group   by  building ; \n \n 1 #  SQL Lesson 11: Queries with aggregates (Pt. 2) \nSelect query with HAVING constraint \n SELECT  group_by_column ,  AGG_FUNC ( column_expression )   AS  aggregate_result_alias ,  …\n FROM  mytable\n WHERE  condition\n GROUP   BY   column \n HAVING  group_condition ; \n \n 1 2 3 4 5 6 #  Exercise \n Table: Employees \n \n \n \n Role \n Name \n Building \n Years_employed \n \n \n \n \n Engineer \n Becky A. \n 1e \n 4 \n \n \n Engineer \n Dan B. \n 1e \n 2 \n \n \n Engineer \n Sharon F. \n 1e \n 6 \n \n \n Engineer \n Dan M. \n 1e \n 4 \n \n \n Engineer \n Malcom S. \n 1e \n 1 \n \n \n Artist \n Tylar S. \n 2w \n 2 \n \n \n Artist \n Sherman D. \n 2w \n 8 \n \n \n Artist \n Jakob J. \n 2w \n 6 \n \n \n Artist \n Lillia A. \n 2w \n 7 \n \n \n Artist \n Brandon J. \n 2w \n 7 \n \n \n Manager \n Scott K. \n 1e \n 9 \n \n \n Manager \n Shirlee M. \n 1e \n 3 \n \n \n Manager \n Daria O. \n 2w \n 6 \n \n \n \n \n Find the number of Artists in the studio (without a  HAVING  clause) \n \n SELECT  role ,   COUNT ( * )   as  Number_of_artists\n FROM  employees\n WHERE  role  =   "Artist" ; \n \n 1 2 3 或 \n SELECT  role ,   COUNT ( * )   as  total  FROM  employees  group   by  role  HAVING  role  =   \'Artist\' ; \n \n 1 \n Find the number of Employees of each role in the studio \n \n SELECT  role ,   COUNT ( * )   as  Number_of_artists\n FROM  employees  group   by  role ; \n \n 1 2 \n Find the total number of years employed by all Engineers \n \n SELECT  Role ,   SUM ( Years_employed )   as  sum_year_employed  FROM  employees  where  role = \'Engineer\' ; \n \n 1 #  SQL Lesson 12: Order of execution of a Query \n 完整SQL语句： \n SELECT   DISTINCT   column ,  AGG_FUNC ( column_or_expression ) ,  …\n FROM  mytable\n     JOIN  another_table\n       ON  mytable . column   =  another_table . column \n     WHERE  constraint_expression\n     GROUP   BY   column \n     HAVING  constraint_expression\n     ORDER   BY   column   ASC / DESC \n     LIMIT  count  OFFSET  COUNT ; \n \n 1 2 3 4 5 6 7 8 9 #  Query order of execution(查询执行顺序) \n \n FROM  and  JOIN s \n WHERE \n GROUP BY \n HAVING \n SELECT \n DISTINCT \n ORDER BY \n LIMIT / OFFSET \n Exercise \n Table: Movies \n \n \n \n Id \n Title \n Director \n Year \n Length_minutes \n \n \n \n \n 1 \n Toy Story \n John Lasseter \n 1995 \n 81 \n \n \n 2 \n A Bug\'s Life \n John Lasseter \n 1998 \n 95 \n \n \n 3 \n Toy Story 2 \n John Lasseter \n 1999 \n 93 \n \n \n 4 \n Monsters, Inc. \n Pete Docter \n 2001 \n 92 \n \n \n 5 \n Finding Nemo \n Andrew Stanton \n 2003 \n 107 \n \n \n 6 \n The Incredibles \n Brad Bird \n 2004 \n 116 \n \n \n 7 \n Cars \n John Lasseter \n 2006 \n 117 \n \n \n 8 \n Ratatouille \n Brad Bird \n 2007 \n 115 \n \n \n 9 \n WALL-E \n Andrew Stanton \n 2008 \n 104 \n \n \n 10 \n Up \n Pete Docter \n 2009 \n 101 \n \n \n 11 \n Toy Story 3 \n Lee Unkrich \n 2010 \n 103 \n \n \n 12 \n Cars 2 \n John Lasseter \n 2011 \n 120 \n \n \n 13 \n Brave \n Brenda Chapman \n 2012 \n 102 \n \n \n 14 \n Monsters University \n Dan Scanlon \n 2013 \n 110 \n \n \n \n Table: Boxoffice \n \n \n \n Movie_id \n Rating \n Domestic_sales \n International_sales \n \n \n \n \n 5 \n 8.2 \n 380843261 \n 555900000 \n \n \n 14 \n 7.4 \n 268492764 \n 475066843 \n \n \n 8 \n 8 \n 206445654 \n 417277164 \n \n \n 12 \n 6.4 \n 191452396 \n 368400000 \n \n \n 3 \n 7.9 \n 245852179 \n 239163000 \n \n \n 6 \n 8 \n 261441092 \n 370001000 \n \n \n 9 \n 8.5 \n 223808164 \n 297503696 \n \n \n 11 \n 8.4 \n 415004880 \n 648167031 \n \n \n 1 \n 8.3 \n 191796233 \n 170162503 \n \n \n 7 \n 7.2 \n 244082982 \n 217900167 \n \n \n 10 \n 8.3 \n 293004164 \n 438338580 \n \n \n 4 \n 8.1 \n 289916256 \n 272900000 \n \n \n 2 \n 7.2 \n 162798565 \n 200600000 \n \n \n 13 \n 7.2 \n 237283207 \n 301700000 \n \n \n \n \n Find the number of movies each director has directed \n \n SELECT  Director ,   count ( * )   as  numberofmovies  FROM  movies  group   by  Director ; \n \n 1 \n Find the total domestic and international sales that can be attributed to each director \n \n SELECT  Director ,   count ( * )   as  NumOfMovie ,   sum ( Domestic_sales  +  International_sales )   FROM  movies  inner   join  Boxoffice  on  movies . id  =  Boxoffice . Movie_id  group   by  Director ; \n \n 1 #  SQL Lesson 13: Inserting rows \nInsert statement with values for all columns \n INSERT   INTO  mytable\n VALUES   ( value_or_expr ,  another_value_or_expr ,  … ) , \n        ( value_or_expr_2 ,  another_value_or_expr_2 ,  … ) , \n       … ; \n \n 1 2 3 4 5 # Insert statement with specific columns \n INSERT   INTO  mytable\n ( column ,  another_column ,  … ) \n VALUES   ( value_or_expr ,  another_value_or_expr ,  … ) , \n       ( value_or_expr_2 ,  another_value_or_expr_2 ,  … ) , \n      … ; \n \n 1 2 3 4 5 6 # Example Insert statement with expressions \n INSERT   INTO  boxoffice\n ( movie_id ,  rating ,  sales_in_millions ) \n VALUES   ( 1 ,   9.9 ,   283742034   /   1000000 ) ; \n \n 1 2 3 4 #  Exercise \n Table: Movies \n \n \n \n Id \n Title \n Director \n Year \n Length_minutes \n \n \n \n \n 1 \n Toy Story \n John Lasseter \n 1995 \n 81 \n \n \n 2 \n A Bug\'s Life \n John Lasseter \n 1998 \n 95 \n \n \n 3 \n Toy Story 2 \n John Lasseter \n 1999 \n 93 \n \n \n \n Table: Boxoffice \n \n \n \n Movie_id \n Rating \n Domestic_sales \n International_sales \n \n \n \n \n 3 \n 7.9 \n 245852179 \n 239163000 \n \n \n 1 \n 8.3 \n 191796233 \n 170162503 \n \n \n 2 \n 7.2 \n 162798565 \n 200600000 \n \n \n \n \n Add the studio\'s new production,  Toy Story 4  to the list of movies (you can use any director) \n \n INSERT   INTO  movies  VALUES   ( 4 ,   \'Toy Story 4\' ,   \'Jhon Lasseter\' ,   1998 ,   89 ) ; \n \n 1 \n Toy Story 4 has been released to critical acclaim! It had a rating of  8.7 , and made  340 million domestically  and  270 million internationally . Add the record to the  BoxOffice  table \n \n INSERT   INTO  boxoffice  VALUES   ( 4 ,   8.7 ,   34000000 ,   27000000 ) ; \n \n 1 #  SQL Lesson 14: Updating rows \n UPDATE   < mytable > \n SET   < column >   =   < value_or_expr > ,  \n     < other_column >   =   < another_value_or_expr > ,  \n    …\n WHERE  condition ; \n \n 1 2 3 4 5 #  Exercise \n Table: Movies \n \n \n \n Id \n Title \n Director \n Year \n Length_minutes \n \n \n \n \n 1 \n Toy Story \n John Lasseter \n 1995 \n 81 \n \n \n 2 \n A Bug\'s Life \n El Directore \n 1998 \n 95 \n \n \n 3 \n Toy Story 2 \n John Lasseter \n 1899 \n 93 \n \n \n 4 \n Monsters, Inc. \n Pete Docter \n 2001 \n 92 \n \n \n 5 \n Finding Nemo \n Andrew Stanton \n 2003 \n 107 \n \n \n 6 \n The Incredibles \n Brad Bird \n 2004 \n 116 \n \n \n 7 \n Cars \n John Lasseter \n 2006 \n 117 \n \n \n 8 \n Ratatouille \n Brad Bird \n 2007 \n 115 \n \n \n 9 \n WALL-E \n Andrew Stanton \n 2008 \n 104 \n \n \n 10 \n Up \n Pete Docter \n 2009 \n 101 \n \n \n 11 \n Toy Story 8 \n El Directore \n 2010 \n 103 \n \n \n 12 \n Cars 2 \n John Lasseter \n 2011 \n 120 \n \n \n 13 \n Brave \n Brenda Chapman \n 2012 \n 102 \n \n \n 14 \n Monsters University \n Dan Scanlon \n 2013 \n 110 \n \n \n \n \n The director for A Bug\'s Life is incorrect, it was actually directed by  John Lasseter \n \n UPDATE  movies  SET  director  =   \'John Lasseter\'   WHERE  title = "A Bug\'s Life" \n \n 1 \n The year that Toy Story 2 was released is incorrect, it was actually released in  1999 \n \n UPDATE  movies  SET   year   =   1999   WHERE  title = "Toy Story 2" ; \n \n 1 \n Both the title and director for Toy Story 8 is incorrect! The title should be "Toy Story 3" and it was directed by  Lee Unkrich \n \n UPDATE  movies  SET  title  =   "Toy Story 3" ,  director = "Lee Unkrich"   WHERE  title = "Toy Story 8" ; \n \n 1 #  SQL Lesson 15: Deleting rows \n DELETE   FROM   < mytable > \n WHERE  condition ; \n \n 1 2 #  Exercise \n Table: Movies \n \n \n \n Id \n Title \n Director \n Year \n Length_minutes \n \n \n \n \n 1 \n Toy Story \n John Lasseter \n 1995 \n 81 \n \n \n 2 \n A Bug\'s Life \n John Lasseter \n 1998 \n 95 \n \n \n 3 \n Toy Story 2 \n John Lasseter \n 1999 \n 93 \n \n \n 4 \n Monsters, Inc. \n Pete Docter \n 2001 \n 92 \n \n \n 5 \n Finding Nemo \n Andrew Stanton \n 2003 \n 107 \n \n \n 6 \n The Incredibles \n Brad Bird \n 2004 \n 116 \n \n \n 7 \n Cars \n John Lasseter \n 2006 \n 117 \n \n \n 8 \n Ratatouille \n Brad Bird \n 2007 \n 115 \n \n \n 9 \n WALL-E \n Andrew Stanton \n 2008 \n 104 \n \n \n 10 \n Up \n Pete Docter \n 2009 \n 101 \n \n \n 11 \n Toy Story 3 \n Lee Unkrich \n 2010 \n 103 \n \n \n 12 \n Cars 2 \n John Lasseter \n 2011 \n 120 \n \n \n 13 \n Brave \n Brenda Chapman \n 2012 \n 102 \n \n \n 14 \n Monsters University \n Dan Scanlon \n 2013 \n 110 \n \n \n \n \n The database needs to be cleaned up a little bit, so try and delete a few rows in the tasks below. \n \n DELETE   FROM  movies  WHERE   year   <   2005 ; \n \n 1 \n Andrew Stanton has also left the studio, so please remove all movies directed by him. \n \n DELETE   FROM  movies  WHERE  director = "Andrew Stanton" ; \n \n 1 #  SQL Lesson 16: Creating tables \n CREATE   TABLE   IF   NOT   EXISTS  mytable  ( \n     column  DataType TableConstraint  DEFAULT  default_value , \n    another_column DataType TableConstraint  DEFAULT  default_value , \n    …\n ) ; \n \n 1 2 3 4 5 #  Table data type \n \n \n \n Data type \n Description \n \n \n \n \n INTEGER ,  BOOLEAN \n The integer datatypes can store whole integer values like the count of a number or an age. In some implementations, the boolean value is just represented as an integer value of just 0 or 1. \n \n \n FLOAT ,  DOUBLE ,  REAL \n The floating point datatypes can store more precise numerical data like measurements or fractional values. Different types can be used depending on the floating point precision required for that value. \n \n \n CHARACTER(num_chars) ,  VARCHAR(num_chars) ,  TEXT \n The text based datatypes can store strings and text in all sorts of locales. The distinction between the various types generally amount to underlaying efficiency of the database when working with these columns.Both the CHARACTER and VARCHAR (variable character) types are specified with the max number of characters that they can store (longer values may be truncated), so can be more efficient to store and query with big tables. \n \n \n DATE ,  DATETIME \n SQL can also store date and time stamps to keep track of time series and event data. They can be tricky to work with especially when manipulating data across timezones. \n \n \n BLOB \n Finally, SQL can store binary data in blobs right in the database. These values are often opaque to the database, so you usually have to store them with the right metadata to requery them. \n Exercise \n \n \n Create a new table named  Database  with the following columns: \n \n Name  A string (text) describing the name of the database \n Version  A number (floating point) of the latest version of this database \n Download_count  An integer count of the number of times this database was downloaded \n \n This table has no constraints. \n \n \n create   table   if   not   exists   database   ( \n    name  TEXT , \n    version  FLOAT , \n    download_count ,   INTEGER \n ) \n \n 1 2 3 4 5 #  SQL Lesson 17: Altering tables \n As your data changes over time, SQL provides a way for you to update your corresponding tables and database schemas by using the  ALTER TABLE  statement to add, remove, or modify  columns  and  table constraints . \nAltering table to add new column(s) \n ALTER   TABLE   < mytable > \n ADD   < column >   < DataType OptionalTableConstraint > \n     DEFAULT   < default_value > ; \n \n 1 2 3 4 # Altering table to remove column(s) \n ALTER   TABLE   < mytable > \n DROP   < column_to_be_deleted > ; \n \n 1 2 3 # Altering table name \n ALTER   TABLE   < mytable > \n RENAME   TO   < new_table_name > ; \n \n 1 2 3 #  Exercise \n Table: Movies \n \n \n \n Id \n Title \n Director \n Year \n Length_minutes \n \n \n \n \n 1 \n Toy Story \n John Lasseter \n 1995 \n 81 \n \n \n 2 \n A Bug\'s Life \n John Lasseter \n 1998 \n 95 \n \n \n 3 \n Toy Story 2 \n John Lasseter \n 1999 \n 93 \n \n \n 4 \n Monsters, Inc. \n Pete Docter \n 2001 \n 92 \n \n \n 5 \n Finding Nemo \n Andrew Stanton \n 2003 \n 107 \n \n \n 6 \n The Incredibles \n Brad Bird \n 2004 \n 116 \n \n \n 7 \n Cars \n John Lasseter \n 2006 \n 117 \n \n \n 8 \n Ratatouille \n Brad Bird \n 2007 \n 115 \n \n \n 9 \n WALL-E \n Andrew Stanton \n 2008 \n 104 \n \n \n 10 \n Up \n Pete Docter \n 2009 \n 101 \n \n \n 11 \n Toy Story 3 \n Lee Unkrich \n 2010 \n 103 \n \n \n 12 \n Cars 2 \n John Lasseter \n 2011 \n 120 \n \n \n 13 \n Brave \n Brenda Chapman \n 2012 \n 102 \n \n \n 14 \n Monsters University \n Dan Scanlon \n 2013 \n 110 \n \n \n \n \n Add a column named  Aspect_ratio  with a  FLOAT  data type to store the aspect-ratio each movie was released in. \n \n ALTER   TABLE  movies  ADD  Aspect_ratio  float   DEFAULT   8.5 ; \n \n 1 \n Add another column named  Language  with a  TEXT  data type to store the language that the movie was released in. Ensure that the default for this language is  English . \n \n ALTER   TABLE  movies  ADD   Language   TEXT   DEFAULT   \'English\' ; \n \n 1 #  SQL Lesson 18: Dropping tables \nDrop table statement \n DROP   TABLE   IF   EXISTS   < mytable > ; \n \n 1 2 #  Exercise \n Table: Movies \n \n \n \n Id \n Title \n Director \n Year \n Length_minutes \n \n \n \n \n 1 \n Toy Story \n John Lasseter \n 1995 \n 81 \n \n \n 2 \n A Bug\'s Life \n John Lasseter \n 1998 \n 95 \n \n \n 3 \n Toy Story 2 \n John Lasseter \n 1999 \n 93 \n \n \n 4 \n Monsters, Inc. \n Pete Docter \n 2001 \n 92 \n \n \n 5 \n Finding Nemo \n Andrew Stanton \n 2003 \n 107 \n \n \n 6 \n The Incredibles \n Brad Bird \n 2004 \n 116 \n \n \n 7 \n Cars \n John Lasseter \n 2006 \n 117 \n \n \n 8 \n Ratatouille \n Brad Bird \n 2007 \n 115 \n \n \n 9 \n WALL-E \n Andrew Stanton \n 2008 \n 104 \n \n \n 10 \n Up \n Pete Docter \n 2009 \n 101 \n \n \n 11 \n Toy Story 3 \n Lee Unkrich \n 2010 \n 103 \n \n \n 12 \n Cars 2 \n John Lasseter \n 2011 \n 120 \n \n \n 13 \n Brave \n Brenda Chapman \n 2012 \n 102 \n \n \n 14 \n Monsters University \n Dan Scanlon \n 2013 \n 110 \n \n \n \n Table: Boxoffice (Read-Only) \n \n \n \n Movie_id \n Rating \n Domestic_sales \n International_sales \n \n \n \n \n 5 \n 8.2 \n 380843261 \n 555900000 \n \n \n 14 \n 7.4 \n 268492764 \n 475066843 \n \n \n 8 \n 8 \n 206445654 \n 417277164 \n \n \n 12 \n 6.4 \n 191452396 \n 368400000 \n \n \n 3 \n 7.9 \n 245852179 \n 239163000 \n \n \n 6 \n 8 \n 261441092 \n 370001000 \n \n \n 9 \n 8.5 \n 223808164 \n 297503696 \n \n \n 11 \n 8.4 \n 415004880 \n 648167031 \n \n \n 1 \n 8.3 \n 191796233 \n 170162503 \n \n \n 7 \n 7.2 \n 244082982 \n 217900167 \n \n \n 10 \n 8.3 \n 293004164 \n 438338580 \n \n \n 4 \n 8.1 \n 289916256 \n 272900000 \n \n \n 2 \n 7.2 \n 162798565 \n 200600000 \n \n \n 13 \n 7.2 \n 237283207 \n 301700000 \n \n \n \n \n We\'ve sadly reached the end of our lessons, lets clean up by removing the  Movies  table \n \n DROP   TABLE   IF   EXISTS  movies ; \n \n 1 \n And drop the  BoxOffice  table as well \n \n DROP   TABLE   IF   EXISTS  BoxOffice ; \n \n 1 #  最后 \n 到这SQL语言算简单入门，还需多加练习。 \n 另外SQLBolt还有其他两篇文章： \n \n SQL Topic: Subqueries \n SQL Topic: Unions, Intersections & Exceptions \n \n ',summary:"\n前言\n\n国庆节在家学习了一下SQL语言，主要是通过阮一峰老师在周刊推荐的网站SQLBolt。一共18节小课，每一节都有对应的练习题，相对来说比较简单，适合入门。\n\nSQL Lesson 1: SELECT queries\n\nSelect query for a specific columns\nSELECT , , …\nFROM ;\n\nSelect query for all columns\nSELECT *\nFROM ;\n\nExercise\n\nTable: Movies\n\n| Id   | Title               | Director       | Year | Leng ...",id:"post",pid:"post",readingTime:{text:"33 min read",minutes:32.765,time:1965900,words:6553}},{title:"Node.js中的console.log()输出彩色字体",frontmatter:{title:"Node.js中的console.log()输出彩色字体",description:"Node.js中的console.log()输出彩色字体",date:"2021-10-26",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20211026161432.png",tags:["其他"],meta:[{name:"title",content:"Node.js中的console.log()输出彩色字体"},{name:"description",content:"Node.js中的console.log()输出彩色字体"},{name:"keywords",content:"node, console, 彩色文字"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2021-10-26-node-color-console.html",relativePath:"_posts/2021-10-26-node-color-console.md",key:"v-a2944974",path:"/2021/10/26/node-color-console/",headers:[{level:2,title:"前言",slug:"前言"},{level:2,title:"简介",slug:"简介"},{level:2,title:"颜色参数",slug:"颜色参数"},{level:3,title:"常用颜色",slug:"常用颜色"},{level:3,title:"RGB模式",slug:"rgb模式"},{level:3,title:"256模式",slug:"_256模式"},{level:2,title:"SRG控制参数",slug:"srg控制参数"},{level:2,title:"参考文章",slug:"参考文章"}],lastUpdated:"10/26/2021, 8:21:23 AM",content:" Node.js中的console.log()输出彩色字体 \n 前言 \n 最近在写脚本的时候发现在控制台输出的信息不够显眼，比较单调。但是又没必要为了这一个小需求再引入一个第三方库（ chalk ），于是就想着研究一下控制台输出彩色字体的原理是什么。 \n \n 请注意，此篇文章中的颜色仅适用于仿真器（putty、secureCRT、XShell），以及unix终端，不适用于 CMD (但依然可用于WIN下的仿真器) \n 简介 \n \n 在终端或仿真器中输入下面的代码，并回车，预览最直接的效果。 \n echo   -e  \" \\033 [1;31mI ♡  You  \\e [0m\" \n \n 1 \n 请注意，引号内的 \\e 等同于 \\033 ； \\033 、 \\x1b 和 \\e 效果是一样，对应键盘左上角Esc键对应的 ASCII码 （8进制）； \n 在nodeJS环境下只有 \\033 和 \\x1b 生效。 \n \n console . log ( '\\x1b[1;31;46mI ♡  You \\033[0m' ) ; \nconsole . log ( '\\033[31;43mI ♡  You \\x1b[0m' ) ; \n \n 1 2 控制台输出为： \n \n 通用的控制文本颜色的转义序列格式如下： \n CSI n1[;n2[;..]]m\n \n 1 其中CSI全称为『控制序列引导器』（Control Sequence Introducer/Initiator），也就是上述示例中的 \\033[ （其中 \\033 是键盘左上角Esc键对应的Ascii码（八进制））； \n n1、n2等表示SGR参数（下面会列出一些常用的SGR参数），用于控制颜色、粗体、斜体、闪烁等文本输出格式；m表示转义序列结束。 \n 颜色参数 \n 常用颜色 \n 格式：\\033[显示方式;前景色;背景色m\n\n说明：\n前景色            背景色           颜色\n---------------------------------------\n30                40              黑色\n31                41              红色\n32                42              绿色\n33                43              黃色\n34                44              蓝色\n35                45              紫红色\n36                46              青蓝色\n37                47              白色\n\n显示方式           意义\n-------------------------\n0                终端默认设置\n1                高亮/加粗显示\n4                使用下划线\n5                闪烁\n7                反白显示\n8                不可见\n\n例子：\n\\033[1;31;40m    \x3c!--1-高亮显示 31-前景色红色  40-背景色黑色--\x3e\n\\033[0m          \x3c!--采用终端默认设置，即取消颜色设置--\x3e\n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 什么是前景色？什么是背景色呢？看下图 \n \n 在这可以把前景色理解为字体的颜色。 \n RGB模式 \n \n 使用方式： \n ESC[ … 38;2;<r>;<g>;<b> … m Select RGB foreground color\nESC[ … 48;2;<r>;<g>;<b> … m Select RGB background color\n \n 1 2 \n 注意：此处用法 2 代表 RGB 模式，后面3位为RGB的数值；38代表开始设置 前景色 ；48代表开始设置 背景色 \n \n 举个栗子： \n console . log ( '\\033[1;38;2;0;0;255;48;2;255;255;0mI ♡  You \\x1b[0m' ) ; \n \n 1 1 代表高亮（加粗）； 38;2;0;0;255 表示设置蓝色前景色； 48;2;255;255;0 表示设置黄色背景色； m 表示结束； \n 256模式 \n \n 使用方式： \n ESC[ … 38;5;<n> … m Select foreground color\nESC[ … 48;5;<n> … m Select background color\n \n 1 2 \n 注意：此处用法 5 代表 256 模式；38代表开始设置 前景色 ；48代表开始设置 背景色 \n \n 举个栗子： \n console . log ( '\\033[1;38;5;226;48;5;201mI ♡  You \\x1b[0m' ) ; \n \n 1 1 代表高亮（加粗）； 38;5;226 表示设置226号前景色； 48;5;201 表示设置201背景色； m 表示结束； \n SRG控制参数 \n | 0  |   \t关闭所有格式，还原为初始状态\n| 1  |    粗体/高亮显示 \n| 2  |    模糊（※)\t\n| 3  |    斜体（※） \n| 4  |    下划线（单线）  \n| 5  |    闪烁（慢） \n| 6  |    闪烁（快）（※）  \n| 7  |    交换背景色与前景色   \n| 8  |    隐藏（伸手不见五指，啥也看不见）（※）\n \n 1 2 3 4 5 6 7 8 9 \n \n 其中含有（※）标注的编码表示不是所有的终端仿真器都支持，只有少数仿真器支持。 \n 多个SGR参数可以组合使用，例如：echo -e \"\\x1b[31;4mRed Underline Text\\e[0m\"输出红色下划线字体“Red Underline Text”。 \n \n \n 举个栗子： \n console . log ( '\\033[1;3;38;5;226;48;5;201mI ♡  You \\x1b[0m' ) ; \nconsole . log ( '\\033[1;3;7;38;5;226;48;5;201mI ♡  You \\x1b[0m' ) ; \n \n 1 2 \n 参考文章 \n \n 控制台输出颜色控制 \n 使Node.js中的console.log()输出彩色字体 \n \n ",summary:'\n前言\n\n最近在写脚本的时候发现在控制台输出的信息不够显眼，比较单调。但是又没必要为了这一个小需求再引入一个第三方库（chalk），于是就想着研究一下控制台输出彩色字体的原理是什么。\n\n> 请注意，此篇文章中的颜色仅适用于仿真器（putty、secureCRT、XShell），以及unix终端，不适用于CMD(但依然可用于WIN下的仿真器)\n\n简介\n\n在终端或仿真器中输入下面的代码，并回车，预览最直接的效果。\n\necho  -e "\\033[1;31mI ♡  You \\e[0m"\n\n> 请注意，引号内的\\e等同于\\033；\\033、\\x1b和\\e效果是一样，对应键盘左上角Esc键对应的ASC ...',id:"post",pid:"post",readingTime:{text:"2 min read",minutes:1.245,time:74700,words:249}},{title:"单向加密&双向加密",frontmatter:{title:"单向加密&双向加密",description:"单向加密、双向加密",date:"2021-11-11",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210929161341.png",tags:["密码学"],meta:[{name:"title",content:"单向加密、双向加密"},{name:"description",content:"单向加密、双向加密"},{name:"keywords",content:"单向加密, 双向加密, 对称加密, 非对称加密"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2021-11-11-encryption.html",relativePath:"_posts/2021-11-11-encryption.md",key:"v-3ee7d4ba",path:"/2021/11/11/encryption/",headers:[{level:2,title:"前言",slug:"前言"},{level:2,title:"单向加密",slug:"单向加密"},{level:2,title:"双向加密",slug:"双向加密"},{level:3,title:"对称加密",slug:"对称加密"},{level:3,title:"非对称加密",slug:"非对称加密"},{level:3,title:"加密工具",slug:"加密工具"},{level:2,title:"参考文章",slug:"参考文章"}],lastUpdated:"11/11/2021, 1:50:30 PM",content:" 单向加密、双向加密 \n 前言 \n 在之前的文章 Web页面子资源完整性校验详细指南 有涉及到将文件进行sha384加密后base64编码来检验文件是否被篡改。对其中用到的工具openssl比较感兴趣，所以顺带了解了加密算法，算是加密算法的一些常识。 \n 以下为正文。 \n 加密算法一般可分为两种，即 单向加密算法 和 双向加密算法 。 \n 双向加密是加密算法中最常用的，它将可以直接理解的明文数据加密为不可直接理解的密文数据，在需要的时候，又可以使用一定的算法将这些加密以后的密文数据解密为原来的明文数据。双向加密适合于隐秘通讯，比如，比如在网络上注册用户或者购买商品时，提交的真实姓名、身份证号码、银行账号、信用卡密码等信息，应当通过双向加密算法加密以后，再在网络上传输，这样，可以有效的防止黑客的“偷听”，保证数据的安全，同时，网站接收到我们的数据以后，可以通过解密算法来获得准确的信息。 \n 双向加密既可以加密，又可以解密。而单向加密则刚好相反，它只能对明文数据进行加密，而不能对加密了的密文数据再解密成原来的明文数据。可能读者会认为，不能解密的加密算法有什么作用呢？在实际应用中，对软件系统数据库中的系统用户信息（如用户密码）加密，就是一个典型的例子。当用户注册一个新的账号时，其用户密码信息不是直接保存到数据库，而是经过单向加密后再保存，这样，即使这些账号信息被泄露，别人也不能得到相应的用户密码，当然也就达不到盗窃账号的目的。 \n 也许，有的读者会想，既然单向加密无法解密，那用户一旦忘记了密码，几乎没有办法找回原来的密码，又该怎么办呢？这确实是一个比较麻烦的问题，如果是一个功能简单的软件系统，也许真的只能删除忘记密码的账号信息，然后再重新注册来解决。但是比较完善的软件系统，一般都可以让用户提供一些其他的注册信息，如出生地址、父母妻子的职业等，如果正确，则直接给用户提供修改密码的功能，然后用新密码替换掉数据库中的旧密码，这样，用户只要记住新的用户密码就可以了。 \n 单向加密 \n 常用的单向加密有: \n \n MD5：MD5严格意义上来说，不是编码也不是加密，而是摘要算法，也叫做哈希算法和散列算法， 它的典型应用是：防止篡改和校验数据 。无论是多长的输入，MD5都会输出长度为128bits的一个串 (通常用16进制表示为32个字符)。需要注意的是：摘要算法是不可以逆的。通过加密后的数据是不能得到原始数据的。 \n SHA: Secure Hash Algorithm，安全散列算法，数字签名等密码学应用中重要的工具，被广泛地应用于电子商务等信息安全领域。虽然SHA与MD5通过碰撞法都被破解了，但是SHA仍然是公认的安全加密算法，较之MD5更为安全。 \n HMAC：Hash Message Authentication Code，散列消息鉴别码，基于密钥的Hash算法的认证协议。消息鉴别码实现鉴别的原理是，用公开函数和密钥产生一个固定长度的值作为认证标识，用这个标识鉴别消息的完整性。使用一个密钥生成一个固定大小的小数据块，即MAC，并将其加入到消息中，然后传输。接收方利用与发送方共享的密钥进行鉴别认证等。 \n \n 单向加密算法特征： \n \n 输入一样，输出必然相同 \n 雪崩效应：输入的微小改变，将引起结果巨大的变化 \n 定长输出，无论原始数据多大，结果大小都是相同的 \n 不可逆，无法根据特征码还原原来的数据 \n \n 加密工具：md5sum、sha1sum、openssl dgst \n 双向加密 \n 双向加密又分 对称加密 和 非对称加密 。 \n 对称加密 \n 采用单钥密码系统的加密方法，同一个密钥可以同时用作信息的加密和解密，这种加密方法称为对称加密，也称为单密钥加密。 \n \n \n 常用的对称加密有： \n \n DES(Data Encryption Standard)：数据加密标准，速度较快，适用于加密大量数据的场合 \n IDEA(国际数据加密算法) \n 3DES：是基于DES，对一块数据用三个不同的密钥进行三次加密，强度更高 \n AES :（Advanced Encryption Standard）：高级加密标准，是下一代的加密算法标准，速度快，安全级别高 \n \n \n \n 对称加密算法特征： \n \n 加密方和解密方使用同一个密钥 \n 加密解密的速度比较快，适合数据比较长时的使用 \n 密钥传输的过程不安全，且容易被破解 \n 非对称加密 \n \n \n 常见的非对称加密算法有 \n \n RSA：RSA是第一个既能用于数据加密也能用于数字签名的算法。它易于理解和操作，也很流行。算法的名字以发明者的名字命名：Ron Rivest, Adi Shamir 和Leonard Adleman \n \n \n 后续会看一下RAS的加密原理 \n \n \n ECC（移动设备用）：椭圆曲线密码编码学 \n El Gamal ： ElGamal 加密算法是一个基于 迪菲-赫尔曼密钥交换(Diffie–Hellman key exchange) 的 非对称加密 算法 \n DSA（数字签名用）：数字签名算法，是一种标准的 DSS（数字签名标准） \n \n \n \n 第六届国际密码学会议对应用于公钥密码系统的加密算法推荐了两种：基于大整数因子分解问题（IFP）的RSA算法和基于椭圆曲线上离散对数计算问题（ECDLP）的ECC算法。 \n RSA算法的特点之一是数学原理简单、在工程应用中比较易于实现，但它的单位安全强度相对较低。用国际上公认的对于RSA算法最有效的攻击方法--一般数域筛(NFS)方法去破译和攻击RSA算法，它的破译或求解难度是亚指数级的。 \n ECC算法的数学理论非常深奥和复杂，在工程应用中比较难于实现，但它的单位安全强度相对较高。用国际上公认的对于ECC算法最有效的攻击方法--Pollard rho方法去破译和攻击ECC算法，它的破译或求解难度基本上是指数级的。正是由于RSA算法和ECC算法这一明显不同，使得ECC算法的单位安全强度高于RSA算法，也就是说，要达到同样的安全强度，ECC算法所需的密钥长度远比RSA算法低。这就有效地解决了为了提高安全强度必须增加密钥长度所带来的工程实现难度的问题。 \n \n 非对称加密算法特征\n \n 秘钥对，公钥(public key)和私钥(secret key) \n 公钥加密，私钥解密；私钥加密，公钥解密 \n \n \n \n 由于公钥使用的密钥长度非常长，所以公钥加密速度非常慢，一般不使用其去加密。 \n 某一个用户用其私钥加密，其他用户用其公钥解密，实现数字签名的作用。 \n 公钥加密的另一个作用是实现密钥交换。 \n 由于非对称加密算法的运行速度比对称加密算法的速度慢很多，当我们需要加密大量的数据时，建议采用对称加密算法，提高加解密速度。对称加密算法不能实现签名，因此签名只能非对称算法。由于对称加密算法的密钥管理是一个复杂的过程，密钥的管理直接决定着他的安全性，因此当数据量很小时，我们可以考虑采用非对称加密算法。 \n 在实际的操作过程中，我们通常采用的方式是：采用非对称加密算法管理对称算法的密钥，然后用对称加密算法加密数据，这样我们就集成了两类加密算法的优点，既实现了加密速度快的优点，又实现了安全方便管理密钥的优点。 \n 加密工具 \n \n openssl \n gpg \n 参考文章 \n \n 单向加密双向加密简要汇总 \n 加密算法根据应用场景的分类：单向加密和双向加密 \n 单向散列加密，对称加密，非对称加密 \n \n ",summary:"\n前言\n\n在之前的文章Web页面子资源完整性校验详细指南有涉及到将文件进行sha384加密后base64编码来检验文件是否被篡改。对其中用到的工具openssl比较感兴趣，所以顺带了解了加密算法，算是加密算法的一些常识。\n\n以下为正文。\n\n加密算法一般可分为两种，即单向加密算法和双向加密算法。\n\n双向加密是加密算法中最常用的，它将可以直接理解的明文数据加密为不可直接理解的密文数据，在需要的时候，又可以使用一定的算法将这些加密以后的密文数据解密为原来的明文数据。双向加密适合于隐秘通讯，比如，比如在网络上注册用户或者购买商品时，提交的真实姓名、身份证号码、银行账号、信用卡密码等信息，应当通过双向加 ...",id:"post",pid:"post",readingTime:{text:"1 min read",minutes:.61,time:36600,words:122}},{title:"RSA算法原理之数论知识",frontmatter:{title:"RSA算法原理之数论知识",description:"RSA算法原理之数论知识",date:"2021-11-14",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20211112172200.jpg",tags:["密码学"],meta:[{name:"title",content:"RSA算法原理"},{name:"description",content:"RSA算法原理之数论知识"},{name:"keywords",content:"RSA算法原理, 数论知识"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2021-11-14-RSA-1.html",relativePath:"_posts/2021-11-14-RSA-1.md",key:"v-ca70ce04",path:"/2021/11/14/rsa-1/",headers:[{level:2,title:"一点历史",slug:"一点历史"},{level:2,title:"互质关系",slug:"互质关系"},{level:2,title:"欧拉函数",slug:"欧拉函数"},{level:2,title:"欧拉定理",slug:"欧拉定理"},{level:2,title:"模反元素",slug:"模反元素"}],lastUpdated:"11/14/2021, 12:34:08 PM",content:' RSA算法原理(一)之数论知识 \n 本文转载与阮一峰老师的 RSA算法原理（一） \n 正文开始！ \n \n 如果你问我，哪一种 算法 最重要？ \n 我可能会回答 "公钥加密算法" 。 \n 因为它是计算机通信安全的基石，保证了加密数据不会被破解。你可以想象一下，信用卡交易被破解的后果。 \n 进入正题之前，我先简单介绍一下，什么是"公钥加密算法"。 \n 一点历史 \n 1976年以前，所有的加密方法都是同一种模式： \n \n \n 甲方选择某一种加密规则，对信息进行加密； \n 乙方使用同一种规则，对信息进行解密。 \n \n \n 由于加密和解密使用同样规则（简称"密钥"），这被称为 "对称加密算法" （Symmetric-key algorithm）。 \n 这种加密模式有一个最大弱点：甲方必须把加密规则告诉乙方，否则无法解密。保存和传递密钥，就成了最头疼的问题。 \n \n 1976年，两位美国计算机学家Whitfield Diffie 和 Martin Hellman，提出了一种崭新构思，可以在不直接传递密钥的情况下，完成解密。这被称为 "Diffie-Hellman密钥交换算法" 。这个算法启发了其他科学家。人们认识到，加密和解密可以使用不同的规则，只要这两种规则之间存在某种对应关系即可，这样就避免了直接传递密钥。 \n 这种新的加密模式被称为"非对称加密算法"。 \n \n \n 乙方生成两把密钥（公钥和私钥）。公钥是公开的，任何人都可以获得，私钥则是保密的。 \n 甲方获取乙方的公钥，然后用它对信息加密。 \n 乙方得到加密后的信息，用私钥解密。 \n \n \n 如果公钥加密的信息只有私钥解得开，那么只要私钥不泄漏，通信就是安全的。 \n \n 1977年，三位数学家Rivest、Shamir 和 Adleman 设计了一种算法，可以实现非对称加密。这种算法用他们三个人的名字命名，叫做 RSA算法 。从那时直到现在，RSA算法一直是最广为使用的"非对称加密算法"。毫不夸张地说，只要有计算机网络的地方，就有RSA算法。 \n 这种算法非常 可靠 ，密钥越长，它就越难破解。根据已经披露的文献，目前被破解的最长RSA密钥是768个二进制位。也就是说，长度超过768位的密钥，还无法破解（至少没人公开宣布）。因此可以认为，1024位的RSA密钥基本安全，2048位的密钥极其安全。 \n 下面，我就进入正题，解释RSA算法的原理。文章共分成两部分，今天是第一部分，介绍要用到的四个数学概念。你可以看到，RSA算法并不难，只需要一点 数论知识 就可以理解。 \n 互质关系 \n 如果两个正整数，除了1以外，没有其他公因子，我们就称这两个数是 互质关系 （coprime）。比如，15和32没有公因子，所以它们是互质关系。这说明，不是质数也可以构成互质关系。 \n \n 质数是指在大于1的自然数中，除了1和它本身以外不再有其他因数的自然数。 \n \n 关于互质关系，不难得到以下结论： \n \n 任意两个质数构成互质关系，比如13和61 \n 一个数是质数，另一个数只要不是前者的倍数，两者就构成互质关系，比如3和10 \n 如果两个数之中，较大的数是质数，则两者构成互质关系，比如97和57 \n 1和任意一个自然数都是互质关系，比如1和99 \n p是大于1的整数，则p和p-1构成互质关系，比如57和56 \n p是大于1个奇数，则p和p-2构成互质关系，比如17和15 \n 欧拉函数 \n 请思考以下问题： \n \n 任意给定正整数n，请问在 小于等于 n的正整数之中，有多少个与n构成互质关系？（比如，在1到8之中，有多少个数与8构成互质关系？） \n \n 计算这个值的方法就叫做 欧拉函数 ，以 表示。在1到8之中，与8形成互质关系的是1、3、5、7，所以 。 \n 的计算方法并不复杂，但是为了得到最后那个公式，需要一步步讨论。 \n \n 第一种情况 \n \n 如果 ，则  。因为1与任何数（包括自身）都构成互质关系。 \n \n 第二种情况 \n \n 如果 是质数，则   。因为质数与小于它的每一个数，都构成互质关系。比如5与1、2、3、4都构成互质关系。 \n \n 第三中情况 \n \n 如果 是质数的某一个次方，即   (p为质数，k为大于等于1的整数)，则\n \n比如  。 \n 这是因为只有当一个数不包含质数p，才可能与n互质。而包含质数p的数一共有 个，即 、 、 、 、 ，把它们去除，剩下的就是与n互质的数。 \n 上面的式子还可以写成下面的形式：\n \n可以看出，上面的第二种情况是 k=1 时的特例。 \n \n 第四种情况 \n \n 如果n可以分解成两个 互质 的整数之积，\n \n则\n \n即积的欧拉函数等于各个因子的欧拉函数之积。比如， 。 \n 这一条的证明要用到 "中国剩余定理" ，这里就不展开了，只简单说一下思路：如果a与 互质(a< )，b与 互质(b< )，c与 互质(c< )，则c与数对 (a,b) 是一一对应关系。由于a的值有 种可能，b的值有 种可能，则数对 (a,b) 有 种可能，而c的值有 种可能，所以 就等于 。 \n \n 第五种情况 \n \n 因为任意一个大于1的正整数，都可以写成一系列质数的积。\n \n根据第4条的结论，得到\n \n再根据第3条的结论， 得到 \n \n也就等于\n \n这就是欧拉函数的通用计算公式。比如，1323的欧拉函数，计算过程如下:\n 欧拉定理 \n 欧拉函数的用处，在于 欧拉定理 。"欧拉定理"指的是： \n \n 如果两个正整数a和n互质，则n的欧拉函数   可以让下面的等式成立：\n \n \n 也就是说，a的 次方被n除的余数为1。或者说，a的 次方减去1，可以被n整除。比如，3和7互质，而7的欧拉函数 等于6，所以3的6次方（729）减去1，可以被7整除（728/7=104）。 \n 欧拉定理的证明比较复杂，这里就省略了。我们只要记住它的结论就行了。 \n 欧拉定理可以大大简化某些运算。比如，7和10互质，根据欧拉定理，\n \n已知 ，所以马上得到7的4倍数次方的个位数肯定是1。\n \n欧拉定理有一个特殊情况。 \n \n 假设正整数a与质数p互质，因为质数p的 等于p-1，则欧拉定理可以写成:\n \n \n 这就是著名的 费马小定理 。它是欧拉定理的特例。 \n 欧拉定理是RSA算法的核心。理解了这个定理，就可以理解RSA。 \n 模反元素 \n 还剩下最后一个概念： \n \n 如果两个正整数a和n互质，那么一定可以找到整数b，使得 ab-1 被n整除，或者说ab被n除的余数是1。\n \n这时，b就叫做a的 "模反元素" 。 \n \n 比如，3和11互质，那么3的模反元素就是4，因为 (3 × 4)-1 可以被11整除。显然，模反元素不止一个， 4加减11的整数倍都是3的模反元素 {...,-18,-7,4,15,26,...}，即如果b是a的模反元素，则 b+kn 都是a的模反元素。 \n 欧拉定理可以用来证明模反元素必然存在。\n \n可以看到，a的   次方，就是a的模反元素。 \n ========================================== \n 好了，需要用到的数学工具，全部介绍完了。RSA算法涉及的数学知识，就是上面这些，下一次我就来介绍公钥和私钥到底是怎么生成的。 \n ',summary:'\n\n本文转载与阮一峰老师的RSA算法原理（一）\n\n正文开始！\n\n如果你问我，哪一种算法最重要？\n\n我可能会回答"公钥加密算法"。\n\n因为它是计算机通信安全的基石，保证了加密数据不会被破解。你可以想象一下，信用卡交易被破解的后果。\n\n进入正题之前，我先简单介绍一下，什么是"公钥加密算法"。\n\n一点历史\n\n1976年以前，所有的加密方法都是同一种模式：\n\n> 1. 甲方选择某一种加密规则，对信息进行加密；\n> 2. 乙方使用同一种规则，对信息进行解密。\n\n由于加密和解密使用同样规则（简称"密钥"），这被称为"对称加密算法"（Symmetric-key algorithm）。\n\n这种加密模式有一个最 ...',id:"post",pid:"post",readingTime:{text:"1 min read",minutes:1.005,time:60300,words:201}},{title:"RSA加密原理（二）",frontmatter:{title:"RSA加密原理（二）",description:"RSA加密原理（二）",date:"2021-11-17",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20211116185428.png",tags:["密码学"],meta:[{name:"title",content:"RSA算法原理"},{name:"description",content:"RSA算法原理"},{name:"keywords",content:"RSA算法原理, 数论知识"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2021-11-17-RSA-2.html",relativePath:"_posts/2021-11-17-RSA-2.md",key:"v-e727f904",path:"/2021/11/17/rsa-2/",headers:[{level:2,title:"密钥生成的步骤",slug:"密钥生成的步骤"},{level:2,title:"RSA算法的可靠性",slug:"rsa算法的可靠性"},{level:2,title:"加密和解密",slug:"加密和解密"},{level:2,title:"私钥解密证明",slug:"私钥解密证明"}],lastUpdated:"11/17/2021, 12:38:52 PM",content:' RSA加密原理（二） \n 本文转载与阮一峰老师的 RSA算法原理（二） \n 正文开始！ \n \n 上一次，我介绍了一些 数论知识 。 \n 有了这些知识，我们就可以看懂 RSA算法 。这是目前地球上最重要的加密算法。 \n 密钥生成的步骤 \n 我们通过一个例子，来理解RSA算法。假设 爱丽丝 要与鲍勃进行加密通信，她该怎么生成公钥和私钥呢？ \n \n \n \n 第一步，随机选择两个不想等的质数p和q。 \n 爱丽丝选择了61和53。（实际应用中，这两个质数越大，就越难破解。） \n \n \n 第二步，计算p和q的乘积n。 \n 爱丽丝就把61和53相乘。\n \nn的长度就是密钥长度。3233写成二进制是110010100001，一共有12位，所以这个密钥就是12位。实际应用中，RSA密钥一般是1024位，重要场合则为2048位。 \n \n \n 第三步，计算n的欧拉函数 \n 根据公式：\n \n爱丽丝算出 等于 ，即3120。 \n \n \n 第四步，随机选择一个整数e，条件是 ，且e与 互质。 \n 爱丽丝就在1到3120之间，随机选择了17。（实际应用中，常常选择65537。） \n \n \n 第五步，计算e对于 的模反元素（也叫做乘法逆元）d。 \n 所谓 "模反元素" 就是指有一个整数d，可以使得ed被φ(n)除的余数为1。\n \n这个式子等价于\n \n于是，找到模反元素d，实质上就是对下面这个二元一次方程求解。\n \n已知e=17， ，\n \n这个方程可以用 "扩展欧几里得算法" 求解，此处省略具体过程。总之，爱丽丝算出一组整数解为 (x,y)=(2753,-15)，即 d=2753。 \n 至此所有计算完成。 \n \n \n \n 关于欧几里得算法和扩展欧几里得算法、不定方程（也叫做丢番图方程）会单独写一篇文章来学习讨论。 \n \n \n \n 第六步，将n和e封装成公钥，n和d封装层私钥。 \n 在爱丽丝的例子中，n=3233，e=17，d=2753，所以公钥就是 (3233,17)，私钥就是（3233, 2753）。 \n 实际应用中，公钥和私钥的数据都采用 ASN.1 格式表达。 \n RSA算法的可靠性 \n 回顾上面的密钥生成步骤，一共出现六个数字： \n 和 是 选 取 的 两 个 不 想 等 的 质 数 ； \n 是 和 的 乘 积 \n 是 的 欧 拉 函 数 ， 也 就 是 在 的 正 整 数 中 与 互 质 的 正 整 数 的 个 数 \n 是 在 ， 且 与 互 质 的 随 机 整 数 ； 是 对 于 的 模 反 元 素 。 \n这六个数字之中，公钥用到了两个（n和e），其余四个数字都是不公开的。其中最关键的是d，因为n和d组成了私钥，一旦d泄漏，就等于私钥泄漏。 \n 那么，有无可能在已知n和e的情况下，推导出d？ \n (1).  。只有知道e和 ，才能算出d。 \n (2).  。只有知道p和q，才能算出 。 \n (3).  。只有将n因数分解，才能计算出p和q。 \n 结论：如果n可以被因数分解，d就可以算出，也就意味着私钥被破解。 \n 可是，大整数的因数分解，是一件非常困难的事情。目前，除了暴力破解，还没有发现别的有效方法。维基百科这样写道： \n \n "对极大整数做因数分解的难度决定了RSA算法的可靠性。换言之，对一极大整数做因数分解愈困难，RSA算法愈可靠。 \n 假如有人找到一种快速因数分解的算法，那么RSA的可靠性就会极度下降。但找到这样的算法的可能性是非常小的。今天只有短的RSA密钥才可能被暴力破解。到2008年为止，世界上还没有任何可靠的攻击RSA算法的方式。 \n 只要密钥长度足够长，用RSA加密的信息实际上是不能被解破的。" \n \n 举例来说，你可以对3233进行因数分解（61×53），但是你没法对下面这个整数进行因数分解。 \n 12301866845301177551304949\n58384962720772853569595334\n79219732245215172640050726\n36575187452021997864693899\n56474942774063845925192557\n32630345373154826850791702\n61221429134616704292143116\n02221240479274737794080665\n351419597459856902143413\n \n 1 2 3 4 5 6 7 8 9 它等于这样两个质数的乘积： \n 33478071698956898786044169\n84821269081770479498371376\n85689124313889828837938780\n02287614711652531743087737\n814467999489\n　　×\n36746043666799590428244633\n79962795263227915816434308\n76426760322838157396665112\n79233373417143396810270092\n798736308917\n \n 1 2 3 4 5 6 7 8 9 10 11 事实上，这大概是人类已经分解的最大整数（232个十进制位，768个二进制位）。比它更大的因数分解，还没有被报道过，因此目前被破解的最长RSA密钥就是768位。 \n 加密和解密 \n 有了公钥和私钥，就能进行加密和解密了。 \n \n 加密要用公钥 \n \n 假设鲍勃要向爱丽丝发送加密信息m，他就要用爱丽丝的公钥 (n,e) 对m进行加密。这里需要注意，m必须是整数（字符串可以取ascii值或unicode值），且m必须小于n。 \n 所谓『加密』就是算出下式的c：\n \n爱丽丝的公钥是 (3233, 17)，鲍勃的m假设是65，那么可以算出下面的等式：\n \n于是，c等于2790，鲍勃就把2790发给了爱丽丝。 \n \n 解密要用私钥 \n \n 爱丽丝拿到鲍勃发来的2790以后，就用自己的私钥(3233, 2753) 进行解密。可以证明，下面的等式一定成立：\n \n也就是说，c的d次方除以n的余数为m。现在，c等于2790，私钥是(3233, 2753)，那么，爱丽丝算出\n \n因此，爱丽丝知道了鲍勃加密前的原文就是65。 \n 至此，"加密--解密"的整个过程全部完成。 \n 我们可以看到，如果不知道d，就没有办法从c求出m。而前面已经说过，要知道d就必须分解n，这是极难做到的，所以RSA算法保证了通信安全。 \n 你可能会问，公钥(n,e) 只能加密小于n的整数m，那么如果要加密大于n的整数，该怎么办？有两种解决方法：一种是把长信息分割成若干段短消息，每段分别加密；另一种是先选择一种"对称性加密算法"（比如 DES 、 3DES 、 AES ），用这种算法的密钥加密信息，再用RSA公钥加密DES密钥。 \n 私钥解密证明 \n 最后，我们来证明，为什么用私钥解密，一定可以正确地得到m。也就是证明下面这个式子：\n \n因为根据加密规则：\n \n于是c可以写成下面的形式：\n \n将c代入我们要证明的那个解密规则：\n \n将上述方程式的左侧用二项式定理展开：\n \n \n可以发现，除了最后一项，其他的都是n的倍数，所以等同于求证：\n \n由于：\n \n所以：\n \n将ed代入：\n \n接下来，分成两种情况证明上面这个式子。 \n \n m与n互质。 \n \n 根据欧拉定理，此时 ,可以得出 ,由二项式展开定理，可以得到下述结论：\n \n原式得证。 \n \n m与n不是互质关系。 \n \n 此时，由于n等于质数p和q的乘积，所以m必然等于kp或kq。\n以 m = kp为例，这时k与q必然互质。如果k与q 不为互质关系，则k=tq, m= tqp=tn, 但是按照RSA规范， ，m<n的，所以k与q肯定是互质关系的。由于k与q互质，p与q互质，那么kp与q肯定互质，则根据欧拉定理，下面的式子成立：\n \n进一步扩展得到(原理和第一种一样)：\n \n即\n \n进一步改写成：\n \n显然，t一定是p的倍数，也就是t能被p整除，有 ，可以得出：\n \n因为m=kp, n=pq, 最后得出：\n \n也就是：\n \n原式得到证明。 \n (完) \n ',summary:"\n\n本文转载与阮一峰老师的RSA算法原理（二）\n\n正文开始！\n\n上一次，我介绍了一些数论知识。\n\n有了这些知识，我们就可以看懂RSA算法。这是目前地球上最重要的加密算法。\n\n密钥生成的步骤\n\n我们通过一个例子，来理解RSA算法。假设爱丽丝要与鲍勃进行加密通信，她该怎么生成公钥和私钥呢？\n\n第一步，随机选择两个不想等的质数p和q。\n\n  爱丽丝选择了61和53。（实际应用中，这两个质数越大，就越难破解。）\n\n第二步，计算p和q的乘积n。\n\n  爱丽丝就把61和53相乘。\n  $$n=61*53=3233$$\n  n的长度就是密钥长度。3233写成二进制是110010100001，一共有12位，所 ...",id:"post",pid:"post",readingTime:{text:"2 min read",minutes:1.095,time:65700,words:219}},{title:"扩展欧几里德算法",frontmatter:{title:"扩展欧几里德算法",description:"扩展欧几里德算法",date:"2021-11-23",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20211123144742.png",tags:["数论","转载"],meta:[{name:"title",content:"扩展欧几里德算法"},{name:"description",content:"扩展欧几里德算法"},{name:"keywords",content:"扩展欧几里德算法"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2021-11-23-exgcd.html",relativePath:"_posts/2021-11-23-exgcd.md",key:"v-0783d65e",path:"/2021/11/23/exgcd/",headers:[{level:2,title:"欧几里德算法",slug:"欧几里德算法"},{level:2,title:"扩展欧几里德算法",slug:"扩展欧几里德算法-2"},{level:3,title:"代码实现",slug:"代码实现"},{level:3,title:"扩展欧几里德算法的应用",slug:"扩展欧几里德算法的应用"},{level:2,title:"参考文章",slug:"参考文章"}],lastUpdated:"11/23/2021, 12:53:14 PM",content:" 扩展欧几里德算法 \n 欧几里德算法 \n 欧几里德算法又称辗转相除法，用于计算两个整数a, b的最大公约数。基本算法：设 ，其中a, b, q, r都是整数，则：\n \n即 。 \n 证明引自离散数学课本： \n 先看一个整除定理与推论 \n \n 接下来是证过程： \n \n 代码实现： \n function   gcd ( a ,  b )   { \n     if   ( b === 0 )   { \n         return  a ; \n     } \n     return   gcd ( b ,  a % b ) ; \n } \n \n 1 2 3 4 5 6 #  扩展欧几里德算法 \n 扩展欧几里德算法是欧几里德算法的扩展。 \n 定理：若 和 为正整数，则存在整数 使得 ； \n 换句话说 可以表示为 的线性组合，例如： ，而 。 \n 已知整数 ，扩展欧几里德算法可以在求得 的最大公约数的同时，找到整数 （其中一个很可能是负数），使它们满足等式 。对两个整数 进行辗转相除法，可得它们的最大公约数，然后，收集辗转相除法中产生的式子，倒回去，可以得到 的整数解。 \n 用类似辗转相除法，求二元一次不定方程 的整数解。 \n \t\t\t\t \n \t\t\t\t   \n \t\t\t\t\t \n \t\t\t\t\t\t\t  \n 由 、 式可知： \n \t\t\t\t\t \n \t\t\t  \t \n 将 代入 可知： \n \n 由 知 ，代入上式，得： \n \n 问题得解： 。 \n 代码实现 \n 欧几里德算法停止的状态是：  \n 推理2， 时 \n 设  ; \n ​\t  ; \n 根据朴素的欧几里德原理有  ; \n 则:  ； \n 即: ； \n 令 ; \n 得 ; \n 根据恒等定理得： ； \n 这样我们就得到了求解  的方法： 的值基于  . \n 上面的思想是以递归定义的，因为  不断的递归求解一定会有个时候  ，所以递归可以结束。 \n 扩展欧几里德算法 递归代码 ： \n function   exgcd ( a ,  b )   { \n     let  x ,  y ; \n     if   ( b === 0 )   { \n        x  =   1 ; \n        y  =   0 ; \n         return   [ x ,  y ] ; \n     } \n     [ x ,  y ]   =   exgcd ( b ,  a % b ) ; \n     [ x ,  y ]   =   [ y ,  x - ( Math . floor ( a / b ) ) * y ] ; \n     return   [ x ,  y ] ; \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 #  扩展 欧几里 德算法的应用 \n 扩展欧几里德算法的应用主要有以下三方面： \n \n 求解不定方程； \n 求解模的逆元； \n 求解模线性方程（线性同余方程）； \n 求解不定方程 \n 对于不定整数方程 ，若  ,则该方程存在整数解，否则不存在整数解。 \n 上面已经讨论找出整数解的方法。 \n 求乘法逆元 \n 在 RSA加密原理（二） 中提到计算模反元素d的方法就是利用扩展欧几里德算法进行求解的。 \n 参考文章 \n \n 扩展欧几里德算法 \n \n ",summary:"\n欧几里德算法\n\n欧几里德算法又称辗转相除法，用于计算两个整数a, b的最大公约数。基本算法：设$a=bq+r$，其中a, b, q, r都是整数，则：\n$$\\gcd(a,b)=\\gcd(b,r)$$\n即$\\gcd(a,b)=\\gcd(b,a\\%b)$。\n\n证明引自离散数学课本：\n\n先看一个整除定理与推论\n\n接下来是证过程：\n\n代码实现：\n\nfunction gcd(a, b) {\n    if (b===0) {\n        return a;\n    }\n    return gcd(b, a%b);\n}\n\n扩展欧几里德算法\n\n扩展欧几里德算法是欧几里德算法的扩展。\n\n定理：若$a$和 ...",id:"post",pid:"post",readingTime:{text:"1 min read",minutes:.78,time:46800.00000000001,words:156}},{title:"Web Speech API",frontmatter:{title:"Web Speech API",description:"Web Speech API",date:"2021-11-24",author:"Yoha",location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210925163443.gif",tags:["JavaScript"],meta:[{name:"title",content:"Web Speech API"},{name:"description",content:"Web Speech API"},{name:"keywords",content:"Web Speech API"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2021-11-24-web-speech-api.html",relativePath:"_posts/2021-11-24-web-speech-api.md",key:"v-63a42998",path:"/2021/11/24/web-speech-api/",headers:[{level:2,title:"前言",slug:"前言"},{level:2,title:"正文",slug:"正文"},{level:3,title:"SpeechRecognition",slug:"speechrecognition"},{level:3,title:"SpeechSynthesis",slug:"speechsynthesis"},{level:2,title:"参考文章",slug:"参考文章"}],lastUpdated:"11/24/2021, 12:27:16 PM",content:' Web Speech API \n 前言 \n 前几天在看阮一峰老师的 科技爱好者周刊173期 时看到一篇关于语音识别的文章—— Voice to Text with Chrome Web Speech API 。网页、语音识别、语音合成感觉挺好玩的，了解了一下。 \n 正文 \n Web Speech API 有两个部分：SpeechSynthesis 语音合成 (文本到语音 TTS) 和 SpeechRecognition 语音识别 (异步语音识别)。 \n 语音识别通过  SpeechRecognition  接口进行访问，它提供了识别从音频输入（通常是设备默认的语音识别服务）中识别语音情景的能力。一般来说，你将使用该接口的构造函数来构造一个新的  SpeechRecognition  对象，该对象包含了一系列有效的对象处理函数来检测识别设备麦克风中的语音输入。 \n SpeechRecognition \n 兼容性 \n \n 语音识别对象 SpeechRecognition 有许多属性、方法和事件处理程序。有关完整接口列表，请参阅https://w3c.github.io/speech-api/#speechreco-section \n interface   SpeechRecognition   :  EventTarget  { \n     constructor ( ) ; \n\n     // recognition parameters \n    attribute SpeechGrammarList grammars ; \n    attribute DOMString lang ; \n    attribute boolean continuous ; \n    attribute boolean interimResults ; \n    attribute unsigned long maxAlternatives ; \n\n     // methods to drive the speech interaction \n     undefined   start ( ) ; \n     undefined   stop ( ) ; \n     undefined   abort ( ) ; \n\n     // event methods \n    attribute EventHandler onaudiostart ; \n    attribute EventHandler onsoundstart ; \n    attribute EventHandler onspeechstart ; \n    attribute EventHandler onspeechend ; \n    attribute EventHandler onsoundend ; \n    attribute EventHandler onaudioend ; \n    attribute EventHandler onresult ; \n    attribute EventHandler onnomatch ; \n    attribute EventHandler onerror ; \n    attribute EventHandler onstart ; \n    attribute EventHandler onend ; \n } ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 #  Properties \n 需要重点介绍的两个属性： SpeechRecognition.continuous  和  SpeechRecognition.interimResults . \n 当 SpeechRecognition.continuous 设置为true时，识别引擎将把你讲话的每一部分都视为临时结果。当 SpeechRecognition.interimResults 设置为true时，临时结果将会被返回。 \n maxAlternatives 此属性将设置每个结果的  SpeechRecognitionAlternatives  的最大数量。 默认值为 1。 \n interface   SpeechRecognitionAlternative   { \n    readonly attribute DOMString transcript ; \n    readonly attribute float confidence ; \n } ; \n \n 1 2 3 4 \n 其他属性的含义可参考 MDN-Web Speech API \n Methods \n \n \n SpeechRecognition.abort() \n 语音识别服务停止接受传入的音频，并且不返回 SpeechRecognitionResult 。 \n \n \n SpeechRecognition.start() \n 启动语音识别服务，接受传入的音频，以识别与当前SpeechRecognition关联的 grammars 。 \n \n \n SpeechRecognition.stop() \n 语音识别服务停止接受传入的音频，返回 SpeechRecognitionResult 。 \n \n \n interface   SpeechRecognitionResultList   { \n    readonly attribute unsigned long length ; \n    getter SpeechRecognitionResult  item ( unsigned long index ) ; \n } ; \n interface   SpeechRecognitionResult   { \n    readonly attribute unsigned long length ; \n    getter SpeechRecognitionAlternative  item ( unsigned long index ) ; \n    readonly attribute boolean isFinal ; \n } ; \n interface   SpeechRecognitionAlternative   { \n    readonly attribute DOMString transcript ; \n    readonly attribute float confidence ; \n } ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 #  Event \n 最值得强调的事件是 result . \n 此事件当语音识别服务返回结果时触发-一个单词或短语已被正确识别，并已反馈给应用程序。 \n recognition . addEventListener ( \'result\' ,   function ( event )   { } ) ; \n\n // 或者 \n\nrecognition . onresult   =   function ( event )   { } \n \n 1 2 3 4 5 打印一下 event.results (返回 SpeechRecognitionResultList ): \n \n \n \n event.results[i] : 包含识别结果对象的数组。 每个数组元素对应第i个识别阶段的一个识别词 \n \n \n event.result[i][j] : 已识别单词的第 j 个选项。 第一个元素是最有可能识别的单词。 \n \n maxAlternatives 此属性将设置每个结果的  SpeechRecognitionAlternatives  的最大数量。 默认值为 1。这个属性将会影响 event.result[i] 数组的最大长度，最多识别的单词数。 \n \n \n \n event.results[i].isFinal : 表明此结果是最终结果( true )还是临时结果( false )的布尔值。 \n \n \n event.results[i][j].transcript : 对于输入语音识别的文本 \n \n \n event.results[i][j].confidence : 对于输入语音识别文本的置信度（值从0到1） \n 语音识别DEMO \n 语音识别可参考如下DEMO： \n \n github项目： Chrome-Web-Speech-API \n \n \n 核心代码如下： \n recognition  =   new   webkitSpeechRecognition ( ) ; \nrecognition . continuous  =   true ; \nrecognition . interimResults  =   true ; \nrecognition . onstart   =   function ( )   { \n   //... \n } ; \nrecognition . onerror   =   function ( event )   { \n   // handle event.error \n } ; \nrecognition . onend   =   function ( )   { \n   //... \n } ; \nrecognition . onresult   =   function ( event )   { \n   // console.log(event.results); \n   var  interim_transcript  =   \'\' ; \n   for   ( var  i  =  event . resultIndex ;  i  <  event . results . length ;   ++ i )   { \n     if   ( event . results [ i ] . isFinal )   { \n      final_transcript  +=  event . results [ i ] [ 0 ] . transcript ; \n   \t }   else   { \n      interim_transcript  +=  event . results [ i ] [ 0 ] . transcript ; \n     } \n   } \n \tfinal_transcript  =   capitalize ( final_transcript ) ; \n  final_span . innerHTML  =   linebreak ( final_transcript ) ; \n  interim_span . innerHTML  =   linebreak ( interim_transcript ) ; \n } ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 \n \n MDN示例： speech-color-changer \n MDN在线体验： Speech color changer \n \n \n \n 推荐第一个，作者写了一篇文章来解读 Voice to Text with Chrome Web Speech API \n SpeechSynthesis \n \n 语音合成API的接口信息可参考[https://wicg.github.io/speech-api/#tts-section](The SpeechSynthesis Interface). \n 完整的属性和方法可参考 MDN-SpeechSynthesis 、 MDN-SpeechSynthesisUtterance . \n // 截取部分关键API接口\ninterface SpeechSynthesis : EventTarget {\n    readonly attribute boolean pending;\n    readonly attribute boolean speaking;\n    readonly attribute boolean paused;\n\n    attribute EventHandler onvoiceschanged;\n\n    undefined speak(SpeechSynthesisUtterance utterance);\n    undefined cancel();\n    undefined pause();\n    undefined resume();\n    sequence<SpeechSynthesisVoice> getVoices();\n};\n\ninterface SpeechSynthesisUtterance : EventTarget {\n    constructor(optional DOMString text);\n\n    attribute DOMString text;\n    attribute DOMString lang;\n    attribute SpeechSynthesisVoice? voice;\n    attribute float volume;\n    attribute float rate;\n    attribute float pitch;\n\n    attribute EventHandler onstart;\n    attribute EventHandler onend;\n    attribute EventHandler onerror;\n    attribute EventHandler onpause;\n    attribute EventHandler onresume;\n    attribute EventHandler onmark;\n    attribute EventHandler onboundary;\n};\n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 #  Properties \n \n SpeechSynthesis.paused (只读)：当 SpeechSynthesis  处于暂停状态时，返回  true  。 \n SpeechSynthesis.pending (只读)：当语音播放队列到目前为止保持没有说完的语音时，返回 true 。 \n SpeechSynthesis.speaking (只读)：当语音谈话正在进行的时候，即使 SpeechSynthesis 处于暂停状态，也会返回 true 。 \n Methods \n \n SpeechSynthesis.cancel() ：移除所有语音谈话队列中的谈话。 \n SpeechSynthesis.getVoices() ：返回当前设备所有可用声音的列表。 \n SpeechSynthesis.pause() ：把  SpeechSynthesis  对象置为暂停状态。 \n SpeechSynthesis.resume() ：把  SpeechSynthesis  对象置为一个非暂停状态：如果已经暂停了则继续。 \n SpeechSynthesis.speak() ：添加一个  utterance  到语音谈话队列；它将会在其他语音谈话播放完之后播放。 \n \n 需要重点注意的是 SpeechSynthesis.speak() 方法。在interface SpeechSynthesis中关于speak的规定是： speak(SpeechSynthesisUtterance utterance); 。也就说speak方法接受的参数为SpeechSynthesisUtterance实例。 \n SpeechSynthesisUtterance实例 属性 ： \n \n lang：获取或设置语音的语言，具体语言列表可以通过SpeechSynthesis.getVoices()获取 \n pitch：获取或设置语音的音调 \n rate：获取或设置语音的语速 \n text：获取或设置朗读语音的文字 \n voice：获取或设置用于朗读的语音 \n volume：获取或设置朗读的音量 \n \n SpeechSynthesisUtterance 事件 可参考上面的SpeechSynthesisUtterance接口。 \n Event \n SpeechSynthesis.onvoiceschanged ：当由 SpeechSynthesis.getVoices() 方法返回的 SpeechSynthesisVoice 列表改变时触发。 \n 语音朗读DEMO \n 在线例子 Speech synthesiser \n \n 涉及到大多数的属性和事件 \n \n 对应代码库： speak-easy-synthesis \n \n 一个超级简单的小DEMO： \n <! DOCTYPE   html > \n < html   lang = " en " > \n\n < head > \n     < meta   charset = " UTF-8 " > \n     < meta   http-equiv = " X-UA-Compatible "   content = " IE=edge " > \n     < meta   name = " viewport "   content = " width=device-width, initial-scale=1.0 " > \n     < title > speechSynthesis </ title > \n </ head > \n\n < body > \n     < input   type = " text "   id = " info_text " > \n     < button   type = " button "   onclick = " play() " > play </ button > \n     < script > \n         function   play ( )   { \n             let  ele_val  =  document . querySelector ( \'#info_text\' ) . value ; \n             let  utterance  =   new   SpeechSynthesisUtterance ( ele_val ) ; \n            utterance . lang  =   \'en-US\' ; \n            utterance . rate  =   1 ; \n            utterance . pitch  =   0.6 ; \n            speechSynthesis . speak ( utterance ) ; \n             // console.log(speechSynthesis.paused); \n             // console.log(speechSynthesis.pending); \n             // console.log(speechSynthesis.speaking); \n             // console.log(speechSynthesis.getVoices()); \n         } \n     </ script > \n </ body > \n\n </ html > \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 #  参考文章 \n \n Voice to Text with Chrome Web Speech API \n Web Speech API-MDN \n Web Speech API \n \n ',summary:"\n前言\n\n前几天在看阮一峰老师的科技爱好者周刊173期时看到一篇关于语音识别的文章——Voice to Text with Chrome Web Speech API。网页、语音识别、语音合成感觉挺好玩的，了解了一下。\n\n正文\n\nWeb Speech API 有两个部分：SpeechSynthesis 语音合成 (文本到语音 TTS) 和 SpeechRecognition 语音识别 (异步语音识别)。\n\n语音识别通过 SpeechRecognition 接口进行访问，它提供了识别从音频输入（通常是设备默认的语音识别服务）中识别语音情景的能力。一般来说，你将使用该接口的构造函数来构造一个新的  ...",id:"post",pid:"post",readingTime:{text:"3 min read",minutes:2.85,time:171e3,words:570}},{title:"题目:变量提升/匿名函数this指向",frontmatter:{title:"题目:变量提升/匿名函数this指向",date:"2020-07-17",author:"Yoha",tags:["前端开发","JavaScript"],location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017105512.jpeg",meta:[{name:"title",content:"计算机组成原题目:变量提升/匿名函数this指向理第一章"},{name:"description",content:"题目:变量提升/匿名函数this指向"},{name:"keywords",content:"变量提升, 匿名函数this"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-07-17-subject-this.html",relativePath:"_posts/2020-07-17-subject-this.md",key:"v-c2b18304",path:"/2020/07/17/subject-this/",headers:[{level:2,title:"题目1",slug:"题目1"},{level:2,title:"题目2",slug:"题目2"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" 题目:变量提升/匿名函数this指向 \n 题目1 \n 代码如下： \n var  x  =   1 ,  y  =   0 ,  z  =   0 ; \n var   add   =   function   ( x )   { \n\tx  =  x  +   1 ; \n\t return  x ; \n } \ny  =   add ( x ) ; \n function   add ( x )   { \n\t return  x  =  x  +   3 ; \n } \nz  =   add ( x ) ; \nconsole . log ( x ,  y ,  z ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 请问输出的x,y,z的值分别为多少？为什么？ \n 由于函数提升优于变量提升，导致加3的add函数声明被下面加1的add函数表达式覆盖。也就有了下面的代码： \n function   add ( x )   { \n\t return  x  =  x  +   3 ; \n } \n var  x ,  y ,  z ; \n var  add ; \nx  =   1 ; \ny  =   0 ; \nz  =   0 ; \n add   =   function   ( x )   { \n\tx  =  x  +   1 ; \n\t return  x ; \n } \ny  =   add ( x ) ; \nz  =   add ( x ) ; \nconsole . log ( x ,  y ,  z ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 接着 y = add(x) 调用add函数，传入的参数为1。注意add函数接受的参数x和外面的var x = 1;并不是一个x。因为作用域，在add函数的作用域内可以找到x，就不会去全局的作用域去找。同理z = add(x) 也是。 \n 因此输出的x,y,z的值分别为1, 2, 2. \n 假如我们把add函数稍作修改，如下： \n function   add ( x )   { \n\t return  x  =  x  +   3 ; \n } \n var  x ,  y ,  z ; \n var  add ; \nx  =   1 ; \ny  =   0 ; \nz  =   0 ; \n add   =   function   ( x1 )   { \n\tx  =  x1  +   1 ; \n\t return  x ; \n } \ny  =   add ( x ) ; \nz  =   add ( x ) ; \nconsole . log ( x ,  y ,  z ) ; //此时输出为：3，2，3 \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 这个时候输出的x, y, z值为3，2，3。这是因为在y = add(x) 调用add函数时，传入的参数为1，函数作用域内不曾声明x，因此会找到全局的x，并修改其值为2，返回x，因此y=2；在z = add(x) 调用add函数时，传入的参数为2(被修改后的x)，然后全局的x被修改为3，返回x，因此z = 3. 所以输出为3，2，3。 \n 题目2 \n 代码如下： \n var  num  =   1 ; \n var  myObject  =   { \n\tnum :   2 , \n\t add :   function   ( )   { \n\t\t this . num  =   3 ; \n\t\t ( function   ( )   { \n\t\t\tconsole . log ( this . num ) ; \n\t\t\t this . num  =   4 ; \n\t\t } ) ( ) ; \n\t\tconsole . log ( this . num ) ; \n\t } , \n   sub :   function   ( )   { \n\t\tconsole . log ( this . num ) ; \n\t } \n } \n\nmyObject . add ( ) ; \nconsole . log ( myObject . num ) ; \nconsole . log ( num ) ; \n var  sub  =  myObject . sub ; \n sub ( ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 先看第17行：myObject.add(); \n 调用myObject对象中的add方法，此时this指向这个对象(也就是myObject),但比较特殊的时这个函数里面还有一个立即执行的匿名函数，在这个匿名函数里面this是指向window的。 \n 因此执行第17行会打印：1，3 \n 接着执行第18行console.log(myObject.num);也是打印3 \n 接着执行第19行console.log(num);在执行第17行时，匿名函数中修改全局num值为4，所以此时打印出来为4. \n 执行第21行，如果直接调用myObject.add();此时这个add函数里面的this指向myObject对象，但是如果var sub = myObject.sub;然后调用sub(),这个时候情况就不一样啦。此时就相当于调用了一个普通的函数，并不是作为myObject对象的方法被调用的。因此，此时this指向window。在执行第17行时，匿名函数中修改全局num值为4，所以此时打印出来为4. \n \n 《javascript高级程序设计》这本书里du的匿名函数这一章也有讲到，摘抄如下：\nthis对象是在运行时基于函数的执行环境绑定的：在全局函数中，this等于window，而当函数被作为某个对象的方法调用时，this等于那个对象。不过，匿名函数的执行环境具有全局性，因为其this对象通常指向window。 \n \n ",summary:"\n题目1\n\n代码如下：\n\nvar x = 1, y = 0, z = 0;\nvar add = function (x) {\n\tx = x + 1;\n\treturn x;\n}\ny = add(x);\nfunction add(x) {\n\treturn x = x + 3;\n}\nz = add(x);\nconsole.log(x, y, z);\n\n请问输出的x,y,z的值分别为多少？为什么？\n\n由于函数提升优于变量提升，导致加3的add函数声明被下面加1的add函数表达式覆盖。也就有了下面的代码：\n\nfunction add(x) {\n\treturn x = x + 3;\n}\nvar x, y, ...",id:"post",pid:"post",readingTime:{text:"2 min read",minutes:1.185,time:71100.00000000001,words:237}},{title:"堆排序&优先级队列",frontmatter:{title:"堆排序&优先级队列",date:"2020-07-12",author:"Yoha",tags:["算法","Leetcode"],location:"Beijing",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20201017110754.png",meta:[{name:"title",content:"堆排序&优先级队列"},{name:"description",content:"堆排序&优先级队列"},{name:"keywords",content:"堆排序, 优先级队列"},{name:"author",content:"Yoha"}],featured:!0,layout:"Post",permalink:"/:year/:month/:day/:slug",readingShow:"top"},regularPath:"/_posts/2020-07-12-heap.html",relativePath:"_posts/2020-07-12-heap.md",key:"v-7db2b71a",path:"/2020/07/12/heap/",headers:[{level:2,title:"堆排序",slug:"堆排序"},{level:3,title:"插入式建堆",slug:"插入式建堆"},{level:3,title:"原地建堆",slug:"原地建堆"},{level:3,title:"堆排序",slug:"堆排序-2"},{level:2,title:"优先级队列",slug:"优先级队列"},{level:3,title:"实现上浮 和 下沉(大顶堆为例)",slug:"实现上浮-和-下沉-大顶堆为例"},{level:3,title:"实现delMax 和 insert",slug:"实现delmax-和-insert"},{level:2,title:"最后总结",slug:"最后总结"}],lastUpdated:"8/17/2021, 2:49:02 PM",content:" 二叉堆 \n 本文主要参考 二叉堆详解实现优先级队列 。对其作者 labuladong 表示感谢。 \n 说到二叉堆就不得不提到二叉树，在二叉树中有一种特殊的树叫做 完全二叉树 ，而堆就是一种完全二叉树。因此，堆可以用 数组 来表示。因为完全二叉树的节点之间存在如下关系： \n 某个节点(其索引为k)的父节点的索引为(k / 2),其左孩子节点索引为2 * k,右孩子节点为2 * k + 1。正是因为这种关系，才可以用数组来表示堆。 \n 如下图 \n \n 注：数组的第一个索引 0 空着不用。因为数组索引是数组，为了方便区分，将字符作为数组元素。 \n \n \n 可以看到，把arr[1]作为整棵树的根的话，每个节点的父节点和左右孩子节点的索引都可以通过简单的运算得到。 \n 二叉堆还分为最大堆(大顶堆)和最小堆(小顶堆)。最大堆的性质是：每个节点都大于等于它的两个子节点。类似的，最小堆的性质是：每个节点都小于等于它的子节点。 \n \n 堆主要应用有两个, 首先是一种排序方法「堆排序」, 第二是一种很有用的数据结构「优先级队列」。 \n 堆排序 \n 在说堆排序之前，先要知道怎么建堆。常见的方式有两种： \n \n \n 插入式建堆：每次插入一个节点，实现一个大顶堆（或小顶堆） \n \n 自下而上式堆化 : 将插入节点与其父节点比较，如果插入节点大于父节点（大顶堆）或插入节点小于父节点（小顶堆），则插入节点与父节点调整位置。一直重复这一步，直到不需要交换或交换到根节点，此时插入完成。 \n \n \n \n 原地建堆 \n \n \n 自下而上式堆化 : 将节点与其父节点比较，如果节点大于父节点（大顶堆）或节点小于父节点（小顶堆），则节点与父节点调整位置. \n \n \n 自上而下式堆化 : 将节点与其左右子节点比较，如果存在左右子节点大于该节点（大顶堆）或小于该节点（小顶堆），则将子节点的最大值（大顶堆）或最小值（小顶堆）与之交换。 \n \n \n \n \n 所以，自下而上式堆是调整节点与父节点（往上走），自上往下式堆化是调整节点与其左右子节点（往下走）。 \n 插入式建堆 \n 插入节点： \n \n 将节点插入队尾 \n 自下而上堆化 \n 一直重复这一步，直到不需要交换或交换到根节点，此时插入完成。 \n \n \n 代码实现(大顶堆)： \n let  item  =   [ ,   6 ,   5 ,   4 ,   1 ,   3 ,   2 ] ; \n function   insert ( key )   { \n  item . push ( key ) ; \n   let  index  =  item . length  -   1 ; \n   while ( index  /   2   >   0   &&  item [ index ]   >  item [ Math . floor ( index  /   2 ) ] )   { \n     [ item [ index ] ,  item [ Math . floor ( index  /   2 ) ] ]   =   [ item [ Math . floor ( index  /   2 ) ] ,  item [ index ] ] ; \n    index  =  Math . floor ( index  /   2 ) ; \n   } \n } \n \n 1 2 3 4 5 6 7 8 9 #  原地建堆 \n \n 从前往后、自下而上式堆化建堆 \n \n 以小顶堆为例: \n \n 代码： \n function   buildHeap ( arr ,  heapIndex )   { \n   while ( heapIndex  <  arr . length  -   1 )   { \n    heapIndex ++ ; \n     heapify ( arr ,  heapIndex ) ; \n   } \n } \n function   heapify ( item ,  i )   { \n   while ( i  /   2   >   0   && 　item [ i ]   <  item [ Math . floor ( i  /   2 ) ] )   { \n     [ item [ i ] ,  item [ Math . floor ( i  /   2 ) ] ]   =   [ item [ Math . floor ( i  /   2 ) ] ,  item [ i ] ] ; \n    i  =  Math . floor ( i  /   2 ) ; \n   } \n } \n let  arr  =   [ , 8 , 6 , 7 , 4 , 2 , 0 , 1 , 5 ] \n buildHeap ( arr ,   1 ) ; \nconsole . log ( arr ) ;   //[empty, 0, 4, 1, 5, 6, 7, 2, 8] \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 \n 从后往前、自上而下式堆化建堆 \n \n 以小顶堆为例 \n \n 注：从后往前并不是从序列的最后一个元素开始，而是从最后一个非叶子节点开始，这是因为，叶子节点没有子节点，不需要自上而下式堆化。 \n \n 最后一个子节点的父节点为 n/2 ，所以从 n/2 位置节点开始堆化。 \n \n 代码： \n function   buildHeap ( arr ,  heapIndex )   { \n   for ( let  i  =  Math . floor ( heapIndex  /   2 ) ;  i  >=   1 ;  i -- )   { \n     heapify ( arr ,  i ,  heapIndex ) ; \n   } \n } \n function   heapify ( item ,  i ,  size )   { \n   while ( true )   { \n     let  smallerIndex  =  i ; \n     if ( 2   *  i  <=  size  &&  item [ i ]   >  item [ 2   *  i ] )   { \n      smallerIndex  =   2   *  i ; \n     } \n     if ( 2   *  i  +   1   <=  size  &&  item [ smallerIndex ]   >  item [ 2   *  i  +   1 ] )   { \n      smallerIndex  =   2   *  i  +   1 ; \n     } \n     if ( smallerIndex  ==  i )   break ; \n     [ item [ i ] ,  item [ smallerIndex ] ]   =   [ item [ smallerIndex ] ,  item [ i ] ] ; \n    i  =  smallerIndex ; \n   } \n } \n let  arr  =   [ , 5 , 2 , 3 , 4 , 1 ] \n buildHeap ( arr ,  arr . length  -   1 ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 #  堆排序 \n \n 原理 \n \n 堆是一棵完全二叉树，它可以使用数组存储，并且大顶堆的最大值存储在根节点（i=1），所以我们可以每次取大顶堆的根结点与堆的最后一个节点交换，此时最大值放入了有效序列的最后一位，并且有效序列减1，有效堆依然保持完全二叉树的结构，然后堆化，成为新的大顶堆，重复此操作，知道有效堆的长度为 0，排序完成。 \n (升序)完整步骤为： \n \n 将原序列(n个)转化为一个大顶堆 \n 设置堆的有效序列长度为n \n 将堆顶元素(第一个有效序列)与最后一个子元素(最后一个有效序列)交换，并且有效序列长度减一 \n 再次堆化有效序列，使有效序列再次堆化为一个新的大顶堆 \n 重复以上两步，直到有效序列的长度为1 \n \n 代码： \n function   heapSort ( arr )   { \n   buildHeap ( arr ,   1 ,   0 ) ; \n   for ( let  i  =   1 ;  i  <  arr . length  -   1 ;  i ++ )   { \n     [ arr [ 1 ] ,  arr [ arr . length  -  i ] ]   =   [ arr [ arr . length  -  i ] ,  arr [ 1 ] ] ; \n     buildHeap ( arr ,   1 ,  i ) ; \n   } \n } \n function   buildHeap ( arr ,  heapIndex ,  size )   { \n   while ( heapIndex  <  arr . length  -   1   -  size )   { \n    heapIndex ++ ; \n     heapify ( arr ,  heapIndex ) ; \n   } \n } \n //自下而上堆化 \n function   heapify ( item ,  i )   { \n   while ( i  /   2   >   0   &&  item [ i ]   >  item [ Math . floor ( i  /   2 ) ] )   { \n     [ item [ i ] ,  item [ Math . floor ( i  /   2 ) ] ]   =   [ item [ Math . floor ( i  /   2 ) ] ,  item [ i ] ] ; \n    i  =  Math . floor ( i  /   2 ) ; \n   } \n } \n var  items  =   [ , 1 ,   9 ,   2 ,   8 ,   3 ,   7 ,   4 ,   6 ,   5 ] \n heapSort ( items ) \nconsole . log ( items ) ; //[empty, 1, 2, 3, 4, 5, 6, 7, 8, 9] \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 #  TopK问题(leetcode215) \n 题目描述： \n 在未排序的数组中找到第 k 个最大的元素。请注意，你需要找的是数组排序后的第 k 个最大的元素，而不是第 k 个不同的元素。 \n \n \n 示例 1: \n 输入: [3,2,1,5,6,4] 和 k = 2 \n 输出: 5 \n \n \n 示例 2: \n 输入: [3,2,3,1,2,4,5,5,6] 和 k = 4 \n 输出: 4 \n \n \n 思路： \n 思路一： \n \n 构建大顶堆(假设有效长度为n = arr.length - 1) \n 将第一个元素与最后一个元素交换位置，然后有效长度减一(n-1) \n 再将有效长度减一(n-1)的序列进行大堆化，再将第一个元素与 有效序列 的最后一个元素交换。 \n 重复k次，返回倒数第k个元素。 \n \n 代码： \n var   findKthLargest   =   function   ( nums ,  k )   { \n   buildHeap ( nums ,   0 ,   0 ) ; \n   for   ( let  i  =   0 ;  i  <  k ;  i ++ )   { \n     [ nums [ 0 ] ,  nums [ nums . length  -  i  -   1 ] ]   =   [ nums [ nums . length  -  i  -   1 ] ,  nums [ 0 ] ] \n     buildHeap ( nums ,   0 ,  i  +   1 ) ; \n   } \n   return  nums [ nums . length  -  k ] ; \n } ; \n\n //原地建堆(大顶堆) \n function   buildHeap ( arr ,  heapSize ,  size )   { \n   while   ( heapSize  <  arr . length  -  size  -   1 )   { \n    heapSize ++ ; \n     heapify ( arr ,  heapSize ) ; \n   } \n } \n\n //自下而上 \n function   heapify ( item ,  i )   { \n   while   ( i  /   2   >   0   &&  item [ i ]   >  item [ Math . floor ( i  /   2 ) ] )   { \n     [ item [ i ] ,  item [ Math . floor ( i  /   2 ) ] ]   =   [ item [ Math . floor ( i  /   2 ) ] ,  item [ i ] ] ; \n    i  =  Math . floor ( i  /   2 ) ; \n   } \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 思路二： \n \n 对前k个元素构建小顶堆 \n 然后遍历第k个元素往后的所有元素，判断每个元素与小顶堆堆顶的大小 \n 如果小于堆顶元素，啥也不做，直接下一个；如果大于堆顶的元素，则交换位置 \n 然后将交换的元素下沉到正确的位置(后面会提到的优先级队列)。(或者对前k个元素再次进行小堆化) \n 返回堆顶元素。 \n \n /**\n * @param {number[]} nums\n * @param {number} k\n * @return {number}\n */ \n var   findKthLargest   =   function   ( nums ,  k )   { \n   //对前k个元素进行小堆化 \n   buildSmallHeap ( nums ,   0 ,  k ) ; \n   for ( let  i  =  k ;  i  <  nums . length ;  i ++ )   { \n     if ( nums [ i ]   >  nums [ 0 ] )   { \n       [ nums [ i ] ,  nums [ 0 ] ]   =   [ nums [ 0 ] ,  nums [ i ] ] ; \n       //buildSmallHeap(nums, 0, k); \n       sink ( nums ,   0 ,  k ) ; \n     } \n   } \n   return  nums [ 0 ] ; \n } ; \n\n\n //原地建小顶堆 \n function   buildSmallHeap ( arr ,  heapSize ,  size )   { \n   while   ( heapSize  <  size  -   1 )   { \n    heapSize ++ ; \n     heapify_s ( arr ,  heapSize ) ; \n   } \n } \n\n //自下而上 \n function   heapify_s ( item ,  i )   { \n   while   ( i  /   2   >   0   &&  item [ i ]   <  item [ Math . floor ( i  /   2 ) ] )   { \n     [ item [ i ] ,  item [ Math . floor ( i  /   2 ) ] ]   =   [ item [ Math . floor ( i  /   2 ) ] ,  item [ i ] ] \n    i  =  Math . floor ( i  /   2 ) ; \n   } \n } \n\n //下沉(和左右孩子节点中的较小值交换位置) \n function   sink ( nums ,  m ,  size )   { \n   while   ( true )   { \n     let  samller  =  m ; \n     if   ( 2   *  m  +   1   <  size  &&  nums [ m ]   >  nums [ 2   *  m  +   1 ] )   { \n      samller  =   2   *  m  +   1 ; \n     } \n     if   ( 2   *   ( m  +   1 )   <  size  &&  nums [ samller ]   >  nums [ 2   *   ( m  +   1 ) ] )   { \n      samller  =   2   *   ( m  +   1 ) ; \n     } \n     if   ( m  ==  samller )   break ; \n     //exchange \n     [ nums [ m ] ,  nums [ samller ] ]   =   [ nums [ samller ] ,  nums [ m ] ] ; \n    m  =  samller ; \n   } \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 #  优先级队列 \n 优先级队列这种数据结构有一个很有用的功能，你插入或者删除元素的时候，元素会自动排序，以维护堆的性质，这底层的原理就是二叉堆的操作。 \n 数据结构的功能无非增删查该，优先级队列有两个主要 API，分别是 insert 插入一个元素和 delMax 删除最大元素（如果底层用最小堆，那么就是 delMin）。 \n 下面我们实现一个简化的优先级队列，先看下代码框架： \n class   PQ   { \n  pqArr  =   [ , ] \n\n   //返回当前队列中最大元素 \n   max ( )   { \n     return   this . pqArr [ 1 ] \n   } \n\n   //插入元素num \n   insert ( num )   { } \n\n   //删除并返回当前队列中的最大元素 \n   delMax ( )   { } \n  \n   //上浮第k个元素 \n   swim ( k )   { } \n\n   //下沉第k个元素 \n   sink ( k )   { } \n  \n   //第k个元素父节点索引 \n   parent ( k )   { \n     return  Math . floor ( k  /   2 ) ; \n   } \n\n   //第k个元素左孩子节点索引 \n   left ( k )   { \n     return   2   *  k ; \n   } \n\n   //第k个元素的右孩子节点索引 \n   right ( k )   { \n     return   2   *  k  +   1 ; \n   } \n\n   //打印当前队列 \n   print ( )   { \n    console . log ( this . pqArr ) ; \n   } \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 #  实现上浮 和 下沉(大顶堆为例) \n 为什么要有上浮 swim 和下沉 sink 的操作呢？ 为了维护堆结构。 \n 我们要讲的是最大堆，每个节点都比它的两个子节点大，但是在插入元素和删除元素时，难免破坏堆的性质，这就需要通过这两个操作来恢复堆的性质了。 \n 对于最大堆，会破坏堆性质的有有两种情况： \n \n \n 如果某个节点 A 比它的子节点（中的一个）小，那么 A 就不配做父节点，应该下去，下面那个更大的节点上来做父节点，这就是对 A 进行 下沉 。 \n \n \n 如果某个节点 A 比它的父节点大，那么 A 不应该做子节点，应该把父节点换下来，自己去做父节点，这就是对 A 的 上浮 。 \n \n \n 当然，错位的节点 A 可能要上浮（或下沉）很多次，才能到达正确的位置，恢复堆的性质。所以代码中肯定有一个 while 循环。 \n 上浮的代码： \n ... \n //上浮第k个元素 \n swim ( k )   { \n   // 如果浮到堆顶，就不能往上浮了 \n   while   ( k  >   1   &&   this . pqArr [ k ]   >   this . pqArr [ this . parent ( k ) ] )   { \n     //如果第k个元素大于其父元素，则交换它们的位置 \n     [ this . pqArr [ k ] ,   this . pqArr [ this . parent ( k ) ] ]   =   [ this . pqArr [ this . parent ( k ) ] ,   this . pqArr [ k ] ] ; \n    k  =   this . parent ( k ) ; \n     } \n } \n ... \n \n 1 2 3 4 5 6 7 8 9 10 11 下层的代码实现： \n 下沉比上浮略微复杂一点，因为上浮某个节点 A，只需要 A 和其父节点比较大小即可； \n 但是下沉某个节点 A，需要 A 和其 两个子节点 比较大小，如果 A 不是最大的就需要调整位置，要把较大的那个子节点和 A 交换。 \n //下沉第k个元素 \n sink ( k )   { \n   while   ( true )   { \n     let  biggerIndex  =  k ; \n     if ( this . left ( k )   <   this . pqArr . length  &&   this . pqArr [ k ]   <   this . pqArr [ this . left ( k ) ] )   { \n      biggerIndex  =   this . left ( k ) ; \n     } \n     if ( this . right ( k )   <   this . pqArr . length  && 　 this . pqArr [ biggerIndex ]   <   this . pqArr [ this . right ( k ) ] )   { \n      biggerIndex  =   this . right ( k ) ; \n     } \n     if ( biggerIndex  ==  k )   break ; \n     [ this . pqArr [ k ] ,   this . pqArr [ biggerIndex ] ]   =   [ this . pqArr [ biggerIndex ] ,   this . pqArr [ k ] ] ; \n    k  =  biggerIndex ; \n   } \n } \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 至此，二叉堆的主要操作就讲完了。明白了 sink 和 swim 的行为，下面就可以实现优先级队列了。 \n 实现delMax 和 insert \n 这两个方法就是建立在swim和sink基础上的。 \n insert方法先把要插入的元素添加到堆底的最后，然后让其上浮到正确的位置。 \n 实现代码： \n insert ( num )   { \n   this . pqArr . push ( num ) ; \n   this . swim ( this . pqArr . length  -   1 ) \n } \n \n 1 2 3 4 delMax方法先把堆顶的元素A和堆底最后的元素B对调，然后删除A，最后让B下沉到正确的位置。 \n delMax ( )   { \n   let  max  =   this . max ( ) ; \n   [ this . pqArr [ 1 ] ,   this . pqArr [ this . pqArr . length  -   1 ] ]   =   [ this . pqArr [ this . pqArr . length  -   1 ] ,   this . pqArr [ 1 ] ] ; \n   this . pqArr . splice ( this . pqArr . length  -   1 ,   1 ) ; \n   this . sink ( 1 ) ; \n   return  max ; \n } \n \n 1 2 3 4 5 6 7 至此，一个优先级队列就实现了，插入和删除元素的时间复杂度为 O(logK)，K 为当前二叉堆（优先级队列）中的元素总数。因为我们时间复杂度主要花费在 sink 或者 swim 上，而不管上浮还是下沉，最多也就树（堆）的高度，也就是 log 级别。 \n 完整优先级队列代码： \n class   PQ   { \n  pqArr  =   [ , ] \n   max ( )   { \n     return   this . pqArr [ 1 ] \n   } \n   insert ( num )   { \n     this . pqArr . push ( num ) ; \n     this . swim ( this . pqArr . length  -   1 ) \n   } \n\n   delMax ( )   { \n     let  max  =   this . max ( ) ; \n     [ this . pqArr [ 1 ] ,   this . pqArr [ this . pqArr . length  -   1 ] ]   =   [ this . pqArr [ this . pqArr . length  -   1 ] ,   this . pqArr [ 1 ] ] ; \n     this . pqArr . splice ( this . pqArr . length  -   1 ,   1 ) ; \n     this . sink ( 1 ) ; \n     return  max ; \n   } \n\n   //上浮第k个元素 \n   swim ( k )   { \n     while   ( k  >   1   &&   this . pqArr [ k ]   >   this . pqArr [ this . parent ( k ) ] )   { \n       [ this . pqArr [ k ] ,   this . pqArr [ this . parent ( k ) ] ]   =   [ this . pqArr [ this . parent ( k ) ] ,   this . pqArr [ k ] ] ; \n      k  =   this . parent ( k ) ; \n     } \n   } \n\n   //下沉第k个元素 \n   sink ( k )   { \n     while   ( true )   { \n       let  biggerIndex  =  k ; \n       if   ( this . left ( k )   <   this . pqArr . length  &&   this . pqArr [ k ]   <   this . pqArr [ this . left ( k ) ] )   { \n        biggerIndex  =   this . left ( k ) ; \n       } \n       if   ( this . right ( k )   <   this . pqArr . length  &&   this . pqArr [ biggerIndex ]   <   this . pqArr [ this . right ( k ) ] )   { \n        biggerIndex  =   this . right ( k ) ; \n       } \n       if   ( biggerIndex  ==  k )   break ; \n       [ this . pqArr [ k ] ,   this . pqArr [ biggerIndex ] ]   =   [ this . pqArr [ biggerIndex ] ,   this . pqArr [ k ] ] ; \n      k  =  biggerIndex ; \n     } \n   } \n\n   parent ( k )   { \n     return  Math . floor ( k  /   2 ) ; \n   } \n\n   left ( k )   { \n     return   2   *  k ; \n   } \n\n   right ( k )   { \n     return   2   *  k  +   1 ; \n   } \n   print ( )   { \n    console . log ( this . pqArr ) ; \n   } \n } \n let  pq  =   new   PQ ( ) ; \npq . insert ( 1 ) ; \npq . insert ( 8 ) ; \npq . insert ( 9 ) ; \npq . insert ( 0 ) ; \npq . insert ( 7 ) ; \npq . insert ( 5 ) ; \npq . insert ( 6 ) ; \npq . insert ( 10 ) ; \npq . insert ( 73 ) ; \npq . print ( ) ; \n\nconsole . log ( pq . delMax ( ) ) ; \npq . print ( ) ; \n\nconsole . log ( pq . delMax ( ) ) ; \npq . print ( ) ; \n \n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 #  最后总结 \n 二叉堆就是一种完全二叉树，所以适合存储在数组中，而且二叉堆拥有一些特殊性质。 \n 二叉堆的操作很简单，主要就是上浮和下沉，来维护堆的性质（堆有序）。 \n 优先级队列是基于二叉堆实现的，主要操作是插入和删除。插入是先插到最后，然后上浮到正确位置；删除是调换位置后再删除，然后下沉到正确位置。 \n ",summary:"\n\n本文主要参考二叉堆详解实现优先级队列。对其作者labuladong表示感谢。\n\n说到二叉堆就不得不提到二叉树，在二叉树中有一种特殊的树叫做完全二叉树，而堆就是一种完全二叉树。因此，堆可以用数组来表示。因为完全二叉树的节点之间存在如下关系：\n\n某个节点(其索引为k)的父节点的索引为(k / 2),其左孩子节点索引为2 * k,右孩子节点为2 * k + 1。正是因为这种关系，才可以用数组来表示堆。\n\n如下图\n\n>注：数组的第一个索引 0 空着不用。因为数组索引是数组，为了方便区分，将字符作为数组元素。\n\n可以看到，把arr[1]作为整棵树的根的话，每个节点的父节点和左右孩子节点的索引都可以通 ...",id:"post",pid:"post",readingTime:{text:"6 min read",minutes:5.845,time:350700,words:1169}},{frontmatter:{layout:"Lifes",title:"Life",readingShow:"top"},regularPath:"/lifes/",key:"v-185333ad",path:"/lifes/",content:""},{frontmatter:{layout:"HandBooks",title:"Handbook",readingShow:"top"},regularPath:"/handbooks/",key:"v-0c991709",path:"/handbooks/",content:""},{frontmatter:{layout:"Emoji",title:"Emoji",readingShow:"top"},regularPath:"/emoji/",key:"v-0c9dce3e",path:"/emoji/",content:""},{frontmatter:{layout:"FrontmatterKey",title:"Tag",readingShow:"top"},regularPath:"/tag/",key:"v-b1564aac",path:"/tag/",content:""},{frontmatter:{layout:"FrontmatterPagination",title:"Linux Tag",readingShow:"top"},regularPath:"/tag/Linux/",key:"v-e14f25f6",path:"/tag/Linux/",content:""},{frontmatter:{layout:"FrontmatterPagination",title:"Ubuntu Tag",readingShow:"top"},regularPath:"/tag/Ubuntu/",key:"v-2c3acc1e",path:"/tag/Ubuntu/",content:""},{frontmatter:{layout:"FrontmatterPagination",title:"前端开发 Tag",readingShow:"top"},regularPath:"/tag/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/",key:"v-67fe8817",path:"/tag/前端开发/",content:""},{frontmatter:{layout:"FrontmatterPagination",title:"JavaScript Tag",readingShow:"top"},regularPath:"/tag/JavaScript/",key:"v-7a5f6990",path:"/tag/JavaScript/",content:""},{frontmatter:{layout:"FrontmatterPagination",title:"Xshell Tag",readingShow:"top"},regularPath:"/tag/Xshell/",key:"v-31970f26",path:"/tag/Xshell/",content:""},{frontmatter:{layout:"FrontmatterPagination",title:"shell Tag",readingShow:"top"},regularPath:"/tag/shell/",key:"v-5c59c9ae",path:"/tag/shell/",content:""},{frontmatter:{layout:"FrontmatterPagination",title:"node Tag",readingShow:"top"},regularPath:"/tag/node/",key:"v-14055bfa",path:"/tag/node/",content:""},{frontmatter:{layout:"FrontmatterPagination",title:"CI Tag",readingShow:"top"},regularPath:"/tag/CI/",key:"v-e8d99cc2",path:"/tag/CI/",content:""},{frontmatter:{layout:"FrontmatterPagination",title:"gitlab Tag",readingShow:"top"},regularPath:"/tag/gitlab/",key:"v-1f64cdac",path:"/tag/gitlab/",content:""},{frontmatter:{layout:"FrontmatterPagination",title:"jenkins Tag",readingShow:"top"},regularPath:"/tag/jenkins/",key:"v-7328d2e3",path:"/tag/jenkins/",content:""},{frontmatter:{layout:"FrontmatterPagination",title:"Leetcode Tag",readingShow:"top"},regularPath:"/tag/Leetcode/",key:"v-76487520",path:"/tag/Leetcode/",content:""},{frontmatter:{layout:"FrontmatterPagination",title:"CSS Tag",readingShow:"top"},regularPath:"/tag/CSS/",key:"v-3259a754",path:"/tag/CSS/",content:""},{frontmatter:{layout:"FrontmatterPagination",title:"Less Tag",readingShow:"top"},regularPath:"/tag/Less/",key:"v-17cc3da8",path:"/tag/Less/",content:""},{frontmatter:{layout:"FrontmatterPagination",title:"算法 Tag",readingShow:"top"},regularPath:"/tag/%E7%AE%97%E6%B3%95/",key:"v-89abd2d6",path:"/tag/算法/",content:""},{frontmatter:{layout:"FrontmatterPagination",title:"计算机组成原理 Tag",readingShow:"top"},regularPath:"/tag/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/",key:"v-4cb5e150",path:"/tag/计算机组成原理/",content:""},{frontmatter:{layout:"FrontmatterPagination",title:"计算机知识 Tag",readingShow:"top"},regularPath:"/tag/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%9F%A5%E8%AF%86/",key:"v-c517f1f0",path:"/tag/计算机知识/",content:""},{frontmatter:{layout:"FrontmatterPagination",title:"转载 Tag",readingShow:"top"},regularPath:"/tag/%E8%BD%AC%E8%BD%BD/",key:"v-e66da3b6",path:"/tag/转载/",content:""},{frontmatter:{layout:"FrontmatterPagination",title:"读书笔记 Tag",readingShow:"top"},regularPath:"/tag/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/",key:"v-71f849b4",path:"/tag/读书笔记/",content:""},{frontmatter:{layout:"FrontmatterPagination",title:"Javascript Tag",readingShow:"top"},regularPath:"/tag/Javascript/",key:"v-5f97b358",path:"/tag/Javascript/",content:""},{frontmatter:{layout:"FrontmatterPagination",title:"前端 Tag",readingShow:"top"},regularPath:"/tag/%E5%89%8D%E7%AB%AF/",key:"v-49a56e2a",path:"/tag/前端/",content:""},{frontmatter:{layout:"FrontmatterPagination",title:"翻译 Tag",readingShow:"top"},regularPath:"/tag/%E7%BF%BB%E8%AF%91/",key:"v-710f084d",path:"/tag/翻译/",content:""},{frontmatter:{layout:"FrontmatterPagination",title:"正则表达式 Tag",readingShow:"top"},regularPath:"/tag/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/",key:"v-a4358e00",path:"/tag/正则表达式/",content:""},{frontmatter:{layout:"FrontmatterPagination",title:"SVG Tag",readingShow:"top"},regularPath:"/tag/SVG/",key:"v-324b07d6",path:"/tag/SVG/",content:""},{frontmatter:{layout:"FrontmatterPagination",title:"工作相关 Tag",readingShow:"top"},regularPath:"/tag/%E5%B7%A5%E4%BD%9C%E7%9B%B8%E5%85%B3/",key:"v-54ff1ad0",path:"/tag/工作相关/",content:""},{frontmatter:{layout:"FrontmatterPagination",title:"Vue Tag",readingShow:"top"},regularPath:"/tag/Vue/",key:"v-32475d9a",path:"/tag/Vue/",content:""},{frontmatter:{layout:"FrontmatterPagination",title:"TypeScript Tag",readingShow:"top"},regularPath:"/tag/TypeScript/",key:"v-bee809c0",path:"/tag/TypeScript/",content:""},{frontmatter:{layout:"FrontmatterPagination",title:"线程 Tag",readingShow:"top"},regularPath:"/tag/%E7%BA%BF%E7%A8%8B/",key:"v-1ab328d2",path:"/tag/线程/",content:""},{frontmatter:{layout:"FrontmatterPagination",title:"Sass Tag",readingShow:"top"},regularPath:"/tag/Sass/",key:"v-170a9792",path:"/tag/Sass/",content:""},{frontmatter:{layout:"FrontmatterPagination",title:"百度小程序 Tag",readingShow:"top"},regularPath:"/tag/%E7%99%BE%E5%BA%A6%E5%B0%8F%E7%A8%8B%E5%BA%8F/",key:"v-7f359a8a",path:"/tag/百度小程序/",content:""},{frontmatter:{layout:"FrontmatterPagination",title:"AST Tag",readingShow:"top"},regularPath:"/tag/AST/",key:"v-325b7892",path:"/tag/AST/",content:""},{frontmatter:{layout:"FrontmatterPagination",title:"babel Tag",readingShow:"top"},regularPath:"/tag/babel/",key:"v-9726c6a2",path:"/tag/babel/",content:""},{frontmatter:{layout:"FrontmatterPagination",title:"Travis Tag",readingShow:"top"},regularPath:"/tag/Travis/",key:"v-118bbe28",path:"/tag/Travis/",content:""},{frontmatter:{layout:"FrontmatterPagination",title:"idea Tag",readingShow:"top"},regularPath:"/tag/idea/",key:"v-149c40a4",path:"/tag/idea/",content:""},{frontmatter:{layout:"FrontmatterPagination",title:"趣谈 Tag",readingShow:"top"},regularPath:"/tag/%E8%B6%A3%E8%B0%88/",key:"v-397a035e",path:"/tag/趣谈/",content:""},{frontmatter:{layout:"FrontmatterPagination",title:"SQL Tag",readingShow:"top"},regularPath:"/tag/SQL/",key:"v-324b2c2a",path:"/tag/SQL/",content:""},{frontmatter:{layout:"FrontmatterPagination",title:"其他 Tag",readingShow:"top"},regularPath:"/tag/%E5%85%B6%E4%BB%96/",key:"v-96a3ae40",path:"/tag/其他/",content:""},{frontmatter:{layout:"FrontmatterPagination",title:"密码学 Tag",readingShow:"top"},regularPath:"/tag/%E5%AF%86%E7%A0%81%E5%AD%A6/",key:"v-00149736",path:"/tag/密码学/",content:""},{frontmatter:{layout:"FrontmatterPagination",title:"数论 Tag",readingShow:"top"},regularPath:"/tag/%E6%95%B0%E8%AE%BA/",key:"v-7fd1851a",path:"/tag/数论/",content:""},{frontmatter:{layout:"Layout",title:"Page 2 | Post",readingShow:"top"},regularPath:"/page/2/",key:"v-8fdafa70",path:"/page/2/",content:""},{frontmatter:{layout:"Layout",title:"Page 3 | Post",readingShow:"top"},regularPath:"/page/3/",key:"v-8fdafa32",path:"/page/3/",content:""},{frontmatter:{layout:"Layout",title:"Page 4 | Post",readingShow:"top"},regularPath:"/page/4/",key:"v-8fdaf9f4",path:"/page/4/",content:""},{frontmatter:{layout:"Layout",title:"Page 5 | Post",readingShow:"top"},regularPath:"/page/5/",key:"v-8fdaf9b6",path:"/page/5/",content:""},{frontmatter:{layout:"Layout",title:"Page 6 | Post",readingShow:"top"},regularPath:"/page/6/",key:"v-8fdaf978",path:"/page/6/",content:""},{frontmatter:{layout:"Layout",title:"Page 7 | Post",readingShow:"top"},regularPath:"/page/7/",key:"v-8fdaf93a",path:"/page/7/",content:""},{frontmatter:{layout:"Layout",title:"Page 8 | Post",readingShow:"top"},regularPath:"/page/8/",key:"v-8fdaf8fc",path:"/page/8/",content:""},{frontmatter:{layout:"Layout",title:"Page 9 | Post",readingShow:"top"},regularPath:"/page/9/",key:"v-8fdaf8be",path:"/page/9/",content:""},{frontmatter:{layout:"Layout",title:"Page 10 | Post",readingShow:"top"},regularPath:"/page/10/",key:"v-4a3dd2c5",path:"/page/10/",content:""},{frontmatter:{layout:"Layout",title:"Page 2 - 前端开发 | Tag",readingShow:"top"},regularPath:"/tag/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/page/2/",key:"v-036d95c6",path:"/tag/前端开发/page/2/",content:""},{frontmatter:{layout:"Layout",title:"Page 3 - 前端开发 | Tag",readingShow:"top"},regularPath:"/tag/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/page/3/",key:"v-036d95e5",path:"/tag/前端开发/page/3/",content:""},{frontmatter:{layout:"Layout",title:"Page 4 - 前端开发 | Tag",readingShow:"top"},regularPath:"/tag/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/page/4/",key:"v-036d9604",path:"/tag/前端开发/page/4/",content:""},{frontmatter:{layout:"Layout",title:"Page 2 - JavaScript | Tag",readingShow:"top"},regularPath:"/tag/JavaScript/page/2/",key:"v-169d88f6",path:"/tag/JavaScript/page/2/",content:""},{frontmatter:{layout:"Layout",title:"Page 3 - JavaScript | Tag",readingShow:"top"},regularPath:"/tag/JavaScript/page/3/",key:"v-169d88b8",path:"/tag/JavaScript/page/3/",content:""},{frontmatter:{layout:"Layout",title:"Page 4 - JavaScript | Tag",readingShow:"top"},regularPath:"/tag/JavaScript/page/4/",key:"v-169d887a",path:"/tag/JavaScript/page/4/",content:""},{frontmatter:{layout:"Layout",title:"Page 5 - JavaScript | Tag",readingShow:"top"},regularPath:"/tag/JavaScript/page/5/",key:"v-169d883c",path:"/tag/JavaScript/page/5/",content:""},{frontmatter:{layout:"Layout",title:"Page 6 - JavaScript | Tag",readingShow:"top"},regularPath:"/tag/JavaScript/page/6/",key:"v-169d87fe",path:"/tag/JavaScript/page/6/",content:""},{frontmatter:{layout:"Layout",title:"Page 7 - JavaScript | Tag",readingShow:"top"},regularPath:"/tag/JavaScript/page/7/",key:"v-169d87c0",path:"/tag/JavaScript/page/7/",content:""},{frontmatter:{layout:"Layout",title:"Page 2 - Leetcode | Tag",readingShow:"top"},regularPath:"/tag/Leetcode/page/2/",key:"v-ae2b5b66",path:"/tag/Leetcode/page/2/",content:""},{frontmatter:{layout:"Layout",title:"Page 3 - Leetcode | Tag",readingShow:"top"},regularPath:"/tag/Leetcode/page/3/",key:"v-ae2b5b28",path:"/tag/Leetcode/page/3/",content:""},{frontmatter:{layout:"Layout",title:"Page 4 - Leetcode | Tag",readingShow:"top"},regularPath:"/tag/Leetcode/page/4/",key:"v-ae2b5aea",path:"/tag/Leetcode/page/4/",content:""},{frontmatter:{layout:"Layout",title:"Page 2 - 计算机知识 | Tag",readingShow:"top"},regularPath:"/tag/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%9F%A5%E8%AF%86/page/2/",key:"v-4f6995b5",path:"/tag/计算机知识/page/2/",content:""},{frontmatter:{layout:"Layout",title:"Page 2 - 转载 | Tag",readingShow:"top"},regularPath:"/tag/%E8%BD%AC%E8%BD%BD/page/2/",key:"v-78cca3f8",path:"/tag/转载/page/2/",content:""},{frontmatter:{layout:"Layout",title:"Page 3 - 转载 | Tag",readingShow:"top"},regularPath:"/tag/%E8%BD%AC%E8%BD%BD/page/3/",key:"v-78cca417",path:"/tag/转载/page/3/",content:""},{frontmatter:{layout:"Layout",title:"Page 4 - 转载 | Tag",readingShow:"top"},regularPath:"/tag/%E8%BD%AC%E8%BD%BD/page/4/",key:"v-78cca436",path:"/tag/转载/page/4/",content:""},{frontmatter:{layout:"Layout",title:"Page 5 - 转载 | Tag",readingShow:"top"},regularPath:"/tag/%E8%BD%AC%E8%BD%BD/page/5/",key:"v-78cca455",path:"/tag/转载/page/5/",content:""},{frontmatter:{layout:"Layout",title:"Page 6 - 转载 | Tag",readingShow:"top"},regularPath:"/tag/%E8%BD%AC%E8%BD%BD/page/6/",key:"v-78cca474",path:"/tag/转载/page/6/",content:""},{frontmatter:{layout:"Layout",title:"Page 2 - 翻译 | Tag",readingShow:"top"},regularPath:"/tag/%E7%BF%BB%E8%AF%91/page/2/",key:"v-284c8cd0",path:"/tag/翻译/page/2/",content:""},{frontmatter:{layout:"Layout",title:"Page 2 - 趣谈 | Tag",readingShow:"top"},regularPath:"/tag/%E8%B6%A3%E8%B0%88/page/2/",key:"v-675c8a4c",path:"/tag/趣谈/page/2/",content:""}],themeConfig:{heroImage:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20211027231332.jpeg",summaryLength:300,translations:{read_more:"Keep reading!",read_this_post:"Read this post now!"},lastUpdated:"Last Updated",cookies:{theme:"dark-lime",buttonText:"Got it!",message:"We use cookies!"},summary:!0,nav:[{text:"Home",link:"/",icon:"el-icon-house"},{text:"Life",link:"/lifes/",icon:"el-icon-lollipop"},{text:"Handbook",link:"/handbooks/",icon:"el-icon-s-management"},{text:"Emoji",link:"/emoji/",emoji:"💕"}],about:{fullName:"Qing",bio:"科幻迷😄  漫威粉🤟  爱前端🥰  爱米线🌟  搓炉石🎮  LOL云玩家🎮  被写代码耽误的大厨🤣",image:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20211027232539.jpeg"},logo:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210414163022.jpeg",friendlink:[{name:"阮一峰个人网站",link:"http://www.ruanyifeng.com/home.html"},{name:"MDN",link:"https://developer.mozilla.org/zh-CN/"},{name:"Hitokoto",link:"https://hitokoto.cn/"}],sitemap:!0,footer:{contact:[{type:"github",link:"https://github.com/yancqs"},{type:"weibo",link:"https://weibo.com/superYoha"},{type:"zhihu",link:"https://www.zhihu.com/people/yoha-32-56"}],copyright:[{text:"Privacy Policy",link:"https://policies.google.com/privacy?hl=en-US"},{text:"MIT Licensed Copyright © 2018-2021",link:""}]},busuanzi:{enable:!0}}},Pn=t(314),On=t.n(Pn);t(187),t(550),t(307);function An(e,n){return(An=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function jn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function In(e,n,t){return(In=jn()?Reflect.construct:function(e,n,t){var i=[null];i.push.apply(i,n);var r=new(Function.bind.apply(e,i));return t&&An(r,t.prototype),r}).apply(null,arguments)}t(551),t(552);function Dn(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Mn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function Ln(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Mn(Object(t),!0).forEach((function(n){Dn(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Mn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}t(553);function Nn(e){e.mixin({computed:{getTranslation:function(){return Ln(Ln({},t(555)),this.$themeConfig.translations)}},methods:{$t:function(e,n){if(e in this.getTranslation){var t=this.getTranslation[e],i=Object.keys(n||[]),r=Object.values(n||[]);return In(Function,Object(Xe.a)(i).concat(["return `".concat(t,"`;")])).apply(void 0,Object(Xe.a)(r))}return e}}})}t(556),t(557),t(558);r.default.component("comment",(function(){return Promise.all([t.e(0),t.e(9)]).then(t.bind(null,644))})),r.default.component("BackToTop",(function(){return Promise.all([t.e(0),t.e(10)]).then(t.bind(null,645))})),r.default.component("BaseListLayout",(function(){return Promise.all([t.e(0),t.e(1),t.e(4)]).then(t.bind(null,637))})),r.default.component("BlogTags",(function(){return Promise.all([t.e(0),t.e(11)]).then(t.bind(null,646))})),r.default.component("Busuanzi",(function(){return Promise.all([t.e(0),t.e(7)]).then(t.bind(null,647))})),r.default.component("NavLink",(function(){return Promise.all([t.e(0),t.e(6)]).then(t.bind(null,648))}));var $n={tag:{Linux:{key:"Linux",scope:"tag",path:"/tag/Linux/",pageKeys:["v-c616719c","v-40342a7c","v-8bc15644","v-44fe3bc0","v-6f6493d2"]},Ubuntu:{key:"Ubuntu",scope:"tag",path:"/tag/Ubuntu/",pageKeys:["v-40342a7c","v-8bc15644"]},"前端开发":{key:"前端开发",scope:"tag",path:"/tag/前端开发/",pageKeys:["v-02428510","v-b80300f0","v-1108103e","v-93e4a8c4","v-1acf2b1e","v-72d7c378","v-0c7d089e","v-7b88550e","v-5650b51e","v-03a57176","v-7fbc829e","v-e2b8eb88","v-07b67c04","v-0ef6168c","v-64936a7a","v-2caf8e7e","v-fb2d2604","v-6e403dbe","v-3a7aa7b2","v-c2b18304"]},JavaScript:{key:"JavaScript",scope:"tag",path:"/tag/JavaScript/",pageKeys:["v-02428510","v-b80300f0","v-1108103e","v-93e4a8c4","v-1acf2b1e","v-72d7c378","v-0c7d089e","v-7b88550e","v-03a57176","v-7fbc829e","v-e2b8eb88","v-07b67c04","v-0ef6168c","v-64936a7a","v-1368c2d0","v-7fadf5fe","v-5192725e","v-b53aa774","v-5137b8a8","v-715cea78","v-6e403dbe","v-3a7aa7b2","v-69fc2000","v-2c73b2f8","v-340ec498","v-02122350","v-03466e5e","v-7ae2d4e4","v-4d0b8f92","v-04f59a88","v-1571973e","v-75403e1e","v-63a42998","v-c2b18304"]},Xshell:{key:"Xshell",scope:"tag",path:"/tag/Xshell/",pageKeys:["v-44fe3bc0"]},shell:{key:"shell",scope:"tag",path:"/tag/shell/",pageKeys:["v-6f6493d2"]},node:{key:"node",scope:"tag",path:"/tag/node/",pageKeys:["v-1108103e","v-93e4a8c4","v-1acf2b1e","v-760ad9c8"]},CI:{key:"CI",scope:"tag",path:"/tag/CI/",pageKeys:["v-6d7c83aa","v-e621ca34"]},gitlab:{key:"gitlab",scope:"tag",path:"/tag/gitlab/",pageKeys:["v-6d7c83aa"]},jenkins:{key:"jenkins",scope:"tag",path:"/tag/jenkins/",pageKeys:["v-6d7c83aa"]},Leetcode:{key:"Leetcode",scope:"tag",path:"/tag/Leetcode/",pageKeys:["v-b6ceae04","v-9e470ed8","v-3f15e68a","v-4dc56a1e","v-3f87a953","v-680deed2","v-0f230c8e","v-1701c584","v-58b09fac","v-7ae50946","v-3f5c41e0","v-7694cd9a","v-0db4363e","v-91bb9904","v-0e58d244","v-7db2b71a"]},CSS:{key:"CSS",scope:"tag",path:"/tag/CSS/",pageKeys:["v-5650b51e","v-64dbd57e","v-e21cc276","v-3b0c6bd4"]},Less:{key:"Less",scope:"tag",path:"/tag/Less/",pageKeys:["v-64dbd57e"]},"算法":{key:"算法",scope:"tag",path:"/tag/算法/",pageKeys:["v-0e58d244","v-7db2b71a"]},"计算机组成原理":{key:"计算机组成原理",scope:"tag",path:"/tag/计算机组成原理/",pageKeys:["v-bb5c619e","v-6880295d","v-320be4a6","v-48bd62e5"]},"计算机知识":{key:"计算机知识",scope:"tag",path:"/tag/计算机知识/",pageKeys:["v-bb5c619e","v-6880295d","v-320be4a6","v-48bd62e5","v-6c5a453c","v-e1b886c4","v-4be3ab3e","v-db94b744"]},"转载":{key:"转载",scope:"tag",path:"/tag/转载/",pageKeys:["v-2caf8e7e","v-6c5a453c","v-b16522c4","v-b53aa774","v-3b0c6bd4","v-112d3ec4","v-69fc2000","v-0ea3989e","v-2c73b2f8","v-db94b744","v-340ec498","v-02122350","v-023be828","v-c6398944","v-338a8c9e","v-7ae2d4e4","v-772ba81e","v-4d0b8f92","v-04f59a88","v-11d8c7be","v-40d4d644","v-1571973e","v-27bd9704","v-444b4f84","v-01b345d4","v-75403e1e","v-0783d65e"]},"读书笔记":{key:"读书笔记",scope:"tag",path:"/tag/读书笔记/",pageKeys:["v-45a6d390","v-1368c2d0","v-7fadf5fe","v-5192725e"]},Javascript:{key:"Javascript",scope:"tag",path:"/tag/Javascript/",pageKeys:["v-4e31b43e","v-7e4e1a04"]},"前端":{key:"前端",scope:"tag",path:"/tag/前端/",pageKeys:["v-4e31b43e","v-7e4e1a04"]},"翻译":{key:"翻译",scope:"tag",path:"/tag/翻译/",pageKeys:["v-b53aa774","v-69fc2000","v-0ea3989e","v-2c73b2f8","v-db94b744","v-340ec498","v-7ae2d4e4","v-04f59a88"]},"正则表达式":{key:"正则表达式",scope:"tag",path:"/tag/正则表达式/",pageKeys:["v-5137b8a8","v-715cea78"]},SVG:{key:"SVG",scope:"tag",path:"/tag/SVG/",pageKeys:["v-3789f57e"]},"工作相关":{key:"工作相关",scope:"tag",path:"/tag/工作相关/",pageKeys:["v-3789f57e"]},Vue:{key:"Vue",scope:"tag",path:"/tag/Vue/",pageKeys:["v-3a7aa7b2"]},TypeScript:{key:"TypeScript",scope:"tag",path:"/tag/TypeScript/",pageKeys:["v-59749606"]},"线程":{key:"线程",scope:"tag",path:"/tag/线程/",pageKeys:["v-e1b886c4"]},Sass:{key:"Sass",scope:"tag",path:"/tag/Sass/",pageKeys:["v-74cf55b0"]},"百度小程序":{key:"百度小程序",scope:"tag",path:"/tag/百度小程序/",pageKeys:["v-2251fb10"]},AST:{key:"AST",scope:"tag",path:"/tag/AST/",pageKeys:["v-11d81cbe"]},babel:{key:"babel",scope:"tag",path:"/tag/babel/",pageKeys:["v-11d81cbe"]},Travis:{key:"Travis",scope:"tag",path:"/tag/Travis/",pageKeys:["v-e621ca34"]},idea:{key:"idea",scope:"tag",path:"/tag/idea/",pageKeys:["v-760ad9c8"]},"趣谈":{key:"趣谈",scope:"tag",path:"/tag/趣谈/",pageKeys:["v-023be828","v-c6398944","v-338a8c9e","v-772ba81e","v-11d8c7be","v-40d4d644","v-27bd9704","v-444b4f84","v-01b345d4"]},SQL:{key:"SQL",scope:"tag",path:"/tag/SQL/",pageKeys:["v-51c9f104"]},"其他":{key:"其他",scope:"tag",path:"/tag/其他/",pageKeys:["v-a2944974"]},"密码学":{key:"密码学",scope:"tag",path:"/tag/密码学/",pageKeys:["v-3ee7d4ba","v-ca70ce04","v-e727f904"]},"数论":{key:"数论",scope:"tag",path:"/tag/数论/",pageKeys:["v-0783d65e"]}}},Fn=function(){function e(n,t){var i=this;ln(this,e),this._metaMap=Object.assign({},n),Object.keys(this._metaMap).forEach((function(e){var n=i._metaMap[e].pageKeys;i._metaMap[e].pages=n.map((function(e){return Object(Ke.b)(t,e)}))}))}return un(e,[{key:"length",get:function(){return Object.keys(this._metaMap).length}},{key:"map",get:function(){return this._metaMap}},{key:"pages",get:function(){return this.list}},{key:"list",get:function(){return this.toArray()}},{key:"toArray",value:function(){var e=this,n=[];return Object.keys(this._metaMap).forEach((function(t){var i=e._metaMap[t],r=i.pages,o=i.path;n.push({name:t,pages:r,path:o})})),n}},{key:"getItemByName",value:function(e){return this._metaMap[e]}}]),e}(),Rn=(t(559),{post:function(e,n){var i=t(80);return i(e.frontmatter.date)-i(n.frontmatter.date)>0?-1:1},life:function(e,n){var i=t(80);return i(e.frontmatter.date)-i(n.frontmatter.date)>0?-1:1},handbook:function(e,n){var i=t(80);return i(e.frontmatter.date)-i(n.frontmatter.date)>0?-1:1},emoji:function(e,n){var i=t(80);return i(e.frontmatter.date)-i(n.frontmatter.date)>0?-1:1},tag:function(e,n){var i=t(80);return i(e.frontmatter.date)-i(n.frontmatter.date)>0?-1:1}}),Bn=(t(198),{post:function(e,n,t){return e.pid===t&&e.id===n},life:function(e,n,t){return e.pid===t&&e.id===n},handbook:function(e,n,t){return e.pid===t&&e.id===n},emoji:function(e,n,t){return e.pid===t&&e.id===n},tag:function(e,n,t){var i=n;return["tag","tags"].some((function(n){var t=e.frontmatter[n];return Array.isArray(t)?t.some((function(e){return e==i})):t==i}))}}),Vn=[{pid:"post",id:"post",filter:Bn.post,sorter:Rn.post,pages:[{path:"/",interval:[0,9]},{path:"/page/2/",interval:[10,19]},{path:"/page/3/",interval:[20,29]},{path:"/page/4/",interval:[30,39]},{path:"/page/5/",interval:[40,49]},{path:"/page/6/",interval:[50,59]},{path:"/page/7/",interval:[60,69]},{path:"/page/8/",interval:[70,79]},{path:"/page/9/",interval:[80,89]},{path:"/page/10/",interval:[90,98]}],prevText:"Prev",nextText:"Next"},{pid:"life",id:"life",filter:Bn.life,sorter:Rn.life,pages:[{path:"/lifes/",interval:[0,3]}],prevText:"Prev",nextText:"Next"},{pid:"handbook",id:"handbook",filter:Bn.handbook,sorter:Rn.handbook,pages:[{path:"/handbooks/",interval:[0,4]}],prevText:"Prev",nextText:"Next"},{pid:"emoji",id:"emoji",filter:Bn.emoji,sorter:Rn.emoji,pages:[],prevText:"Prev",nextText:"Next"},{pid:"tag",id:"Linux",filter:Bn.tag,sorter:Rn.tag,pages:[{path:"/tag/Linux/",interval:[0,4]}],prevText:"Prev",nextText:"Next"},{pid:"tag",id:"Ubuntu",filter:Bn.tag,sorter:Rn.tag,pages:[{path:"/tag/Ubuntu/",interval:[0,2]}],prevText:"Prev",nextText:"Next"},{pid:"tag",id:"前端开发",filter:Bn.tag,sorter:Rn.tag,pages:[{path:"/tag/前端开发/",interval:[0,4]},{path:"/tag/前端开发/page/2/",interval:[5,9]},{path:"/tag/前端开发/page/3/",interval:[10,14]},{path:"/tag/前端开发/page/4/",interval:[15,19]}],prevText:"Prev",nextText:"Next"},{pid:"tag",id:"JavaScript",filter:Bn.tag,sorter:Rn.tag,pages:[{path:"/tag/JavaScript/",interval:[0,4]},{path:"/tag/JavaScript/page/2/",interval:[5,9]},{path:"/tag/JavaScript/page/3/",interval:[10,14]},{path:"/tag/JavaScript/page/4/",interval:[15,19]},{path:"/tag/JavaScript/page/5/",interval:[20,24]},{path:"/tag/JavaScript/page/6/",interval:[25,29]},{path:"/tag/JavaScript/page/7/",interval:[30,34]}],prevText:"Prev",nextText:"Next"},{pid:"tag",id:"Xshell",filter:Bn.tag,sorter:Rn.tag,pages:[{path:"/tag/Xshell/",interval:[0,1]}],prevText:"Prev",nextText:"Next"},{pid:"tag",id:"shell",filter:Bn.tag,sorter:Rn.tag,pages:[{path:"/tag/shell/",interval:[0,1]}],prevText:"Prev",nextText:"Next"},{pid:"tag",id:"node",filter:Bn.tag,sorter:Rn.tag,pages:[{path:"/tag/node/",interval:[0,4]}],prevText:"Prev",nextText:"Next"},{pid:"tag",id:"CI",filter:Bn.tag,sorter:Rn.tag,pages:[{path:"/tag/CI/",interval:[0,2]}],prevText:"Prev",nextText:"Next"},{pid:"tag",id:"gitlab",filter:Bn.tag,sorter:Rn.tag,pages:[{path:"/tag/gitlab/",interval:[0,1]}],prevText:"Prev",nextText:"Next"},{pid:"tag",id:"jenkins",filter:Bn.tag,sorter:Rn.tag,pages:[{path:"/tag/jenkins/",interval:[0,1]}],prevText:"Prev",nextText:"Next"},{pid:"tag",id:"Leetcode",filter:Bn.tag,sorter:Rn.tag,pages:[{path:"/tag/Leetcode/",interval:[0,4]},{path:"/tag/Leetcode/page/2/",interval:[5,9]},{path:"/tag/Leetcode/page/3/",interval:[10,14]},{path:"/tag/Leetcode/page/4/",interval:[15,16]}],prevText:"Prev",nextText:"Next"},{pid:"tag",id:"CSS",filter:Bn.tag,sorter:Rn.tag,pages:[{path:"/tag/CSS/",interval:[0,4]}],prevText:"Prev",nextText:"Next"},{pid:"tag",id:"Less",filter:Bn.tag,sorter:Rn.tag,pages:[{path:"/tag/Less/",interval:[0,1]}],prevText:"Prev",nextText:"Next"},{pid:"tag",id:"算法",filter:Bn.tag,sorter:Rn.tag,pages:[{path:"/tag/算法/",interval:[0,2]}],prevText:"Prev",nextText:"Next"},{pid:"tag",id:"计算机组成原理",filter:Bn.tag,sorter:Rn.tag,pages:[{path:"/tag/计算机组成原理/",interval:[0,4]}],prevText:"Prev",nextText:"Next"},{pid:"tag",id:"计算机知识",filter:Bn.tag,sorter:Rn.tag,pages:[{path:"/tag/计算机知识/",interval:[0,4]},{path:"/tag/计算机知识/page/2/",interval:[5,8]}],prevText:"Prev",nextText:"Next"},{pid:"tag",id:"转载",filter:Bn.tag,sorter:Rn.tag,pages:[{path:"/tag/转载/",interval:[0,4]},{path:"/tag/转载/page/2/",interval:[5,9]},{path:"/tag/转载/page/3/",interval:[10,14]},{path:"/tag/转载/page/4/",interval:[15,19]},{path:"/tag/转载/page/5/",interval:[20,24]},{path:"/tag/转载/page/6/",interval:[25,27]}],prevText:"Prev",nextText:"Next"},{pid:"tag",id:"读书笔记",filter:Bn.tag,sorter:Rn.tag,pages:[{path:"/tag/读书笔记/",interval:[0,4]}],prevText:"Prev",nextText:"Next"},{pid:"tag",id:"Javascript",filter:Bn.tag,sorter:Rn.tag,pages:[{path:"/tag/Javascript/",interval:[0,2]}],prevText:"Prev",nextText:"Next"},{pid:"tag",id:"前端",filter:Bn.tag,sorter:Rn.tag,pages:[{path:"/tag/前端/",interval:[0,2]}],prevText:"Prev",nextText:"Next"},{pid:"tag",id:"翻译",filter:Bn.tag,sorter:Rn.tag,pages:[{path:"/tag/翻译/",interval:[0,4]},{path:"/tag/翻译/page/2/",interval:[5,8]}],prevText:"Prev",nextText:"Next"},{pid:"tag",id:"正则表达式",filter:Bn.tag,sorter:Rn.tag,pages:[{path:"/tag/正则表达式/",interval:[0,2]}],prevText:"Prev",nextText:"Next"},{pid:"tag",id:"SVG",filter:Bn.tag,sorter:Rn.tag,pages:[{path:"/tag/SVG/",interval:[0,1]}],prevText:"Prev",nextText:"Next"},{pid:"tag",id:"工作相关",filter:Bn.tag,sorter:Rn.tag,pages:[{path:"/tag/工作相关/",interval:[0,1]}],prevText:"Prev",nextText:"Next"},{pid:"tag",id:"Vue",filter:Bn.tag,sorter:Rn.tag,pages:[{path:"/tag/Vue/",interval:[0,1]}],prevText:"Prev",nextText:"Next"},{pid:"tag",id:"TypeScript",filter:Bn.tag,sorter:Rn.tag,pages:[{path:"/tag/TypeScript/",interval:[0,1]}],prevText:"Prev",nextText:"Next"},{pid:"tag",id:"线程",filter:Bn.tag,sorter:Rn.tag,pages:[{path:"/tag/线程/",interval:[0,1]}],prevText:"Prev",nextText:"Next"},{pid:"tag",id:"Sass",filter:Bn.tag,sorter:Rn.tag,pages:[{path:"/tag/Sass/",interval:[0,1]}],prevText:"Prev",nextText:"Next"},{pid:"tag",id:"百度小程序",filter:Bn.tag,sorter:Rn.tag,pages:[{path:"/tag/百度小程序/",interval:[0,1]}],prevText:"Prev",nextText:"Next"},{pid:"tag",id:"AST",filter:Bn.tag,sorter:Rn.tag,pages:[{path:"/tag/AST/",interval:[0,1]}],prevText:"Prev",nextText:"Next"},{pid:"tag",id:"babel",filter:Bn.tag,sorter:Rn.tag,pages:[{path:"/tag/babel/",interval:[0,1]}],prevText:"Prev",nextText:"Next"},{pid:"tag",id:"Travis",filter:Bn.tag,sorter:Rn.tag,pages:[{path:"/tag/Travis/",interval:[0,1]}],prevText:"Prev",nextText:"Next"},{pid:"tag",id:"idea",filter:Bn.tag,sorter:Rn.tag,pages:[{path:"/tag/idea/",interval:[0,1]}],prevText:"Prev",nextText:"Next"},{pid:"tag",id:"趣谈",filter:Bn.tag,sorter:Rn.tag,pages:[{path:"/tag/趣谈/",interval:[0,4]},{path:"/tag/趣谈/page/2/",interval:[5,9]}],prevText:"Prev",nextText:"Next"},{pid:"tag",id:"SQL",filter:Bn.tag,sorter:Rn.tag,pages:[{path:"/tag/SQL/",interval:[0,1]}],prevText:"Prev",nextText:"Next"},{pid:"tag",id:"其他",filter:Bn.tag,sorter:Rn.tag,pages:[{path:"/tag/其他/",interval:[0,1]}],prevText:"Prev",nextText:"Next"},{pid:"tag",id:"密码学",filter:Bn.tag,sorter:Rn.tag,pages:[{path:"/tag/密码学/",interval:[0,3]}],prevText:"Prev",nextText:"Next"},{pid:"tag",id:"数论",filter:Bn.tag,sorter:Rn.tag,pages:[{path:"/tag/数论/",interval:[0,1]}],prevText:"Prev",nextText:"Next"}],zn=t(315),qn=t.n(zn)()("plugin-blog:pagination"),Hn=function(){function e(n,t,i){ln(this,e),qn("pagination",n);var r=n.pages,o=n.prevText,a=n.nextText,s=i.path;this._prevText=o,this._nextText=a;for(var l=0,c=r.length;l<c;l++){if(r[l].path===s){this.paginationIndex=l;break}}this.paginationIndex||(this.paginationIndex=0),this._paginationPages=r,this._currentPage=r[this.paginationIndex],this._matchedPages=t.filter((function(e){return n.filter(e,n.id,n.pid)})).sort(n.sorter)}return un(e,[{key:"setIndexPage",value:function(e){this._indexPage=e}},{key:"length",get:function(){return this._paginationPages.length}},{key:"pages",get:function(){var e=Ze(this._currentPage.interval,2),n=e[0],t=e[1];return this._matchedPages.slice(n,t+1)}},{key:"hasPrev",get:function(){return 0!==this.paginationIndex}},{key:"prevLink",get:function(){return this.hasPrev?this.paginationIndex-1==0&&this._indexPage?this._indexPage:this._paginationPages[this.paginationIndex-1].path:null}},{key:"hasNext",get:function(){return this.paginationIndex!==this.length-1}},{key:"nextLink",get:function(){return this.hasNext?this._paginationPages[this.paginationIndex+1].path:null}},{key:"prevText",get:function(){return this._prevText}},{key:"nextText",get:function(){return this._nextText}},{key:"getSpecificPageLink",value:function(e){return this._paginationPages[e].path}}]),e}(),Wn=new(function(){function e(n){ln(this,e),this.paginations=n}return un(e,[{key:"pages",get:function(){return r.default.$vuepress.$get("siteData").pages}},{key:"getPagination",value:function(e,n,t){qn("id",n),qn("pid",e);var i=this.paginations.filter((function(t){return t.id===n&&t.pid===e}))[0];return new Hn(i,this.pages,t)}}]),e}())(Vn),Un={comment:{enabled:!1,service:""},email:{enabled:!1},feed:{rss:!1,atom:!1,json:!1}},Jn=(t(154),t(562),{name:"ReadingProgress",data:function(){return{readingTop:0,readingHeight:1,progressStyle:null,transform:void 0,running:!1}},watch:{$readingShow:function(){this.progressStyle=this.getProgressStyle(),this.$readingShow&&window.addEventListener("scroll",this.base)}},mounted:function(){this.transform=this.getTransform(),this.progressStyle=this.getProgressStyle(),this.$readingShow&&window.addEventListener("scroll",this.base)},beforeDestroy:function(){this.$readingShow&&window.removeEventListener("scroll",this.base)},methods:{base:function(){this.running||(this.running=!0,requestAnimationFrame(this.getReadingBase))},getReadingBase:function(){this.readingHeight=this.getReadingHeight()-this.getScreenHeight(),this.readingTop=this.getReadingTop(),this.progressStyle=this.getProgressStyle(),this.running=!1},getReadingHeight:function(){return Math.max(document.body.scrollHeight,document.body.offsetHeight,0)},getScreenHeight:function(){return Math.max(window.innerHeight,document.documentElement.clientHeight,0)},getReadingTop:function(){return Math.max(window.pageYOffset,document.documentElement.scrollTop,0)},getTransform:function(){var e=document.createElement("div");return["transform","-webkit-transform","-moz-transform","-o-transform","-ms-transform"].find((function(n){return n in e.style}))||void 0},getProgressStyle:function(){var e=this.readingTop/this.readingHeight;switch(this.$readingShow){case"top":case"bottom":return this.transform?"".concat(this.transform,": scaleX(").concat(e,")"):"width: ".concat(100*e,"%");case"left":case"right":return this.transform?"".concat(this.transform,": scaleY(").concat(e,")"):"height: ".concat(100*e,"%");default:return null}}}}),Yn=(t(563),t(7)),Gn=Object(Yn.a)(Jn,(function(){var e=this.$createElement,n=this._self._c||e;return n("ClientOnly",[this.$readingShow?n("div",{staticClass:"reading-progress",class:this.$readingShow},[n("div",{staticClass:"progress",style:this.progressStyle})]):this._e()])}),[],!1,null,"3640397f",null).exports,Kn=(t(564),t(331),t(565),t(566),t(567),[function(e){var n=e.Vue;e.options,e.router,e.siteData;n.use(On.a),n.use(Nn)},{},function(e){e.Vue.mixin({computed:{$dataBlock:function(){return this.$options.__data__block__}}})},{},function(e){var n=e.Vue,t=Object.keys($n).map((function(e){var n,t=$n[e],i="$".concat(e);return Dn(n={},i,(function(){var e=this.$site.pages;return new Fn(t,e)})),Dn(n,"$current".concat(e.charAt(0).toUpperCase()+e.slice(1)),(function(){var e=this.$route.meta.id;return this[i].getItemByName(e)})),n})).reduce((function(e,n){return Object.assign(e,n),e}),{});t.$frontmatterKey=function(){var e=this["$".concat(this.$route.meta.id)];return e||null},n.mixin({computed:t})},function(e){e.Vue.mixin({computed:{$pagination:function(){return this.$route.meta.pid&&this.$route.meta.id?this.$getPagination(this.$route.meta.pid,this.$route.meta.id):null}},methods:{$getPagination:function(e,n){return n=n||e,Wn.getPagination(e,n,this.$route)}}})},function(e){var n={$service:function(){return Un}};e.Vue.mixin({computed:n})},function(e){var n=e.Vue;n.component(Gn.name,Gn),n.mixin({computed:{$readingShow:function(){return this.$page.frontmatter.readingShow}}})},function(e){var n=e.Vue.config.ignoredElements;n.every((function(e){return"/^mjx-/"!==e.toString()}))&&n.push(/^mjx-/)}]),Xn=["ReadingProgress"];t(284);t(262);function Qn(e){return(Qn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Zn=t(316),et=t.n(Zn);function nt(e,n){return!n||"object"!==et()(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}var tt=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&An(e,n)}(r,e);var n,t,i=(n=r,t=jn(),function(){var e,i=Qn(n);if(t){var r=Qn(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return nt(this,e)});function r(){return ln(this,r),i.apply(this,arguments)}return r}(function(){function e(){ln(this,e),this.store=new r.default({data:{state:{}}})}return un(e,[{key:"$get",value:function(e){return this.store.state[e]}},{key:"$set",value:function(e,n){r.default.set(this.store.state,e,n)}},{key:"$emit",value:function(){var e;(e=this.store).$emit.apply(e,arguments)}},{key:"$on",value:function(){var e;(e=this.store).$on.apply(e,arguments)}}]),e}());Object.assign(tt.prototype,{getPageAsyncComponent:Ke.e,getLayoutAsyncComponent:Ke.d,getAsyncComponent:Ke.c,getVueComponent:Ke.f});var it={install:function(e){var n=new tt;e.$vuepress=n,e.prototype.$vuepress=n}};t(82),t(120);function rt(e){e.beforeEach((function(n,t,i){if(ot(e,n.path))i();else if(/(\/|\.html)$/.test(n.path))if(/\/$/.test(n.path)){var r=n.path.replace(/\/$/,"")+".html";ot(e,r)?i(r):i()}else i();else{var o=n.path+"/",a=n.path+".html";ot(e,a)?i(a):ot(e,o)?i(o):i()}}))}function ot(e,n){var t=n.toLowerCase();return e.options.routes.some((function(e){return e.path.toLowerCase()===t}))}var at={props:{pageKey:String,slotKey:{type:String,default:"default"}},render:function(e){var n=this.pageKey||this.$parent.$page.key;return Object(Ke.h)("pageKey",n),r.default.component(n)||r.default.component(n,Object(Ke.e)(n)),r.default.component(n)?e(n):e("")}},st={functional:!0,props:{slotKey:String,required:!0},render:function(e,n){var t=n.props,i=n.slots;return e("div",{class:["content__".concat(t.slotKey)]},i()[t.slotKey])}},lt={computed:{openInNewWindowTitle:function(){return this.$themeLocaleConfig.openNewWindowText||"(opens new window)"}}},ct=(t(568),t(569),Object(Yn.a)(lt,(function(){var e=this.$createElement,n=this._self._c||e;return n("span",[n("svg",{staticClass:"icon outbound",attrs:{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15"}},[n("path",{attrs:{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}}),this._v(" "),n("polygon",{attrs:{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"}})]),this._v(" "),n("span",{staticClass:"sr-only"},[this._v(this._s(this.openInNewWindowTitle))])])}),[],!1,null,null,null).exports);function ut(){return(ut=Object(i.a)(regeneratorRuntime.mark((function e(n){var t,i,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="undefined"!=typeof window&&window.__VUEPRESS_ROUTER_BASE__?window.__VUEPRESS_ROUTER_BASE__:Tn.routerBase||Tn.base,rt(i=new Ye({base:t,mode:"history",fallback:!1,routes:En,scrollBehavior:function(e,n,t){return t||(e.hash?!r.default.$vuepress.$get("disableScrollBehavior")&&{selector:decodeURIComponent(e.hash)}:{x:0,y:0})}})),o={},e.prev=4,e.next=7,Promise.all(Kn.filter((function(e){return"function"==typeof e})).map((function(e){return e({Vue:r.default,options:o,router:i,siteData:Tn,isServer:n})})));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.error(e.t0);case 12:return a=new r.default(Object.assign(o,{router:i,render:function(e){return e("div",{attrs:{id:"app"}},[e("RouterView",{ref:"layout"}),e("div",{class:"global-ui"},Xn.map((function(n){return e(n)})))])}})),e.abrupt("return",{app:a,router:i});case 14:case"end":return e.stop()}}),e,null,[[4,9]])})))).apply(this,arguments)}r.default.config.productionTip=!1,r.default.use(Ye),r.default.use(it),r.default.mixin(function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.default;Ge(n),t.$vuepress.$set("siteData",n);var i=e(t.$vuepress.$get("siteData")),o=new i,a=Object.getOwnPropertyDescriptors(Object.getPrototypeOf(o)),s={};return Object.keys(a).reduce((function(e,n){return n.startsWith("$")&&(e[n]=a[n].get),e}),s),{computed:s}}((function(e){return function(){function n(){ln(this,n)}return un(n,[{key:"setPage",value:function(e){this.__page=e}},{key:"$site",get:function(){return e}},{key:"$themeConfig",get:function(){return this.$site.themeConfig}},{key:"$frontmatter",get:function(){return this.$page.frontmatter}},{key:"$localeConfig",get:function(){var e,n,t=this.$site.locales,i=void 0===t?{}:t;for(var r in i)"/"===r?n=i[r]:0===this.$page.path.indexOf(r)&&(e=i[r]);return e||n||{}}},{key:"$siteTitle",get:function(){return this.$localeConfig.title||this.$site.title||""}},{key:"$canonicalUrl",get:function(){var e=this.$page.frontmatter.canonicalUrl;return"string"==typeof e&&e}},{key:"$title",get:function(){var e=this.$page,n=this.$page.frontmatter.metaTitle;if("string"==typeof n)return n;var t=this.$siteTitle,i=e.frontmatter.home?null:e.frontmatter.title||e.title;return t?i?i+" | "+t:t:i||"VuePress"}},{key:"$description",get:function(){var e=function(e){if(e){var n=e.filter((function(e){return"description"===e.name}))[0];if(n)return n.content}}(this.$page.frontmatter.meta);return e||(this.$page.frontmatter.description||this.$localeConfig.description||this.$site.description||"")}},{key:"$lang",get:function(){return this.$page.frontmatter.lang||this.$localeConfig.lang||"en-US"}},{key:"$localePath",get:function(){return this.$localeConfig.path||"/"}},{key:"$themeLocaleConfig",get:function(){return(this.$site.themeConfig.locales||{})[this.$localePath]||{}}},{key:"$page",get:function(){return this.__page?this.__page:function(e,n){for(var t=0;t<e.length;t++){var i=e[t];if(i.path.toLowerCase()===n.toLowerCase())return i}return{path:"",frontmatter:{}}}(this.$site.pages,this.$route.path)}}]),n}()}),Tn)),r.default.component("Content",at),r.default.component("ContentSlotsDistributor",st),r.default.component("OutboundLink",ct),r.default.component("ClientOnly",{functional:!0,render:function(e,n){var t=n.parent,i=n.children;if(t._isMounted)return i;t.$once("hook:mounted",(function(){t.$forceUpdate()}))}}),r.default.component("Layout",Object(Ke.d)("Layout")),r.default.component("NotFound",Object(Ke.d)("NotFound")),r.default.prototype.$withBase=function(e){var n=this.$site.base;return"/"===e.charAt(0)?n+e.slice(1):e},window.__VUEPRESS__={version:"1.8.2",hash:"06f2163"},function(e){return ut.apply(this,arguments)}(!1).then((function(e){var n=e.app;e.router.onReady((function(){n.$mount("#app")}))}))},function(e,n,t){"use strict";t.r(n);var i=t(48),r=t.n(i),o=t(18),a=t.n(o),s=/%[sdj%]/g;function l(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];var i=1,r=n[0],o=n.length;if("function"==typeof r)return r.apply(null,n.slice(1));if("string"==typeof r){for(var a=String(r).replace(s,(function(e){if("%%"===e)return"%";if(i>=o)return e;switch(e){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":try{return JSON.stringify(n[i++])}catch(e){return"[Circular]"}break;default:return e}})),l=n[i];i<o;l=n[++i])a+=" "+l;return a}return r}function c(e,n){return null==e||(!("array"!==n||!Array.isArray(e)||e.length)||!(!function(e){return"string"===e||"url"===e||"hex"===e||"email"===e||"pattern"===e}(n)||"string"!=typeof e||e))}function u(e,n,t){var i=0,r=e.length;!function o(a){if(a&&a.length)t(a);else{var s=i;i+=1,s<r?n(e[s],o):t([])}}([])}function d(e,n,t,i){if(n.first)return u(function(e){var n=[];return Object.keys(e).forEach((function(t){n.push.apply(n,e[t])})),n}(e),t,i);var r=n.firstFields||[];!0===r&&(r=Object.keys(e));var o=Object.keys(e),a=o.length,s=0,l=[],c=function(e){l.push.apply(l,e),++s===a&&i(l)};o.forEach((function(n){var i=e[n];-1!==r.indexOf(n)?u(i,t,c):function(e,n,t){var i=[],r=0,o=e.length;function a(e){i.push.apply(i,e),++r===o&&t(i)}e.forEach((function(e){n(e,a)}))}(i,t,c)}))}function h(e){return function(n){return n&&n.message?(n.field=n.field||e.fullField,n):{message:n,field:n.field||e.fullField}}}function p(e,n){if(n)for(var t in n)if(n.hasOwnProperty(t)){var i=n[t];"object"===(void 0===i?"undefined":a()(i))&&"object"===a()(e[t])?e[t]=r()({},e[t],i):e[t]=i}return e}var f=function(e,n,t,i,r,o){!e.required||t.hasOwnProperty(e.field)&&!c(n,o||e.type)||i.push(l(r.messages.required,e.fullField))};var m=function(e,n,t,i,r){(/^\s+$/.test(n)||""===n)&&i.push(l(r.messages.whitespace,e.fullField))},g={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},v={integer:function(e){return v.number(e)&&parseInt(e,10)===e},float:function(e){return v.number(e)&&!v.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch(e){return!1}},date:function(e){return"function"==typeof e.getTime&&"function"==typeof e.getMonth&&"function"==typeof e.getYear},number:function(e){return!isNaN(e)&&"number"==typeof e},object:function(e){return"object"===(void 0===e?"undefined":a()(e))&&!v.array(e)},method:function(e){return"function"==typeof e},email:function(e){return"string"==typeof e&&!!e.match(g.email)&&e.length<255},url:function(e){return"string"==typeof e&&!!e.match(g.url)},hex:function(e){return"string"==typeof e&&!!e.match(g.hex)}};var b=function(e,n,t,i,r){if(e.required&&void 0===n)f(e,n,t,i,r);else{var o=e.type;["integer","float","array","regexp","object","method","email","number","date","url","hex"].indexOf(o)>-1?v[o](n)||i.push(l(r.messages.types[o],e.fullField,e.type)):o&&(void 0===n?"undefined":a()(n))!==e.type&&i.push(l(r.messages.types[o],e.fullField,e.type))}};var y={required:f,whitespace:m,type:b,range:function(e,n,t,i,r){var o="number"==typeof e.len,a="number"==typeof e.min,s="number"==typeof e.max,c=n,u=null,d="number"==typeof n,h="string"==typeof n,p=Array.isArray(n);if(d?u="number":h?u="string":p&&(u="array"),!u)return!1;p&&(c=n.length),h&&(c=n.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length),o?c!==e.len&&i.push(l(r.messages[u].len,e.fullField,e.len)):a&&!s&&c<e.min?i.push(l(r.messages[u].min,e.fullField,e.min)):s&&!a&&c>e.max?i.push(l(r.messages[u].max,e.fullField,e.max)):a&&s&&(c<e.min||c>e.max)&&i.push(l(r.messages[u].range,e.fullField,e.min,e.max))},enum:function(e,n,t,i,r){e.enum=Array.isArray(e.enum)?e.enum:[],-1===e.enum.indexOf(n)&&i.push(l(r.messages.enum,e.fullField,e.enum.join(", ")))},pattern:function(e,n,t,i,r){if(e.pattern)if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(n)||i.push(l(r.messages.pattern.mismatch,e.fullField,n,e.pattern));else if("string"==typeof e.pattern){new RegExp(e.pattern).test(n)||i.push(l(r.messages.pattern.mismatch,e.fullField,n,e.pattern))}}};var w=function(e,n,t,i,r){var o=e.type,a=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(c(n,o)&&!e.required)return t();y.required(e,n,i,a,r,o),c(n,o)||y.type(e,n,i,a,r)}t(a)},x={string:function(e,n,t,i,r){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(c(n,"string")&&!e.required)return t();y.required(e,n,i,o,r,"string"),c(n,"string")||(y.type(e,n,i,o,r),y.range(e,n,i,o,r),y.pattern(e,n,i,o,r),!0===e.whitespace&&y.whitespace(e,n,i,o,r))}t(o)},method:function(e,n,t,i,r){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(c(n)&&!e.required)return t();y.required(e,n,i,o,r),void 0!==n&&y.type(e,n,i,o,r)}t(o)},number:function(e,n,t,i,r){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(c(n)&&!e.required)return t();y.required(e,n,i,o,r),void 0!==n&&(y.type(e,n,i,o,r),y.range(e,n,i,o,r))}t(o)},boolean:function(e,n,t,i,r){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(c(n)&&!e.required)return t();y.required(e,n,i,o,r),void 0!==n&&y.type(e,n,i,o,r)}t(o)},regexp:function(e,n,t,i,r){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(c(n)&&!e.required)return t();y.required(e,n,i,o,r),c(n)||y.type(e,n,i,o,r)}t(o)},integer:function(e,n,t,i,r){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(c(n)&&!e.required)return t();y.required(e,n,i,o,r),void 0!==n&&(y.type(e,n,i,o,r),y.range(e,n,i,o,r))}t(o)},float:function(e,n,t,i,r){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(c(n)&&!e.required)return t();y.required(e,n,i,o,r),void 0!==n&&(y.type(e,n,i,o,r),y.range(e,n,i,o,r))}t(o)},array:function(e,n,t,i,r){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(c(n,"array")&&!e.required)return t();y.required(e,n,i,o,r,"array"),c(n,"array")||(y.type(e,n,i,o,r),y.range(e,n,i,o,r))}t(o)},object:function(e,n,t,i,r){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(c(n)&&!e.required)return t();y.required(e,n,i,o,r),void 0!==n&&y.type(e,n,i,o,r)}t(o)},enum:function(e,n,t,i,r){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(c(n)&&!e.required)return t();y.required(e,n,i,o,r),n&&y.enum(e,n,i,o,r)}t(o)},pattern:function(e,n,t,i,r){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(c(n,"string")&&!e.required)return t();y.required(e,n,i,o,r),c(n,"string")||y.pattern(e,n,i,o,r)}t(o)},date:function(e,n,t,i,r){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(c(n)&&!e.required)return t();if(y.required(e,n,i,o,r),!c(n)){var a=void 0;a="number"==typeof n?new Date(n):n,y.type(e,a,i,o,r),a&&y.range(e,a.getTime(),i,o,r)}}t(o)},url:w,hex:w,email:w,required:function(e,n,t,i,r){var o=[],s=Array.isArray(n)?"array":void 0===n?"undefined":a()(n);y.required(e,n,i,o,r,s),t(o)}};function _(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var S=_();function k(e){this.rules=null,this._messages=S,this.define(e)}k.prototype={messages:function(e){return e&&(this._messages=p(_(),e)),this._messages},define:function(e){if(!e)throw new Error("Cannot configure a schema with no rules");if("object"!==(void 0===e?"undefined":a()(e))||Array.isArray(e))throw new Error("Rules must be an object");this.rules={};var n=void 0,t=void 0;for(n in e)e.hasOwnProperty(n)&&(t=e[n],this.rules[n]=Array.isArray(t)?t:[t])},validate:function(e){var n=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments[2],o=e,s=t,c=i;if("function"==typeof s&&(c=s,s={}),this.rules&&0!==Object.keys(this.rules).length){if(s.messages){var u=this.messages();u===S&&(u=_()),p(u,s.messages),s.messages=u}else s.messages=this.messages();var f=void 0,m=void 0,g={},v=s.keys||Object.keys(this.rules);v.forEach((function(t){f=n.rules[t],m=o[t],f.forEach((function(i){var a=i;"function"==typeof a.transform&&(o===e&&(o=r()({},o)),m=o[t]=a.transform(m)),(a="function"==typeof a?{validator:a}:r()({},a)).validator=n.getValidationMethod(a),a.field=t,a.fullField=a.fullField||t,a.type=n.getType(a),a.validator&&(g[t]=g[t]||[],g[t].push({rule:a,value:m,source:o,field:t}))}))}));var b={};d(g,s,(function(e,n){var t=e.rule,i=!("object"!==t.type&&"array"!==t.type||"object"!==a()(t.fields)&&"object"!==a()(t.defaultField));function o(e,n){return r()({},n,{fullField:t.fullField+"."+e})}function c(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],c=a;if(Array.isArray(c)||(c=[c]),c.length,c.length&&t.message&&(c=[].concat(t.message)),c=c.map(h(t)),s.first&&c.length)return b[t.field]=1,n(c);if(i){if(t.required&&!e.value)return c=t.message?[].concat(t.message).map(h(t)):s.error?[s.error(t,l(s.messages.required,t.field))]:[],n(c);var u={};if(t.defaultField)for(var d in e.value)e.value.hasOwnProperty(d)&&(u[d]=t.defaultField);for(var p in u=r()({},u,e.rule.fields))if(u.hasOwnProperty(p)){var f=Array.isArray(u[p])?u[p]:[u[p]];u[p]=f.map(o.bind(null,p))}var m=new k(u);m.messages(s.messages),e.rule.options&&(e.rule.options.messages=s.messages,e.rule.options.error=s.error),m.validate(e.value,e.rule.options||s,(function(e){n(e&&e.length?c.concat(e):e)}))}else n(c)}i=i&&(t.required||!t.required&&e.value),t.field=e.field;var u=t.validator(t,e.value,c,e.source,s);u&&u.then&&u.then((function(){return c()}),(function(e){return c(e)}))}),(function(e){y(e)}))}else c&&c();function y(e){var n,t=void 0,i=void 0,r=[],o={};for(t=0;t<e.length;t++)n=e[t],Array.isArray(n)?r=r.concat.apply(r,n):r.push(n);if(r.length)for(t=0;t<r.length;t++)o[i=r[t].field]=o[i]||[],o[i].push(r[t]);else r=null,o=null;c(r,o)}},getType:function(e){if(void 0===e.type&&e.pattern instanceof RegExp&&(e.type="pattern"),"function"!=typeof e.validator&&e.type&&!x.hasOwnProperty(e.type))throw new Error(l("Unknown rule type %s",e.type));return e.type||"string"},getValidationMethod:function(e){if("function"==typeof e.validator)return e.validator;var n=Object.keys(e),t=n.indexOf("message");return-1!==t&&n.splice(t,1),1===n.length&&"required"===n[0]?x.required:x[this.getType(e)]||!1}},k.register=function(e,n){if("function"!=typeof n)throw new Error("Cannot register a validator by type, validator is not a function");x[e]=n},k.messages=S;n.default=k}]);