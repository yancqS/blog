(window.webpackJsonp=window.webpackJsonp||[]).push([[124],{758:function(t,e,s){"use strict";s.r(e);var a=s(7),r=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"linux软链接和硬链接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#linux软链接和硬链接"}},[t._v("#")]),t._v(" Linux软链接和硬链接")]),t._v(" "),s("h2",{attrs:{id:"linux链接概念"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#linux链接概念"}},[t._v("#")]),t._v(" Linux链接概念")]),t._v(" "),s("p",[t._v("Linux链接分两种，一种被称为硬链接（Hard Link），另一种被称为符号链接（Symbolic Link）。默认情况下，ln命令产生硬链接。")]),t._v(" "),s("blockquote",[s("p",[t._v("关于硬链接在之前的"),s("a",{attrs:{href:"https://yancqs.github.io/blog/2020/05/08/node-fs/",target:"_blank",rel:"noopener noreferrer"}},[t._v("node模块fs"),s("OutboundLink")],1),t._v("中的"),s("code",[t._v("fs.link()")]),t._v("有过介绍。")])]),t._v(" "),s("h3",{attrs:{id:"硬链接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#硬链接"}},[t._v("#")]),t._v(" 硬链接")]),t._v(" "),s("p",[t._v("硬链接指通过索引节点来进行链接。在Linux的文件系统中，保存在磁盘分区中的文件不管是什么类型都给它分配一个编号，称为"),s("strong",[t._v("索引节点号(Inode Index)")]),t._v("。在Linux中，多个文件名指向同一索引节点是存在的。一般这种链接就是"),s("strong",[t._v("硬链接")]),t._v("。硬链接的作用是允许一个文件拥有多个有效路径名，这样用户就可以建立硬链接到重要文件，以防止“误删”的功能。其原因如上所述，因为对应该目录的索引节点有一个以上的链接。只删除一个链接并不影响索引节点本身和其它的链接，只有当最后一个链接被删除后，文件的数据块及目录的链接才会被释放。也就是说，文件真正删除的条件是与之相关的所有硬链接文件均被删除。")]),t._v(" "),s("h3",{attrs:{id:"软链接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#软链接"}},[t._v("#")]),t._v(" 软链接")]),t._v(" "),s("p",[t._v("另外一种链接称之为符号链接（Symbolic Link），也叫软链接。软链接文件有类似于Windows的快捷方式。它实际上是一个特殊的文件。在符号链接中，文件实际上是一个文本文件，其中包含的有另一文件的位置信息。")]),t._v(" "),s("h2",{attrs:{id:"实操部分"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#实操部分"}},[t._v("#")]),t._v(" 实操部分")]),t._v(" "),s("h3",{attrs:{id:"创建硬链接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建硬链接"}},[t._v("#")]),t._v(" 创建硬链接")]),t._v(" "),s("p",[t._v("创建一个测试文件"),s("code",[t._v("test.txt")])]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("touch")]),t._v(" test.txt\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("创建"),s("code",[t._v("test.txt")]),t._v("的一个硬链接"),s("code",[t._v("test-hard.txt")]),t._v(":")]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ln")]),t._v(" test.txt test-hard.txt\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("从结果中可以看出，硬链接文件"),s("code",[t._v("test-hard.txt")]),t._v("与原文件"),s("code",[t._v("test.txt")]),t._v("的inode节点相同，均为19205252")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20220319204935.png",alt:""}})]),t._v(" "),s("p",[t._v("所以修改任何一个文件都会影响另外一个：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20220319205209.png",alt:""}})]),t._v(" "),s("h3",{attrs:{id:"创建软链接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建软链接"}},[t._v("#")]),t._v(" 创建软链接")]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ln")]),t._v(" -s test.txt test-soft.txt\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[s("img",{attrs:{src:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20220319205531.png",alt:""}})]),t._v(" "),s("p",[t._v("可以看到软链接的inode与"),s("code",[t._v("test.txt")]),t._v("文件并不一致。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20220319205949.png",alt:""}})]),t._v(" "),s("h3",{attrs:{id:"删除文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#删除文件"}},[t._v("#")]),t._v(" 删除文件")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://gitee.com/yancqS/blogImage/raw/master/blogImage/20220319212109.jpeg",alt:""}})]),t._v(" "),s("p",[t._v("通过上面的测试可以看出：当删除原始文件"),s("code",[t._v("test.txt")]),t._v("后，硬链接"),s("code",[t._v("test-hard.txt")]),t._v("不受影响，但是符号链接"),s("code",[t._v("test-soft.txt")]),t._v("文件无效。")]),t._v(" "),s("h2",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),s("p",[t._v("依此您可以做一些相关的测试，可以得到以下全部结论：\n1).删除符号(软)链接"),s("code",[t._v("test-soft.txt")]),t._v(", 对"),s("code",[t._v("test.txt")]),t._v(","),s("code",[t._v("test-hard.txt")]),t._v("无影响；\n2).删除硬链接"),s("code",[t._v("test-hard.txt")]),t._v(", 对"),s("code",[t._v("test.txt")]),t._v(","),s("code",[t._v("test-soft.txt")]),t._v("也无影响；\n3).删除原文件"),s("code",[t._v("test.txt")]),t._v(", 对硬链接"),s("code",[t._v("test-hard.txt")]),t._v("没有影响，导致符号(软)链接"),s("code",[t._v("test-soft.txt")]),t._v("失效；\n4).同时删除原文件"),s("code",[t._v("test.txt")]),t._v(", 硬链接"),s("code",[t._v("test-hard.txt")]),t._v("，整个文件会真正的被删除。")]),t._v(" "),s("comment")],1)}),[],!1,null,null,null);e.default=r.exports}}]);