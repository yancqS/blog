<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MySQL必知必会读书笔记 | Yoha&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="本文主要记录在阅读《MySQL必知必会》时的笔记，持续更新。">
    
    <link rel="preload" href="/assets/css/0.styles.87f997a0.css" as="style"><link rel="preload" href="/assets/js/app.ba836f96.js" as="script"><link rel="preload" href="/assets/js/8.29e13592.js" as="script"><link rel="preload" href="/assets/js/21.8a6083e1.js" as="script"><link rel="preload" href="/assets/js/6.a2bb49e4.js" as="script"><link rel="preload" href="/assets/js/7.d453e62b.js" as="script"><link rel="preload" href="/assets/js/10.ddca16e8.js" as="script"><link rel="prefetch" href="/assets/js/1.9f1056d3.js"><link rel="prefetch" href="/assets/js/100.51604c3c.js"><link rel="prefetch" href="/assets/js/101.6532ec5e.js"><link rel="prefetch" href="/assets/js/102.4f3d6458.js"><link rel="prefetch" href="/assets/js/103.a7f0bd98.js"><link rel="prefetch" href="/assets/js/104.27878070.js"><link rel="prefetch" href="/assets/js/105.f353ca1f.js"><link rel="prefetch" href="/assets/js/106.c6134b29.js"><link rel="prefetch" href="/assets/js/107.db401113.js"><link rel="prefetch" href="/assets/js/108.e4343717.js"><link rel="prefetch" href="/assets/js/109.3e138988.js"><link rel="prefetch" href="/assets/js/11.5d18a00b.js"><link rel="prefetch" href="/assets/js/110.8a04ef9d.js"><link rel="prefetch" href="/assets/js/111.6e04187f.js"><link rel="prefetch" href="/assets/js/112.131c176c.js"><link rel="prefetch" href="/assets/js/113.6df41eae.js"><link rel="prefetch" href="/assets/js/114.874c522f.js"><link rel="prefetch" href="/assets/js/115.cb44049e.js"><link rel="prefetch" href="/assets/js/116.097d7696.js"><link rel="prefetch" href="/assets/js/117.1ebb352b.js"><link rel="prefetch" href="/assets/js/118.e540836e.js"><link rel="prefetch" href="/assets/js/119.59a6410d.js"><link rel="prefetch" href="/assets/js/12.e222e1ac.js"><link rel="prefetch" href="/assets/js/120.a79eca55.js"><link rel="prefetch" href="/assets/js/121.7f3fca76.js"><link rel="prefetch" href="/assets/js/122.b67bc62d.js"><link rel="prefetch" href="/assets/js/123.ec218c40.js"><link rel="prefetch" href="/assets/js/124.59542b7d.js"><link rel="prefetch" href="/assets/js/13.f719d8a4.js"><link rel="prefetch" href="/assets/js/14.1483a065.js"><link rel="prefetch" href="/assets/js/15.119fda0f.js"><link rel="prefetch" href="/assets/js/16.8c28e33b.js"><link rel="prefetch" href="/assets/js/17.19137725.js"><link rel="prefetch" href="/assets/js/18.381d829e.js"><link rel="prefetch" href="/assets/js/19.d511d36a.js"><link rel="prefetch" href="/assets/js/20.ad1c9b13.js"><link rel="prefetch" href="/assets/js/22.29ee4e1b.js"><link rel="prefetch" href="/assets/js/23.dda05c59.js"><link rel="prefetch" href="/assets/js/24.89ed0833.js"><link rel="prefetch" href="/assets/js/25.a5e1aca5.js"><link rel="prefetch" href="/assets/js/26.03480ea2.js"><link rel="prefetch" href="/assets/js/27.2868ff8e.js"><link rel="prefetch" href="/assets/js/28.b29d669e.js"><link rel="prefetch" href="/assets/js/29.1be2e911.js"><link rel="prefetch" href="/assets/js/30.0f2d6d95.js"><link rel="prefetch" href="/assets/js/31.076e0d8e.js"><link rel="prefetch" href="/assets/js/32.289e65a1.js"><link rel="prefetch" href="/assets/js/33.cf8c362e.js"><link rel="prefetch" href="/assets/js/34.ea990ec0.js"><link rel="prefetch" href="/assets/js/35.0d2c11e6.js"><link rel="prefetch" href="/assets/js/36.2ae6f816.js"><link rel="prefetch" href="/assets/js/37.62e5d7ee.js"><link rel="prefetch" href="/assets/js/38.92c2bae6.js"><link rel="prefetch" href="/assets/js/39.2be78591.js"><link rel="prefetch" href="/assets/js/4.b2e5ed08.js"><link rel="prefetch" href="/assets/js/40.d0e2a81c.js"><link rel="prefetch" href="/assets/js/41.0d4c0ada.js"><link rel="prefetch" href="/assets/js/42.9a6228dd.js"><link rel="prefetch" href="/assets/js/43.9dd842e4.js"><link rel="prefetch" href="/assets/js/44.2299153c.js"><link rel="prefetch" href="/assets/js/45.d382e459.js"><link rel="prefetch" href="/assets/js/46.4b86b26d.js"><link rel="prefetch" href="/assets/js/47.5127f6b9.js"><link rel="prefetch" href="/assets/js/48.c344914d.js"><link rel="prefetch" href="/assets/js/49.e16b1fd4.js"><link rel="prefetch" href="/assets/js/5.052ff580.js"><link rel="prefetch" href="/assets/js/50.c0b211b3.js"><link rel="prefetch" href="/assets/js/51.eb7fdd9f.js"><link rel="prefetch" href="/assets/js/52.623e16c3.js"><link rel="prefetch" href="/assets/js/53.4883f4f2.js"><link rel="prefetch" href="/assets/js/54.a736d797.js"><link rel="prefetch" href="/assets/js/55.f8d40923.js"><link rel="prefetch" href="/assets/js/56.4d15f28e.js"><link rel="prefetch" href="/assets/js/57.4c27f6ed.js"><link rel="prefetch" href="/assets/js/58.9070c707.js"><link rel="prefetch" href="/assets/js/59.873e6b8e.js"><link rel="prefetch" href="/assets/js/60.5cc2d956.js"><link rel="prefetch" href="/assets/js/61.933c3afe.js"><link rel="prefetch" href="/assets/js/62.8dfff942.js"><link rel="prefetch" href="/assets/js/63.65130b6f.js"><link rel="prefetch" href="/assets/js/64.15ef095e.js"><link rel="prefetch" href="/assets/js/65.33cc0fe5.js"><link rel="prefetch" href="/assets/js/66.db890a2e.js"><link rel="prefetch" href="/assets/js/67.a8eca0cf.js"><link rel="prefetch" href="/assets/js/68.3bdf6104.js"><link rel="prefetch" href="/assets/js/69.b926c89d.js"><link rel="prefetch" href="/assets/js/70.b0ca4e5b.js"><link rel="prefetch" href="/assets/js/71.d28f270d.js"><link rel="prefetch" href="/assets/js/72.b6917457.js"><link rel="prefetch" href="/assets/js/73.53f2256e.js"><link rel="prefetch" href="/assets/js/74.a4f2e774.js"><link rel="prefetch" href="/assets/js/75.921f4947.js"><link rel="prefetch" href="/assets/js/76.3521b25b.js"><link rel="prefetch" href="/assets/js/77.7f5ff6f3.js"><link rel="prefetch" href="/assets/js/78.3d1c3e2e.js"><link rel="prefetch" href="/assets/js/79.862b28c3.js"><link rel="prefetch" href="/assets/js/80.50007e17.js"><link rel="prefetch" href="/assets/js/81.75a294ea.js"><link rel="prefetch" href="/assets/js/82.ebededc2.js"><link rel="prefetch" href="/assets/js/83.97485129.js"><link rel="prefetch" href="/assets/js/84.2de91bcf.js"><link rel="prefetch" href="/assets/js/85.0fd06649.js"><link rel="prefetch" href="/assets/js/86.b9abbc8b.js"><link rel="prefetch" href="/assets/js/87.010f1591.js"><link rel="prefetch" href="/assets/js/88.ba15a5c9.js"><link rel="prefetch" href="/assets/js/89.ab04e829.js"><link rel="prefetch" href="/assets/js/9.ec86c603.js"><link rel="prefetch" href="/assets/js/90.bdacc121.js"><link rel="prefetch" href="/assets/js/91.a95a7c96.js"><link rel="prefetch" href="/assets/js/92.9f4c2041.js"><link rel="prefetch" href="/assets/js/93.379743de.js"><link rel="prefetch" href="/assets/js/94.182f78ed.js"><link rel="prefetch" href="/assets/js/95.3ac32aac.js"><link rel="prefetch" href="/assets/js/96.399b96cb.js"><link rel="prefetch" href="/assets/js/97.01491479.js"><link rel="prefetch" href="/assets/js/98.ab3c69cf.js"><link rel="prefetch" href="/assets/js/99.58c96d13.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.45a43534.js">
    <link rel="stylesheet" href="/assets/css/0.styles.87f997a0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="global-layout d-flex flex-column"><header id="header" class="shadow"><nav class="p-3 d-flex desktop-menu justify-content-between"><div class="d-flex blog-info-wrapper"><a href="/" class="text-decoration-none m-0 router-link-active"><div class="card-img-bg d-inline-block blog-logo"><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/20210414163022.jpeg" height="40px" style="margin-right:10px;"></div></a> <a href="/" class="blog-title router-link-active"><div class="h4 text-center">
          Yoha's Blog
        </div></a></div> <ul role="menubar" class="d-flex justify-content-center border-0 el-menu--horizontal el-menu" style="background-color:;"><li role="menuitem" tabindex="-1" router="" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;"><i class="el-icon-house"></i>
    Home
  </li><li role="menuitem" tabindex="-1" router="" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;"><i class="el-icon-lollipop"></i>
    Life
  </li><li role="menuitem" tabindex="-1" router="" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;"><i class="el-icon-s-management"></i>
    Handbook
  </li><li role="menuitem" tabindex="-1" router="" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;"><span>💕</span>
    Emoji
  </li></ul> <div class="search-wrapper u-px3 d-flex align-items-center"><div aria-haspopup="listbox" role="combobox" aria-owns="el-autocomplete-3850" class="el-autocomplete"><div class="el-input el-input--small"><!----><input type="text" autocomplete="off" valueKey="value" popperClass="components-search" placeholder="Search" fetchSuggestions="function () { [native code] }" debounce="200" placement="bottom-end" popperAppendToBody="true" class="el-input__inner"><!----><!----><!----><!----></div><div role="region" class="el-autocomplete-suggestion el-popper components-search" style="width:;display:none;"><div class="el-scrollbar"><div class="el-autocomplete-suggestion__wrap el-scrollbar__wrap el-scrollbar__wrap--hidden-default"><ul class="el-scrollbar__view el-autocomplete-suggestion__list"></ul></div><div class="el-scrollbar__bar is-horizontal"><div class="el-scrollbar__thumb" style="width:0;transform:translateX(0%);ms-transform:translateX(0%);webkit-transform:translateX(0%);"></div></div><div class="el-scrollbar__bar is-vertical"><div class="el-scrollbar__thumb" style="height:0;transform:translateY(0%);ms-transform:translateY(0%);webkit-transform:translateY(0%);"></div></div></div></div></div></div> <div id="toggle"><div id="top" class="span"></div> <div id="middle" class="span"></div> <div id="bottom" class="span"></div></div></nav> <div class="flex-column align-items-center mobile-menu pb-4"><ul role="menubar" class="d-flex justify-content-center border-0 el-menu--horizontal el-menu" style="background-color:;"><li role="menuitem" tabindex="-1" router="" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;"><i class="el-icon-house"></i>
    Home
  </li><li role="menuitem" tabindex="-1" router="" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;"><i class="el-icon-lollipop"></i>
    Life
  </li><li role="menuitem" tabindex="-1" router="" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;"><i class="el-icon-s-management"></i>
    Handbook
  </li><li role="menuitem" tabindex="-1" router="" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;"><span>💕</span>
    Emoji
  </li></ul> <div class="search-wrapper u-px3 d-flex align-items-center pt-4"><div aria-haspopup="listbox" role="combobox" aria-owns="el-autocomplete-7069" class="el-autocomplete"><div class="el-input el-input--small"><!----><input type="text" autocomplete="off" valueKey="value" popperClass="components-search" placeholder="Search" fetchSuggestions="function () { [native code] }" debounce="200" placement="bottom-end" popperAppendToBody="true" class="el-input__inner"><!----><!----><!----><!----></div><div role="region" class="el-autocomplete-suggestion el-popper components-search" style="width:;display:none;"><div class="el-scrollbar"><div class="el-autocomplete-suggestion__wrap el-scrollbar__wrap el-scrollbar__wrap--hidden-default"><ul class="el-scrollbar__view el-autocomplete-suggestion__list"></ul></div><div class="el-scrollbar__bar is-horizontal"><div class="el-scrollbar__thumb" style="width:0;transform:translateX(0%);ms-transform:translateX(0%);webkit-transform:translateX(0%);"></div></div><div class="el-scrollbar__bar is-vertical"><div class="el-scrollbar__thumb" style="height:0;transform:translateY(0%);ms-transform:translateY(0%);webkit-transform:translateY(0%);"></div></div></div></div></div></div></div></header> <div id="vuperess-theme-blog__post-layout" data-v-5392b086><main class="vuepress-blog-theme-content" data-v-5392b086><div class="el-card my-4 is-always-shadow" data-v-5392b086><!----><div class="el-card__body" style="padding:1rem 2rem;"><div data-v-5392b086><h1 class="text-center text-capitalize" data-v-5392b086>
          MySQL必知必会读书笔记
        </h1> <hr data-v-5392b086> <p class="text-secondary" data-v-5392b086>
          本文主要记录在阅读《MySQL必知必会》时的笔记，持续更新。
        </p> <ul class="languages-list" data-v-5392b086><li data-v-5392b086>
            SQL
          </li></ul></div></div></div> <div class="el-card is-always-shadow" data-v-5392b086><!----><div class="el-card__body" style="padding:1rem 2rem;"><div class="content__default" data-v-5392b086><h1 id="mysql必知必会读书笔记"><a href="#mysql必知必会读书笔记" class="header-anchor">#</a> MySQL必知必会读书笔记</h1> <p>之前根据SQLBolt网站了解了SQL语句，整理了文章<a href="https://yancqs.github.io/blog/2021/10/19/sql/" target="_blank" rel="noopener noreferrer">SQL入门学习<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>本次通过《MySQL必知必会》一书来更加深入且系统的学习下SQL语言。</p> <h2 id="第一章-了解sql"><a href="#第一章-了解sql" class="header-anchor">#</a> 第一章 了解SQL</h2> <h3 id="概念"><a href="#概念" class="header-anchor">#</a> 概念</h3> <ul><li><strong>数据库(database)</strong>：保存有组织的数据的容器。</li> <li><strong>表(table)</strong>：某种特定类型数据的结构化清单。</li> <li><strong>模式(scheme)</strong>：关于数据库和表的布局及特性信息。</li> <li><strong>列(column)</strong>：表由列组成。所有表都是由一个或多个列组成的。</li> <li><strong>数据类型(datatype)</strong>：所容许的数据的类型。每个表列都有相应的数据类型，它限制改列中存储的数据。</li> <li><strong>行(row)</strong>：表中的一个记录。</li> <li><strong>主键(primary key)</strong>：一列（或<strong>一组列</strong>），其值能够唯一区分表中每个行。表中的任何列都可以作为主键，只要它满足一下条件
<ul><li>任意两行都不具有相同的主键值</li> <li>每个行都必须具有一个主键值（主键列不允许NULL值）</li></ul></li></ul> <blockquote><p>主键的好习惯：</p> <ol><li>不更新主键列中的值</li> <li>不重用主键列的值</li> <li>不在主键列中使用可能会更改的值。</li></ol></blockquote> <ul><li><strong>SQL</strong>：结构化查询语言（Structured Query Language）</li></ul> <h2 id="第二章-mysql简介"><a href="#第二章-mysql简介" class="header-anchor">#</a> 第二章 MySQL简介</h2> <p>本章主要介绍了什么是MySQL，并引入了几个客户机实用程序。</p> <blockquote><p>个人还是推荐Navicat premium</p></blockquote> <h2 id="第三章-使用mysql"><a href="#第三章-使用mysql" class="header-anchor">#</a> 第三章 使用MySQL</h2> <h3 id="连接"><a href="#连接" class="header-anchor">#</a> 连接</h3> <p>为了连接到MySQL，需要以下信息：</p> <ul><li>主机名：如果连接到本地MySQL服务器，为<code>localhost</code></li> <li>端口：默认是3306</li> <li>一个合法的用户名</li> <li>用户密码</li></ul> <p><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/20211129222627.png" alt=""></p> <h3 id="选择数据库"><a href="#选择数据库" class="header-anchor">#</a> 选择数据库</h3> <p>关键字<code>USE</code>、<code>SHOW</code>;</p> <p>显示可用的数据库列表：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">show</span> <span class="token keyword">databases</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; show databases;
+--------------------+
| Database           |
+--------------------+
| customers          |
| information_schema |
| mysql              |
| performance_schema |
| sql_learn          |
| sys                |
+--------------------+
6 rows in set (0.01 sec)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>使用<code>USE</code>关键字选择一个数据库,并且用<code>SHOW</code>获取数据库内表的列表：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">use</span> customers<span class="token punctuation">;</span>
<span class="token keyword">show</span> <span class="token keyword">tables</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; use customers;
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
mysql&gt; show tables;
+---------------------+
| Tables_in_customers |
+---------------------+
| customers           |
| orderitems          |
| orders              |
| productnotes        |
| products            |
| vendors             |
+---------------------+
6 rows in set (0.00 sec)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p><code>SHOW</code>也可以用来显示表列：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">show</span> <span class="token keyword">columns</span> <span class="token keyword">from</span> customers<span class="token punctuation">;</span>
<span class="token comment">//或</span>
<span class="token keyword">describe</span> customers<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; show columns from customers;
+--------------+-----------+------+-----+---------+----------------+
| Field        | Type      | Null | Key | Default | Extra          |
+--------------+-----------+------+-----+---------+----------------+
| cust_id      | int       | NO   | PRI | NULL    | auto_increment |
| cust_name    | char(50)  | NO   |     | NULL    |                |
| cust_address | char(50)  | YES  |     | NULL    |                |
| cust_city    | char(50)  | YES  |     | NULL    |                |
| cust_state   | char(5)   | YES  |     | NULL    |                |
| cust_zip     | char(10)  | YES  |     | NULL    |                |
| cust_country | char(50)  | YES  |     | NULL    |                |
| cust_contact | char(50)  | YES  |     | NULL    |                |
| cust_email   | char(255) | YES  |     | NULL    |                |
+--------------+-----------+------+-----+---------+----------------+
9 rows in set (0.00 sec)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><blockquote><p>什么是自动增量？</p> <p>某些表列需要唯一值。例如订单编号、雇员ID等。在每个行添加到表中时，MySQL可以自动地为每个行分配下一个可用编号，不用在添加一行时手动分配唯一值。这个功能就是所谓的自动增量。</p></blockquote> <h3 id="其他show语句"><a href="#其他show语句" class="header-anchor">#</a> 其他SHOW语句</h3> <ul><li><code>SHOW STATUS;</code>，用于显示广泛的服务器状态信息；</li> <li><code>SHOW CREATE DATABASE &lt;base_name&gt;</code>和<code>SHOW CREATE TABLE &lt;table_name&gt;</code>，分别用来显示创建特定数据库或表的MySQL语句。</li></ul> <blockquote><p>执行<code>HELP SHOW;</code>显示运行的<code>SHOW</code>语句。</p></blockquote> <h2 id="第四章-检索数据"><a href="#第四章-检索数据" class="header-anchor">#</a> 第四章 检索数据</h2> <h3 id="检索单个列"><a href="#检索单个列" class="header-anchor">#</a> 检索单个列</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> prod_name <span class="token keyword">from</span> products<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>利用<code>SELECT</code>语句从<code>products</code>表中检索一个名为<code>prod_name</code>的列。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; select prod_name from products;
+----------------+
| prod_name      |
+----------------+
| .5 ton anvil   |
| 1 ton anvil    |
| 2 ton anvil    |
| Detonator      |
| Bird seed      |
| Carrots        |
| Fuses          |
| JetPack 1000   |
| JetPack 2000   |
| Oil can        |
| Safe           |
| Sling          |
| TNT (1 stick)  |
| TNT (5 sticks) |
+----------------+
14 rows in set (0.00 sec)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><blockquote><p>注意：SQL语句不区分大小写。</p></blockquote> <h3 id="检索多个列"><a href="#检索多个列" class="header-anchor">#</a> 检索多个列</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> prod_id<span class="token punctuation">,</span> prod_name<span class="token punctuation">,</span> prod_price <span class="token keyword">from</span> products<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; select prod_id, prod_name, prod_price from products;
+---------+----------------+------------+
| prod_id | prod_name      | prod_price |
+---------+----------------+------------+
| ANV01   | .5 ton anvil   |       5.99 |
| ANV02   | 1 ton anvil    |       9.99 |
| ANV03   | 2 ton anvil    |      14.99 |
| DTNTR   | Detonator      |      13.00 |
| FB      | Bird seed      |      10.00 |
| FC      | Carrots        |       2.50 |
| FU1     | Fuses          |       3.42 |
| JP1000  | JetPack 1000   |      35.00 |
| JP2000  | JetPack 2000   |      55.00 |
| OL1     | Oil can        |       8.99 |
| SAFE    | Safe           |      50.00 |
| SLING   | Sling          |       4.49 |
| TNT1    | TNT (1 stick)  |       2.50 |
| TNT2    | TNT (5 sticks) |      10.00 |
+---------+----------------+------------+
14 rows in set (0.00 sec)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="检索所有列"><a href="#检索所有列" class="header-anchor">#</a> 检索所有列</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> products<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/20211130215805.png" alt=""></p> <blockquote><p>注意：一般，除非你真的需要表中的每个列，否则最好别使用*通配符。因为检索不需要的的列通常会降低检索和应用程序的性能。</p></blockquote> <h3 id="检索不同行"><a href="#检索不同行" class="header-anchor">#</a> 检索不同行</h3> <p>关键字<code>DISTINCT</code>;顾名思义，此关键字指示MySQL只返回不同的值。</p> <p>正如所见，<code>SELECT</code>返回所有匹配的行。但是，如果你不想要每个值每次都出现，怎么办？例如，你想要的出products表中产品的所有供应商ID：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> vend_id <span class="token keyword">from</span> products<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>SELECT</code>语句返回14行（即使表中只有4个供货商）。那么，如何检索出有不同值的列表呢？</p> <p>解决办法时使用<code>DISTINCT</code>关键字。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token keyword">distinct</span> vend_id <span class="token keyword">from</span> products<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; select distinct vend_id from products;
+---------+
| vend_id |
+---------+
|    1001 |
|    1002 |
|    1003 |
|    1005 |
+---------+
4 rows in set (0.00 sec)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><blockquote><p>不能部分使用DISTINCT。<code>DISTINCT</code>关键字应用于所有列而不仅是前置它的列。如果给出<code>SELECT DISTINCT vend_id, prod_price from products</code>，除非指定的两个列都相同，否则所有行都将被检索出来。</p></blockquote> <h3 id="限制结果"><a href="#限制结果" class="header-anchor">#</a> 限制结果</h3> <p>为了返回第一行或前几行，可使用<code>LIMIT</code>子句。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> prod_name <span class="token keyword">from</span> products <span class="token keyword">limit</span> <span class="token number">5</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; select prod_name from products limit 5;
+--------------+
| prod_name    |
+--------------+
| .5 ton anvil |
| 1 ton anvil  |
| 2 ton anvil  |
| Detonator    |
| Bird seed    |
+--------------+
5 rows in set (0.00 sec)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> prod_name <span class="token keyword">from</span> products <span class="token keyword">limit</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>LIMIT 5, 5</code>表示返回从行5开始的5行。<strong>第一个数为开始的位置，第二个数为要检索的行数。</strong></p> <blockquote><p>由于这种写法很容易把人搞糊涂，建议使用<code>LIMIT 5 OFFSET 5</code>;</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; select prod_name from products limit 5, 5;
+--------------+
| prod_name    |
+--------------+
| Carrots      |
| Fuses        |
| JetPack 1000 |
| JetPack 2000 |
| Oil can      |
+--------------+
5 rows in set (0.00 sec)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><blockquote><p>行0：检索出来的第一行为行0而不是行1.</p></blockquote> <blockquote><p>MySQL 5支持另外一种替代语法：</p> <p><code>LIMIT 3, 4</code>等价于<code>LIMIT 4 OFFSET 3</code></p></blockquote> <h3 id="使用完全限定的表名"><a href="#使用完全限定的表名" class="header-anchor">#</a> 使用完全限定的表名</h3> <p>迄今为止使用的SQL例子只通过列明引用列。也可能使用完全限制的名字来引用列（同时使用表名和列名），比如：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> products<span class="token punctuation">.</span>prod_name <span class="token keyword">from</span> customers<span class="token punctuation">.</span>products<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="第五章-排序检索数据"><a href="#第五章-排序检索数据" class="header-anchor">#</a> 第五章 排序检索数据</h2> <p>关系数据库设计理论认为，如果不明确规定顺序排序，则不应该假定检索出的数据的顺序有意义。</p> <h3 id="排序数据"><a href="#排序数据" class="header-anchor">#</a> 排序数据</h3> <ul><li><strong>子句</strong>：SQL语句由子句构成，有些子句是必须的，而有些是可选的。子句的例子有<code>SELECT</code>语句的<code>FROM</code>子句。</li></ul> <p>为了明确地排序用<code>SELECT</code>语句检索出的数据，可使用<code>ORDER BY</code>子句。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> prod_name <span class="token keyword">from</span> products <span class="token keyword">order</span> <span class="token keyword">by</span> prod_name<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; select prod_name from products order by prod_name;
+----------------+
| prod_name      |
+----------------+
| .5 ton anvil   |
| 1 ton anvil    |
| 2 ton anvil    |
| Bird seed      |
| Carrots        |
| Detonator      |
| Fuses          |
| JetPack 1000   |
| JetPack 2000   |
| Oil can        |
| Safe           |
| Sling          |
| TNT (1 stick)  |
| TNT (5 sticks) |
+----------------+
14 rows in set (0.00 sec)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><blockquote><p>用非检索的列排序数据是完全合法的。</p></blockquote> <h3 id="按多个列排序"><a href="#按多个列排序" class="header-anchor">#</a> 按多个列排序</h3> <p>下面检索3个列，并按其中两个列对结果进行排序——首先按价格，然后再按名称排序。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> prod_id<span class="token punctuation">,</span> prod_price<span class="token punctuation">,</span> prod_name <span class="token keyword">from</span> products <span class="token keyword">order</span> <span class="token keyword">by</span> prod_price<span class="token punctuation">,</span> prod_name<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; select prod_id, prod_price, prod_name from products order by prod_price, prod_name;
+---------+------------+----------------+
| prod_id | prod_price | prod_name      |
+---------+------------+----------------+
| FC      |       2.50 | Carrots        |
| TNT1    |       2.50 | TNT (1 stick)  |
| FU1     |       3.42 | Fuses          |
| SLING   |       4.49 | Sling          |
| ANV01   |       5.99 | .5 ton anvil   |
| OL1     |       8.99 | Oil can        |
| ANV02   |       9.99 | 1 ton anvil    |
| FB      |      10.00 | Bird seed      |
| TNT2    |      10.00 | TNT (5 sticks) |
| DTNTR   |      13.00 | Detonator      |
| ANV03   |      14.99 | 2 ton anvil    |
| JP1000  |      35.00 | JetPack 1000   |
| SAFE    |      50.00 | Safe           |
| JP2000  |      55.00 | JetPack 2000   |
+---------+------------+----------------+
14 rows in set (0.00 sec)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>重要的是理解在按多个列排序时，排序完全按照所规定的顺序进行。</p> <p>对于上述例子的输出，仅在多个行具有相同的prod_price值时才对产品的prod_name进行排序。如果prod_price列中所有的值都是唯一的，则不会按prod_name排序。</p> <h3 id="指定排序方向"><a href="#指定排序方向" class="header-anchor">#</a> 指定排序方向</h3> <p>默认是升序排序，我们还可以使用<code>ORDER BY</code>子句降序排序，此时需要指定关键字<code>DESC</code>;</p> <ul><li><code>DESC</code>：降序</li> <li><code>ASC</code>：升序，默认</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> prod_id<span class="token punctuation">,</span> prod_price<span class="token punctuation">,</span> prod_name <span class="token keyword">from</span> products <span class="token keyword">order</span> <span class="token keyword">by</span> prod_price <span class="token keyword">desc</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; select prod_id, prod_price, prod_name from products order by prod_price desc;
+---------+------------+----------------+
| prod_id | prod_price | prod_name      |
+---------+------------+----------------+
| JP2000  |      55.00 | JetPack 2000   |
| SAFE    |      50.00 | Safe           |
| JP1000  |      35.00 | JetPack 1000   |
| ANV03   |      14.99 | 2 ton anvil    |
| DTNTR   |      13.00 | Detonator      |
| FB      |      10.00 | Bird seed      |
| TNT2    |      10.00 | TNT (5 sticks) |
| ANV02   |       9.99 | 1 ton anvil    |
| OL1     |       8.99 | Oil can        |
| ANV01   |       5.99 | .5 ton anvil   |
| SLING   |       4.49 | Sling          |
| FU1     |       3.42 | Fuses          |
| FC      |       2.50 | Carrots        |
| TNT1    |       2.50 | TNT (1 stick)  |
+---------+------------+----------------+
14 rows in set (0.00 sec)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>如果打算对多个列排序：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> prod_id<span class="token punctuation">,</span> prod_price<span class="token punctuation">,</span> prod_name <span class="token keyword">from</span> products <span class="token keyword">order</span> <span class="token keyword">by</span> prod_price <span class="token keyword">desc</span><span class="token punctuation">,</span> prod_name<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>DESC</code>关键字只应用到直接位于其前面的列名。如果想在多个列上进行降序排序，必须对每个列指定<code>DESC</code>关键字。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; select prod_id, prod_price, prod_name from products order by prod_price desc, prod_name;
+---------+------------+----------------+
| prod_id | prod_price | prod_name      |
+---------+------------+----------------+
| JP2000  |      55.00 | JetPack 2000   |
| SAFE    |      50.00 | Safe           |
| JP1000  |      35.00 | JetPack 1000   |
| ANV03   |      14.99 | 2 ton anvil    |
| DTNTR   |      13.00 | Detonator      |
| FB      |      10.00 | Bird seed      |
| TNT2    |      10.00 | TNT (5 sticks) |
| ANV02   |       9.99 | 1 ton anvil    |
| OL1     |       8.99 | Oil can        |
| ANV01   |       5.99 | .5 ton anvil   |
| SLING   |       4.49 | Sling          |
| FU1     |       3.42 | Fuses          |
| FC      |       2.50 | Carrots        |
| TNT1    |       2.50 | TNT (1 stick)  |
+---------+------------+----------------+
14 rows in set (0.01 sec)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h4 id="注意⚠️"><a href="#注意⚠️" class="header-anchor">#</a> 注意⚠️</h4> <p><code>ORDER BY</code>子句的位置，在给出<code>ORDER BY</code>子句时，应该保证它位于<code>FROM</code>子句之后，如果要使用<code>LIMIT</code>，它必须位于<code>ORDER BY</code>之后。使用子句的次序不对将产生错误消息。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">&lt;</span><span class="token keyword">column</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token operator">&lt;</span>another_column<span class="token operator">&gt;</span><span class="token punctuation">,</span> …
<span class="token keyword">FROM</span> <span class="token operator">&lt;</span>mytable<span class="token operator">&gt;</span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token operator">&lt;</span><span class="token keyword">column</span><span class="token operator">&gt;</span> <span class="token keyword">ASC</span><span class="token operator">/</span><span class="token keyword">DESC</span>
<span class="token keyword">LIMIT</span> <span class="token operator">&lt;</span>num_limit<span class="token operator">&gt;</span> <span class="token keyword">OFFSET</span> <span class="token operator">&lt;</span>num_offset<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="第六章-过滤数据"><a href="#第六章-过滤数据" class="header-anchor">#</a> 第六章 过滤数据</h2> <h3 id="使用where子句"><a href="#使用where子句" class="header-anchor">#</a> 使用WHERE子句</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> prod_name<span class="token punctuation">,</span> prod_price <span class="token keyword">from</span> products <span class="token keyword">where</span> prod_price<span class="token operator">=</span><span class="token number">2.50</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; select prod_name, prod_price from products where prod_price=2.50;
+---------------+------------+
| prod_name     | prod_price |
+---------------+------------+
| Carrots       |       2.50 |
| TNT (1 stick) |       2.50 |
+---------------+------------+
2 rows in set (0.00 sec)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><p><code>WHERE</code>子句的位置：在同时使用<code>WHERE</code>子句和<code>ORDER BY</code>子句时，应该让<code>ORDER BY</code>位于<code>WHERE</code>之后，否则将会产生错误。</p></blockquote> <h3 id="where子句操作符"><a href="#where子句操作符" class="header-anchor">#</a> WHERE子句操作符</h3> <p><code>WHERE</code>子句操作符：</p> <table><thead><tr><th>操作符</th> <th>说明</th></tr></thead> <tbody><tr><td>=</td> <td>等于</td></tr> <tr><td>&lt;&gt;</td> <td>不等于</td></tr> <tr><td>!=</td> <td>不等于</td></tr> <tr><td>&lt;</td> <td>小于</td></tr> <tr><td>&lt;=</td> <td>小于等于</td></tr> <tr><td>&gt;</td> <td>大于</td></tr> <tr><td>&gt;=</td> <td>大于等于</td></tr> <tr><td>BETWEEN...AND...</td> <td>在指定的两个值之间</td></tr></tbody></table> <h4 id="范围值检查"><a href="#范围值检查" class="header-anchor">#</a> 范围值检查</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> prod_name<span class="token punctuation">,</span> prod_price <span class="token keyword">from</span> products <span class="token keyword">where</span> prod_price <span class="token operator">between</span> <span class="token number">10</span> <span class="token operator">and</span> <span class="token number">30</span> <span class="token keyword">order</span> <span class="token keyword">by</span> prod_price <span class="token keyword">asc</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; select prod_name, prod_price from products where prod_price between 10 and 30 order by prod_price asc;
+----------------+------------+
| prod_name      | prod_price |
+----------------+------------+
| Bird seed      |      10.00 |
| TNT (5 sticks) |      10.00 |
| Detonator      |      13.00 |
| 2 ton anvil    |      14.99 |
+----------------+------------+
4 rows in set (0.00 sec)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="不匹配检查"><a href="#不匹配检查" class="header-anchor">#</a> 不匹配检查</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> vend_id<span class="token punctuation">,</span> prod_name <span class="token keyword">from</span> products <span class="token keyword">where</span> vend_id<span class="token operator">!=</span><span class="token number">1003</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; select vend_id, prod_name from products where vend_id!=1003;
+---------+--------------+
| vend_id | prod_name    |
+---------+--------------+
|    1001 | .5 ton anvil |
|    1001 | 1 ton anvil  |
|    1001 | 2 ton anvil  |
|    1002 | Fuses        |
|    1002 | Oil can      |
|    1005 | JetPack 1000 |
|    1005 | JetPack 2000 |
+---------+--------------+
7 rows in set (0.00 sec)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="单个值检查"><a href="#单个值检查" class="header-anchor">#</a> 单个值检查</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> prod_name<span class="token punctuation">,</span> prod_price <span class="token keyword">from</span> products <span class="token keyword">where</span> prod_name <span class="token operator">=</span> <span class="token string">'fuses'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; select prod_name, prod_price from products where prod_name = 'fuses';
+-----------+------------+
| prod_name | prod_price |
+-----------+------------+
| Fuses     |       3.42 |
+-----------+------------+
1 row in set (0.00 sec)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><blockquote><p>何时使用引号？单引号用来限定字符串。如果将值与串类型的列进行比较，则需要限定引号。用来与数值列进行比较的值不用引号。</p></blockquote> <h4 id="空值检查"><a href="#空值检查" class="header-anchor">#</a> 空值检查</h4> <p>在创建表时，表设计人员可以指定其中的列是否可以不包含值。在一个列不包含值时，称其为包含空值<code>NULL</code>。</p> <blockquote><p><code>NULL</code>,无值（no value），它与字段包含0、空字符串或仅仅包含空格不同。</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> cust_id <span class="token keyword">from</span> customers <span class="token keyword">where</span> cust_email <span class="token operator">is</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; select cust_id from customers where cust_email is null;
+---------+
| cust_id |
+---------+
|   10002 |
|   10005 |
+---------+
2 rows in set (0.01 sec)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="第七章-数据过滤"><a href="#第七章-数据过滤" class="header-anchor">#</a> 第七章 数据过滤</h2> <p>在第六章介绍的所有<code>WHERE</code>子句在过滤时使用的都是单一的条件。</p> <p>为了进行更强的过滤控制，MySQL允许给出多个<code>WHERE</code>子句。这些子句可以两种方式使用：以<code>AND</code>子句的方式活以<code>OR</code>子句的方式。</p> <h3 id="and操作符"><a href="#and操作符" class="header-anchor">#</a> AND操作符</h3> <p><code>AND</code>用于检索满足所有给定条件的行；</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> prod_id<span class="token punctuation">,</span> prod_price<span class="token punctuation">,</span> prod_name <span class="token keyword">from</span> products <span class="token keyword">where</span> vend_id <span class="token operator">=</span> <span class="token number">1003</span> <span class="token operator">and</span> prod_price <span class="token operator">&lt;=</span> <span class="token number">10</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; select prod_id, prod_price, prod_name from products where vend_id = 1003 and prod_price &lt;= 10;
+---------+------------+----------------+
| prod_id | prod_price | prod_name      |
+---------+------------+----------------+
| FB      |      10.00 | Bird seed      |
| FC      |       2.50 | Carrots        |
| SLING   |       4.49 | Sling          |
| TNT1    |       2.50 | TNT (1 stick)  |
| TNT2    |      10.00 | TNT (5 sticks) |
+---------+------------+----------------+
5 rows in set (0.00 sec)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>上述例子中使用了只包含一个关键字<code>AND</code>的语句，把两个过滤条件组合在一起。还可以添加多个过滤条件，每添加一条就要使用一个<code>AND</code>。</p> <h3 id="or操作符"><a href="#or操作符" class="header-anchor">#</a> OR操作符</h3> <p><code>OR</code>用于检索匹配任一给定条件的行。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> prod_name<span class="token punctuation">,</span> prod_price<span class="token punctuation">,</span> vend_id <span class="token keyword">from</span> products <span class="token keyword">where</span> vend_id <span class="token operator">=</span> <span class="token number">1002</span> <span class="token operator">or</span> vend_id <span class="token operator">=</span> <span class="token number">1003</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; select prod_name, prod_price, vend_id from products where vend_id = 1002 or vend_id = 1003;
+----------------+------------+---------+
| prod_name      | prod_price | vend_id |
+----------------+------------+---------+
| Fuses          |       3.42 |    1002 |
| Oil can        |       8.99 |    1002 |
| Detonator      |      13.00 |    1003 |
| Bird seed      |      10.00 |    1003 |
| Carrots        |       2.50 |    1003 |
| Safe           |      50.00 |    1003 |
| Sling          |       4.49 |    1003 |
| TNT (1 stick)  |       2.50 |    1003 |
| TNT (5 sticks) |      10.00 |    1003 |
+----------------+------------+---------+
9 rows in set (0.00 sec)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="计算次序"><a href="#计算次序" class="header-anchor">#</a> 计算次序</h3> <p><code>WHERE</code>可包含任意数目的<code>AND</code>和<code>OR</code>操作符。允许两者结合以进行复杂和高级的过滤。</p> <p>但是这样会带来一个问题，请看下面的SQL语句：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> prod_name<span class="token punctuation">,</span> prod_price <span class="token keyword">from</span> products <span class="token keyword">where</span> vend_id <span class="token operator">=</span> <span class="token number">1002</span> <span class="token operator">or</span> vend_id <span class="token operator">=</span> <span class="token number">1003</span> <span class="token operator">and</span> prod_price <span class="token operator">&gt;=</span> <span class="token number">10</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; select prod_name, prod_price from products where vend_id = 1002 or vend_id = 1003 and prod_price &gt;= 10;
+----------------+------------+
| prod_name      | prod_price |
+----------------+------------+
| Fuses          |       3.42 |
| Oil can        |       8.99 |
| Detonator      |      13.00 |
| Bird seed      |      10.00 |
| Safe           |      50.00 |
| TNT (5 sticks) |      10.00 |
+----------------+------------+
6 rows in set (0.00 sec)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>我们的预期是<em>列出价格为10美元（含）以上且由1002或1003制造的所有产品</em>。</p> <p>请看上面的结果。返回的行中有两行价格小于10美元，显然不符合预期。这样的原因在于<strong>计算的次序</strong>。</p> <p><strong>SQL在处理<code>OR</code>操作前，优先处理<code>AND</code>操作符</strong>。因此上述SQL语句可以理解为：<em>由供应商1003制造且价格为10美元（含）以上的产品，或者由供应商1002制造的任何产品，而不管其价格</em>。</p> <p>此类问题的解决办法是<strong>使用圆括号明确地分组相应的操作</strong>。修改后如下：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> prod_name<span class="token punctuation">,</span> prod_price <span class="token keyword">from</span> products <span class="token keyword">where</span> <span class="token punctuation">(</span>vend_id <span class="token operator">=</span> <span class="token number">1002</span> <span class="token operator">or</span> vend_id <span class="token operator">=</span> <span class="token number">1003</span><span class="token punctuation">)</span> <span class="token operator">and</span> prod_price <span class="token operator">&gt;=</span> <span class="token number">10</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; select prod_name, prod_price from products where (vend_id = 1002 or vend_id = 1003) and prod_price &gt;= 10;
+----------------+------------+
| prod_name      | prod_price |
+----------------+------------+
| Detonator      |      13.00 |
| Bird seed      |      10.00 |
| Safe           |      50.00 |
| TNT (5 sticks) |      10.00 |
+----------------+------------+
4 rows in set (0.00 sec)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><blockquote><p>不要过分的依赖默认计算次序。使用圆括号没什么坏处，它能消除歧义。</p></blockquote> <h3 id="in操作符"><a href="#in操作符" class="header-anchor">#</a> IN操作符</h3> <p>圆括号在<code>WHERE</code>子句中还有一种用法。<code>IN</code>操作符用来指定条件范围。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> prod_name<span class="token punctuation">,</span> prod_price <span class="token keyword">from</span> products <span class="token keyword">where</span> vend_id <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token number">1002</span><span class="token punctuation">,</span> <span class="token number">1003</span><span class="token punctuation">)</span> <span class="token keyword">order</span> <span class="token keyword">by</span> prod_name<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; select prod_name, prod_price from products where vend_id in (1002, 1003) order by prod_name;
+----------------+------------+
| prod_name      | prod_price |
+----------------+------------+
| Bird seed      |      10.00 |
| Carrots        |       2.50 |
| Detonator      |      13.00 |
| Fuses          |       3.42 |
| Oil can        |       8.99 |
| Safe           |      50.00 |
| Sling          |       4.49 |
| TNT (1 stick)  |       2.50 |
| TNT (5 sticks) |      10.00 |
+----------------+------------+
9 rows in set (0.00 sec)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><code>IN</code>操作符完成与<code>OR</code>相同的功能。</p> <p><code>IN</code>操作符的优点如下：</p> <ul><li>在使用长的合法选项清单时，<code>IN</code>操作符的语法更加清洗且更直观。</li> <li>在使用<code>IN</code>操作符时，计算的次序更容易管理。</li> <li><code>IN</code>操作符一般比<code>OR</code>操作符清单执行的更快。</li> <li><code>IN</code>操作符最大优点是可以包含其他<code>SELECT</code>语句（子查询），使得能够更加动态地建立<code>WHERE</code>子句。</li></ul> <h3 id="not操作符"><a href="#not操作符" class="header-anchor">#</a> NOT操作符</h3> <p>WHERE子句中NOT操作符有且只有一个功能，那就是否定它之后所跟的任何条件。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> prod_name<span class="token punctuation">,</span> prod_price <span class="token keyword">from</span> products <span class="token keyword">where</span> vend_id <span class="token operator">not</span> <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token number">1002</span><span class="token punctuation">,</span> <span class="token number">1003</span><span class="token punctuation">)</span> <span class="token keyword">order</span> <span class="token keyword">by</span> prod_name<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; select prod_name, prod_price from products where vend_id not in (1002, 1003) order by prod_name;
+--------------+------------+
| prod_name    | prod_price |
+--------------+------------+
| .5 ton anvil |       5.99 |
| 1 ton anvil  |       9.99 |
| 2 ton anvil  |      14.99 |
| JetPack 1000 |      35.00 |
| JetPack 2000 |      55.00 |
+--------------+------------+
5 rows in set (0.01 sec)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="第八章-用通配符进行过滤"><a href="#第八章-用通配符进行过滤" class="header-anchor">#</a> 第八章 用通配符进行过滤</h2> <h3 id="like操作符"><a href="#like操作符" class="header-anchor">#</a> LIKE操作符</h3> <ul><li>通配符：用来匹配值的一部分的特殊字符。实际是SQL的<code>WHERE</code>子句中有特殊含义的字符。</li> <li>搜索模式：由字面值、通配符或两者组合构成的搜索条件。</li></ul> <p>为了在搜索子句中使用通配符，必须使用LIKE操作符。LIKE指示MYSQL后跟的是搜索模式利用通配符匹配而不是直接相等匹配进行比较。</p> <table><thead><tr><th>Operator</th> <th>Condition</th> <th>Example</th></tr></thead> <tbody><tr><td>=</td> <td>Case sensitive exact string comparison (<em>notice the single equals</em>)</td> <td>col_name <strong>=</strong> &quot;abc&quot;</td></tr> <tr><td>!= or &lt;&gt;</td> <td>Case sensitive exact string inequality comparison</td> <td>col_name <strong>!=</strong> &quot;abcd&quot;</td></tr> <tr><td>LIKE</td> <td>Case insensitive exact string comparison</td> <td>col_name <strong>LIKE</strong> &quot;ABC&quot;</td></tr> <tr><td>NOT LIKE</td> <td>Case insensitive exact string inequality comparison</td> <td>col_name <strong>NOT LIKE</strong> &quot;ABCD&quot;</td></tr> <tr><td><strong>%</strong></td> <td>Used anywhere in a string to match a sequence of zero or more characters (<strong>only with LIKE or NOT LIKE</strong>)</td> <td>col_name <strong>LIKE</strong> &quot;%AT%&quot; (matches &quot;AT&quot;, &quot;ATTIC&quot;, &quot;CAT&quot; or even &quot;BATS&quot;)</td></tr> <tr><td><strong>_</strong></td> <td>Used anywhere in a string to match a single character (<strong>only with LIKE or NOT LIKE</strong>)</td> <td>col_name <strong>LIKE</strong> &quot;AN_&quot; (matches &quot;AND&quot;, but not &quot;AN&quot;)</td></tr> <tr><td>IN (…)</td> <td>String exists in a list</td> <td>col_name <strong>IN</strong> (&quot;A&quot;, &quot;B&quot;, &quot;C&quot;)</td></tr> <tr><td>NOT IN (…)</td> <td>String does not exist in a list</td> <td>col_name <strong>NOT IN</strong> (&quot;D&quot;, &quot;E&quot;, &quot;F&quot;)</td></tr></tbody></table> <h4 id="百分号-通配符"><a href="#百分号-通配符" class="header-anchor">#</a> 百分号（&amp;）通配符</h4> <p>在搜索串中，<code>%</code>表示<em>任何字符出现任意次数</em>。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> prod_id<span class="token punctuation">,</span> prod_name <span class="token keyword">from</span> products <span class="token keyword">where</span> prod_name <span class="token operator">like</span> <span class="token string">'jet%'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; select prod_id, prod_name from products where prod_name like 'jet%';
+---------+--------------+
| prod_id | prod_name    |
+---------+--------------+
| JP1000  | JetPack 1000 |
| JP2000  | JetPack 2000 |
+---------+--------------+
2 rows in set (0.00 sec)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><p>区分大小写：根据MySQL的配置方式，搜索可以是区分大小写的。如果区分大小写，'jet%'就不匹配 JetPack 1000。</p> <p><code>select prod_id, prod_name from products where prod_name like binary 'Jet%';</code>使用binary关键字设定where子句区分大小写。</p></blockquote> <p>通配符可在搜索模式中任意位置使用，并且可以使用多个通配符。例如：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> prod_id<span class="token punctuation">,</span> prod_name <span class="token keyword">from</span> products <span class="token keyword">where</span> prod_name <span class="token operator">like</span> <span class="token string">'%anvil%'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>注意尾空格：尾空格可能会干扰通配符匹配。例如在保存anvil时，如果它后面有一个或多个空格，则搜索模式『LIKE '%anvil'』不会匹配他们。解决这个问题的一个简单的办法是在搜索模式最后附加一个%。一个更好的方法是利用函数去掉首尾的空格。</p></blockquote> <blockquote><p>注意NULL：虽然似乎通配符%可以匹配任何东西，但有一个例外，即NULL。即使『LIKE '%'』搜索模式也不能匹配NULL。</p></blockquote> <p><strong>重要的是要注意到，除了一个和多个字符外，<code>%</code>还能匹配0个字符。</strong></p> <p>下面的例子是找出所有以s开头以e结尾的结尾的所有产品：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> prod_name <span class="token keyword">from</span> products <span class="token keyword">where</span> prod_name <span class="token operator">like</span> <span class="token string">'s%e'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="下划线-通配符"><a href="#下划线-通配符" class="header-anchor">#</a> 下划线（_）通配符</h4> <p>下划线的用途与%一样，但是下划线子匹配单个字符而不是多个字符。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> prod_name<span class="token punctuation">,</span> prod_id <span class="token keyword">from</span> products <span class="token keyword">where</span> prod_name <span class="token operator">like</span> <span class="token string">'_ ton anvil'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; select prod_name, prod_id from products where prod_name like '_ ton anvil';
+-------------+---------+
| prod_name   | prod_id |
+-------------+---------+
| 1 ton anvil | ANV02   |
| 2 ton anvil | ANV03   |
+-------------+---------+
2 rows in set (0.00 sec)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>与<code>%</code>能匹配0个字符不一样，<strong><code>_</code>总是匹配1个字符</strong>，不能多也不能少。</p> <h3 id="使用通配符的技巧"><a href="#使用通配符的技巧" class="header-anchor">#</a> 使用通配符的技巧</h3> <p>MySQL的通配符很有用，但是这种功能是有代价的：通配符搜索的处理一般要比前面讨论的其他搜索所花时间更长。因此：</p> <ul><li>不要过度使用通配符。</li> <li>在使用通配符时，除非有必要，否则不要把它们用在搜索模式的开始处。把通配符放在搜索模式的开始处，搜索起来是最慢的。</li> <li>注意通配符的位置。</li></ul> <h2 id="第九章-用正则表达式进行搜索"><a href="#第九章-用正则表达式进行搜索" class="header-anchor">#</a> 第九章 用正则表达式进行搜索</h2> <h3 id="基本字符匹配"><a href="#基本字符匹配" class="header-anchor">#</a> 基本字符匹配</h3> <p>下面语句检索列prod_name保含文本1000的所有行：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> prod_name <span class="token keyword">from</span> products <span class="token keyword">where</span> prod_name <span class="token operator">regexp</span> <span class="token string">'1000'</span> <span class="token keyword">order</span> <span class="token keyword">by</span> prod_name<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; select prod_name from products where prod_name regexp '1000' order by prod_name;
+--------------+
| prod_name    |
+--------------+
| JetPack 1000 |
+--------------+
1 row in set (0.00 sec)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>关键字<code>REGEXP</code>告诉MySQL：其后面跟着的东西作为正则表达式处理。</p> <h3 id="like和正则表达式区别"><a href="#like和正则表达式区别" class="header-anchor">#</a> LIKE和正则表达式区别</h3> <p>在LIKE和REGEXP质检有一个重要的差别。请看一下两条语句：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> prod_name <span class="token keyword">from</span> products <span class="token keyword">where</span> prod_name <span class="token operator">like</span> <span class="token string">'1000'</span> <span class="token keyword">order</span> <span class="token keyword">by</span> prod_name<span class="token punctuation">;</span>

<span class="token keyword">select</span> prod_name <span class="token keyword">from</span> products <span class="token keyword">where</span> prod_name <span class="token operator">regexp</span> <span class="token string">'1000'</span> <span class="token keyword">order</span> <span class="token keyword">by</span> prod_name<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>如果执行上述两条语句，会发现第一条语句不返回数据，而第二条返回一条数据。</p> <p>这是因为<code>LIKE</code>匹配整个列。如果被匹配的文本在列值中出现，<code>LIKE</code>不会找到它，相应的行也不会被返回（除非使用通配符）。</p> <p>而<code>REGEXP</code>在列值内进行匹配，如果被匹配的文本在列值中出现，<code>REGEXP</code>会找到它，相应的行会被返回。</p> <p>那REGEXP能不能用来匹配整个列，答案是肯定的，使用<code>^</code>和<code>$</code>定位符即可。</p> <h3 id="进行or匹配"><a href="#进行or匹配" class="header-anchor">#</a> 进行OR匹配</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> prod_name <span class="token keyword">from</span> products <span class="token keyword">where</span> prod_name <span class="token operator">regexp</span> <span class="token string">'1000|2000'</span> <span class="token keyword">order</span> <span class="token keyword">by</span> prod_name<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; select prod_name from products where prod_name regexp '1000|2000' order by prod_name;
+--------------+
| prod_name    |
+--------------+
| JetPack 1000 |
| JetPack 2000 |
+--------------+
2 rows in set (0.00 sec)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="匹配几个字符之一"><a href="#匹配几个字符之一" class="header-anchor">#</a> 匹配几个字符之一</h3> <p>如果你想匹配特定的字符，你可以指定一组用 [ 和 ] 括起来的字符来完成。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> prod_name <span class="token keyword">from</span> products <span class="token keyword">where</span> prod_name <span class="token operator">regexp</span> <span class="token string">'[123] Ton'</span> <span class="token keyword">order</span> <span class="token keyword">by</span> prod_name<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; select prod_name from products where prod_name regexp '[123] Ton' order by prod_name;
+-------------+
| prod_name   |
+-------------+
| 1 ton anvil |
| 2 ton anvil |
+-------------+
2 rows in set (0.01 sec)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>事实上，正则表达式[123] Ton 为 [1|2|3] Ton 的缩写，也可以使用后者。</p> <blockquote><p>'1 | 2 | 3 ton' 会被理解为1 或 2  或 3 ton。因此需要[]包裹。</p></blockquote> <p>字符集合也可以被否定，[123] 匹配字符1、2或3，但是[^123]却匹配除这些字符之外的任何东西。</p> <h3 id="匹配范围"><a href="#匹配范围" class="header-anchor">#</a> 匹配范围</h3> <p>下面的集合将匹配数字0到9：[0123456789]，为了简化这种写法，可用<code>-</code>来定义范围：[0-9];</p> <p>范围不限于完整的集合，[1-3]和[6-9]也是合法的。范围也不一定只是数值的，[a-z]匹配任意字母字符。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> prod_name <span class="token keyword">from</span> products <span class="token keyword">where</span> prod_name <span class="token operator">regexp</span> <span class="token string">'[1-5] Ton'</span> <span class="token keyword">order</span> <span class="token keyword">by</span> prod_name<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; select prod_name from products where prod_name regexp '[1-5] Ton' order by prod_name;
+--------------+
| prod_name    |
+--------------+
| .5 ton anvil |
| 1 ton anvil  |
| 2 ton anvil  |
+--------------+
3 rows in set (0.00 sec)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="匹配特殊字符"><a href="#匹配特殊字符" class="header-anchor">#</a> 匹配特殊字符</h3> <p>如何找出保含<code>.</code>字符的值？为了匹配特殊字符，必须用<code>\\</code>为前导。<code>\\-</code>表示查找<code>-</code>，<code>\\.</code>表示查找<code>.</code>。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> vend_name <span class="token keyword">from</span> vendors <span class="token keyword">where</span> vend_name <span class="token operator">regexp</span> <span class="token string">'\\.'</span> <span class="token keyword">order</span> <span class="token keyword">by</span> vend_name<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; select vend_name from vendors where vend_name regexp '\\.' order by vend_name;
+--------------+
| vend_name    |
+--------------+
| Furball Inc. |
+--------------+
1 row in set (0.00 sec)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><blockquote><p>匹配<code>\</code>字符本身：需要使用<code>\\\</code></p></blockquote> <p>多数正则表达式实现使用单个反斜杠转义特殊字符，以便能使用这些字符本身。但是MySQL要求两个反斜杠（MySQL自己解释一个，正则表达式库解释另一个）。</p> <h3 id="匹配字符类"><a href="#匹配字符类" class="header-anchor">#</a> 匹配字符类</h3> <p><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/20211212222215.png" alt=""></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> vend_name <span class="token keyword">from</span> vendors <span class="token keyword">where</span> vend_name <span class="token operator">regexp</span> <span class="token string">'[[:upper:]]'</span><span class="token punctuation">;</span>
<span class="token comment">//等价于</span>
<span class="token keyword">select</span> vend_name <span class="token keyword">from</span> vendors <span class="token keyword">where</span> vend_name <span class="token operator">regexp</span> <span class="token string">'[A-Z]'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="匹配多个实例"><a href="#匹配多个实例" class="header-anchor">#</a> 匹配多个实例</h3> <table><thead><tr><th>元字符</th> <th>说明</th></tr></thead> <tbody><tr><td>*</td> <td>0个或多个匹配</td></tr> <tr><td>+</td> <td>一个或多个匹配（等于{1,}）</td></tr> <tr><td>?</td> <td>0个或1个匹配（等于{0, 1}）</td></tr> <tr><td>{n}</td> <td>指定数目的匹配</td></tr> <tr><td>{n, }</td> <td>不少于指定数目的匹配</td></tr> <tr><td>{n, m}</td> <td>匹配数目的范围（m不超过255）</td></tr></tbody></table> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> prod_name <span class="token keyword">from</span> products <span class="token keyword">where</span> prod_name <span class="token operator">regexp</span> <span class="token string">'\\([0-9] sticks?\\)'</span> <span class="token keyword">order</span> <span class="token keyword">by</span> prod_name<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; select prod_name from products where prod_name regexp '\\([0-9] sticks?\\)' order by prod_name;
+----------------+
| prod_name      |
+----------------+
| TNT (1 stick)  |
| TNT (5 sticks) |
+----------------+
2 rows in set (0.00 sec)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>另外一个例子：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> prod_name <span class="token keyword">from</span> products <span class="token keyword">where</span> prod_name <span class="token operator">regexp</span> <span class="token string">'[[:digit:]]{4}'</span> <span class="token keyword">order</span> <span class="token keyword">by</span> prod_name<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; select prod_name from products where prod_name regexp '[[:digit:]]{4}' order by prod_name;
+--------------+
| prod_name    |
+--------------+
| JetPack 1000 |
| JetPack 2000 |
+--------------+
2 rows in set (0.00 sec)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>上面的例子也可如此编写：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> prod_name <span class="token keyword">from</span> products <span class="token keyword">where</span> prod_name <span class="token operator">regexp</span> <span class="token string">'[0-9][0-9][0-9][0-9]'</span> <span class="token keyword">order</span> <span class="token keyword">by</span> prod_name<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="定位符"><a href="#定位符" class="header-anchor">#</a> 定位符</h3> <p>为了匹配特定位置的文本，可以使用下列定位符：</p> <table><thead><tr><th>元字符</th> <th>说明</th></tr></thead> <tbody><tr><td>^</td> <td>文本的开始</td></tr> <tr><td>$</td> <td>文本的结尾</td></tr> <tr><td>[[:&lt;:]]</td> <td>词的开始</td></tr> <tr><td>[[:&gt;:]]</td> <td>词的结尾</td></tr></tbody></table> <p>例如找出以一个数（包括小数点开始的数）开始的所有产品：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> prod_name <span class="token keyword">from</span> products <span class="token keyword">where</span> prod_name <span class="token operator">regexp</span> <span class="token string">'^[[0-9]\\.]'</span> <span class="token keyword">order</span> <span class="token keyword">by</span> prod_name<span class="token punctuation">;</span>
<span class="token comment">// 或</span>
<span class="token keyword">select</span> prod_name <span class="token keyword">from</span> products <span class="token keyword">where</span> prod_name <span class="token operator">regexp</span> <span class="token string">'^[[:digit:]\\.]'</span> <span class="token keyword">order</span> <span class="token keyword">by</span> prod_name<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; select prod_name from products where prod_name regexp '^[[0-9]\\.]' order by prod_name;
+--------------+
| prod_name    |
+--------------+
| .5 ton anvil |
| 1 ton anvil  |
| 2 ton anvil  |
+--------------+
3 rows in set (0.00 sec)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><blockquote><p><code>^</code>的双重用途，在集合（用 [ 和 ] 定义）中，用它来否定该集合，否则，用来指串的开始处。</p></blockquote> <h4 id="简单的正则表达式测试"><a href="#简单的正则表达式测试" class="header-anchor">#</a> 简单的正则表达式测试</h4> <p>可以在不实用数据库表的情况下用<code>select</code>来测试正则表达式。<code>REGEXP</code>检查总是返回0（没有匹配）或者1（匹配）。</p> <p>语法如下：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token string">'hello'</span> <span class="token operator">regexp</span> <span class="token string">'[0-9]'</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token string">'hello'</span> <span class="token operator">regexp</span> <span class="token string">'[a-z]{2,}'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; select 'hello' regexp '[a-z]{2,}';
+----------------------------+
| 'hello' regexp '[a-z]{2,}' |
+----------------------------+
|                          1 |
+----------------------------+
1 row in set (0.00 sec)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="第十章-创建计算字段"><a href="#第十章-创建计算字段" class="header-anchor">#</a> 第十章 创建计算字段</h2> <h3 id="拼接字段"><a href="#拼接字段" class="header-anchor">#</a> 拼接字段</h3> <ul><li>拼接：将值联结到一起构成单个值。</li></ul> <p>可使用拼接函数<code>concat()</code>函数来拼接两个列。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> concat<span class="token punctuation">(</span>vend_name<span class="token punctuation">,</span> <span class="token string">'('</span><span class="token punctuation">,</span> vend_country <span class="token punctuation">,</span><span class="token string">')'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> vendors <span class="token keyword">order</span> <span class="token keyword">by</span> vend_name<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; select concat(vend_name, '(', vend_country ,')') from vendors order by vend_name;
+-------------------------------------------+
| concat(vend_name, '(', vend_country ,')') |
+-------------------------------------------+
| ACME(USA)                                 |
| Anvils R Us(USA)                          |
| Furball Inc.(USA)                         |
| Jet Set(England)                          |
| Jouets Et Ours(France)                    |
| LT Supplies(USA)                          |
+-------------------------------------------+
6 rows in set (0.00 sec)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><code>concat()</code>拼接串，即把多个串连接起来行成一个较长的串。</p> <blockquote><p>Trim函数：</p> <ul><li>RTrim() 去掉串右边的空格</li> <li>LTrim() 去掉串左边的空格</li> <li>Trim() 去掉串左右两边的空格</li></ul></blockquote> <h4 id="使用别名"><a href="#使用别名" class="header-anchor">#</a> 使用别名</h4> <p>别名是一个字段或值的替换名，有时也称为导出列。别名用<code>AS</code>关键字赋予。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> concat<span class="token punctuation">(</span>vend_name<span class="token punctuation">,</span> <span class="token string">'('</span><span class="token punctuation">,</span> vend_country <span class="token punctuation">,</span><span class="token string">')'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> vend_title <span class="token keyword">from</span> vendors <span class="token keyword">order</span> <span class="token keyword">by</span> vend_name<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; select concat(vend_name, '(', vend_country ,')') as vend_title from vendors order by vend_name;
+------------------------+
| vend_title             |
+------------------------+
| ACME(USA)              |
| Anvils R Us(USA)       |
| Furball Inc.(USA)      |
| Jet Set(England)       |
| Jouets Et Ours(France) |
| LT Supplies(USA)       |
+------------------------+
6 rows in set (0.00 sec)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="执行算术计算"><a href="#执行算术计算" class="header-anchor">#</a> 执行算术计算</h3> <table><thead><tr><th>操作符</th> <th>说明</th></tr></thead> <tbody><tr><td>+</td> <td>加</td></tr> <tr><td>-</td> <td>减</td></tr> <tr><td>*</td> <td>乘</td></tr> <tr><td>/</td> <td>除</td></tr></tbody></table> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> prod_id<span class="token punctuation">,</span>
			 quantity<span class="token punctuation">,</span>
			 item_price<span class="token punctuation">,</span>
			 quantity <span class="token operator">*</span> item_price <span class="token keyword">as</span> expanded_price
<span class="token keyword">from</span> orderitems <span class="token keyword">where</span> order_num <span class="token operator">=</span> <span class="token number">20005</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; select prod_id, quantity, item_price, quantity * item_price as expanded_price from orderitems where order_num = 20005;
+---------+----------+------------+----------------+
| prod_id | quantity | item_price | expanded_price |
+---------+----------+------------+----------------+
| ANV01   |       10 |       5.99 |          59.90 |
| ANV02   |        3 |       9.99 |          29.97 |
| TNT2    |        5 |      10.00 |          50.00 |
| FB      |        1 |      10.00 |          10.00 |
+---------+----------+------------+----------------+
4 rows in set (0.00 sec)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="如何测试计算"><a href="#如何测试计算" class="header-anchor">#</a> 如何测试计算</h3> <p><code>SELECT</code>提供了测试和试验函数与计算的一个很好的办法。虽然<code>SELECT</code>通常用来从表中检索数据，但可以省略<code>FROM</code>子句以便简单的访问和处理表达式。</p> <p>例如:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; select 3*3;
+-----+
| 3*3 |
+-----+
|   9 |
+-----+
1 row in set (0.00 sec)

mysql&gt; select now();
+---------------------+
| now()               |
+---------------------+
| 2021-12-13 23:06:40 |
+---------------------+
1 row in set (0.00 sec)

mysql&gt; select trim(' 345 ');
+---------------+
| trim(' 345 ') |
+---------------+
| 345           |
+---------------+
1 row in set (0.00 sec)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="第十一章-使用数据处理函数"><a href="#第十一章-使用数据处理函数" class="header-anchor">#</a> 第十一章 使用数据处理函数</h2> <h3 id="常用的文本处理函数"><a href="#常用的文本处理函数" class="header-anchor">#</a> 常用的文本处理函数</h3> <table><thead><tr><th>函数</th> <th>说明</th></tr></thead> <tbody><tr><td>left(str, num)</td> <td>返回串左边num位字符</td></tr> <tr><td>length(str)</td> <td>返回字符串的长度</td></tr> <tr><td>locate(substr, str, pos)</td> <td>返回从第pos尾查找第一次出现子字符串的位置，<a href="https://www.fujieace.com/mysql/functions/locate.html" target="_blank" rel="noopener noreferrer">参考文章<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td></tr> <tr><td>lower(str)</td> <td>将字符串转为小写</td></tr> <tr><td>ltrim(str)</td> <td>去掉字符串左边的空格</td></tr> <tr><td>right(str, num)</td> <td>返回串右边num位字符</td></tr> <tr><td>rtrim(str)</td> <td>去掉字符串右边的空格</td></tr> <tr><td>soundex(str)</td> <td>返回串的SOUNDEX值</td></tr> <tr><td>substring(str, pos)</td> <td>截取特定长度的字符串，substring(被截取字符串， 从第几位开始截取)</td></tr> <tr><td>substring(str, pos, length)</td> <td>substring(被截取字符串，从第几位开始截取，截取长度)</td></tr> <tr><td>upper(str)</td> <td>将串转为大写</td></tr> <tr><td>substring_index(str, delim, count)</td> <td>substring_index(被截取字符串，关键字，关键字出现的次数)</td></tr> <tr><td>trim(str)</td> <td>去掉字符串左右两边的空格</td></tr></tbody></table> <p>需要对<code>soundex</code>做出进一步解释。<code>soundex</code>是一个将任何文本串转为描述其语音表示的字母数字模式的算法。</p> <p>举个例子：customers表中有一个顾客Coyote Inc.，其联系名为Y Lee，但是如果这是输入错误，此联系人实际为Y Lie，怎么办？显然按照正确的联系名搜索不会返回数据，如下所示：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> cust_name<span class="token punctuation">,</span> cust_contact <span class="token keyword">from</span> customers <span class="token keyword">where</span> cust_contact <span class="token operator">=</span> <span class="token string">'Y Lie'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>现在使用<code>soundex()</code>函数进行搜索:</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> cust_name<span class="token punctuation">,</span> cust_contact <span class="token keyword">from</span> customers <span class="token keyword">where</span> soundex<span class="token punctuation">(</span>cust_contact<span class="token punctuation">)</span> <span class="token operator">=</span> soundex<span class="token punctuation">(</span><span class="token string">'Y Lie'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; select cust_name, cust_contact from customers where soundex(cust_contact) = soundex('Y Lie');
+-------------+--------------+
| cust_name   | cust_contact |
+-------------+--------------+
| Coyote Inc. | Y Lee        |
+-------------+--------------+
1 row in set (0.00 sec)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>每个函数的示例如下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>// left函数
mysql&gt; select left('ABcddrere', 3);
+----------------------+
| left('ABcddrere', 3) |
+----------------------+
| ABc                  |
+----------------------+
1 row in set (0.00 sec)
// length函数
mysql&gt; select length('ABcddrere');
+---------------------+
| length('ABcddrere') |
+---------------------+
|                   9 |
+---------------------+
1 row in set (0.00 sec)
// locate函数
mysql&gt; select locate('abc', 'eryabcyabcui');
+-------------------------------+
| locate('abc', 'eryabcyabcui') |
+-------------------------------+
|                             4 |
+-------------------------------+
1 row in set (0.00 sec)

mysql&gt; select locate('abc', 'eryabcyabcui', 5);
+----------------------------------+
| locate('abc', 'eryabcyabcui', 5) |
+----------------------------------+
|                                8 |
+----------------------------------+
1 row in set (0.00 sec)
// lower函数
mysql&gt; select lower('ABcddrere');
+--------------------+
| lower('ABcddrere') |
+--------------------+
| abcddrere          |
+--------------------+
1 row in set (0.00 sec)
// ltrim函数
mysql&gt; select ltrim('  ABcddrere');
+----------------------+
| ltrim('  ABcddrere') |
+----------------------+
| ABcddrere            |
+----------------------+
1 row in set (0.00 sec)
// right函数
mysql&gt; select right('ABcddrere', 3);
+-----------------------+
| right('ABcddrere', 3) |
+-----------------------+
| ere                   |
+-----------------------+
1 row in set (0.00 sec)
// rtrim函数
mysql&gt; select rtrim('ABcddrere  ');
+----------------------+
| rtrim('ABcddrere  ') |
+----------------------+
| ABcddrere            |
+----------------------+
1 row in set (0.00 sec)
// upper函数
mysql&gt; select upper('ABcddrere');
+--------------------+
| upper('ABcddrere') |
+--------------------+
| ABCDDRERE          |
+--------------------+
1 row in set (0.00 sec)
//trim函数
mysql&gt; select trim('   ABcddrere  ');
+------------------------+
| trim('   ABcddrere  ') |
+------------------------+
| ABcddrere              |
+------------------------+
1 row in set (0.00 sec)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br></div></div><p><code>substring()</code>函数和<code>substring_index()</code>函数示例如下：</p> <p><img src="https://gitee.com/yancqS/blogImage/raw/master/blogImage/20211214225213.png" alt=""></p> <h3 id="日期和时间处理函数"><a href="#日期和时间处理函数" class="header-anchor">#</a> 日期和时间处理函数</h3></div></div></div></main></div> <footer class="footer" data-v-6320141e><div class="footer-left-wrap" data-v-6320141e><ul class="contact" data-v-6320141e><li class="contact-item" data-v-6320141e><a href="https://github.com/yancqs" target="_blank" rel="noopener noreferrer" class="external" data-v-6320141e><span class="iconfont icon-github" data-v-6320141e></span></a></li><li class="contact-item" data-v-6320141e><a href="https://weibo.com/superYoha" target="_blank" rel="noopener noreferrer" class="external" data-v-6320141e><span class="iconfont icon-weibo" data-v-6320141e></span></a></li><li class="contact-item" data-v-6320141e><a href="https://www.zhihu.com/people/yoha-32-56" target="_blank" rel="noopener noreferrer" class="external" data-v-6320141e><span class="iconfont icon-zhihu" data-v-6320141e></span></a></li></ul></div> <div class="busuanzi" data-v-2369ea9e data-v-6320141e><span id="busuanzi_container_site_pv" data-v-2369ea9e>
    本站总访问量
    <span id="busuanzi_value_site_pv" data-v-2369ea9e></span>次
    <span class="post-meta-divider" data-v-2369ea9e>|</span></span> <span id="busuanzi_container_site_uv" data-v-2369ea9e>
    本站访客数
    <span id="busuanzi_value_site_uv" data-v-2369ea9e></span>人
  </span></div> <div class="footer-right-wrap" data-v-6320141e><ul class="copyright" data-v-6320141e><li class="copyright-item" data-v-6320141e><a href="https://policies.google.com/privacy?hl=en-US" target="_blank" rel="noopener noreferrer" class="external" data-v-6320141e>
            Privacy Policy
          </a></li><li class="copyright-item" data-v-6320141e><a data-v-6320141e>MIT Licensed Copyright © 2018-2022</a></li></ul></div></footer> <!----> <!----></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.ba836f96.js" defer></script><script src="/assets/js/8.29e13592.js" defer></script><script src="/assets/js/21.8a6083e1.js" defer></script><script src="/assets/js/6.a2bb49e4.js" defer></script><script src="/assets/js/7.d453e62b.js" defer></script><script src="/assets/js/10.ddca16e8.js" defer></script>
  </body>
</html>
